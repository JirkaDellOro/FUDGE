"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var FudgeCore;
(function (FudgeCore) {
    /**
     * Base class for the different DebugTargets, mainly for technical purpose of inheritance
     */
    class DebugTarget {
        static mergeArguments(_message, ..._args) {
            let out = _message.toString(); //JSON.stringify(_message);
            for (let arg of _args)
                if (arg instanceof Number)
                    out += ", " + arg.toPrecision(2).toString(); //JSON.stringify(arg, null, 2);
                else
                    out += ", " + arg.toString(); //JSON.stringify(arg, null, 2);
            return out;
        }
    }
    FudgeCore.DebugTarget = DebugTarget;
})(FudgeCore || (FudgeCore = {}));
// <reference path="DebugAlert.ts"/>
var FudgeCore;
// <reference path="DebugAlert.ts"/>
(function (FudgeCore) {
    /**
     * The filters corresponding to debug activities, more to come
     */
    let DEBUG_FILTER;
    (function (DEBUG_FILTER) {
        DEBUG_FILTER[DEBUG_FILTER["NONE"] = 0] = "NONE";
        DEBUG_FILTER[DEBUG_FILTER["INFO"] = 1] = "INFO";
        DEBUG_FILTER[DEBUG_FILTER["LOG"] = 2] = "LOG";
        DEBUG_FILTER[DEBUG_FILTER["WARN"] = 4] = "WARN";
        DEBUG_FILTER[DEBUG_FILTER["ERROR"] = 8] = "ERROR";
        DEBUG_FILTER[DEBUG_FILTER["FUDGE"] = 16] = "FUDGE";
        DEBUG_FILTER[DEBUG_FILTER["CLEAR"] = 256] = "CLEAR";
        DEBUG_FILTER[DEBUG_FILTER["GROUP"] = 257] = "GROUP";
        DEBUG_FILTER[DEBUG_FILTER["GROUPCOLLAPSED"] = 258] = "GROUPCOLLAPSED";
        DEBUG_FILTER[DEBUG_FILTER["GROUPEND"] = 260] = "GROUPEND";
        DEBUG_FILTER[DEBUG_FILTER["SOURCE"] = 512] = "SOURCE";
        DEBUG_FILTER[DEBUG_FILTER["MESSAGES"] = 31] = "MESSAGES";
        DEBUG_FILTER[DEBUG_FILTER["FORMAT"] = 263] = "FORMAT";
        DEBUG_FILTER[DEBUG_FILTER["ALL"] = 287] = "ALL";
    })(DEBUG_FILTER = FudgeCore.DEBUG_FILTER || (FudgeCore.DEBUG_FILTER = {}));
    FudgeCore.DEBUG_SYMBOL = {
        [DEBUG_FILTER.INFO]: "‚úì",
        [DEBUG_FILTER.LOG]: "‚úé",
        [DEBUG_FILTER.WARN]: "‚ö†",
        [DEBUG_FILTER.ERROR]: "‚ùå",
        [DEBUG_FILTER.FUDGE]: "üé≤",
        [DEBUG_FILTER.SOURCE]: "üîó"
    };
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
(function (FudgeCore) {
    /**
     * Routing to the standard-console
     */
    class DebugConsole extends FudgeCore.DebugTarget {
        /**
         * Should be used to display uncritical state information of FUDGE, only visible in browser's verbose mode
         */
        static fudge(_message, ..._args) {
            console.debug(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.FUDGE], _message, ..._args);
        }
        /**
         * Displays an extra line with information about the source of the debug message
         */
        static source(_message, ..._args) {
            console.log(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.SOURCE], _message, ..._args);
        }
    }
    DebugConsole.delegates = {
        [FudgeCore.DEBUG_FILTER.INFO]: console.info,
        [FudgeCore.DEBUG_FILTER.LOG]: console.log,
        [FudgeCore.DEBUG_FILTER.WARN]: console.warn,
        [FudgeCore.DEBUG_FILTER.ERROR]: console.error,
        [FudgeCore.DEBUG_FILTER.FUDGE]: DebugConsole.fudge,
        [FudgeCore.DEBUG_FILTER.CLEAR]: console.clear,
        [FudgeCore.DEBUG_FILTER.GROUP]: console.group,
        [FudgeCore.DEBUG_FILTER.GROUPCOLLAPSED]: console.groupCollapsed,
        [FudgeCore.DEBUG_FILTER.GROUPEND]: console.groupEnd,
        [FudgeCore.DEBUG_FILTER.SOURCE]: DebugConsole.source
    };
    FudgeCore.DebugConsole = DebugConsole;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
/// <reference path="DebugInterfaces.ts"/>
/// <reference path="DebugConsole.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
/// <reference path="DebugInterfaces.ts"/>
/// <reference path="DebugConsole.ts"/>
(function (FudgeCore) {
    /**
     * The Debug-Class offers functions known from the console-object and additions,
     * routing the information to various {@link DebugTarget}s that can be easily defined by the developers and registerd by users
     * Override functions in subclasses of {@link DebugTarget} and register them as their delegates
     */
    class Debug {
        /**
         * De- / Activate a filter for the given DebugTarget.
         */
        static setFilter(_target, _filter) {
            for (let filter in Debug.delegates)
                Debug.delegates[filter].delete(_target);
            for (let filter in FudgeCore.DEBUG_FILTER) {
                let parsed = parseInt(filter);
                if (isNaN(parsed))
                    break;
                if ([FudgeCore.DEBUG_FILTER.MESSAGES, FudgeCore.DEBUG_FILTER.FORMAT, FudgeCore.DEBUG_FILTER.ALL].indexOf(parsed) != -1)
                    // dont delegate combos... 
                    continue;
                if (_filter & parsed)
                    Debug.delegates[parsed].set(_target, _target.delegates[parsed]);
            }
        }
        static getFilter(_target) {
            let result = 0;
            for (let filter in _target.delegates)
                result |= parseInt(filter);
            return result;
        }
        static addFilter(_target, _filter) {
            let current = Debug.getFilter(_target);
            Debug.setFilter(_target, current | _filter);
        }
        static removeFilter(_target, _filter) {
            let current = Debug.getFilter(_target);
            Debug.setFilter(_target, current ^ _filter);
        }
        /**
         * Info(...) displays additional information with low priority
         */
        static info(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.INFO, _message, _args);
        }
        /**
         * Displays information with medium priority
         */
        static log(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.LOG, _message, _args);
        }
        /**
         * Displays information about non-conformities in usage, which is emphasized e.g. by color
         */
        static warn(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.WARN, _message, _args);
        }
        /**
         * Displays critical information about failures, which is emphasized e.g. by color
         */
        static error(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.ERROR, _message, _args);
        }
        /**
         * Displays messages from FUDGE
         */
        static fudge(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.FUDGE, _message, _args);
        }
        /**
         * Clears the output and removes previous messages if possible
         */
        static clear() {
            Debug.delegate(FudgeCore.DEBUG_FILTER.CLEAR, null, null);
        }
        /**
         * Opens a new group for messages
         */
        static group(_name) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.GROUP, _name, null);
        }
        /**
         * Opens a new group for messages that is collapsed at first
         */
        static groupCollapsed(_name) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.GROUPCOLLAPSED, _name, null);
        }
        /**
         * Closes the youngest group
         */
        static groupEnd() {
            Debug.delegate(FudgeCore.DEBUG_FILTER.GROUPEND, null, null);
        }
        /**
         * Log a branch of the node hierarchy
         */
        static branch(_branch) {
            if (_branch.nChildren > 0)
                Debug.group(_branch.name);
            else
                Debug.fudge(_branch.name);
            for (let child of _branch.getChildren())
                Debug.branch(child);
            if (_branch.nChildren > 0)
                Debug.groupEnd();
        }
        /**
         * Displays messages about the source of the debug call
         */
        static source(_message, ..._args) {
            Debug.delegate(FudgeCore.DEBUG_FILTER.SOURCE, _message, _args);
        }
        /**
         * Lookup all delegates registered to the filter and call them using the given arguments
         */
        static delegate(_filter, _message, _args) {
            if (_filter == FudgeCore.DEBUG_FILTER.LOG || _filter == FudgeCore.DEBUG_FILTER.WARN || _filter == FudgeCore.DEBUG_FILTER.ERROR) {
                if (Debug.delegates[FudgeCore.DEBUG_FILTER.SOURCE])
                    for (let delegate of Debug.delegates[FudgeCore.DEBUG_FILTER.SOURCE].values())
                        if (delegate) {
                            let trace = new Error("Test").stack.split("\n");
                            delegate(trace[3]);
                        }
            }
            let delegates = Debug.delegates[_filter];
            for (let delegate of delegates.values())
                if (delegate)
                    if (_args && _args.length > 0)
                        delegate(_message, ..._args);
                    else
                        delegate(_message);
        }
        /**
         * setup routing to standard console
         */
        static setupConsole() {
            let result = {};
            let filters = [
                FudgeCore.DEBUG_FILTER.INFO, FudgeCore.DEBUG_FILTER.LOG, FudgeCore.DEBUG_FILTER.WARN, FudgeCore.DEBUG_FILTER.ERROR, FudgeCore.DEBUG_FILTER.FUDGE,
                FudgeCore.DEBUG_FILTER.CLEAR, FudgeCore.DEBUG_FILTER.GROUP, FudgeCore.DEBUG_FILTER.GROUPCOLLAPSED, FudgeCore.DEBUG_FILTER.GROUPEND,
                FudgeCore.DEBUG_FILTER.SOURCE
            ];
            for (let filter of filters)
                result[filter] = new Map([[FudgeCore.DebugConsole, FudgeCore.DebugConsole.delegates[filter]]]);
            result[FudgeCore.DEBUG_FILTER.SOURCE].delete(FudgeCore.DebugConsole);
            return result;
        }
    }
    /**
     * For each set filter, this associative array keeps references to the registered delegate functions of the chosen {@link DebugTarget}s
     */
    Debug.delegates = Debug.setupConsole();
    FudgeCore.Debug = Debug;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /** Extends EventTarget to work with {@link EventListenerUnified} and {@link EventUnified} */
    class EventTargetUnified extends EventTarget {
        addEventListener(_type, _handler, _options) {
            super.addEventListener(_type, _handler, _options);
        }
        removeEventListener(_type, _handler, _options) {
            super.removeEventListener(_type, _handler, _options);
        }
        dispatchEvent(_event) {
            return super.dispatchEvent(_event);
        }
    }
    FudgeCore.EventTargetUnified = EventTargetUnified;
    /**
     * Base class for EventTarget singletons, which are fixed entities in the structure of FUDGE, such as the core loop
     */
    class EventTargetStatic extends EventTargetUnified {
        constructor() {
            super();
        }
        static addEventListener(_type, _handler) {
            EventTargetStatic.targetStatic.addEventListener(_type, _handler);
        }
        static removeEventListener(_type, _handler) {
            EventTargetStatic.targetStatic.removeEventListener(_type, _handler);
        }
        static dispatchEvent(_event) {
            EventTargetStatic.targetStatic.dispatchEvent(_event);
            return true;
        }
    }
    EventTargetStatic.targetStatic = new EventTargetStatic();
    FudgeCore.EventTargetStatic = EventTargetStatic;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    // export interface MutatorForComponent extends Mutator { readonly forUserComponent: null; }
    /**
     * Collect applicable attributes of the instance and copies of their values in a Mutator-object
     */
    function getMutatorOfArbitrary(_object) {
        let mutator = {};
        let attributes = Reflect.ownKeys(Reflect.getPrototypeOf(_object));
        for (let attribute of attributes) {
            let value = Reflect.get(_object, attribute);
            if (value instanceof Function)
                continue;
            // if (value instanceof Object && !(value instanceof Mutable))
            //   continue;
            mutator[attribute.toString()] = value;
        }
        return mutator;
    }
    FudgeCore.getMutatorOfArbitrary = getMutatorOfArbitrary;
    /**
     * Base class for all types being mutable using {@link Mutator}-objects, thus providing and using interfaces created at runtime.
     * Mutables provide a {@link Mutator} that is build by collecting all object-properties that are either of a primitive type or again Mutable.
     * Subclasses can either reduce the standard {@link Mutator} built by this base class by deleting properties or implement an individual getMutator-method.
     * The provided properties of the {@link Mutator} must match public properties or getters/setters of the object.
     * Otherwise, they will be ignored if not handled by an override of the mutate-method in the subclass and throw errors in an automatically generated user-interface for the object.
     */
    class Mutable extends FudgeCore.EventTargetUnified {
        /**
         * Decorator allows to attach {@link Mutable} functionality to existing classes.
         */
        // public static decorate(_constructor: Function): void {
        //   Object.defineProperty(_constructor.prototype, "useRenderData", {
        //     value: function getMutator(this: MutableForUserInterface): Mutator {
        //       return getMutatorOfArbitrary(this);
        //     }
        //   });
        // }
        static getMutatorFromPath(_mutator, _path) {
            let key = _path[0];
            let mutator = {};
            if (_mutator[key] == undefined) // if the path deviates from mutator structure, return the mutator
                return _mutator;
            mutator[key] = _mutator[key];
            if (_path.length > 1)
                mutator[key] = Mutable.getMutatorFromPath(mutator[key], _path.slice(1, _path.length));
            return mutator;
        }
        /**
         * Retrieves the type of this mutable subclass as the name of the runtime class
         * @returns The type of the mutable
         */
        get type() {
            return this.constructor.name;
        }
        /**
         * Collect applicable attributes of the instance and copies of their values in a Mutator-object.
         * By default, a mutator cannot be extended, since extensions are not available in the object the mutator belongs to.
         * A mutator may be reduced by the descendants of {@link Mutable} to contain only the properties needed.
         */
        getMutator(_extendable = false) {
            let mutator = {};
            // collect primitive and mutable attributes
            for (let attribute in this) {
                let value = this[attribute];
                if (value instanceof Function)
                    continue;
                if (value instanceof Object && !(value instanceof Mutable) && !(value instanceof FudgeCore.MutableArray) && !(value.hasOwnProperty("idResource")))
                    continue;
                mutator[attribute] = this[attribute];
            }
            if (!_extendable)
                // mutator can be reduced but not extended!
                Object.preventExtensions(mutator);
            // delete unwanted attributes
            this.reduceMutator(mutator);
            // replace references to mutable objects with references to mutators
            for (let attribute in mutator) {
                let value = mutator[attribute];
                if (value instanceof Mutable)
                    mutator[attribute] = value.getMutator();
                if (value instanceof FudgeCore.MutableArray)
                    mutator[attribute] = value.map((_value) => _value.getMutator());
            }
            return mutator;
        }
        /**
         * Collect the attributes of the instance and their values applicable for animation.
         * Basic functionality is identical to {@link getMutator}, returned mutator should then be reduced by the subclassed instance
         */
        getMutatorForAnimation() {
            return this.getMutator();
        }
        /**
         * Collect the attributes of the instance and their values applicable for the user interface.
         * Basic functionality is identical to {@link getMutator}, returned mutator should then be reduced by the subclassed instance
         */
        getMutatorForUserInterface() {
            return this.getMutator();
        }
        /**
         * Collect the attributes of the instance and their values applicable for indiviualization by the component.
         * Basic functionality is identical to {@link getMutator}, returned mutator should then be reduced by the subclassed instance
         */
        // public getMutatorForComponent(): MutatorForComponent {
        //     return <MutatorForComponent>this.getMutator();
        // }
        /**
         * Returns an associative array with the same attributes as the given mutator, but with the corresponding types as string-values
         * Does not recurse into objects!
         */
        getMutatorAttributeTypes(_mutator) {
            let types = {};
            for (let attribute in _mutator) {
                let type = null;
                let value = _mutator[attribute];
                if (_mutator[attribute] != undefined)
                    if (typeof (value) == "object")
                        type = this[attribute].constructor.name;
                    else if (typeof (value) == "function")
                        type = value["name"];
                    else
                        type = _mutator[attribute].constructor.name;
                types[attribute] = type;
            }
            return types;
        }
        /**
         * Updates the values of the given mutator according to the current state of the instance
         * @param _mutator
         */
        updateMutator(_mutator) {
            for (let attribute in _mutator) {
                let value = _mutator[attribute];
                if (value instanceof Mutable)
                    _mutator[attribute] = value.getMutator();
                else
                    _mutator[attribute] = this[attribute];
            }
        }
        /**
         * Updates the attribute values of the instance according to the state of the mutator.
         * The mutation may be restricted to a subset of the mutator and the event dispatching suppressed.
         * Uses mutateBase, but can be overwritten in subclasses
         */
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            await this.mutateBase(_mutator, _selection);
            if (_dispatchMutate)
                this.dispatchEvent(new CustomEvent("mutate" /* MUTATE */, { bubbles: true, detail: { mutator: _mutator } }));
        }
        /**
         * Base method for mutation, always available to subclasses. Do not overwrite in subclasses!
         */
        async mutateBase(_mutator, _selection) {
            let mutator = {};
            if (!_selection)
                mutator = _mutator;
            else
                for (let attribute of _selection) // reduce the mutator to the selection
                    if (typeof (_mutator[attribute]) !== "undefined")
                        mutator[attribute] = _mutator[attribute];
            for (let attribute in mutator) {
                if (!Reflect.has(this, attribute))
                    continue;
                let mutant = Reflect.get(this, attribute);
                let value = mutator[attribute];
                if (mutant instanceof FudgeCore.MutableArray || mutant instanceof Mutable)
                    await mutant.mutate(value, null, false);
                else
                    Reflect.set(this, attribute, value);
            }
        }
    }
    FudgeCore.Mutable = Mutable;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Handles the external serialization and deserialization of {@link Serializable} objects. The internal process is handled by the objects themselves.
     * A {@link Serialization} object can be created from a {@link Serializable} object and a JSON-String may be created from that.
     * Vice versa, a JSON-String can be parsed to a {@link Serialization} which can be deserialized to a {@link Serializable} object.
     * ```plaintext
     *  [Serializable] ‚Üí (serialize) ‚Üí [Serialization] ‚Üí (stringify) ‚Üí [String] ‚Üí (save or send)
     *                                        ‚Üì                            ‚Üì                  ‚Üì
     *                [Serializable] ‚Üê (deserialize) ‚Üê [Serialization] ‚Üê (parse) ‚Üê (load) ‚Üê [Medium]
     * ```
     * While the internal serialize/deserialize method1s of the objects care of the selection of information needed to recreate the object and its structure,
     * the {@link Serializer} keeps track of the namespaces and classes in order to recreate {@link Serializable} objects. The general structure of a {@link Serialization} is as follows
     * ```plaintext
     * {
     *      namespaceName.className: {
     *          propertyName: propertyValue,
     *          ...,
     *          propertyNameOfReference: SerializationOfTheReferencedObject,
     *          ...,
     *          constructorNameOfSuperclass: SerializationOfSuperClass
     *      }
     * }
     * ```
     * Since the instance of the superclass is created automatically when an object is created,
     * the SerializationOfSuperClass omits the the namespaceName.className key and consists only of its value.
     * The constructorNameOfSuperclass is given instead as a property name in the serialization of the subclass.
     */
    class Serializer {
        /**
         * Registers a namespace to the {@link Serializer}, to enable automatic instantiation of classes defined within
         * @param _namespace
         */
        static registerNamespace(_namespace) {
            for (let name in Serializer.namespaces)
                if (Serializer.namespaces[name] == _namespace)
                    return name;
            let name = Serializer.findNamespaceIn(_namespace, window);
            if (!name)
                for (let parentName in Serializer.namespaces) {
                    name = Serializer.findNamespaceIn(_namespace, Serializer.namespaces[parentName]);
                    if (name) {
                        name = parentName + "." + name;
                        break;
                    }
                }
            if (!name)
                throw new Error("Namespace not found. Maybe parent namespace hasn't been registered before?");
            Serializer.namespaces[name] = _namespace;
            return name;
        }
        /**
         * Returns a javascript object representing the serializable FUDGE-object given,
         * including attached components, children, superclass-objects all information needed for reconstruction
         * @param _object An object to serialize, implementing the {@link Serializable} interface
         */
        static serialize(_object) {
            let serialization = {};
            // TODO: save the namespace with the constructors name
            // serialization[_object.constructor.name] = _object.serialize();
            let path = this.getFullPath(_object);
            if (!path)
                throw new Error(`Namespace of serializable object of type ${_object.constructor.name} not found. Maybe the namespace hasn't been registered or the class not exported?`);
            serialization[path] = _object.serialize();
            return serialization;
            // return _object.serialize();
        }
        /**
         * Returns a FUDGE-object reconstructed from the information in the {@link Serialization} given,
         * including attached components, children, superclass-objects
         * @param _serialization
         */
        static async deserialize(_serialization) {
            let reconstruct;
            let path;
            try {
                // loop constructed solely to access type-property. Only one expected!
                for (path in _serialization) {
                    reconstruct = Serializer.reconstruct(path);
                    reconstruct = await reconstruct.deserialize(_serialization[path]);
                    return reconstruct;
                }
            }
            catch (_error) {
                let message = `Deserialization of ${path}, ${reconstruct ? Reflect.get(reconstruct, "idResource") : ""} failed: ` + _error;
                throw new Error(message);
            }
            return null;
        }
        /**
         * Returns an Array of javascript object representing the serializable FUDGE-objects given in the array,
         * including attached components, children, superclass-objects all information needed for reconstruction
         * @param _object An object to serialize, implementing the {@link Serializable} interface
         */
        static serializeArray(_type, _objects) {
            let serializations = [];
            let path = this.getFullPath(new _type());
            if (!path)
                throw new Error(`Namespace of serializable object of type ${_type.name} not found. Maybe the namespace hasn't been registered or the class not exported?`);
            for (let object of _objects)
                serializations.push(object.serialize());
            let serialization = {};
            serialization[path] = serializations;
            return serialization;
        }
        /**
         * Returns an Array of FUDGE-objects reconstructed from the information in the array of {@link Serialization}s given,
         * including attached components, children, superclass-objects
         * @param _serializations
         */
        static async deserializeArray(_serialization) {
            let serializables = [];
            let construct;
            let serializations = [];
            try {
                // loop constructed solely to access type-property. Only one expected!
                for (let path in _serialization) {
                    construct = Serializer.getConstructor(path);
                    serializations = _serialization[path];
                    break;
                }
            }
            catch (_error) {
                throw new Error("Deserialization failed: " + _error);
            }
            for (let serialization of serializations) {
                let serializable = new construct();
                await serializable.deserialize(serialization);
                serializables.push(serializable);
            }
            return serializables;
        }
        //TODO: implement prettifier to make JSON-Stringification of serializations more readable, e.g. placing x, y and z in one line
        static prettify(_json) { return _json; }
        /**
         * Returns a formatted, human readable JSON-String, representing the given {@link Serialization} that may have been created by {@link Serializer}.serialize
         * @param _serialization
         */
        static stringify(_serialization) {
            // adjustments to serialization can be made here before stringification, if desired
            let json = JSON.stringify(_serialization, null, 2);
            let pretty = Serializer.prettify(json);
            return pretty;
        }
        /**
         * Returns a {@link Serialization} created from the given JSON-String. Result may be passed to {@link Serializer.deserialize}
         * @param _json
         */
        static parse(_json) {
            return JSON.parse(_json);
        }
        /**
         * Creates an object of the class defined with the full path including the namespaceName(s) and the className seperated by dots(.)
         * @param _path
         */
        static reconstruct(_path) {
            let constructor = Serializer.getConstructor(_path);
            let reconstruction = new constructor();
            return reconstruction;
        }
        // public static getConstructor<T extends Serializable>(_type: string, _namespace: Object = FudgeCore): new () => T {
        static getConstructor(_path) {
            let typeName = _path.substring(_path.lastIndexOf(".") + 1);
            let namespace = Serializer.getNamespace(_path);
            if (!namespace)
                throw new Error(`Constructor of serializable object of type ${_path} not found. Maybe the namespace hasn't been registered?`);
            return namespace[typeName];
        }
        /**
         * Returns the full path to the class of the object, if found in the registered namespaces
         * @param _object
         */
        static getFullPath(_object) {
            let typeName = _object.constructor.name;
            // Debug.log("Searching namespace of: " + typeName);
            for (let namespaceName in Serializer.namespaces) {
                let found = Serializer.namespaces[namespaceName][typeName];
                if (found && _object instanceof found)
                    return namespaceName + "." + typeName;
            }
            return null;
        }
        /**
         * Returns the namespace-object defined within the full path, if registered
         * @param _path
         */
        static getNamespace(_path) {
            let namespaceName = _path.substr(0, _path.lastIndexOf("."));
            return Serializer.namespaces[namespaceName] || FudgeCore;
        }
        /**
         * Finds the namespace-object in properties of the parent-object (e.g. window), if present
         * @param _namespace
         * @param _parent
         */
        static findNamespaceIn(_namespace, _parent) {
            for (let prop in _parent)
                if (_parent[prop] == _namespace)
                    return prop;
            return null;
        }
    }
    /** In order for the Serializer to create class instances, it needs access to the appropriate namespaces */
    Serializer.namespaces = { "∆í": FudgeCore };
    FudgeCore.Serializer = Serializer;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Represents a node in the scenetree.
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Graph
     */
    class Node extends FudgeCore.EventTargetUnified {
        /**
         * Creates a new node with a name and initializes all attributes
         */
        constructor(_name) {
            super();
            this.mtxWorld = FudgeCore.Matrix4x4.IDENTITY();
            this.timestampUpdate = 0;
            /** The number of nodes of the whole branch including this node and all successors */
            this.nNodesInBranch = 0;
            /** The radius of the bounding sphere in world dimensions enclosing the geometry of this node and all successors in the branch */
            this.radius = 0;
            this.parent = null; // The parent of this node.
            this.children = []; // array of child nodes appended to this node.
            this.components = {};
            // private tags: string[] = []; // Names of tags that are attached to this node. (TODO: As of yet no functionality)
            // private layers: string[] = []; // Names of the layers this node is on. (TODO: As of yet no functionality)
            this.listeners = {};
            this.captures = {};
            this.active = true;
            /**
             * Simply calls {@link addChild}. This reference is here solely because appendChild is the equivalent method in DOM.
             * See and preferably use {@link addChild}
             */
            // tslint:disable-next-line: member-ordering
            this.appendChild = this.addChild;
            this.name = _name;
        }
        #mtxWorldInverseUpdated;
        #mtxWorldInverse;
        get isActive() {
            return this.active;
        }
        /**
         * Shortcut to retrieve this nodes {@link ComponentTransform}
         */
        get cmpTransform() {
            return this.getComponents(FudgeCore.ComponentTransform)[0];
        }
        /**
         * Shortcut to retrieve the local {@link Matrix4x4} attached to this nodes {@link ComponentTransform}
         * Fails if no {@link ComponentTransform} is attached
         */
        get mtxLocal() {
            return this.cmpTransform.mtxLocal;
        }
        get mtxWorldInverse() {
            if (this.#mtxWorldInverseUpdated != this.timestampUpdate)
                this.#mtxWorldInverse = FudgeCore.Matrix4x4.INVERSION(this.mtxWorld);
            this.#mtxWorldInverseUpdated = this.timestampUpdate;
            return this.#mtxWorldInverse;
        }
        /**
         * Returns the number of children attached to this
         */
        get nChildren() {
            return this.children.length;
        }
        /**
         * Generator yielding the node and all decendants in the graph below for iteration
         * Inactive nodes and their descendants can be filtered
         */
        *getIterator(_active = false) {
            if (!_active || this.isActive) {
                yield this;
                for (let child of this.children)
                    yield* child.getIterator(_active);
            }
        }
        [Symbol.iterator]() {
            return this.getIterator();
        }
        activate(_on) {
            this.active = _on;
            this.dispatchEvent(new Event(_on ? "nodeActivate" /* NODE_ACTIVATE */ : "nodeDeactivate" /* NODE_DEACTIVATE */, { bubbles: true }));
            this.broadcastEvent(new Event(_on ? "nodeActivate" /* NODE_ACTIVATE */ : "nodeDeactivate" /* NODE_DEACTIVATE */));
        }
        // #region Scenetree
        /**
         * Returns a reference to this nodes parent node
         */
        getParent() {
            return this.parent;
        }
        /**
         * Traces back the ancestors of this node and returns the first
         */
        getAncestor() {
            let ancestor = this;
            while (ancestor.getParent())
                ancestor = ancestor.getParent();
            return ancestor;
        }
        /**
         * Traces the hierarchy upwards to the first ancestor and returns the path through the graph to this node
         */
        getPath() {
            let ancestor = this;
            let path = [this];
            while (ancestor.getParent())
                path.unshift(ancestor = ancestor.getParent());
            return path;
        }
        /**
         * Returns child at the given index in the list of children
         */
        getChild(_index) {
            return this.children[_index];
        }
        /**
         * Returns a clone of the list of children
         */
        getChildren() {
            return this.children.slice(0);
        }
        /**
         * Returns an array of references to childnodes with the supplied name.
         */
        getChildrenByName(_name) {
            let found = [];
            found = this.children.filter((_node) => _node.name == _name);
            return found;
        }
        /**
         * Adds the given reference to a node to the list of children, if not already in
         * @throws Error when trying to add an ancestor of this
         */
        addChild(_child) {
            if (this.children.includes(_child))
                // _node is already a child of this
                return;
            let inAudioGraph = false;
            let graphListened = FudgeCore.AudioManager.default.getGraphListeningTo();
            let ancestor = this;
            while (ancestor) {
                ancestor.timestampUpdate = 0;
                inAudioGraph = inAudioGraph || (ancestor == graphListened);
                if (ancestor == _child)
                    throw (new Error("Cyclic reference prohibited in node hierarchy, ancestors must not be added as children"));
                else
                    ancestor = ancestor.parent;
            }
            let previousParent = _child.parent;
            if (previousParent)
                previousParent.removeChild(_child);
            this.children.push(_child);
            _child.parent = this;
            _child.dispatchEvent(new Event("childAppend" /* CHILD_APPEND */, { bubbles: true }));
            if (inAudioGraph)
                _child.broadcastEvent(new Event("childAppendToAudioGraph" /* CHILD_APPEND */));
        }
        /**
         * Removes the reference to the give node from the list of children
         */
        removeChild(_child) {
            let found = this.findChild(_child);
            if (found < 0)
                return;
            _child.dispatchEvent(new Event("childRemove" /* CHILD_REMOVE */, { bubbles: true }));
            _child.broadcastEvent(new Event("nodeDeactivate" /* NODE_DEACTIVATE */));
            if (this.isDescendantOf(FudgeCore.AudioManager.default.getGraphListeningTo()))
                _child.broadcastEvent(new Event("childRemoveFromAudioGraph" /* CHILD_REMOVE */));
            this.children.splice(found, 1);
            _child.parent = null;
        }
        /**
         * Removes all references in the list of children
         */
        removeAllChildren() {
            while (this.children.length)
                this.removeChild(this.children[0]);
        }
        /**
         * Returns the position of the node in the list of children or -1 if not found
         */
        findChild(_search) {
            return this.children.indexOf(_search);
        }
        /**
         * Replaces a child node with another, preserving the position in the list of children
         */
        replaceChild(_replace, _with) {
            let found = this.findChild(_replace);
            if (found < 0)
                return false;
            let previousParent = _with.getParent();
            if (previousParent)
                previousParent.removeChild(_with);
            _replace.parent = null;
            this.children[found] = _with;
            _with.parent = this;
            _with.dispatchEvent(new Event("childAppend" /* CHILD_APPEND */, { bubbles: true }));
            if (this.isDescendantOf(FudgeCore.AudioManager.default.getGraphListeningTo()))
                _with.broadcastEvent(new Event("childAppendToAudioGraph" /* CHILD_APPEND */));
            return true;
        }
        isUpdated(_timestampUpdate) {
            return (this.timestampUpdate == _timestampUpdate);
        }
        isDescendantOf(_ancestor) {
            let node = this;
            while (node && node != _ancestor)
                node = node.parent;
            return (node != null);
        }
        /**
         * Applies a Mutator from {@link Animation} to all its components and transfers it to its children.
         */
        applyAnimation(_mutator) {
            if ("components" in _mutator) {
                for (const componentType in _mutator.components) {
                    let componentsOfType = this.components[componentType]; // TODO: add errors if node doesn't contain property
                    let mutatorsForType = _mutator.components[componentType];
                    if (componentsOfType != undefined && mutatorsForType != undefined) {
                        for (const i in mutatorsForType) {
                            componentsOfType[i].mutate(mutatorsForType[i], null, false);
                        }
                    }
                }
            }
            if ("children" in _mutator) {
                for (const childName in _mutator.children) {
                    for (const childNode of this.getChildrenByName(childName)) {
                        childNode.applyAnimation(_mutator.children[childName]);
                    }
                }
            }
        }
        // #endregion
        // #region Components
        /**
         * Returns a list of all components attached to this node, independent of type.
         */
        getAllComponents() {
            let all = [];
            for (let type in this.components) {
                all = all.concat(this.components[type]);
            }
            return all;
        }
        /**
         * Returns a clone of the list of components of the given class attached to this node.
         */
        getComponents(_class) {
            return (this.components[_class.name] || []).slice(0);
        }
        /**
         * Returns the first compontent found of the given class attached this node or null, if list is empty or doesn't exist
         */
        getComponent(_class) {
            let list = this.components[_class.name];
            if (list)
                return list[0];
            return null;
        }
        /**
         * Attach the given component to this node. Identical to {@link addComponent}
         */
        attach(_component) {
            this.addComponent(_component);
        }
        /**
         * Attach the given component to this node
         */
        addComponent(_component) {
            if (_component.node == this)
                return;
            let cmpList = this.components[_component.type];
            if (cmpList === undefined)
                this.components[_component.type] = [_component];
            else if (cmpList.length && _component.isSingleton)
                throw new Error(`Component ${_component.type} is marked singleton and can't be attached, no more than one allowed`);
            else
                cmpList.push(_component);
            _component.attachToNode(this);
            _component.dispatchEvent(new Event("componentAdd" /* COMPONENT_ADD */));
            this.dispatchEventToTargetOnly(new CustomEvent("componentAdd" /* COMPONENT_ADD */, { detail: _component })); // TODO: see if this is be feasable
        }
        /**
         * Detach the given component from this node. Identical to {@link removeComponent}
         */
        detach(_component) {
            this.removeComponent(_component);
        }
        /**
         * Removes the given component from the node, if it was attached, and sets its parent to null.
         */
        removeComponent(_component) {
            try {
                let componentsOfType = this.components[_component.type];
                let foundAt = componentsOfType.indexOf(_component);
                if (foundAt < 0)
                    return;
                _component.dispatchEvent(new Event("componentRemove" /* COMPONENT_REMOVE */));
                this.dispatchEventToTargetOnly(new CustomEvent("componentRemove" /* COMPONENT_REMOVE */, { detail: _component })); // TODO: see if this would be feasable
                componentsOfType.splice(foundAt, 1);
                _component.attachToNode(null);
            }
            catch (_error) {
                throw new Error(`Unable to remove component '${_component}'in node named '${this.name}'`);
            }
        }
        // #endregion
        // #region Serialization
        serialize() {
            let serialization = {
                name: this.name,
                active: this.active
            };
            let components = {};
            for (let type in this.components) {
                components[type] = [];
                for (let component of this.components[type]) {
                    // components[type].push(component.serialize());
                    components[type].push(FudgeCore.Serializer.serialize(component));
                }
            }
            serialization["components"] = components;
            let children = [];
            for (let child of this.children) {
                children.push(FudgeCore.Serializer.serialize(child));
            }
            serialization["children"] = children;
            this.dispatchEvent(new Event("nodeSerialized" /* NODE_SERIALIZED */));
            return serialization;
        }
        async deserialize(_serialization) {
            this.name = _serialization.name;
            // this.parent = is set when the nodes are added
            // deserialize components first so scripts can react to children being appended
            for (let type in _serialization.components) {
                for (let serializedComponent of _serialization.components[type]) {
                    let deserializedComponent = await FudgeCore.Serializer.deserialize(serializedComponent);
                    this.addComponent(deserializedComponent);
                }
            }
            if (_serialization.children)
                for (let serializedChild of _serialization.children) {
                    let deserializedChild = await FudgeCore.Serializer.deserialize(serializedChild);
                    this.appendChild(deserializedChild);
                }
            this.dispatchEvent(new Event("nodeDeserialized" /* NODE_DESERIALIZED */));
            for (let component of this.getAllComponents())
                component.dispatchEvent(new Event("nodeDeserialized" /* NODE_DESERIALIZED */));
            this.activate(_serialization.active);
            return this;
        }
        // #endregion
        /**
         * Creates a string as representation of this node and its descendants
         */
        toHierarchyString(_node = null, _level = 0) {
            // TODO: refactor for better readability
            if (!_node)
                _node = this;
            let prefix = "+".repeat(_level);
            let output = prefix + " " + _node.name + " | ";
            for (let type in _node.components)
                output += _node.components[type].length + " " + type.split("Component").pop() + ", ";
            output = output.slice(0, -2) + "</br>";
            for (let child of _node.children) {
                output += this.toHierarchyString(child, _level + 1);
            }
            return output;
        }
        // #region Events
        /**
         * Adds an event listener to the node. The given handler will be called when a matching event is passed to the node.
         * Deviating from the standard EventTarget, here the _handler must be a function and _capture is the only option.
         */
        addEventListener(_type, _handler, _capture = false) {
            let listListeners = _capture ? this.captures : this.listeners;
            if (!listListeners[_type])
                listListeners[_type] = [];
            listListeners[_type].push(_handler);
        }
        /**
         * Removes an event listener from the node. The signature must match the one used with addEventListener
         */
        removeEventListener(_type, _handler, _capture = false) {
            let listenersForType = _capture ? this.captures[_type] : this.listeners[_type];
            if (listenersForType)
                for (let i = listenersForType.length - 1; i >= 0; i--)
                    if (listenersForType[i] == _handler)
                        listenersForType.splice(i, 1);
        }
        /**
         * Dispatches a synthetic event to target. This implementation always returns true (standard: return true only if either event's cancelable attribute value is false or its preventDefault() method was not invoked)
         * The event travels into the hierarchy to this node dispatching the event, invoking matching handlers of the nodes ancestors listening to the capture phase,
         * than the matching handler of the target node in the target phase, and back out of the hierarchy in the bubbling phase, invoking appropriate handlers of the anvestors
         */
        dispatchEvent(_event) {
            let ancestors = [];
            let upcoming = this;
            // overwrite event target
            Object.defineProperty(_event, "target", { writable: true, value: this });
            // TODO: consider using Reflect instead of Object throughout. See also Render and Mutable...
            while (upcoming.parent)
                ancestors.push(upcoming = upcoming.parent);
            Object.defineProperty(_event, "path", { writable: true, value: new Array(this, ...ancestors) });
            // capture phase
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.CAPTURING_PHASE });
            for (let i = ancestors.length - 1; i >= 0; i--) {
                let ancestor = ancestors[i];
                Object.defineProperty(_event, "currentTarget", { writable: true, value: ancestor });
                this.callListeners(ancestor.captures[_event.type], _event);
            }
            // target phase
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.AT_TARGET });
            Object.defineProperty(_event, "currentTarget", { writable: true, value: this });
            this.callListeners(this.captures[_event.type], _event);
            this.callListeners(this.listeners[_event.type], _event);
            if (!_event.bubbles)
                return true;
            // bubble phase
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.BUBBLING_PHASE });
            for (let i = 0; i < ancestors.length; i++) {
                let ancestor = ancestors[i];
                Object.defineProperty(_event, "currentTarget", { writable: true, value: ancestor });
                this.callListeners(ancestor.listeners[_event.type], _event);
            }
            return true; //TODO: return a meaningful value, see documentation of dispatch event
        }
        /**
         * Dispatches a synthetic event to target without travelling through the graph hierarchy neither during capture nor bubbling phase
         */
        dispatchEventToTargetOnly(_event) {
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.AT_TARGET });
            Object.defineProperty(_event, "currentTarget", { writable: true, value: this });
            this.callListeners(this.listeners[_event.type], _event); // TODO: examine if this should go to the captures instead of the listeners
            return true;
        }
        /**
         * Broadcasts a synthetic event to this node and from there to all nodes deeper in the hierarchy,
         * invoking matching handlers of the nodes listening to the capture phase. Watch performance when there are many nodes involved
         */
        broadcastEvent(_event) {
            // overwrite event target and phase
            Object.defineProperty(_event, "eventPhase", { writable: true, value: Event.CAPTURING_PHASE });
            Object.defineProperty(_event, "target", { writable: true, value: this });
            this.broadcastEventRecursive(_event);
        }
        broadcastEventRecursive(_event) {
            // capture phase only
            Object.defineProperty(_event, "currentTarget", { writable: true, value: this });
            let captures = this.captures[_event.type] || [];
            for (let handler of captures)
                // @ts-ignore
                handler(_event);
            // appears to be slower, astonishingly...
            // captures.forEach(function (handler: Function): void {
            //     handler(_event);
            // });
            // same for children
            for (let child of this.children) {
                child.broadcastEventRecursive(_event);
            }
        }
        callListeners(_listeners, _event) {
            if (_listeners?.length > 0)
                for (let handler of _listeners)
                    // @ts-ignore
                    handler(_event);
        }
    }
    FudgeCore.Node = Node;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="../Transfer/Serializer.ts"/>
// / <reference path="../Transfer/Mutable.ts"/>
var FudgeCore;
// / <reference path="../Transfer/Serializer.ts"/>
// / <reference path="../Transfer/Mutable.ts"/>
(function (FudgeCore) {
    /**
     * Superclass for all {@link Component}s that can be attached to {@link Node}s.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2020 | Jascha Karag√∂l, HFU, 2019
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Component
     */
    class Component extends FudgeCore.Mutable {
        constructor() {
            super();
            this.#node = null;
            this.singleton = true;
            this.active = true;
            this.addEventListener("mutate" /* MUTATE */, (_event) => {
                if (this.#node) {
                    // TODO: find the number of the component in the array if not singleton
                    _event.detail.component = this;
                    //@ts-ignore
                    _event.detail.componentIndex = this.node.getComponents(this.constructor).indexOf(this);
                    this.#node.dispatchEvent(_event);
                }
            });
        }
        #node;
        static registerSubclass(_subclass) { return Component.subclasses.push(_subclass) - 1; }
        get isActive() {
            return this.active;
        }
        /**
         * Is true, when only one instance of the component class can be attached to a node
         */
        get isSingleton() {
            return this.singleton;
        }
        /**
         * Retrieves the node, this component is currently attached to
         */
        get node() {
            return this.#node;
        }
        activate(_on) {
            this.active = _on;
            this.dispatchEvent(new Event(_on ? "componentActivate" /* COMPONENT_ACTIVATE */ : "componentDeactivate" /* COMPONENT_DEACTIVATE */));
        }
        /**
         * Tries to attach the component to the given node, removing it from the node it was attached to if applicable
         */
        attachToNode(_container) {
            if (this.#node == _container)
                return;
            let previousContainer = this.#node;
            try {
                if (previousContainer)
                    previousContainer.removeComponent(this);
                this.#node = _container;
                if (this.#node)
                    this.#node.addComponent(this);
            }
            catch (_error) {
                this.#node = previousContainer;
            }
        }
        //#region Transfer
        serialize() {
            let serialization = {
                active: this.active
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.activate(_serialization.active);
            return this;
        }
        async mutate(_mutator, _selection = null, _dispatchMutate = true) {
            await super.mutate(_mutator, _selection, _dispatchMutate);
            if (typeof (_mutator.active) !== "undefined")
                this.activate(_mutator.active);
        }
        reduceMutator(_mutator) {
            delete _mutator.singleton;
            delete _mutator.mtxWorld;
        }
    }
    /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
    Component.baseClass = Component;
    /** list of all the subclasses derived from this class, if they registered properly*/
    Component.subclasses = [];
    FudgeCore.Component = Component;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Wraps a regular Javascript Array and offers very limited functionality geared solely towards avoiding garbage colletion.
     * @author Jirka Dell'Oro-Friedl, HFU, 2021
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Recycler
     */
    class RecycableArray {
        constructor() {
            this.#length = 0;
            this.#array = new Array();
        }
        #length;
        #array;
        // #type: new () => T;
        // //tslint:disable-next-line:no-any
        // constructor(_type: new (...args: any[]) => T) {
        //   this.#type = _type;
        // }
        get length() {
            return this.#length;
        }
        /**
         * Sets the virtual length of the array to zero but keeps the entries beyond.
         */
        reset() {
            this.#length = 0;
        }
        recycle() {
            this.reset();
        }
        push(_entry) {
            this.#array[this.#length] = _entry;
            this.#length++;
            return this.#length;
        }
        pop() {
            this.#length--;
            return this.#array[this.#length];
        }
        /**
         * Recycles the object following the last in the array and increases the array length
         * It must be assured, that none of the objects in the array is still in any use of any kind!
         */
        // public recycle(): T {
        //   if (this.#length < this.#array.length) {
        //     this.#length++;
        //     return this.#array[this.#length++];
        //   }
        //   this.#array.push(Recycler.get(this.#type));
        //   return this.#array[this.#length++];
        // }
        *[Symbol.iterator]() {
            for (let i = 0; i < this.#length; i++)
                yield this.#array[i];
        }
        getSorted(_sort) {
            let sorted = this.#array.slice(0, this.#length);
            sorted.sort(_sort);
            return sorted;
        }
    }
    FudgeCore.RecycableArray = RecycableArray;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    //Baseclass for {@link RenderInjectorCoat} and {@link RenderInjectorTexture]]
    class RenderInjector {
        static inject(_constructor, _injector) {
            let injection = Reflect.get(_injector, "inject" + _constructor.name);
            if (!injection) {
                FudgeCore.Debug.error("No injection decorator defined for " + _constructor.name);
            }
            Object.defineProperty(_constructor.prototype, "useRenderData", {
                value: injection
            });
        }
    }
    FudgeCore.RenderInjector = RenderInjector;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    //gives WebGL Buffer the data from the {@link Shader}
    class RenderInjectorShader {
        static decorate(_constructor) {
            Object.defineProperty(_constructor, "useProgram", {
                value: RenderInjectorShader.useProgram
            });
            Object.defineProperty(_constructor, "deleteProgram", {
                value: RenderInjectorShader.deleteProgram
            });
            Object.defineProperty(_constructor, "createProgram", {
                value: RenderInjectorShader.createProgram
            });
        }
        static useProgram() {
            if (!this.program)
                this.createProgram();
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            crc3.useProgram(this.program);
        }
        static deleteProgram() {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (this.program) {
                crc3.deleteProgram(this.program);
                delete this.attributes;
                delete this.uniforms;
                delete this.program;
            }
        }
        static createProgram() {
            FudgeCore.Debug.fudge("Create shader program", this.name);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            let program = crc3.createProgram();
            try {
                let shdVertex = compileShader(this.getVertexShaderSource(), WebGL2RenderingContext.VERTEX_SHADER);
                let shdFragment = compileShader(this.getFragmentShaderSource(), WebGL2RenderingContext.FRAGMENT_SHADER);
                crc3.attachShader(program, FudgeCore.RenderWebGL.assert(shdVertex));
                crc3.attachShader(program, FudgeCore.RenderWebGL.assert(shdFragment));
                crc3.linkProgram(program);
                let error = FudgeCore.RenderWebGL.assert(crc3.getProgramInfoLog(program));
                if (error !== "") {
                    throw new Error("Error linking Shader: " + error);
                }
                this.program = program;
                this.attributes = detectAttributes();
                this.uniforms = detectUniforms();
                if (!this.define.includes("LIGHT"))
                    return;
                if (!FudgeCore.RenderWebGL.uboLights)
                    FudgeCore.RenderWebGL.uboLights = createUBOLights();
                if (!FudgeCore.RenderWebGL.uboLightsVariableOffsets)
                    FudgeCore.RenderWebGL.uboLightsVariableOffsets = detectUBOLightsVariableOffsets();
                // bind lights UBO to shader program
                const blockIndex = crc3.getUniformBlockIndex(program, FudgeCore.UNIFORM_BLOCKS.LIGHTS.NAME);
                crc3.uniformBlockBinding(program, blockIndex, FudgeCore.UNIFORM_BLOCKS.LIGHTS.BINDING);
            }
            catch (_error) {
                FudgeCore.Debug.error(_error);
                debugger;
            }
            function compileShader(_shaderCode, _shaderType) {
                let webGLShader = crc3.createShader(_shaderType);
                crc3.shaderSource(webGLShader, _shaderCode);
                crc3.compileShader(webGLShader);
                let error = FudgeCore.RenderWebGL.assert(crc3.getShaderInfoLog(webGLShader));
                if (error !== "") {
                    console.log(_shaderCode);
                    throw new Error("Error compiling shader: " + error);
                }
                // Check for any compilation errors.
                if (!crc3.getShaderParameter(webGLShader, WebGL2RenderingContext.COMPILE_STATUS)) {
                    alert(crc3.getShaderInfoLog(webGLShader));
                    return null;
                }
                return webGLShader;
            }
            function detectAttributes() {
                let detectedAttributes = {};
                let attributeCount = crc3.getProgramParameter(program, WebGL2RenderingContext.ACTIVE_ATTRIBUTES);
                for (let i = 0; i < attributeCount; i++) {
                    let attributeInfo = FudgeCore.RenderWebGL.assert(crc3.getActiveAttrib(program, i));
                    if (!attributeInfo) {
                        break;
                    }
                    detectedAttributes[attributeInfo.name] = crc3.getAttribLocation(program, attributeInfo.name);
                }
                return detectedAttributes;
            }
            function detectUniforms() {
                let detectedUniforms = {};
                let uniformCount = crc3.getProgramParameter(program, WebGL2RenderingContext.ACTIVE_UNIFORMS);
                for (let i = 0; i < uniformCount; i++) {
                    let info = FudgeCore.RenderWebGL.assert(crc3.getActiveUniform(program, i));
                    if (!info) {
                        break;
                    }
                    let location = crc3.getUniformLocation(program, info.name);
                    if (location)
                        detectedUniforms[info.name] = FudgeCore.RenderWebGL.assert(location);
                }
                return detectedUniforms;
            }
            function createUBOLights() {
                const blockIndex = crc3.getUniformBlockIndex(program, FudgeCore.UNIFORM_BLOCKS.LIGHTS.NAME);
                const blockSize = crc3.getActiveUniformBlockParameter(program, blockIndex, crc3.UNIFORM_BLOCK_DATA_SIZE);
                const ubo = crc3.createBuffer();
                crc3.bindBuffer(crc3.UNIFORM_BUFFER, ubo);
                crc3.bufferData(crc3.UNIFORM_BUFFER, blockSize, crc3.DYNAMIC_DRAW);
                crc3.bindBuffer(crc3.UNIFORM_BUFFER, null);
                crc3.bindBufferBase(crc3.UNIFORM_BUFFER, FudgeCore.UNIFORM_BLOCKS.LIGHTS.BINDING, ubo);
                return ubo;
            }
            function detectUBOLightsVariableOffsets() {
                const uboVariableNames = [
                    "u_nLightsDirectional",
                    "u_nLightsPoint",
                    "u_nLightsSpot",
                    "u_ambient.vctColor",
                    "u_directional[0].vctColor",
                    "u_point[0].vctColor",
                    "u_spot[0].vctColor"
                ];
                const uboVariableIndices = crc3.getUniformIndices(program, uboVariableNames);
                const uboVariableOffsets = crc3.getActiveUniforms(program, uboVariableIndices, crc3.UNIFORM_OFFSET);
                const uboVariableNameToOffset = {};
                uboVariableNames.forEach((_name, _index) => uboVariableNameToOffset[_name] = uboVariableOffsets[_index]);
                return uboVariableNameToOffset;
            }
        }
    }
    FudgeCore.RenderInjectorShader = RenderInjectorShader;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    //gives WebGL Buffer the data from the {@link Coat}
    class RenderInjectorCoat extends FudgeCore.RenderInjector {
        static decorate(_constructor) {
            FudgeCore.RenderInjector.inject(_constructor, RenderInjectorCoat);
        }
        static injectCoatColored(_shader, _cmpMaterial) {
            let uniform = _shader.uniforms["u_vctColor"];
            let color = FudgeCore.Color.MULTIPLY(this.color, _cmpMaterial.clrPrimary);
            FudgeCore.RenderWebGL.getRenderingContext().uniform4fv(uniform, color.getArray());
        }
        static injectCoatRemissive(_shader, _cmpMaterial) {
            RenderInjectorCoat.injectCoatColored.call(this, _shader, _cmpMaterial);
            let uniform;
            uniform = _shader.uniforms["u_fSpecular"];
            FudgeCore.RenderWebGL.getRenderingContext().uniform1f(uniform, this.specular);
            uniform = _shader.uniforms["u_fDiffuse"];
            FudgeCore.RenderWebGL.getRenderingContext().uniform1f(uniform, this.diffuse);
        }
        static injectCoatTextured(_shader, _cmpMaterial) {
            RenderInjectorCoat.injectCoatColored.call(this, _shader, _cmpMaterial);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            this.texture.useRenderData();
            crc3.uniform1i(_shader.uniforms["u_texture"], 0);
            crc3.uniformMatrix3fv(_shader.uniforms["u_mtxPivot"], false, _cmpMaterial.mtxPivot.get());
        }
        static injectCoatRemissiveTextured(_shader, _cmpMaterial) {
            RenderInjectorCoat.injectCoatRemissive.call(this, _shader, _cmpMaterial);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            this.texture.useRenderData();
            crc3.uniform1i(_shader.uniforms["u_texture"], 0);
            crc3.uniformMatrix3fv(_shader.uniforms["u_mtxPivot"], false, _cmpMaterial.mtxPivot.get());
        }
    }
    FudgeCore.RenderInjectorCoat = RenderInjectorCoat;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class RenderInjectorMesh {
        static decorate(_constructor) {
            Object.defineProperty(_constructor.prototype, "useRenderBuffers", {
                value: RenderInjectorMesh.useRenderBuffers
            });
            Object.defineProperty(_constructor.prototype, "getRenderBuffers", {
                value: RenderInjectorMesh.getRenderBuffers
            });
            Object.defineProperty(_constructor.prototype, "deleteRenderBuffers", {
                value: RenderInjectorMesh.deleteRenderBuffers
            });
        }
        static getRenderBuffers(_shader) {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            this.renderMesh = this.renderMesh || new FudgeCore.RenderMesh(this);
            if (_shader.define.includes("FLAT")) {
                if (this.renderMesh.flat == null)
                    this.renderMesh.flat = {
                        vertices: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.verticesFlat),
                        indices: createBuffer(WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER, this.renderMesh.indicesFlat),
                        normals: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.normalsFlat),
                        textureUVs: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.textureUVsFlat),
                        nIndices: this.renderMesh.indicesFlat.length
                    };
                return this.renderMesh.flat;
            }
            else {
                if (this.renderMesh.smooth == null)
                    this.renderMesh.smooth = {
                        vertices: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.vertices),
                        indices: createBuffer(WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER, this.renderMesh.indices),
                        normals: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.normalsVertex),
                        textureUVs: createBuffer(WebGL2RenderingContext.ARRAY_BUFFER, this.renderMesh.textureUVs),
                        nIndices: this.renderMesh.indices.length
                    };
                return this.renderMesh.smooth;
            }
            function createBuffer(_type, _array) {
                let buffer = FudgeCore.RenderWebGL.assert(crc3.createBuffer());
                crc3.bindBuffer(_type, buffer);
                crc3.bufferData(_type, _array, WebGL2RenderingContext.STATIC_DRAW);
                return buffer;
            }
        }
        static useRenderBuffers(_shader, _mtxMeshToWorld, _mtxMeshToView, _id) {
            let renderBuffers = this.getRenderBuffers(_shader);
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            function setBuffer(_name, _buffer) {
                let attribute = _shader.attributes[_name];
                if (attribute == undefined)
                    return;
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, _buffer);
                crc3.enableVertexAttribArray(attribute);
                FudgeCore.RenderWebGL.setAttributeStructure(attribute, { size: 3, dataType: WebGL2RenderingContext.FLOAT, normalize: false, stride: 0, offset: 0 });
            }
            let uniform;
            uniform = _shader.uniforms["u_mtxMeshToView"];
            crc3.uniformMatrix4fv(uniform, false, _mtxMeshToView.get());
            uniform = _shader.uniforms["u_mtxMeshToWorld"];
            if (uniform)
                crc3.uniformMatrix4fv(uniform, false, _mtxMeshToWorld.get());
            uniform = _shader.uniforms["u_mtxNormalMeshToWorld"];
            if (uniform) {
                let normalMatrix = FudgeCore.Matrix4x4.TRANSPOSE(FudgeCore.Matrix4x4.INVERSION(_mtxMeshToWorld));
                crc3.uniformMatrix4fv(uniform, false, normalMatrix.get());
            }
            setBuffer("a_vctPosition", renderBuffers.vertices);
            setBuffer("a_vctNormal", renderBuffers.normals);
            // feed in texture coordinates if shader accepts a_vctTexture
            let attribute = _shader.attributes["a_vctTexture"];
            if (attribute) {
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, renderBuffers.textureUVs);
                crc3.enableVertexAttribArray(attribute); // enable the buffer
                crc3.vertexAttribPointer(attribute, 2, WebGL2RenderingContext.FLOAT, false, 0, 0);
            }
            // feed in an id of the node if shader accepts u_id. Used for picking
            uniform = _shader.uniforms["u_id"];
            if (uniform)
                FudgeCore.RenderWebGL.getRenderingContext().uniform1i(uniform, _id);
            crc3.bindBuffer(WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER, renderBuffers.indices);
            return renderBuffers;
        }
        static deleteRenderBuffers(_renderBuffers) {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (_renderBuffers) {
                // TODO: cleanup all buffers, flat/normals is missing...
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, null);
                crc3.deleteBuffer(_renderBuffers.vertices);
                crc3.deleteBuffer(_renderBuffers.textureUVs);
                crc3.bindBuffer(WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER, null);
                crc3.deleteBuffer(_renderBuffers.indices);
            }
        }
    }
    FudgeCore.RenderInjectorMesh = RenderInjectorMesh;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let ParticleData;
    (function (ParticleData) {
        let FUNCTION;
        (function (FUNCTION) {
            // VALUE = "value",
            FUNCTION["ADDITION"] = "addition";
            FUNCTION["SUBTRACTION"] = "subtraction";
            FUNCTION["MULTIPLICATION"] = "multiplication";
            FUNCTION["DIVISION"] = "division";
            FUNCTION["MODULO"] = "modulo";
            FUNCTION["POWER"] = "power";
            FUNCTION["POLYNOMIAL3"] = "polynomial3";
            FUNCTION["SQUARE_ROOT"] = "squareRoot";
            FUNCTION["RANDOM"] = "random";
            FUNCTION["RANDOM_RANGE"] = "randomRange";
        })(FUNCTION = ParticleData.FUNCTION || (ParticleData.FUNCTION = {}));
        ParticleData.FUNCTION_MINIMUM_PARAMETERS = {
            // [ParticleData.FUNCTION.VALUE]: 1,
            [ParticleData.FUNCTION.ADDITION]: 2,
            [ParticleData.FUNCTION.SUBTRACTION]: 2,
            [ParticleData.FUNCTION.MULTIPLICATION]: 2,
            [ParticleData.FUNCTION.DIVISION]: 2,
            [ParticleData.FUNCTION.MODULO]: 2,
            [ParticleData.FUNCTION.POWER]: 2,
            [ParticleData.FUNCTION.POLYNOMIAL3]: 5,
            [ParticleData.FUNCTION.SQUARE_ROOT]: 1,
            [ParticleData.FUNCTION.RANDOM]: 1,
            [ParticleData.FUNCTION.RANDOM_RANGE]: 3
        };
        ParticleData.PREDEFINED_VARIABLES = {
            systemDuration: "u_fParticleSystemDuration",
            systemSize: "u_fParticleSystemSize",
            systemTime: "u_fParticleSystemTime",
            particleId: "fParticleId"
        };
    })(ParticleData = FudgeCore.ParticleData || (FudgeCore.ParticleData = {}));
    /**
     * Compiles particle system shaders from shader universal derivates for WebGL
     * @authors Jonas Plotzky, HFU, 2022
     */
    class RenderInjectorShaderParticleSystem extends FudgeCore.RenderInjectorShader {
        static decorate(_constructor) {
            super.decorate(_constructor.prototype);
            Object.defineProperty(_constructor.prototype, "getVertexShaderSource", {
                value: RenderInjectorShaderParticleSystem.getVertexShaderSource
            });
            Object.defineProperty(_constructor.prototype, "getFragmentShaderSource", {
                value: RenderInjectorShaderParticleSystem.getFragmentShaderSource
            });
        }
        static getVertexShaderSource() {
            let data = this.data;
            let mtxLocal = data?.mtxLocal;
            let mtxWorld = data?.mtxWorld;
            let source = this.vertexShaderSource
                .replace("#version 300 es", `#version 300 es\n#define ${this.define[0]}${data.color ? "\n#define PARTICLE_COLOR" : ""}`)
                .replace("/*$variables*/", RenderInjectorShaderParticleSystem.generateVariables(data?.variables, data?.variableNames))
                .replace("/*$mtxLocal*/", RenderInjectorShaderParticleSystem.generateTransformations(mtxLocal, "Local"))
                .replace("/*$mtxLocal*/", mtxLocal && mtxLocal.length > 0 ? "* mtxLocal" : "")
                .replace("/*$mtxWorld*/", RenderInjectorShaderParticleSystem.generateTransformations(mtxWorld, "World"))
                .replace("/*$mtxWorld*/", mtxWorld && mtxWorld.length > 0 ? "mtxWorld *" : "")
                .replaceAll("/*$color*/", RenderInjectorShaderParticleSystem.generateColor(data?.color));
            return source;
        }
        static getFragmentShaderSource() {
            return this.fragmentShaderSource.replace("#version 300 es", `#version 300 es${this.data.color ? "\n#define PARTICLE_COLOR" : ""}`);
        }
        //#region code generation
        static generateVariables(_variables, _variableNames) {
            if (!_variables)
                return "";
            return _variables
                .map((_variable, _index) => ({ name: "fParticleSystemVariable_" + _variableNames[_index], value: RenderInjectorShaderParticleSystem.generateExpression(_variable) }))
                .map(_variable => `float ${_variable.name} = ${_variable.value};`)
                .reduce((_accumulator, _code) => `${_accumulator}\n${_code}`, "");
        }
        static generateTransformations(_transformations, _localOrWorld) {
            if (!_transformations || _transformations.length == 0)
                return "";
            let transformations = _transformations
                .map(_data => {
                let isScale = _data.transformation === "scale";
                let [x, y, z] = [_data.parameters[0], _data.parameters[1], _data.parameters[2]]
                    .map((_value) => _value ? RenderInjectorShaderParticleSystem.generateExpression(_value) : (isScale ? "1.0" : "0.0"));
                return [_data.transformation, x, y, z];
            });
            let code = "";
            code += transformations
                .map(([_transformation, _x, _y, _z], _index) => {
                let rotateId = _index + _localOrWorld;
                if (_transformation == "rotate") {
                    let toRadians = (_value) => `${_value} * ${FudgeCore.Calc.deg2rad}`;
                    return `float fXRadians${rotateId} = ${toRadians(_x)};
              float fYRadians${rotateId} = ${toRadians(_y)};
              float fZRadians${rotateId} = ${toRadians(_z)};
              float fSinX${rotateId} = sin(fXRadians${rotateId});
              float fCosX${rotateId} = cos(fXRadians${rotateId}); 
              float fSinY${rotateId} = sin(fYRadians${rotateId});
              float fCosY${rotateId} = cos(fYRadians${rotateId});
              float fSinZ${rotateId} = sin(fZRadians${rotateId});
              float fCosZ${rotateId} = cos(fZRadians${rotateId});\n`;
                }
                else
                    return "";
            })
                .filter((_transformation) => _transformation != "")
                .reduce((_accumulator, _code) => `${_accumulator}\n${_code}`, "");
            code += "\n";
            code += `mat4 mtx${_localOrWorld} = `;
            code += transformations
                .map(([_transformation, _x, _y, _z], _index) => {
                let rotateId = _index + _localOrWorld;
                switch (_transformation) {
                    case "translate":
                        return `mat4(
              1.0, 0.0, 0.0, 0.0,
              0.0, 1.0, 0.0, 0.0,
              0.0, 0.0, 1.0, 0.0,
              ${_x}, ${_y}, ${_z}, 1.0)`;
                    case "rotate":
                        return `mat4(
              fCosZ${rotateId} * fCosY${rotateId}, fSinZ${rotateId} * fCosY${rotateId}, -fSinY${rotateId}, 0.0,
              fCosZ${rotateId} * fSinY${rotateId} * fSinX${rotateId} - fSinZ${rotateId} * fCosX${rotateId}, fSinZ${rotateId} * fSinY${rotateId} * fSinX${rotateId} + fCosZ${rotateId} * fCosX${rotateId}, fCosY${rotateId} * fSinX${rotateId}, 0.0,
              fCosZ${rotateId} * fSinY${rotateId} * fCosX${rotateId} + fSinZ${rotateId} * fSinX${rotateId}, fSinZ${rotateId} * fSinY${rotateId} * fCosX${rotateId} - fCosZ${rotateId} * fSinX${rotateId}, fCosY${rotateId} * fCosX${rotateId}, 0.0,
              0.0, 0.0, 0.0, 1.0
              )`;
                    case "scale":
                        return `mat4(
              ${_x}, 0.0, 0.0, 0.0,
              0.0, ${_y}, 0.0, 0.0,
              0.0, 0.0, ${_z}, 0.0,
              0.0, 0.0, 0.0, 1.0
              )`;
                    default:
                        throw `Error in ${FudgeCore.ParticleSystem.name}: "${_transformation}" is not a transformation`;
                }
            })
                .reduce((_accumulator, _code) => `${_accumulator} * \n${_code}`);
            code += ";\n";
            return code;
        }
        static generateColor(_color) {
            if (!_color)
                return "";
            let rgba = [_color[0], _color[1], _color[2], _color[3]]
                .map((_value) => _value ? RenderInjectorShaderParticleSystem.generateExpression(_value) : "1.0")
                .join(", ");
            return `vec4(${rgba});`;
        }
        static generateExpression(_expression) {
            if (ParticleData.isFunction(_expression)) {
                let parameters = [];
                for (let param of _expression.parameters) {
                    parameters.push(RenderInjectorShaderParticleSystem.generateExpression(param));
                }
                return RenderInjectorShaderParticleSystem.generateFunction(_expression.function, parameters);
            }
            if (ParticleData.isVariable(_expression)) {
                return ParticleData.PREDEFINED_VARIABLES[_expression.value] || "fParticleSystemVariable_" + _expression.value;
            }
            if (ParticleData.isConstant(_expression)) {
                let value = _expression.value.toString();
                return `${value}${value.includes(".") ? "" : ".0"}`;
            }
            if (ParticleData.isCode(_expression)) {
                let code = _expression.code
                    .replaceAll(/\b[a-zA-z]+\w*(?!\()\b/g, (_match) => ParticleData.PREDEFINED_VARIABLES[_match] || "fParticleSystemVariable_" + _match)
                    .replaceAll(/(?<!\.)\b\d+\b(?!\.)/g, (_match) => _match + ".0");
                code = RenderInjectorShaderParticleSystem.replaceFunctions(code);
                return code;
            }
            throw `Error in ${FudgeCore.ParticleSystem.name}: invalid node structure in particle system serialization`;
        }
        static generateFunction(_function, _parameters) {
            if (_parameters.length < ParticleData.FUNCTION_MINIMUM_PARAMETERS[_function])
                throw `Error in ${FudgeCore.ParticleSystem.name}: "${_function}" needs at least ${ParticleData.FUNCTION_MINIMUM_PARAMETERS[_function]} parameters`;
            if (Object.values(ParticleData.FUNCTION).includes(_function))
                return RenderInjectorShaderParticleSystem.FUNCTIONS[_function](_parameters);
            else
                throw `Error in ${FudgeCore.ParticleSystem.name}: "${_function}" is not an operation`;
        }
        static replaceFunctions(_code) {
            let functionRegex = /\b[a-zA-z_]+\w*\(/g;
            let match;
            while ((match = functionRegex.exec(_code)) != null) {
                let functionGenerator = RenderInjectorShaderParticleSystem.FUNCTIONS[match[0].slice(0, -1)];
                if (!functionGenerator)
                    continue;
                let commaIndices = [];
                let openBrackets = 1;
                let argumentsLastIndex = functionRegex.lastIndex;
                while (openBrackets > 0) {
                    switch (_code[argumentsLastIndex]) {
                        case "(":
                            openBrackets++;
                            break;
                        case ")":
                            openBrackets--;
                            break;
                        case ",":
                            if (openBrackets == 1)
                                commaIndices.push(argumentsLastIndex);
                            break;
                    }
                    argumentsLastIndex++;
                }
                let args = [functionRegex.lastIndex - 1, ...commaIndices, argumentsLastIndex - 1].reduce((_accumulator, _position, _index, _positions) => {
                    return _index == _positions.length - 1 ?
                        _accumulator :
                        _accumulator.concat(_code.slice(_position + 1, _positions[_index + 1]).trim());
                }, []);
                functionRegex.lastIndex = match.index;
                _code = `${_code.slice(0, match.index)}(${functionGenerator(args)})${_code.slice(argumentsLastIndex)}`;
            }
            return _code;
        }
    }
    RenderInjectorShaderParticleSystem.FUNCTIONS = {
        // [ParticleData.FUNCTION.VALUE]: (_parameters: string[]) => {
        //   return `(${_parameters[0]})`;
        // },
        [ParticleData.FUNCTION.ADDITION]: (_parameters) => {
            return `(${_parameters.reduce((_accumulator, _value) => `${_accumulator} + ${_value}`)})`;
        },
        [ParticleData.FUNCTION.SUBTRACTION]: (_parameters) => {
            return `(${_parameters.reduce((_accumulator, _value) => `${_accumulator} - ${_value}`)})`;
        },
        [ParticleData.FUNCTION.MULTIPLICATION]: (_parameters) => {
            return `(${_parameters.reduce((_accumulator, _value) => `${_accumulator} * ${_value}`)})`;
        },
        [ParticleData.FUNCTION.DIVISION]: (_parameters) => {
            return `(${_parameters[0]} / ${_parameters[1]})`;
        },
        [ParticleData.FUNCTION.MODULO]: (_parameters) => {
            return `(${_parameters.reduce((_accumulator, _value) => `mod(${_accumulator}, ${_value})`)})`;
        },
        [ParticleData.FUNCTION.POWER]: (_parameters) => {
            return `pow(${_parameters[0]}, ${_parameters[1]})`;
        },
        [ParticleData.FUNCTION.POLYNOMIAL3]: (_parameters) => {
            let x = _parameters[0];
            let a = _parameters[1];
            let b = _parameters[2];
            let c = _parameters[3];
            let d = _parameters[4];
            return `(${a} * pow(${x}, 3.0) + ${b} * pow(${x}, 2.0) + ${c} * ${x} + ${d})`;
        },
        [ParticleData.FUNCTION.SQUARE_ROOT]: (_parameters) => {
            let x = _parameters[0];
            return `sqrt(${x})`;
        },
        [ParticleData.FUNCTION.RANDOM]: (_parameters) => {
            return `fetchRandomNumber(int(${_parameters[0]}), iParticleSystemRandomNumbersSize, iParticleSystemRandomNumbersLength)`;
        },
        [ParticleData.FUNCTION.RANDOM_RANGE]: (_parameters) => {
            return `(${RenderInjectorShaderParticleSystem.FUNCTIONS["random"](_parameters)} * (${_parameters[2]} - ${_parameters[1]}) + ${_parameters[1]})`;
        }
    };
    FudgeCore.RenderInjectorShaderParticleSystem = RenderInjectorShaderParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * buffers the random number data for the particle system into WebGL
     * @authors Jonas Plotzky, HFU, 2022
     */
    class RenderInjectorComponentParticleSystem {
        static decorate(_constructor) {
            Object.defineProperty(_constructor.prototype, "useRenderData", {
                value: RenderInjectorComponentParticleSystem.useRenderData
            });
            Object.defineProperty(_constructor.prototype, "deleteRenderData", {
                value: RenderInjectorComponentParticleSystem.deleteRenderData
            });
        }
        static useRenderData() {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (this.renderData) {
                // buffers exist
                crc3.activeTexture(WebGL2RenderingContext.TEXTURE1); // ATTENTION!: changing this id requires changing of corresponding id in particle render method, use ctrl + shift + f search!
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, this.renderData);
            }
            else {
                this.renderData = {};
                const texture = FudgeCore.Render.assert(crc3.createTexture());
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, texture);
                let textureSize = Math.ceil(Math.sqrt(this.size));
                textureSize = Math.min(textureSize, crc3.getParameter(crc3.MAX_TEXTURE_SIZE));
                let randomNumbers = [];
                for (let i = 0; i < textureSize * textureSize; i++) {
                    randomNumbers.push(Math.random());
                }
                try {
                    crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, WebGL2RenderingContext.R32F, textureSize, textureSize, 0, WebGL2RenderingContext.RED, WebGL2RenderingContext.FLOAT, Float32Array.from(randomNumbers));
                }
                catch (_error) {
                    FudgeCore.Debug.error(_error);
                }
                crc3.texParameteri(crc3.TEXTURE_2D, crc3.TEXTURE_MIN_FILTER, crc3.NEAREST);
                crc3.texParameteri(crc3.TEXTURE_2D, crc3.TEXTURE_MAG_FILTER, crc3.NEAREST);
                this.renderData = texture;
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, null);
                this.useRenderData();
            }
        }
        static deleteRenderData() {
            if (!this.renderData)
                return;
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, null);
            crc3.deleteTexture(this.renderData);
            delete this.renderData;
        }
    }
    FudgeCore.RenderInjectorComponentParticleSystem = RenderInjectorComponentParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Keeps a depot of objects that have been marked for reuse, sorted by type.
     * Using {@link Recycler} reduces load on the carbage collector and thus supports smooth performance.
     * @author Jirka Dell'Oro-Friedl, HFU, 2021
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Recycler
     */
    class Recycler {
        /**
         * Fetches an object of the requested type from the depot, calls its recycle-method and returns it.
         * If the depot for that type is empty it returns a new object of the requested type
         * @param _T The class identifier of the desired object
         */
        static get(_T) {
            let key = _T.name;
            let instances = Recycler.depot[key];
            if (instances && instances.length > 0) {
                let instance = instances.pop();
                instance.recycle();
                return instance;
            }
            else
                return new _T();
        }
        /**
         * Returns a reference to an object of the requested type in the depot, but does not remove it there.
         * If no object of the requested type was in the depot, one is created, stored and borrowed.
         * For short term usage of objects in a local scope, when there will be no other call to Recycler.get or .borrow!
         * @param _T The class identifier of the desired object
         */
        static borrow(_T) {
            let t;
            let key = _T.name;
            let instances = Recycler.depot[key];
            if (!instances || instances.length == 0) {
                t = new _T();
                Recycler.store(t);
                return t;
            }
            let instance = instances[0];
            instance.recycle();
            return instance;
        }
        /**
         * Stores the object in the depot for later recycling. Users are responsible for throwing in objects that are about to loose scope and are not referenced by any other
         * @param _instance
         */
        static store(_instance) {
            let key = _instance.constructor.name;
            //Debug.log(key);
            let instances = Recycler.depot[key] || [];
            instances.push(_instance);
            Recycler.depot[key] = instances;
            // Debug.log(`ObjectManager.depot[${key}]: ${ObjectManager.depot[key].length}`);
            //Debug.log(this.depot);
        }
        /**
         * Emptys the depot of a given type, leaving the objects for the garbage collector. May result in a short stall when many objects were in
         * @param _T
         */
        static dump(_T) {
            let key = _T.name;
            Recycler.depot[key] = [];
        }
        /**
         * Emptys all depots, leaving all objects to the garbage collector. May result in a short stall when many objects were in
         */
        static dumpAll() {
            Recycler.depot = {};
        }
    }
    Recycler.depot = {};
    FudgeCore.Recycler = Recycler;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Stores and manipulates a twodimensional vector comprised of the components x and y
     * ```plaintext
     *            +y
     *             |__ +x
     * ```
     * @authors Lukas Scheuerle, Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Vector2 extends FudgeCore.Mutable {
        constructor(_x = 0, _y = 0) {
            super();
            this.data = new Float32Array([_x, _y]);
        }
        //#region Static
        /**
         * A shorthand for writing `new Vector2(0, 0)`.
         * @returns A new vector with the values (0, 0)
         */
        static ZERO() {
            const vector = FudgeCore.Recycler.get(Vector2);
            vector.set(0, 0);
            return vector;
        }
        /**
         * A shorthand for writing `new Vector2(_scale, _scale)`.
         * @param _scale the scale of the vector. Default: 1
         */
        static ONE(_scale = 1) {
            const vector = FudgeCore.Recycler.get(Vector2);
            vector.set(_scale, _scale);
            return vector;
        }
        /**
         * A shorthand for writing `new Vector2(0, y)`.
         * @param _scale The number to write in the y coordinate. Default: 1
         * @returns A new vector with the values (0, _scale)
         */
        static Y(_scale = 1) {
            const vector = FudgeCore.Recycler.get(Vector2);
            vector.set(0, _scale);
            return vector;
        }
        /**
         * A shorthand for writing `new Vector2(x, 0)`.
         * @param _scale The number to write in the x coordinate. Default: 1
         * @returns A new vector with the values (_scale, 0)
         */
        static X(_scale = 1) {
            const vector = FudgeCore.Recycler.get(Vector2);
            vector.set(_scale, 0);
            return vector;
        }
        static TRANSFORMATION(_vector, _mtxTransform, _includeTranslation = true) {
            let result = FudgeCore.Recycler.get(Vector2);
            let m = _mtxTransform.get();
            let [x, y] = _vector.get();
            result.x = m[0] * x + m[3] * y;
            result.y = m[1] * x + m[4] * y;
            if (_includeTranslation) {
                result.add(_mtxTransform.translation);
            }
            return result;
        }
        /**
         * Normalizes a given vector to the given length without editing the original vector.
         * @param _vector the vector to normalize
         * @param _length the length of the resulting vector. defaults to 1
         * @returns a new vector representing the normalised vector scaled by the given length
         */
        static NORMALIZATION(_vector, _length = 1) {
            let vector = Vector2.ZERO();
            try {
                let [x, y] = _vector.data;
                let factor = _length / Math.hypot(x, y);
                vector.set(_vector.x * factor, _vector.y * factor);
            }
            catch (_error) {
                FudgeCore.Debug.warn(_error);
            }
            return vector;
        }
        /**
         * Returns a new vector representing the given vector scaled by the given scaling factor
         */
        static SCALE(_vector, _scale) {
            let vector = FudgeCore.Recycler.get(Vector2);
            vector.set(_vector.x * _scale, _vector.y * _scale);
            return vector;
        }
        /**
         * Returns the resulting vector attained by addition of all given vectors.
         */
        static SUM(..._vectors) {
            let result = FudgeCore.Recycler.get(Vector2);
            for (let vector of _vectors)
                result.set(result.x + vector.x, result.y + vector.y);
            return result;
        }
        /**
         * Returns the result of the subtraction of two vectors.
         */
        static DIFFERENCE(_minuend, _subtrahend) {
            let vector = FudgeCore.Recycler.get(Vector2);
            vector.set(_minuend.x - _subtrahend.x, _minuend.y - _subtrahend.y);
            return vector;
        }
        /**
         * Computes the dotproduct of 2 vectors.
         */
        static DOT(_a, _b) {
            let scalarProduct = _a.x * _b.x + _a.y * _b.y;
            return scalarProduct;
        }
        /**
         * Calculates the cross product of two Vectors. Due to them being only 2 Dimensional, the result is a single number,
         * which implicitly is on the Z axis. It is also the signed magnitude of the result.
         * @param _a Vector to compute the cross product on
         * @param _b Vector to compute the cross product with
         * @returns A number representing result of the cross product.
         */
        static CROSS(_a, _b) {
            let crossProduct = _a.x * _b.y - _a.y * _b.x;
            return crossProduct;
        }
        /**
         * Calculates the orthogonal vector to the given vector. Rotates counterclockwise by default.
         * ```plaintext
         * ‚Üë => ‚Üê => ‚Üì => ‚Üí => ‚Üë
         * ```
         * @param _vector Vector to get the orthogonal equivalent of
         * @param _clockwise Should the rotation be clockwise instead of the default counterclockwise? default: false
         * @returns A Vector that is orthogonal to and has the same magnitude as the given Vector.
         */
        static ORTHOGONAL(_vector, _clockwise = false) {
            let result = FudgeCore.Recycler.get(Vector2);
            if (_clockwise)
                result.set(_vector.y, -_vector.x);
            else
                result.set(-_vector.y, _vector.x);
            return result;
        }
        /**
         * Creates a cartesian vector from polar coordinates
         */
        static GEO(_angle = 0, _magnitude = 1) {
            let vector = FudgeCore.Recycler.get(Vector2);
            let geo = FudgeCore.Recycler.get(FudgeCore.Geo2);
            geo.set(_angle, _magnitude);
            vector.geo = geo;
            FudgeCore.Recycler.store(geo);
            return vector;
        }
        //#endregion
        //#region Accessors
        get x() {
            return this.data[0];
        }
        get y() {
            return this.data[1];
        }
        set x(_x) {
            this.data[0] = _x;
        }
        set y(_y) {
            this.data[1] = _y;
        }
        /**
         * Returns the length of the vector
         */
        get magnitude() {
            return Math.hypot(...this.data);
        }
        /**
         * Returns the square of the magnitude of the vector without calculating a square root. Faster for simple proximity evaluation.
         */
        get magnitudeSquared() {
            return Vector2.DOT(this, this);
        }
        /**
         * Creates and returns a clone of this
         */
        get clone() {
            let clone = FudgeCore.Recycler.get(Vector2);
            clone.data.set(this.data);
            return clone;
        }
        /**
         * Returns a polar representation of this vector
         */
        get geo() {
            let geo = FudgeCore.Recycler.get(FudgeCore.Geo2);
            geo.magnitude = this.magnitude;
            if (geo.magnitude === 0)
                return geo;
            geo.angle = 180 * Math.atan2(this.y / geo.magnitude, this.x / geo.magnitude) / Math.PI;
            return geo;
        }
        /**
         * Adjust the cartesian values of this vector to represent the given as polar coordinates
         */
        set geo(_geo) {
            this.set(_geo.magnitude, 0);
            this.transform(FudgeCore.Matrix3x3.ROTATION(_geo.angle));
        }
        //#endregion
        recycle() {
            this.data.set([0, 0]);
        }
        /**
         * Copies the values of the given vector into this
         */
        copy(_original) {
            this.data.set(_original.data);
        }
        /**
         * Returns true if the coordinates of this and the given vector are to be considered identical within the given tolerance
         * TODO: examine, if tolerance as criterium for the difference is appropriate with very large coordinate values or if _tolerance should be multiplied by coordinate value
         */
        equals(_compare, _tolerance = Number.EPSILON) {
            if (Math.abs(this.x - _compare.x) > _tolerance)
                return false;
            if (Math.abs(this.y - _compare.y) > _tolerance)
                return false;
            return true;
        }
        /**
         * Adds the given vector to the executing vector, changing the executor.
         * @param _addend The vector to add.
         */
        add(_addend) {
            this.data.set([_addend.x + this.x, _addend.y + this.y]);
        }
        /**
         * Subtracts the given vector from the executing vector, changing the executor.
         * @param _subtrahend The vector to subtract.
         */
        subtract(_subtrahend) {
            this.data.set([this.x - _subtrahend.x, this.y - _subtrahend.y]);
        }
        /**
         * Scales the Vector by the given _scalar.
         */
        scale(_scalar) {
            this.data.set([_scalar * this.x, _scalar * this.y]);
        }
        /**
         * Normalizes this to the given length, 1 by default
         */
        normalize(_length = 1) {
            this.data = Vector2.NORMALIZATION(this, _length).data;
        }
        /**
         * Defines the components of this vector with the given numbers
         */
        set(_x = 0, _y = 0) {
            this.data[0] = _x;
            this.data[1] = _y;
        }
        /**
         * @returns An array of the data of the vector
         */
        get() {
            return new Float32Array(this.data);
        }
        transform(_mtxTransform, _includeTranslation = true) {
            this.data = Vector2.TRANSFORMATION(this, _mtxTransform, _includeTranslation).data;
        }
        /**
         * For each dimension, moves the component to the minimum of this and the given vector
         */
        min(_compare) {
            this.x = Math.min(this.x, _compare.x);
            this.y = Math.min(this.y, _compare.y);
        }
        /**
         * For each dimension, moves the component to the maximum of this and the given vector
         */
        max(_compare) {
            this.x = Math.max(this.x, _compare.x);
            this.y = Math.max(this.y, _compare.y);
        }
        /**
         * Adds a z-component of the given magnitude (default=0) to the vector and returns a new Vector3
         */
        toVector3(_z = 0) {
            return new FudgeCore.Vector3(this.x, this.y, _z);
        }
        toString() {
            let result = `(${this.x.toPrecision(5)}, ${this.y.toPrecision(5)})`;
            return result;
        }
        /**
         * Uses the standard array.map functionality to perform the given function on all components of this vector
         * and return a new vector with the results
         */
        map(_function) {
            let copy = FudgeCore.Recycler.get(Vector2);
            copy.data = this.data.map(_function);
            return copy;
        }
        //#region Transfer
        serialize() {
            let serialization = this.getMutator();
            // serialization.toJSON = () => { return `{ "r": ${this.r}, "g": ${this.g}, "b": ${this.b}, "a": ${this.a}}`; };
            serialization.toJSON = () => { return `[${this.x}, ${this.y}]`; };
            return serialization;
        }
        async deserialize(_serialization) {
            if (typeof (_serialization) == "string") {
                [this.x, this.y] = JSON.parse(_serialization);
            }
            else
                this.mutate(_serialization);
            return this;
        }
        getMutator() {
            let mutator = {
                x: this.data[0], y: this.data[1]
            };
            return mutator;
        }
        reduceMutator(_mutator) { }
    }
    FudgeCore.Vector2 = Vector2;
})(FudgeCore || (FudgeCore = {}));
///<reference path="../Recycle/Recycler.ts"/>
///<reference path="Vector2.ts"/>
var FudgeCore;
///<reference path="../Recycle/Recycler.ts"/>
///<reference path="Vector2.ts"/>
(function (FudgeCore) {
    /**
     * Defines the origin of a rectangle
     */
    let ORIGIN2D;
    (function (ORIGIN2D) {
        ORIGIN2D[ORIGIN2D["TOPLEFT"] = 0] = "TOPLEFT";
        ORIGIN2D[ORIGIN2D["TOPCENTER"] = 1] = "TOPCENTER";
        ORIGIN2D[ORIGIN2D["TOPRIGHT"] = 2] = "TOPRIGHT";
        ORIGIN2D[ORIGIN2D["CENTERLEFT"] = 16] = "CENTERLEFT";
        ORIGIN2D[ORIGIN2D["CENTER"] = 17] = "CENTER";
        ORIGIN2D[ORIGIN2D["CENTERRIGHT"] = 18] = "CENTERRIGHT";
        ORIGIN2D[ORIGIN2D["BOTTOMLEFT"] = 32] = "BOTTOMLEFT";
        ORIGIN2D[ORIGIN2D["BOTTOMCENTER"] = 33] = "BOTTOMCENTER";
        ORIGIN2D[ORIGIN2D["BOTTOMRIGHT"] = 34] = "BOTTOMRIGHT";
    })(ORIGIN2D = FudgeCore.ORIGIN2D || (FudgeCore.ORIGIN2D = {}));
    /**
     * Defines a rectangle with position and size and add comfortable methods to it
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Rectangle extends FudgeCore.Mutable {
        constructor(_x = 0, _y = 0, _width = 1, _height = 1, _origin = ORIGIN2D.TOPLEFT) {
            super();
            this.position = FudgeCore.Recycler.get(FudgeCore.Vector2);
            this.size = FudgeCore.Recycler.get(FudgeCore.Vector2);
            this.setPositionAndSize(_x, _y, _width, _height, _origin);
        }
        /**
         * Returns a new rectangle created with the given parameters
         */
        static GET(_x = 0, _y = 0, _width = 1, _height = 1, _origin = ORIGIN2D.TOPLEFT) {
            let rect = FudgeCore.Recycler.get(Rectangle);
            rect.setPositionAndSize(_x, _y, _width, _height);
            return rect;
        }
        get x() {
            return this.position.x;
        }
        get y() {
            return this.position.y;
        }
        get width() {
            return this.size.x;
        }
        get height() {
            return this.size.y;
        }
        /**
         * Return the leftmost expansion, respecting also negative values of width
         */
        get left() {
            if (this.size.x > 0)
                return this.position.x;
            return (this.position.x + this.size.x);
        }
        /**
         * Return the topmost expansion, respecting also negative values of height
         */
        get top() {
            if (this.size.y > 0)
                return this.position.y;
            return (this.position.y + this.size.y);
        }
        /**
         * Return the rightmost expansion, respecting also negative values of width
         */
        get right() {
            if (this.size.x > 0)
                return (this.position.x + this.size.x);
            return this.position.x;
        }
        /**
         * Return the lowest expansion, respecting also negative values of height
         */
        get bottom() {
            if (this.size.y > 0)
                return (this.position.y + this.size.y);
            return this.position.y;
        }
        set x(_x) {
            this.position.x = _x;
        }
        set y(_y) {
            this.position.y = _y;
        }
        set width(_width) {
            this.size.x = _width;
        }
        set height(_height) {
            this.size.y = _height;
        }
        set left(_value) {
            this.size.x = this.right - _value;
            this.position.x = _value;
        }
        set top(_value) {
            this.size.y = this.bottom - _value;
            this.position.y = _value;
        }
        set right(_value) {
            this.size.x = this.position.x + _value;
        }
        set bottom(_value) {
            this.size.y = this.position.y + _value;
        }
        get clone() {
            return Rectangle.GET(this.x, this.y, this.width, this.height);
        }
        recycle() {
            this.setPositionAndSize();
        }
        copy(_rect) {
            this.setPositionAndSize(_rect.x, _rect.y, _rect.width, _rect.height);
        }
        /**
         * Sets the position and size of the rectangle according to the given parameters
         */
        setPositionAndSize(_x = 0, _y = 0, _width = 1, _height = 1, _origin = ORIGIN2D.TOPLEFT) {
            this.size.set(_width, _height);
            switch (_origin & 0x03) {
                case 0x00:
                    this.position.x = _x;
                    break;
                case 0x01:
                    this.position.x = _x - _width / 2;
                    break;
                case 0x02:
                    this.position.x = _x - _width;
                    break;
            }
            switch (_origin & 0x30) {
                case 0x00:
                    this.position.y = _y;
                    break;
                case 0x10:
                    this.position.y = _y - _height / 2;
                    break;
                case 0x20:
                    this.position.y = _y - _height;
                    break;
            }
        }
        pointToRect(_point, _target) {
            let result = _point.clone;
            result.subtract(this.position);
            result.x *= _target.width / this.width;
            result.y *= _target.height / this.height;
            result.add(_target.position);
            return result;
        }
        /**
         * Returns true if the given point is inside of this rectangle or on the border
         * @param _point
         */
        isInside(_point) {
            return (_point.x >= this.left && _point.x <= this.right && _point.y >= this.top && _point.y <= this.bottom);
        }
        /**
         * Returns true if this rectangle collides with the rectangle given
         * @param _rect
         */
        collides(_rect) {
            if (this.left > _rect.right)
                return false;
            if (this.right < _rect.left)
                return false;
            if (this.top > _rect.bottom)
                return false;
            if (this.bottom < _rect.top)
                return false;
            return true;
        }
        /**
         * Returns the rectangle created by the intersection of this and the given rectangle or null, if they don't collide
         */
        getIntersection(_rect) {
            if (!this.collides(_rect))
                return null;
            let intersection = new Rectangle();
            intersection.x = Math.max(this.left, _rect.left);
            intersection.y = Math.max(this.top, _rect.top);
            intersection.width = Math.min(this.right, _rect.right) - intersection.x;
            intersection.height = Math.min(this.bottom, _rect.bottom) - intersection.y;
            return intersection;
        }
        /**
     * Returns the rectangle created by the intersection of this and the given rectangle or null, if they don't collide
     */
        covers(_rect) {
            if (this.left > _rect.left)
                return false;
            if (this.right < _rect.right)
                return false;
            if (this.top > _rect.top)
                return false;
            if (this.bottom < _rect.bottom)
                return false;
            return true;
        }
        /**
         * Creates a string representation of this rectangle
         */
        toString() {
            let result = `∆í.Rectangle(position:${this.position.toString()}, size:${this.size.toString()}`;
            result += `, left:${this.left.toPrecision(5)}, top:${this.top.toPrecision(5)}, right:${this.right.toPrecision(5)}, bottom:${this.bottom.toPrecision(5)}`;
            return result;
        }
        reduceMutator(_mutator) { }
    }
    FudgeCore.Rectangle = Rectangle;
})(FudgeCore || (FudgeCore = {}));
///<reference path="RenderInjector.ts"/>
///<reference path="RenderInjectorShader.ts"/>
///<reference path="RenderInjectorCoat.ts"/>
///<reference path="RenderInjectorMesh.ts"/>
///<reference path="RenderInjectorShaderParticleSystem.ts"/>
///<reference path="RenderInjectorComponentParticleSystem.ts"/>
///<reference path="../Math/Rectangle.ts"/>
var FudgeCore;
///<reference path="RenderInjector.ts"/>
///<reference path="RenderInjectorShader.ts"/>
///<reference path="RenderInjectorCoat.ts"/>
///<reference path="RenderInjectorMesh.ts"/>
///<reference path="RenderInjectorShaderParticleSystem.ts"/>
///<reference path="RenderInjectorComponentParticleSystem.ts"/>
///<reference path="../Math/Rectangle.ts"/>
(function (FudgeCore) {
    // export declare let fudgeConfig: General;
    let BLEND;
    (function (BLEND) {
        BLEND[BLEND["OPAQUE"] = 0] = "OPAQUE";
        BLEND[BLEND["TRANSPARENT"] = 1] = "TRANSPARENT";
        BLEND[BLEND["ADDITIVE"] = 2] = "ADDITIVE";
        BLEND[BLEND["SUBTRACTIVE"] = 3] = "SUBTRACTIVE";
        BLEND[BLEND["MODULATE"] = 4] = "MODULATE";
    })(BLEND = FudgeCore.BLEND || (FudgeCore.BLEND = {}));
    FudgeCore.UNIFORM_BLOCKS = {
        LIGHTS: {
            NAME: "Lights",
            BINDING: 0
        },
        SKIN: {
            NAME: "Skin",
            BINDING: 1
        }
    };
    /**
     * Base class for RenderManager, handling the connection to the rendering system, in this case WebGL.
     * Methods and attributes of this class should not be called directly, only through {@link Render}
     */
    class RenderWebGL extends FudgeCore.EventTargetStatic {
        /**
         * Initializes offscreen-canvas, renderingcontext and hardware viewport. Call once before creating any resources like meshes or shaders
         */
        static initialize(_antialias, _alpha) {
            let fudgeConfig = Reflect.get(globalThis, "fudgeConfig") || {};
            let contextAttributes = {
                alpha: (_alpha != undefined) ? _alpha : fudgeConfig.alpha || false,
                antialias: (_antialias != undefined) ? _antialias : fudgeConfig.antialias || false,
                premultipliedAlpha: false
            };
            FudgeCore.Debug.fudge("Initialize RenderWebGL", contextAttributes);
            let canvas = document.createElement("canvas");
            let crc3;
            crc3 = RenderWebGL.assert(canvas.getContext("webgl2", contextAttributes), "WebGL-context couldn't be created");
            RenderWebGL.crc3 = crc3;
            // Enable backface- and zBuffer-culling.
            crc3.enable(WebGL2RenderingContext.CULL_FACE);
            crc3.enable(WebGL2RenderingContext.DEPTH_TEST);
            crc3.enable(WebGL2RenderingContext.BLEND);
            crc3.blendEquation(WebGL2RenderingContext.FUNC_ADD);
            RenderWebGL.setBlendMode(BLEND.TRANSPARENT);
            // RenderOperator.crc3.pixelStorei(WebGL2RenderingContext.UNPACK_FLIP_Y_WEBGL, true);
            RenderWebGL.rectRender = RenderWebGL.getCanvasRect();
            return crc3;
        }
        /**
         * Wrapper function to utilize the bufferSpecification interface when passing data to the shader via a buffer.
         * @param _attributeLocation  The location of the attribute on the shader, to which they data will be passed.
         * @param _bufferSpecification  Interface passing datapullspecifications to the buffer.
         */
        static setAttributeStructure(_attributeLocation, _bufferSpecification) {
            RenderWebGL.crc3.vertexAttribPointer(_attributeLocation, _bufferSpecification.size, _bufferSpecification.dataType, _bufferSpecification.normalize, _bufferSpecification.stride, _bufferSpecification.offset);
        }
        /**
        * Checks the first parameter and throws an exception with the WebGL-errorcode if the value is null
        * @param _value  value to check against null
        * @param _message  optional, additional message for the exception
        */
        static assert(_value, _message = "") {
            if (_value === null)
                throw new Error(`Assertion failed. ${_message}, WebGL-Error: ${RenderWebGL.crc3 ? RenderWebGL.crc3.getError() : ""}`);
            return _value;
        }
        /**
         * Return a reference to the offscreen-canvas
         */
        static getCanvas() {
            return RenderWebGL.crc3.canvas; // TODO: enable OffscreenCanvas
        }
        /**
         * Return a reference to the rendering context
         */
        static getRenderingContext() {
            return RenderWebGL.crc3;
        }
        /**
         * Return a rectangle describing the size of the offscreen-canvas. x,y are 0 at all times.
         */
        static getCanvasRect() {
            let canvas = RenderWebGL.crc3.canvas;
            return FudgeCore.Rectangle.GET(0, 0, canvas.width, canvas.height);
        }
        /**
         * Set the size of the offscreen-canvas.
         */
        static setCanvasSize(_width, _height) {
            RenderWebGL.crc3.canvas.width = _width;
            RenderWebGL.crc3.canvas.height = _height;
        }
        /**
         * Set the area on the offscreen-canvas to render the camera image to.
         * @param _rect
         */
        static setRenderRectangle(_rect) {
            RenderWebGL.rectRender.setPositionAndSize(_rect.x, _rect.y, _rect.width, _rect.height);
            RenderWebGL.crc3.viewport(_rect.x, _rect.y, _rect.width, _rect.height);
        }
        /**
         * Clear the offscreen renderbuffer with the given {@link Color}
         */
        static clear(_color = null) {
            RenderWebGL.crc3.clearColor(_color.r, _color.g, _color.b, _color.a);
            RenderWebGL.crc3.clear(WebGL2RenderingContext.COLOR_BUFFER_BIT | WebGL2RenderingContext.DEPTH_BUFFER_BIT);
        }
        /**
         * Reset the offscreen framebuffer to the original RenderingContext
         */
        static resetFrameBuffer(_frameBuffer = null) {
            RenderWebGL.crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, _frameBuffer);
        }
        /**
         * Retrieve the area on the offscreen-canvas the camera image gets rendered to.
         */
        static getRenderRectangle() {
            return RenderWebGL.rectRender;
        }
        static setDepthTest(_test) {
            if (_test)
                RenderWebGL.crc3.enable(WebGL2RenderingContext.DEPTH_TEST);
            else
                RenderWebGL.crc3.disable(WebGL2RenderingContext.DEPTH_TEST);
        }
        static setBlendMode(_mode) {
            switch (_mode) {
                case BLEND.OPAQUE:
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_ADD);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.ONE, WebGL2RenderingContext.ZERO);
                    break;
                case BLEND.TRANSPARENT:
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_ADD);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.SRC_ALPHA, WebGL2RenderingContext.ONE_MINUS_SRC_ALPHA);
                    // RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.DST_ALPHA, WebGL2RenderingContext.ONE_MINUS_DST_ALPHA);
                    break;
                case BLEND.ADDITIVE:
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_ADD);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.SRC_ALPHA, WebGL2RenderingContext.DST_ALPHA);
                    break;
                case BLEND.SUBTRACTIVE:
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_REVERSE_SUBTRACT);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.SRC_ALPHA, WebGL2RenderingContext.DST_ALPHA);
                    break;
                case BLEND.MODULATE: // color gets multiplied, tried to copy unitys "Particle Shader: Blending Option: Rendering Mode: Modulate"
                    RenderWebGL.crc3.blendEquation(WebGL2RenderingContext.FUNC_ADD);
                    RenderWebGL.crc3.blendFunc(WebGL2RenderingContext.DST_COLOR, WebGL2RenderingContext.ONE_MINUS_SRC_ALPHA);
                default:
                    break;
            }
        }
        //#region Picking
        /**
         * Creates a texture buffer to be used as pick-buffer
         */
        static createPickTexture(_size) {
            // create to render to
            const targetTexture = FudgeCore.Render.crc3.createTexture();
            FudgeCore.Render.crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, targetTexture);
            {
                const internalFormat = WebGL2RenderingContext.RGBA32I;
                const format = WebGL2RenderingContext.RGBA_INTEGER;
                const type = WebGL2RenderingContext.INT;
                FudgeCore.Render.pickBuffer = new Int32Array(_size * _size * 4);
                FudgeCore.Render.crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, internalFormat, _size, _size, 0, format, type, FudgeCore.Render.pickBuffer);
                // set the filtering so we don't need mips
                FudgeCore.Render.crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, WebGL2RenderingContext.LINEAR);
                FudgeCore.Render.crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_S, WebGL2RenderingContext.CLAMP_TO_EDGE);
                FudgeCore.Render.crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_WRAP_T, WebGL2RenderingContext.CLAMP_TO_EDGE);
            }
            const framebuffer = FudgeCore.Render.crc3.createFramebuffer();
            FudgeCore.Render.crc3.bindFramebuffer(WebGL2RenderingContext.FRAMEBUFFER, framebuffer);
            const attachmentPoint = WebGL2RenderingContext.COLOR_ATTACHMENT0;
            FudgeCore.Render.crc3.framebufferTexture2D(WebGL2RenderingContext.FRAMEBUFFER, attachmentPoint, WebGL2RenderingContext.TEXTURE_2D, targetTexture, 0);
            RenderWebGL.sizePick = _size;
            return targetTexture;
        }
        static getPicks(_size, _cmpCamera) {
            // evaluate texture by reading pixels and extract, convert and store the information about each mesh hit
            let data = new Int32Array(_size * _size * 4);
            FudgeCore.Render.crc3.readPixels(0, 0, _size, _size, WebGL2RenderingContext.RGBA_INTEGER, WebGL2RenderingContext.INT, data);
            let mtxViewToWorld = FudgeCore.Matrix4x4.INVERSION(_cmpCamera.mtxWorldToView);
            let picked = [];
            for (let i = 0; i < FudgeCore.Render.∆ípicked.length; i++) {
                let zBuffer = data[4 * i + 0] + data[4 * i + 1] / 256;
                if (zBuffer == 0) // discard misses 
                    continue;
                let pick = FudgeCore.Render.∆ípicked[i];
                pick.zBuffer = convertInt32toFloat32(data, 4 * i + 0) * 2 - 1;
                pick.color = convertInt32toColor(data, 4 * i + 1);
                pick.textureUV = FudgeCore.Recycler.get(FudgeCore.Vector2);
                pick.textureUV.set(convertInt32toFloat32(data, 4 * i + 2), convertInt32toFloat32(data, 4 * i + 3));
                pick.mtxViewToWorld = mtxViewToWorld;
                picked.push(pick);
            }
            return picked;
            function convertInt32toFloat32(_int32Array, _index) {
                let buffer = new ArrayBuffer(4);
                let view = new DataView(buffer);
                view.setInt32(0, _int32Array[_index]);
                return view.getFloat32(0);
            }
            function convertInt32toColor(_int32Array, _index) {
                let buffer = new ArrayBuffer(4);
                let view = new DataView(buffer);
                view.setInt32(0, _int32Array[_index]);
                let color = FudgeCore.Color.CSS(`rgb(${view.getUint8(0)}, ${view.getUint8(1)}, ${view.getUint8(2)})`, view.getUint8(3) / 255);
                return color;
            }
        }
        /**
        * The render function for picking a single node.
        * A cameraprojection with extremely narrow focus is used, so each pixel of the buffer would hold the same information from the node,
        * but the fragment shader renders only 1 pixel for each node into the render buffer, 1st node to 1st pixel, 2nd node to second pixel etc.
        */
        static pick(_node, _mtxMeshToWorld, _cmpCamera) {
            try {
                let cmpMesh = _node.getComponent(FudgeCore.ComponentMesh);
                let cmpMaterial = _node.getComponent(FudgeCore.ComponentMaterial);
                let coat = cmpMaterial.material.coat;
                let shader = coat instanceof FudgeCore.CoatTextured ? FudgeCore.ShaderPickTextured : FudgeCore.ShaderPick;
                shader.useProgram();
                coat.useRenderData(shader, cmpMaterial);
                let mtxMeshToView = this.calcMeshToView(_node, cmpMesh, _cmpCamera.mtxWorldToView, _cmpCamera.mtxWorld.translation);
                let sizeUniformLocation = shader.uniforms["u_vctSize"];
                RenderWebGL.getRenderingContext().uniform2fv(sizeUniformLocation, [RenderWebGL.sizePick, RenderWebGL.sizePick]);
                let mesh = cmpMesh.mesh;
                let renderBuffers = mesh.useRenderBuffers(shader, _mtxMeshToWorld, mtxMeshToView, FudgeCore.Render.∆ípicked.length);
                RenderWebGL.crc3.drawElements(WebGL2RenderingContext.TRIANGLES, renderBuffers.nIndices, WebGL2RenderingContext.UNSIGNED_SHORT, 0);
                let pick = new FudgeCore.Pick(_node);
                FudgeCore.Render.∆ípicked.push(pick);
            }
            catch (_error) {
                //
            }
        }
        //#endregion
        //#region Lights
        /**
         * Buffer the data from the lights in the scenegraph into the lights ubo
         */
        static fillLightsUBO(_lights) {
            if (!RenderWebGL.uboLights)
                return;
            RenderWebGL.crc3.bindBuffer(WebGL2RenderingContext.UNIFORM_BUFFER, RenderWebGL.uboLights);
            // fill the buffer with the ambient light color
            let cmpLights = _lights.get(FudgeCore.LightAmbient);
            if (cmpLights) {
                let result = new FudgeCore.Color(0, 0, 0, 0);
                for (let cmpLight of cmpLights)
                    result.add(cmpLight.light.color);
                RenderWebGL.crc3.bufferSubData(RenderWebGL.crc3.UNIFORM_BUFFER, RenderWebGL.uboLightsVariableOffsets["u_ambient.vctColor"], // byte offset of the struct Light "u_ambient" inside the ubo
                new Float32Array(result.getArray()));
            }
            // fill the buffer with the light data for each light type
            // we are currently doing a maximum of 4 crc3.bufferSubData() calls, but we could do this in one call
            fillLights(FudgeCore.LightDirectional, "u_nLightsDirectional", "u_directional");
            fillLights(FudgeCore.LightPoint, "u_nLightsPoint", "u_point");
            fillLights(FudgeCore.LightSpot, "u_nLightsSpot", "u_spot");
            RenderWebGL.crc3.bindBuffer(WebGL2RenderingContext.UNIFORM_BUFFER, null);
            function fillLights(_type, _uniName, _uniStruct) {
                const cmpLights = _lights.get(_type);
                RenderWebGL.crc3.bufferSubData(RenderWebGL.crc3.UNIFORM_BUFFER, RenderWebGL.uboLightsVariableOffsets[_uniName], // byte offset of the uint "u_nLightsDirectional" inside the ubo
                new Uint8Array([cmpLights?.length ?? 0]));
                if (!cmpLights)
                    return;
                const lightDataSize = 4 + 16 + 16; // vctColor + mtxShape + mtxShapeInverse, as float32s
                const lightsData = new Float32Array(cmpLights.length * lightDataSize);
                let iLight = 0;
                for (let cmpLight of cmpLights) {
                    const lightDataOffset = iLight * lightDataSize;
                    // set vctColor
                    lightsData.set(cmpLight.light.color.getArray(), lightDataOffset + 0);
                    // set mtxShape
                    let mtxTotal = FudgeCore.Matrix4x4.MULTIPLICATION(cmpLight.node.mtxWorld, cmpLight.mtxPivot);
                    lightsData.set(mtxTotal.get(), lightDataOffset + 4); // offset + vctColor
                    // set mtxShapeInverse
                    if (_type != FudgeCore.LightDirectional) {
                        let mtxInverse = mtxTotal.inverse();
                        lightsData.set(mtxInverse.get(), lightDataOffset + 4 + 16); // offset + vctColor + mtxShape
                        FudgeCore.Recycler.store(mtxInverse);
                    }
                    FudgeCore.Recycler.store(mtxTotal);
                    iLight++;
                }
                RenderWebGL.crc3.bufferSubData(RenderWebGL.crc3.UNIFORM_BUFFER, RenderWebGL.uboLightsVariableOffsets[`${_uniStruct}[0].vctColor`], // byte offset of the struct Light array inside the ubo
                lightsData);
            }
        }
        //#endregion
        /**
         * Draw a mesh buffer using the given infos and the complete projection matrix
         */
        static drawNode(_node, _cmpCamera) {
            let cmpMesh = _node.getComponent(FudgeCore.ComponentMesh);
            let cmpMaterial = _node.getComponent(FudgeCore.ComponentMaterial);
            let coat = cmpMaterial.material.coat;
            let cmpParticleSystem = _node.getComponent(FudgeCore.ComponentParticleSystem);
            let drawParticles = cmpParticleSystem && cmpParticleSystem.isActive;
            let shader = cmpMaterial.material.getShader();
            if (drawParticles)
                shader = cmpParticleSystem.particleSystem.getShaderFrom(shader);
            shader.useProgram();
            coat.useRenderData(shader, cmpMaterial);
            let mtxMeshToView = this.calcMeshToView(_node, cmpMesh, _cmpCamera.mtxWorldToView, _cmpCamera.mtxWorld.translation);
            let renderBuffers = this.getRenderBuffers(cmpMesh, shader, mtxMeshToView);
            let uniform = shader.uniforms["u_vctCamera"];
            if (uniform)
                RenderWebGL.crc3.uniform3fv(uniform, _cmpCamera.mtxWorld.translation.get());
            uniform = shader.uniforms["u_mtxWorldToView"];
            if (uniform)
                RenderWebGL.crc3.uniformMatrix4fv(uniform, false, _cmpCamera.mtxWorldToView.get());
            uniform = shader.uniforms["u_mtxWorldToCamera"];
            if (uniform) {
                // let mtxWorldToCamera: Matrix4x4 = Matrix4x4.INVERSION(_cmpCamera.mtxWorld); // todo: optimize/store in camera
                RenderWebGL.crc3.uniformMatrix4fv(uniform, false, _cmpCamera.mtxCameraInverse.get());
            }
            if (drawParticles) {
                RenderWebGL.drawParticles(cmpParticleSystem, shader, renderBuffers, _node.getComponent(FudgeCore.ComponentFaceCamera), cmpMaterial.sortForAlpha);
            }
            else {
                RenderWebGL.crc3.drawElements(WebGL2RenderingContext.TRIANGLES, renderBuffers.nIndices, WebGL2RenderingContext.UNSIGNED_SHORT, 0);
            }
        }
        static drawParticles(_cmpParticleSystem, _shader, _renderBuffers, _cmpFaceCamera, _sortForAlpha) {
            RenderWebGL.crc3.depthMask(_cmpParticleSystem.depthMask);
            RenderWebGL.setBlendMode(_cmpParticleSystem.blendMode);
            _cmpParticleSystem.useRenderData();
            RenderWebGL.crc3.uniform1f(_shader.uniforms["u_fParticleSystemDuration"], _cmpParticleSystem.duration);
            RenderWebGL.crc3.uniform1f(_shader.uniforms["u_fParticleSystemSize"], _cmpParticleSystem.size);
            RenderWebGL.crc3.uniform1f(_shader.uniforms["u_fParticleSystemTime"], _cmpParticleSystem.time);
            RenderWebGL.crc3.uniform1i(_shader.uniforms["u_fParticleSystemRandomNumbers"], 1); // ATTENTION!: changing this id (the second argument) requires changing of corresponding texture id in component particle system render injector
            let faceCamera = _cmpFaceCamera && _cmpFaceCamera.isActive;
            RenderWebGL.crc3.uniform1i(_shader.uniforms["u_bParticleSystemFaceCamera"], faceCamera ? 1 : 0);
            RenderWebGL.crc3.uniform1i(_shader.uniforms["u_bParticleSystemRestrict"], faceCamera && _cmpFaceCamera.restrict ? 1 : 0);
            RenderWebGL.crc3.drawElementsInstanced(WebGL2RenderingContext.TRIANGLES, _renderBuffers.nIndices, WebGL2RenderingContext.UNSIGNED_SHORT, 0, _cmpParticleSystem.size);
            RenderWebGL.setBlendMode(BLEND.TRANSPARENT);
            RenderWebGL.crc3.depthMask(true);
        }
        static calcMeshToView(_node, _cmpMesh, _mtxWorldToView, _target) {
            let cmpFaceCamera = _node.getComponent(FudgeCore.ComponentFaceCamera);
            if (cmpFaceCamera && cmpFaceCamera.isActive) {
                let mtxMeshToView;
                mtxMeshToView = _cmpMesh.mtxWorld.clone;
                mtxMeshToView.lookAt(_target, cmpFaceCamera.upLocal ? null : cmpFaceCamera.up, cmpFaceCamera.restrict);
                return FudgeCore.Matrix4x4.MULTIPLICATION(_mtxWorldToView, mtxMeshToView);
            }
            return FudgeCore.Matrix4x4.MULTIPLICATION(_mtxWorldToView, _cmpMesh.mtxWorld);
        }
        static getRenderBuffers(_cmpMesh, _shader, _mtxMeshToView) {
            if (_cmpMesh.mesh instanceof FudgeCore.MeshSkin && (_shader.define.includes("SKIN")))
                // TODO: make mesh skin pickable
                return _cmpMesh.mesh.useRenderBuffers(_shader, _cmpMesh.mtxWorld, _mtxMeshToView, null, _cmpMesh.skeleton?.mtxBones);
            else
                return _cmpMesh.mesh.useRenderBuffers(_shader, _cmpMesh.mtxWorld, _mtxMeshToView);
        }
    }
    RenderWebGL.crc3 = RenderWebGL.initialize();
    RenderWebGL.rectRender = RenderWebGL.getCanvasRect();
    FudgeCore.RenderWebGL = RenderWebGL;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    //gives WebGL Buffer the data from the {@link Texture]]
    class RenderInjectorTexture extends FudgeCore.RenderInjector {
        static decorate(_constructor) {
            FudgeCore.RenderInjector.inject(_constructor, RenderInjectorTexture);
        }
        static injectTexture() {
            let crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (this.renderData) {
                // buffers exist
                crc3.activeTexture(WebGL2RenderingContext.TEXTURE0);
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, this.renderData["texture0"]);
            }
            else {
                this.renderData = {};
                // TODO: check if all WebGL-Creations are asserted
                const texture = FudgeCore.Render.assert(crc3.createTexture());
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, texture);
                try {
                    crc3.texImage2D(crc3.TEXTURE_2D, 0, crc3.RGBA, crc3.RGBA, crc3.UNSIGNED_BYTE, this.texImageSource);
                    crc3.texImage2D(WebGL2RenderingContext.TEXTURE_2D, 0, WebGL2RenderingContext.RGBA, WebGL2RenderingContext.RGBA, WebGL2RenderingContext.UNSIGNED_BYTE, this.texImageSource);
                }
                catch (_error) {
                    FudgeCore.Debug.error(_error);
                }
                switch (this.mipmap) {
                    case FudgeCore.MIPMAP.CRISP:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MAG_FILTER, WebGL2RenderingContext.NEAREST);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, WebGL2RenderingContext.NEAREST);
                        break;
                    case FudgeCore.MIPMAP.MEDIUM:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MAG_FILTER, WebGL2RenderingContext.NEAREST);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, WebGL2RenderingContext.NEAREST_MIPMAP_LINEAR);
                        crc3.generateMipmap(crc3.TEXTURE_2D);
                        break;
                    case FudgeCore.MIPMAP.BLURRY:
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MAG_FILTER, WebGL2RenderingContext.LINEAR);
                        crc3.texParameteri(WebGL2RenderingContext.TEXTURE_2D, WebGL2RenderingContext.TEXTURE_MIN_FILTER, WebGL2RenderingContext.LINEAR_MIPMAP_LINEAR);
                        crc3.generateMipmap(crc3.TEXTURE_2D);
                        break;
                }
                this.renderData["texture0"] = texture;
                crc3.bindTexture(WebGL2RenderingContext.TEXTURE_2D, null);
                this.useRenderData();
            }
        }
    }
    FudgeCore.RenderInjectorTexture = RenderInjectorTexture;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class EventPhysics extends Event {
        /** Creates a new event customized for physics. Holding informations about impulses. Collision point and the body that is colliding */
        constructor(_type, _hitRigidbody, _normalImpulse, _tangentImpulse, _binormalImpulse, _collisionPoint = null, _collisionNormal = null) {
            super(_type);
            this.cmpRigidbody = _hitRigidbody;
            this.normalImpulse = _normalImpulse;
            this.tangentImpulse = _tangentImpulse;
            this.binomalImpulse = _binormalImpulse;
            this.collisionPoint = _collisionPoint;
            this.collisionNormal = _collisionNormal;
        }
    }
    FudgeCore.EventPhysics = EventPhysics;
    /**
    * Groups to place a node in, not every group should collide with every group. Use a Mask in to exclude collisions
    */
    let COLLISION_GROUP;
    (function (COLLISION_GROUP) {
        COLLISION_GROUP[COLLISION_GROUP["DEFAULT"] = 1] = "DEFAULT";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_1"] = 2] = "GROUP_1";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_2"] = 4] = "GROUP_2";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_3"] = 8] = "GROUP_3";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_4"] = 16] = "GROUP_4";
        COLLISION_GROUP[COLLISION_GROUP["GROUP_5"] = 32] = "GROUP_5";
    })(COLLISION_GROUP = FudgeCore.COLLISION_GROUP || (FudgeCore.COLLISION_GROUP = {}));
    /**
    * Defines the type of the rigidbody which determines the way it interacts with the physical and the visual world
    */
    let BODY_TYPE;
    (function (BODY_TYPE) {
        /** The body ignores the hierarchy of the render graph, is completely controlled  by physics and takes its node with it  */
        BODY_TYPE[BODY_TYPE["DYNAMIC"] = 0] = "DYNAMIC";
        /** The body ignores the hierarchy of the render graph, is completely immoveble and keeps its node from moving  */
        BODY_TYPE[BODY_TYPE["STATIC"] = 1] = "STATIC";
        /** The body is controlled by its node and moves with it, while it impacts the physical world e.g. by collisions */
        BODY_TYPE[BODY_TYPE["KINEMATIC"] = 2] = "KINEMATIC"; // = OIMO.RigidBodyType.KINEMATIC
    })(BODY_TYPE = FudgeCore.BODY_TYPE || (FudgeCore.BODY_TYPE = {}));
    /**
    * Different types of collider shapes, with different options in scaling BOX = Vector3(length, height, depth),
    * SPHERE = Vector3(diameter, x, x), CAPSULE = Vector3(diameter, height, x), CYLINDER = Vector3(diameter, height, x),
    * CONE = Vector(diameter, height, x), PYRAMID = Vector3(length, height, depth); x == unused.
    * CONVEX = ComponentMesh needs to be available in the RB Property convexMesh, the points of that component are used to create a collider that matches,
    * the closest possible representation of that form, in form of a hull. Convex is experimental and can produce unexpected behaviour when vertices
    * are too close to one another and the given vertices do not form a in itself closed shape and having a genus of 0 (no holes). Vertices in the ComponentMesh can be scaled differently
    * for texturing/normal or other reasons, so the collider might be off compared to the visual shape, this can be corrected by changing the pivot scale of the ComponentRigidbody.
    */
    let COLLIDER_TYPE;
    (function (COLLIDER_TYPE) {
        COLLIDER_TYPE[COLLIDER_TYPE["CUBE"] = 0] = "CUBE";
        COLLIDER_TYPE[COLLIDER_TYPE["SPHERE"] = 1] = "SPHERE";
        COLLIDER_TYPE[COLLIDER_TYPE["CAPSULE"] = 2] = "CAPSULE";
        COLLIDER_TYPE[COLLIDER_TYPE["CYLINDER"] = 3] = "CYLINDER";
        COLLIDER_TYPE[COLLIDER_TYPE["CONE"] = 4] = "CONE";
        COLLIDER_TYPE[COLLIDER_TYPE["PYRAMID"] = 5] = "PYRAMID";
        COLLIDER_TYPE[COLLIDER_TYPE["CONVEX"] = 6] = "CONVEX";
    })(COLLIDER_TYPE = FudgeCore.COLLIDER_TYPE || (FudgeCore.COLLIDER_TYPE = {}));
    /** Displaying different types of debug information about different physic features. Default = JOINTS_AND_COLLIDER. */
    let PHYSICS_DEBUGMODE;
    (function (PHYSICS_DEBUGMODE) {
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["NONE"] = 0] = "NONE";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["COLLIDERS"] = 1] = "COLLIDERS";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["JOINTS_AND_COLLIDER"] = 2] = "JOINTS_AND_COLLIDER";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["BOUNDING_BOXES"] = 3] = "BOUNDING_BOXES";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["CONTACTS"] = 4] = "CONTACTS";
        PHYSICS_DEBUGMODE[PHYSICS_DEBUGMODE["PHYSIC_OBJECTS_ONLY"] = 5] = "PHYSIC_OBJECTS_ONLY";
    })(PHYSICS_DEBUGMODE = FudgeCore.PHYSICS_DEBUGMODE || (FudgeCore.PHYSICS_DEBUGMODE = {}));
    /** Info about Raycasts shot from the physics system. */
    class RayHitInfo {
        constructor() {
            this.hitPoint = FudgeCore.Vector3.ZERO();
            this.hitNormal = FudgeCore.Vector3.ZERO();
            this.rayEnd = FudgeCore.Vector3.ZERO();
            this.rayOrigin = FudgeCore.Vector3.ZERO();
            this.recycle();
        }
        recycle() {
            this.hit = false;
            this.hitDistance = 0;
            this.hitPoint.recycle();
            this.rigidbodyComponent = null;
            this.hitNormal.recycle();
            this.rayOrigin.recycle();
            this.rayEnd.recycle();
        }
    }
    FudgeCore.RayHitInfo = RayHitInfo;
    /** General settings for the physic simulation and the debug of it. */
    class PhysicsSettings {
        constructor(_defaultCollisionGroup, _defaultCollisionMask) {
            if (typeof OIMO == "undefined")
                return;
            this.defaultCollisionGroup = _defaultCollisionGroup;
            this.defaultCollisionMask = _defaultCollisionMask;
        }
        /** Change if rigidbodies are able to sleep (don't be considered in physical calculations) when their movement is below a threshold. Deactivation is decreasing performance for minor advantage in precision. */
        get disableSleeping() {
            return OIMO.Setting.disableSleeping;
        }
        set disableSleeping(_value) {
            OIMO.Setting.disableSleeping = _value;
        }
        /** Sleeping Threshold for Movement Veloctiy. */
        get sleepingVelocityThreshold() {
            return OIMO.Setting.sleepingVelocityThreshold;
        }
        set sleepingVelocityThreshold(_value) {
            OIMO.Setting.sleepingVelocityThreshold = _value;
        }
        /** Sleeping Threshold for Rotation Velocity. */
        get sleepingAngularVelocityThreshold() {
            return OIMO.Setting.sleepingAngularVelocityThreshold;
        }
        set sleepingAngularVelocityThreshold(_value) {
            OIMO.Setting.sleepingAngularVelocityThreshold = _value;
        }
        /** Threshold how long the Rigidbody must be below/above the threshold to count as sleeping. */
        get sleepingTimeThreshold() {
            return OIMO.Setting.sleepingTimeThreshold;
        }
        set sleepingTimeThreshold(_value) {
            OIMO.Setting.sleepingTimeThreshold = _value;
        }
        /** Error threshold. Default is 0.05. The higher the more likely collisions get detected before actual impact at high speeds but it's visually less accurate. */
        get defaultCollisionMargin() {
            return OIMO.Setting.defaultGJKMargin;
        }
        set defaultCollisionMargin(_thickness) {
            OIMO.Setting.defaultGJKMargin = _thickness;
        }
        /** The default applied friction between two rigidbodies with the default value. How much velocity is slowed down when moving accross this surface. */
        get defaultFriction() {
            return OIMO.Setting.defaultFriction;
        }
        set defaultFriction(_value) {
            OIMO.Setting.defaultFriction = _value;
        }
        /** Bounciness of rigidbodies. How much of the impact is restituted. */
        get defaultRestitution() {
            return OIMO.Setting.defaultRestitution;
        }
        set defaultRestitution(_value) {
            OIMO.Setting.defaultRestitution = _value;
        }
        /** Groups the default rigidbody will collide with. Set it like: (PHYSICS_GROUP.DEFAULT | PHYSICS_GROUP.GROUP_1 | PHYSICS_GROUP.GROUP_2 | PHYSICS_GROUP.GROUP_3)
         * to collide with multiple groups. Default is collision with everything but triggers.
        */
        get defaultCollisionMask() {
            return OIMO.Setting.defaultCollisionMask;
        }
        set defaultCollisionMask(_value) {
            OIMO.Setting.defaultCollisionMask = _value;
        }
        /** The group that this rigidbody belongs to. Default is the DEFAULT Group which means its just a normal Rigidbody not a trigger nor anything special. */
        get defaultCollisionGroup() {
            return OIMO.Setting.defaultCollisionGroup;
        }
        set defaultCollisionGroup(_value) {
            OIMO.Setting.defaultCollisionGroup = _value;
        }
        /** Change the type of joint solver algorithm. Default Iterative == 0, is faster but less stable. Direct == 1, slow but more stable, recommended for complex joint work. Change this setting only at the start of your game. */
        get defaultConstraintSolverType() {
            return OIMO.Setting.defaultJointConstraintSolverType;
        }
        set defaultConstraintSolverType(_value) {
            OIMO.Setting.defaultJointConstraintSolverType = _value;
        }
        /** The correction algorithm used to correct physics calculations. Change this only at the beginning of your game. Each has different approaches, so if you have problems test another
         *  Default 0 = Baumgarte (fast but less correct induces some energy errors), 1 = Split-Impulse (fast and no engery errors, but more inaccurate for joints), 2 = Non-linear Gauss Seidel (slowest but most accurate)*/
        get defaultCorrectionAlgorithm() {
            return OIMO.Setting.defaultJointPositionCorrectionAlgorithm;
        }
        set defaultCorrectionAlgorithm(_value) {
            OIMO.Setting.defaultJointPositionCorrectionAlgorithm = _value;
        }
        /** The precision of the simulation in form of number of iterations the simulations runs through until it accepts the result.
         *  10 Default - Higher means more precision but results in a performance decrease. This helps especially with joints,
         * but also the general stability of the simulation due to simulation steps being rechecked multiple times before being set.
         */
        get solverIterations() {
            return FudgeCore.Physics.activeInstance.getOimoWorld().getNumPositionIterations();
        }
        set solverIterations(_value) {
            FudgeCore.Physics.activeInstance.getOimoWorld().setNumPositionIterations(_value);
            FudgeCore.Physics.activeInstance.getOimoWorld().setNumVelocityIterations(_value);
        }
    }
    FudgeCore.PhysicsSettings = PhysicsSettings;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * Acts as the physical representation of a connection between two {@link Node}'s.
       * The type of conncetion is defined by the subclasses like prismatic joint, cylinder joint etc.
       * A Rigidbody on the {@link Node} that this component is added to is needed. Setting the connectedRigidbody and
       * initializing the connection creates a physical connection between them. This differs from a connection through hierarchy
       * in the node structure of fudge. Joints can have different DOF's (Degrees Of Freedom), 1 Axis that can either twist or swing is a degree of freedom.
       * A joint typically consists of a motor that limits movement/rotation or is activly trying to move to a limit. And a spring which defines the rigidity.
       * @author Marko Fehrenbach, HFU 2020
       */
    class Joint extends FudgeCore.Component {
        /** Create a joint connection between the two given RigidbodyComponents. */
        constructor(_bodyAnchor = null, _bodyTied = null) {
            super();
            this.#idBodyAnchor = 0;
            this.#idBodyTied = 0;
            this.#connected = false;
            this.#internalCollision = false;
            this.#breakForce = 0;
            this.#breakTorque = 0;
            // public static readonly iSubclass: number = Component.registerSubclass(ComponentJoint);
            this.singleton = false; //Multiple joints can be attached to one Node
            this.#getMutator = () => {
                let mutator = {
                    nameChildToConnect: this.#nameChildToConnect,
                    internalCollision: this.#internalCollision,
                    breakForce: this.#breakForce,
                    breakTorque: this.#breakTorque
                };
                return mutator;
            };
            this.#mutate = (_mutator) => {
                this.mutateBase(_mutator, ["internalCollision", "breakForce", "breakTorque"]);
            };
            this.hndEvent = (_event) => {
                switch (_event.type) {
                    case "componentAdd" /* COMPONENT_ADD */:
                        this.node.addEventListener("disconnectJoint" /* DISCONNECT_JOINT */, () => { this.disconnect(); this.dirtyStatus(); }, true);
                        this.dirtyStatus();
                        break;
                    case "componentRemove" /* COMPONENT_REMOVE */:
                        this.node.removeEventListener("disconnectJoint" /* DISCONNECT_JOINT */, () => { this.disconnect(); this.dirtyStatus(); }, true);
                        this.removeJoint();
                        break;
                }
            };
            this.bodyAnchor = _bodyAnchor;
            this.bodyTied = _bodyTied;
            /*
              Tell the physics that there is a new joint and on the physics start the actual joint is first created. Values can be set but the
              actual constraint ain't existent until the game starts
            */
            this.addEventListener("componentAdd" /* COMPONENT_ADD */, this.hndEvent);
            this.addEventListener("componentRemove" /* COMPONENT_REMOVE */, this.hndEvent);
        }
        #idBodyAnchor;
        #idBodyTied;
        #bodyAnchor;
        #bodyTied;
        #connected;
        #anchor;
        #internalCollision;
        #breakForce;
        #breakTorque;
        #nameChildToConnect;
        static registerSubclass(_subclass) { return Joint.subclasses.push(_subclass) - 1; }
        /** Get/Set the first ComponentRigidbody of this connection. It should always be the one that this component is attached too in the sceneTree. */
        get bodyAnchor() {
            return this.#bodyAnchor;
        }
        set bodyAnchor(_cmpRB) {
            this.#idBodyAnchor = _cmpRB != null ? _cmpRB.id : -1;
            this.#bodyAnchor = _cmpRB;
            this.disconnect();
            this.dirtyStatus();
        }
        /** Get/Set the second ComponentRigidbody of this connection. */
        get bodyTied() {
            return this.#bodyTied;
        }
        set bodyTied(_cmpRB) {
            this.#idBodyTied = _cmpRB != null ? _cmpRB.id : -1;
            this.#bodyTied = _cmpRB;
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The exact position where the two {@link Node}s are connected. When changed after initialization the joint needs to be reconnected.
         */
        get anchor() {
            return new FudgeCore.Vector3(this.#anchor.x, this.#anchor.y, this.#anchor.z);
        }
        set anchor(_value) {
            this.#anchor = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The amount of force needed to break the JOINT, while rotating, in Newton. 0 equals unbreakable (default)
        */
        get breakTorque() {
            return this.#breakTorque;
        }
        set breakTorque(_value) {
            this.#breakTorque = _value;
            if (this.joint != null)
                this.joint.setBreakTorque(this.#breakTorque);
        }
        /**
         * The amount of force needed to break the JOINT, in Newton. 0 equals unbreakable (default)
         */
        get breakForce() {
            return this.#breakForce;
        }
        set breakForce(_value) {
            this.#breakForce = _value;
            if (this.joint != null)
                this.joint.setBreakForce(this.#breakForce);
        }
        /**
          * If the two connected RigidBodies collide with eath other. (Default = false)
          * On a welding joint the connected bodies should not be colliding with each other,
          * for best results
         */
        get internalCollision() {
            return this.#internalCollision;
        }
        set internalCollision(_value) {
            this.#internalCollision = _value;
            if (this.joint != null)
                this.joint.setAllowCollision(this.#internalCollision);
        }
        connectChild(_name) {
            this.#nameChildToConnect = _name;
            if (!this.node)
                return;
            let children = this.node.getChildrenByName(_name);
            if (children.length == 1)
                this.connectNode(children.pop());
            else
                FudgeCore.Debug.warn(`${this.constructor.name} at ${this.node.name} fails to connect child with non existent or ambigous name ${_name}`);
        }
        connectNode(_node) {
            if (!_node || !this.node)
                return;
            FudgeCore.Debug.fudge(`${this.constructor.name} connected ${this.node.name} and ${_node.name}`);
            let connectBody = _node.getComponent(FudgeCore.ComponentRigidbody);
            let thisBody = this.node.getComponent(FudgeCore.ComponentRigidbody);
            if (!connectBody || !thisBody) {
                FudgeCore.Debug.warn(`${this.constructor.name} at ${this.node.name} fails due to missing rigidbodies on ${this.node.name} or ${_node.name}`);
                return;
            }
            this.bodyAnchor = thisBody;
            this.bodyTied = connectBody;
        }
        /** Check if connection is dirty, so when either rb is changed disconnect and reconnect. Internally used no user interaction needed. */
        isConnected() {
            return this.#connected;
        }
        /**
         * Initializing and connecting the two rigidbodies with the configured joint properties
         * is automatically called by the physics system. No user interaction needed.
         */
        connect() {
            if (this.#connected == false) {
                if (this.#idBodyAnchor == -1 || this.#idBodyTied == -1) {
                    if (this.#nameChildToConnect)
                        this.connectChild(this.#nameChildToConnect);
                    return;
                }
                this.constructJoint();
                this.#connected = true;
                this.addJoint();
            }
        }
        /**
         * Disconnecting the two rigidbodies and removing them from the physics system,
         * is automatically called by the physics system. No user interaction needed.
         */
        disconnect() {
            if (this.#connected == true) {
                this.removeJoint();
                this.#connected = false;
            }
        }
        /**
         * Returns the original Joint used by the physics engine. Used internally no user interaction needed.
         * Only to be used when functionality that is not added within FUDGE is needed.
        */
        getOimoJoint() {
            return this.joint;
        }
        serialize() {
            let serialization = this.#getMutator();
            serialization.anchor = this.anchor.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.anchor = await new FudgeCore.Vector3().deserialize(_serialization.anchor);
            this.#mutate(_serialization);
            await super.deserialize(_serialization[super.constructor.name]);
            this.connectChild(_serialization.nameChildToConnect);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator(true);
            Object.assign(mutator, this.#getMutator());
            mutator.anchor = this.anchor.getMutator();
            return mutator;
        }
        async mutate(_mutator) {
            if (typeof (_mutator.anchor) !== "undefined")
                this.anchor = new FudgeCore.Vector3(...(Object.values(_mutator.anchor)));
            delete _mutator.anchor;
            if (typeof (_mutator.nameChildToConnect) !== "undefined")
                this.connectChild(_mutator.nameChildToConnect);
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            super.mutate(_mutator);
        }
        #getMutator;
        #mutate;
        reduceMutator(_mutator) {
            delete _mutator.springDamper;
            delete _mutator.joint;
            delete _mutator.motor;
            super.reduceMutator(_mutator);
        }
        /** Tell the FudgePhysics system that this joint needs to be handled in the next frame. */
        dirtyStatus() {
            FudgeCore.Physics.changeJointStatus(this);
        }
        addJoint() {
            FudgeCore.Physics.addJoint(this);
        }
        removeJoint() {
            FudgeCore.Physics.removeJoint(this);
        }
        constructJoint(..._configParams) {
            let posBodyAnchor = this.bodyAnchor.node.mtxWorld.translation; //Setting the anchor position locally from the first rigidbody
            let worldAnchor = new OIMO.Vec3(posBodyAnchor.x + this.#anchor.x, posBodyAnchor.y + this.#anchor.y, posBodyAnchor.z + this.#anchor.z);
            // @ts-ignore    // unfortunately, method init is not a member of the base class OIMO.JointConfig
            this.config.init(this.#bodyAnchor.getOimoRigidbody(), this.#bodyTied.getOimoRigidbody(), worldAnchor, ..._configParams);
        }
        configureJoint() {
            this.joint.setBreakForce(this.breakForce);
            this.joint.setBreakTorque(this.breakTorque);
            this.joint.setAllowCollision(this.#internalCollision);
        }
        deleteFromMutator(_mutator, _delete) {
            for (let key in _delete)
                delete _mutator[key];
        }
    }
    /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
    Joint.baseClass = Joint;
    /** list of all the subclasses derived from this class, if they registered properly*/
    Joint.subclasses = [];
    FudgeCore.Joint = Joint;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * Base class for joints operating with exactly one axis
       * @author Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class JointAxial extends FudgeCore.Joint {
        /** Creating a cylindrical joint between two ComponentRigidbodies moving on one axis and rotating around another bound on a local anchorpoint. */
        constructor(_bodyAnchor = null, _bodyTied = null, _axis = new FudgeCore.Vector3(0, 1, 0), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            //Internal Variables
            this.#maxMotor = 10;
            this.#minMotor = -10;
            this.#motorSpeed = 0;
            this.#springFrequency = 0;
            this.#springDamping = 0;
            this.#getMutator = () => {
                let mutator = {
                    springDamping: this.#springDamping,
                    springFrequency: this.#springFrequency,
                    maxMotor: this.#maxMotor,
                    minMotor: this.#minMotor,
                    motorSpeed: this.#motorSpeed
                };
                return mutator;
            };
            this.#mutate = (_mutator) => {
                this.mutateBase(_mutator, ["springDamping", "springFrequency", "maxMotor", "minMotor", "motorSpeed"]);
            };
            this.axis = _axis;
            this.anchor = _localAnchor;
            this.minMotor = -10;
            this.maxMotor = 10;
        }
        //Internal Variables
        #maxMotor;
        #minMotor;
        #motorSpeed;
        #axis;
        #springFrequency;
        #springDamping;
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
         *  When changed after initialization the joint needs to be reconnected.
         */
        get axis() {
            return new FudgeCore.Vector3(this.#axis.x, this.#axis.y, this.#axis.z);
        }
        set axis(_value) {
            this.#axis = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit.
         */
        get maxMotor() {
            return this.#maxMotor;
        }
        set maxMotor(_value) {
            this.#maxMotor = _value;
            try {
                this.joint.getLimitMotor().upperLimit = _value;
            }
            catch (_e) { /* */ }
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit.
         */
        get minMotor() {
            return this.#minMotor;
        }
        set minMotor(_value) {
            this.#minMotor = _value;
            try {
                this.joint.getLimitMotor().lowerLimit = _value;
            }
            catch (_e) { /* */ }
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDamping() {
            return this.#springDamping;
        }
        set springDamping(_value) {
            this.#springDamping = _value;
            try {
                this.joint.getSpringDamper().dampingRatio = _value;
            }
            catch (_e) { /* */ }
        }
        /**
          * The target speed of the motor in m/s.
         */
        get motorSpeed() {
            return this.#motorSpeed;
        }
        set motorSpeed(_value) {
            this.#motorSpeed = _value;
            try {
                this.joint.getLimitMotor().motorSpeed = _value;
            }
            catch (_e) { /* */ }
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequency() {
            return this.#springFrequency;
        }
        set springFrequency(_value) {
            this.#springFrequency = _value;
            try {
                this.joint.getSpringDamper().frequency = _value;
            }
            catch (_e) { /* */ }
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = this.#getMutator();
            serialization.axis = this.axis.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.axis = await new FudgeCore.Vector3().deserialize(_serialization.axis);
            this.#mutate(_serialization);
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        async mutate(_mutator) {
            if (typeof (_mutator.axis) !== "undefined")
                this.axis = new FudgeCore.Vector3(...(Object.values(_mutator.axis)));
            delete _mutator.axis;
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            super.mutate(_mutator);
        }
        getMutator() {
            let mutator = super.getMutator();
            mutator.axis = this.axis.getMutator();
            Object.assign(mutator, this.#getMutator());
            return mutator;
        }
        #getMutator;
        #mutate;
        //#endregion
        constructJoint() {
            this.springDamper = new OIMO.SpringDamper().setSpring(this.#springFrequency, this.#springDamping);
            super.constructJoint(this.#axis);
        }
    }
    FudgeCore.JointAxial = JointAxial;
})(FudgeCore || (FudgeCore = {}));
/// <reference path="Debug/DebugTarget.ts"/>
/// <reference path="Debug/Debug.ts"/>
// / <reference path="Time/Time.ts"/>
/// <reference path="Event/Event.ts"/>
/// <reference path="Serialization/Mutable.ts"/>
/// <reference path="Serialization/Serializer.ts"/> 
/// <reference path="Graph/Node.ts"/>
/// <reference path="Component/Component.ts"/>
/// <reference path="Recycle/RecycableArray.ts"/>
/// <reference path="Render/RenderWebGL.ts"/>
/// <reference path="Render/RenderInjectorTexture.ts"/>
/// <reference path="Physics/HelpersPhysics.ts"/>
/// <reference path="Physics/Joint.ts"/>
/// <reference path="Physics/JointAxial.ts"/>
//global functions
function ifNumber(_check, _default) {
    return typeof _check == "undefined" ? _default : _check;
}
// / <reference path="../Transfer/Mutable.ts"/>
var FudgeCore;
// / <reference path="../Transfer/Mutable.ts"/>
(function (FudgeCore) {
    /**
     * Internally used to differentiate between the various generated structures and events.
     * @author Lukas Scheuerle, HFU, 2019
     */
    let ANIMATION_STRUCTURE_TYPE;
    (function (ANIMATION_STRUCTURE_TYPE) {
        /**Default: forward, continous */
        ANIMATION_STRUCTURE_TYPE[ANIMATION_STRUCTURE_TYPE["NORMAL"] = 0] = "NORMAL";
        /**backward, continous */
        ANIMATION_STRUCTURE_TYPE[ANIMATION_STRUCTURE_TYPE["REVERSE"] = 1] = "REVERSE";
        /**forward, rastered */
        ANIMATION_STRUCTURE_TYPE[ANIMATION_STRUCTURE_TYPE["RASTERED"] = 2] = "RASTERED";
        /**backward, rastered */
        ANIMATION_STRUCTURE_TYPE[ANIMATION_STRUCTURE_TYPE["RASTEREDREVERSE"] = 3] = "RASTEREDREVERSE";
    })(ANIMATION_STRUCTURE_TYPE || (ANIMATION_STRUCTURE_TYPE = {}));
    /**
     * Holds different playmodes the animation uses to play back its animation.
     * @author Lukas Scheuerle, HFU, 2019
     */
    let ANIMATION_PLAYMODE;
    (function (ANIMATION_PLAYMODE) {
        /**Plays animation in a loop: it restarts once it hit the end.*/
        ANIMATION_PLAYMODE["LOOP"] = "loop";
        /**Plays animation once and stops at the last key/frame*/
        ANIMATION_PLAYMODE["PLAY_ONCE"] = "playOnce";
        /**Plays animation once and stops on the first key/frame */
        ANIMATION_PLAYMODE["PLAY_ONCE_RESET"] = "playOnceReset";
        /**Plays animation like LOOP, but backwards.*/
        ANIMATION_PLAYMODE["REVERSE_LOOP"] = "reverseLoop";
        /**Causes the animation not to play at all. Useful for jumping to various positions in the animation without proceeding in the animation.*/
        ANIMATION_PLAYMODE["STOP"] = "stop";
        //TODO: add an INHERIT and a PINGPONG mode
    })(ANIMATION_PLAYMODE = FudgeCore.ANIMATION_PLAYMODE || (FudgeCore.ANIMATION_PLAYMODE = {}));
    let ANIMATION_QUANTIZATION;
    (function (ANIMATION_QUANTIZATION) {
        //TODO: add an in-depth description of what happens to the animation (and events) depending on the quantization. Use Graphs to explain.
        /**Calculates the state of the animation at the exact position of time. Ignores FPS value of animation.*/
        ANIMATION_QUANTIZATION["CONTINOUS"] = "continous";
        /**Limits the calculation of the state of the animation to the FPS value of the animation. Skips frames if needed.*/
        ANIMATION_QUANTIZATION["DISCRETE"] = "discrete";
        /** Advances the time each frame according to the FPS value of the animation, ignoring the actual duration of the frames. Doesn't skip any frames.*/
        ANIMATION_QUANTIZATION["FRAMES"] = "frames";
    })(ANIMATION_QUANTIZATION = FudgeCore.ANIMATION_QUANTIZATION || (FudgeCore.ANIMATION_QUANTIZATION = {}));
    /**
     * Describes and controls and animation by yielding mutators
     * according to the stored {@link AnimationStructure} and {@link AnimationSequence}s
     * Applied to a {@link Node} directly via script or {@link ComponentAnimator}.
     * @author Lukas Scheuerle, HFU, 21019 | Jirka Dell'Oro-Friedl, HFU, 2021-2023
     */
    class Animation extends FudgeCore.Mutable {
        constructor(_name = Animation.name, _animStructure = {}, _fps = 60) {
            super();
            this.idResource = undefined;
            this.totalTime = 0;
            this.labels = {}; // a label marks a specific time to conveniently jump to using a text identifier
            this.events = {};
            this.framesPerSecond = 60; // TODO: change this and its accessors to #framesPerSecond?
            // processed eventlist and animation strucutres for playback.
            this.eventsProcessed = new Map();
            this.#animationStructuresProcessed = new Map();
            this.name = _name;
            this.animationStructure = _animStructure;
            this.#animationStructuresProcessed.set(ANIMATION_STRUCTURE_TYPE.NORMAL, _animStructure);
            this.framesPerSecond = _fps;
            this.calculateTotalTime();
            FudgeCore.Project.register(this);
        }
        #animationStructuresProcessed;
        static registerSubclass(_subClass) { return Animation.subclasses.push(_subClass) - 1; }
        get getLabels() {
            //TODO: this actually needs testing
            let en = new Enumerator(this.labels);
            return en;
        }
        get fps() {
            return this.framesPerSecond;
        }
        set fps(_fps) {
            this.framesPerSecond = _fps;
            this.eventsProcessed.clear();
            this.clearCache();
        }
        clearCache() {
            this.#animationStructuresProcessed.clear();
        }
        /**
         * Generates and returns a {@link Mutator} with the information to apply to the {@link Node} to animate
         * in the state the animation is in at the given time, direction and quantization
         */
        getState(_time, _direction, _quantization) {
            let m = {};
            let animationStructure;
            if (_quantization == ANIMATION_QUANTIZATION.CONTINOUS)
                animationStructure = _direction < 0 ? ANIMATION_STRUCTURE_TYPE.REVERSE : ANIMATION_STRUCTURE_TYPE.NORMAL;
            else
                animationStructure = _direction < 0 ? ANIMATION_STRUCTURE_TYPE.RASTEREDREVERSE : ANIMATION_STRUCTURE_TYPE.RASTERED;
            m = this.traverseStructureForMutator(this.getProcessedAnimationStructure(animationStructure), _time);
            return m;
        }
        /**
         * Returns a list of the names of the events the {@link ComponentAnimator} needs to fire between _min and _max input values.
         * @param _direction The direction the animation is supposed to run in. >0 == forward, 0 == stop, <0 == backwards
         * @returns a list of strings with the names of the custom events to fire.
         */
        getEventsToFire(_min, _max, _quantization, _direction) {
            let eventList = [];
            let minSection = Math.floor(_min / this.totalTime);
            let maxSection = Math.floor(_max / this.totalTime);
            _min = _min % this.totalTime;
            _max = _max % this.totalTime;
            while (minSection <= maxSection) {
                let eventTriggers = this.getCorrectEventList(_direction, _quantization);
                if (minSection == maxSection) {
                    eventList = eventList.concat(this.checkEventsBetween(eventTriggers, _min, _max));
                }
                else {
                    eventList = eventList.concat(this.checkEventsBetween(eventTriggers, _min, this.totalTime));
                    _min = 0;
                }
                minSection++;
            }
            return eventList;
        }
        /**
         * Adds an Event to the List of events.
         * @param _name The name of the event (needs to be unique per Animation).
         * @param _time The timestamp of the event (in milliseconds).
         */
        setEvent(_name, _time) {
            this.events[_name] = _time;
            this.eventsProcessed.clear();
        }
        /**
         * Removes the event with the given name from the list of events.
         * @param _name name of the event to remove.
         */
        removeEvent(_name) {
            delete this.events[_name];
            this.eventsProcessed.clear();
        }
        /**
         * (Re-)Calculate the total time of the Animation. Calculation-heavy, use only if actually needed.
         */
        calculateTotalTime() {
            this.totalTime = 0;
            this.traverseStructureForTime(this.animationStructure);
        }
        /**
         * Returns the time to use for animation sampling when applying a playmode
         */
        getModalTime(_time, _playmode, _timeStop = _time) {
            switch (_playmode) {
                case ANIMATION_PLAYMODE.STOP:
                    // return this.localTime.getOffset();
                    return _timeStop;
                case ANIMATION_PLAYMODE.PLAY_ONCE:
                    if (_time >= this.totalTime)
                        return this.totalTime - 0.01; //TODO: this might cause some issues
                case ANIMATION_PLAYMODE.PLAY_ONCE_RESET:
                    if (_time >= this.totalTime)
                        // TODO: return _timeStop instead?
                        return this.totalTime + 0.01; //TODO: this might cause some issues
            }
            return _time;
        }
        /**
         * Calculates and returns the direction the animation should currently be playing in.
         * @param _time the time at which to calculate the direction
         * @returns 1 if forward, 0 if stop, -1 if backwards
         */
        calculateDirection(_time, _playmode) {
            switch (_playmode) {
                case ANIMATION_PLAYMODE.STOP:
                    return 0;
                // case ANIMATION_PLAYMODE.PINGPONG:
                //   if (Math.floor(_time / this.animation.totalTime) % 2 == 0)
                //     return 1;
                //   else
                //     return -1;
                case ANIMATION_PLAYMODE.REVERSE_LOOP:
                    return -1;
                case ANIMATION_PLAYMODE.PLAY_ONCE:
                case ANIMATION_PLAYMODE.PLAY_ONCE_RESET:
                    if (_time >= this.totalTime) {
                        return 0;
                    }
                default:
                    return 1;
            }
        }
        //#region transfer
        serialize() {
            let s = {
                idResource: this.idResource,
                name: this.name,
                labels: {},
                events: {},
                framesPerSecond: this.framesPerSecond,
                // sps: this.stepsPerSecond
            };
            for (let name in this.labels) {
                s.labels[name] = this.labels[name];
            }
            for (let name in this.events) {
                s.events[name] = this.events[name];
            }
            s.animationStructure = this.traverseStructureForSerialization(this.animationStructure);
            return s;
        }
        async deserialize(_serialization) {
            FudgeCore.Project.register(this, _serialization.idResource);
            this.name = _serialization.name;
            this.framesPerSecond = _serialization.framesPerSecond;
            // this.stepsPerSecond = _serialization.sps;
            this.labels = {};
            for (let name in _serialization.labels) {
                this.labels[name] = _serialization.labels[name];
            }
            this.events = {};
            for (let name in _serialization.events) {
                this.events[name] = _serialization.events[name];
            }
            this.eventsProcessed = new Map();
            this.animationStructure = await this.traverseStructureForDeserialization(_serialization.animationStructure);
            this.#animationStructuresProcessed = new Map();
            this.calculateTotalTime();
            return this;
        }
        // public getMutator(): Mutator {
        //   return this.serialize();
        // }
        reduceMutator(_mutator) {
            delete _mutator.totalTime;
        }
        /**
         * Traverses an AnimationStructure and returns the Serialization of said Structure.
         * @param _structure The Animation Structure at the current level to transform into the Serialization.
         * @returns the filled Serialization.
         */
        traverseStructureForSerialization(_structure) {
            let serialization = {};
            for (const property in _structure) {
                let structureOrSequence = _structure[property];
                if (structureOrSequence instanceof FudgeCore.AnimationSequence) {
                    serialization[property] = structureOrSequence.serialize();
                }
                else {
                    if (FudgeCore.Component.subclasses.some(type => type.name == property)) {
                        serialization[property] = [];
                        for (const i in structureOrSequence) {
                            serialization[property].push(this.traverseStructureForSerialization(structureOrSequence[i]));
                        }
                    }
                    else {
                        serialization[property] = this.traverseStructureForSerialization(structureOrSequence);
                    }
                }
            }
            return serialization;
        }
        /**
         * Traverses a Serialization to create a new AnimationStructure.
         * @param _serialization The serialization to transfer into an AnimationStructure
         * @returns the newly created AnimationStructure.
         */
        async traverseStructureForDeserialization(_serialization) {
            let structure = {};
            for (let n in _serialization) {
                if (_serialization[n].animationSequence) {
                    let animSeq = new FudgeCore.AnimationSequence();
                    structure[n] = (await animSeq.deserialize(_serialization[n]));
                }
                else {
                    structure[n] = await this.traverseStructureForDeserialization(_serialization[n]);
                }
            }
            return structure;
        }
        //#endregion
        /**
         * Finds and returns the list of events to be used with these settings.
         */
        getCorrectEventList(_direction, _quantization) {
            if (_quantization != ANIMATION_QUANTIZATION.FRAMES) {
                if (_direction >= 0) {
                    return this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.NORMAL);
                }
                else {
                    return this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.REVERSE);
                }
            }
            else {
                if (_direction >= 0) {
                    return this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.RASTERED);
                }
                else {
                    return this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.RASTEREDREVERSE);
                }
            }
        }
        /**
         * Traverses an {@link AnimationStructure} and returns a {@link Mutator} describing the state at the given time
         */
        traverseStructureForMutator(_structure, _time) {
            let newMutator = {};
            for (let n in _structure) {
                if (_structure[n] instanceof FudgeCore.AnimationSequence) {
                    newMutator[n] = _structure[n].evaluate(_time);
                }
                else {
                    newMutator[n] = this.traverseStructureForMutator(_structure[n], _time);
                }
            }
            return newMutator;
        }
        /**
         * Traverses the current AnimationStrcuture to find the totalTime of this animation.
         * @param _structure The structure to traverse
         */
        traverseStructureForTime(_structure) {
            for (let n in _structure) {
                if (_structure[n] instanceof FudgeCore.AnimationSequence) {
                    let sequence = _structure[n];
                    if (sequence.length > 0) {
                        let sequenceTime = sequence.getKey(sequence.length - 1).time;
                        this.totalTime = Math.max(sequenceTime, this.totalTime);
                    }
                }
                else {
                    this.traverseStructureForTime(_structure[n]);
                }
            }
        }
        /**
         * Ensures the existance of the requested {@link AnimationStrcuture} and returns it.
         * @param _type the type of the structure to get
         * @returns the requested [[@link AnimationStructure]]
         */
        getProcessedAnimationStructure(_type) {
            if (!this.#animationStructuresProcessed.has(_type)) {
                this.calculateTotalTime();
                let ae = {};
                switch (_type) {
                    case ANIMATION_STRUCTURE_TYPE.NORMAL:
                        ae = this.animationStructure;
                        break;
                    case ANIMATION_STRUCTURE_TYPE.REVERSE:
                        ae = this.traverseStructureForNewStructure(this.animationStructure, this.calculateReverseSequence.bind(this));
                        break;
                    case ANIMATION_STRUCTURE_TYPE.RASTERED:
                        ae = this.traverseStructureForNewStructure(this.animationStructure, this.calculateRasteredSequence.bind(this));
                        break;
                    case ANIMATION_STRUCTURE_TYPE.RASTEREDREVERSE:
                        ae = this.traverseStructureForNewStructure(this.getProcessedAnimationStructure(ANIMATION_STRUCTURE_TYPE.REVERSE), this.calculateRasteredSequence.bind(this));
                        break;
                    default:
                        return {};
                }
                this.#animationStructuresProcessed.set(_type, ae);
            }
            return this.#animationStructuresProcessed.get(_type);
        }
        /**
         * Ensures the existance of the requested {@link AnimationEventTrigger} and returns it.
         * @param _type The type of AnimationEventTrigger to get
         * @returns the requested {@link AnimationEventTrigger}
         */
        getProcessedEventTrigger(_type) {
            if (!this.eventsProcessed.has(_type)) {
                this.calculateTotalTime();
                let ev = {};
                switch (_type) {
                    case ANIMATION_STRUCTURE_TYPE.NORMAL:
                        ev = this.events;
                        break;
                    case ANIMATION_STRUCTURE_TYPE.REVERSE:
                        ev = this.calculateReverseEventTriggers(this.events);
                        break;
                    case ANIMATION_STRUCTURE_TYPE.RASTERED:
                        ev = this.calculateRasteredEventTriggers(this.events);
                        break;
                    case ANIMATION_STRUCTURE_TYPE.RASTEREDREVERSE:
                        ev = this.calculateRasteredEventTriggers(this.getProcessedEventTrigger(ANIMATION_STRUCTURE_TYPE.REVERSE));
                        break;
                    default:
                        return {};
                }
                this.eventsProcessed.set(_type, ev);
            }
            return this.eventsProcessed.get(_type);
        }
        /**
         * Traverses an existing structure to apply a recalculation function to the AnimationStructure to store in a new Structure.
         * @param _oldStructure The old structure to traverse
         * @param _functionToUse The function to use to recalculated the structure.
         * @returns A new Animation Structure with the recalulated Animation Sequences.
         */
        traverseStructureForNewStructure(_oldStructure, _functionToUse) {
            let newStructure = {};
            for (let n in _oldStructure) {
                if (_oldStructure[n] instanceof FudgeCore.AnimationSequence) {
                    newStructure[n] = _functionToUse(_oldStructure[n]);
                }
                else {
                    newStructure[n] = this.traverseStructureForNewStructure(_oldStructure[n], _functionToUse);
                }
            }
            return newStructure;
        }
        /**
         * Creates a reversed Animation Sequence out of a given Sequence.
         * @param _sequence The sequence to calculate the new sequence out of
         * @returns The reversed Sequence
         */
        calculateReverseSequence(_sequence) {
            let seq = new FudgeCore.AnimationSequence();
            for (let i = 0; i < _sequence.length; i++) {
                let oldKey = _sequence.getKey(i);
                let key = new FudgeCore.AnimationKey(this.totalTime - oldKey.time, oldKey.value, oldKey.slopeOut, oldKey.slopeIn, oldKey.constant);
                seq.addKey(key);
            }
            return seq;
        }
        /**
         * Creates a rastered {@link AnimationSequence} out of a given sequence.
         * @param _sequence The sequence to calculate the new sequence out of
         * @returns the rastered sequence.
         */
        calculateRasteredSequence(_sequence) {
            let seq = new FudgeCore.AnimationSequence();
            let frameTime = 1000 / this.framesPerSecond;
            for (let i = 0; i < this.totalTime; i += frameTime) {
                let key = new FudgeCore.AnimationKey(i, _sequence.evaluate(i), 0, 0, true);
                seq.addKey(key);
            }
            return seq;
        }
        /**
         * Creates a new reversed {@link AnimationEventTrigger} object based on the given one.
         * @param _events the event object to calculate the new one out of
         * @returns the reversed event object
         */
        calculateReverseEventTriggers(_events) {
            let ae = {};
            for (let name in _events) {
                ae[name] = this.totalTime - _events[name];
            }
            return ae;
        }
        /**
         * Creates a rastered {@link AnimationEventTrigger} object based on the given one.
         * @param _events the event object to calculate the new one out of
         * @returns the rastered event object
         */
        calculateRasteredEventTriggers(_events) {
            let ae = {};
            let frameTime = 1000 / this.framesPerSecond;
            for (let name in _events) {
                ae[name] = _events[name] - (_events[name] % frameTime);
            }
            return ae;
        }
        /**
         * Checks which events lay between two given times and returns the names of the ones that do.
         * @param _eventTriggers The event object to check the events inside of
         * @param _min the minimum of the range to check between (inclusive)
         * @param _max the maximum of the range to check between (exclusive)
         * @returns an array of the names of the events in the given range.
         */
        checkEventsBetween(_eventTriggers, _min, _max) {
            let eventsToTrigger = [];
            for (let name in _eventTriggers) {
                if (_min <= _eventTriggers[name] && _eventTriggers[name] < _max) {
                    eventsToTrigger.push(name);
                }
            }
            return eventsToTrigger;
        }
    }
    // /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
    // public static readonly baseClass: typeof Animation = Animation;
    // /** list of all the subclasses derived from this class, if they registered properly*/
    Animation.subclasses = [];
    Animation.iSubclass = Animation.registerSubclass(Animation);
    FudgeCore.Animation = Animation;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="../Transfer/Serializer.ts"/>
// / <reference path="../Transfer/Mutable.ts"/>
var FudgeCore;
// / <reference path="../Transfer/Serializer.ts"/>
// / <reference path="../Transfer/Mutable.ts"/>
(function (FudgeCore) {
    /**
     * Calculates the values between {@link AnimationKey}s.
     * Represented internally by a cubic function (`f(x) = ax¬≥ + bx¬≤ + cx + d`).
     * Only needs to be recalculated when the keys change, so at runtime it should only be calculated once.
     * @author Lukas Scheuerle, HFU, 2019
     */
    class AnimationFunction {
        constructor(_keyIn, _keyOut = null) {
            this.a = 0;
            this.b = 0;
            this.c = 0;
            this.d = 0;
            this.keyIn = _keyIn;
            this.keyOut = _keyOut;
            this.calculate();
        }
        set setKeyIn(_keyIn) {
            this.keyIn = _keyIn;
            this.calculate();
        }
        set setKeyOut(_keyOut) {
            this.keyOut = _keyOut;
            this.calculate();
        }
        getParameters() {
            return { a: this.a, b: this.b, c: this.c, d: this.d };
        }
        /**
         * Calculates the value of the function at the given time.
         * @param _time the point in time at which to evaluate the function in milliseconds. Will be corrected for offset internally.
         * @returns the value at the given time
         */
        evaluate(_time) {
            _time -= this.keyIn.time;
            let time2 = _time * _time;
            let time3 = time2 * _time;
            return this.a * time3 + this.b * time2 + this.c * _time + this.d;
        }
        /**
         * (Re-)Calculates the parameters of the cubic function.
         * See https://math.stackexchange.com/questions/3173469/calculate-cubic-equation-from-two-points-and-two-slopes-variably
         * and https://jirkadelloro.github.io/FUDGE/Documentation/Logs/190410_Notizen_LS
         */
        calculate() {
            if (!this.keyIn) {
                this.d = this.c = this.b = this.a = 0;
                return;
            }
            if (!this.keyOut || this.keyIn.constant) {
                this.d = this.keyIn.value;
                this.c = this.b = this.a = 0;
                return;
            }
            let x1 = this.keyOut.time - this.keyIn.time;
            this.d = this.keyIn.value;
            this.c = this.keyIn.slopeOut;
            this.a = (-x1 * (this.keyIn.slopeOut + this.keyOut.slopeIn) - 2 * this.keyIn.value + 2 * this.keyOut.value) / -Math.pow(x1, 3);
            this.b = (this.keyOut.slopeIn - this.keyIn.slopeOut - 3 * this.a * Math.pow(x1, 2)) / (2 * x1);
        }
    }
    FudgeCore.AnimationFunction = AnimationFunction;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="../Transfer/Serializer.ts"/>
// / <reference path="../Transfer/Mutable.ts"/>
var FudgeCore;
// / <reference path="../Transfer/Serializer.ts"/>
// / <reference path="../Transfer/Mutable.ts"/>
(function (FudgeCore) {
    /**
     * Holds information about continous points in time their accompanying values as well as their slopes.
     * Also holds a reference to the {@link AnimationFunction}s that come in and out of the sides.
     * The {@link AnimationFunction}s are handled by the {@link AnimationSequence}s.
     * If the property constant is true, the value does not change and wil not be interpolated between this and the next key in a sequence
     * @author Lukas Scheuerle, HFU, 2019
     */
    class AnimationKey extends FudgeCore.Mutable {
        constructor(_time = 0, _value = 0, _slopeIn = 0, _slopeOut = 0, _constant = false) {
            super();
            this.#constant = false;
            this.#slopeIn = 0;
            this.#slopeOut = 0;
            this.#time = _time;
            this.#value = _value;
            this.#slopeIn = _slopeIn;
            this.#slopeOut = _slopeOut;
            this.#constant = _constant;
            this.broken = this.slopeIn != -this.slopeOut;
            this.functionOut = new FudgeCore.AnimationFunction(this, null);
        }
        #time;
        #value;
        #constant;
        #slopeIn;
        #slopeOut;
        /**
         * Static comparation function to use in an array sort function to sort the keys by their time.
         * @param _a the animation key to check
         * @param _b the animation key to check against
         * @returns >0 if a>b, 0 if a=b, <0 if a<b
         */
        static compare(_a, _b) {
            return _a.time - _b.time;
        }
        get time() {
            return this.#time;
        }
        set time(_time) {
            this.#time = _time;
            this.functionIn.calculate();
            this.functionOut.calculate();
        }
        get value() {
            return this.#value;
        }
        set value(_value) {
            this.#value = _value;
            this.functionIn.calculate();
            this.functionOut.calculate();
        }
        get constant() {
            return this.#constant;
        }
        set constant(_constant) {
            this.#constant = _constant;
            this.functionIn.calculate();
            this.functionOut.calculate();
        }
        get slopeIn() {
            return this.#slopeIn;
        }
        set slopeIn(_slope) {
            this.#slopeIn = _slope;
            this.functionIn.calculate();
        }
        get slopeOut() {
            return this.#slopeOut;
        }
        set slopeOut(_slope) {
            this.#slopeOut = _slope;
            this.functionOut.calculate();
        }
        //#region transfer
        serialize() {
            let serialization = {};
            serialization.time = this.#time;
            serialization.value = this.#value;
            serialization.slopeIn = this.#slopeIn;
            serialization.slopeOut = this.#slopeOut;
            serialization.constant = this.#constant;
            return serialization;
        }
        async deserialize(_serialization) {
            this.#time = _serialization.time;
            this.#value = _serialization.value;
            this.#slopeIn = _serialization.slopeIn;
            this.#slopeOut = _serialization.slopeOut;
            this.#constant = _serialization.constant;
            this.broken = this.slopeIn != -this.slopeOut;
            return this;
        }
        getMutator() {
            return this.serialize();
        }
        reduceMutator(_mutator) {
            //
        }
    }
    FudgeCore.AnimationKey = AnimationKey;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A sequence of {@link AnimationKey}s that is mapped to an attribute of a {@link Node} or its {@link Component}s inside the {@link Animation}.
     * Provides functions to modify said keys
     * @authors Lukas Scheuerle, HFU, 2019 | Jonas Plotzky, HFU, 2022
     */
    class AnimationSequence extends FudgeCore.Mutable {
        constructor() {
            super(...arguments);
            this.keys = [];
        }
        get length() {
            return this.keys.length;
        }
        /**
         * Evaluates the sequence at the given point in time.
         * @param _time the point in time at which to evaluate the sequence in milliseconds.
         * @returns the value of the sequence at the given time. undefined if there are no keys.
         */
        evaluate(_time) {
            if (this.keys.length == 0)
                return undefined; //TODO: shouldn't return 0 but something indicating no change, like null. probably needs to be changed in Node as well to ignore non-numeric values in the applyAnimation function
            if (this.keys.length == 1 || this.keys[0].time >= _time)
                return this.keys[0].value;
            for (let i = 0; i < this.keys.length - 1; i++) {
                if (this.keys[i].time <= _time && this.keys[i + 1].time > _time) {
                    return this.keys[i].functionOut.evaluate(_time);
                }
            }
            return this.keys[this.keys.length - 1].value;
        }
        /**
         * Adds a new key to the sequence.
         * @param _key the key to add
         */
        addKey(_key) {
            this.keys.push(_key);
            this.keys.sort(FudgeCore.AnimationKey.compare);
            this.regenerateFunctions();
        }
        /**
         * Modifys a given key in the sequence.
         * @param _key the key to add
         */
        modifyKey(_key, _time, _value) {
            if (_time != null)
                _key.time = _time;
            if (_value != null)
                _key.value = _value;
            this.keys.sort(FudgeCore.AnimationKey.compare);
            this.regenerateFunctions();
        }
        /**
         * Removes a given key from the sequence.
         * @param _key the key to remove
         */
        removeKey(_key) {
            for (let i = 0; i < this.keys.length; i++) {
                if (this.keys[i] == _key) {
                    this.keys.splice(i, 1);
                    this.regenerateFunctions();
                    return;
                }
            }
        }
        /**
         * Find a key in the sequence exactly matching the given time.
         */
        findKey(_time) {
            for (let key of this.keys)
                if (key.time == _time)
                    return key;
            return null;
        }
        /**
         * Removes the Animation Key at the given index from the keys.
         * @param _index the zero-based index at which to remove the key
         * @returns the removed AnimationKey if successful, null otherwise.
         */
        removeKeyAtIndex(_index) {
            if (_index < 0 || _index >= this.keys.length) {
                return null;
            }
            let ak = this.keys[_index];
            this.keys.splice(_index, 1);
            this.regenerateFunctions();
            return ak;
        }
        /**
         * Gets a key from the sequence at the desired index.
         * @param _index the zero-based index at which to get the key
         * @returns the AnimationKey at the index if it exists, null otherwise.
         */
        getKey(_index) {
            if (_index < 0 || _index >= this.keys.length)
                return null;
            return this.keys[_index];
        }
        getKeys() {
            return this.keys;
        }
        //#region transfer
        serialize() {
            let s = {
                keys: [],
                animationSequence: true
            };
            for (let i = 0; i < this.keys.length; i++) {
                s.keys[i] = this.keys[i].serialize();
            }
            return s;
        }
        async deserialize(_serialization) {
            for (let i = 0; i < _serialization.keys.length; i++) {
                // this.keys.push(<AnimationKey>Serializer.deserialize(_serialization.keys[i]));
                let k = new FudgeCore.AnimationKey();
                await k.deserialize(_serialization.keys[i]);
                this.keys[i] = k;
            }
            this.regenerateFunctions();
            return this;
        }
        reduceMutator(_mutator) {
            //
        }
        //#endregion
        /**
         * Utility function that (re-)generates all functions in the sequence.
         */
        regenerateFunctions() {
            for (let i = 0; i < this.keys.length; i++) {
                let f = new FudgeCore.AnimationFunction(this.keys[i]);
                this.keys[i].functionOut = f;
                if (i == this.keys.length - 1) {
                    //TODO: check if this is even useful. Maybe update the runcondition to length - 1 instead. Might be redundant if functionIn is removed, see TODO in AnimationKey.
                    f.setKeyOut = this.keys[0];
                    this.keys[0].functionIn = f;
                    break;
                }
                f.setKeyOut = this.keys[i + 1];
                this.keys[i + 1].functionIn = f;
            }
        }
    }
    FudgeCore.AnimationSequence = AnimationSequence;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class AnimationSprite extends FudgeCore.Animation {
        // TODO: fps should be a parameter too
        constructor(_name = "AnimationSprite") {
            super(_name, {}, 1);
            this.texture = FudgeCore.TextureDefault.texture;
            this.frames = 25;
            this.wrapAfter = 5;
            this.start = new FudgeCore.Vector2(0, 0);
            this.size = new FudgeCore.Vector2(80, 80);
            this.next = new FudgeCore.Vector2(80, 0);
            this.wrap = new FudgeCore.Vector2(0, 80);
            this.framesPerSecond = this.frames;
            this.create(this.texture, this.frames, this.wrapAfter, this.start, this.size, this.next, this.wrap, this.framesPerSecond);
        }
        setTexture(_texture) {
            this.texture = _texture;
            this.idTexture = _texture.idResource;
        }
        create(_texture, _frames, _wrapAfter, _start, _size, _next, _wrap, _framesPerSecond) {
            this.setTexture(_texture);
            this.frames = _frames;
            this.wrapAfter = _wrapAfter;
            this.start = _start;
            this.size = _size;
            this.next = _next;
            this.wrap = _wrap;
            this.framesPerSecond = _framesPerSecond;
            let scale = this.getScale();
            let positions = this.getPositions();
            let xTranslation = new FudgeCore.AnimationSequence();
            let yTranslation = new FudgeCore.AnimationSequence();
            let xScale = new FudgeCore.AnimationSequence();
            let yScale = new FudgeCore.AnimationSequence();
            xScale.addKey(new FudgeCore.AnimationKey(0, scale.x));
            yScale.addKey(new FudgeCore.AnimationKey(0, scale.y));
            for (let frame = 0; frame <= this.frames; frame++) {
                let time = 1000 * frame / this.framesPerSecond;
                let position = positions[Math.min(frame, this.frames - 1)]; //repeat the last key to give the last frame some time
                xTranslation.addKey(new FudgeCore.AnimationKey(time, position.x / this.texture.texImageSource.width)); //, 0, 0, true))
                yTranslation.addKey(new FudgeCore.AnimationKey(time, position.y / this.texture.texImageSource.height)); //, 0, 0, true))
            }
            this.animationStructure = {
                "components": {
                    "ComponentMaterial": [{
                            "mtxPivot": {
                                "translation": {
                                    x: xTranslation,
                                    y: yTranslation,
                                },
                                "scaling": {
                                    x: xScale,
                                    y: yScale,
                                }
                            }
                        }]
                }
            };
            this.calculateTotalTime();
        }
        getScale() {
            return new FudgeCore.Vector2(this.size.x / this.texture.texImageSource.width, this.size.y / this.texture.texImageSource.height);
        }
        getPositions() {
            let iNext = 0;
            let iWrap = 0;
            let positions = [];
            for (let frame = 0; frame < this.frames; frame++) {
                positions.push(new FudgeCore.Vector2(this.start.x + iNext * this.next.x + iWrap * this.wrap.x, this.start.y + iNext * this.next.y + iWrap * this.wrap.y));
                iNext++;
                if (iNext >= this.wrapAfter) {
                    iNext = 0;
                    iWrap++;
                }
            }
            return positions;
        }
        //#region transfer
        async mutate(_mutator, _selection, _dispatchMutate) {
            super.mutate(_mutator);
            this.create(this.texture, this.frames, this.wrapAfter, this.start, this.size, this.next, this.wrap, this.framesPerSecond);
        }
        serialize() {
            let serialization = {};
            serialization.idResource = this.idResource;
            serialization.idTexture = this.idTexture;
            serialization.frames = this.frames;
            serialization.wrapAfter = this.wrapAfter;
            for (let name of ["start", "size", "next", "wrap"])
                serialization[name] = Reflect.get(this, name).serialize();
            let animationsStructure = this.animationStructure;
            this.animationStructure = {}; // no need to serialize structure
            // let serialization: Serialization = super.serialize();
            serialization[super.constructor.name] = super.serialize();
            this.animationStructure = animationsStructure; // restore existent structure
            return serialization;
        }
        async deserialize(_s) {
            await super.deserialize(_s[super.constructor.name]);
            if (_s.idTexture)
                this.texture = await FudgeCore.Project.getResource(_s.idTexture);
            else
                this.texture = FudgeCore.TextureDefault.texture;
            for (let name of ["start", "size", "next", "wrap"])
                Reflect.get(this, name).deserialize(_s[name]);
            this.create(this.texture, _s.frames, _s.wrapAfter, this.start, this.size, this.next, this.wrap, this.framesPerSecond);
            return this;
        }
        //#endregion
        convertToAnimation() {
            let animation = new FudgeCore.Animation(this.name, this.animationStructure, this.framesPerSecond);
            return animation;
        }
    }
    AnimationSprite.iSubclass = FudgeCore.Animation.registerSubclass(AnimationSprite);
    FudgeCore.AnimationSprite = AnimationSprite;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Extension of AudioBuffer with a load method that creates a buffer in the {@link AudioManager}.default to be used with {@link ComponentAudio}
     * @authors Thomas Dorner, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class Audio extends FudgeCore.Mutable {
        constructor(_url) {
            super();
            this.name = "Audio";
            this.idResource = undefined;
            this.buffer = undefined;
            this.path = undefined;
            this.url = undefined;
            this.ready = false;
            if (_url) {
                this.load(_url);
                this.name = _url.toString().split("/").pop();
            }
            FudgeCore.Project.register(this);
        }
        get isReady() {
            return this.ready;
        }
        /**
         * Asynchronously loads the audio (mp3) from the given url
         */
        async load(_url) {
            FudgeCore.Debug.fudge("AudioLoad", _url);
            this.url = _url;
            this.ready = false;
            this.path = new URL(this.url.toString(), FudgeCore.Project.baseURL);
            const response = await window.fetch(this.path.toString());
            const arrayBuffer = await response.arrayBuffer();
            let buffer = await FudgeCore.AudioManager.default.decodeAudioData(arrayBuffer);
            this.buffer = buffer;
            this.ready = true;
            this.dispatchEvent(new Event("ready" /* READY */));
        }
        //#region Transfer
        serialize() {
            return {
                url: this.url,
                idResource: this.idResource,
                name: this.name,
                type: this.type
            };
        }
        async deserialize(_serialization) {
            FudgeCore.Project.register(this, _serialization.idResource);
            await this.load(_serialization.url);
            this.name = _serialization.name;
            return this;
        }
        async mutate(_mutator) {
            let url = _mutator.url; // save url for reconstruction after exclusion
            if (_mutator.url != this.url.toString())
                this.load(_mutator.url);
            // except url from mutator for further processing
            delete (_mutator.url);
            super.mutate(_mutator);
            // reconstruct, for mutator may be kept by caller
            Reflect.set(_mutator, "url", url);
        }
        reduceMutator(_mutator) {
            // delete _mutator.idResource; 
            delete _mutator.ready;
        }
    }
    FudgeCore.Audio = Audio;
})(FudgeCore || (FudgeCore = {}));
///<reference path="../Event/EventAudio.ts"/>
var FudgeCore;
///<reference path="../Event/EventAudio.ts"/>
(function (FudgeCore) {
    /**
     * Extends the standard AudioContext for integration with FUDGE-graphs.
     * Creates a default object at startup to be addressed as AudioManager default.
     * Other objects of this class may be create for special purposes.
     */
    class AudioManager extends AudioContext {
        constructor(contextOptions) {
            super(contextOptions);
            this.graph = null;
            this.cmpListener = null;
            /**
             * Determines FUDGE-graph to listen to. Each {@link ComponentAudio} in the graph will connect to this contexts master gain, all others disconnect.
             */
            this.listenTo = (_graph) => {
                if (this.graph)
                    this.graph.broadcastEvent(new Event("childRemoveFromAudioGraph" /* CHILD_REMOVE */));
                if (!_graph)
                    return;
                this.graph = _graph;
                this.graph.broadcastEvent(new Event("childAppendToAudioGraph" /* CHILD_APPEND */));
            };
            /**
             * Retrieve the FUDGE-graph currently listening to
             */
            this.getGraphListeningTo = () => {
                return this.graph;
            };
            /**
             * Set the {@link ComponentAudioListener} that serves the spatial location and orientation for this contexts listener
             */
            this.listenWith = (_cmpListener) => {
                this.cmpListener = _cmpListener;
            };
            /**
             * Updates the spatial settings of the AudioNodes effected in the current FUDGE-graph
             */
            this.update = () => {
                // this.graph.broadcastEvent(new Event(EVENT_AUDIO.UPDATE));
                this.graph.broadcastEvent(AudioManager.eventUpdate);
                if (this.cmpListener)
                    this.cmpListener.update(this.listener);
            };
            this.gain = this.createGain();
            this.gain.connect(this.destination);
        }
        /**
         * Set the master volume
         */
        set volume(_value) {
            this.gain.gain.value = _value;
        }
        /**
         * Get the master volume
         */
        get volume() {
            return this.gain.gain.value;
        }
    }
    /** The default context that may be used throughout the project without the need to create others */
    AudioManager.default = new AudioManager({ latencyHint: "interactive", sampleRate: 44100 });
    AudioManager.eventUpdate = new Event("updateAudioGraph" /* UPDATE */);
    FudgeCore.AudioManager = AudioManager;
})(FudgeCore || (FudgeCore = {}));
// namespace FudgeCore {
//     /**
//      * Enumerator for all possible Oscillator Types
//      */
//     type OSCILLATOR_TYPE = "sine" | "square" | "sawtooth" | "triangle" | "custom";
//     /**
//      * Interface to create Custom Oscillator Types.
//      * Start-/Endpoint of a custum curve e.g. sine curve.
//      * Both parameters need to be inbetween -1 and 1.
//      * @param startpoint startpoint of a curve 
//      * @param endpoint Endpoint of a curve 
//      */
//     interface OscillatorWave {
//         startpoint: number;
//         endpoint: number;
//     }
//     /**
//      * Add an {@link AudioFilter} to an {@link Audio]]
//      * @authors Thomas Dorner, HFU, 2019
//      */
//     export class AudioOscillator {
//         public audioOscillator: OscillatorNode; 
//         private frequency: number;
//         private oscillatorType: OSCILLATOR_TYPE;
//         private oscillatorWave: PeriodicWave;
//         private localGain: GainNode;
//         private localGainValue: number;
//         constructor(_audioSettings: AudioSettings, _oscillatorType?: OSCILLATOR_TYPE) {
//             this.audioOscillator = _audioSettings.getAudioContext().createOscillator();
//             this.localGain = _audioSettings.getAudioContext().createGain();
//             this.oscillatorType = _oscillatorType;
//             if (this.oscillatorType != "custom") {
//                 this.audioOscillator.type = this.oscillatorType;
//             }
//             else {
//                 if (!this.oscillatorWave) {
//                     this.audioOscillator.setPeriodicWave(this.oscillatorWave);
//                 }
//                 else {
//                     console.log("Create a Custom Periodic Wave first to use Custom Type");
//                 }
//             }
//         }
//         public setOscillatorType(_oscillatorType: OSCILLATOR_TYPE): void {
//             if (this.oscillatorType != "custom") {
//                 this.audioOscillator.type = this.oscillatorType;
//             }
//             else {
//                 if (!this.oscillatorWave) {
//                     this.audioOscillator.setPeriodicWave(this.oscillatorWave);
//                 }
//             }
//         }
//         public getOscillatorType(): OSCILLATOR_TYPE {
//             return this.oscillatorType;
//         }
//         public createPeriodicWave(_audioSettings: AudioSettings, _real: OscillatorWave, _imag: OscillatorWave): void {
//             let waveReal: Float32Array = new Float32Array(2);
//             waveReal[0] = _real.startpoint;
//             waveReal[1] = _real.endpoint;
//             let waveImag: Float32Array = new Float32Array(2);
//             waveImag[0] = _imag.startpoint;
//             waveImag[1] = _imag.endpoint;
//             this.oscillatorWave = _audioSettings.getAudioContext().createPeriodicWave(waveReal, waveImag);
//         }
//         public setLocalGain(_localGain: GainNode): void {
//             this.localGain = _localGain;
//         }
//         public getLocalGain(): GainNode {
//             return this.localGain;
//         }
//         public setLocalGainValue(_localGainValue: number): void {
//             this.localGainValue = _localGainValue;
//             this.localGain.gain.value = this.localGainValue;
//         }
//         public getLocalGainValue(): number {
//             return this.localGainValue;
//         }
//         public setFrequency(_audioSettings: AudioSettings, _frequency: number): void {
//             this.frequency = _frequency;
//             this.audioOscillator.frequency.setValueAtTime(this.frequency, _audioSettings.getAudioContext().currentTime);
//         }
//         public getFrequency(): number {
//             return this.frequency;
//         }
//         public createSnare(_audioSettings: AudioSettings): void {
//             this.setOscillatorType("triangle");
//             this.setFrequency(_audioSettings, 100);
//             this.setLocalGainValue(0);
//             this.localGain.gain.setValueAtTime(0, _audioSettings.getAudioContext().currentTime);
//             this.localGain.gain.exponentialRampToValueAtTime(0.01, _audioSettings.getAudioContext().currentTime + .1);
//             this.audioOscillator.connect(this.localGain);
//         }
//     }
// }
// / <reference path="../Time/Loop.ts"/>
// / <reference path="../Animation/Animation.ts"/>
var FudgeCore;
// / <reference path="../Time/Loop.ts"/>
// / <reference path="../Animation/Animation.ts"/>
(function (FudgeCore) {
    /**
     * Holds a reference to an {@link Animation} and controls it. Controls quantization and playmode as well as speed.
     * @authors Lukas Scheuerle, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2021 | Jonas Plotzky, HFU, 2022
     */
    class ComponentAnimator extends FudgeCore.Component {
        constructor(_animation, _playmode = FudgeCore.ANIMATION_PLAYMODE.LOOP, _quantization = FudgeCore.ANIMATION_QUANTIZATION.CONTINOUS) {
            super();
            this.scaleWithGameTime = true;
            this.animateInEditor = false;
            this.#scale = 1;
            this.#previous = 0;
            //#region updateAnimation
            /**
             * Updates the Animation.
             * Uses the built-in time unless a different time is specified.
             * May also be called from updateAnimation().
             */
            this.updateAnimationLoop = (_e, _time) => {
                if (this.animation.totalTime == 0)
                    return null;
                let time = _time || _time === 0 ? _time : this.#timeLocal.get();
                if (this.quantization == FudgeCore.ANIMATION_QUANTIZATION.FRAMES) {
                    time = this.#previous + (1000 / this.animation.fps);
                }
                let direction = this.animation.calculateDirection(time, this.playmode);
                time = this.animation.getModalTime(time, this.playmode, this.#timeLocal.getOffset());
                this.executeEvents(this.animation.getEventsToFire(this.#previous, time, this.quantization, direction));
                if (this.#previous != time) {
                    this.#previous = time;
                    time = time % this.animation.totalTime;
                    let mutator = this.animation.getState(time, direction, this.quantization);
                    if (this.node) {
                        this.node.applyAnimation(mutator);
                    }
                    return mutator;
                }
                return null;
            };
            /**
             * Updates the scale of the animation if the user changes it or if the global game timer changed its scale.
             */
            this.updateScale = () => {
                let newScale = this.#scale;
                if (this.scaleWithGameTime)
                    newScale *= FudgeCore.Time.game.getScale();
                this.#timeLocal.setScale(newScale);
            };
            this.playmode = _playmode;
            this.quantization = _quantization;
            this.animation = _animation;
            this.#timeLocal = new FudgeCore.Time();
            //TODO: update animation total time when loading a different animation?
            this.animation?.calculateTotalTime();
            this.addEventListener("componentRemove" /* COMPONENT_REMOVE */, () => this.activate(false));
            this.addEventListener("componentAdd" /* COMPONENT_ADD */, () => {
                this.node.addEventListener("childRemove" /* CHILD_REMOVE */, () => this.activate(false));
                this.activate(true);
            });
        }
        #scale;
        #timeLocal;
        #previous;
        set scale(_scale) {
            this.#scale = _scale;
            this.updateScale();
        }
        get scale() {
            return this.#scale;
        }
        /**
         * Returns the current sample time of the animation
         */
        get time() {
            return this.#timeLocal.get() % this.animation.totalTime;
        }
        activate(_on) {
            super.activate(_on);
            if (!this.node)
                return;
            this.activateListeners(_on);
        }
        /**
         * Jumps to a certain time in the animation to play from there.
         */
        jumpTo(_time) {
            this.#timeLocal.set(_time);
            this.#previous = _time;
            _time = _time % this.animation.totalTime;
            let mutator = this.animation.getState(_time, this.animation.calculateDirection(_time, this.playmode), this.quantization);
            this.node.applyAnimation(mutator);
        }
        /**
         * Jumps to a certain label in the animation if defined
         */
        jumpToLabel(_label) {
            let time = this.animation.labels[_label];
            if (time)
                this.jumpTo(time);
        }
        /**
         * Forces an update of the animation from outside. Used in the ViewAnimation. Shouldn't be used during the game.
         * @param _time the (unscaled) time to update the animation with.
         * @returns the Mutator for Animation.
         */
        updateAnimation(_time) {
            this.#previous = undefined;
            return this.updateAnimationLoop(null, _time);
        }
        //#region transfer
        serialize() {
            let serialization = {};
            serialization[super.constructor.name] = super.serialize();
            serialization.idAnimation = this.animation.idResource;
            serialization.playmode = this.playmode;
            serialization.quantization = this.quantization;
            serialization.scale = this.scale;
            serialization.scaleWithGameTime = this.scaleWithGameTime;
            serialization.animateInEditor = this.animateInEditor;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            this.animation = await FudgeCore.Project.getResource(_serialization.idAnimation);
            this.playmode = _serialization.playmode;
            this.quantization = _serialization.quantization;
            this.scale = _serialization.scale;
            this.scaleWithGameTime = _serialization.scaleWithGameTime;
            this.animateInEditor = _serialization.animateInEditor;
            return this;
        }
        async mutate(_mutator) {
            await super.mutate(_mutator);
            if (typeof (_mutator.animateInEditor) !== "undefined") {
                this.updateAnimation(0);
                this.activateListeners(this.active);
            }
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.playmode)
                types.playmode = FudgeCore.ANIMATION_PLAYMODE;
            if (types.quantization)
                types.quantization = FudgeCore.ANIMATION_QUANTIZATION;
            return types;
        }
        //#endregion
        activateListeners(_on) {
            if (_on && (FudgeCore.Project.mode != FudgeCore.MODE.EDITOR || FudgeCore.Project.mode == FudgeCore.MODE.EDITOR && this.animateInEditor)) {
                FudgeCore.Time.game.addEventListener("timeScaled" /* TIME_SCALED */, this.updateScale);
                this.node.addEventListener("renderPrepare" /* RENDER_PREPARE */, this.updateAnimationLoop);
            }
            else {
                FudgeCore.Time.game.removeEventListener("timeScaled" /* TIME_SCALED */, this.updateScale);
                this.node.removeEventListener("renderPrepare" /* RENDER_PREPARE */, this.updateAnimationLoop);
            }
        }
        /**
         * Fires all custom events the Animation should have fired between the last frame and the current frame.
         * @param events a list of names of custom events to fire
         */
        executeEvents(events) {
            for (let i = 0; i < events.length; i++) {
                this.dispatchEvent(new Event(events[i]));
            }
        }
    }
    ComponentAnimator.iSubclass = FudgeCore.Component.registerSubclass(ComponentAnimator);
    FudgeCore.ComponentAnimator = ComponentAnimator;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let AUDIO_PANNER;
    (function (AUDIO_PANNER) {
        AUDIO_PANNER["CONE_INNER_ANGLE"] = "coneInnerAngle";
        AUDIO_PANNER["CONE_OUTER_ANGLE"] = "coneOuterAngle";
        AUDIO_PANNER["CONE_OUTER_GAIN"] = "coneOuterGain";
        AUDIO_PANNER["DISTANCE_MODEL"] = "distanceModel";
        AUDIO_PANNER["MAX_DISTANCE"] = "maxDistance";
        AUDIO_PANNER["PANNING_MODEL"] = "panningModel";
        AUDIO_PANNER["REF_DISTANCE"] = "refDistance";
        AUDIO_PANNER["ROLLOFF_FACTOR"] = "rolloffFactor";
    })(AUDIO_PANNER = FudgeCore.AUDIO_PANNER || (FudgeCore.AUDIO_PANNER = {}));
    let AUDIO_NODE_TYPE;
    (function (AUDIO_NODE_TYPE) {
        AUDIO_NODE_TYPE[AUDIO_NODE_TYPE["SOURCE"] = 0] = "SOURCE";
        AUDIO_NODE_TYPE[AUDIO_NODE_TYPE["PANNER"] = 1] = "PANNER";
        AUDIO_NODE_TYPE[AUDIO_NODE_TYPE["GAIN"] = 2] = "GAIN";
    })(AUDIO_NODE_TYPE = FudgeCore.AUDIO_NODE_TYPE || (FudgeCore.AUDIO_NODE_TYPE = {}));
    /**
     * Builds a minimal audio graph (by default in {@link AudioManager}.default) and synchronizes it with the containing {@link Node}
     * ```plaintext
     * ‚îå AudioManager(.default) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     * ‚îÇ ‚îå ComponentAudio ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
     * ‚îÇ ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
     * ‚îÇ ‚îÇ    ‚îÇsource‚îÇ ‚Üí ‚îÇpanner‚îÇ ‚Üí ‚îÇ gain ‚îÇ ‚Üí ‚îÇ gain ‚îÇ ‚îÇ
     * ‚îÇ ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
     * ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
     * ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     * ```
     * @authors Thomas Dorner, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentAudio extends FudgeCore.Component {
        constructor(_audio = null, _loop = false, _start = false, _audioManager = FudgeCore.AudioManager.default) {
            super();
            /** places and directs the panner relative to the world transform of the {@link Node}  */
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            this.singleton = false;
            this.playing = false;
            this.listened = false;
            //#endregion
            this.hndAudioReady = (_event) => {
                FudgeCore.Debug.fudge("Audio start", Reflect.get(_event.target, "url"));
                if (this.playing)
                    this.play(true);
            };
            this.hndAudioEnded = (_event) => {
                // Debug.fudge("Audio ended", Reflect.get(_event.target, "url"));
                this.playing = false;
            };
            /**
             * Automatically connects/disconnects AudioNodes when adding/removing this component to/from a node.
             * Therefore unused AudioNodes may be garbage collected when an unused component is collected
             */
            this.handleAttach = (_event) => {
                // Debug.log(_event);
                if (_event.type == "componentAdd" /* COMPONENT_ADD */) {
                    this.node.addEventListener("childAppendToAudioGraph" /* CHILD_APPEND */, this.handleGraph, true);
                    this.node.addEventListener("childRemoveFromAudioGraph" /* CHILD_REMOVE */, this.handleGraph, true);
                    this.node.addEventListener("updateAudioGraph" /* UPDATE */, this.update, true);
                    this.listened = this.node.isDescendantOf(FudgeCore.AudioManager.default.getGraphListeningTo());
                }
                else {
                    this.node.removeEventListener("childAppendToAudioGraph" /* CHILD_APPEND */, this.handleGraph, true);
                    this.node.removeEventListener("childRemoveFromAudioGraph" /* CHILD_REMOVE */, this.handleGraph, true);
                    this.node.removeEventListener("updateAudioGraph" /* UPDATE */, this.update, true);
                    this.listened = false;
                }
                this.updateConnection();
            };
            /**
             * Automatically connects/disconnects AudioNodes when appending/removing the FUDGE-graph the component is in.
             */
            this.handleGraph = (_event) => {
                // Debug.log(_event);
                this.listened = (_event.type == "childAppendToAudioGraph" /* CHILD_APPEND */);
                this.updateConnection();
            };
            /**
             * Updates the panner node, its position and direction, using the worldmatrix of the container and the pivot of this component.
             */
            this.update = (_event) => {
                let mtxResult = this.mtxPivot;
                if (this.node)
                    mtxResult = FudgeCore.Matrix4x4.MULTIPLICATION(this.node.mtxWorld, this.mtxPivot);
                // Debug.log(mtxResult.toString());
                let position = mtxResult.translation;
                let forward = FudgeCore.Vector3.TRANSFORMATION(FudgeCore.Vector3.Z(1), mtxResult, false);
                this.panner.positionX.value = position.x;
                this.panner.positionY.value = position.y;
                this.panner.positionZ.value = position.z;
                this.panner.orientationX.value = forward.x;
                this.panner.orientationY.value = forward.y;
                this.panner.orientationZ.value = forward.z;
                FudgeCore.Recycler.store(forward);
                // TODO: examine why the following produces erroneous results, see test "Spatial Audio"
                if (this.node)
                    FudgeCore.Recycler.store(mtxResult);
            };
            this.install(_audioManager);
            this.createSource(_audio, _loop);
            this.addEventListener("componentAdd" /* COMPONENT_ADD */, this.handleAttach);
            this.addEventListener("componentRemove" /* COMPONENT_REMOVE */, this.handleAttach);
            if (_start)
                this.play(_start);
        }
        set volume(_value) {
            this.gain.gain.value = _value;
        }
        get volume() {
            return this.gain.gain.value;
        }
        set loop(_on) {
            this.source.loop = _on;
        }
        get loop() {
            return this.source.loop;
        }
        set playbackRate(_value) {
            this.source.playbackRate.value = _value;
        }
        get playbackRate() {
            return this.source.playbackRate.value;
        }
        get isPlaying() {
            return this.playing;
        }
        get isAttached() {
            return this.node != null;
        }
        get isListened() {
            return this.listened;
        }
        setAudio(_audio) {
            this.createSource(_audio, this.source.loop);
        }
        getAudio() {
            return this.audio;
        }
        /**
         * Set the property of the panner to the given value. Use to manipulate range and rolloff etc.
         */
        setPanner(_property, _value) {
            Reflect.set(this.panner, _property, _value);
        }
        // TODO: may be used for serialization of AudioNodes
        getMutatorOfNode(_type) {
            let node = this.getAudioNode(_type);
            let mutator = FudgeCore.getMutatorOfArbitrary(node);
            return mutator;
        }
        /**
         * Returns the specified AudioNode of the standard graph for further manipulation
         */
        getAudioNode(_type) {
            switch (_type) {
                case AUDIO_NODE_TYPE.SOURCE: return this.source;
                case AUDIO_NODE_TYPE.PANNER: return this.panner;
                case AUDIO_NODE_TYPE.GAIN: return this.gain;
            }
        }
        /**
         * Start or stop playing the audio
         */
        play(_on) {
            if (_on) {
                if (this.audio.isReady) {
                    this.createSource(this.audio, this.source.loop);
                    this.source.start(0, 0);
                }
                else {
                    this.audio.addEventListener("ready" /* READY */, this.hndAudioReady);
                }
                this.source.addEventListener("ended" /* ENDED */, this.hndAudioEnded);
            }
            else
                try {
                    this.source.stop();
                }
                catch (_error) { /* catch exception when source hasn't been started... */ }
            this.playing = _on;
        }
        /**
         * Inserts AudioNodes between the panner and the local gain of this {@link ComponentAudio}
         * _input and _output may be the same AudioNode, if there is only one to insert,
         * or may have multiple AudioNode between them to create an effect-graph.\
         * Note that {@link ComponentAudio} does not keep track of inserted AudioNodes!
         * ```plaintext
         * ‚îå AudioManager(.default) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         * ‚îÇ ‚îå ComponentAudio ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
         * ‚îÇ ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
         * ‚îÇ ‚îÇ    ‚îÇsource‚îÇ ‚Üí ‚îÇpanner‚îÇ ‚Üí ‚îÇ_input‚îÇ ‚Üí ...  ‚Üí ‚îÇ_output‚îÇ ‚Üí ‚îÇ gain ‚îÇ ‚Üí ‚îÇ gain ‚îÇ ‚îÇ
         * ‚îÇ ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
         * ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
         * ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         * ```
         */
        insertAudioNodes(_input, _output) {
            this.panner.disconnect(0);
            if (!_input && !_output) {
                this.panner.connect(this.gain);
                return;
            }
            this.panner.connect(_input);
            _output.connect(this.gain);
        }
        /**
         * Activate override. Connects or disconnects AudioNodes
         */
        activate(_on) {
            super.activate(_on);
            this.updateConnection();
        }
        /**
         * Connects this components gain-node to the gain node of the AudioManager this component runs on.
         * Only call this method if the component is not attached to a {@link Node} but needs to be heard.
         */
        connect(_on) {
            if (_on)
                this.gain.connect(this.audioManager.gain);
            else
                this.gain.disconnect(this.audioManager.gain);
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.idResource = this.audio.idResource;
            serialization.playing = this.playing;
            serialization.loop = this.loop;
            serialization.volume = this.volume;
            // console.log(this.getMutatorOfNode(AUDIO_NODE_TYPE.PANNER));
            // TODO: serialize panner parameters
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            let audio = await FudgeCore.Project.getResource(_serialization.idResource);
            this.createSource(audio, _serialization.loop);
            this.volume = _serialization.volume;
            this.play(_serialization.playing);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator(true);
            let audio = mutator.audio;
            delete mutator.audio; // just to rearrange in interfaces...
            mutator.loop = this.loop;
            mutator.volume = this.volume;
            mutator.audio = audio; //... so audio comes last
            return mutator;
        }
        // public async mutate(_mutator: Mutator): Promise<void> {
        //   await super.mutate(_mutator);
        //   // this.volume = _mutator.volume;
        //   // this.loop = _mutator.loop;
        // }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.listened;
        }
        install(_audioManager = FudgeCore.AudioManager.default) {
            let active = this.isActive;
            this.activate(false);
            this.audioManager = _audioManager;
            this.panner = _audioManager.createPanner();
            this.gain = _audioManager.createGain();
            this.panner.connect(this.gain);
            this.gain.connect(_audioManager.gain);
            this.activate(active);
        }
        createSource(_audio, _loop) {
            if (this.source) {
                this.source.disconnect();
                this.source.buffer = null;
            }
            this.source = this.audioManager.createBufferSource();
            this.source.connect(this.panner);
            if (_audio) {
                this.audio = _audio;
                this.source.buffer = _audio.buffer;
            }
            this.source.loop = _loop;
        }
        updateConnection() {
            try {
                this.connect(this.isActive && this.isAttached && this.listened);
            }
            catch (_error) {
                // nop
            }
        }
    }
    ComponentAudio.iSubclass = FudgeCore.Component.registerSubclass(ComponentAudio);
    FudgeCore.ComponentAudio = ComponentAudio;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Serves to set the spatial location and orientation of AudioListeners relative to the
     * world transform of the {@link Node} it is attached to.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentAudioListener extends FudgeCore.Component {
        constructor() {
            super(...arguments);
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
        }
        /**
         * Updates the position and orientation of the given AudioListener
         */
        update(_listener) {
            let mtxResult = this.mtxPivot;
            if (this.node)
                mtxResult = FudgeCore.Matrix4x4.MULTIPLICATION(this.node.mtxWorld, this.mtxPivot);
            // Debug.log(mtxResult.toString());
            let position = mtxResult.translation;
            let forward = FudgeCore.Vector3.TRANSFORMATION(FudgeCore.Vector3.Z(1), mtxResult, false);
            let up = FudgeCore.Vector3.TRANSFORMATION(FudgeCore.Vector3.Y(), mtxResult, false);
            if (_listener.positionX != undefined) {
                _listener.positionX.value = position.x;
                _listener.positionY.value = position.y;
                _listener.positionZ.value = position.z;
                _listener.forwardX.value = forward.x;
                _listener.forwardY.value = forward.y;
                _listener.forwardZ.value = forward.z;
                _listener.upX.value = up.x;
                _listener.upY.value = up.y;
                _listener.upZ.value = up.z;
            }
            else {
                // Firefox still uses deprecated methods. TODO: delete as soon as possible!
                _listener.setPosition(position.x, position.y, position.z);
                _listener.setOrientation(forward.x, forward.y, forward.z, up.x, up.y, up.z);
            }
            FudgeCore.Recycler.store(forward);
            FudgeCore.Recycler.store(up);
            if (this.node)
                FudgeCore.Recycler.store(mtxResult);
            // Debug.log(mtxResult.translation.toString(), forward.toString(), up.toString());
        }
    }
    ComponentAudioListener.iSubclass = FudgeCore.Component.registerSubclass(ComponentAudioListener);
    FudgeCore.ComponentAudioListener = ComponentAudioListener;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="Component.ts"/>
var FudgeCore;
// / <reference path="Component.ts"/>
(function (FudgeCore) {
    let FIELD_OF_VIEW;
    (function (FIELD_OF_VIEW) {
        FIELD_OF_VIEW["HORIZONTAL"] = "horizontal";
        FIELD_OF_VIEW["VERTICAL"] = "vertical";
        FIELD_OF_VIEW["DIAGONAL"] = "diagonal";
    })(FIELD_OF_VIEW = FudgeCore.FIELD_OF_VIEW || (FudgeCore.FIELD_OF_VIEW = {}));
    /**
     * Defines identifiers for the various projections a camera can provide.
     * TODO: change back to number enum if strings not needed
     */
    let PROJECTION;
    (function (PROJECTION) {
        PROJECTION["CENTRAL"] = "central";
        PROJECTION["ORTHOGRAPHIC"] = "orthographic";
        PROJECTION["DIMETRIC"] = "dimetric";
        PROJECTION["STEREO"] = "stereo";
    })(PROJECTION = FudgeCore.PROJECTION || (FudgeCore.PROJECTION = {}));
    /**
     * The camera component holds the projection-matrix and other data needed to render a scene from the perspective of the node it is attached to.
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentCamera extends FudgeCore.Component {
        constructor() {
            super(...arguments);
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            this.clrBackground = new FudgeCore.Color(0, 0, 0, 1); // The color of the background the camera will render.
            this.#mtxProjection = new FudgeCore.Matrix4x4; // The matrix to multiply each scene objects transformation by, to determine where it will be drawn.
            this.projection = PROJECTION.CENTRAL;
            this.fieldOfView = 45; // The camera's sensorangle.
            this.aspectRatio = 1.0;
            this.direction = FIELD_OF_VIEW.DIAGONAL;
            this.near = 1;
            this.far = 2000;
            this.backgroundEnabled = true; // Determines whether or not the background of this camera will be rendered.
            //#endregion
        }
        //private orthographic: boolean = false; // Determines whether the image will be rendered with perspective or orthographic projection.
        #mtxWorldToView;
        #mtxCameraInverse;
        #mtxProjection; // The matrix to multiply each scene objects transformation by, to determine where it will be drawn.
        // TODO: examine, if background should be an attribute of Camera or Viewport
        get mtxWorld() {
            let mtxCamera = this.mtxPivot.clone;
            try {
                mtxCamera = FudgeCore.Matrix4x4.MULTIPLICATION(this.node.mtxWorld, this.mtxPivot);
            }
            catch (_error) {
                // no container node or no world transformation found -> continue with pivot only
            }
            return mtxCamera;
        }
        /**
         * Returns the multiplication of the worldtransformation of the camera container, the pivot of this camera and the inversion of the projection matrix
         * yielding the worldspace to viewspace matrix
         */
        get mtxWorldToView() {
            if (this.#mtxWorldToView)
                return this.#mtxWorldToView;
            //TODO: optimize, no need to recalculate if neither mtxWorld nor pivot have changed
            this.#mtxWorldToView = FudgeCore.Matrix4x4.MULTIPLICATION(this.#mtxProjection, this.mtxCameraInverse);
            return this.#mtxWorldToView;
        }
        get mtxCameraInverse() {
            if (this.#mtxCameraInverse)
                return this.#mtxCameraInverse;
            //TODO: optimize, no need to recalculate if neither mtxWorld nor pivot have changed
            this.#mtxCameraInverse = FudgeCore.Matrix4x4.INVERSION(this.mtxWorld);
            return this.#mtxCameraInverse;
        }
        get mtxProjection() {
            if (this.#mtxProjection)
                return this.#mtxProjection;
            //TODO: optimize, no need to recalculate if neither mtxWorld nor pivot have changed
            this.#mtxProjection = new FudgeCore.Matrix4x4;
            return this.#mtxProjection;
        }
        resetWorldToView() {
            if (this.#mtxWorldToView)
                FudgeCore.Recycler.store(this.#mtxWorldToView);
            if (this.#mtxCameraInverse)
                FudgeCore.Recycler.store(this.#mtxCameraInverse);
            this.#mtxWorldToView = null;
            this.#mtxCameraInverse = null;
        }
        getProjection() {
            return this.projection;
        }
        getBackgroundEnabled() {
            return this.backgroundEnabled;
        }
        getAspect() {
            return this.aspectRatio;
        }
        getFieldOfView() {
            return this.fieldOfView;
        }
        getDirection() {
            return this.direction;
        }
        getNear() {
            return this.near;
        }
        getFar() {
            return this.far;
        }
        /**
         * Set the camera to perspective projection. The world origin is in the center of the canvaselement.
         * @param _aspect The aspect ratio between width and height of projectionspace.(Default = canvas.clientWidth / canvas.ClientHeight)
         * @param _fieldOfView The field of view in Degrees. (Default = 45)
         * @param _direction The plane on which the fieldOfView-Angle is given
         */
        projectCentral(_aspect = this.aspectRatio, _fieldOfView = this.fieldOfView, _direction = this.direction, _near = 1, _far = 2000) {
            this.aspectRatio = _aspect;
            this.fieldOfView = _fieldOfView;
            this.direction = _direction;
            this.projection = PROJECTION.CENTRAL;
            this.near = _near;
            this.far = _far;
            this.#mtxProjection = FudgeCore.Matrix4x4.PROJECTION_CENTRAL(_aspect, this.fieldOfView, _near, _far, this.direction); // TODO: remove magic numbers
        }
        /**
         * Set the camera to orthographic projection. Default values are derived the canvas client dimensions
         * @param _left The positionvalue of the projectionspace's left border.
         * @param _right The positionvalue of the projectionspace's right border.
         * @param _bottom The positionvalue of the projectionspace's bottom border.
         * @param _top The positionvalue of the projectionspace's top border.
         */
        projectOrthographic(_left = -FudgeCore.Render.getCanvas().clientWidth / 2, _right = FudgeCore.Render.getCanvas().clientWidth / 2, _bottom = FudgeCore.Render.getCanvas().clientHeight / 2, _top = -FudgeCore.Render.getCanvas().clientHeight / 2) {
            this.projection = PROJECTION.ORTHOGRAPHIC;
            this.#mtxProjection = FudgeCore.Matrix4x4.PROJECTION_ORTHOGRAPHIC(_left, _right, _bottom, _top, 400, -400); // TODO: examine magic numbers!
        }
        /**
         * Return the calculated dimension of a projection surface in the hypothetical distance of 1 to the camera
         */
        getProjectionRectangle() {
            let tanFov = Math.tan(Math.PI * this.fieldOfView / 360); // Half of the angle, to calculate dimension from the center -> right angle
            let tanHorizontal = 0;
            let tanVertical = 0;
            if (this.direction == FIELD_OF_VIEW.DIAGONAL) {
                let aspect = Math.sqrt(this.aspectRatio);
                tanHorizontal = tanFov * aspect;
                tanVertical = tanFov / aspect;
            }
            else if (this.direction == FIELD_OF_VIEW.VERTICAL) {
                tanVertical = tanFov;
                tanHorizontal = tanVertical * this.aspectRatio;
            }
            else { //FOV_DIRECTION.HORIZONTAL
                tanHorizontal = tanFov;
                tanVertical = tanHorizontal / this.aspectRatio;
            }
            return FudgeCore.Rectangle.GET(0, 0, tanHorizontal * 2, tanVertical * 2);
        }
        pointWorldToClip(_pointInWorldSpace) {
            let result;
            let m = this.mtxWorldToView.get();
            let w = m[3] * _pointInWorldSpace.x + m[7] * _pointInWorldSpace.y + m[11] * _pointInWorldSpace.z + m[15];
            result = FudgeCore.Vector3.TRANSFORMATION(_pointInWorldSpace, this.mtxWorldToView);
            result.scale(1 / w);
            return result;
        }
        pointClipToWorld(_pointInClipSpace) {
            let mtxViewToWorld = FudgeCore.Matrix4x4.INVERSION(this.mtxWorldToView);
            let m = mtxViewToWorld.get();
            let rayWorld = FudgeCore.Vector3.TRANSFORMATION(_pointInClipSpace, mtxViewToWorld, true);
            let w = m[3] * _pointInClipSpace.x + m[7] * _pointInClipSpace.y + m[11] * _pointInClipSpace.z + m[15];
            rayWorld.scale(1 / w);
            return rayWorld;
        }
        //#region Transfer
        serialize() {
            let serialization = {
                backgroundColor: this.clrBackground,
                backgroundEnabled: this.backgroundEnabled,
                projection: this.projection,
                fieldOfView: this.fieldOfView,
                direction: this.direction,
                aspect: this.aspectRatio,
                pivot: this.mtxPivot.serialize(),
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.clrBackground = _serialization.backgroundColor;
            this.backgroundEnabled = _serialization.backgroundEnabled;
            this.projection = _serialization.projection;
            this.fieldOfView = _serialization.fieldOfView;
            this.aspectRatio = _serialization.aspect;
            this.direction = _serialization.direction;
            await this.mtxPivot.deserialize(_serialization.pivot);
            await super.deserialize(_serialization[super.constructor.name]);
            switch (this.projection) {
                case PROJECTION.ORTHOGRAPHIC:
                    this.projectOrthographic(); // TODO: serialize and deserialize parameters
                    break;
                case PROJECTION.CENTRAL:
                    this.projectCentral();
                    break;
            }
            return this;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.direction)
                types.direction = FIELD_OF_VIEW;
            if (types.projection)
                types.projection = PROJECTION;
            return types;
        }
        async mutate(_mutator) {
            super.mutate(_mutator);
            switch (this.projection) {
                case PROJECTION.CENTRAL:
                    this.projectCentral(this.aspectRatio, this.fieldOfView, this.direction);
                    break;
            }
        }
        reduceMutator(_mutator) {
            delete _mutator.transform;
            super.reduceMutator(_mutator);
        }
    }
    ComponentCamera.iSubclass = FudgeCore.Component.registerSubclass(ComponentCamera);
    FudgeCore.ComponentCamera = ComponentCamera;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Makes the node face the camera when rendering, respecting restrictions for rotation around specific axis
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Component
     */
    class ComponentFaceCamera extends FudgeCore.Component {
        constructor() {
            super();
            this.upLocal = true;
            this.up = FudgeCore.Vector3.Y(1);
            this.restrict = false;
            this.singleton = true;
        }
    }
    ComponentFaceCamera.iSubclass = FudgeCore.Component.registerSubclass(ComponentFaceCamera);
    FudgeCore.ComponentFaceCamera = ComponentFaceCamera;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Filters synchronization between a graph instance and the graph it is connected to. If active, no synchronization occurs.
     * Maybe more finegrained in the future...
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Component
     */
    class ComponentGraphFilter extends FudgeCore.Component {
        constructor() {
            super();
            this.singleton = true;
        }
        serialize() {
            return this.getMutator();
        }
        async deserialize(_serialization) {
            this.mutate(_serialization);
            return this;
        }
    }
    ComponentGraphFilter.iSubclass = FudgeCore.Component.registerSubclass(ComponentGraphFilter);
    FudgeCore.ComponentGraphFilter = ComponentGraphFilter;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Baseclass for different kinds of lights.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Light extends FudgeCore.Mutable {
        constructor(_color = new FudgeCore.Color(1, 1, 1, 1)) {
            super();
            this.color = _color;
        }
        getType() {
            return this.constructor;
        }
        serialize() {
            let serialization = {
                color: this.color.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            await this.color.deserialize(_serialization.color);
            return this;
        }
        reduceMutator() { }
    }
    FudgeCore.Light = Light;
    /**
     * Ambient light, coming from all directions, illuminating everything with its color independent of position and orientation (like a foggy day or in the shades)
     * Attached to a node by {@link ComponentLight}, the pivot matrix is ignored.
     * ```plaintext
     * ~ ~ ~
     *  ~ ~ ~
     * ```
     */
    class LightAmbient extends Light {
    }
    FudgeCore.LightAmbient = LightAmbient;
    /**
     * Directional light, illuminating everything from a specified direction with its color (like standing in bright sunlight)
     * Attached to a node by {@link ComponentLight}, the pivot matrix specifies the direction of the light only.
     * ```plaintext
     * --->
     * --->
     * --->
     * ```
     */
    class LightDirectional extends Light {
    }
    FudgeCore.LightDirectional = LightDirectional;
    /**
     * Omnidirectional light emitting from its position, illuminating objects depending on their position and distance with its color (like a colored light bulb)
     * Attached to a node by {@link ComponentLight}, the pivot matrix specifies the position of the light, it's shape and rotation.
     * So with uneven scaling, other shapes than a perfect sphere, such as an oval or a disc, are possible, which creates a visible effect of the rotation too.
     * The intensity of the light drops linearly from 1 in the center to 0 at the perimeter of the shape.
     * ```plaintext
     *         .\|/.
     *        -- o --
     *         ¬¥/|\`
     * ```
     */
    class LightPoint extends Light {
    }
    FudgeCore.LightPoint = LightPoint;
    /**
     * Spot light emitting within a specified angle from its position, illuminating objects depending on their position and distance with its color
     * Attached to a node by {@link ComponentLight}, the pivot matrix specifies the position of the light, the direction and the size and angles of the cone.
     * The intensity of the light drops linearly from 1 in the center to 0 at the outer limits of the cone.
     * ```plaintext
     *          o
     *         /|\
     *        / | \
     * ```
     */
    class LightSpot extends Light {
    }
    FudgeCore.LightSpot = LightSpot;
})(FudgeCore || (FudgeCore = {}));
///<reference path="../Light/Light.ts"/>
var FudgeCore;
///<reference path="../Light/Light.ts"/>
(function (FudgeCore) {
    /**
     * Defines identifiers for the various types of light this component can provide.
     */
    // export let LIGHT_TYPE: { [type: string]: string } = {
    let LIGHT_TYPE;
    (function (LIGHT_TYPE) {
        LIGHT_TYPE["AMBIENT"] = "LightAmbient";
        LIGHT_TYPE["DIRECTIONAL"] = "LightDirectional";
        LIGHT_TYPE["POINT"] = "LightPoint";
        LIGHT_TYPE["SPOT"] = "LightSpot";
    })(LIGHT_TYPE = FudgeCore.LIGHT_TYPE || (FudgeCore.LIGHT_TYPE = {}));
    /**
      * Attaches a {@link Light} to the node
      * The pivot matrix has different effects depending on the type of the {@link Light}. See there for details.
      * @authors Jirka Dell'Oro-Friedl, HFU, 2019
      */
    class ComponentLight extends FudgeCore.Component {
        //TODO: since there is almost no functionality left in Light, eliminate it and put all in the component as with the camera...
        constructor(_light = new FudgeCore.LightAmbient()) {
            super();
            // private static constructors: { [type: string]: General } = { [LIGHT_TYPE.AMBIENT]: LightAmbient, [LIGHT_TYPE.DIRECTIONAL]: LightDirectional, [LIGHT_TYPE.POINT]: LightPoint, [LIGHT_TYPE.SPOT]: LightSpot };
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            this.light = null;
            this.singleton = false;
            this.light = _light;
        }
        setType(_class) {
            let mtrOld = {};
            if (this.light)
                mtrOld = this.light.getMutator();
            this.light = new _class();
            this.light.mutate(mtrOld);
        }
        serialize() {
            let serialization = {
                pivot: this.mtxPivot.serialize(),
                light: FudgeCore.Serializer.serialize(this.light)
            };
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            await this.mtxPivot.deserialize(_serialization.pivot);
            this.light = await FudgeCore.Serializer.deserialize(_serialization.light);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator(true);
            mutator.type = this.light.getType().name;
            return mutator;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.type)
                types.type = LIGHT_TYPE;
            return types;
        }
        async mutate(_mutator) {
            let type = _mutator.type;
            if (typeof (type) !== "undefined" && type != this.light.constructor.name)
                this.setType(FudgeCore.Serializer.getConstructor(type));
            delete (_mutator.type); // exclude light type from further mutation
            super.mutate(_mutator);
            _mutator.type = type; // reconstruct mutator
        }
    }
    ComponentLight.iSubclass = FudgeCore.Component.registerSubclass(ComponentLight);
    FudgeCore.ComponentLight = ComponentLight;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Attaches a {@link Material} to the node
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019 - 2021
     */
    class ComponentMaterial extends FudgeCore.Component {
        // public mutatorCoat: MutatorForComponent;
        constructor(_material = null) {
            super();
            this.clrPrimary = FudgeCore.Color.CSS("white");
            this.clrSecondary = FudgeCore.Color.CSS("white");
            this.mtxPivot = FudgeCore.Matrix3x3.IDENTITY();
            /** support sorting of objects with transparency when rendering, render objects in the back first. Should be enabled when {@link ComponentParticleSystem.prototype.depthMask} is disabled */
            this.sortForAlpha = false;
            this.material = _material;
            // this.mutatorCoat = _material.getCoat().getMutatorForComponent();
        }
        //#region Transfer
        serialize() {
            let serialization = {
                sortForAlpha: this.sortForAlpha,
                clrPrimary: this.clrPrimary.serialize(),
                clrSecondary: this.clrSecondary.serialize(),
                pivot: this.mtxPivot.serialize(),
                [super.constructor.name]: super.serialize(),
                idMaterial: this.material.idResource
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.material = await FudgeCore.Project.getResource(_serialization.idMaterial);
            await this.clrPrimary.deserialize(_serialization.clrPrimary);
            await this.clrSecondary.deserialize(_serialization.clrSecondary);
            this.sortForAlpha = _serialization.sortForAlpha;
            await this.mtxPivot.deserialize(_serialization.pivot);
            await super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
    }
    ComponentMaterial.iSubclass = FudgeCore.Component.registerSubclass(ComponentMaterial);
    FudgeCore.ComponentMaterial = ComponentMaterial;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Attaches a {@link Mesh} to the node
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentMesh extends FudgeCore.Component {
        constructor(_mesh, _skeleton) {
            super();
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            this.mtxWorld = FudgeCore.Matrix4x4.IDENTITY();
            this.mesh = _mesh;
            this.skeleton = _skeleton;
        }
        get radius() {
            let scaling = this.mtxWorld.scaling;
            let scale = Math.max(Math.abs(scaling.x), Math.abs(scaling.y), Math.abs(scaling.z));
            return this.mesh.radius * scale;
        }
        // /**
        //  * Calculates the position of a vertex transformed by the skeleton
        //  * @param _index index of the vertex
        //  */
        // public getVertexPosition(_index: number): Vector3 {
        //   // extract the vertex data (vertices: 3D vectors, bone indices & weights: 4D vectors)
        //   const iVertex: number = _index * 3;
        //   const iBoneInfluence: number = _index * 4;
        //   const vertex: Vector3 = new Vector3(...Reflect.get(this.mesh, "renderMesh").vertices.slice(iVertex, iVertex + 3));
        //   if (!(this.mesh instanceof MeshSkin)) return vertex;
        //   const iBones: Uint8Array = this.mesh.iBones.slice(iBoneInfluence, iBoneInfluence + 4);
        //   const weights: Float32Array = this.mesh.weights.slice(iBoneInfluence, iBoneInfluence + 4);
        //   // get bone matrices
        //   const mtxBones: Array<Matrix4x4> = this.skeleton.mtxBones;
        //   // skin matrix S = sum_i=1^m{w_i * B_i}
        //   const skinMatrix: Matrix4x4 = new Matrix4x4();
        //   skinMatrix.set(Array
        //     .from(iBones)
        //     .map((iBone, iWeight) => mtxBones[iBone].get().map(value => value * weights[iWeight])) // apply weight on each matrix
        //     .reduce((mtxSum, mtxBone) => mtxSum.map((value, index) => value + mtxBone[index])) // sum up the matrices
        //   );
        //   // transform vertex
        //   vertex.transform(skinMatrix);
        //   return vertex;
        // }
        // TODO: remove or think if the transformed bounding box is of value or can be made to be
        // public get boundingBox(): Box {
        //   let box: Box = Recycler.get(Box);
        //   box.set(
        //     Vector3.TRANSFORMATION(this.mesh.boundingBox.min, this.mtxWorld, true),
        //     Vector3.TRANSFORMATION(this.mesh.boundingBox.max, this.mtxWorld, true)
        //   );
        //   return box;
        // }
        //#region Transfer
        serialize() {
            let serialization;
            /* at this point of time, serialization as resource and as inline object is possible. TODO: check if inline becomes obsolete */
            let idMesh = this.mesh.idResource;
            if (idMesh)
                serialization = { idMesh: idMesh };
            else
                serialization = { mesh: FudgeCore.Serializer.serialize(this.mesh) };
            if (this.skeleton)
                serialization.skeleton = this.skeleton.idSource;
            serialization.pivot = this.mtxPivot.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            let mesh;
            if (_serialization.idMesh)
                mesh = await FudgeCore.Project.getResource(_serialization.idMesh);
            else
                mesh = await FudgeCore.Serializer.deserialize(_serialization.mesh);
            this.mesh = mesh;
            if (_serialization.skeleton)
                this.addEventListener("componentAdd" /* COMPONENT_ADD */, (_event) => {
                    if (_event.target != this)
                        return;
                    const trySetSkeleton = () => {
                        // find root node
                        let root = this.node;
                        while (root.getParent()) {
                            root = root.getParent();
                        }
                        for (const node of root) {
                            if (node instanceof FudgeCore.SkeletonInstance && node.idSource == _serialization.skeleton)
                                this.skeleton = node;
                        }
                        if (!this.skeleton) {
                            const trySetSkeletonOnChildAppend = _event => {
                                root.removeEventListener("childAppend" /* CHILD_APPEND */, trySetSkeletonOnChildAppend);
                                if (_event.target instanceof FudgeCore.SkeletonInstance && _event.target.idSource == _serialization.skeleton)
                                    this.skeleton = _event.target;
                                else {
                                    trySetSkeleton();
                                }
                            };
                            root.addEventListener("childAppend" /* CHILD_APPEND */, trySetSkeletonOnChildAppend);
                        }
                    };
                    trySetSkeleton();
                });
            await this.mtxPivot.deserialize(_serialization.pivot);
            await super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        getMutatorForUserInterface() {
            let mutator = this.getMutator();
            // if (!this.mesh)
            //   mutator.mesh = Mesh;
            return mutator;
        }
    }
    ComponentMesh.iSubclass = FudgeCore.Component.registerSubclass(ComponentMesh);
    FudgeCore.ComponentMesh = ComponentMesh;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    var ComponentParticleSystem_1;
    let PARTICLE_SYSTEM_PLAYMODE;
    (function (PARTICLE_SYSTEM_PLAYMODE) {
        /**Plays particle system in a loop: it restarts once it hit the end.*/
        PARTICLE_SYSTEM_PLAYMODE[PARTICLE_SYSTEM_PLAYMODE["LOOP"] = 0] = "LOOP";
        /**Plays particle system once and stops at the last point in time.*/
        PARTICLE_SYSTEM_PLAYMODE[PARTICLE_SYSTEM_PLAYMODE["PLAY_ONCE"] = 1] = "PLAY_ONCE";
    })(PARTICLE_SYSTEM_PLAYMODE = FudgeCore.PARTICLE_SYSTEM_PLAYMODE || (FudgeCore.PARTICLE_SYSTEM_PLAYMODE = {}));
    /**
     * Attaches a {@link ParticleSystem} to the node.
     * Works in conjunction with {@link ComponentMesh} and {@link ComponentMaterial} to create a shader particle system.
     * Additionally a {@link ComponentFaceCamera} can be attached to make the particles face the camera.
     * @author Jonas Plotzky, HFU, 2022
     */
    let ComponentParticleSystem = ComponentParticleSystem_1 = class ComponentParticleSystem extends FudgeCore.Component {
        constructor(_particleSystem = null) {
            super();
            this.#timeScale = 1;
            //#endregion
            this.hndEvent = (_event) => {
                switch (_event.type) {
                    case "nodeDeserialized" /* NODE_DESERIALIZED */:
                    case "componentAdd" /* COMPONENT_ADD */:
                        FudgeCore.Time.game.addEventListener("timeScaled" /* TIME_SCALED */, this.updateTimeScale);
                        this.node.addEventListener("renderPrepare" /* RENDER_PREPARE */, this.update);
                        break;
                    case "componentRemove" /* COMPONENT_REMOVE */:
                        FudgeCore.Time.game.removeEventListener("timeScaled" /* TIME_SCALED */, this.updateTimeScale);
                        this.node.removeEventListener("renderPrepare" /* RENDER_PREPARE */, this.update);
                }
            };
            this.update = () => {
                if (this.time > this.duration)
                    switch (this.playMode) {
                        default:
                        case PARTICLE_SYSTEM_PLAYMODE.LOOP:
                            this.time = 0;
                            break;
                        case PARTICLE_SYSTEM_PLAYMODE.PLAY_ONCE:
                            this.time = this.duration;
                            this.timeScale = 0;
                            break;
                    }
            };
            this.updateTimeScale = () => {
                let timeScale = this.#timeScale * FudgeCore.Time.game.getScale();
                this.#time.setScale(timeScale);
            };
            this.particleSystem = _particleSystem;
            this.depthMask = true;
            this.blendMode = FudgeCore.BLEND.ADDITIVE;
            this.playMode = PARTICLE_SYSTEM_PLAYMODE.LOOP;
            this.duration = 1000;
            this.size = 10;
            this.#time = new FudgeCore.Time();
            this.addEventListener("componentAdd" /* COMPONENT_ADD */, this.hndEvent);
            this.addEventListener("componentRemove" /* COMPONENT_REMOVE */, this.hndEvent);
            this.addEventListener("nodeDeserialized" /* NODE_DESERIALIZED */, this.hndEvent);
        }
        /** The number of particles */
        #size;
        #timeScale;
        #time;
        /**
         * Get the number of particles
         */
        get size() {
            return this.#size;
        }
        /**
         * Set the number of particles. Caution: Setting this will reinitialize the random numbers array(texture) used in the shader.
         */
        set size(_size) {
            this.#size = _size;
            this.deleteRenderData();
        }
        get time() {
            return this.#time.get();
        }
        set time(_time) {
            this.#time.set(_time);
        }
        get timeScale() {
            return this.#timeScale;
        }
        set timeScale(_scale) {
            this.#timeScale = _scale;
            this.updateTimeScale();
        }
        useRenderData() { }
        deleteRenderData() { }
        //#region transfer
        serialize() {
            let serialization = {
                [super.constructor.name]: super.serialize(),
                idParticleSystem: this.particleSystem?.idResource,
                depthMask: this.depthMask,
                blendMode: this.blendMode,
                playMode: this.playMode,
                duration: this.duration,
                size: this.size
            };
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            if (_serialization.idParticleSystem)
                this.particleSystem = await FudgeCore.Project.getResource(_serialization.idParticleSystem);
            this.depthMask = _serialization.depthMask;
            this.blendMode = _serialization.blendMode;
            this.playMode = _serialization.playMode;
            this.duration = _serialization.duration;
            this.size = _serialization.size;
            return this;
        }
        getMutator(_extendable) {
            let mutator = super.getMutator(true);
            mutator.size = this.size;
            return mutator;
        }
        getMutatorForUserInterface() {
            let mutator = this.getMutator(true);
            delete mutator.particleSystem;
            mutator.particleSystem = this.particleSystem?.getMutatorForUserInterface();
            return mutator;
        }
        getMutatorForAnimation() {
            let mutator = this.getMutator();
            delete mutator.particleSystem;
            delete mutator.size;
            return mutator;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.blendMode)
                types.blendMode = FudgeCore.BLEND;
            if (types.playMode)
                types.playMode = PARTICLE_SYSTEM_PLAYMODE;
            return types;
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.randomNumbersRenderData;
            delete _mutator.time;
        }
    };
    ComponentParticleSystem.iSubclass = FudgeCore.Component.registerSubclass(ComponentParticleSystem_1);
    ComponentParticleSystem = ComponentParticleSystem_1 = __decorate([
        FudgeCore.RenderInjectorComponentParticleSystem.decorate
    ], ComponentParticleSystem);
    FudgeCore.ComponentParticleSystem = ComponentParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let PICK;
    (function (PICK) {
        PICK["RADIUS"] = "radius";
        PICK["CAMERA"] = "camera";
        PICK["PHYSICS"] = "physics";
    })(PICK = FudgeCore.PICK || (FudgeCore.PICK = {}));
    /**
     * Attaches picking functionality to the node
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class ComponentPick extends FudgeCore.Component {
        constructor() {
            super(...arguments);
            this.pick = PICK.RADIUS;
        }
        pickAndDispatch(_ray, _event) {
            let cmpMesh = this.node.getComponent(FudgeCore.ComponentMesh);
            let position = cmpMesh ? cmpMesh.mtxWorld.translation : this.node.mtxWorld.translation;
            switch (this.pick) {
                case PICK.RADIUS:
                    // TODO: should only be node.radius. Adjustment needed, if mesh was transformed...
                    if (_ray.getDistance(position).magnitude < this.node.radius) {
                        this.node.dispatchEvent(_event);
                    }
                    break;
                case PICK.PHYSICS:
                    let hitInfo = FudgeCore.Physics.raycast(_ray.origin, _ray.direction, FudgeCore.Vector3.DIFFERENCE(position, _ray.origin).magnitudeSquared);
                    if (hitInfo.hit)
                        this.node.dispatchEvent(_event);
                    break;
                //TODO: PICK.CAMERA
            }
        }
        serialize() {
            return this.getMutator();
        }
        async deserialize(_serialization) {
            this.mutate(_serialization);
            return this;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.pick)
                types.pick = PICK;
            return types;
        }
    }
    ComponentPick.iSubclass = FudgeCore.Component.registerSubclass(ComponentPick);
    FudgeCore.ComponentPick = ComponentPick;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Base class for scripts the user writes
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Component
     */
    class ComponentScript extends FudgeCore.Component {
        constructor() {
            super();
            this.singleton = false;
        }
        serialize() {
            return this.getMutator();
        }
        async deserialize(_serialization) {
            this.mutate(_serialization);
            return this;
        }
    }
    // registering this doesn't make sense, only its subclasses. Or this component must refer to scripts to be attached to this component
    // TODO: rethink & refactor
    ComponentScript.iSubclass = FudgeCore.Component.registerSubclass(ComponentScript);
    FudgeCore.ComponentScript = ComponentScript;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let BASE;
    (function (BASE) {
        BASE[BASE["SELF"] = 0] = "SELF";
        BASE[BASE["PARENT"] = 1] = "PARENT";
        BASE[BASE["WORLD"] = 2] = "WORLD";
        BASE[BASE["NODE"] = 3] = "NODE";
    })(BASE = FudgeCore.BASE || (FudgeCore.BASE = {}));
    /**
     * Attaches a transform-{@link Matrix4x4} to the node, moving, scaling and rotating it in space relative to its parent.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class ComponentTransform extends FudgeCore.Component {
        constructor(_mtxInit = FudgeCore.Matrix4x4.IDENTITY()) {
            super();
            this.mtxLocal = _mtxInit;
        }
        //#region Transformations respecting the hierarchy
        /**
         * recalculates this local matrix to yield the identical world matrix based on the given node.
         * Use rebase before appending the container of this component to another node while preserving its transformation in the world.
         */
        rebase(_node = null) {
            let mtxResult = this.mtxLocal;
            let container = this.node;
            if (container)
                mtxResult = container.mtxWorld;
            if (_node)
                mtxResult = FudgeCore.Matrix4x4.RELATIVE(mtxResult, null, _node.mtxWorldInverse);
            this.mtxLocal = mtxResult;
        }
        /**
         * Applies the given transformation relative to the selected base (SELF, PARENT, WORLD) or a particular other node (NODE)
         */
        transform(_mtxTransform, _base = BASE.SELF, _node = null) {
            switch (_base) {
                case BASE.SELF:
                    this.mtxLocal.multiply(_mtxTransform);
                    break;
                case BASE.PARENT:
                    this.mtxLocal.multiply(_mtxTransform, true);
                    break;
                case BASE.NODE:
                    if (!_node)
                        throw new Error("BASE.NODE requires a node given as base");
                case BASE.WORLD:
                    this.rebase(_node);
                    this.mtxLocal.multiply(_mtxTransform, true);
                    let node = this.node;
                    if (node) {
                        let mtxTemp;
                        if (_base == BASE.NODE) {
                            // fix mtxWorld of container for subsequent rebasing 
                            mtxTemp = FudgeCore.Matrix4x4.MULTIPLICATION(_node.mtxWorld, node.mtxLocal);
                            node.mtxWorld.set(mtxTemp);
                            FudgeCore.Recycler.store(mtxTemp);
                        }
                        let parent = node.getParent();
                        if (parent) {
                            // fix mtxLocal for current parent
                            this.rebase(node.getParent());
                            mtxTemp = FudgeCore.Matrix4x4.MULTIPLICATION(node.getParent().mtxWorld, node.mtxLocal);
                            node.mtxWorld.set(mtxTemp);
                            FudgeCore.Recycler.store(mtxTemp);
                        }
                    }
                    break;
            }
        }
        //#endregion
        //#region Transfer
        serialize() {
            let serialization = {
                local: this.mtxLocal.serialize(),
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            await this.mtxLocal.deserialize(_serialization.local);
            return this;
        }
        // public mutate(_mutator: Mutator): void {
        //     this.local.mutate(_mutator);
        // }
        // public getMutator(): Mutator { 
        //     return this.local.getMutator();
        // }
        // public getMutatorAttributeTypes(_mutator: Mutator): MutatorAttributeTypes {
        //     let types: MutatorAttributeTypes = this.local.getMutatorAttributeTypes(_mutator);
        //     return types;
        // }
        reduceMutator(_mutator) {
            delete _mutator.world;
            super.reduceMutator(_mutator);
        }
    }
    ComponentTransform.iSubclass = FudgeCore.Component.registerSubclass(ComponentTransform);
    FudgeCore.ComponentTransform = ComponentTransform;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Describes a VR Controller and its capabilities.
     */
    class VRController {
        constructor() {
            this.cmpTransform = null;
            this.gamePad = null;
            this.thumbstickX = null;
            this.thumbstickY = null;
        }
    }
    FudgeCore.VRController = VRController;
    /**
     * VR Component Class, for Session Management, Controller Management and Reference Space Management.
     * @author Valentin Schmidberger, HFU, 2022
     */
    class ComponentVRDevice extends FudgeCore.ComponentCamera {
        constructor() {
            super();
            this.rightCntrl = new VRController();
            this.leftCntrl = new VRController();
            this.addEventListener("componentAdd" /* COMPONENT_ADD */, this.getMtxLocalFromCmpTransform);
        }
        #mtxLocal;
        /**
         * Returns the actual matrix of the vr - device.
         * Creators should use this for readonly purposes.
         */
        get mtxLocal() {
            return this.#mtxLocal;
        }
        /**
         * Sets a Vector3 as Position of the reference space.
         */
        set translation(_newPos) {
            let invTranslation = FudgeCore.Vector3.SCALE(FudgeCore.Vector3.DIFFERENCE(_newPos, this.#mtxLocal.translation), -1);
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(invTranslation));
            this.#mtxLocal.translation = _newPos;
        }
        /**
         * Sets Vector3 Rotation of the reference space.
         * Rotation needs to be set in the Origin (0,0,0), otherwise the XR-Rig gets rotated around the origin.
         */
        set rotation(_newRot) {
            let newRot = FudgeCore.Vector3.SCALE(FudgeCore.Vector3.SCALE(FudgeCore.Vector3.SUM(_newRot, this.#mtxLocal.rotation), -1), Math.PI / 180);
            let orientation = new FudgeCore.Quaternion();
            orientation.eulerAngles = newRot;
            //set xr - rig back to origin
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.DIFFERENCE(this.#mtxLocal.translation, FudgeCore.Vector3.ZERO())));
            //rotate xr rig in origin
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.ZERO(), orientation));
            //set xr - rig back to last position 
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.DIFFERENCE(FudgeCore.Vector3.ZERO(), this.#mtxLocal.translation)));
            this.#mtxLocal.rotation = FudgeCore.Vector3.SCALE(_newRot, -1);
        }
        /**
         * Adds a Vector3 in Position of the reference space.
         */
        translate(_by) {
            let invTranslation = FudgeCore.Vector3.SCALE(_by, -1);
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(invTranslation));
            this.#mtxLocal.translate(_by);
        }
        /**
         * Adds a Vector3 in Rotation of the reference space.
         * Rotation needs to be added in the Origin (0,0,0), otherwise the XR-Rig gets rotated around the origin.
         */
        rotate(_by) {
            let rotAmount = FudgeCore.Vector3.SCALE(FudgeCore.Vector3.SCALE(_by, -1), Math.PI / 180);
            let orientation = new FudgeCore.Quaternion();
            orientation.eulerAngles = rotAmount;
            //set xr - rig back to origin
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.DIFFERENCE(this.#mtxLocal.translation, FudgeCore.Vector3.ZERO())));
            //rotate xr rig in origin
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.ZERO(), orientation));
            //set xr - rig back to last position 
            FudgeCore.XRViewport.default.referenceSpace = FudgeCore.XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(FudgeCore.Vector3.DIFFERENCE(FudgeCore.Vector3.ZERO(), this.#mtxLocal.translation)));
            this.#mtxLocal.rotate(FudgeCore.Vector3.SCALE(_by, -1));
        }
        getMtxLocalFromCmpTransform() {
            this.#mtxLocal = this.node.getComponent(FudgeCore.ComponentTransform).mtxLocal;
        }
    }
    ComponentVRDevice.iSubclass = FudgeCore.Component.registerSubclass(ComponentVRDevice);
    FudgeCore.ComponentVRDevice = ComponentVRDevice;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Processes input signals of type number and generates an output signal of the same type using
     * proportional, integral or differential mapping, an amplification factor and a linear dampening/delay
     * ```plaintext
     *          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     *          ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      pass through (Proportional)      ‚îÇ
     *  Input ‚Üí ‚îÇ ‚Üí ‚îÇamplify‚îÇ ‚Üí ‚îÇdelay‚îÇ ‚Üí ‚öü sum up over time (Integral) ‚öû ‚Üí ‚îÇ ‚Üí Output
     *          ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      pass change  (Differential)      ‚îÇ
     *          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     * ```
     */
    class Control extends EventTarget {
        constructor(_name, _factor = 1, _type = 0 /* PROPORTIONAL */, _delay = 0) {
            super();
            this.rateDispatchOutput = 0;
            this.valuePrevious = 0;
            this.outputBase = 0;
            this.outputTarget = 0;
            this.outputPrevious = 0;
            this.outputTargetPrevious = 0;
            this.factor = 0;
            this.time = FudgeCore.Time.game;
            this.timeValueDelay = 0;
            this.timeOutputTargetSet = 0;
            this.idTimer = undefined;
            this.dispatchOutput = (_eventOrValue) => {
                if (!this.active)
                    return;
                let timer = this.time.getTimer(this.idTimer);
                let output;
                if (typeof (_eventOrValue) == "number")
                    output = _eventOrValue;
                else
                    output = this.calculateOutput();
                let outputChanged = (output != this.outputPrevious);
                if (timer) {
                    timer.active = outputChanged;
                    if (!outputChanged)
                        return;
                }
                this.outputPrevious = output;
                let event = new CustomEvent("output" /* OUTPUT */, {
                    detail: {
                        output: output
                    }
                });
                this.dispatchEvent(event);
            };
            this.factor = _factor;
            this.type = _type;
            this.active = true;
            this.name = _name;
            this.setDelay(_delay);
        }
        /**
         * Set the time-object to be used when calculating the output in {@link CONTROL_TYPE.INTEGRAL}
         */
        setTimebase(_time) {
            this.time = _time;
            this.calculateOutput();
        }
        /**
         * Feed an input value into this control and fire the events {@link EVENT_CONTROL.INPUT} and {@link EVENT_CONTROL.OUTPUT}
         */
        setInput(_input) {
            if (!this.active)
                return;
            this.outputBase = this.calculateOutput();
            this.valuePrevious = this.getValueDelayed();
            this.outputTarget = this.factor * _input;
            this.timeOutputTargetSet = this.time.get();
            if (this.type == 2 /* DIFFERENTIAL */) {
                this.valuePrevious = this.outputTarget - this.outputTargetPrevious;
                this.outputTargetPrevious = this.outputTarget;
                this.outputTarget = 0;
            }
            this.dispatchEvent(new Event("input" /* INPUT */));
            if (this.type == 2 /* DIFFERENTIAL */)
                this.dispatchOutput(this.valuePrevious);
            else
                this.dispatchOutput(null);
        }
        pulse(_input) {
            this.setInput(_input);
            this.setInput(0);
        }
        /**
         * Set the time to take for the internal linear dampening until the final ouput value is reached
         */
        setDelay(_time) {
            this.timeValueDelay = Math.max(0, _time);
        }
        /**
         * Set the number of output-events to dispatch per second.
         * At the default of 0, the control output must be polled and will only actively dispatched once each time input occurs and the output changes.
         */
        setRateDispatchOutput(_rateDispatchOutput = 0) {
            this.rateDispatchOutput = _rateDispatchOutput;
            this.time.deleteTimer(this.idTimer);
            this.idTimer = undefined;
            if (this.rateDispatchOutput)
                this.idTimer = this.time.setTimer(1000 / this.rateDispatchOutput, 0, this.dispatchOutput);
        }
        /**
         * Set the factor to multiply the input value given with {@link setInput} with
         */
        setFactor(_factor) {
            this.factor = _factor;
        }
        /**
         * Get the value from the output of this control
         */
        getOutput() {
            return this.calculateOutput();
        }
        /**
         * Calculates the output of this control
         */
        calculateOutput() {
            let output = 0;
            let value = this.getValueDelayed();
            switch (this.type) {
                case 1 /* INTEGRAL */:
                    let timeCurrent = this.time.get();
                    let timeElapsedSinceInput = timeCurrent - this.timeOutputTargetSet;
                    output = this.outputBase;
                    if (this.timeValueDelay > 0) {
                        if (timeElapsedSinceInput < this.timeValueDelay) {
                            output += 0.5 * (this.valuePrevious + value) * timeElapsedSinceInput;
                            break;
                        }
                        else {
                            output += 0.5 * (this.valuePrevious + value) * this.timeValueDelay;
                            timeElapsedSinceInput -= this.timeValueDelay;
                        }
                    }
                    output += value * timeElapsedSinceInput;
                    // value += 0.5 * (this.inputPrevious - input) * this.timeInputDelay + input * timeElapsedSinceInput;
                    break;
                case 2 /* DIFFERENTIAL */:
                case 0 /* PROPORTIONAL */:
                default:
                    output = value;
                    break;
            }
            return output;
        }
        /**
         * calculates the output considering the time of the delay
         */
        getValueDelayed() {
            if (this.timeValueDelay > 0) {
                let timeElapsedSinceInput = this.time.get() - this.timeOutputTargetSet;
                if (timeElapsedSinceInput < this.timeValueDelay)
                    return this.valuePrevious + (this.outputTarget - this.valuePrevious) * timeElapsedSinceInput / this.timeValueDelay;
            }
            return this.outputTarget;
        }
    }
    FudgeCore.Control = Control;
})(FudgeCore || (FudgeCore = {}));
///<reference path="Control.ts"/>
var FudgeCore;
///<reference path="Control.ts"/>
(function (FudgeCore) {
    /**
     * Handles multiple controls as inputs and creates an output from that.
     * As a subclass of {@link Control}, axis calculates the ouput summing up the inputs and processing the result using its own settings.
     * Dispatches {@link EVENT_CONTROL.OUTPUT} and {@link EVENT_CONTROL.INPUT} when one of the controls dispatches them.
     * ```plaintext
     *           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     *           ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                 ‚îÇ
     *   Input ‚Üí ‚îÇ ‚îÇcontrol‚îÇ\                                ‚îÇ
     *           ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò \                               ‚îÇ
     *           ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  \‚îå‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
     *   Input ‚Üí ‚îÇ ‚îÇcontrol‚îÇ---‚îÇsum‚îÇ ‚Üí ‚îÇinternal control ‚îÇ ‚Üí ‚îÇ ‚Üí Output
     *           ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  /‚îî‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
     *           ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê /                               ‚îÇ
     *   Input ‚Üí ‚îÇ ‚îÇcontrol‚îÇ/                                ‚îÇ
     *           ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                 ‚îÇ
     *           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     * ```
     */
    class Axis extends FudgeCore.Control {
        constructor() {
            super(...arguments);
            this.controls = new Map();
            this.sumPrevious = 0;
            this.hndOutputEvent = (_event) => {
                if (!this.active)
                    return;
                let control = _event.target;
                let event = new CustomEvent("output" /* OUTPUT */, { detail: {
                        control: control,
                        input: _event.detail.output,
                        output: this.getOutput()
                    } });
                this.dispatchEvent(event);
            };
            this.hndInputEvent = (_event) => {
                if (!this.active)
                    return;
                let event = new Event("input" /* INPUT */, _event);
                this.dispatchEvent(event);
            };
        }
        /**
         * Add the control given to the list of controls feeding into this axis
         */
        addControl(_control) {
            this.controls.set(_control.name, _control);
            _control.addEventListener("input" /* INPUT */, this.hndInputEvent);
            _control.addEventListener("output" /* OUTPUT */, this.hndOutputEvent);
        }
        /**
         * Returns the control with the given name
         */
        getControl(_name) {
            return this.controls.get(_name);
        }
        /**
         * Removes the control with the given name
         */
        removeControl(_name) {
            let control = this.getControl(_name);
            if (control) {
                control.removeEventListener("input" /* INPUT */, this.hndInputEvent);
                control.removeEventListener("output" /* OUTPUT */, this.hndOutputEvent);
                this.controls.delete(_name);
            }
        }
        /**
         * Returns the value of this axis after summing up all inputs and processing the sum according to the axis' settings
         */
        getOutput() {
            let sumInput = 0;
            for (let control of this.controls) {
                if (control[1].active)
                    sumInput += control[1].getOutput();
            }
            if (sumInput != this.sumPrevious)
                super.setInput(sumInput);
            this.sumPrevious = sumInput;
            return super.getOutput();
        }
    }
    FudgeCore.Axis = Axis;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Collects the keys pressed on the keyboard and stores their status.
     */
    class Keyboard {
        // private static code_en: Object;
        /**
         * Returns true if one of the given keys is is currently being pressed.
         */
        static isPressedOne(_keys) {
            for (let code of _keys) {
                if (Keyboard.keysPressed[code])
                    return true;
            }
            return false;
        }
        /**
         * Returns true if all of the given keys are currently being pressed
         */
        static isPressedCombo(_keys) {
            for (let code of _keys) {
                if (!Keyboard.keysPressed[code])
                    return false;
            }
            return true;
        }
        /**
         * Returns the value given as _active if one or, when _combo is true, all of the given keys are pressed.
         * Returns the value given as _inactive if not.
         */
        static mapToValue(_active, _inactive, _keys, _combo = false) {
            if (!_combo && Keyboard.isPressedOne(_keys))
                return _active;
            if (Keyboard.isPressedCombo(_keys))
                return _active;
            return _inactive;
        }
        /**
         * Returns a balanced ternary value (either -1, 0 or 1)
         * according to the match of the keys currently being pressed and the lists of keys given
         */
        static mapToTrit(_positive, _negative) {
            return Keyboard.mapToValue(-1, 0, _negative) + Keyboard.mapToValue(1, 0, _positive);
        }
        // public static locale(_keyboard: Object): void {
        //   if (!Keyboard.code_en) {
        //     // save original keyboard codes to be able to switch back later
        //     Keyboard.code_en = {};
        //     Object.assign(Keyboard.code_en, KEYBOARD_CODE);
        //   }
        //   for (let key in _keyboard) {
        //     let value: string = Reflect.get(_keyboard, key);
        //     for (let original in KEYBOARD_CODE)
        //       if (Reflect.get(KEYBOARD_CODE, original) == value)
        //         // remove original key the yields the value
        //         Reflect.deleteProperty(KEYBOARD_CODE, original);
        //     // add new key to yield that value
        //     Reflect.set(KEYBOARD_CODE, key, value);
        //   }
        // }
        static initialize() {
            let store = {};
            document.addEventListener("keydown", Keyboard.hndKeyInteraction);
            document.addEventListener("keyup", Keyboard.hndKeyInteraction);
            return store;
        }
        static hndKeyInteraction(_event) {
            Keyboard.keysPressed[_event.code] = (_event.type == "keydown");
        }
    }
    Keyboard.keysPressed = Keyboard.initialize();
    FudgeCore.Keyboard = Keyboard;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
(function (FudgeCore) {
    /**
     * Routing to the alert box
     */
    class DebugAlert extends FudgeCore.DebugTarget {
        static createDelegate(_headline) {
            let delegate = function (_message, ..._args) {
                let args = _args.map(_arg => _arg.toString());
                let out = _headline + " " + FudgeCore.DebugTarget.mergeArguments(_message, args);
                alert(out);
            };
            return delegate;
        }
    }
    DebugAlert.delegates = {
        [FudgeCore.DEBUG_FILTER.INFO]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.INFO]),
        [FudgeCore.DEBUG_FILTER.LOG]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.LOG]),
        [FudgeCore.DEBUG_FILTER.WARN]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.WARN]),
        [FudgeCore.DEBUG_FILTER.ERROR]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.ERROR]),
        [FudgeCore.DEBUG_FILTER.FUDGE]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.FUDGE]),
        [FudgeCore.DEBUG_FILTER.SOURCE]: DebugAlert.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.SOURCE])
    };
    FudgeCore.DebugAlert = DebugAlert;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
(function (FudgeCore) {
    /**
     * Routing to a HTMLDialogElement
     */
    class DebugDialog extends FudgeCore.DebugTarget {
    }
    FudgeCore.DebugDialog = DebugDialog;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="DebugTarget.ts"/>
var FudgeCore;
// / <reference path="DebugTarget.ts"/>
(function (FudgeCore) {
    /**
     * Route to an HTMLTextArea, may be obsolete when using HTMLDialogElement
     */
    class DebugTextArea extends FudgeCore.DebugTarget {
        static clear() {
            DebugTextArea.textArea.textContent = "";
            DebugTextArea.groups = [];
        }
        static group(_name) {
            DebugTextArea.print("‚ñº " + _name);
            DebugTextArea.groups.push(_name);
        }
        static groupEnd() {
            DebugTextArea.groups.pop();
        }
        static createDelegate(_headline) {
            let delegate = function (_message, ..._args) {
                DebugTextArea.print(_headline + " " + FudgeCore.DebugTarget.mergeArguments(_message, _args));
            };
            return delegate;
        }
        static getIndentation(_level) {
            let result = "";
            for (let i = 0; i < _level; i++)
                result += "| ";
            return result;
        }
        static print(_text) {
            DebugTextArea.textArea.textContent += DebugTextArea.getIndentation(DebugTextArea.groups.length) + _text + "\n";
            if (DebugTextArea.autoScroll)
                DebugTextArea.textArea.scrollTop = DebugTextArea.textArea.scrollHeight;
        }
    }
    DebugTextArea.textArea = document.createElement("textarea");
    DebugTextArea.autoScroll = true;
    DebugTextArea.delegates = {
        [FudgeCore.DEBUG_FILTER.INFO]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.INFO]),
        [FudgeCore.DEBUG_FILTER.LOG]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.LOG]),
        [FudgeCore.DEBUG_FILTER.WARN]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.WARN]),
        [FudgeCore.DEBUG_FILTER.ERROR]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.ERROR]),
        [FudgeCore.DEBUG_FILTER.FUDGE]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.FUDGE]),
        [FudgeCore.DEBUG_FILTER.CLEAR]: DebugTextArea.clear,
        [FudgeCore.DEBUG_FILTER.GROUP]: DebugTextArea.group,
        [FudgeCore.DEBUG_FILTER.GROUPCOLLAPSED]: DebugTextArea.group,
        [FudgeCore.DEBUG_FILTER.GROUPEND]: DebugTextArea.groupEnd,
        [FudgeCore.DEBUG_FILTER.SOURCE]: DebugTextArea.createDelegate(FudgeCore.DEBUG_SYMBOL[FudgeCore.DEBUG_FILTER.SOURCE])
    };
    DebugTextArea.groups = [];
    FudgeCore.DebugTextArea = DebugTextArea;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The codes sent from a standard english keyboard layout
     */
    let KEYBOARD_CODE;
    (function (KEYBOARD_CODE) {
        KEYBOARD_CODE["A"] = "KeyA";
        KEYBOARD_CODE["B"] = "KeyB";
        KEYBOARD_CODE["C"] = "KeyC";
        KEYBOARD_CODE["D"] = "KeyD";
        KEYBOARD_CODE["E"] = "KeyE";
        KEYBOARD_CODE["F"] = "KeyF";
        KEYBOARD_CODE["G"] = "KeyG";
        KEYBOARD_CODE["H"] = "KeyH";
        KEYBOARD_CODE["I"] = "KeyI";
        KEYBOARD_CODE["J"] = "KeyJ";
        KEYBOARD_CODE["K"] = "KeyK";
        KEYBOARD_CODE["L"] = "KeyL";
        KEYBOARD_CODE["M"] = "KeyM";
        KEYBOARD_CODE["N"] = "KeyN";
        KEYBOARD_CODE["O"] = "KeyO";
        KEYBOARD_CODE["P"] = "KeyP";
        KEYBOARD_CODE["Q"] = "KeyQ";
        KEYBOARD_CODE["R"] = "KeyR";
        KEYBOARD_CODE["S"] = "KeyS";
        KEYBOARD_CODE["T"] = "KeyT";
        KEYBOARD_CODE["U"] = "KeyU";
        KEYBOARD_CODE["V"] = "KeyV";
        KEYBOARD_CODE["W"] = "KeyW";
        KEYBOARD_CODE["X"] = "KeyX";
        KEYBOARD_CODE["Y"] = "KeyY";
        KEYBOARD_CODE["Z"] = "KeyZ";
        KEYBOARD_CODE["ESC"] = "Escape";
        KEYBOARD_CODE["ZERO"] = "Digit0";
        KEYBOARD_CODE["ONE"] = "Digit1";
        KEYBOARD_CODE["TWO"] = "Digit2";
        KEYBOARD_CODE["THREE"] = "Digit3";
        KEYBOARD_CODE["FOUR"] = "Digit4";
        KEYBOARD_CODE["FIVE"] = "Digit5";
        KEYBOARD_CODE["SIX"] = "Digit6";
        KEYBOARD_CODE["SEVEN"] = "Digit7";
        KEYBOARD_CODE["EIGHT"] = "Digit8";
        KEYBOARD_CODE["NINE"] = "Digit9";
        KEYBOARD_CODE["MINUS"] = "Minus";
        KEYBOARD_CODE["EQUAL"] = "Equal";
        KEYBOARD_CODE["BACKSPACE"] = "Backspace";
        KEYBOARD_CODE["TABULATOR"] = "Tab";
        KEYBOARD_CODE["BRACKET_LEFT"] = "BracketLeft";
        KEYBOARD_CODE["BRACKET_RIGHT"] = "BracketRight";
        KEYBOARD_CODE["ENTER"] = "Enter";
        KEYBOARD_CODE["CTRL_LEFT"] = "ControlLeft";
        KEYBOARD_CODE["SEMICOLON"] = "Semicolon";
        KEYBOARD_CODE["QUOTE"] = "Quote";
        KEYBOARD_CODE["BACK_QUOTE"] = "Backquote";
        KEYBOARD_CODE["SHIFT_LEFT"] = "ShiftLeft";
        KEYBOARD_CODE["BACKSLASH"] = "Backslash";
        KEYBOARD_CODE["COMMA"] = "Comma";
        KEYBOARD_CODE["PERIOD"] = "Period";
        KEYBOARD_CODE["SLASH"] = "Slash";
        KEYBOARD_CODE["SHIFT_RIGHT"] = "ShiftRight";
        KEYBOARD_CODE["NUMPAD_MULTIPLY"] = "NumpadMultiply";
        KEYBOARD_CODE["ALT_LEFT"] = "AltLeft";
        KEYBOARD_CODE["SPACE"] = "Space";
        KEYBOARD_CODE["CAPS_LOCK"] = "CapsLock";
        KEYBOARD_CODE["F1"] = "F1";
        KEYBOARD_CODE["F2"] = "F2";
        KEYBOARD_CODE["F3"] = "F3";
        KEYBOARD_CODE["F4"] = "F4";
        KEYBOARD_CODE["F5"] = "F5";
        KEYBOARD_CODE["F6"] = "F6";
        KEYBOARD_CODE["F7"] = "F7";
        KEYBOARD_CODE["F8"] = "F8";
        KEYBOARD_CODE["F9"] = "F9";
        KEYBOARD_CODE["F10"] = "F10";
        KEYBOARD_CODE["PAUSE"] = "Pause";
        KEYBOARD_CODE["SCROLL_LOCK"] = "ScrollLock";
        KEYBOARD_CODE["NUMPAD7"] = "Numpad7";
        KEYBOARD_CODE["NUMPAD8"] = "Numpad8";
        KEYBOARD_CODE["NUMPAD9"] = "Numpad9";
        KEYBOARD_CODE["NUMPAD_SUBTRACT"] = "NumpadSubtract";
        KEYBOARD_CODE["NUMPAD4"] = "Numpad4";
        KEYBOARD_CODE["NUMPAD5"] = "Numpad5";
        KEYBOARD_CODE["NUMPAD6"] = "Numpad6";
        KEYBOARD_CODE["NUMPAD_ADD"] = "NumpadAdd";
        KEYBOARD_CODE["NUMPAD1"] = "Numpad1";
        KEYBOARD_CODE["NUMPAD2"] = "Numpad2";
        KEYBOARD_CODE["NUMPAD3"] = "Numpad3";
        KEYBOARD_CODE["NUMPAD0"] = "Numpad0";
        KEYBOARD_CODE["NUMPAD_DECIMAL"] = "NumpadDecimal";
        KEYBOARD_CODE["PRINT_SCREEN"] = "PrintScreen";
        KEYBOARD_CODE["INTL_BACK_SLASH"] = "IntlBackSlash";
        KEYBOARD_CODE["F11"] = "F11";
        KEYBOARD_CODE["F12"] = "F12";
        KEYBOARD_CODE["NUMPAD_EQUAL"] = "NumpadEqual";
        KEYBOARD_CODE["F13"] = "F13";
        KEYBOARD_CODE["F14"] = "F14";
        KEYBOARD_CODE["F15"] = "F15";
        KEYBOARD_CODE["F16"] = "F16";
        KEYBOARD_CODE["F17"] = "F17";
        KEYBOARD_CODE["F18"] = "F18";
        KEYBOARD_CODE["F19"] = "F19";
        KEYBOARD_CODE["F20"] = "F20";
        KEYBOARD_CODE["F21"] = "F21";
        KEYBOARD_CODE["F22"] = "F22";
        KEYBOARD_CODE["F23"] = "F23";
        KEYBOARD_CODE["F24"] = "F24";
        KEYBOARD_CODE["KANA_MODE"] = "KanaMode";
        KEYBOARD_CODE["LANG2"] = "Lang2";
        KEYBOARD_CODE["LANG1"] = "Lang1";
        KEYBOARD_CODE["INTL_RO"] = "IntlRo";
        KEYBOARD_CODE["CONVERT"] = "Convert";
        KEYBOARD_CODE["NON_CONVERT"] = "NonConvert";
        KEYBOARD_CODE["INTL_YEN"] = "IntlYen";
        KEYBOARD_CODE["NUMPAD_COMMA"] = "NumpadComma";
        KEYBOARD_CODE["UNDO"] = "Undo";
        KEYBOARD_CODE["PASTE"] = "Paste";
        KEYBOARD_CODE["MEDIA_TRACK_PREVIOUS"] = "MediaTrackPrevious";
        KEYBOARD_CODE["CUT"] = "Cut";
        KEYBOARD_CODE["COPY"] = "Copy";
        KEYBOARD_CODE["MEDIA_TRACK_NEXT"] = "MediaTrackNext";
        KEYBOARD_CODE["NUMPAD_ENTER"] = "NumpadEnter";
        KEYBOARD_CODE["CTRL_RIGHT"] = "ControlRight";
        KEYBOARD_CODE["AUDIO_VOLUME_MUTE"] = "AudioVolumeMute";
        KEYBOARD_CODE["LAUNCH_APP2"] = "LaunchApp2";
        KEYBOARD_CODE["MEDIA_PLAY_PAUSE"] = "MediaPlayPause";
        KEYBOARD_CODE["MEDIA_STOP"] = "MediaStop";
        KEYBOARD_CODE["EJECT"] = "Eject";
        KEYBOARD_CODE["AUDIO_VOLUME_DOWN"] = "AudioVolumeDown";
        KEYBOARD_CODE["VOLUME_DOWN"] = "VolumeDown";
        KEYBOARD_CODE["AUDIO_VOLUME_UP"] = "AudioVolumeUp";
        KEYBOARD_CODE["VOLUME_UP"] = "VolumeUp";
        KEYBOARD_CODE["BROWSER_HOME"] = "BrowserHome";
        KEYBOARD_CODE["NUMPAD_DIVIDE"] = "NumpadDivide";
        KEYBOARD_CODE["ALT_RIGHT"] = "AltRight";
        KEYBOARD_CODE["HELP"] = "Help";
        KEYBOARD_CODE["NUM_LOCK"] = "NumLock";
        KEYBOARD_CODE["HOME"] = "Home";
        KEYBOARD_CODE["ARROW_UP"] = "ArrowUp";
        KEYBOARD_CODE["ARROW_RIGHT"] = "ArrowRight";
        KEYBOARD_CODE["ARROW_DOWN"] = "ArrowDown";
        KEYBOARD_CODE["ARROW_LEFT"] = "ArrowLeft";
        KEYBOARD_CODE["END"] = "End";
        KEYBOARD_CODE["PAGE_UP"] = "PageUp";
        KEYBOARD_CODE["PAGE_DOWN"] = "PageDown";
        KEYBOARD_CODE["INSERT"] = "Insert";
        KEYBOARD_CODE["DELETE"] = "Delete";
        KEYBOARD_CODE["META_LEFT"] = "Meta_Left";
        KEYBOARD_CODE["OS_LEFT"] = "OSLeft";
        KEYBOARD_CODE["META_RIGHT"] = "MetaRight";
        KEYBOARD_CODE["OS_RIGHT"] = "OSRight";
        KEYBOARD_CODE["CONTEXT_MENU"] = "ContextMenu";
        KEYBOARD_CODE["POWER"] = "Power";
        KEYBOARD_CODE["BROWSER_SEARCH"] = "BrowserSearch";
        KEYBOARD_CODE["BROWSER_FAVORITES"] = "BrowserFavorites";
        KEYBOARD_CODE["BROWSER_REFRESH"] = "BrowserRefresh";
        KEYBOARD_CODE["BROWSER_STOP"] = "BrowserStop";
        KEYBOARD_CODE["BROWSER_FORWARD"] = "BrowserForward";
        KEYBOARD_CODE["BROWSER_BACK"] = "BrowserBack";
        KEYBOARD_CODE["LAUNCH_APP1"] = "LaunchApp1";
        KEYBOARD_CODE["LAUNCH_MAIL"] = "LaunchMail";
        KEYBOARD_CODE["LAUNCH_MEDIA_PLAYER"] = "LaunchMediaPlayer";
        //mac brings this buttton
        KEYBOARD_CODE["FN"] = "Fn";
        //Linux brings these
        KEYBOARD_CODE["AGAIN"] = "Again";
        KEYBOARD_CODE["PROPS"] = "Props";
        KEYBOARD_CODE["SELECT"] = "Select";
        KEYBOARD_CODE["OPEN"] = "Open";
        KEYBOARD_CODE["FIND"] = "Find";
        KEYBOARD_CODE["WAKE_UP"] = "WakeUp";
        KEYBOARD_CODE["NUMPAD_PARENT_LEFT"] = "NumpadParentLeft";
        KEYBOARD_CODE["NUMPAD_PARENT_RIGHT"] = "NumpadParentRight";
        //android
        KEYBOARD_CODE["SLEEP"] = "Sleep";
    })(KEYBOARD_CODE = FudgeCore.KEYBOARD_CODE || (FudgeCore.KEYBOARD_CODE = {}));
    let KEYBOARD_CODE_DE;
    (function (KEYBOARD_CODE_DE) {
        KEYBOARD_CODE_DE["Z"] = "KeyY";
        KEYBOARD_CODE_DE["Y"] = "KeyZ";
        KEYBOARD_CODE_DE["\u00D6"] = "Semicolon";
        KEYBOARD_CODE_DE["\u00C4"] = "Quote";
        KEYBOARD_CODE_DE["\u00DC"] = "BracketLeft";
        KEYBOARD_CODE_DE["HASH"] = "Backslash";
        KEYBOARD_CODE_DE["PLUS"] = "BracketRight";
        KEYBOARD_CODE_DE["\u00DF"] = "Minus";
        KEYBOARD_CODE_DE["ACUTE"] = "Equal";
        KEYBOARD_CODE_DE["LESS_THAN"] = "IntlBackSlash";
        KEYBOARD_CODE_DE["MINUS"] = "Slash";
    })(KEYBOARD_CODE_DE = FudgeCore.KEYBOARD_CODE_DE || (FudgeCore.KEYBOARD_CODE_DE = {}));
    /*
    Firefox can't make use of those buttons and Combinations:
    SINGELE_BUTTONS:
     Druck,
    COMBINATIONS:
     Shift + F10, Shift + Numpad5,
     CTRL + q, CTRL + F4,
     ALT + F1, ALT + F2, ALT + F3, ALT + F7, ALT + F8, ALT + F10
    Opera won't do good with these Buttons and combinations:
    SINGLE_BUTTONS:
     Float32Array, F11, ALT,
    COMBINATIONS:
     CTRL + q, CTRL + t, CTRL + h, CTRL + g, CTRL + n, CTRL + f
     ALT + F1, ALT + F2, ALT + F4, ALT + F5, ALT + F6, ALT + F7, ALT + F8, ALT + F10
     */
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * An event that represents a call from a {@link Timer}
     */
    class EventTimer {
        constructor(_timer, ..._arguments) {
            this.type = "\u0192lapse" /* CALL */;
            this.firstCall = true;
            this.lastCall = false;
            this.target = _timer;
            this.arguments = _arguments;
            this.firstCall = true;
        }
    }
    FudgeCore.EventTimer = EventTimer;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Custom touch events
     */
    let EVENT_TOUCH;
    (function (EVENT_TOUCH) {
        /** custom event fired in addition to the standard touchmove, details offset to starting touch */
        EVENT_TOUCH["MOVE"] = "touchMove";
        /** custom event fired when the touches haven't moved outside of the tap radius */
        EVENT_TOUCH["TAP"] = "touchTap";
        /** custom event fired when the touches have moved outside of the notch radius, details offset and cardinal direction */
        EVENT_TOUCH["NOTCH"] = "touchNotch";
        /** custom event fired when the touches haven't moved outside of the tap radius for some time */
        EVENT_TOUCH["LONG"] = "touchLong";
        /** custom event fired when two taps were detected in short succession */
        EVENT_TOUCH["DOUBLE"] = "touchDouble";
        /** custom event fired when the distance between the only two touches changes beyond a tolerance */
        EVENT_TOUCH["PINCH"] = "touchPinch";
        /** custom event not implemented yet */
        EVENT_TOUCH["ROTATE"] = "touchRotate";
    })(EVENT_TOUCH = FudgeCore.EVENT_TOUCH || (FudgeCore.EVENT_TOUCH = {}));
    /**
     * Dispatches CustomTouchEvents to the EventTarget given with the constructor.
     * When using touch events, make sure to set `touch-action: none` in CSS
     * @author Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class TouchEventDispatcher {
        constructor(_target, _radiusTap = 5, _radiusNotch = 50, _timeDouble = 200, _timerLong = 1000) {
            this.posStart = FudgeCore.Vector2.ZERO();
            this.posNotch = FudgeCore.Vector2.ZERO();
            this.posPrev = FudgeCore.Vector2.ZERO();
            this.moved = false;
            this.time = new FudgeCore.Time();
            this.pinchDistance = 0;
            this.pinchTolerance = 1;
            this.hndEvent = (_event) => {
                _event.preventDefault();
                let touchFirst = _event.touches[0];
                let position = this.calcAveragePosition(_event.touches); //new Vector2(touchFirst?.clientX, touchFirst?.clientY);
                let offset;
                switch (_event.type) {
                    case "touchstart":
                        this.moved = false;
                        this.startGesture(position);
                        if (_event.touches.length == 2) {
                            // reset pinch
                            let pinch = new FudgeCore.Vector2(_event.touches[1].clientX - touchFirst.clientX, _event.touches[1].clientY - touchFirst.clientY);
                            this.pinchDistance = pinch.magnitude;
                        }
                        let dispatchLong = (_eventTimer) => {
                            this.moved = true;
                            this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.LONG, {
                                bubbles: true, detail: { position: position, touches: _event.touches }
                            }));
                        };
                        this.timerLong?.clear();
                        this.timerLong = new FudgeCore.Timer(this.time, this.timeLong, 1, dispatchLong);
                        break;
                    case "touchend":
                        this.timerLong?.clear();
                        if (_event.touches.length > 0) {
                            // still touches active
                            this.startGesture(position);
                            break;
                        }
                        let dispatchTap = (_eventTimer) => {
                            this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.TAP, {
                                bubbles: true, detail: { position: position, touches: _event.touches }
                            }));
                        };
                        // check if there was a tap before and timer is still running -> double tap
                        if (this.timerDouble?.active) {
                            this.timerDouble.clear();
                            // this.timer = undefined;
                            this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.DOUBLE, {
                                bubbles: true, detail: { position: position, touches: _event.touches }
                            }));
                        }
                        // check if there was movement, otherwise set timer to fire tap
                        else if (!this.moved)
                            this.timerDouble = new FudgeCore.Timer(this.time, this.timeDouble, 1, dispatchTap);
                        break;
                    case "touchmove":
                        this.detectPinch(_event, position);
                        offset = FudgeCore.Vector2.DIFFERENCE(this.posPrev, this.posStart);
                        this.moved ||= (offset.magnitude < this.radiusTap); // remember that touch moved over tap radius
                        let movement = FudgeCore.Vector2.DIFFERENCE(position, this.posPrev);
                        this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.MOVE, {
                            bubbles: true, detail: { position: position, touches: _event.touches, offset: offset, movement: movement }
                        }));
                        // fire notch when touches moved out of notch radius and reset notch
                        offset = FudgeCore.Vector2.DIFFERENCE(position, this.posNotch);
                        if (offset.magnitude > this.radiusNotch) {
                            let cardinal = Math.abs(offset.x) > Math.abs(offset.y) ?
                                FudgeCore.Vector2.X(offset.x < 0 ? -1 : 1) :
                                FudgeCore.Vector2.Y(offset.y < 0 ? -1 : 1);
                            this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.NOTCH, {
                                bubbles: true, detail: { position: position, touches: _event.touches, offset: offset, cardinal: cardinal, movement: movement }
                            }));
                            this.posNotch = position;
                        }
                        //TODO: pinch, rotate...
                        break;
                    default:
                        break;
                }
                this.posPrev.set(position.x, position.y);
            };
            this.detectPinch = (_event, _position) => {
                if (_event.touches.length != 2)
                    return;
                let t = _event.touches;
                let pinch = new FudgeCore.Vector2(t[1].clientX - t[0].clientX, t[1].clientY - t[0].clientY);
                let pinchDistance = pinch.magnitude;
                let pinchDelta = pinchDistance - this.pinchDistance;
                if (Math.abs(pinchDelta) > this.pinchTolerance)
                    this.target.dispatchEvent(new CustomEvent(EVENT_TOUCH.PINCH, {
                        bubbles: true, detail: { position: _position, touches: _event.touches, pinch: pinch, pinchDelta: pinchDelta }
                    }));
                this.pinchDistance = pinchDistance;
            };
            this.target = _target;
            this.radiusTap = _radiusTap;
            this.radiusNotch = _radiusNotch;
            this.timeDouble = _timeDouble;
            this.timeLong = _timerLong;
            this.activate(true);
        }
        /**
         * De-/Activates the dispatch of CustomTouchEvents
         */
        activate(_on) {
            if (_on) {
                this.target.addEventListener("touchstart", this.hndEvent);
                this.target.addEventListener("touchend", this.hndEvent);
                this.target.addEventListener("touchmove", this.hndEvent);
                return;
            }
            this.target.removeEventListener("touchstart", this.hndEvent);
            this.target.removeEventListener("touchend", this.hndEvent);
            this.target.removeEventListener("touchmove", this.hndEvent);
        }
        startGesture(_position) {
            this.posNotch.set(_position.x, _position.y);
            this.posStart.set(_position.x, _position.y);
        }
        calcAveragePosition(_touches) {
            let average = FudgeCore.Vector2.ZERO();
            for (let touch of _touches) {
                average.x += touch.clientX;
                average.y += touch.clientY;
            }
            average.scale(1 / _touches.length);
            return average;
        }
    }
    FudgeCore.TouchEventDispatcher = TouchEventDispatcher;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A node managed by {@link Project} that functions as a template for {@link GraphInstance}s
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Resource
     */
    class Graph extends FudgeCore.Node {
        // #syncing: boolean = false;
        constructor(_name = "Graph") {
            super(_name);
            this.idResource = undefined;
            this.type = "Graph";
            this.hndMutate = async (_event) => {
                // TODO: if path contains a graph instance below this, don't dispatch!
                // let path: Node[] = Reflect.get(_event, "path");
                // for (let node of path)
                //   if (node instanceof GraphInstance && node.idSource != this.idResource)
                //     return;
                // console.log("Graph mutates", this.name);
                // this.#syncing = true;
                _event.detail.path = Reflect.get(_event, "path"); // save path to target in detail
                this.dispatchEvent(new CustomEvent("mutateGraph" /* MUTATE_GRAPH */, { detail: _event.detail }));
                // this.dispatchEvent(new Event(EVENT.MUTATE_INSTANCE));
                // this.#syncing = false;
            };
            this.addEventListener("mutate" /* MUTATE */, this.hndMutate);
        }
        serialize() {
            let serialization = super.serialize();
            serialization.idResource = this.idResource;
            serialization.type = this.type;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            FudgeCore.Project.register(this, _serialization.idResource);
            await FudgeCore.Project.resyncGraphInstances(this);
            this.dispatchEvent(new Event("graphDeserialized" /* GRAPH_DESERIALIZED */));
            return this;
        }
    }
    FudgeCore.Graph = Graph;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let SYNC;
    (function (SYNC) {
        SYNC[SYNC["READY"] = 0] = "READY";
        SYNC[SYNC["GRAPH_SYNCED"] = 1] = "GRAPH_SYNCED";
        SYNC[SYNC["GRAPH_DONE"] = 2] = "GRAPH_DONE";
        SYNC[SYNC["INSTANCE"] = 3] = "INSTANCE";
    })(SYNC || (SYNC = {}));
    /**
     * An instance of a {@link Graph}.
     * This node keeps a reference to its resource an can thus optimize serialization
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Resource
     */
    class GraphInstance extends FudgeCore.Node {
        /**
         * This constructor allone will not create a reconstruction, but only save the id.
         * To create an instance of the graph, call reset on this or set with a graph as parameter.
         * Prefer Project.createGraphInstance(_graph).
         */
        constructor(_graph) {
            super("GraphInstance");
            /** id of the resource that instance was created from */
            // TODO: examine, if this should be a direct reference to the Graph, instead of the id
            this.#idSource = undefined;
            this.#sync = SYNC.READY;
            this.#deserializeFromSource = true;
            /**
             * Source graph mutated, reflect mutation in this instance
             */
            this.hndMutationGraph = async (_event) => {
                // console.log("Reflect Graph-Mutation to Instance", SYNC[this.#sync], (<Graph>_event.currentTarget).name, this.getPath().map(_node => _node.name));
                if (this.#sync != SYNC.READY) {
                    // console.log("Sync aborted, switch to ready");
                    this.#sync = SYNC.READY;
                    return;
                }
                if (this.isFiltered())
                    return;
                this.#sync = SYNC.GRAPH_SYNCED; // do not sync again, since mutation is already a synchronization
                await this.reflectMutation(_event, _event.currentTarget, this, _event.detail.path);
                this.dispatchEvent(new Event("mutateGraphDone" /* MUTATE_INSTANCE */, { bubbles: false }));
            };
            /**
             * This instance mutated, reflect mutation in source graph
             */
            this.hndMutationInstance = async (_event) => {
                // console.log("Reflect Instance-Mutation to Graph", SYNC[this.#sync], this.getPath().map(_node => _node.name), this.get().name);
                if (this.#sync != SYNC.READY) {
                    // console.log("Sync aborted, switch to ready");
                    this.#sync = SYNC.READY;
                    return;
                }
                if (_event.target instanceof GraphInstance && _event.target != this) {
                    // console.log("Sync aborted, target already synced");
                    return;
                }
                if (this.isFiltered())
                    return;
                this.#sync = SYNC.INSTANCE; // do not sync again, since mutation is already a synchronization
                await this.reflectMutation(_event, this, this.get(), Reflect.get(_event, "path"));
            };
            this.addEventListener("mutate" /* MUTATE */, this.hndMutationInstance, true);
            if (!_graph)
                return;
            this.#idSource = _graph.idResource;
        }
        /** id of the resource that instance was created from */
        // TODO: examine, if this should be a direct reference to the Graph, instead of the id
        #idSource;
        #sync;
        #deserializeFromSource;
        get idSource() {
            return this.#idSource;
        }
        /**
         * Recreate this node from the {@link Graph} referenced
         */
        async reset() {
            let resource = await FudgeCore.Project.getResource(this.#idSource);
            await this.set(resource);
        }
        //TODO: optimize using the referenced Graph, serialize/deserialize only the differences
        serialize() {
            let filter = this.getComponent(FudgeCore.ComponentGraphFilter);
            let serialization = {};
            if (filter && filter.isActive) // if graph synchronisation is unfiltered, knowing the source is sufficient for serialization
                serialization = super.serialize();
            else
                serialization.deserializeFromSource = true;
            serialization.name = this.name;
            serialization.idSource = this.#idSource;
            return serialization;
        }
        async deserialize(_serialization) {
            this.#idSource = _serialization.idSource;
            if (!_serialization.deserializeFromSource) {
                await super.deserialize(_serialization); // instance is deserialized from individual data
                this.#deserializeFromSource = false;
            }
            let graph = this.get();
            if (graph)
                // if (_serialization.deserializeFromSource) // no components-> assume synchronized GraphInstance
                //   await this.set(graph); // recreate complete instance from source graph
                // else {
                await this.connectToGraph(); // otherwise just connect
            // }
            else {
                FudgeCore.Project.registerGraphInstanceForResync(this);
            }
            return this;
        }
        async connectToGraph() {
            let graph = this.get();
            if (this.#deserializeFromSource)
                await this.set(graph);
            // graph.addEventListener(EVENT.MUTATE, (_event: CustomEvent) => this.hndMutation, true);
            graph.addEventListener("mutateGraph" /* MUTATE_GRAPH */, this.hndMutationGraph);
            // graph.addEventListener(EVENT.MUTATE_GRAPH_DONE, () => { console.log("Done", this.name); /* this.#sync = true; */ });
        }
        /**
         * Set this node to be a recreation of the {@link Graph} given
         */
        async set(_graph) {
            // TODO: examine, if the serialization should be stored in the Graph for optimization <- also useful for sync with instances
            let serialization = FudgeCore.Serializer.serialize(_graph);
            //Serializer.deserialize(serialization);
            for (let path in serialization) {
                await this.deserialize(serialization[path]);
                break;
            }
            this.#idSource = _graph.idResource;
            this.dispatchEvent(new Event("graphInstantiated" /* GRAPH_INSTANTIATED */));
        }
        /**
         * Retrieve the graph this instances refers to
         */
        get() {
            return FudgeCore.Project.resources[this.#idSource];
        }
        async reflectMutation(_event, _source, _destination, _path) {
            // console.log("Reflect mutation", _source, _destination);
            for (let node of _path)
                if (node instanceof GraphInstance)
                    if (node == this)
                        break;
                    else {
                        console.log("Sync aborted, target already synced");
                        return;
                    }
            let index = _path.indexOf(_source);
            for (let i = index - 1; i >= 0; i--) {
                let childIndex = _path[i].getParent().findChild(_path[i]); // get the index of the childnode in the original path
                _destination = _destination.getChild(childIndex); // get the corresponding child in this path
                // TODO: respect index for non-singleton components...
            }
            let cmpMutate = _destination.getComponent(_event.detail.component.constructor);
            if (cmpMutate)
                await cmpMutate.mutate(_event.detail.mutator);
        }
        isFiltered() {
            let cmpFilter = this.getComponent(FudgeCore.ComponentGraphFilter);
            return (cmpFilter && cmpFilter.isActive);
        }
    }
    FudgeCore.GraphInstance = GraphInstance;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Holds data to feed into a {@link Shader} to describe the surface of {@link Mesh}.
     * {@link Material}s reference {@link Coat} and {@link Shader}.
     * The method useRenderData will be injected by {@link RenderInjector} at runtime, extending the functionality of this class to deal with the renderer.
     */
    class Coat extends FudgeCore.Mutable {
        useRenderData(_shader, _cmpMaterial) { }
        //#region Transfer
        serialize() {
            return {};
        }
        async deserialize(_serialization) {
            return this;
        }
        reduceMutator(_mutator) {
            delete _mutator.renderData;
        }
    }
    FudgeCore.Coat = Coat;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The simplest {@link Coat} providing just a color
     */
    let CoatColored = class CoatColored extends FudgeCore.Coat {
        constructor(_color = new FudgeCore.Color()) {
            super();
            this.color = _color;
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.color = this.color.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            await this.color.deserialize(_serialization.color);
            return this;
        }
    };
    CoatColored = __decorate([
        FudgeCore.RenderInjectorCoat.decorate
    ], CoatColored);
    FudgeCore.CoatColored = CoatColored;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The simplest {@link Coat} providing just a color
     */
    let CoatRemissive = class CoatRemissive extends FudgeCore.CoatColored {
        constructor(_color = new FudgeCore.Color(), _diffuse = 1, _specular = 0) {
            super(_color);
            this.diffuse = _diffuse;
            this.specular = _specular;
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.diffuse = this.diffuse;
            serialization.specular = this.specular;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            await this.color.deserialize(_serialization.color);
            this.diffuse = _serialization.diffuse;
            this.specular = _serialization.specular;
            return this;
        }
    };
    CoatRemissive = __decorate([
        FudgeCore.RenderInjectorCoat.decorate
    ], CoatRemissive);
    FudgeCore.CoatRemissive = CoatRemissive;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A {@link Coat} providing a texture and additional data for texturing
     */
    let CoatTextured = class CoatTextured extends FudgeCore.CoatColored {
        constructor(_color = new FudgeCore.Color(), _texture = FudgeCore.TextureDefault.texture) {
            super(_color);
            this.texture = null;
            this.texture = _texture;
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.idTexture = this.texture.idResource;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            if (_serialization.idTexture)
                this.texture = await FudgeCore.Project.getResource(_serialization.idTexture);
            return this;
        }
    };
    CoatTextured = __decorate([
        FudgeCore.RenderInjectorCoat.decorate
    ], CoatTextured);
    FudgeCore.CoatTextured = CoatTextured;
})(FudgeCore || (FudgeCore = {}));
///<reference path="CoatTextured.ts"/>
var FudgeCore;
///<reference path="CoatTextured.ts"/>
(function (FudgeCore) {
    /**
     * A {@link Coat} providing a texture and additional data for texturing
     */
    let CoatRemissiveTextured = class CoatRemissiveTextured extends FudgeCore.CoatTextured {
        constructor(_color = new FudgeCore.Color(), _texture = FudgeCore.TextureDefault.texture, _diffuse = 1, _specular = 0) {
            super(_color, _texture);
            this.diffuse = _diffuse;
            this.specular = _specular;
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.diffuse = this.diffuse;
            serialization.specular = this.specular;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            this.diffuse = _serialization.diffuse;
            this.specular = _serialization.specular;
            return this;
        }
    };
    CoatRemissiveTextured = __decorate([
        FudgeCore.RenderInjectorCoat.decorate
    ], CoatRemissiveTextured);
    FudgeCore.CoatRemissiveTextured = CoatRemissiveTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Defines a color as values in the range of 0 to 1 for the four channels red, green, blue and alpha (for opacity)
     */
    class Color extends FudgeCore.Mutable {
        constructor(_r = 1, _g = 1, _b = 1, _a = 1) {
            super();
            this.setNormRGBA(_r, _g, _b, _a);
        }
        static getHexFromCSSKeyword(_keyword) {
            Color.crc2.fillStyle = _keyword;
            return Color.crc2.fillStyle;
        }
        static CSS(_keyword, _alpha = 1) {
            let hex = Color.getHexFromCSSKeyword(_keyword);
            let color = new Color(parseInt(hex.substr(1, 2), 16) / 255, parseInt(hex.substr(3, 2), 16) / 255, parseInt(hex.substr(5, 2), 16) / 255, _alpha);
            return color;
        }
        static MULTIPLY(_color1, _color2) {
            return new Color(_color1.r * _color2.r, _color1.g * _color2.g, _color1.b * _color2.b, _color1.a * _color2.a);
        }
        setNormRGBA(_r, _g, _b, _a) {
            this.r = Math.min(1, Math.max(0, _r));
            this.g = Math.min(1, Math.max(0, _g));
            this.b = Math.min(1, Math.max(0, _b));
            this.a = Math.min(1, Math.max(0, _a));
        }
        setBytesRGBA(_r, _g, _b, _a) {
            this.setNormRGBA(_r / 255, _g / 255, _b / 255, _a / 255);
        }
        getArray() {
            return new Float32Array([this.r, this.g, this.b, this.a]);
        }
        setArrayNormRGBA(_color) {
            this.setNormRGBA(_color[0], _color[1], _color[2], _color[3]);
        }
        setArrayBytesRGBA(_color) {
            this.setBytesRGBA(_color[0], _color[1], _color[2], _color[3]);
        }
        getArrayBytesRGBA() {
            return new Uint8ClampedArray([this.r * 255, this.g * 255, this.b * 255, this.a * 255]);
        }
        add(_color) {
            this.r += _color.r;
            this.g += _color.g;
            this.b += _color.b;
            this.a += _color.a;
        }
        getCSS() {
            let bytes = this.getArrayBytesRGBA();
            return `RGBA(${bytes[0]}, ${bytes[1]}, ${bytes[2]}, ${bytes[3]})`;
        }
        getHex() {
            let bytes = this.getArrayBytesRGBA();
            let hex = "";
            for (let byte of bytes)
                hex += byte.toString(16).padStart(2, "0");
            return hex;
        }
        setHex(_hex) {
            let bytes = this.getArrayBytesRGBA();
            let channel = 0;
            for (let byte in bytes)
                bytes[byte] = parseInt(_hex.substr(channel++ * 2, 2), 16);
            this.setArrayBytesRGBA(bytes);
        }
        copy(_color) {
            this.r = _color.r;
            this.g = _color.g;
            this.b = _color.b;
            this.a = _color.a;
        }
        toString() {
            return `(r: ${this.r.toFixed(3)}, g: ${this.g.toFixed(3)}, b: ${this.b.toFixed(3)}, a: ${this.a.toFixed(3)})`;
        }
        //#region Transfer
        serialize() {
            let serialization = this.getMutator(true);
            // serialization.toJSON = () => { return `{ "r": ${this.r}, "g": ${this.g}, "b": ${this.b}, "a": ${this.a}}`; };
            serialization.toJSON = () => { return `[${this.r}, ${this.g}, ${this.b}, ${this.a}]`; };
            return serialization;
        }
        async deserialize(_serialization) {
            if (typeof (_serialization) == "string") {
                [this.r, this.g, this.b, this.a] = JSON.parse(_serialization);
            }
            else
                this.mutate(_serialization);
            return this;
        }
        reduceMutator(_mutator) { }
    }
    // crc2 only used for converting colors from strings predefined by CSS
    Color.crc2 = document.createElement("canvas").getContext("2d");
    FudgeCore.Color = Color;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Baseclass for materials. Combines a {@link Shader} with a compatible {@link Coat}
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Material extends FudgeCore.Mutable {
        constructor(_name, _shader, _coat) {
            super();
            this.idResource = undefined;
            this.name = _name;
            this.shaderType = _shader;
            if (_shader) {
                if (_coat)
                    this.coat = _coat;
                else
                    this.coat = this.createCoatMatchingShader();
            }
            FudgeCore.Project.register(this);
        }
        /** The name to call the Material by. */
        #coat;
        /**
         * Returns the currently referenced {@link Coat} instance
         */
        get coat() {
            return this.#coat;
        }
        /**
         * Makes this material reference the given {@link Coat} if it is compatible with the referenced {@link Shader}
         */
        set coat(_coat) {
            if (_coat.constructor != this.shaderType.getCoat())
                if (_coat instanceof this.shaderType.getCoat())
                    FudgeCore.Debug.fudge("Coat is extension of Coat required by shader");
                else
                    throw (new Error("Shader and coat don't match"));
            this.#coat = _coat;
        }
        /**
         * Creates a new {@link Coat} instance that is valid for the {@link Shader} referenced by this material
         */
        createCoatMatchingShader() {
            let coat = new (this.shaderType.getCoat())();
            return coat;
        }
        /**
         * Changes the materials reference to the given {@link Shader}, creates and references a new {@link Coat} instance
         * and mutates the new coat to preserve matching properties.
         * @param _shaderType
         */
        setShader(_shaderType) {
            this.shaderType = _shaderType;
            let coat = this.createCoatMatchingShader();
            coat.mutate(this.#coat.getMutator());
            this.coat = coat;
        }
        /**
         * Returns the {@link Shader} referenced by this material
         */
        getShader() {
            return this.shaderType;
        }
        //#region Transfer
        // TODO: this type of serialization was implemented for implicit Material create. Check if obsolete when only one material class exists and/or materials are stored separately
        serialize() {
            let serialization = {
                name: this.name,
                idResource: this.idResource,
                shader: this.shaderType.name,
                coat: FudgeCore.Serializer.serialize(this.#coat)
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.name = _serialization.name;
            FudgeCore.Project.register(this, _serialization.idResource);
            this.shaderType = FudgeCore[_serialization.shader];
            let coat = await FudgeCore.Serializer.deserialize(_serialization.coat);
            this.coat = coat;
            return this;
        }
        getMutator() {
            let mutator = super.getMutator(true);
            mutator.coat = this.coat.getMutator();
            return mutator;
        }
        reduceMutator(_mutator) {
            // delete _mutator.idResource;
        }
    }
    FudgeCore.Material = Material;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Abstract class supporting various arithmetical helper functions
     */
    class Calc {
        /**
         * Returns one of the values passed in, either _value if within _min and _max or the boundary being exceeded by _value
         */
        static clamp(_value, _min, _max, _isSmaller = (_value1, _value2) => { return _value1 < _value2; }) {
            if (_isSmaller(_value, _min))
                return _min;
            if (_isSmaller(_max, _value))
                return _max;
            return _value;
        }
    }
    /** factor multiplied with angle in degrees yields the angle in radian */
    Calc.deg2rad = Math.PI / 180;
    /** factor multiplied with angle in radian yields the angle in degrees */
    Calc.rad2deg = 1 / Calc.deg2rad;
    FudgeCore.Calc = Calc;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Framing describes how to map a rectangle into a given frame
     * and how points in the frame correspond to points in the resulting rectangle and vice versa
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Framing
     */
    class Framing extends FudgeCore.Mutable {
        reduceMutator(_mutator) { }
    }
    FudgeCore.Framing = Framing;
    /**
     * The resulting rectangle has a fixed width and height and display should scale to fit the frame
     * Points are scaled in the same ratio
     */
    class FramingFixed extends Framing {
        constructor(_width = 300, _height = 150) {
            super();
            this.width = 300;
            this.height = 150;
            this.setSize(_width, _height);
        }
        setSize(_width, _height) {
            this.width = _width;
            this.height = _height;
        }
        getPoint(_pointInFrame, _rectFrame) {
            let result = new FudgeCore.Vector2(this.width * (_pointInFrame.x - _rectFrame.x) / _rectFrame.width, this.height * (_pointInFrame.y - _rectFrame.y) / _rectFrame.height);
            return result;
        }
        getPointInverse(_point, _rect) {
            let result = new FudgeCore.Vector2(_point.x * _rect.width / this.width + _rect.x, _point.y * _rect.height / this.height + _rect.y);
            return result;
        }
        getRect(_rectFrame) {
            return FudgeCore.Rectangle.GET(0, 0, this.width, this.height);
        }
    }
    FudgeCore.FramingFixed = FramingFixed;
    /**
     * Width and height of the resulting rectangle are fractions of those of the frame, scaled by normed values normWidth and normHeight.
     * Display should scale to fit the frame and points are scaled in the same ratio
     */
    class FramingScaled extends Framing {
        constructor() {
            super(...arguments);
            this.normWidth = 1.0;
            this.normHeight = 1.0;
        }
        setScale(_normWidth, _normHeight) {
            this.normWidth = _normWidth;
            this.normHeight = _normHeight;
        }
        getPoint(_pointInFrame, _rectFrame) {
            let result = new FudgeCore.Vector2(this.normWidth * (_pointInFrame.x - _rectFrame.x), this.normHeight * (_pointInFrame.y - _rectFrame.y));
            return result;
        }
        getPointInverse(_point, _rect) {
            let result = new FudgeCore.Vector2(_point.x / this.normWidth + _rect.x, _point.y / this.normHeight + _rect.y);
            return result;
        }
        getRect(_rectFrame) {
            return FudgeCore.Rectangle.GET(0, 0, this.normWidth * _rectFrame.width, this.normHeight * _rectFrame.height);
        }
    }
    FudgeCore.FramingScaled = FramingScaled;
    /**
     * The resulting rectangle fits into a margin given as fractions of the size of the frame given by normAnchor
     * plus an absolute padding given by pixelBorder. Display should fit into this.
     */
    class FramingComplex extends Framing {
        constructor() {
            super(...arguments);
            this.margin = { left: 0, top: 0, right: 0, bottom: 0 };
            this.padding = { left: 0, top: 0, right: 0, bottom: 0 };
        }
        getPoint(_pointInFrame, _rectFrame) {
            let result = new FudgeCore.Vector2(_pointInFrame.x - this.padding.left - this.margin.left * _rectFrame.width, _pointInFrame.y - this.padding.top - this.margin.top * _rectFrame.height);
            return result;
        }
        getPointInverse(_point, _rect) {
            let result = new FudgeCore.Vector2(_point.x + this.padding.left + this.margin.left * _rect.width, _point.y + this.padding.top + this.margin.top * _rect.height);
            return result;
        }
        getRect(_rectFrame) {
            if (!_rectFrame)
                return null;
            let minX = _rectFrame.x + this.margin.left * _rectFrame.width + this.padding.left;
            let minY = _rectFrame.y + this.margin.top * _rectFrame.height + this.padding.top;
            let maxX = _rectFrame.x + (1 - this.margin.right) * _rectFrame.width - this.padding.right;
            let maxY = _rectFrame.y + (1 - this.margin.bottom) * _rectFrame.height - this.padding.bottom;
            return FudgeCore.Rectangle.GET(minX, minY, maxX - minX, maxY - minY);
        }
        getMutator() {
            return { margin: this.margin, padding: this.padding };
        }
    }
    FudgeCore.FramingComplex = FramingComplex;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Representation of a vector2 as polar coordinates
     * ```plaintext
     *  ‚Üï- angle (Angle to the x-axis)
     *  -‚Üí Magnitude (Distance from the center)
     * ```
     */
    class Geo2 {
        constructor(_angle = 0, _magnitude = 1) {
            this.magnitude = 0;
            this.angle = 0;
            this.set(_angle, _magnitude);
        }
        /**
         * Set the properties of this instance at once
         */
        set(_angle = 0, _magnitude = 1) {
            this.magnitude = _magnitude;
            this.angle = _angle;
        }
        recycle() {
            this.set();
        }
        /**
         * Returns a pretty string representation
         */
        toString() {
            return `angle: ${this.angle.toPrecision(5)},  magnitude: ${this.magnitude.toPrecision(5)}`;
        }
    }
    FudgeCore.Geo2 = Geo2;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Representation of a vector3 as geographic coordinates as seen on a globe
     * ```plaintext
     * ‚Üê|‚Üí Longitude (Angle to the z-axis)
     *  ‚Üï- Latitude (Angle to the equator)
     *  -‚Üí Magnitude (Distance from the center)
     * ```
     */
    class Geo3 {
        constructor(_longitude = 0, _latitude = 0, _magnitude = 1) {
            this.magnitude = 0;
            this.latitude = 0;
            this.longitude = 0;
            this.set(_longitude, _latitude, _magnitude);
        }
        /**
         * Set the properties of this instance at once
         */
        set(_longitude = 0, _latitude = 0, _magnitude = 1) {
            this.magnitude = _magnitude;
            this.latitude = _latitude;
            this.longitude = _longitude;
        }
        recycle() {
            this.set();
        }
        /**
         * Returns a pretty string representation
         */
        toString() {
            return `longitude: ${this.longitude.toPrecision(5)}, latitude: ${this.latitude.toPrecision(5)}, magnitude: ${this.magnitude.toPrecision(5)}`;
        }
    }
    FudgeCore.Geo3 = Geo3;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    // From http://baagoe.com/en/RandomMusings/javascript/
    // Johannes Baag√∏e <baagoe@baagoe.com>, 2010
    function Mash() {
        let n = 0xefc8249d;
        let mash = function (data) {
            data = data.toString();
            for (let i = 0; i < data.length; i++) {
                n += data.charCodeAt(i);
                let h = 0.02519603282416938 * n;
                n = h >>> 0;
                h -= n;
                h *= n;
                n = h >>> 0;
                h -= n;
                n += h * 0x100000000; // 2^32
            }
            return (n >>> 0) * 2.3283064365386963e-10; // 2^-32
        };
        // mash.version = 'Mash 0.9';
        return mash;
    }
    FudgeCore.Mash = Mash;
    // From http://baagoe.com/en/RandomMusings/javascript/
    function LFIB4() {
        // George Marsaglia's LFIB4,
        //http://groups.google.com/group/sci.crypt/msg/eb4ddde782b17051
        let args = Array.prototype.slice.call(arguments);
        let k0 = 0, k1 = 58, k2 = 119, k3 = 178;
        let s = [];
        let mash = Mash();
        if (args.length === 0) {
            args = [+new Date()];
        }
        for (let j = 0; j < 256; j++) {
            s[j] = mash(" ");
            s[j] -= mash(" ") * 4.76837158203125e-7; // 2^-21
            if (s[j] < 0) {
                s[j] += 1;
            }
        }
        for (let i = 0; i < args.length; i++) {
            for (let j = 0; j < 256; j++) {
                s[j] -= mash(args[i]);
                s[j] -= mash(args[i]) * 4.76837158203125e-7; // 2^-21
                if (s[j] < 0) {
                    s[j] += 1;
                }
            }
        }
        mash = null;
        let random = function () {
            let x;
            k0 = (k0 + 1) & 255;
            k1 = (k1 + 1) & 255;
            k2 = (k2 + 1) & 255;
            k3 = (k3 + 1) & 255;
            x = s[k0] - s[k1];
            if (x < 0) {
                x += 1;
            }
            x -= s[k2];
            if (x < 0) {
                x += 1;
            }
            x -= s[k3];
            if (x < 0) {
                x += 1;
            }
            return s[k0] = x;
        };
        // random.uint32 = function () {
        //   return random() * 0x100000000 >>> 0; // 2^32
        // };
        // random.fract53 = random;
        // random.version = "LFIB4 0.9";
        // random.args = args;
        return random;
    }
    FudgeCore.LFIB4 = LFIB4;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Simple class for 3x3 matrix operations
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class Matrix3x3 extends FudgeCore.Mutable {
        constructor() {
            super();
            this.data = new Float32Array(9); // The data of the matrix.
            this.mutator = null; // prepared for optimization, keep mutator to reduce redundant calculation and for comparison. Set to null when data changes!
            this.recycle();
            this.resetCache();
        }
        //TODO: figure out what this is used for
        static PROJECTION(_width, _height) {
            let mtxResult = new Matrix3x3;
            mtxResult.data.set([
                2 / _width, 0, 0,
                0, -2 / _height, 0,
                -1, 1, 1
            ]);
            return mtxResult;
        }
        static IDENTITY() {
            const mtxResult = FudgeCore.Recycler.get(Matrix3x3);
            return mtxResult;
        }
        /**
         * Returns a matrix that translates coordinates along the x-, y- and z-axis according to the given {@link Vector2}.
         */
        static TRANSLATION(_translate) {
            const mtxResult = FudgeCore.Recycler.get(Matrix3x3);
            mtxResult.data.set([
                1, 0, 0,
                0, 1, 0,
                _translate.x, _translate.y, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates on the z-axis when multiplied by.
         * @param _angleInDegrees The value of the rotation.
         */
        static ROTATION(_angleInDegrees) {
            const mtxResult = FudgeCore.Recycler.get(Matrix3x3);
            let angleInRadians = _angleInDegrees * FudgeCore.Calc.deg2rad;
            let sin = Math.sin(angleInRadians);
            let cos = Math.cos(angleInRadians);
            mtxResult.data.set([
                cos, sin, 0,
                -sin, cos, 0,
                0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that scales coordinates along the x-, y- and z-axis according to the given {@link Vector2}
         */
        static SCALING(_scalar) {
            const mtxResult = FudgeCore.Recycler.get(Matrix3x3);
            mtxResult.data.set([
                _scalar.x, 0, 0,
                0, _scalar.y, 0,
                0, 0, 1
            ]);
            return mtxResult;
        }
        //#endregion
        static MULTIPLICATION(_mtxLeft, _mtxRight) {
            let a00 = _mtxLeft.data[0 * 3 + 0];
            let a01 = _mtxLeft.data[0 * 3 + 1];
            let a02 = _mtxLeft.data[0 * 3 + 2];
            let a10 = _mtxLeft.data[1 * 3 + 0];
            let a11 = _mtxLeft.data[1 * 3 + 1];
            let a12 = _mtxLeft.data[1 * 3 + 2];
            let a20 = _mtxLeft.data[2 * 3 + 0];
            let a21 = _mtxLeft.data[2 * 3 + 1];
            let a22 = _mtxLeft.data[2 * 3 + 2];
            let b00 = _mtxRight.data[0 * 3 + 0];
            let b01 = _mtxRight.data[0 * 3 + 1];
            let b02 = _mtxRight.data[0 * 3 + 2];
            let b10 = _mtxRight.data[1 * 3 + 0];
            let b11 = _mtxRight.data[1 * 3 + 1];
            let b12 = _mtxRight.data[1 * 3 + 2];
            let b20 = _mtxRight.data[2 * 3 + 0];
            let b21 = _mtxRight.data[2 * 3 + 1];
            let b22 = _mtxRight.data[2 * 3 + 2];
            let mtxResult = new Matrix3x3;
            mtxResult.data.set([
                b00 * a00 + b01 * a10 + b02 * a20,
                b00 * a01 + b01 * a11 + b02 * a21,
                b00 * a02 + b01 * a12 + b02 * a22,
                b10 * a00 + b11 * a10 + b12 * a20,
                b10 * a01 + b11 * a11 + b12 * a21,
                b10 * a02 + b11 * a12 + b12 * a22,
                b20 * a00 + b21 * a10 + b22 * a20,
                b20 * a01 + b21 * a11 + b22 * a21,
                b20 * a02 + b21 * a12 + b22 * a22
            ]);
            return mtxResult;
        }
        /**
         * Computes and returns the inverse of a passed matrix.
         * @param _mtx The matrix to compute the inverse of.
         */
        static INVERSION(_mtx) {
            let m = _mtx.data;
            let m00 = m[0 * 3 + 0];
            let m01 = m[0 * 3 + 1];
            let m02 = m[0 * 3 + 2];
            let m10 = m[1 * 3 + 0];
            let m11 = m[1 * 3 + 1];
            let m12 = m[1 * 3 + 2];
            let m20 = m[2 * 3 + 0];
            let m21 = m[2 * 3 + 1];
            let m22 = m[2 * 3 + 2];
            let d = 1 /
                (m00 * (m11 * m22 - m21 * m12) -
                    m01 * (m10 * m22 - m12 * m20) +
                    m02 * (m10 * m21 - m11 * m20));
            const mtxResult = FudgeCore.Recycler.get(Matrix3x3);
            mtxResult.data.set([
                d * (m11 * m22 - m21 * m12),
                d * (m02 * m21 - m01 * m22),
                d * (m01 * m12 - m02 * m11),
                d * (m12 * m20 - m10 * m22),
                d * (m00 * m22 - m02 * m20),
                d * (m10 * m02 - m00 * m12),
                d * (m10 * m21 - m20 * m11),
                d * (m20 * m01 - m00 * m21),
                d * (m00 * m11 - m10 * m01) // [8]
            ]);
            return mtxResult;
        }
        /**
         * - get: return a vector representation of the translation {@link Vector2}.
         * **Caution!** Use immediately, since the vector is going to be reused by Recycler. Create a clone to keep longer and manipulate.
         * - set: effect the matrix ignoring its rotation and scaling
         */
        get translation() {
            if (!this.vectors.translation)
                this.vectors.translation = new FudgeCore.Vector2(this.data[6], this.data[7]);
            return this.vectors.translation; // .clone;
        }
        set translation(_translation) {
            this.data.set(_translation.get(), 6);
            // no full cache reset required
            this.vectors.translation = _translation;
            this.mutator = null;
        }
        /**
         * - get: a copy of the calculated rotation {@link Vector2}
         * - set: effect the matrix
         */
        get rotation() {
            if (!this.vectors.rotation)
                this.vectors.rotation = this.getEulerAngle();
            return this.vectors.rotation;
        }
        set rotation(_rotation) {
            this.mutate({ "rotation": _rotation });
            this.resetCache();
        }
        /**
         * - get: return a vector representation of the scale {@link Vector3}.
         * **Caution!** Do not manipulate result, instead create a clone!
         * - set: effect the matrix
         */
        get scaling() {
            if (!this.vectors.scaling)
                this.vectors.scaling = new FudgeCore.Vector2(Math.hypot(this.data[0], this.data[1]) * (this.data[0] < 0 ? -1 : 1), Math.hypot(this.data[3], this.data[4]) * (this.data[4] < 0 ? -1 : 1));
            return this.vectors.scaling; // .clone;
        }
        set scaling(_scaling) {
            this.mutate({ "scaling": _scaling });
            this.resetCache();
        }
        /**
         * Return a copy of this
         */
        get clone() {
            let mtxClone = FudgeCore.Recycler.get(Matrix3x3);
            mtxClone.set(this);
            return mtxClone;
        }
        /**
         * Resets the matrix to the identity-matrix and clears cache. Used by the recycler to reset.
         */
        recycle() {
            this.data = new Float32Array([
                1, 0, 0,
                0, 1, 0,
                0, 0, 1
            ]);
            this.resetCache();
        }
        /**
         * Resets the matrix to the identity-matrix and clears cache.
         */
        reset() {
            this.recycle();
        }
        //#region Translation
        /**
         * Add a translation by the given {@link Vector2} to this matrix
         */
        translate(_by) {
            const mtxResult = Matrix3x3.MULTIPLICATION(this, Matrix3x3.TRANSLATION(_by));
            // TODO: possible optimization, translation may alter mutator instead of deleting it.
            this.set(mtxResult);
            FudgeCore.Recycler.store(mtxResult);
        }
        /**
         * Add a translation along the x-Axis by the given amount to this matrix
         */
        translateX(_x) {
            this.data[6] += _x;
            this.mutator = null;
            this.vectors.translation = null;
        }
        /**
         * Add a translation along the y-Axis by the given amount to this matrix
         */
        translateY(_y) {
            this.data[7] += _y;
            this.mutator = null;
            this.vectors.translation = null;
        }
        //#endregion
        //#region Scaling
        /**
         * Add a scaling by the given {@link Vector2} to this matrix
         */
        scale(_by) {
            const mtxResult = Matrix3x3.MULTIPLICATION(this, Matrix3x3.SCALING(_by));
            this.set(mtxResult);
            FudgeCore.Recycler.store(mtxResult);
        }
        /**
         * Add a scaling along the x-Axis by the given amount to this matrix
         */
        scaleX(_by) {
            let vector = FudgeCore.Recycler.get(FudgeCore.Vector2);
            vector.set(_by, 1);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
        }
        /**
         * Add a scaling along the y-Axis by the given amount to this matrix
         */
        scaleY(_by) {
            let vector = FudgeCore.Recycler.get(FudgeCore.Vector2);
            vector.set(1, _by);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
        }
        //#endregion
        //#region Rotation
        /**
         * Adds a rotation around the z-Axis to this matrix
         */
        rotate(_angleInDegrees) {
            const mtxResult = Matrix3x3.MULTIPLICATION(this, Matrix3x3.ROTATION(_angleInDegrees));
            this.set(mtxResult);
            FudgeCore.Recycler.store(mtxResult);
        }
        //#endregion
        //#region Transformation
        /**
         * Multiply this matrix with the given matrix
         */
        multiply(_mtxRight) {
            let mtxResult = Matrix3x3.MULTIPLICATION(this, _mtxRight);
            this.set(mtxResult);
            FudgeCore.Recycler.store(mtxResult);
            this.mutator = null;
        }
        //#endregion
        //#region Transfer
        /**
         * Calculates and returns the euler-angles representing the current rotation of this matrix
         */
        getEulerAngle() {
            let scaling = this.scaling;
            let s0 = this.data[0] / scaling.x;
            let s1 = this.data[1] / scaling.x;
            let s3 = this.data[3] / scaling.y;
            let s4 = this.data[4] / scaling.y;
            let xSkew = Math.atan2(-s3, s4);
            let ySkew = Math.atan2(s0, s1);
            let sy = Math.hypot(s0, s1); // probably 2. param should be this.data[4] / scaling.y
            let rotation;
            if (!(sy > 1e-6))
                rotation = ySkew;
            else
                rotation = xSkew;
            rotation *= FudgeCore.Calc.rad2deg;
            return rotation;
        }
        /**
         * Sets the elements of this matrix to the values of the given matrix
         */
        set(_mtxTo) {
            // this.data = _to.get();
            this.data.set(_mtxTo.data);
            this.resetCache();
        }
        toString() {
            return `∆í.Matrix3x3(translation: ${this.translation.toString()}, rotation: ${this.rotation.toString()}, scaling: ${this.scaling.toString()}`;
        }
        /**
         * Return the elements of this matrix as a Float32Array
         */
        get() {
            return new Float32Array(this.data);
        }
        serialize() {
            // this.getMutator();
            let serialization = {
                translation: this.translation.serialize(),
                rotation: this.rotation,
                scaling: this.scaling.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            let mutator = {
                translation: await this.translation.deserialize(_serialization.translation),
                rotation: _serialization.rotation,
                scaling: await this.scaling.deserialize(_serialization.scaling)
            };
            this.mutate(mutator);
            return this;
        }
        getMutator() {
            if (this.mutator)
                return this.mutator;
            let mutator = {
                translation: this.translation.getMutator(),
                rotation: this.rotation,
                scaling: this.scaling.getMutator()
            };
            // cache mutator
            this.mutator = mutator;
            return mutator;
        }
        async mutate(_mutator) {
            let oldTranslation = this.translation;
            let oldRotation = this.rotation;
            let oldScaling = this.scaling;
            let newTranslation = _mutator["translation"];
            let newRotation = _mutator["rotation"];
            let newScaling = _mutator["scaling"];
            let vectors = { translation: oldTranslation, rotation: oldRotation, scaling: oldScaling };
            if (newTranslation) {
                vectors.translation = new FudgeCore.Vector2(newTranslation.x != undefined ? newTranslation.x : oldTranslation.x, newTranslation.y != undefined ? newTranslation.y : oldTranslation.y);
            }
            vectors.rotation = (newRotation == undefined) ? oldRotation : newRotation;
            if (newScaling) {
                vectors.scaling = new FudgeCore.Vector2(newScaling.x != undefined ? newScaling.x : oldScaling.x, newScaling.y != undefined ? newScaling.y : oldScaling.y);
            }
            // TODO: possible performance optimization when only one or two components change, then use old matrix instead of IDENTITY and transform by differences/quotients
            let mtxResult = Matrix3x3.IDENTITY();
            if (vectors.translation)
                mtxResult.translate(vectors.translation);
            if (vectors.rotation) {
                mtxResult.rotate(vectors.rotation);
            }
            if (vectors.scaling)
                mtxResult.scale(vectors.scaling);
            this.set(mtxResult);
            this.vectors = vectors;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = {};
            if (_mutator.translation)
                types.translation = "Vector2";
            if (_mutator.rotation != undefined)
                types.rotation = "number";
            if (_mutator.scaling)
                types.scaling = "Vector2";
            return types;
        }
        reduceMutator(_mutator) { }
        resetCache() {
            this.vectors = { translation: null, rotation: null, scaling: null };
            this.mutator = null;
        }
    }
    FudgeCore.Matrix3x3 = Matrix3x3;
    //#endregion
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Stores a 4x4 transformation matrix and provides operations for it.
     * ```plaintext
     * [ 0, 1, 2, 3 ] ‚Üê row vector x
     * [ 4, 5, 6, 7 ] ‚Üê row vector y
     * [ 8, 9,10,11 ] ‚Üê row vector z
     * [12,13,14,15 ] ‚Üê translation
     *            ‚Üë  homogeneous column
     * ```
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Matrix4x4 extends FudgeCore.Mutable {
        constructor() {
            super();
            this.data = new Float32Array(16); // The data of the matrix.
            this.mutator = null; // prepared for optimization, keep mutator to reduce redundant calculation and for comparison. Set to null when data changes!
            this.#eulerAngles = FudgeCore.Vector3.ZERO();
            this.#vectors = { translation: FudgeCore.Vector3.ZERO(), rotation: FudgeCore.Vector3.ZERO(), scaling: FudgeCore.Vector3.ZERO() };
            this.recycle();
            this.resetCache();
        }
        #eulerAngles;
        #vectors;
        //#region STATICS
        /**
         * Retrieve a new identity matrix
         */
        static IDENTITY() {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            return mtxResult;
        }
        /**
         * Constructs a new matrix according to the translation, rotation and scaling {@link Vector3}s given
         */
        static CONSTRUCTION(_vectors) {
            let result = Matrix4x4.IDENTITY();
            result.mutate(_vectors);
            return result;
        }
        /**
         * Computes and returns the product of two passed matrices.
         * @param _mtxLeft The matrix to multiply.
         * @param _mtxRight The matrix to multiply by.
         */
        static MULTIPLICATION(_mtxLeft, _mtxRight) {
            let a = _mtxLeft.data;
            let b = _mtxRight.data;
            // let matrix: Matrix4x4 = new Matrix4x4();
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            let a00 = a[0 * 4 + 0];
            let a01 = a[0 * 4 + 1];
            let a02 = a[0 * 4 + 2];
            let a03 = a[0 * 4 + 3];
            let a10 = a[1 * 4 + 0];
            let a11 = a[1 * 4 + 1];
            let a12 = a[1 * 4 + 2];
            let a13 = a[1 * 4 + 3];
            let a20 = a[2 * 4 + 0];
            let a21 = a[2 * 4 + 1];
            let a22 = a[2 * 4 + 2];
            let a23 = a[2 * 4 + 3];
            let a30 = a[3 * 4 + 0];
            let a31 = a[3 * 4 + 1];
            let a32 = a[3 * 4 + 2];
            let a33 = a[3 * 4 + 3];
            let b00 = b[0 * 4 + 0];
            let b01 = b[0 * 4 + 1];
            let b02 = b[0 * 4 + 2];
            let b03 = b[0 * 4 + 3];
            let b10 = b[1 * 4 + 0];
            let b11 = b[1 * 4 + 1];
            let b12 = b[1 * 4 + 2];
            let b13 = b[1 * 4 + 3];
            let b20 = b[2 * 4 + 0];
            let b21 = b[2 * 4 + 1];
            let b22 = b[2 * 4 + 2];
            let b23 = b[2 * 4 + 3];
            let b30 = b[3 * 4 + 0];
            let b31 = b[3 * 4 + 1];
            let b32 = b[3 * 4 + 2];
            let b33 = b[3 * 4 + 3];
            mtxResult.data.set([
                b00 * a00 + b01 * a10 + b02 * a20 + b03 * a30,
                b00 * a01 + b01 * a11 + b02 * a21 + b03 * a31,
                b00 * a02 + b01 * a12 + b02 * a22 + b03 * a32,
                b00 * a03 + b01 * a13 + b02 * a23 + b03 * a33,
                b10 * a00 + b11 * a10 + b12 * a20 + b13 * a30,
                b10 * a01 + b11 * a11 + b12 * a21 + b13 * a31,
                b10 * a02 + b11 * a12 + b12 * a22 + b13 * a32,
                b10 * a03 + b11 * a13 + b12 * a23 + b13 * a33,
                b20 * a00 + b21 * a10 + b22 * a20 + b23 * a30,
                b20 * a01 + b21 * a11 + b22 * a21 + b23 * a31,
                b20 * a02 + b21 * a12 + b22 * a22 + b23 * a32,
                b20 * a03 + b21 * a13 + b22 * a23 + b23 * a33,
                b30 * a00 + b31 * a10 + b32 * a20 + b33 * a30,
                b30 * a01 + b31 * a11 + b32 * a21 + b33 * a31,
                b30 * a02 + b31 * a12 + b32 * a22 + b33 * a32,
                b30 * a03 + b31 * a13 + b32 * a23 + b33 * a33
            ]);
            return mtxResult;
        }
        /**
         * Computes and returns the transpose of a passed matrix.
         */
        static TRANSPOSE(_mtx) {
            let m = _mtx.data;
            let result = FudgeCore.Recycler.get(Matrix4x4);
            result.data.set([
                m[0], m[4], m[8], m[12],
                m[1], m[5], m[9], m[13],
                m[2], m[6], m[10], m[14],
                m[3], m[7], m[11], m[15]
            ]);
            return result;
        }
        /**
         * Computes and returns the inverse of a passed matrix.
         * @param _mtx The matrix to compute the inverse of.
         */
        static INVERSION(_mtx) {
            let m = _mtx.data;
            let m00 = m[0 * 4 + 0];
            let m01 = m[0 * 4 + 1];
            let m02 = m[0 * 4 + 2];
            let m03 = m[0 * 4 + 3];
            let m10 = m[1 * 4 + 0];
            let m11 = m[1 * 4 + 1];
            let m12 = m[1 * 4 + 2];
            let m13 = m[1 * 4 + 3];
            let m20 = m[2 * 4 + 0];
            let m21 = m[2 * 4 + 1];
            let m22 = m[2 * 4 + 2];
            let m23 = m[2 * 4 + 3];
            let m30 = m[3 * 4 + 0];
            let m31 = m[3 * 4 + 1];
            let m32 = m[3 * 4 + 2];
            let m33 = m[3 * 4 + 3];
            let tmp0 = m22 * m33;
            let tmp1 = m32 * m23;
            let tmp2 = m12 * m33;
            let tmp3 = m32 * m13;
            let tmp4 = m12 * m23;
            let tmp5 = m22 * m13;
            let tmp6 = m02 * m33;
            let tmp7 = m32 * m03;
            let tmp8 = m02 * m23;
            let tmp9 = m22 * m03;
            let tmp10 = m02 * m13;
            let tmp11 = m12 * m03;
            let tmp12 = m20 * m31;
            let tmp13 = m30 * m21;
            let tmp14 = m10 * m31;
            let tmp15 = m30 * m11;
            let tmp16 = m10 * m21;
            let tmp17 = m20 * m11;
            let tmp18 = m00 * m31;
            let tmp19 = m30 * m01;
            let tmp20 = m00 * m21;
            let tmp21 = m20 * m01;
            let tmp22 = m00 * m11;
            let tmp23 = m10 * m01;
            let t0 = (tmp0 * m11 + tmp3 * m21 + tmp4 * m31) -
                (tmp1 * m11 + tmp2 * m21 + tmp5 * m31);
            let t1 = (tmp1 * m01 + tmp6 * m21 + tmp9 * m31) -
                (tmp0 * m01 + tmp7 * m21 + tmp8 * m31);
            let t2 = (tmp2 * m01 + tmp7 * m11 + tmp10 * m31) -
                (tmp3 * m01 + tmp6 * m11 + tmp11 * m31);
            let t3 = (tmp5 * m01 + tmp8 * m11 + tmp11 * m21) -
                (tmp4 * m01 + tmp9 * m11 + tmp10 * m21);
            let d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            mtxResult.data.set([
                d * t0,
                d * t1,
                d * t2,
                d * t3,
                d * ((tmp1 * m10 + tmp2 * m20 + tmp5 * m30) - (tmp0 * m10 + tmp3 * m20 + tmp4 * m30)),
                d * ((tmp0 * m00 + tmp7 * m20 + tmp8 * m30) - (tmp1 * m00 + tmp6 * m20 + tmp9 * m30)),
                d * ((tmp3 * m00 + tmp6 * m10 + tmp11 * m30) - (tmp2 * m00 + tmp7 * m10 + tmp10 * m30)),
                d * ((tmp4 * m00 + tmp9 * m10 + tmp10 * m20) - (tmp5 * m00 + tmp8 * m10 + tmp11 * m20)),
                d * ((tmp12 * m13 + tmp15 * m23 + tmp16 * m33) - (tmp13 * m13 + tmp14 * m23 + tmp17 * m33)),
                d * ((tmp13 * m03 + tmp18 * m23 + tmp21 * m33) - (tmp12 * m03 + tmp19 * m23 + tmp20 * m33)),
                d * ((tmp14 * m03 + tmp19 * m13 + tmp22 * m33) - (tmp15 * m03 + tmp18 * m13 + tmp23 * m33)),
                d * ((tmp17 * m03 + tmp20 * m13 + tmp23 * m23) - (tmp16 * m03 + tmp21 * m13 + tmp22 * m23)),
                d * ((tmp14 * m22 + tmp17 * m32 + tmp13 * m12) - (tmp16 * m32 + tmp12 * m12 + tmp15 * m22)),
                d * ((tmp20 * m32 + tmp12 * m02 + tmp19 * m22) - (tmp18 * m22 + tmp21 * m32 + tmp13 * m02)),
                d * ((tmp18 * m12 + tmp23 * m32 + tmp15 * m02) - (tmp22 * m32 + tmp14 * m02 + tmp19 * m12)),
                d * ((tmp22 * m22 + tmp16 * m02 + tmp21 * m12) - (tmp20 * m12 + tmp23 * m22 + tmp17 * m02)) // [15]
            ]);
            return mtxResult;
        }
        /**
         * Computes and returns a matrix with the given translation, its z-axis pointing directly at the given target,
         * and a minimal angle between its y-axis and the given up-{@link Vector3}, respetively calculating yaw and pitch.
         * The pitch may be restricted to the up-vector to only calculate yaw.
         */
        static LOOK_AT(_translation, _target, _up = FudgeCore.Vector3.Y(), _restrict = false) {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            let zAxis = FudgeCore.Vector3.DIFFERENCE(_target, _translation);
            zAxis.normalize();
            let xAxis = FudgeCore.Vector3.NORMALIZATION(FudgeCore.Vector3.CROSS(_up, zAxis));
            let yAxis = _restrict ? _up : FudgeCore.Vector3.NORMALIZATION(FudgeCore.Vector3.CROSS(zAxis, xAxis));
            zAxis = _restrict ? FudgeCore.Vector3.NORMALIZATION(FudgeCore.Vector3.CROSS(xAxis, _up)) : zAxis;
            mtxResult.data.set([
                xAxis.x, xAxis.y, xAxis.z, 0,
                yAxis.x, yAxis.y, yAxis.z, 0,
                zAxis.x, zAxis.y, zAxis.z, 0,
                _translation.x,
                _translation.y,
                _translation.z,
                1
            ]);
            return mtxResult;
        }
        /**
         * Computes and returns a matrix with the given translation, its y-axis matching the given up-{@link Vector3}
         * and its z-axis facing towards the given target at a minimal angle, respetively calculating yaw only.
         */
        // public static SHOW_TO(_translation: Vector3, _target: Vector3, _up: Vector3 = Vector3.Y()): Matrix4x4 {
        //   const mtxResult: Matrix4x4 = Recycler.get(Matrix4x4);
        //   let zAxis: Vector3 = Vector3.DIFFERENCE(_target, _translation);
        //   zAxis.normalize();
        //   let xAxis: Vector3 = Vector3.NORMALIZATION(Vector3.CROSS(_up, zAxis));
        //   // let yAxis: Vector3 = Vector3.NORMALIZATION(Vector3.CROSS(zAxis, xAxis));
        //   zAxis = Vector3.NORMALIZATION(Vector3.CROSS(xAxis, _up));
        //   mtxResult.data.set(
        //     [
        //       xAxis.x, xAxis.y, xAxis.z, 0,
        //       _up.x, _up.y, _up.z, 0,
        //       zAxis.x, zAxis.y, zAxis.z, 0,
        //       _translation.x,
        //       _translation.y,
        //       _translation.z,
        //       1
        //     ]);
        //   return mtxResult;
        // }
        /**
         * Returns a matrix that translates coordinates along the x-, y- and z-axis according to the given {@link Vector3}.
         */
        static TRANSLATION(_translate) {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            mtxResult.data.set([
                1, 0, 0, 0,
                0, 1, 0, 0,
                0, 0, 1, 0,
                _translate.x, _translate.y, _translate.z, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates on the x-axis when multiplied by.
         */
        static ROTATION_X(_angleInDegrees) {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            let angleInRadians = _angleInDegrees * FudgeCore.Calc.deg2rad;
            let sin = Math.sin(angleInRadians);
            let cos = Math.cos(angleInRadians);
            mtxResult.data.set([
                1, 0, 0, 0,
                0, cos, sin, 0,
                0, -sin, cos, 0,
                0, 0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates on the y-axis when multiplied by.
         */
        static ROTATION_Y(_angleInDegrees) {
            let mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            let angleInRadians = _angleInDegrees * FudgeCore.Calc.deg2rad;
            let sin = Math.sin(angleInRadians);
            let cos = Math.cos(angleInRadians);
            mtxResult.data.set([
                cos, 0, -sin, 0,
                0, 1, 0, 0,
                sin, 0, cos, 0,
                0, 0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates on the z-axis when multiplied by.
         */
        static ROTATION_Z(_angleInDegrees) {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            let angleInRadians = _angleInDegrees * FudgeCore.Calc.deg2rad;
            let sin = Math.sin(angleInRadians);
            let cos = Math.cos(angleInRadians);
            mtxResult.data.set([
                cos, sin, 0, 0,
                -sin, cos, 0, 0,
                0, 0, 1, 0,
                0, 0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that rotates coordinates when multiplied by, using the angles given.
         * Rotation occurs around the axis in the order Z-Y-X .
         */
        static ROTATION(_eulerAnglesInDegrees) {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            let anglesInRadians = FudgeCore.Vector3.SCALE(_eulerAnglesInDegrees, FudgeCore.Calc.deg2rad);
            let sinX = Math.sin(anglesInRadians.x);
            let cosX = Math.cos(anglesInRadians.x);
            let sinY = Math.sin(anglesInRadians.y);
            let cosY = Math.cos(anglesInRadians.y);
            let sinZ = Math.sin(anglesInRadians.z);
            let cosZ = Math.cos(anglesInRadians.z);
            mtxResult.data.set([
                /**/ cosZ * cosY, /**/ sinZ * cosY, /**/ -sinY, 0,
                cosZ * sinY * sinX - sinZ * cosX, sinZ * sinY * sinX + cosZ * cosX, /**/ cosY * sinX, 0,
                cosZ * sinY * cosX + sinZ * sinX, sinZ * sinY * cosX - cosZ * sinX, /**/ cosY * cosX, 0,
                0, 0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a matrix that scales coordinates along the x-, y- and z-axis according to the given {@link Vector3}
         */
        static SCALING(_scalar) {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            mtxResult.data.set([
                _scalar.x, 0, 0, 0,
                0, _scalar.y, 0, 0,
                0, 0, _scalar.z, 0,
                0, 0, 0, 1
            ]);
            return mtxResult;
        }
        /**
         * Returns a representation of the given matrix relative to the given base.
         * If known, pass the inverse of the base to avoid unneccesary calculation
         */
        static RELATIVE(_mtx, _mtxBase, _mtxInverse) {
            if (_mtxInverse)
                return Matrix4x4.MULTIPLICATION(_mtxInverse, _mtx);
            let mtxInverse = Matrix4x4.INVERSION(_mtxBase);
            let mtxResult = Matrix4x4.MULTIPLICATION(mtxInverse, _mtx);
            FudgeCore.Recycler.store(mtxInverse);
            return mtxResult;
        }
        //#endregion
        //#region PROJECTIONS
        /**
         * Computes and returns a matrix that applies perspective to an object, if its transform is multiplied by it.
         * @param _aspect The aspect ratio between width and height of projectionspace.(Default = canvas.clientWidth / canvas.ClientHeight)
         * @param _fieldOfViewInDegrees The field of view in Degrees. (Default = 45)
         * @param _near The near clipspace border on the z-axis.
         * @param _far The far clipspace border on the z-axis.
         * @param _direction The plane on which the fieldOfView-Angle is given
         */
        static PROJECTION_CENTRAL(_aspect, _fieldOfViewInDegrees, _near, _far, _direction) {
            //TODO: camera looks down negative z-direction, should be positive
            let fieldOfViewInRadians = _fieldOfViewInDegrees * FudgeCore.Calc.deg2rad;
            let f = Math.tan(0.5 * (Math.PI - fieldOfViewInRadians));
            let rangeInv = 1.0 / (_near - _far);
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            mtxResult.data.set([
                f, 0, 0, 0,
                0, f, 0, 0,
                0, 0, (_near + _far) * rangeInv, -1,
                0, 0, _near * _far * rangeInv * 2, 0
            ]);
            if (_direction == FudgeCore.FIELD_OF_VIEW.DIAGONAL) {
                _aspect = Math.sqrt(_aspect);
                mtxResult.data[0] = f / _aspect;
                mtxResult.data[5] = f * _aspect;
            }
            else if (_direction == FudgeCore.FIELD_OF_VIEW.VERTICAL)
                mtxResult.data[0] = f / _aspect;
            else //FOV_DIRECTION.HORIZONTAL
                mtxResult.data[5] = f * _aspect;
            // HACK: matrix should look in positive z-direction, preferably the matrix should be calculated like that right away
            mtxResult.rotateY(180);
            return mtxResult;
        }
        /**
         * Computes and returns a matrix that applies orthographic projection to an object, if its transform is multiplied by it.
         * @param _left The positionvalue of the projectionspace's left border.
         * @param _right The positionvalue of the projectionspace's right border.
         * @param _bottom The positionvalue of the projectionspace's bottom border.
         * @param _top The positionvalue of the projectionspace's top border.
         * @param _near The positionvalue of the projectionspace's near border.
         * @param _far The positionvalue of the projectionspace's far border
         */
        static PROJECTION_ORTHOGRAPHIC(_left, _right, _bottom, _top, _near = -400, _far = 400) {
            const mtxResult = FudgeCore.Recycler.get(Matrix4x4);
            mtxResult.data.set([
                2 / (_right - _left), 0, 0, 0,
                0, -2 / (_top - _bottom), 0, 0,
                0, 0, 2 / (_far - _near), 0,
                (_left + _right) / (_left - _right),
                (_bottom + _top) / (_bottom - _top),
                (_near + _far) / (_near - _far),
                1
            ]);
            return mtxResult;
        }
        //#endregion
        //#region  Accessors
        /**
         * - get: return a vector representation of the translation {@link Vector3}.
         * **Caution!** Use immediately and readonly, since the vector is going to be reused by Recycler. Create a clone to keep longer and manipulate.
         * - set: effect the matrix ignoring its rotation and scaling
         */
        set translation(_translation) {
            this.data.set(_translation.get(), 12);
            // no full cache reset required
            if (this.vectors.translation)
                this.vectors.translation.set(_translation.x, _translation.y, _translation.z);
            else
                this.vectors.translation = _translation.clone;
            this.mutator = null;
        }
        get translation() {
            if (!this.vectors.translation) {
                this.vectors.translation = this.#vectors.translation;
                this.vectors.translation.set(this.data[12], this.data[13], this.data[14]);
            }
            return this.vectors.translation.clone;
        }
        /**
         * - get: return a vector representation of the rotation {@link Vector3}.
         * **Caution!** Use immediately and readonly, since the vector is going to be reused by Recycler. Create a clone to keep longer and manipulate.
         * - set: effect the matrix
         */
        get rotation() {
            if (!this.vectors.rotation)
                this.vectors.rotation = this.getEulerAngles().clone;
            return this.vectors.rotation; //.clone;
        }
        set rotation(_rotation) {
            this.mutate({ "rotation": _rotation });
            this.resetCache();
        }
        /**
         * - get: return a vector representation of the scaling {@link Vector3}.
         * **Caution!** Use immediately and readonly, since the vector is going to be reused by Recycler. Create a clone to keep longer and manipulate.
         * - set: effect the matrix
         */
        get scaling() {
            if (!this.vectors.scaling) {
                this.vectors.scaling = this.#vectors.scaling;
                this.vectors.scaling.set(Math.hypot(this.data[0], this.data[1], this.data[2]), //* (this.data[0] < 0 ? -1 : 1),
                Math.hypot(this.data[4], this.data[5], this.data[6]), //* (this.data[5] < 0 ? -1 : 1),
                Math.hypot(this.data[8], this.data[9], this.data[10]) // * (this.data[10] < 0 ? -1 : 1)
                );
            }
            return this.vectors.scaling; // .clone;
        }
        set scaling(_scaling) {
            this.mutate({ "scaling": _scaling });
            this.resetCache();
        }
        /**
         * Return a copy of this
         */
        get clone() {
            let mtxClone = FudgeCore.Recycler.get(Matrix4x4);
            mtxClone.set(this);
            return mtxClone;
        }
        //#endregion
        /**
         * Resets the matrix to the identity-matrix and clears cache. Used by the recycler to reset.
         */
        recycle() {
            this.data.set([
                1, 0, 0, 0,
                0, 1, 0, 0,
                0, 0, 1, 0,
                0, 0, 0, 1
            ]);
            this.resetCache();
        }
        /**
         * Resets the matrix to the identity-matrix and clears cache.
         */
        reset() {
            this.recycle();
        }
        //#region Rotation
        /**
         * Rotate this matrix by given {@link Vector3} in the order Z, Y, X. Right hand rotation is used, thumb points in axis direction, fingers curling indicate rotation
         * The rotation is appended to already applied transforms, thus multiplied from the right. Set _fromLeft to true to switch and put it in front.
         */
        rotate(_by, _fromLeft = false) {
            // this.rotateZ(_by.z, _fromLeft);
            // this.rotateY(_by.y, _fromLeft);
            // this.rotateX(_by.x, _fromLeft);
            let mtxRotation = Matrix4x4.ROTATION(_by);
            this.multiply(mtxRotation, _fromLeft);
            FudgeCore.Recycler.store(mtxRotation);
        }
        transpose() {
            let matrix = this.data;
            this.data.set([
                matrix[0], matrix[4], matrix[8], matrix[12],
                matrix[1], matrix[5], matrix[9], matrix[13],
                matrix[2], matrix[6], matrix[10], matrix[14],
                matrix[3], matrix[7], matrix[11], matrix[15]
            ]);
            return this;
        }
        inverse() {
            let m = this.data;
            let m00 = m[0 * 4 + 0];
            let m01 = m[0 * 4 + 1];
            let m02 = m[0 * 4 + 2];
            let m03 = m[0 * 4 + 3];
            let m10 = m[1 * 4 + 0];
            let m11 = m[1 * 4 + 1];
            let m12 = m[1 * 4 + 2];
            let m13 = m[1 * 4 + 3];
            let m20 = m[2 * 4 + 0];
            let m21 = m[2 * 4 + 1];
            let m22 = m[2 * 4 + 2];
            let m23 = m[2 * 4 + 3];
            let m30 = m[3 * 4 + 0];
            let m31 = m[3 * 4 + 1];
            let m32 = m[3 * 4 + 2];
            let m33 = m[3 * 4 + 3];
            let tmp0 = m22 * m33;
            let tmp1 = m32 * m23;
            let tmp2 = m12 * m33;
            let tmp3 = m32 * m13;
            let tmp4 = m12 * m23;
            let tmp5 = m22 * m13;
            let tmp6 = m02 * m33;
            let tmp7 = m32 * m03;
            let tmp8 = m02 * m23;
            let tmp9 = m22 * m03;
            let tmp10 = m02 * m13;
            let tmp11 = m12 * m03;
            let tmp12 = m20 * m31;
            let tmp13 = m30 * m21;
            let tmp14 = m10 * m31;
            let tmp15 = m30 * m11;
            let tmp16 = m10 * m21;
            let tmp17 = m20 * m11;
            let tmp18 = m00 * m31;
            let tmp19 = m30 * m01;
            let tmp20 = m00 * m21;
            let tmp21 = m20 * m01;
            let tmp22 = m00 * m11;
            let tmp23 = m10 * m01;
            let t0 = (tmp0 * m11 + tmp3 * m21 + tmp4 * m31) -
                (tmp1 * m11 + tmp2 * m21 + tmp5 * m31);
            let t1 = (tmp1 * m01 + tmp6 * m21 + tmp9 * m31) -
                (tmp0 * m01 + tmp7 * m21 + tmp8 * m31);
            let t2 = (tmp2 * m01 + tmp7 * m11 + tmp10 * m31) -
                (tmp3 * m01 + tmp6 * m11 + tmp11 * m31);
            let t3 = (tmp5 * m01 + tmp8 * m11 + tmp11 * m21) -
                (tmp4 * m01 + tmp9 * m11 + tmp10 * m21);
            let d = 1.0 / (m00 * t0 + m10 * t1 + m20 * t2 + m30 * t3);
            // let matrix: Matrix4x4 = new Matrix4x4;
            const matrix = FudgeCore.Recycler.get(Matrix4x4);
            matrix.data.set([
                d * t0,
                d * t1,
                d * t2,
                d * t3,
                d * ((tmp1 * m10 + tmp2 * m20 + tmp5 * m30) - (tmp0 * m10 + tmp3 * m20 + tmp4 * m30)),
                d * ((tmp0 * m00 + tmp7 * m20 + tmp8 * m30) - (tmp1 * m00 + tmp6 * m20 + tmp9 * m30)),
                d * ((tmp3 * m00 + tmp6 * m10 + tmp11 * m30) - (tmp2 * m00 + tmp7 * m10 + tmp10 * m30)),
                d * ((tmp4 * m00 + tmp9 * m10 + tmp10 * m20) - (tmp5 * m00 + tmp8 * m10 + tmp11 * m20)),
                d * ((tmp12 * m13 + tmp15 * m23 + tmp16 * m33) - (tmp13 * m13 + tmp14 * m23 + tmp17 * m33)),
                d * ((tmp13 * m03 + tmp18 * m23 + tmp21 * m33) - (tmp12 * m03 + tmp19 * m23 + tmp20 * m33)),
                d * ((tmp14 * m03 + tmp19 * m13 + tmp22 * m33) - (tmp15 * m03 + tmp18 * m13 + tmp23 * m33)),
                d * ((tmp17 * m03 + tmp20 * m13 + tmp23 * m23) - (tmp16 * m03 + tmp21 * m13 + tmp22 * m23)),
                d * ((tmp14 * m22 + tmp17 * m32 + tmp13 * m12) - (tmp16 * m32 + tmp12 * m12 + tmp15 * m22)),
                d * ((tmp20 * m32 + tmp12 * m02 + tmp19 * m22) - (tmp18 * m22 + tmp21 * m32 + tmp13 * m02)),
                d * ((tmp18 * m12 + tmp23 * m32 + tmp15 * m02) - (tmp22 * m32 + tmp14 * m02 + tmp19 * m12)),
                d * ((tmp22 * m22 + tmp16 * m02 + tmp21 * m12) - (tmp20 * m12 + tmp23 * m22 + tmp17 * m02)) // [15]
            ]);
            return matrix;
        }
        /**
         * Adds a rotation around the x-axis to this matrix
         */
        rotateX(_angleInDegrees, _fromLeft = false) {
            let mtxRotation = Matrix4x4.ROTATION_X(_angleInDegrees);
            this.multiply(mtxRotation, _fromLeft);
            FudgeCore.Recycler.store(mtxRotation);
        }
        /**
         * Adds a rotation around the y-axis to this matrix
         */
        rotateY(_angleInDegrees, _fromLeft = false) {
            let mtxRotation = Matrix4x4.ROTATION_Y(_angleInDegrees);
            this.multiply(mtxRotation, _fromLeft);
            FudgeCore.Recycler.store(mtxRotation);
        }
        /**
         * Adds a rotation around the z-axis to this matrix
         */
        rotateZ(_angleInDegrees, _fromLeft = false) {
            let mtxRotation = Matrix4x4.ROTATION_Z(_angleInDegrees);
            this.multiply(mtxRotation, _fromLeft);
            FudgeCore.Recycler.store(mtxRotation);
        }
        /**
         * Adjusts the rotation of this matrix to point the z-axis directly at the given target and tilts it to accord with the given up-{@link Vector3},
         * respectively calculating yaw and pitch. If no up-{@link Vector3} is given, the previous up-{@link Vector3} is used.
         * The pitch may be restricted to the up-vector to only calculate yaw.
         */
        lookAt(_target, _up, _restrict = false) {
            _up = _up ? FudgeCore.Vector3.NORMALIZATION(_up) : FudgeCore.Vector3.NORMALIZATION(this.getY());
            const mtxResult = Matrix4x4.LOOK_AT(this.translation, _target, _up, _restrict);
            mtxResult.scale(this.scaling);
            this.set(mtxResult);
            FudgeCore.Recycler.store(mtxResult);
        }
        /**
         * Same as {@link Matrix4x4.lookAt}, but optimized and needs testing
         */
        // TODO: testing lookat that really just rotates the matrix rather than creating a new one
        // public lookAtRotate(_target: Vector3, _up?: Vector3, _preserveScaling: boolean = true): void {
        //   if (!_up)
        //     _up = this.getY();
        //   let scaling: Vector3 = this.scaling;
        //   let difference: Vector3 = Vector3.DIFFERENCE(_target, this.translation);
        //   difference.normalize();
        //   let cos: number = Vector3.DOT(Vector3.NORMALIZATION(this.getZ()), difference);
        //   let sin: number = Vector3.DOT(Vector3.NORMALIZATION(this.getX()), difference);
        //   // console.log(sin, cos);
        //   let mtxRotation: Matrix4x4 = Recycler.get(Matrix4x4);
        //   mtxRotation.data.set([
        //     cos, 0, -sin, 0,
        //     0, 1, 0, 0,
        //     sin, 0, cos, 0,
        //     0, 0, 0, 1
        //   ]);
        //   this.multiply(mtxRotation, false);
        //   cos = Vector3.DOT(Vector3.NORMALIZATION(this.getZ()), difference);
        //   sin = -Vector3.DOT(Vector3.NORMALIZATION(this.getY()), difference);
        //   // console.log(sin, cos);
        //   mtxRotation.data.set([
        //     1, 0, 0, 0,
        //     0, cos, sin, 0,
        //     0, -sin, cos, 0,
        //     0, 0, 0, 1
        //   ]);
        //   this.multiply(mtxRotation, false);
        //   this.scaling = scaling;
        //   Recycler.store(mtxRotation);
        // }
        //#endregion
        //#region Translation
        /**
         * Add a translation by the given {@link Vector3} to this matrix.
         * If _local is true, translation occurs according to the current rotation and scaling of this matrix,
         * according to the parent otherwise.
         */
        translate(_by, _local = true) {
            if (_local) {
                let mtxTranslation = Matrix4x4.TRANSLATION(_by);
                this.multiply(mtxTranslation);
                FudgeCore.Recycler.store(mtxTranslation);
            }
            else {
                this.data[12] += _by.x;
                this.data[13] += _by.y;
                this.data[14] += _by.z;
                this.mutator = null;
                if (this.vectors.translation)
                    FudgeCore.Recycler.store(this.vectors.translation);
                this.vectors.translation = null;
            }
            // const matrix: Matrix4x4 = Matrix4x4.MULTIPLICATION(this, Matrix4x4.TRANSLATION(_by));
            // // TODO: possible optimization, translation may alter mutator instead of deleting it.
            // this.set(matrix);
            // Recycler.store(matrix);
        }
        /**
         * Add a translation along the x-axis by the given amount to this matrix
         */
        translateX(_x, _local = true) {
            let translation = FudgeCore.Vector3.X(_x);
            this.translate(translation, _local);
            FudgeCore.Recycler.store(translation);
        }
        /**
         * Add a translation along the y-axis by the given amount to this matrix
         */
        translateY(_y, _local = true) {
            let translation = FudgeCore.Vector3.Y(_y);
            this.translate(translation, _local);
            FudgeCore.Recycler.store(translation);
        }
        /**
         * Add a translation along the z-axis by the given amount to this matrix
         */
        translateZ(_z, _local = true) {
            let translation = FudgeCore.Vector3.Z(_z);
            this.translate(translation, _local);
            FudgeCore.Recycler.store(translation);
        }
        //#endregion
        //#region Scaling
        /**
         * Add a scaling by the given {@link Vector3} to this matrix
         */
        scale(_by) {
            const mtxResult = Matrix4x4.MULTIPLICATION(this, Matrix4x4.SCALING(_by));
            this.set(mtxResult);
            FudgeCore.Recycler.store(mtxResult);
        }
        /**
         * Add a scaling along the x-axis by the given amount to this matrix
         */
        scaleX(_by) {
            let vector = FudgeCore.Recycler.get(FudgeCore.Vector3);
            vector.set(_by, 1, 1);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
        }
        /**
         * Add a scaling along the y-axis by the given amount to this matrix
         */
        scaleY(_by) {
            let vector = FudgeCore.Recycler.get(FudgeCore.Vector3);
            vector.set(1, _by, 1);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
        }
        /**
         * Add a scaling along the z-axis by the given amount to this matrix
         */
        scaleZ(_by) {
            let vector = FudgeCore.Recycler.get(FudgeCore.Vector3);
            vector.set(1, 1, _by);
            this.scale(vector);
            FudgeCore.Recycler.store(vector);
        }
        //#endregion
        //#region Transformation
        /**
         * Multiply this matrix with the given matrix
         */
        multiply(_matrix, _fromLeft = false) {
            const mtxResult = _fromLeft ? Matrix4x4.MULTIPLICATION(_matrix, this) : Matrix4x4.MULTIPLICATION(this, _matrix);
            this.set(mtxResult);
            FudgeCore.Recycler.store(mtxResult);
        }
        //#endregion
        //#region Transfer
        // public getEulerAnglesNew(): Vector3 {
        //   let scaling: Vector3 = this.scaling;
        //   let thetaX: number, thetaY: number, thetaZ: number;
        //   let r02: number = this.data[2] / scaling.z;
        //   let r11: number = this.data[5] / scaling.y;
        //   if (r02 < 1) {
        //     if (r02 > -1) {
        //       thetaY = Math.asin(-r02);
        //       thetaZ = Math.atan2(this.data[1] / scaling.y, this.data[0] / scaling.x);
        //       thetaX = Math.atan2(this.data[9] / scaling.z, this.data[10] / scaling.z);
        //     }
        //     else {
        //       thetaY = Math.PI / 2;
        //       thetaZ = -Math.atan2(this.data[6] / scaling.y, r11);
        //       thetaX = 0;
        //     }
        //   }
        //   else {
        //     thetaY = -Math.PI / 2;
        //     thetaZ = Math.atan2(-this.data[6] / scaling.y, r11);
        //     thetaX = 0;
        //   }
        //   this.#eulerAngles.set(-thetaX, thetaY, thetaZ);
        //   this.#eulerAngles.scale(Mathematic.rad2deg);
        //   return this.#eulerAngles;
        // }
        /**
         * Calculates and returns the euler-angles representing the current rotation of this matrix.
         */
        getEulerAngles() {
            let scaling = this.scaling;
            let s0 = this.data[0] / scaling.x;
            let s1 = this.data[1] / scaling.x;
            let s2 = this.data[2] / scaling.x;
            let s6 = this.data[6] / scaling.y;
            let s10 = this.data[10] / scaling.z;
            let sy = Math.hypot(s0, s1); // probably 2. param should be this.data[4] / scaling.y
            let singular = sy < 1e-6; // If
            let x1, y1, z1;
            let x2, y2, z2;
            if (!singular) {
                x1 = Math.atan2(s6, s10);
                y1 = Math.atan2(-s2, sy);
                z1 = Math.atan2(s1, s0);
                x2 = Math.atan2(-s6, -s10);
                y2 = Math.atan2(-s2, -sy);
                z2 = Math.atan2(-s1, -s0);
                if (Math.abs(x2) + Math.abs(y2) + Math.abs(z2) < Math.abs(x1) + Math.abs(y1) + Math.abs(z1)) {
                    x1 = x2;
                    y1 = y2;
                    z1 = z2;
                }
            }
            else {
                x1 = Math.atan2(-this.data[9] / scaling.z, this.data[5] / scaling.y);
                y1 = Math.atan2(-this.data[2] / scaling.x, sy);
                z1 = 0;
            }
            this.#eulerAngles.set(x1, y1, z1);
            this.#eulerAngles.scale(FudgeCore.Calc.rad2deg);
            return this.#eulerAngles;
        }
        /**
         * Sets the elements of this matrix to the values of the given matrix
         */
        set(_mtxTo) {
            if (_mtxTo instanceof Matrix4x4)
                this.data.set(_mtxTo.data);
            else
                this.data.set(_mtxTo);
            this.resetCache();
        }
        toString() {
            return `∆í.Matrix4x4(translation: ${this.translation.toString()}, rotation: ${this.rotation.toString()}, scaling: ${this.scaling.toString()}`;
        }
        /**
         * Return the elements of this matrix as a Float32Array
         */
        get() {
            // TODO: optimization, it shouldn't always return a copy, since this bloats memory
            return new Float32Array(this.data);
        }
        /**
         * Return cardinal x-axis
         */
        getX() {
            let result = FudgeCore.Recycler.get(FudgeCore.Vector3);
            result.set(this.data[0], this.data[1], this.data[2]);
            return result;
        }
        /**
         * Return cardinal y-axis
         */
        getY() {
            let result = FudgeCore.Recycler.get(FudgeCore.Vector3);
            result.set(this.data[4], this.data[5], this.data[6]);
            return result;
        }
        /**
         * Return cardinal z-axis
         */
        getZ() {
            let result = FudgeCore.Recycler.get(FudgeCore.Vector3);
            result.set(this.data[8], this.data[9], this.data[10]);
            return result;
        }
        /**
         * Swaps the two cardinal axis and reverses the third, effectively rotating the transform 180 degrees around one and 90 degrees around a second axis
         */
        swapXY() {
            let temp = [this.data[0], this.data[1], this.data[2]]; // store x-axis
            this.data.set([this.data[4], this.data[5], this.data[6]], 0); // overwrite x-axis with y-axis
            this.data.set(temp, 4); // overwrite Y with temp
            this.data.set([-this.data[8], -this.data[9], -this.data[10]], 8); // reverse z-axis
        }
        /**
         * Swaps the two cardinal axis and reverses the third, effectively rotating the transform 180 degrees around one and 90 degrees around a second axis
         */
        swapXZ() {
            let temp = [this.data[0], this.data[1], this.data[2]]; // store x-axis
            this.data.set([this.data[8], this.data[9], this.data[10]], 0); // overwrite x-axis with z-axis
            this.data.set(temp, 8); // overwrite Z with temp
            this.data.set([-this.data[4], -this.data[5], -this.data[6]], 4); // reverse y-axis
        }
        /**
         * Swaps the two cardinal axis and reverses the third, effectively rotating the transform 180 degrees around one and 90 degrees around a second axis
         */
        swapYZ() {
            let temp = [this.data[4], this.data[5], this.data[6]]; // store y-axis
            this.data.set([this.data[8], this.data[9], this.data[10]], 4); // overwrite y-axis with z-axis
            this.data.set(temp, 8); // overwrite Z with temp
            this.data.set([-this.data[0], -this.data[1], -this.data[2]], 0); // reverse x-axis
        }
        /**
         * Returns the tranlation from this matrix to the target matrix
         */
        getTranslationTo(_mtxTarget) {
            let difference = FudgeCore.Recycler.get(FudgeCore.Vector3);
            difference.set(_mtxTarget.data[12] - this.data[12], _mtxTarget.data[13] - this.data[13], _mtxTarget.data[14] - this.data[14]);
            return difference;
        }
        serialize() {
            // this.getMutator();
            let serialization = {
                translation: this.translation.serialize(),
                rotation: this.rotation.serialize(),
                scaling: this.scaling.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            let mutator = {
                translation: await this.translation.deserialize(_serialization.translation),
                rotation: await this.rotation.deserialize(_serialization.rotation),
                scaling: await this.scaling.deserialize(_serialization.scaling)
            };
            this.mutate(mutator);
            return this;
        }
        getMutator() {
            if (this.mutator)
                return this.mutator;
            let mutator = {
                translation: this.translation.getMutator(),
                rotation: this.rotation.getMutator(),
                scaling: this.scaling.getMutator()
            };
            // cache mutator
            this.mutator = mutator;
            return mutator;
        }
        async mutate(_mutator) {
            let oldTranslation = this.translation;
            let oldRotation = this.rotation;
            let oldScaling = this.scaling;
            // The new values are not necessarily Vector3 objects but could be simple mutator objects.
            // They are only guaranteed to be instance of Vector3 when set by Matrix4x4 setters, but not when for example set by the animation system.
            let newTranslation = _mutator["translation"];
            let newRotation = _mutator["rotation"];
            let newScaling = _mutator["scaling"];
            let vectors = { translation: oldTranslation, rotation: oldRotation, scaling: oldScaling };
            if (newTranslation) {
                vectors.translation = vectors.translation || this.#vectors.translation;
                vectors.translation.set(newTranslation.x != undefined ? newTranslation.x : oldTranslation.x, newTranslation.y != undefined ? newTranslation.y : oldTranslation.y, newTranslation.z != undefined ? newTranslation.z : oldTranslation.z);
            }
            if (newRotation) {
                if ("w" in newRotation) {
                    // This rotation is a quaternion (mutator). Get the euler angles.
                    // TODO: maybe make Quaternion the standard for rotation
                    const rotation = FudgeCore.Recycler.get(FudgeCore.Quaternion);
                    rotation.set([newRotation.x, newRotation.y, newRotation.z, newRotation.w]);
                    newRotation = rotation.eulerAngles;
                    FudgeCore.Recycler.store(rotation);
                }
                vectors.rotation = vectors.rotation || this.#vectors.rotation;
                vectors.rotation.set(newRotation.x != undefined ? newRotation.x : oldRotation.x, newRotation.y != undefined ? newRotation.y : oldRotation.y, newRotation.z != undefined ? newRotation.z : oldRotation.z);
            }
            if (newScaling) {
                vectors.scaling = vectors.scaling || this.#vectors.scaling;
                vectors.scaling.set(newScaling.x != undefined ? newScaling.x : oldScaling.x, newScaling.y != undefined ? newScaling.y : oldScaling.y, newScaling.z != undefined ? newScaling.z : oldScaling.z);
            }
            // TODO: possible performance optimization when only one or two components change, then use old matrix instead of IDENTITY and transform by differences/quotients
            let mtxResult = Matrix4x4.IDENTITY();
            if (vectors.translation)
                mtxResult.translate(vectors.translation);
            // problem: previous rotation might have been calculated back as a scaling and vice versa. Applying again might double the effect...
            if (vectors.rotation)
                mtxResult.rotate(vectors.rotation);
            if (vectors.scaling)
                mtxResult.scale(vectors.scaling);
            this.set(mtxResult);
            this.vectors = vectors;
            FudgeCore.Recycler.store(mtxResult);
        }
        getMutatorAttributeTypes(_mutator) {
            let types = {};
            if (_mutator.translation)
                types.translation = "Vector3";
            if (_mutator.rotation)
                types.rotation = "Vector3";
            if (_mutator.scaling)
                types.scaling = "Vector3";
            return types;
        }
        reduceMutator(_mutator) { }
        resetCache() {
            this.vectors = { translation: null, rotation: null, scaling: null };
            this.mutator = null;
        }
    }
    FudgeCore.Matrix4x4 = Matrix4x4;
    //#endregion
})(FudgeCore || (FudgeCore = {}));
/**
 * Baseclass for Noise2, Noise3 and Noise4
 * @authors Jirka Dell'Oro-Friedl, HFU, 2021
 * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
 */
var FudgeCore;
/**
 * Baseclass for Noise2, Noise3 and Noise4
 * @authors Jirka Dell'Oro-Friedl, HFU, 2021
 * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
 */
(function (FudgeCore) {
    class Noise {
        constructor(_random = Math.random) {
            this.perm = new Uint8Array(512);
            this.permMod12 = new Uint8Array(512);
            const p = new Uint8Array(256);
            for (let i = 0; i < 256; i++)
                p[i] = i;
            let n;
            let q;
            for (let i = 255; i > 0; i--) {
                n = Math.floor((i + 1) * _random());
                q = p[i];
                p[i] = p[n];
                p[n] = q;
            }
            for (let i = 0; i < 512; i++) {
                this.perm[i] = p[i & 255];
                this.permMod12[i] = this.perm[i] % 12;
            }
        }
    }
    FudgeCore.Noise = Noise;
})(FudgeCore || (FudgeCore = {}));
///<reference path="./Noise.ts"/>
/**
 * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
 * done by Jirka Dell'Oro-Friedl, HFU, 2021
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 */
var FudgeCore;
///<reference path="./Noise.ts"/>
/**
 * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
 * done by Jirka Dell'Oro-Friedl, HFU, 2021
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 */
(function (FudgeCore) {
    class Noise2 extends FudgeCore.Noise {
        constructor(_random = Math.random) {
            super(_random);
            this.#sample = null;
            this.sample = (_x, _y) => {
                return this.#sample(_x, _y);
            };
            this.#sample = (_x, _y) => {
                // Skew the input space to determine which simplex cell we're in
                const s = (_x + _y) * 0.5 * (Math.sqrt(3.0) - 1.0); // Hairy factor for 2D
                const i = Math.floor(_x + s);
                const j = Math.floor(_y + s);
                const t = (i + j) * Noise2.offset;
                const X0 = i - t; // Unskew the cell origin back to (x,y) space
                const Y0 = j - t;
                const x0 = _x - X0; // The x,y distances from the cell origin
                const y0 = _y - Y0;
                // Determine which simplex we are in.
                const i1 = x0 > y0 ? 1 : 0;
                const j1 = x0 > y0 ? 0 : 1;
                // Offset:numbers for corners
                const x1 = x0 - i1 + Noise2.offset;
                const y1 = y0 - j1 + Noise2.offset;
                const x2 = x0 - 1.0 + 2.0 * Noise2.offset;
                const y2 = y0 - 1.0 + 2.0 * Noise2.offset;
                // Work out the hashed gradient indices of the three simplex corners
                const ii = i & 255;
                const jj = j & 255;
                const g0 = Noise2.gradient[this.permMod12[ii + this.perm[jj]]];
                const g1 = Noise2.gradient[this.permMod12[ii + i1 + this.perm[jj + j1]]];
                const g2 = Noise2.gradient[this.permMod12[ii + 1 + this.perm[jj + 1]]];
                // Calculate the contribution from the three corners
                const t0 = 0.5 - x0 * x0 - y0 * y0;
                const n0 = t0 < 0 ? 0.0 : Math.pow(t0, 4) * (g0[0] * x0 + g0[1] * y0);
                const t1 = 0.5 - x1 * x1 - y1 * y1;
                const n1 = t1 < 0 ? 0.0 : Math.pow(t1, 4) * (g1[0] * x1 + g1[1] * y1);
                const t2 = 0.5 - x2 * x2 - y2 * y2;
                const n2 = t2 < 0 ? 0.0 : Math.pow(t2, 4) * (g2[0] * x2 + g2[1] * y2);
                // Add contributions from each corner to get the final noise value.
                // The result is scaled to return values in the interval [-1, 1]
                return 70.14805770653952 * (n0 + n1 + n2);
            };
        }
        #sample;
    }
    Noise2.offset = (3.0 - Math.sqrt(3.0)) / 6.0;
    Noise2.gradient = [[1, 1], [-1, 1], [1, -1], [-1, -1], [1, 0], [-1, 0], [1, 0], [-1, 0], [0, 1], [0, -1], [0, 1], [0, -1]];
    FudgeCore.Noise2 = Noise2;
})(FudgeCore || (FudgeCore = {}));
/**
 * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
 * done by Jirka Dell'Oro-Friedl, HFU, 2021
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 */
var FudgeCore;
/**
 * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
 * done by Jirka Dell'Oro-Friedl, HFU, 2021
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 */
(function (FudgeCore) {
    // TODO: Test
    class Noise3 extends FudgeCore.Noise {
        constructor(_random = Math.random) {
            super(_random);
            this.#sample = null;
            this.sample = (_x, _y, _z) => {
                return this.#sample(_x, _y, _z);
            };
            this.#sample = (_x, _y, _z) => {
                // Skew the input space to determine which simplex cell we're in
                const s = (_x + _y + _z) / 3.0; // Very nice and simple skew factor for 3D
                const i = Math.floor(_x + s);
                const j = Math.floor(_y + s);
                const k = Math.floor(_z + s);
                const t = (i + j + k) * Noise3.offset;
                const X0 = i - t; // Unskew the cell origin back to (x,y,z) space
                const Y0 = j - t;
                const Z0 = k - t;
                const x0 = _x - X0; // The x,y,z distances from the cell origin
                const y0 = _y - Y0;
                const z0 = _z - Z0;
                // Deterine which simplex we are in
                let i1, j1, k1 // Offsets for second corner of simplex in (i,j,k) coords
                ;
                let i2, j2, k2 // Offsets for third corner of simplex in (i,j,k) coords
                ;
                if (x0 >= y0) {
                    if (y0 >= z0) {
                        i1 = i2 = j2 = 1;
                        j1 = k1 = k2 = 0;
                    }
                    else if (x0 >= z0) {
                        i1 = i2 = k2 = 1;
                        j1 = k1 = j2 = 0;
                    }
                    else {
                        k1 = i2 = k2 = 1;
                        i1 = j1 = j2 = 0;
                    }
                }
                else {
                    if (y0 < z0) {
                        k1 = j2 = k2 = 1;
                        i1 = j1 = i2 = 0;
                    }
                    else if (x0 < z0) {
                        j1 = j2 = k2 = 1;
                        i1 = k1 = i2 = 0;
                    }
                    else {
                        j1 = i2 = j2 = 1;
                        i1 = k1 = k2 = 0;
                    }
                }
                const x1 = x0 - i1 + Noise3.offset; // Offsets for second corner in (x,y,z) coords
                const y1 = y0 - j1 + Noise3.offset;
                const z1 = z0 - k1 + Noise3.offset;
                const x2 = x0 - i2 + 2.0 * Noise3.offset; // Offsets for third corner in (x,y,z) coords
                const y2 = y0 - j2 + 2.0 * Noise3.offset;
                const z2 = z0 - k2 + 2.0 * Noise3.offset;
                const x3 = x0 - 1.0 + 3.0 * Noise3.offset; // Offsets for last corner in (x,y,z) coords
                const y3 = y0 - 1.0 + 3.0 * Noise3.offset;
                const z3 = z0 - 1.0 + 3.0 * Noise3.offset;
                // Work :numberut the hashed gradient indices of the four simplex corners
                const ii = i & 255;
                const jj = j & 255;
                const kk = k & 255;
                const g0 = Noise3.gradient[this.permMod12[ii + this.perm[jj + this.perm[kk]]]];
                const g1 = Noise3.gradient[this.permMod12[ii + i1 + this.perm[jj + j1 + this.perm[kk + k1]]]];
                const g2 = Noise3.gradient[this.permMod12[ii + i2 + this.perm[jj + j2 + this.perm[kk + k2]]]];
                const g3 = Noise3.gradient[this.permMod12[ii + 1 + this.perm[jj + 1 + this.perm[kk + 1]]]];
                // Calcu:numberate the contribution from the four corners
                const t0 = 0.5 - x0 * x0 - y0 * y0 - z0 * z0;
                const n0 = t0 < 0
                    ? 0.0
                    : Math.pow(t0, 4) * (g0[0] * x0 + g0[1] * y0 + g0[2] * z0);
                const t1 = 0.5 - x1 * x1 - y1 * y1 - z1 * z1;
                const n1 = t1 < 0
                    ? 0.0
                    : Math.pow(t1, 4) * (g1[0] * x1 + g1[1] * y1 + g1[2] * z1);
                const t2 = 0.5 - x2 * x2 - y2 * y2 - z2 * z2;
                const n2 = t2 < 0
                    ? 0.0
                    : Math.pow(t2, 4) * (g2[0] * x2 + g2[1] * y2 + g2[2] * z2);
                const t3 = 0.5 - x3 * x3 - y3 * y3 - z3 * z3;
                const n3 = t3 < 0
                    ? 0.0
                    : Math.pow(t3, 4) * (g3[0] * x3 + g3[1] * y3 + g3[2] * z3);
                // Add contributions from each corner to get the final noise value.
                // The result is scaled to stay just inside [-1,1]
                return 94.68493150681972 * (n0 + n1 + n2 + n3);
            };
        }
        #sample;
    }
    Noise3.offset = 1.0 / 6.0;
    Noise3.gradient = [[1, 1, 0], [-1, 1, 0], [1, -1, 0], [-1, -1, 0], [1, 0, 1], [-1, 0, 1], [1, 0, -1], [-1, 0, -1], [0, 1, 1], [0, -1, -1], [0, 1, -1], [0, -1, -1]
    ];
    FudgeCore.Noise3 = Noise3;
})(FudgeCore || (FudgeCore = {}));
/**
 * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
 * done by Jirka Dell'Oro-Friedl, HFU, 2021
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 */
var FudgeCore;
/**
 * This is an adaption of https://www.npmjs.com/package/fast-simplex-noise
 * done by Jirka Dell'Oro-Friedl, HFU, 2021
 *
 * Based on example code by Stefan Gustavson (stegu@itn.liu.se).
 * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).
 * Better rank ordering method by Stefan Gustavson in 2012.
 *
 * This code was placed in the public domain by its original author,
 * Stefan Gustavson. You may use it as you see fit, but
 * attribution is appreciated.
 */
(function (FudgeCore) {
    // TODO: Test
    class Noise4 extends FudgeCore.Noise {
        constructor(_random = Math.random) {
            super(_random);
            this.#sample = null;
            this.sample = (_x, _y, _z, _w) => {
                return this.#sample(_x, _y, _z, _w);
            };
            this.#sample = (x, y, z, w) => {
                // Skew the (x,y,z,w) space to determine which cell of 24 simplices we're in
                const s = (x + y + z + w) * (Math.sqrt(5.0) - 1.0) / 4.0; // Factor for 4D skewing
                const i = Math.floor(x + s);
                const j = Math.floor(y + s);
                const k = Math.floor(z + s);
                const l = Math.floor(w + s);
                const t = (i + j + k + l) * Noise4.offset; // Factor for 4D unskewing
                const X0 = i - t; // Unskew the cell origin back to (x,y,z,w) space
                const Y0 = j - t;
                const Z0 = k - t;
                const W0 = l - t;
                const x0 = x - X0; // The x,y,z,w distances from the cell origin
                const y0 = y - Y0;
                const z0 = z - Z0;
                const w0 = w - W0;
                // To find out which of the 24 possible simplices we're in, we need to determine the
                // magnitude ordering of x0, y0, z0 and w0. Six pair-wise comparisons are performed between
                // each possible pair of the four coordinates, and the results are used to rank the numbers.
                let rankx = 0;
                let ranky = 0;
                let rankz = 0;
                let rankw = 0;
                if (x0 > y0)
                    rankx++;
                else
                    ranky++;
                if (x0 > z0)
                    rankx++;
                else
                    rankz++;
                if (x0 > w0)
                    rankx++;
                else
                    rankw++;
                if (y0 > z0)
                    ranky++;
                else
                    rankz++;
                if (y0 > w0)
                    ranky++;
                else
                    rankw++;
                if (z0 > w0)
                    rankz++;
                else
                    rankw++;
                // simplex[c] is a 4-vector with the numbers 0, 1, 2 and 3 in some order.
                // Many values of c will never occur, since e.g. x>y>z>w makes x<z, y<w and x<w
                // impossible. Only the 24 indices which have non-zero entries make any sense.
                // We use a thresholding to set the coordinates in turn from the largest magnitude.
                // Rank 3 denotes the largest coordinate.
                const i1 = rankx >= 3 ? 1 : 0;
                const j1 = ranky >= 3 ? 1 : 0;
                const k1 = rankz >= 3 ? 1 : 0;
                const l1 = rankw >= 3 ? 1 : 0;
                // Rank : 2 denotes the second largest coordinate.
                const i2 = rankx >= 2 ? 1 : 0;
                const j2 = ranky >= 2 ? 1 : 0;
                const k2 = rankz >= 2 ? 1 : 0;
                const l2 = rankw >= 2 ? 1 : 0;
                // Rank : 1 denotes the second smallest coordinate.
                const i3 = rankx >= 1 ? 1 : 0;
                const j3 = ranky >= 1 ? 1 : 0;
                const k3 = rankz >= 1 ? 1 : 0;
                const l3 = rankw >= 1 ? 1 : 0;
                // The fifth corner has all coordinate offsets = 1, so no need to compute that.
                const x1 = x0 - i1 + Noise4.offset; // Offsets for second corner in (x,y,z,w) coords
                const y1 = y0 - j1 + Noise4.offset;
                const z1 = z0 - k1 + Noise4.offset;
                const w1 = w0 - l1 + Noise4.offset;
                const x2 = x0 - i2 + 2.0 * Noise4.offset; // Offsets for third corner in (x,y,z,w) coords
                const y2 = y0 - j2 + 2.0 * Noise4.offset;
                const z2 = z0 - k2 + 2.0 * Noise4.offset;
                const w2 = w0 - l2 + 2.0 * Noise4.offset;
                const x3 = x0 - i3 + 3.0 * Noise4.offset; // Offsets for fourth corner in (x,y,z,w) coords
                const y3 = y0 - j3 + 3.0 * Noise4.offset;
                const z3 = z0 - k3 + 3.0 * Noise4.offset;
                const w3 = w0 - l3 + 3.0 * Noise4.offset;
                const x4 = x0 - 1.0 + 4.0 * Noise4.offset; // Offsets for last corner in (x,y,z,w) coords
                const y4 = y0 - 1.0 + 4.0 * Noise4.offset;
                const z4 = z0 - 1.0 + 4.0 * Noise4.offset;
                const w4 = w0 - 1.0 + 4.0 * Noise4.offset;
                // Work out the hashed gradient indices of the five simplex corners
                const ii = i & 255;
                const jj = j & 255;
                const kk = k & 255;
                const ll = l & 255;
                const g0 = Noise4.gradient[this.perm[ii + this.perm[jj + this.perm[kk + this.perm[ll]]]] %
                    32];
                const g1 = Noise4.gradient[this.perm[ii + i1 + this.perm[jj + j1 + this.perm[kk + k1 + this.perm[ll + l1]]]] % 32];
                const g2 = Noise4.gradient[this.perm[ii + i2 + this.perm[jj + j2 + this.perm[kk + k2 + this.perm[ll + l2]]]] % 32];
                const g3 = Noise4.gradient[this.perm[ii + i3 + this.perm[jj + j3 + this.perm[kk + k3 + this.perm[ll + l3]]]] % 32];
                const g4 = Noise4.gradient[this.perm[ii + 1 + this.perm[jj + 1 + this.perm[kk + 1 + this.perm[ll + 1]]]] % 32];
                // Calculate the contribution from the five corners
                const t0 = 0.5 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;
                const n0 = t0 < 0
                    ? 0.0
                    : Math.pow(t0, 4) * (g0[0] * x0 + g0[1] * y0 + g0[2] * z0 + g0[3] * w0);
                const t1 = 0.5 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;
                const n1 = t1 < 0
                    ? 0.0
                    : Math.pow(t1, 4) * (g1[0] * x1 + g1[1] * y1 + g1[2] * z1 + g1[3] * w1);
                const t2 = 0.5 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;
                const n2 = t2 < 0
                    ? 0.0
                    : Math.pow(t2, 4) * (g2[0] * x2 + g2[1] * y2 + g2[2] * z2 + g2[3] * w2);
                const t3 = 0.5 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;
                const n3 = t3 < 0
                    ? 0.0
                    : Math.pow(t3, 4) * (g3[0] * x3 + g3[1] * y3 + g3[2] * z3 + g3[3] * w3);
                const t4 = 0.5 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;
                const n4 = t4 < 0
                    ? 0.0
                    : Math.pow(t4, 4) * (g4[0] * x4 + g4[1] * y4 + g4[2] * z4 + g4[3] * w4);
                // Sum up and scale the result to cover the range [-1,1]
                return 72.37855765153665 * (n0 + n1 + n2 + n3 + n4);
            };
        }
        #sample;
    }
    Noise4.offset = (5.0 - Math.sqrt(5.0)) / 20.0;
    Noise4.gradient = [[0, 1, 1, 1], [0, 1, 1, -1], [0, 1, -1, 1], [0, 1, -1, -1], [0, -1, 1, 1], [0, -1, 1, -1], [0, -1, -1, 1], [0, -1, -1, -1], [1, 0, 1, 1], [1, 0, 1, -1], [1, 0, -1, 1], [1, 0, -1, -1], [-1, 0, 1, 1], [-1, 0, 1, -1], [-1, 0, -1, 1], [-1, 0, -1, -1], [1, 1, 0, 1], [1, 1, 0, -1], [1, -1, 0, 1], [1, -1, 0, -1], [-1, 1, 0, 1], [-1, 1, 0, -1], [-1, -1, 0, 1], [-1, -1, 0, -1], [1, 1, 1, 0], [1, 1, -1, 0], [1, -1, 1, 0], [1, -1, -1, 0], [-1, 1, 1, 0], [-1, 1, -1, 0], [-1, -1, 1, 0], [-1, -1, -1, 0]];
    FudgeCore.Noise4 = Noise4;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
      * Storing and manipulating rotations in the form of quaternions.
      * Constructed out of the 4 components: (x, y, z, w). Mathematical notation: w + xi + yj + zk.
      * A Quaternion can be described with an axis and angle: (x, y, z) = sin(angle/2)*axis; w = cos(angle/2).
      * roll: x, pitch: y, yaw: z. Note that operations are adapted to work with vectors where y is up and z is forward.
      * @authors Matthias Roming, HFU, 2023 | Marko Fehrenbach, HFU, 2020 | Jonas Plotzky, HFU, 2023
      */
    class Quaternion extends FudgeCore.Mutable {
        constructor(_x = 0, _y = 0, _z = 0, _w = 1) {
            super();
            this.data = new Float32Array(4); // The data of the quaternion (x, y, z, w).
            this.mutator = null; // prepared for optimization, keep mutator to reduce redundant calculation and for comparison. Set to null when data changes!
            this.#eulerAngles = null; // euler angle representation of this quaternion in degrees.
            this.data.set([_x, _y, _z, _w]);
        }
        #eulerAngles; // euler angle representation of this quaternion in degrees.
        //#region STATICS
        /**
         * Retrieve a new identity quaternion
         */
        static IDENTITY() {
            const result = FudgeCore.Recycler.get(Quaternion);
            return result;
        }
        /**
         * Constructs a new quaternion from the euler angles given
         */
        static FROM_EULER_ANGLES(_eulerAngles, _order = "ZYX") {
            const result = FudgeCore.Recycler.get(Quaternion);
            result.eulerAngles = _eulerAngles;
            return result;
        }
        /**
         * Computes and returns the product of two passed quaternions.
         * @param _mtxLeft The matrix to multiply.
         * @param _mtxRight The matrix to multiply by.
         */
        static MULTIPLICATION(_qLeft, _qRight) {
            const result = _qLeft.clone;
            result.multiply(_qRight);
            return result;
        }
        /**
         * Computes and returns the inverse of a passed quaternion.
         * @param _mtx The quaternion to compute the inverse of.
         */
        static INVERSION(_q) {
            const result = _q.clone;
            result.inverse();
            return result;
        }
        /**
         * Computes and returns the conjugate of a passed quaternion.
         * @param _mtx The quaternion to compute the conjugate of.
         */
        static CONJUGATION(_q) {
            const result = _q.clone;
            result.conjugate();
            return result;
        }
        /**
         * Experimental: Creates and returns a vector through transformation of the given vector by the given quaternion
         */
        static TRANSFORM_VECTOR(_v, _q) {
            // changed axis order might not be necessary, needs testing
            const v = FudgeCore.Recycler.get(Quaternion);
            v.set([0, _v.z, _v.x, _v.y]);
            v.multiply(_q, true);
            v.multiply(this.CONJUGATION(_q));
            const result = FudgeCore.Recycler.get(FudgeCore.Vector3);
            result.set(v.data[2], v.data[3], v.data[1]);
            return result;
        }
        /**
         * Experimental: Converts the quaternion to a Matrix4x4
         */
        static QUATERNION_TO_MATRIX(_q) {
            const x = _q.data[0], y = _q.data[1], z = _q.data[2], w = _q.data[3];
            // From: https://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToMatrix/index.htm
            const xx = x * x, xy = x * y, xz = x * z, xw = x * w;
            const yy = y * y, yz = y * z, yw = y * w;
            const zz = z * z, zw = z * w;
            const result = FudgeCore.Recycler.get(FudgeCore.Matrix4x4);
            result.set([
                1 - 2 * (yy + zz), 2 * (xy - zw), 2 * (xz + yw), 0,
                2 * (xy + zw), 1 - 2 * (xx + zz), 2 * (yz - xw), 0,
                2 * (xz - yw), 2 * (yz + xw), 1 - 2 * (xx + yy), 0,
                0, 0, 0, 1
            ]);
            return result;
        }
        //#endregion
        get x() {
            return this.data[0];
        }
        get y() {
            return this.data[1];
        }
        get z() {
            return this.data[2];
        }
        get w() {
            return this.data[3];
        }
        // TODO: reset cache when setting x,y,z,w ?
        set x(_x) {
            this.data[0] = _x;
        }
        set y(_y) {
            this.data[1] = _y;
        }
        set z(_z) {
            this.data[2] = _z;
        }
        set w(_w) {
            this.data[3] = _w;
        }
        /**
         * Return a copy of this
         */
        get clone() {
            let result = FudgeCore.Recycler.get(Quaternion);
            result.set(this);
            return result;
        }
        /**
         * - get: return the euler angle representation of the rotation in degrees.
         * - set: set the euler angle representation of the rotation in degrees.
         */
        get eulerAngles() {
            if (!this.#eulerAngles) {
                this.#eulerAngles = FudgeCore.Recycler.get(FudgeCore.Vector3);
                // roll (x-axis rotation)
                let sinrcosp = 2 * (this.w * this.x + this.y * this.z);
                let cosrcosp = 1 - 2 * (this.x * this.x + this.y * this.y);
                this.#eulerAngles.x = Math.atan2(sinrcosp, cosrcosp);
                // pitch (y-axis rotation)
                let sinp = 2 * (this.w * this.y - this.z * this.x);
                if (Math.abs(sinp) >= 1)
                    this.#eulerAngles.y = sinp < 0 ? -Math.abs(Math.PI / 2) : Math.abs(Math.PI / 2); // use 90 degrees if out of range
                else
                    this.#eulerAngles.y = Math.asin(sinp);
                // yaw (z-axis rotation)
                let sinycosp = 2 * (this.w * this.z + this.x * this.y);
                let cosycosp = 1 - 2 * (this.y * this.y + this.z * this.z);
                this.#eulerAngles.z = Math.atan2(sinycosp, cosycosp);
                this.#eulerAngles.scale(FudgeCore.Calc.rad2deg);
            }
            return this.#eulerAngles;
        }
        set eulerAngles(_eulerAngles) {
            _eulerAngles.scale(FudgeCore.Calc.deg2rad);
            const cosX = Math.cos(_eulerAngles.x / 2);
            const cosY = Math.cos(_eulerAngles.y / 2);
            const cosZ = Math.cos(_eulerAngles.z / 2);
            const sinX = Math.sin(_eulerAngles.x / 2);
            const sinY = Math.sin(_eulerAngles.y / 2);
            const sinZ = Math.sin(_eulerAngles.z / 2);
            this.set([
                sinX * cosY * cosZ - cosX * sinY * sinZ,
                cosX * sinY * cosZ + sinX * cosY * sinZ,
                cosX * cosY * sinZ - sinX * sinY * cosZ,
                cosX * cosY * cosZ + sinX * sinY * sinZ
            ]);
        }
        /**
         * Resets the quaternion to the identity-quaternion and clears cache. Used by the recycler to reset.
         */
        recycle() {
            this.data.set([0, 0, 0, 1]);
            this.resetCache();
        }
        /**
         * Resets the quaternion to the identity-quaternion and clears cache.
         */
        reset() {
            this.recycle();
        }
        /**
         * Inverse this quaternion
         */
        inverse() {
            // quaternion is assumed to have unit length
            this.conjugate();
        }
        /**
         * Conjugate this quaternion
         */
        conjugate() {
            this.data[0] *= -1;
            this.data[1] *= -1;
            this.data[2] *= -1;
            this.resetCache();
        }
        /**
         * Multiply this quaternion with the given quaternion
         */
        multiply(_other, _fromLeft = false) {
            const a = _fromLeft ? _other : this;
            const b = _fromLeft ? this : _other;
            // from: http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm
            const ax = a.data[0];
            const ay = a.data[1];
            const az = a.data[2];
            const aw = a.data[3];
            const bx = b.data[0];
            const by = b.data[1];
            const bz = b.data[2];
            const bw = b.data[3];
            this.set([
                ax * bw + ay * bz - az * by + aw * bx,
                -ax * bz + ay * bw + az * bx + aw * by,
                ax * by - ay * bx + az * bw + aw * bz,
                -ax * bx - ay * by - az * bz + aw * bw
            ]);
        }
        /**
         * Sets the elements of this quaternion to the values of the given quaternion
         */
        set(_qTo) {
            if (_qTo instanceof Quaternion)
                this.data.set(_qTo.data);
            else
                this.data.set(_qTo);
            this.resetCache();
        }
        toString() {
            return `∆í.Quaternion(x: ${this.data[0]}, y: ${this.data[1]}, z: ${this.data[2]}, w: ${this.data[3]})`;
        }
        /**
         * Return the elements of this quaternion as a Float32Array
         */
        get() {
            // TODO: optimization, it shouldn"t always return a copy, since this bloats memory
            return new Float32Array(this.data);
        }
        serialize() {
            return this.getMutator();
        }
        async deserialize(_serialization) {
            this.mutate(_serialization);
            return this;
        }
        getMutator() {
            if (!this.mutator)
                this.mutator = {
                    x: this.data[0], y: this.data[1], z: this.data[2], w: this.data[3]
                };
            return this.mutator;
        }
        async mutate(_mutator) {
            this.data[0] = _mutator.x;
            this.data[1] = _mutator.y;
            this.data[2] = _mutator.z;
            this.data[3] = _mutator.w;
            this.resetCache();
        }
        reduceMutator(_mutator) { }
        resetCache() {
            this.#eulerAngles = null;
            this.mutator = null;
        }
    }
    FudgeCore.Quaternion = Quaternion;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Class for creating random values, supporting Javascript's Math.random and a deterministig pseudo-random number generator (PRNG)
     * that can be fed with a seed and then returns a reproducable set of random numbers (if the precision of Javascript allows)
     *
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Random {
        /**
         * Create an instance of {@link Random}.
         * If a seed is given, LFIB4 is used as generator, reproducing a series of numbers from that seed.
         * If a function producing values between 0 and 1 is given, it will be used as generator.
         */
        constructor(_seedOrFunction) {
            this.generate = Math.random;
            if (_seedOrFunction instanceof Function)
                this.generate = _seedOrFunction;
            else if (_seedOrFunction == undefined)
                this.generate = Math.random;
            else
                //@ts-ignore
                this.generate = new FudgeCore.LFIB4(_seedOrFunction);
        }
        /**
         * Returns a normed random number, thus in the range of [0, 1[
         */
        getNorm() {
            return this.generate();
        }
        /**
         * Returns a random number in the range of given [_min, _max[
         */
        getRange(_min, _max) {
            return _min + this.generate() * (_max - _min);
        }
        /**
         * Returns a random integer number in the range of given floored [_min, _max[
         */
        getRangeFloored(_min, _max) {
            return Math.floor(this.getRange(_min, _max));
        }
        /**
         * Returns true or false randomly
         */
        getBoolean() {
            return this.generate() < 0.5;
        }
        /**
         * Returns -1 or 1 randomly
         */
        getSign() {
            return this.getBoolean() ? 1 : -1;
        }
        /**
         * Returns a randomly selected index into the given array
         */
        getIndex(_array) {
            if (_array.length > 0)
                return this.getRangeFloored(0, _array.length);
            return -1;
        }
        /**
         * Returns a randomly selected element of the given array
         */
        getElement(_array) {
            if (_array.length > 0)
                return _array[this.getIndex(_array)];
            return null;
        }
        /**
         * Removes a randomly selected element from the given array and returns it
         */
        splice(_array) {
            return _array.splice(this.getIndex(_array), 1)[0];
        }
        /**
         * Returns a randomly selected key from the given Map-instance
         */
        getKey(_map) {
            let keys = Array.from(_map.keys());
            return keys[this.getIndex(keys)];
        }
        /**
         * Returns a randomly selected property name from the given object
         */
        getPropertyName(_object) {
            let keys = Object.getOwnPropertyNames(_object);
            return keys[this.getIndex(keys)];
        }
        /**
         * Returns a randomly selected symbol from the given object, if symbols are used as keys
         */
        getPropertySymbol(_object) {
            let keys = Object.getOwnPropertySymbols(_object);
            return keys[this.getIndex(keys)];
        }
        /**
         * Returns a random three-dimensional vector in the limits of the box defined by the vectors given as [_corner0, _corner1[
         */
        getVector3(_corner0, _corner1) {
            return new FudgeCore.Vector3(this.getRange(_corner0.x, _corner1.x), this.getRange(_corner0.y, _corner1.y), this.getRange(_corner0.z, _corner1.z));
        }
        /**
         * Returns a random two-dimensional vector in the limits of the rectangle defined by the vectors given as [_corner0, _corner1[
         */
        getVector2(_corner0, _corner1) {
            return new FudgeCore.Vector2(this.getRange(_corner0.x, _corner1.x), this.getRange(_corner0.y, _corner1.y));
        }
    }
    Random.default = new Random();
    FudgeCore.Random = Random;
    /**
     * Standard {@link Random}-instance using Math.random().
     */
    FudgeCore.random = new Random();
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Stores and manipulates a threedimensional vector comprised of the components x, y and z
     * ```plaintext
     *            +y
     *             |__ +x
     *            /
     *          +z
     * ```
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019-2022
     */
    class Vector3 extends FudgeCore.Mutable {
        constructor(_x = 0, _y = 0, _z = 0) {
            super();
            this.data = new Float32Array([_x, _y, _z]);
        }
        //#region Static
        /**
         * Creates and returns a vector with the given length pointing in x-direction
         */
        static X(_scale = 1) {
            const vector = FudgeCore.Recycler.get(Vector3);
            vector.set(_scale, 0, 0);
            return vector;
        }
        /**
         * Creates and returns a vector with the given length pointing in y-direction
         */
        static Y(_scale = 1) {
            const vector = FudgeCore.Recycler.get(Vector3);
            vector.set(0, _scale, 0);
            return vector;
        }
        /**
         * Creates and returns a vector with the given length pointing in z-direction
         */
        static Z(_scale = 1) {
            const vector = FudgeCore.Recycler.get(Vector3);
            vector.data.set([0, 0, _scale]);
            return vector;
        }
        /**
         * Creates and returns a vector with the value 0 on each axis
         */
        static ZERO() {
            const vector = FudgeCore.Recycler.get(Vector3);
            vector.set(0, 0, 0);
            return vector;
        }
        /**
         * Creates and returns a vector of the given size on each of the three axis
         */
        static ONE(_scale = 1) {
            const vector = FudgeCore.Recycler.get(Vector3);
            vector.set(_scale, _scale, _scale);
            return vector;
        }
        /**
         * Creates and returns a vector through transformation of the given vector by the given matrix
         */
        static TRANSFORMATION(_vector, _mtxTransform, _includeTranslation = true) {
            let result = FudgeCore.Recycler.get(Vector3);
            let m = _mtxTransform.get();
            let [x, y, z] = _vector.get();
            result.x = m[0] * x + m[4] * y + m[8] * z;
            result.y = m[1] * x + m[5] * y + m[9] * z;
            result.z = m[2] * x + m[6] * y + m[10] * z;
            if (_includeTranslation) {
                result.add(_mtxTransform.translation);
            }
            return result;
        }
        /**
         * Creates and returns a vector which is a copy of the given vector scaled to the given length
         */
        static NORMALIZATION(_vector, _length = 1) {
            let magnitudeSquared = _vector.magnitudeSquared;
            let vector = _vector.clone;
            if (magnitudeSquared == 0)
                throw (new RangeError("Impossible normalization"));
            vector.scale(_length / Math.sqrt(magnitudeSquared));
            return vector;
        }
        /**
         * Returns the resulting vector attained by addition of all given vectors.
         */
        static SUM(..._vectors) {
            let result = FudgeCore.Recycler.get(Vector3);
            for (let vector of _vectors)
                result.set(result.x + vector.x, result.y + vector.y, result.z + vector.z);
            return result;
        }
        /**
         * Returns the result of the subtraction of two vectors.
         */
        static DIFFERENCE(_minuend, _subtrahend) {
            let vector = FudgeCore.Recycler.get(Vector3);
            vector.set(_minuend.x - _subtrahend.x, _minuend.y - _subtrahend.y, _minuend.z - _subtrahend.z);
            return vector;
        }
        /**
         * Returns a new vector representing the given vector scaled by the given scaling factor
         */
        static SCALE(_vector, _scaling) {
            let scaled = FudgeCore.Recycler.get(Vector3);
            scaled.set(_vector.x * _scaling, _vector.y * _scaling, _vector.z * _scaling);
            return scaled;
        }
        /**
         * Computes the crossproduct of 2 vectors.
         */
        static CROSS(_a, _b) {
            let vector = FudgeCore.Recycler.get(Vector3);
            vector.set(_a.y * _b.z - _a.z * _b.y, _a.z * _b.x - _a.x * _b.z, _a.x * _b.y - _a.y * _b.x);
            return vector;
        }
        /**
         * Computes the dotproduct of 2 vectors.
         */
        static DOT(_a, _b) {
            let scalarProduct = _a.x * _b.x + _a.y * _b.y + _a.z * _b.z;
            return scalarProduct;
        }
        /**
         * Calculates and returns the reflection of the incoming vector at the given normal vector. The length of normal should be 1.
         *     __________________
         *           /|\
         * incoming / | \ reflection
         *         /  |  \
         *          normal
         *
         */
        static REFLECTION(_incoming, _normal) {
            let dot = -Vector3.DOT(_incoming, _normal);
            let reflection = Vector3.SUM(_incoming, Vector3.SCALE(_normal, 2 * dot));
            return reflection;
        }
        /**
         * Divides the dividend by the divisor component by component and returns the result
         */
        static RATIO(_dividend, _divisor) {
            let vector = FudgeCore.Recycler.get(Vector3);
            vector.set(_dividend.x / _divisor.x, _dividend.y / _divisor.y, _dividend.z / _divisor.z);
            return vector;
        }
        /**
         * Creates a cartesian vector from geographic coordinates
         */
        static GEO(_longitude = 0, _latitude = 0, _magnitude = 1) {
            let vector = FudgeCore.Recycler.get(Vector3);
            let geo = FudgeCore.Recycler.get(FudgeCore.Geo3);
            geo.set(_longitude, _latitude, _magnitude);
            vector.geo = geo;
            FudgeCore.Recycler.store(geo);
            return vector;
        }
        //#endregion
        //#region Accessors
        // TODO: implement equals-functions
        get x() {
            return this.data[0];
        }
        get y() {
            return this.data[1];
        }
        get z() {
            return this.data[2];
        }
        set x(_x) {
            this.data[0] = _x;
        }
        set y(_y) {
            this.data[1] = _y;
        }
        set z(_z) {
            this.data[2] = _z;
        }
        /**
         * Returns the length of the vector
         */
        get magnitude() {
            return Math.hypot(...this.data);
        }
        /**
         * Returns the square of the magnitude of the vector without calculating a square root. Faster for simple proximity evaluation.
         */
        get magnitudeSquared() {
            return Vector3.DOT(this, this);
        }
        /**
         * Creates and returns a clone of this vector
         */
        get clone() {
            let clone = FudgeCore.Recycler.get(Vector3);
            clone.data.set(this.data);
            return clone;
        }
        /**
         * - get: returns a geographic representation of this vector
         * - set: adjust the cartesian values of this vector to represent the given as geographic coordinates
         */
        set geo(_geo) {
            this.set(0, 0, _geo.magnitude);
            this.transform(FudgeCore.Matrix4x4.ROTATION_X(-_geo.latitude));
            this.transform(FudgeCore.Matrix4x4.ROTATION_Y(_geo.longitude));
        }
        get geo() {
            let geo = FudgeCore.Recycler.get(FudgeCore.Geo3);
            geo.magnitude = this.magnitude;
            if (geo.magnitude === 0)
                return geo;
            geo.longitude = 180 * Math.atan2(this.x / geo.magnitude, this.z / geo.magnitude) / Math.PI;
            geo.latitude = 180 * Math.asin(this.y / geo.magnitude) / Math.PI;
            return geo;
        }
        //#endregion
        recycle() {
            this.data.set([0, 0, 0]);
        }
        /**
         * Copies the values of the given vector into this
         */
        copy(_original) {
            this.data.set(_original.data);
        }
        /**
         * Returns true if the coordinates of this and the given vector are to be considered identical within the given tolerance
         * TODO: examine, if tolerance as criterium for the difference is appropriate with very large coordinate values or if _tolerance should be multiplied by coordinate value
         */
        equals(_compare, _tolerance = Number.EPSILON) {
            if (Math.abs(this.x - _compare.x) > _tolerance)
                return false;
            if (Math.abs(this.y - _compare.y) > _tolerance)
                return false;
            if (Math.abs(this.z - _compare.z) > _tolerance)
                return false;
            return true;
        }
        /**
         * Returns true if the position described by this is within a cube with the opposite corners 1 and 2
         */
        isInsideCube(_corner1, _corner2) {
            let diagonal = Vector3.DIFFERENCE(_corner2, _corner1);
            let relative = Vector3.DIFFERENCE(this, _corner1);
            let ratio = Vector3.RATIO(relative, diagonal);
            if (ratio.x > 1 || ratio.x < 0)
                return false;
            if (ratio.y > 1 || ratio.y < 0)
                return false;
            if (ratio.z > 1 || ratio.z < 0)
                return false;
            return true;
        }
        /**
         * Returns true if the position described by this is within a sphere with the given center and radius
         */
        isInsideSphere(_center, _radius) {
            let difference = Vector3.DIFFERENCE(this, _center);
            return difference.magnitudeSquared < (_radius * _radius);
        }
        /**
         * Adds the given vector to this
         */
        add(_addend) {
            this.data.set([_addend.x + this.x, _addend.y + this.y, _addend.z + this.z]);
        }
        /**
         * Subtracts the given vector from this
         */
        subtract(_subtrahend) {
            this.data.set([this.x - _subtrahend.x, this.y - _subtrahend.y, this.z - _subtrahend.z]);
        }
        /**
         * Scales this vector by the given scalar
         */
        scale(_scalar) {
            this.data.set([_scalar * this.x, _scalar * this.y, _scalar * this.z]);
        }
        /**
         * Normalizes this to the given length, 1 by default
         */
        normalize(_length = 1) {
            this.data = Vector3.NORMALIZATION(this, _length).data;
        }
        /**
         * Defines the components of this vector with the given numbers
         */
        set(_x = 0, _y = 0, _z = 0) {
            this.data[0] = _x;
            this.data[1] = _y;
            this.data[2] = _z;
        }
        /**
         * Returns this vector as a new Float32Array (copy)
         */
        get() {
            return new Float32Array(this.data);
        }
        /**
         * Transforms this vector by the given matrix, including or exluding the translation.
         * Including is the default, excluding will only rotate and scale this vector.
         */
        transform(_mtxTransform, _includeTranslation = true) {
            let transformed = Vector3.TRANSFORMATION(this, _mtxTransform, _includeTranslation);
            this.data.set(transformed.data);
            FudgeCore.Recycler.store(transformed);
        }
        /**
         * Drops the z-component and returns a Vector2 consisting of the x- and y-components
         */
        toVector2() {
            return new FudgeCore.Vector2(this.x, this.y);
        }
        /**
         * Reflects this vector at a given normal. See {@link Vector3.REFLECTION}
         */
        reflect(_normal) {
            const reflected = Vector3.REFLECTION(this, _normal);
            this.set(reflected.x, reflected.y, reflected.z);
            FudgeCore.Recycler.store(reflected);
        }
        /**
         * Shuffles the components of this vector
         */
        shuffle() {
            let a = Array.from(this.data);
            this.set(FudgeCore.Random.default.splice(a), FudgeCore.Random.default.splice(a), a[0]);
        }
        getDistance(_to) {
            let difference = Vector3.DIFFERENCE(this, _to);
            FudgeCore.Recycler.store(difference);
            return difference.magnitude;
        }
        /**
         * For each dimension, moves the component to the minimum of this and the given vector
         */
        min(_compare) {
            this.x = Math.min(this.x, _compare.x);
            this.y = Math.min(this.y, _compare.y);
            this.z = Math.min(this.z, _compare.z);
        }
        /**
         * For each dimension, moves the component to the maximum of this and the given vector
         */
        max(_compare) {
            this.x = Math.max(this.x, _compare.x);
            this.y = Math.max(this.y, _compare.y);
            this.z = Math.max(this.z, _compare.z);
        }
        /**
         * Returns a formatted string representation of this vector
         */
        toString() {
            let result = `(${this.x.toPrecision(5)}, ${this.y.toPrecision(5)}, ${this.z.toPrecision(5)})`;
            return result;
        }
        /**
         * Uses the standard array.map functionality to perform the given function on all components of this vector
         * and return a new vector with the results
         */
        map(_function) {
            let copy = FudgeCore.Recycler.get(Vector3);
            copy.data = this.data.map(_function);
            return copy;
        }
        //#region Transfer
        serialize() {
            let serialization = this.getMutator();
            // serialization.toJSON = () => { return `{ "r": ${this.r}, "g": ${this.g}, "b": ${this.b}, "a": ${this.a}}`; };
            serialization.toJSON = () => { return `[${this.x}, ${this.y}, ${this.z}]`; };
            return serialization;
        }
        async deserialize(_serialization) {
            if (typeof (_serialization) == "string") {
                [this.x, this.y, this.z] = JSON.parse(_serialization);
            }
            else
                this.mutate(_serialization);
            return this;
        }
        getMutator() {
            let mutator = {
                x: this.data[0], y: this.data[1], z: this.data[2]
            };
            return mutator;
        }
        reduceMutator(_mutator) { }
    }
    FudgeCore.Vector3 = Vector3;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Describes a face of a {@link Mesh} by referencing three {@link Vertices} with their indizes
     * and calculates face normals.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class Face {
        constructor(_vertices, _index0, _index1, _index2) {
            this.indices = [];
            this.indices = [_index0, _index1, _index2];
            this.vertices = _vertices;
            this.calculateNormals();
        }
        calculateNormals() {
            let trigon = this.indices.map((_index) => this.vertices.position(_index));
            let v1 = FudgeCore.Vector3.DIFFERENCE(trigon[1], trigon[0]);
            let v2 = FudgeCore.Vector3.DIFFERENCE(trigon[2], trigon[0]);
            this.normalUnscaled = FudgeCore.Vector3.CROSS(v1, v2);
            this.normal = FudgeCore.Vector3.NORMALIZATION(this.normalUnscaled);
        }
        getPosition(_index) {
            return this.vertices.position(this.indices[_index]);
        }
        /**
         * must be coplanar
         */
        isInside(_point) {
            let diffs = [];
            for (let index of this.indices) {
                let diff = FudgeCore.Vector3.DIFFERENCE(this.vertices.position(index), _point);
                diffs.push(diff);
            }
            let n0 = FudgeCore.Vector3.CROSS(diffs[1], diffs[0]);
            let n1 = FudgeCore.Vector3.CROSS(diffs[2], diffs[1]);
            let n2 = FudgeCore.Vector3.CROSS(diffs[0], diffs[2]);
            let dot1 = FudgeCore.Vector3.DOT(n0, n1);
            let dot2 = FudgeCore.Vector3.DOT(n0, n2);
            return !(dot1 < 0 || dot2 < 0);
        }
    }
    FudgeCore.Face = Face;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    var Mesh_1;
    /**
     * Abstract base class for all meshes.
     * Meshes provide indexed vertices, the order of indices to create trigons and normals, and texture coordinates
     *
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019/22
     */
    let Mesh = Mesh_1 = class Mesh extends FudgeCore.Mutable {
        constructor(_name = "Mesh") {
            super();
            // TODO: at this time, creating the buffers for flat shading is a brute force algorithm and should be optimized in the different subclasses
            // TODO: rename vertices to verticesSmooth or just cloud, and cloud to vertices
            // 
            this.idResource = undefined;
            this.name = "Mesh";
            // base structure for meshes in FUDGE
            this.vertices = new FudgeCore.Vertices();
            this.faces = [];
            this.name = _name;
            this.clear();
            FudgeCore.Project.register(this);
        }
        static registerSubclass(_subClass) { return Mesh_1.subclasses.push(_subClass) - 1; }
        get type() {
            return this.constructor.name;
        }
        get boundingBox() {
            if (this.∆íbox == null)
                this.∆íbox = this.createBoundingBox();
            return this.∆íbox;
        }
        get radius() {
            if (this.∆íradius == null)
                this.∆íradius = this.createRadius();
            return this.∆íradius;
        }
        useRenderBuffers(_shader, _mtxMeshToWorld, _mtxMeshToView, _id) { return null; /* injected by RenderInjector*/ }
        getRenderBuffers(_shader) { return null; /* injected by RenderInjector*/ }
        deleteRenderBuffers(_shader) { }
        clear() {
            this.∆íbox = undefined;
            this.∆íradius = undefined;
            this.renderMesh?.clear();
        }
        //#region Transfer
        // Serialize/Deserialize for all meshes that calculate without parameters
        serialize() {
            let serialization = {
                idResource: this.idResource,
                name: this.name,
                type: this.type // store for editor view
            }; // no data needed ...
            return serialization;
        }
        async deserialize(_serialization) {
            FudgeCore.Project.register(this, _serialization.idResource);
            this.name = _serialization.name;
            // type is an accessor and must not be deserialized
            return this;
        }
        reduceMutator(_mutator) {
            // TODO: so much to delete... rather just gather what to mutate
            delete _mutator.∆íbox;
            delete _mutator.∆íradius;
            delete _mutator.renderBuffers;
        }
        //#endregion
        createRadius() {
            //TODO: radius and bounding box could be created on construction of vertex-array
            let radius = 0;
            for (let i = 0; i < this.vertices.length; i++) {
                radius = Math.max(radius, this.vertices.position(i).magnitudeSquared);
            }
            return Math.sqrt(radius);
        }
        createBoundingBox() {
            let box = FudgeCore.Recycler.get(FudgeCore.Box);
            box.set();
            for (let i = 0; i < this.vertices.length; i++) {
                let point = this.vertices.position(i);
                box.expand(point);
            }
            return box;
        }
    };
    /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
    Mesh.baseClass = Mesh_1;
    /** list of all the subclasses derived from this class, if they registered properly*/
    Mesh.subclasses = [];
    Mesh = Mesh_1 = __decorate([
        FudgeCore.RenderInjectorMesh.decorate
    ], Mesh);
    FudgeCore.Mesh = Mesh;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a simple cube with edges of length 1, each face consisting of two trigons
     * ```plaintext
     *       (12) 4____7  (11)
     *       (8) 0/__3/| (10)
     *       (15) ||5_||6 (14)
     *       (9) 1|/_2|/ (13)
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class MeshCube extends FudgeCore.Mesh {
        constructor(_name = "MeshCube") {
            super(_name);
            // this.create();
            this.vertices = new FudgeCore.Vertices(
            // front
            new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, 0.5, 0.5), new FudgeCore.Vector2(0, 0)), // 0
            new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, -0.5, 0.5), new FudgeCore.Vector2(0, 1)), // 1
            new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, -0.5, 0.5), new FudgeCore.Vector2(1, 1)), // 2
            new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, 0.5, 0.5), new FudgeCore.Vector2(1, 0)), // 3
            // back
            new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, 0.5, -0.5), new FudgeCore.Vector2(3, 0)), // 4
            new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, -0.5, -0.5), new FudgeCore.Vector2(3, 1)), // 5
            new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, -0.5, -0.5), new FudgeCore.Vector2(2, 1)), // 6
            new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, 0.5, -0.5), new FudgeCore.Vector2(2, 0)), // 7
            // references
            new FudgeCore.Vertex(0, new FudgeCore.Vector2(4, 0)), // 8
            new FudgeCore.Vertex(1, new FudgeCore.Vector2(4, 1)), // 9
            new FudgeCore.Vertex(3, new FudgeCore.Vector2(0, 1)), // 10
            new FudgeCore.Vertex(7, new FudgeCore.Vector2(1, 1)), // 11
            new FudgeCore.Vertex(4, new FudgeCore.Vector2(1, 0)), // 12
            new FudgeCore.Vertex(2, new FudgeCore.Vector2(0, 0)), // 13
            new FudgeCore.Vertex(6, new FudgeCore.Vector2(1, 0)), // 14
            new FudgeCore.Vertex(5, new FudgeCore.Vector2(1, 1)) // 15
            );
            this.faces = [
                ...new FudgeCore.Quad(this.vertices, 0, 1, 2, 3).faces,
                ...new FudgeCore.Quad(this.vertices, 7, 6, 5, 4).faces,
                ...new FudgeCore.Quad(this.vertices, 3, 2, 6, 7).faces,
                ...new FudgeCore.Quad(this.vertices, 4, 5, 9, 8).faces,
                ...new FudgeCore.Quad(this.vertices, 0, 10, 11, 12).faces,
                ...new FudgeCore.Quad(this.vertices, 13, 1, 15, 14).faces // bottom
            ];
        }
    }
    MeshCube.iSubclass = FudgeCore.Mesh.registerSubclass(MeshCube);
    FudgeCore.MeshCube = MeshCube;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a flat polygon. All trigons share vertex 0, so careful design is required to create concave polygons.
     * Vertex 0 is also associated with the face normal.
     * ```plaintext
     *             0
     *           1‚ï±|‚ï≤  4 ...
     *            ‚ï≤|_‚ï≤‚ï±
     *            2   3
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021-2022
     */
    class MeshPolygon extends FudgeCore.Mesh {
        constructor(_name = "MeshPolygon", _shape = MeshPolygon.shapeDefault, _fitTexture = true) {
            super(_name);
            this.shape = new FudgeCore.MutableArray(FudgeCore.Vector2);
            this.create(_shape, _fitTexture);
        }
        get minVertices() {
            return 3;
        }
        create(_shape = [], _fitTexture = true) {
            this.shape = FudgeCore.MutableArray.from(_shape.map(_vertex => _vertex.clone));
            this.clear();
            this.fitTexture = _fitTexture;
            if (_shape.length < this.minVertices) {
                FudgeCore.Debug.warn(`At least ${this.minVertices} vertices needed to construct MeshPolygon, default trigon used`);
                this.create(MeshPolygon.shapeDefault, true);
                return;
            }
            let shape = _shape;
            let min = FudgeCore.Vector2.ZERO();
            let max = FudgeCore.Vector2.ZERO();
            this.vertices = new FudgeCore.Vertices();
            for (let vertex of shape) {
                this.vertices.push(new FudgeCore.Vertex(vertex.toVector3()));
                min.x = Math.min(min.x, vertex.x);
                max.x = Math.max(max.x, vertex.x);
                min.y = Math.min(min.y, vertex.y);
                max.y = Math.max(max.y, vertex.y);
            }
            let size = new FudgeCore.Vector2(max.x - min.x, max.y - min.y);
            if (this.fitTexture) {
                for (let i = 0; i < shape.length; i++) {
                    let textureUV = FudgeCore.Vector2.DIFFERENCE(shape[i], min);
                    this.vertices[i].uv = new FudgeCore.Vector2(textureUV.x / size.x, 1 - textureUV.y / size.y);
                }
            }
            else {
                _shape.forEach((_vertex, _i) => this.vertices[_i].uv = new FudgeCore.Vector2(_vertex.x, -_vertex.y));
            }
            this.faces = [];
            for (let i = 2; i < this.vertices.length; i++)
                this.faces.push(new FudgeCore.Face(this.vertices, i - 1, i, 0));
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.shape = FudgeCore.Serializer.serializeArray(FudgeCore.Vector2, this.shape);
            serialization.fitTexture = this.fitTexture;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            let vectors = await FudgeCore.Serializer.deserializeArray(_serialization.shape);
            this.create(vectors, _serialization.fitTexture);
            return this;
        }
        async mutate(_mutator) {
            await super.mutate(_mutator);
            this.create(this.shape, this.fitTexture);
            this.dispatchEvent(new Event("mutate" /* MUTATE */));
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
        }
    }
    MeshPolygon.iSubclass = FudgeCore.Mesh.registerSubclass(MeshPolygon);
    MeshPolygon.shapeDefault = [
        new FudgeCore.Vector2(-1, -1),
        new FudgeCore.Vector2(1, -1),
        new FudgeCore.Vector2(0, 1)
    ];
    FudgeCore.MeshPolygon = MeshPolygon;
})(FudgeCore || (FudgeCore = {}));
///<reference path="MeshPolygon.ts"/>
var FudgeCore;
///<reference path="MeshPolygon.ts"/>
(function (FudgeCore) {
    /**
     * Generates an extrusion of a polygon by a series of transformations
     * ```plaintext
     *                      ____
     * Polygon         ____‚ï±‚ï≤   ‚ï≤                             y
     * Transform 0  ‚Üí ‚ï± ‚ï≤__‚ï≤_‚ï≤___‚ï≤ ‚Üê Transform 2          z __‚îÇ
     * (base)         ‚ï≤_‚ï±__‚ï± ‚ï±   ‚ï±   (lid)                     ‚ï≤
     *     Transform 1  ‚Üí  ‚ï≤‚ï±___‚ï±                               x
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021-2022
     */
    class MeshExtrusion extends FudgeCore.MeshPolygon {
        constructor(_name = "MeshExtrusion", _vertices = FudgeCore.MeshPolygon.shapeDefault, _mtxTransforms = MeshExtrusion.mtxDefaults, _fitTexture = true) {
            super(_name, _vertices, _fitTexture);
            this.mtxTransforms = new FudgeCore.MutableArray(FudgeCore.Matrix4x4);
            this.extrude(_mtxTransforms);
            // console.log("Mutator", this.getMutator());
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.transforms = FudgeCore.Serializer.serializeArray(FudgeCore.Matrix4x4, this.mtxTransforms);
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            let mtxTransforms;
            if (_serialization.transforms)
                mtxTransforms = await FudgeCore.Serializer.deserializeArray(_serialization.transforms);
            this.extrude(mtxTransforms);
            return this;
        }
        async mutate(_mutator) {
            await super.mutate(_mutator);
            this.extrude(this.mtxTransforms);
            this.dispatchEvent(new Event("mutate" /* MUTATE */));
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
        }
        //#endregion
        extrude(_mtxTransforms = MeshExtrusion.mtxDefaults) {
            this.mtxTransforms = FudgeCore.MutableArray.from(_mtxTransforms);
            let nTransforms = _mtxTransforms.length;
            let nVerticesShape = this.vertices.length;
            // create new vertex cloud, current cloud holds MeshPolygon
            let vertices = new FudgeCore.Vertices();
            // create base by transformation of polygon with first transform
            let base = this.vertices.map((_v) => new FudgeCore.Vertex(FudgeCore.Vector3.TRANSFORMATION(_v.position, _mtxTransforms[0], true), _v.uv));
            vertices.push(...base);
            // create lid by transformation of polygon with last transform
            let lid = this.vertices.map((_v) => new FudgeCore.Vertex(FudgeCore.Vector3.TRANSFORMATION(_v.position, _mtxTransforms[nTransforms - 1], true), _v.uv));
            vertices.push(...lid);
            // recreate base faces to recalculate normals
            this.faces = this.faces.map((_face) => new FudgeCore.Face(vertices, _face.indices[0], _face.indices[1], _face.indices[2]));
            // create the lid faces using the indices of the base faces, but with an index offset and reverse order of indices
            this.faces.push(...this.faces.map(_face => new FudgeCore.Face(vertices, _face.indices[2] + nVerticesShape, _face.indices[1] + nVerticesShape, _face.indices[0] + nVerticesShape)));
            for (let t = 0; t < nTransforms; t++) {
                let mtxTransform = _mtxTransforms[t];
                let referToClose = vertices.length;
                let wrap = this.vertices.map((_v, _i) => new FudgeCore.Vertex(FudgeCore.Vector3.TRANSFORMATION(_v.position, mtxTransform, true), new FudgeCore.Vector2(_i / nVerticesShape, t / nTransforms)));
                vertices.push(...wrap);
                vertices.push(new FudgeCore.Vertex(referToClose, new FudgeCore.Vector2(1, t / nTransforms)));
                // if (i > 0 && i < nTransforms - 1)
                //   vertices.push(...wrap.map((_vector: Vector3) => _vector.clone)); <- no slicing for flat shading yet...
            }
            // create indizes for wrapper
            for (let t = 0; t < nTransforms - 1; t++)
                for (let i = 0; i < nVerticesShape; i++) {
                    let index = +2 * nVerticesShape // base & lid are offsets 
                        + t * (nVerticesShape + 1) // offset for each transformation
                        + i;
                    let quad = new FudgeCore.Quad(vertices, index, index + nVerticesShape + 1, index + nVerticesShape + 2, index + 1, FudgeCore.QUADSPLIT.AT_0);
                    this.faces.push(...quad.faces);
                }
            this.vertices = vertices;
            return;
        }
    }
    MeshExtrusion.iSubclass = FudgeCore.Mesh.registerSubclass(MeshExtrusion);
    MeshExtrusion.mtxDefaults = [
        FudgeCore.Matrix4x4.TRANSLATION(FudgeCore.Vector3.Z(0.5)),
        FudgeCore.Matrix4x4.TRANSLATION(FudgeCore.Vector3.Z(-0.5))
    ];
    FudgeCore.MeshExtrusion = MeshExtrusion;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /** Allows to create custom meshes from given Data */
    class MeshFromData extends FudgeCore.Mesh {
        constructor(_vertices, _textureUVs, _indices, _faceNormals) {
            super();
            this.verticesToSet = _vertices;
            this.textureUVsToSet = _textureUVs;
            this.indicesToSet = _indices;
            this.faceNormalsToSet = _faceNormals;
        }
        createVertices() {
            return this.verticesToSet;
        }
        createTextureUVs() {
            return this.textureUVsToSet;
        }
        createIndices() {
            return this.indicesToSet;
        }
        createFlatNormals() {
            return this.faceNormalsToSet;
        }
    }
    FudgeCore.MeshFromData = MeshFromData;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Mesh loaded from a file
     * @author Matthias Roming, HFU, 2022-2023
     */
    class MeshImport extends FudgeCore.Mesh {
        serialize() {
            const serialization = super.serialize();
            serialization.url = this.url.toString();
            serialization.filetype = this.loader.name.replace(FudgeCore.MeshLoader.name, "");
            return serialization;
        }
        async deserialize(_serialization) {
            super.deserialize(_serialization);
            this.url = _serialization.url;
            this.loader = Reflect.get(FudgeCore, FudgeCore.MeshLoader.name.concat(_serialization.filetype));
            return this.load();
        }
        async load(_loader = this.loader, _url = this.url, _data) {
            this.url = _url;
            this.loader = _loader;
            if (!this.renderMesh)
                this.renderMesh = new FudgeCore.RenderMesh(this);
            this.clear();
            return _loader.load(this, _data);
        }
        async mutate(_mutator) {
            super.mutate(_mutator);
            if (typeof (_mutator.url) !== "undefined")
                this.load(this.loader, _mutator.url);
        }
    }
    FudgeCore.MeshImport = MeshImport;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a simple pyramid with edges at the base of length 1 and a height of 1. The sides consisting of one, the base of two trigons
     * ```plaintext
     *               4
     *              /\`.
     *            3/__\_\ 2
     *           0/____\/1
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class MeshPyramid extends FudgeCore.Mesh {
        constructor(_name = "MeshPyramid") {
            super(_name);
            // this.create();
            this.vertices = new FudgeCore.Vertices(
            // ground vertices
            new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, 0.0, 0.5), new FudgeCore.Vector2(0, 1)), new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, 0.0, 0.5), new FudgeCore.Vector2(1, 1)), new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, 0.0, -0.5), new FudgeCore.Vector2(1, 0)), new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, 0.0, -0.5), new FudgeCore.Vector2(0, 0)), 
            // tip (vertex #4)
            new FudgeCore.Vertex(new FudgeCore.Vector3(0.0, 1.0, 0.0), new FudgeCore.Vector2(0.5, 0.5)), 
            // floor again for downside texture
            new FudgeCore.Vertex(0, new FudgeCore.Vector2(0, 0)), new FudgeCore.Vertex(1, new FudgeCore.Vector2(1, 0)), new FudgeCore.Vertex(2, new FudgeCore.Vector2(1, 1)), new FudgeCore.Vertex(3, new FudgeCore.Vector2(0, 1)));
            this.faces = [
                new FudgeCore.Face(this.vertices, 4, 0, 1),
                new FudgeCore.Face(this.vertices, 4, 1, 2),
                new FudgeCore.Face(this.vertices, 4, 2, 3),
                new FudgeCore.Face(this.vertices, 4, 3, 0),
                new FudgeCore.Face(this.vertices, 5 + 0, 5 + 2, 5 + 1),
                new FudgeCore.Face(this.vertices, 5 + 0, 5 + 3, 5 + 2)
            ];
        }
    }
    MeshPyramid.iSubclass = FudgeCore.Mesh.registerSubclass(MeshPyramid);
    FudgeCore.MeshPyramid = MeshPyramid;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a simple quad with edges of length 1, the face consisting of two trigons
     * ```plaintext
     *        0 __ 3
     *         |_\|
     *        1    2
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019-2022
     */
    class MeshQuad extends FudgeCore.MeshPolygon {
        constructor(_name = "MeshQuad") {
            super(_name, MeshQuad.shape);
        }
        // // flat equals smooth
        // public get verticesFlat(): Float32Array { return this.vertices; }
        // public get indicesFlat(): Uint16Array { return this.indices; }
        // public get normalsFlat(): Float32Array { return this.normalsVertex; }
        //#region Transger
        serialize() {
            let serialization = this.getMutator();
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            this.create(MeshQuad.shape, true);
            return this;
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.shape;
            delete _mutator.fitTexture;
        }
    }
    MeshQuad.iSubclass = FudgeCore.Mesh.registerSubclass(MeshQuad);
    MeshQuad.shape = [
        new FudgeCore.Vector2(-0.5, 0.5), new FudgeCore.Vector2(-0.5, -0.5), new FudgeCore.Vector2(0.5, -0.5), new FudgeCore.Vector2(0.5, 0.5)
    ];
    FudgeCore.MeshQuad = MeshQuad;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Information about the vertical projection of a given position onto the terrain
     */
    class TerrainInfo {
    }
    FudgeCore.TerrainInfo = TerrainInfo;
    /**
     * A terrain spreads out in the x-z-plane, y is the height derived from the heightmap function.
     * The terrain is always 1 in size in all dimensions, fitting into the unit-cube.
     * Resolution determines the number of quads in x and z dimension, scale the factor applied to the x,z-coordinates passed to the heightmap function.
     * Standard function is the simplex noise implemented with FUDGE, but another function can be given.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021-2022 | Simon Storl-Schulke, HFU, 2020 | Moritz Beaugrand, HFU, 2021
     */
    class MeshTerrain extends FudgeCore.Mesh {
        constructor(_name = "MeshTerrain", _resolution = FudgeCore.Vector2.ONE(2), _scaleInput = FudgeCore.Vector2.ONE(), _functionOrSeed = 0) {
            super(_name);
            this.heightMapFunction = null;
            this.create(_resolution, _scaleInput, _functionOrSeed);
        }
        create(_resolution = FudgeCore.Vector2.ONE(2), _scaleInput = FudgeCore.Vector2.ONE(), _functionOrSeed = 0) {
            this.clear();
            this.seed = undefined;
            this.resolution = new FudgeCore.Vector2(Math.round(_resolution.x), Math.round(_resolution.y));
            this.scale = _scaleInput.clone;
            if (_functionOrSeed instanceof Function)
                this.heightMapFunction = _functionOrSeed;
            else if (typeof (_functionOrSeed) == "number") {
                this.seed = _functionOrSeed;
                let prng = new FudgeCore.Random(this.seed);
                this.heightMapFunction = new FudgeCore.Noise2(() => prng.getNorm()).sample; // TODO call PRNG
            }
            else
                this.heightMapFunction = new FudgeCore.Noise2().sample;
            this.vertices = new FudgeCore.Vertices();
            //Iterate over each cell to generate grid of vertices
            for (let z = 0; z <= this.resolution.y; z++) {
                for (let x = 0; x <= this.resolution.x; x++) {
                    let xNorm = x / this.resolution.x;
                    let zNorm = z / this.resolution.y;
                    this.vertices.push(new FudgeCore.Vertex(new FudgeCore.Vector3(xNorm - 0.5, this.heightMapFunction(xNorm * this.scale.x, zNorm * this.scale.y), zNorm - 0.5), new FudgeCore.Vector2(xNorm, zNorm)));
                }
            }
            let quads = [];
            let split = FudgeCore.QUADSPLIT.AT_0;
            for (let z = 0; z < this.resolution.y; z++) {
                for (let x = 0; x < this.resolution.x; x++) {
                    quads.push(new FudgeCore.Quad(this.vertices, (x + 0) + (z + 0) * (this.resolution.x + 1), (x + 0) + (z + 1) * (this.resolution.x + 1), (x + 1) + (z + 1) * (this.resolution.x + 1), (x + 1) + (z + 0) * (this.resolution.x + 1), split));
                    split = (split == FudgeCore.QUADSPLIT.AT_0) ? FudgeCore.QUADSPLIT.AT_1 : FudgeCore.QUADSPLIT.AT_0;
                }
                if (this.resolution.x % 2 == 0) // reverse last split change if x-resolution is even
                    split = (split == FudgeCore.QUADSPLIT.AT_0) ? FudgeCore.QUADSPLIT.AT_1 : FudgeCore.QUADSPLIT.AT_0;
            }
            this.faces = quads.flatMap((quad) => quad.faces);
        }
        /**
         * Returns information about the vertical projection of the given position onto the terrain.
         * Pass the overall world transformation of the terrain if the position is given in world coordinates.
         * If at hand, pass the inverse too to avoid unnecessary calculation.
         */
        getTerrainInfo(_position, _mtxWorld = FudgeCore.Matrix4x4.IDENTITY(), _mtxInverse) {
            if (!_mtxInverse)
                _mtxInverse = FudgeCore.Matrix4x4.INVERSION(_mtxWorld);
            let terrainInfo = new TerrainInfo;
            let posLocal = FudgeCore.Vector3.TRANSFORMATION(_position, _mtxInverse, true);
            let z = Math.floor((posLocal.z + 0.5) * this.resolution.y);
            let x = Math.floor((posLocal.x + 0.5) * this.resolution.x);
            if (z < 0 || z > this.resolution.y - 1 || x < 0 || x > this.resolution.x - 1)
                return null;
            let index = (z * this.resolution.x + x) * 2;
            let face = this.faces[index];
            let ray = new FudgeCore.Ray(FudgeCore.Vector3.Y(), posLocal);
            let point = ray.intersectFacePlane(face);
            if (!face.isInside(point)) {
                index++;
                face = this.faces[index];
                point = ray.intersectFacePlane(face);
            }
            terrainInfo.index = index;
            terrainInfo.positionFace = point;
            terrainInfo.position = FudgeCore.Vector3.TRANSFORMATION(point, _mtxWorld, true);
            terrainInfo.normal = FudgeCore.Vector3.TRANSFORMATION(face.normal, FudgeCore.Matrix4x4.TRANSPOSE(_mtxInverse), false);
            terrainInfo.distance = _position.y - terrainInfo.position.y;
            terrainInfo.grid = this.getGridFromFaceIndex(index);
            return terrainInfo;
        }
        getGridFromFaceIndex(_index) {
            let result = FudgeCore.Recycler.get(FudgeCore.Vector2);
            let iQuad = Math.floor(_index / 2);
            result.set(iQuad % this.resolution.y, Math.floor(iQuad / this.resolution.x));
            return result;
        }
        getFaceIndicesFromGrid(_grid) {
            let iQuad = _grid.y * 2 * this.resolution.x + _grid.x * 2;
            return [iQuad, iQuad + 1];
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.seed = this.seed;
            serialization.scale = this.scale.serialize();
            serialization.resolution = this.resolution.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            await this.resolution.deserialize(_serialization.resolution);
            await this.scale.deserialize(_serialization.scale);
            this.seed = _serialization.seed;
            this.create(this.resolution, this.scale, this.seed);
            return this;
        }
        async mutate(_mutator) {
            super.mutate(_mutator);
            this.create(this.resolution, this.scale, this.seed);
        }
    }
    MeshTerrain.iSubclass = FudgeCore.Mesh.registerSubclass(MeshTerrain);
    FudgeCore.MeshTerrain = MeshTerrain;
})(FudgeCore || (FudgeCore = {}));
///<reference path="MeshTerrain.ts"/>
var FudgeCore;
///<reference path="MeshTerrain.ts"/>
(function (FudgeCore) {
    /**
     * Generates a planar Grid and applies a Heightmap-Function to it.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021 | Moritz Beaugrand, HFU, 2020
     */
    class MeshRelief extends FudgeCore.MeshTerrain {
        constructor(_name = "MeshRelief", _texture = null) {
            super(_name, FudgeCore.Vector2.ONE(2), undefined, (_x, _z) => 0);
            this.texture = null;
            this.setTexture(_texture);
        }
        static createHeightMapFunction(_texture) {
            let array = MeshRelief.textureToClampedArray(_texture);
            let heightMapFunction = (_x, _z) => {
                let pixel = Math.round(_z * _texture.image.width + _x);
                return array[pixel * 4] / 255;
            };
            return heightMapFunction;
        }
        static textureToClampedArray(_texture) {
            let canvas = document.createElement("canvas");
            canvas.width = _texture.image.width;
            canvas.height = _texture.image.height;
            let crc = canvas.getContext("2d");
            crc.imageSmoothingEnabled = false;
            crc.drawImage(_texture.image, 0, 0);
            return crc.getImageData(0, 0, _texture.image.width, _texture.image.height).data;
        }
        setTexture(_texture = null) {
            if (!_texture)
                return;
            this.texture = _texture;
            let resolution = _texture ? new FudgeCore.Vector2(_texture.image.width - 1, _texture.image.height - 1) : undefined;
            super.create(resolution, resolution, MeshRelief.createHeightMapFunction(_texture));
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            delete serialization.seed;
            delete serialization.scale;
            delete serialization.resolution;
            if (this.texture)
                serialization.idTexture = this.texture.idResource;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            if (_serialization.idTexture) {
                this.texture = await FudgeCore.Project.getResource(_serialization.idTexture);
                this.setTexture(this.texture);
            }
            return this;
        }
        async mutate(_mutator) {
            if (typeof (_mutator.texture) !== "undefined")
                this.setTexture(_mutator.texture);
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.seed;
            delete _mutator.scale;
            delete _mutator.resolution;
        }
    }
    MeshRelief.iSubclass = FudgeCore.Mesh.registerSubclass(MeshRelief);
    FudgeCore.MeshRelief = MeshRelief;
})(FudgeCore || (FudgeCore = {}));
// /<reference path="MeshPolygon.ts"/>
var FudgeCore;
// /<reference path="MeshPolygon.ts"/>
(function (FudgeCore) {
    /**
     * Generates a rotation of a polygon around the y-axis
     * ```plaintext
     *                     y
     *                  _  ‚Üë 0_1
     *                 ‚îÇ   ‚îÇ‚Üíx ‚îÇ2
     *                  ‚ï≤  ‚îÇ  ‚ï±3
     *                  ‚ï±  ‚îÇ  ‚ï≤
     *                 ‚ï±___‚îÇ___‚ï≤4
     *                      5
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021-2022
     */
    class MeshRotation extends FudgeCore.Mesh {
        constructor(_name = "MeshRotation", _shape = MeshRotation.verticesDefault, _longitudes = 3) {
            super(_name);
            this.shape = new FudgeCore.MutableArray(FudgeCore.Vector2);
            this.rotate(_shape, _longitudes);
            // console.log("Mutator", this.getMutator());
        }
        get minVertices() {
            return 2;
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.shape = FudgeCore.Serializer.serializeArray(FudgeCore.Vector2, this.shape);
            serialization.longitudes = this.longitudes;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            let shape = await FudgeCore.Serializer.deserializeArray(_serialization.shape);
            this.longitudes = _serialization.longitudes;
            this.rotate(shape, this.longitudes);
            return this;
        }
        async mutate(_mutator) {
            await super.mutate(_mutator);
            this.rotate(this.shape, this.longitudes);
            this.dispatchEvent(new Event("mutate" /* MUTATE */));
        }
        //#endregion
        rotate(_shape, _longitudes) {
            this.clear();
            this.shape = FudgeCore.MutableArray.from(_shape.map(_vertex => _vertex.clone));
            this.longitudes = Math.round(_longitudes);
            let angle = 360 / this.longitudes;
            let mtxRotate = FudgeCore.Matrix4x4.ROTATION_Y(angle);
            // copy original polygon as Vector3 array
            let polygon = [];
            let distances = [0];
            let total = 0;
            for (let i = 0; i < this.shape.length; i++) {
                polygon.push(this.shape[i].toVector3());
                if (i > 0) {
                    let distance = FudgeCore.Vector2.DIFFERENCE(this.shape[i], this.shape[i - 1]).magnitude;
                    total += distance;
                    distances.push(total);
                }
            }
            distances.forEach((entry, index) => { distances[index] = entry / total; });
            let nVerticesPolygon = polygon.length;
            let cloud = new FudgeCore.Vertices();
            for (let longitude = 0; longitude <= this.longitudes; longitude++) {
                for (let i = 0; i < nVerticesPolygon; i++) {
                    let uv = new FudgeCore.Vector2(longitude / this.longitudes, distances[i]);
                    // TODO: last sector should only be references to the first meridian
                    if (longitude == this.longitudes)
                        cloud.push(new FudgeCore.Vertex(i, uv));
                    else {
                        if (longitude > 0 && this.shape[i].x == 0) // use a single vertex when it's on the rotation axis
                            cloud.push(new FudgeCore.Vertex(i, uv));
                        else
                            cloud.push(new FudgeCore.Vertex(polygon[i].clone, uv));
                    }
                }
                polygon.forEach((_vector) => _vector.transform(mtxRotate));
            }
            // copy indices to new index array
            let faces = [];
            for (let longitude = 0; longitude < this.longitudes; longitude++) {
                for (let latitude = 0; latitude < nVerticesPolygon - 1; latitude++) {
                    let start = longitude * nVerticesPolygon + latitude;
                    let quad = new FudgeCore.Quad(cloud, start + 1, start + 1 + nVerticesPolygon, start + nVerticesPolygon, start);
                    faces.push(...quad.faces);
                    // TODO: catch invalid faces right here...
                }
            }
            this.vertices = cloud;
            this.faces = faces;
        }
    }
    MeshRotation.iSubclass = FudgeCore.Mesh.registerSubclass(MeshRotation);
    MeshRotation.verticesDefault = [
        new FudgeCore.Vector2(0.5, 0.5),
        new FudgeCore.Vector2(0.5, -0.5)
    ];
    FudgeCore.MeshRotation = MeshRotation;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class RenderInjectorMeshSkin extends FudgeCore.RenderInjectorMesh {
        static decorate(_constructor) {
            Object.defineProperty(_constructor.prototype, "useRenderBuffers", {
                value: RenderInjectorMeshSkin.useRenderBuffers
            });
            Object.defineProperty(_constructor.prototype, "getRenderBuffers", {
                value: RenderInjectorMeshSkin.getRenderBuffers
            });
            Object.defineProperty(_constructor.prototype, "deleteRenderBuffers", {
                value: RenderInjectorMeshSkin.deleteRenderBuffers
            });
        }
        static getRenderBuffers(_shader) {
            let renderBuffers = super.getRenderBuffers.call(this, _shader);
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            let iBones = this.renderMesh.iBones;
            let weights = this.renderMesh.weights;
            if (_shader.define.includes("FLAT")) {
                iBones = this.renderMesh.iBonesFlat;
                weights = this.renderMesh.weightsFlat;
            }
            if (!renderBuffers.iBones) {
                renderBuffers.iBones = FudgeCore.RenderWebGL.assert(crc3.createBuffer());
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, renderBuffers.iBones);
                crc3.bufferData(WebGL2RenderingContext.ARRAY_BUFFER, iBones, WebGL2RenderingContext.STATIC_DRAW);
            }
            if (!renderBuffers.weights) {
                renderBuffers.weights = FudgeCore.RenderWebGL.assert(crc3.createBuffer());
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, renderBuffers.weights);
                crc3.bufferData(WebGL2RenderingContext.ARRAY_BUFFER, weights, WebGL2RenderingContext.STATIC_DRAW);
            }
            if (!renderBuffers.mtxBones) {
                const bones = crc3.getUniformBlockIndex(_shader.program, FudgeCore.UNIFORM_BLOCKS.SKIN.NAME);
                const bonesSize = crc3.getActiveUniformBlockParameter(_shader.program, bones, crc3.UNIFORM_BLOCK_DATA_SIZE);
                renderBuffers.mtxBones = crc3.createBuffer();
                crc3.bindBufferBase(WebGL2RenderingContext.UNIFORM_BUFFER, FudgeCore.UNIFORM_BLOCKS.SKIN.BINDING, renderBuffers.mtxBones);
                crc3.bufferData(WebGL2RenderingContext.UNIFORM_BUFFER, bonesSize, WebGL2RenderingContext.DYNAMIC_DRAW);
                crc3.uniformBlockBinding(_shader.program, bones, FudgeCore.UNIFORM_BLOCKS.SKIN.BINDING);
            }
            return renderBuffers;
        }
        static useRenderBuffers(_shader, _mtxMeshToWorld, _mtxMeshToView, _id, _mtxBones) {
            let renderBuffers = super.useRenderBuffers.call(this, _shader, _mtxMeshToWorld, _mtxMeshToView, _id);
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            const aIBone = _shader.attributes["a_iBone"];
            if (aIBone) {
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, renderBuffers.iBones);
                crc3.enableVertexAttribArray(aIBone);
                crc3.vertexAttribIPointer(aIBone, 4, WebGL2RenderingContext.UNSIGNED_BYTE, 0, 0);
            }
            const aWeight = _shader.attributes["a_fWeight"];
            if (aWeight) {
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, renderBuffers.weights);
                crc3.enableVertexAttribArray(aWeight);
                crc3.vertexAttribPointer(aWeight, 4, WebGL2RenderingContext.FLOAT, false, 0, 0);
            }
            if (_mtxBones) {
                const skin = crc3.getUniformBlockIndex(_shader.program, FudgeCore.UNIFORM_BLOCKS.SKIN.NAME);
                crc3.uniformBlockBinding(_shader.program, skin, FudgeCore.UNIFORM_BLOCKS.SKIN.BINDING);
                crc3.bindBuffer(crc3.UNIFORM_BUFFER, renderBuffers.mtxBones);
                crc3.bufferSubData(crc3.UNIFORM_BUFFER, 0, new Float32Array(iterableFrom(_mtxBones)));
            }
            return renderBuffers;
        }
        static deleteRenderBuffers(_renderBuffers) {
            super.deleteRenderBuffers(_renderBuffers);
            const crc3 = FudgeCore.RenderWebGL.getRenderingContext();
            if (_renderBuffers) {
                crc3.bindBuffer(WebGL2RenderingContext.ARRAY_BUFFER, null);
                crc3.deleteBuffer(_renderBuffers.iBones);
                crc3.deleteBuffer(_renderBuffers.weights);
                crc3.deleteBuffer(_renderBuffers.mtxBones);
            }
        }
    }
    FudgeCore.RenderInjectorMeshSkin = RenderInjectorMeshSkin;
    function* iterableFrom(_matrices) {
        for (const matrix of _matrices)
            for (const value of matrix.get())
                yield value;
    }
})(FudgeCore || (FudgeCore = {}));
///<reference path="./../Render/RenderInjectorMeshSkin.ts"/>
///<reference path="./MeshImport.ts"/>
var FudgeCore;
///<reference path="./../Render/RenderInjectorMeshSkin.ts"/>
///<reference path="./MeshImport.ts"/>
(function (FudgeCore) {
    /**
     * Mesh influenced by a skeleton and loaded from a file
     * @author Matthias Roming, HFU, 2022-2023
     */
    let MeshSkin = class MeshSkin extends FudgeCore.MeshImport {
        useRenderBuffers(_shader, _mtxWorld, _mtxProjection, _id, _mtxBones) { return null; /* injected by RenderInjector*/ }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
        }
    };
    MeshSkin = __decorate([
        FudgeCore.RenderInjectorMeshSkin.decorate
    ], MeshSkin);
    FudgeCore.MeshSkin = MeshSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a UV Sphere with a given number of sectors and stacks (clamped at 128*128)
     * Implementation based on http://www.songho.ca/opengl/gl_sphere.html
     * @authors Simon Storl-Schulke, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class MeshSphere extends FudgeCore.MeshRotation {
        constructor(_name = "MeshSphere", _longitudes = 8, _latitudes = 8) {
            super(_name);
            this.create(_longitudes, _latitudes);
        }
        create(_longitudes = 3, _latitudes = 2) {
            this.clear();
            //Clamp resolution to prevent performance issues
            this.longitudes = Math.min(Math.round(_longitudes), 128);
            this.latitudes = Math.min(Math.round(_latitudes), 128);
            if (_longitudes < 3 || _latitudes < 2) {
                FudgeCore.Debug.warn("UV Sphere must have at least 3 longitudes and 2 latitudes to form a 3-dimensional shape.");
                this.longitudes = Math.max(3, _longitudes);
                this.latitudes = Math.max(2, _latitudes);
            }
            let shape = [];
            let step = Math.PI / this.latitudes;
            for (let i = 0; i <= this.latitudes; ++i) {
                let angle = Math.PI / 2 - i * step;
                let x = Math.cos(angle);
                let y = Math.sin(angle);
                shape.push(new FudgeCore.Vector2(x / 2, y / 2));
            }
            // place first and last vertex exactly on rotation axis
            shape[0].x = 0;
            shape[shape.length - 1].x = 0;
            super.rotate(shape, _longitudes);
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            delete serialization.shape;
            serialization.latitudes = this.latitudes;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            this.create(_serialization.longitudes, _serialization.latitudes);
            return this;
        }
        async mutate(_mutator) {
            super.mutate(_mutator);
            this.create(this.longitudes, this.latitudes);
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.shape;
        }
    }
    MeshSphere.iSubclass = FudgeCore.Mesh.registerSubclass(MeshSphere);
    FudgeCore.MeshSphere = MeshSphere;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate two quads placed back to back, the one facing in negative Z-direction is textured reversed
     * ```plaintext
     *        0 __ 3
     *         |__|
     *        1    2
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class MeshSprite extends FudgeCore.Mesh {
        constructor(_name = "MeshSprite") {
            super(_name);
            this.vertices = new FudgeCore.Vertices(new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, 0.5, 0), new FudgeCore.Vector2(0, 0)), new FudgeCore.Vertex(new FudgeCore.Vector3(-0.5, -0.5, 0), new FudgeCore.Vector2(0, 1)), new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, -0.5, 0), new FudgeCore.Vector2(1, 1)), new FudgeCore.Vertex(new FudgeCore.Vector3(0.5, 0.5, 0), new FudgeCore.Vector2(1, 0)));
            this.faces = [
                new FudgeCore.Face(this.vertices, 1, 2, 0),
                new FudgeCore.Face(this.vertices, 2, 3, 0),
                new FudgeCore.Face(this.vertices, 0, 3, 1),
                new FudgeCore.Face(this.vertices, 3, 2, 1)
            ];
        }
        // flat is standard here
        get verticesFlat() { return this.renderMesh.vertices; }
        get indicesFlat() { return this.renderMesh.indices; }
    }
    MeshSprite.iSubclass = FudgeCore.Mesh.registerSubclass(MeshSprite);
    FudgeCore.MeshSprite = MeshSprite;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Generate a Torus with a given thickness and the number of major- and minor segments
     * @authors Simon Storl-Schulke, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2020
     */
    class MeshTorus extends FudgeCore.MeshRotation {
        constructor(_name = "MeshTorus", _size = 0.25, _longitudes = 8, _latitudes = 6) {
            super(_name, MeshTorus.getShape(_size, Math.max(3, _latitudes)), _longitudes);
            this.size = 0.25;
            this.latitudes = 12;
            this.size = _size;
            this.longitudes = _longitudes;
            this.latitudes = Math.max(3, _latitudes);
        }
        static getShape(_size, _latitudes) {
            let shape = [];
            let radius = _size / 2;
            let center = new FudgeCore.Vector2(0.25 + radius, 0);
            for (let latitude = 0; latitude <= _latitudes; latitude++) {
                let angle = 2 * Math.PI * latitude / _latitudes;
                shape.push(FudgeCore.Vector2.SUM(center, new FudgeCore.Vector2(radius * -Math.cos(angle), radius * Math.sin(angle))));
            }
            return shape;
        }
        create(_size = 0.25, _longitudes = 8, _latitudes = 6) {
            this.size = _size;
            this.latitudes = Math.max(3, _latitudes);
            super.rotate(MeshTorus.getShape(_size, _latitudes), _longitudes);
        }
        //#region Transfer
        serialize() {
            let serialization = super.serialize();
            serialization.latitudes = this.latitudes;
            serialization.size = this.size;
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            this.create(_serialization.size, _serialization.longitudes, _serialization.latitudes);
            return this;
        }
        async mutate(_mutator) {
            super.mutate(_mutator);
            this.create(this.size, this.longitudes, this.latitudes);
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.shape;
        }
    }
    MeshTorus.iSubclass = FudgeCore.Mesh.registerSubclass(MeshTorus);
    FudgeCore.MeshTorus = MeshTorus;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let QUADSPLIT;
    (function (QUADSPLIT) {
        QUADSPLIT[QUADSPLIT["PLANAR"] = 0] = "PLANAR";
        QUADSPLIT[QUADSPLIT["AT_0"] = 1] = "AT_0";
        QUADSPLIT[QUADSPLIT["AT_1"] = 2] = "AT_1";
    })(QUADSPLIT = FudgeCore.QUADSPLIT || (FudgeCore.QUADSPLIT = {}));
    /**
     * A surface created with four vertices which immediately creates none, one or two {@link Face}s depending on vertices at identical positions.
     * ```plaintext
     * QUADSPLIT:  PLANAR                  AT_0                     AT_1
     *             0 _ 3                   0 _ 3                    0 _ 3
     *              |\|                     |\|                      |/|
     *             1 ‚Äæ 2                   1 ‚Äæ 2                    1 ‚Äæ 2
     *  shared last vertex 2      last vertices 2 + 3      last vertices 3 + 0
     *
     * ```
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class Quad {
        constructor(_vertices, _index0, _index1, _index2, _index3, _split = QUADSPLIT.PLANAR) {
            this.faces = [];
            this.#split = _split;
            try {
                if (_split != QUADSPLIT.AT_1)
                    this.faces.push(new FudgeCore.Face(_vertices, _index0, _index1, _index2));
                else
                    this.faces.push(new FudgeCore.Face(_vertices, _index1, _index2, _index3));
            }
            catch (_e) {
                FudgeCore.Debug.fudge("Face excluded", _e.message);
            }
            try {
                if (_split == QUADSPLIT.PLANAR)
                    this.faces.push(new FudgeCore.Face(_vertices, _index3, _index0, _index2));
                else if (_split == QUADSPLIT.AT_0)
                    this.faces.push(new FudgeCore.Face(_vertices, _index0, _index2, _index3));
                else
                    this.faces.push(new FudgeCore.Face(_vertices, _index1, _index3, _index0));
            }
            catch (_e) {
                FudgeCore.Debug.fudge("Face excluded", _e.message);
            }
        }
        #split;
        get split() {
            return this.#split;
        }
    }
    FudgeCore.Quad = Quad;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class Vertex {
        /**
         * Represents a vertex of a mesh with extended information such as the uv coordinates and the vertex normal.
         * It may refer to another vertex via an index into some array, in which case the position and the normal are stored there.
         * This way, vertex position and normal is a 1:1 association, vertex to texture coordinates a 1:n association.
       * @authors Jirka Dell'Oro-Friedl, HFU, 2022
         */
        constructor(_positionOrIndex, _uv = null, _normal = FudgeCore.Vector3.ZERO()) {
            if (_positionOrIndex instanceof FudgeCore.Vector3)
                this.position = _positionOrIndex;
            else
                this.referTo = _positionOrIndex;
            this.uv = _uv;
            this.normal = _normal;
        }
    }
    FudgeCore.Vertex = Vertex;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Array with extended functionality to serve as a {@link Vertex}-cloud.
     * Accessors yield position or normal also for vertices referencing other vertices
     * @authors Jirka Dell'Oro-Friedl, HFU, 2022
     */
    class Vertices extends Array {
        // TODO: this class may become more powerful by hiding the array and add more service methods like calculating bounding box, radius etc.
        // see if a proxy of the array interfacing [] would do a good job -> tested: proxy is about 20 times slower!
        /**
         * Returns the subset of vertices that do not refer to other vertices
         */
        get originals() {
            return this.filter(_vertex => _vertex.referTo == undefined);
        }
        /**
         * returns the position associated with the vertex addressed, resolving references between vertices
         */
        position(_index) {
            let vertex = this[_index];
            return (vertex.referTo == undefined) ? vertex.position : this[vertex.referTo].position;
        }
        /**
         * returns the normal associated with the vertex addressed, resolving references between vertices
         */
        normal(_index) {
            let vertex = this[_index];
            return (vertex.referTo == undefined) ? vertex.normal : this[vertex.referTo].normal;
        }
        /**
         * returns the uv-coordinates associated with the vertex addressed
         */
        uv(_index) {
            return this[_index].uv;
        }
        /**
         * returns the position associated with the vertex addressed, resolving references between vertices
         */
        bones(_index) {
            let vertex = this[_index];
            return (vertex.referTo == undefined) ? vertex.bones : this[vertex.referTo].bones;
        }
    }
    FudgeCore.Vertices = Vertices;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Base class for MeshImport-loaders
     * @author Matthias Roming, HFU, 2023
     */
    class MeshLoader {
        static async load(_mesh, _data) {
            return _mesh;
        }
    }
    FudgeCore.MeshLoader = MeshLoader;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Filmbox mesh import
     * @authors Matthias Roming, HFU, 2023 | Jonas Plotzky, HFU, 2023
     */
    class MeshLoaderFBX extends FudgeCore.MeshLoader {
        static async load(_mesh, _data) {
            const loader = await FudgeCore.FBXLoader.LOAD(_mesh.url.toString());
            const geometryFBX = (_data ||
                loader.fbx.objects.geometries.find(object => object.name == _mesh.name) ||
                loader.fbx.objects.models.find(object => object.name == _mesh.name && object.subtype == "Mesh").children[0]).load();
            if (_data)
                _mesh.name = _data.name.length > 0 ? _data.name : _data.parents[0].name;
            let positions = [];
            let vertexBuffer = geometryFBX.Vertices;
            for (let iVertex = 0; iVertex < vertexBuffer.length; iVertex += 3) {
                positions.push(new FudgeCore.Vector3(vertexBuffer[iVertex + 0], vertexBuffer[iVertex + 1], vertexBuffer[iVertex + 2]));
            }
            let uvs = [];
            if (geometryFBX.LayerElementUV) {
                let uvBuffer = geometryFBX.LayerElementUV.UV;
                for (let iuv = 0; iuv < uvBuffer.length; iuv += 2) {
                    uvs.push(new FudgeCore.Vector2(uvBuffer[iuv], 1 - uvBuffer[iuv + 1]));
                }
            }
            let normals = [];
            if (geometryFBX.LayerElementNormal) {
                let normalBuffer = geometryFBX.LayerElementNormal.Normals;
                for (let iNormal = 0; iNormal < normalBuffer.length; iNormal += 3) {
                    normals.push(new FudgeCore.Vector3(normalBuffer[iNormal], normalBuffer[iNormal + 1], normalBuffer[iNormal + 2]));
                }
            }
            let mapVertexToIndex = new Map();
            let newVertexIndices = [];
            let iPolygon = 0;
            let isEndOfPolygon = false;
            let polygon = [];
            geometryFBX.PolygonVertexIndex.forEach((_iVertex, _iPolygonVertex) => {
                if (_iVertex < 0) {
                    _iVertex = _iVertex ^ -1;
                    isEndOfPolygon = true;
                }
                let position = positions[_iVertex];
                let uv = uvs[getDataIndex(geometryFBX.LayerElementUV, _iVertex, iPolygon, _iPolygonVertex)];
                let vertexKey = position.toString() + uv.toString();
                if (!mapVertexToIndex.has(vertexKey)) {
                    let normal = normals[getDataIndex(geometryFBX.LayerElementNormal, _iVertex, iPolygon, _iPolygonVertex)];
                    _mesh.vertices.push(new FudgeCore.Vertex(position, uv, normal));
                    mapVertexToIndex.set(vertexKey, _mesh.vertices.length - 1);
                    if (!newVertexIndices[_iVertex])
                        newVertexIndices[_iVertex] = [];
                    newVertexIndices[_iVertex].push(_mesh.vertices.length - 1);
                }
                polygon.push(mapVertexToIndex.get(vertexKey));
                if (isEndOfPolygon) {
                    if (polygon.length == 3) {
                        _mesh.faces.push(new FudgeCore.Face(_mesh.vertices, polygon[0], polygon[1], polygon[2]));
                    }
                    else if (polygon.length == 4) {
                        let quad = new FudgeCore.Quad(_mesh.vertices, polygon[0], polygon[1], polygon[2], polygon[3], FudgeCore.QUADSPLIT.AT_0);
                        _mesh.faces.push(...quad.faces);
                    }
                    else {
                        // could add proper triangulation here
                        console.warn(`${MeshLoaderFBX.name}: Polygons with more than 4 vertices are not supported.`);
                    }
                    polygon = [];
                    isEndOfPolygon = false;
                    iPolygon++;
                }
            });
            if (_mesh instanceof FudgeCore.MeshSkin) {
                const fbxDeformer = geometryFBX.children[0];
                const skeleton = await loader.getSkeleton(fbxDeformer.children[0].children[0]); // Deformer.SubDeformer.LimbNode
                createBones(fbxDeformer, skeleton, _mesh.vertices, newVertexIndices);
            }
            return _mesh;
        }
    }
    FudgeCore.MeshLoaderFBX = MeshLoaderFBX;
    function getDataIndex(_layerElement, _iVertex, _iPolygon, _iPolygonVertex) {
        let index = _layerElement.MappingInformationType == "ByVertex" ?
            _iVertex :
            _layerElement.MappingInformationType == "ByPolygon" ?
                _iPolygon :
                _iPolygonVertex;
        if (_layerElement.ReferenceInformationType === 'IndexToDirect') {
            let indices = _layerElement.UVIndex || _layerElement.NormalsIndex;
            index = indices[index];
        }
        return index;
    }
    function createBones(_deformerFBX, _skeleton, _vertices, _newVertexIndices) {
        for (const fbxSubDeformer of _deformerFBX.children) {
            fbxSubDeformer.load();
            if (fbxSubDeformer.Indexes)
                for (let iBoneInfluence = 0; iBoneInfluence < fbxSubDeformer.Indexes.length; iBoneInfluence++) {
                    const iVertex = fbxSubDeformer.Indexes[iBoneInfluence];
                    for (const iVertexNew of _newVertexIndices ? _newVertexIndices[iVertex] : [iVertex]) {
                        (_vertices[iVertexNew].bones || (_vertices[iVertexNew].bones = [])).push({
                            index: _skeleton.indexOfBone(fbxSubDeformer.children[0].name),
                            weight: fbxSubDeformer.Weights[iBoneInfluence] || 1
                        });
                    }
                }
        }
    }
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * gl Transfer Format mesh import
     * @author Matthias Roming, HFU, 2022-2023
     */
    class MeshLoaderGLTF extends FudgeCore.MeshLoader {
        static async load(_mesh, _data) {
            const loader = await FudgeCore.GLTFLoader.LOAD(_mesh.url.toString());
            const meshGLTF = _data || loader.gltf.meshes.find(gltfMesh => gltfMesh.name == _mesh.name);
            const renderMesh = Reflect.get(_mesh, "renderMesh");
            _mesh.name = _data.name;
            Reflect.set(renderMesh, "∆íindices", await loader.getUint16Array(meshGLTF.primitives[0].indices));
            Reflect.set(renderMesh, "∆ívertices", await loader.getFloat32Array(meshGLTF.primitives[0].attributes.POSITION));
            if (meshGLTF.primitives[0].attributes.NORMAL)
                Reflect.set(renderMesh, "∆ínormalsVertex", await loader.getFloat32Array(meshGLTF.primitives[0].attributes.NORMAL));
            if (meshGLTF.primitives[0].attributes.TEXCOORD_0)
                Reflect.set(renderMesh, "∆ítextureUVs", await loader.getFloat32Array(meshGLTF.primitives[0].attributes.TEXCOORD_0));
            _mesh.vertices.push(...getVertices(renderMesh));
            _mesh.faces.push(...getFaces(renderMesh, _mesh.vertices));
            if (_mesh instanceof FudgeCore.MeshSkin) {
                Reflect.set(renderMesh, "∆íiBones", await loader.getUint8Array(meshGLTF.primitives[0].attributes.JOINTS_0));
                Reflect.set(renderMesh, "∆íweights", await loader.getFloat32Array(meshGLTF.primitives[0].attributes.WEIGHTS_0));
                createBones(renderMesh, _mesh.vertices);
            }
            return _mesh;
        }
    }
    FudgeCore.MeshLoaderGLTF = MeshLoaderGLTF;
    function* getVertices(_renderMesh) {
        for (let iVertex = 0, iTextureUV = 0; iVertex < _renderMesh.vertices.length; iVertex += 3, iTextureUV += 2) {
            yield new FudgeCore.Vertex(new FudgeCore.Vector3(_renderMesh.vertices[iVertex + 0], _renderMesh.vertices[iVertex + 1], _renderMesh.vertices[iVertex + 2]), new FudgeCore.Vector2(_renderMesh.textureUVs[iTextureUV + 0], _renderMesh.textureUVs[iTextureUV + 1]), new FudgeCore.Vector3(_renderMesh.normalsVertex[iVertex + 0], _renderMesh.normalsVertex[iVertex + 1], _renderMesh.normalsVertex[iVertex + 2]));
        }
    }
    function* getFaces(_renderMesh, _vertices) {
        for (let iFaceVertexIndex = 0; iFaceVertexIndex < _renderMesh.indices.length; iFaceVertexIndex += 3) {
            yield new FudgeCore.Face(_vertices, _renderMesh.indices[iFaceVertexIndex + 0], _renderMesh.indices[iFaceVertexIndex + 1], _renderMesh.indices[iFaceVertexIndex + 2]);
        }
    }
    function createBones(_renderMesh, _vertices) {
        for (let iVertex = 0, iBoneEntry = 0; iVertex < _vertices.length; iVertex++) {
            _vertices[iVertex].bones = [];
            for (let i = 0; i < 4; i++, iBoneEntry++) {
                _vertices[iVertex].bones.push({
                    index: _renderMesh.iBones[iBoneEntry],
                    weight: _renderMesh.weights[iBoneEntry]
                });
            }
        }
    }
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Simple Wavefront OBJ import. Takes a wavefront obj string. To Load from a file url, use the
     * static LOAD Method. Currently only works with triangulated Meshes
     * (activate 'Geomentry ‚Üí Triangulate Faces' in Blenders obj exporter)
     * @todo UVs, Load Materials, Support Quads
     * @authors Simon Storl-Schulke 2021 | Luis Keck, HFU, 2021 | Jirka Dell'Oro-Friedl, HFU, 2021-2022 | Matthias Roming, HFU, 2023
     */
    class MeshLoaderOBJ extends FudgeCore.MeshLoader {
        static async load(_mesh) {
            let url = new URL(_mesh.url.toString(), FudgeCore.Project.baseURL).toString();
            let data = await (await fetch(url)).text();
            _mesh.name = url.split("/").pop();
            parseObj(data, _mesh);
            return _mesh;
        }
    }
    FudgeCore.MeshLoaderOBJ = MeshLoaderOBJ;
    /** Splits up the obj string into separate arrays for each datatype */
    function parseObj(_data, _mesh) {
        const lines = _data.split("\n");
        let positions = [];
        let uvs = [];
        let normals = [];
        let faceInfo = [];
        for (let line of lines) {
            line = line.trim();
            if (!line || line.startsWith("#"))
                continue;
            const parts = line.split(" ");
            parts.shift();
            //Vertex - example: v 0.70 -0.45 -0.52
            if (line.startsWith("v "))
                positions.push(new FudgeCore.Vector3(...parts.map(_value => +_value)));
            //Normal - example: vn 0.00 0.00 1.00
            if (line.startsWith("vn "))
                normals.push(new FudgeCore.Vector3(...parts.map(_value => +_value)));
            //Texcoord - example: vt 0.545454 0.472382
            else if (line.startsWith("vt "))
                uvs.push(new FudgeCore.Vector2(...parts.map((_value, _index) => +_value * (_index == 1 ? -1 : 1))));
            /*Face Indices - example: f 1/1/1 2/2/1 3/3/1 -->
            vertex1/texcoord1/normal1 vertex2/texcoord2/normal2 vertex3/texcoord3/normal3*/
            else if (line.startsWith("f "))
                for (let i = 0; i < 3; i++) {
                    const indices = parts[i].split("/");
                    faceInfo.push({
                        iPosition: +indices[0] - 1,
                        iUV: +indices[1] - 1,
                        iNormal: +indices[2] - 1
                    });
                }
        }
        _mesh.vertices = new FudgeCore.Vertices();
        for (let i = 0; i < faceInfo.length; i += 3) {
            let indices = [];
            for (let v = 0; v < 3; v++) {
                let info = faceInfo[i + v];
                // A lot of vertices with duplicate positions are (probably) created here,
                // since in obj files the face defines the connectivity of the vertices, UV coordinates, and normals (see above).
                // However, in Fudge, each vertex has its own UV coordinates and normals directley associated with it.
                _mesh.vertices.push(new FudgeCore.Vertex(positions[info.iPosition], uvs[info.iUV], normals[info.iNormal]));
                indices.push(_mesh.vertices.length - 1);
            }
            try {
                _mesh.faces.push(new FudgeCore.Face(_mesh.vertices, indices[0], indices[1], indices[2]));
            }
            catch (_e) {
                FudgeCore.Debug.fudge("Face excluded", _e.message);
            }
        }
    }
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The namesapce for handling the particle data
     */
    let ParticleData;
    (function (ParticleData) {
        function isExpression(_data) {
            return isFunction(_data) || isVariable(_data) || isConstant(_data) || isCode(_data);
        }
        ParticleData.isExpression = isExpression;
        function isFunction(_data) {
            return typeof _data == "object" && "function" in _data;
        }
        ParticleData.isFunction = isFunction;
        function isVariable(_data) {
            return typeof _data == "object" && "value" in _data && typeof _data.value == "string";
        }
        ParticleData.isVariable = isVariable;
        function isConstant(_data) {
            return typeof _data == "object" && "value" in _data && typeof _data.value == "number";
        }
        ParticleData.isConstant = isConstant;
        function isCode(_data) {
            return typeof _data == "object" && "code" in _data;
        }
        ParticleData.isCode = isCode;
        function isTransformation(_data) {
            return typeof _data == "object" && "transformation" in _data;
        }
        ParticleData.isTransformation = isTransformation;
    })(ParticleData = FudgeCore.ParticleData || (FudgeCore.ParticleData = {}));
    /**
     * Holds information on how to mutate the particles of a particle system.
     * A full particle system is composed by attaching a {@link ComponentParticleSystem}, {@link ComponentMesh} and {@link ComponentMaterial} to the same {@link Node}.
     * Additionally a {@link ComponentFaceCamera} can be attached to make the particles face the camera.
     * @authors Jonas Plotzky, HFU, 2022
     */
    class ParticleSystem extends FudgeCore.Mutable {
        constructor(_name = ParticleSystem.name, _data = {}) {
            super();
            this.idResource = undefined;
            /** Map of shader universal derivates to corresponding computed {@link ShaderParticleSystem}.
             * This way each particle system resource can be used in conjunction with all shader universal derivates */
            this.#shaderToShaderParticleSystem = new Map();
            this.name = _name;
            this.data = _data;
            FudgeCore.Project.register(this);
        }
        #data;
        /** Map of shader universal derivates to corresponding computed {@link ShaderParticleSystem}.
         * This way each particle system resource can be used in conjunction with all shader universal derivates */
        #shaderToShaderParticleSystem;
        get data() {
            return this.#data;
        }
        set data(_data) {
            this.#data = _data;
            this.#shaderToShaderParticleSystem.forEach(_shader => _shader.deleteProgram());
            this.#shaderToShaderParticleSystem.clear();
        }
        /**
         * Returns a corresponding {@link ShaderParticleSystem} for the given shader universal derivate.
         * @param _source the shader universal derivate to use as a base for the particle system
         * @returns the corresponding {@link ShaderParticleSystem}
         */
        getShaderFrom(_source) {
            if (!this.#shaderToShaderParticleSystem.has(_source)) {
                let particleShader = new FudgeCore.ShaderParticleSystem();
                particleShader.data = this.data;
                particleShader.define = [...particleShader.define, ..._source.define];
                particleShader.vertexShaderSource = _source.getVertexShaderSource();
                particleShader.fragmentShaderSource = _source.getFragmentShaderSource();
                this.#shaderToShaderParticleSystem.set(_source, particleShader);
            }
            return this.#shaderToShaderParticleSystem.get(_source);
        }
        //#region Transfer
        serialize() {
            let serialization = {
                idResource: this.idResource,
                name: this.name,
                data: this.data
            };
            return serialization;
        }
        async deserialize(_serialization) {
            FudgeCore.Project.register(this, _serialization.idResource);
            this.name = _serialization.name;
            this.data = _serialization.data;
            return this;
        }
        getMutatorForUserInterface() {
            return super.getMutator(); // remove data from mutator
        }
        getMutator() {
            let mutator = super.getMutator(true);
            mutator.data = this.data;
            return mutator;
        }
        reduceMutator(_mutator) {
            delete _mutator.cachedMutators;
            delete _mutator.shaderMap;
        }
    }
    FudgeCore.ParticleSystem = ParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A WebGL shaderprogramm for a particle system. Managed by a {@link ParticleSystem}. It uses {@link ParticleSystem.prototype.data} to generate and inject code into a shader universal derivate (GLSL) thus creating a shader particle system from a supplied {@link Shader}s vertex and fragment shader source code.
     */
    let ShaderParticleSystem = class ShaderParticleSystem {
        constructor() {
            this.define = ["PARTICLE"];
        }
        getVertexShaderSource() { return ""; /* injected by decorator */ }
        getFragmentShaderSource() { return ""; /* injected by decorator */ }
        deleteProgram() { }
        useProgram() { }
        createProgram() { }
    };
    ShaderParticleSystem = __decorate([
        FudgeCore.RenderInjectorShaderParticleSystem.decorate
    ], ShaderParticleSystem);
    FudgeCore.ShaderParticleSystem = ShaderParticleSystem;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Defines automatic adjustment of the collider
     */
    let BODY_INIT;
    (function (BODY_INIT) {
        /** Collider uses the pivot of the mesh for initilialization */
        BODY_INIT[BODY_INIT["TO_MESH"] = 0] = "TO_MESH";
        /** Collider uses the transform of the node for initilialization */
        BODY_INIT[BODY_INIT["TO_NODE"] = 1] = "TO_NODE";
        /** Collider uses its own pivot for initilialization */
        BODY_INIT[BODY_INIT["TO_PIVOT"] = 2] = "TO_PIVOT";
    })(BODY_INIT = FudgeCore.BODY_INIT || (FudgeCore.BODY_INIT = {}));
    /**
       * Acts as the physical representation of the {@link Node} it's attached to.
       * It's the connection between the FUDGE rendered world and the Physics world.
       * For the physics to correctly get the transformations rotations need to be applied with from left = true.
       * Or rotations need to happen before scaling.
       * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class ComponentRigidbody extends FudgeCore.Component {
        // #physics: Physics; //TODO: keep a pointer to the physics instance used by this component
        /** Creating a new rigidbody with a weight in kg, a physics type (default = dynamic), a collider type what physical form has the collider, to what group does it belong, is there a transform Matrix that should be used, and is the collider defined as a group of points that represent a convex mesh. */
        constructor(_mass = 1, _type = FudgeCore.BODY_TYPE.DYNAMIC, _colliderType = FudgeCore.COLLIDER_TYPE.CUBE, _group = FudgeCore.Physics.settings.defaultCollisionGroup, _mtxTransform = null, _convexMesh = null) {
            super();
            /** Transformation of the collider relative to the node's transform. Once set mostly remains constant.
             * If altered, {@link isInitialized} must be reset to false to recreate the collider in the next {@link Render.prepare}
             */
            this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
            /**
             * Vertices that build a convex mesh (form that is in itself closed). Needs to set in the construction of the rb if none of the standard colliders is used.
             * Untested and not yet fully supported by serialization and mutation.
             */
            this.convexMesh = null;
            /** Collisions with rigidbodies happening to this body, can be used to build a custom onCollisionStay functionality. */
            this.collisions = new Array();
            /** Triggers that are currently triggering this body */
            this.triggerings = new Array();
            /**
             * Automatic adjustment of the pivot when {@link Render.prepare} is called according to {@link BODY_INIT}
             */
            this.initialization = BODY_INIT.TO_PIVOT;
            /** Marks if collider was initialized. Reset to false to initialize again e.g. after manipulation of mtxPivot */
            this.isInitialized = false;
            /** ID to reference this specific ComponentRigidbody */
            this.#id = 0;
            this.#collisionGroup = FudgeCore.COLLISION_GROUP.DEFAULT;
            this.#typeCollider = FudgeCore.COLLIDER_TYPE.CUBE;
            this.#rigidbodyInfo = new OIMO.RigidBodyConfig();
            this.#typeBody = FudgeCore.BODY_TYPE.DYNAMIC;
            this.#massData = new OIMO.MassData();
            this.#dampingLinear = 0.1;
            this.#dampingAngular = 0.1;
            this.#effectRotation = FudgeCore.Vector3.ONE();
            this.#effectGravity = 1;
            this.#isTrigger = false;
            this.#mtxPivotUnscaled = FudgeCore.Matrix4x4.IDENTITY();
            this.#mtxPivotInverse = FudgeCore.Matrix4x4.IDENTITY();
            //#endregion
            // Activate the functions of this component as response to events
            this.hndEvent = (_event) => {
                switch (_event.type) {
                    case "componentAdd" /* COMPONENT_ADD */:
                        // this.addEventListener(EVENT.COMPONENT_ACTIVATE, this.addRigidbodyToWorld);
                        this.addEventListener("componentDeactivate" /* COMPONENT_DEACTIVATE */, this.removeRigidbodyFromWorld);
                        // this.node.addEventListener(EVENT.NODE_ACTIVATE, this.addRigidbodyToWorld, true); // use capture to react to broadcast!
                        this.node.addEventListener("nodeDeactivate" /* NODE_DEACTIVATE */, this.removeRigidbodyFromWorld, true);
                        if (!this.node.cmpTransform)
                            FudgeCore.Debug.warn("ComponentRigidbody attached to node missing ComponentTransform", this.node);
                        break;
                    case "componentRemove" /* COMPONENT_REMOVE */:
                        // this.removeEventListener(EVENT.COMPONENT_ADD, this.addRigidbodyToWorld);
                        this.removeEventListener("componentRemove" /* COMPONENT_REMOVE */, this.removeRigidbodyFromWorld);
                        // this.node.removeEventListener(EVENT.NODE_ACTIVATE, this.addRigidbodyToWorld, true); // use capture to react to broadcast!
                        this.node.removeEventListener("nodeDeactivate" /* NODE_DEACTIVATE */, this.removeRigidbodyFromWorld, true);
                        this.removeRigidbodyFromWorld();
                        break;
                    case "nodeDeserialized" /* NODE_DESERIALIZED */:
                        if (!this.node.cmpTransform)
                            FudgeCore.Debug.error("ComponentRigidbody attached to node missing ComponentTransform", this.node);
                        break;
                }
            };
            /** Adding this ComponentRigidbody to the Physiscs.world giving the oimoPhysics system the information needed */
            this.addRigidbodyToWorld = () => {
                if (!this.#rigidbody._world)
                    FudgeCore.Physics.addRigidbody(this);
            };
            /** Removing this ComponentRigidbody from the Physiscs.world taking the informations from the oimoPhysics system */
            this.removeRigidbodyFromWorld = () => {
                FudgeCore.Physics.removeRigidbody(this);
                this.isInitialized = false;
            };
            this.create(_mass, _type, _colliderType, _group, _mtxTransform, _convexMesh);
            this.addEventListener("componentAdd" /* COMPONENT_ADD */, this.hndEvent);
            this.addEventListener("componentRemove" /* COMPONENT_REMOVE */, this.hndEvent);
            // this.addEventListener(EVENT.NODE_DESERIALIZED, this.hndEvent);
        }
        /** ID to reference this specific ComponentRigidbody */
        #id;
        //Private informations - Mostly OimoPhysics variables that should not be exposed to the FUDGE User and manipulated by them
        #collider;
        #colliderInfo;
        #collisionGroup;
        #typeCollider;
        #rigidbody;
        #rigidbodyInfo;
        #typeBody;
        #massData;
        #restitution;
        #friction;
        #dampingLinear;
        #dampingAngular;
        #effectRotation;
        #effectGravity;
        #isTrigger;
        #mtxPivotUnscaled;
        #mtxPivotInverse;
        #callbacks; //Callback Methods when within the oimoSystem a event is happening
        //#region Accessors
        get id() {
            return this.#id;
        }
        /** Used for calculation of the geometrical relationship of node and collider by {@link Render}*/
        get mtxPivotInverse() {
            return this.#mtxPivotInverse;
        }
        /** Used for calculation of the geometrical relationship of node and collider by {@link Render}*/
        get mtxPivotUnscaled() {
            return this.#mtxPivotUnscaled;
        }
        /** Retrieve the body type. See {@link BODY_TYPE} */
        get typeBody() {
            return this.#typeBody;
        }
        /** Set the body type. See {@link BODY_TYPE} */
        set typeBody(_value) {
            this.#typeBody = _value;
            this.#rigidbody.setType(ComponentRigidbody.mapBodyType[this.#typeBody]);
            this.#rigidbody.setMassData(this.#massData); //have to reset mass after changing the type, since Oimo is handling mass internally wrong when switching types
        }
        /** The shape that represents the {@link Node} in the physical world. Default is a Cube. */
        get typeCollider() {
            return this.#typeCollider;
        }
        set typeCollider(_value) {
            if (_value != this.#typeCollider && this.#rigidbody != null) {
                this.#typeCollider = _value;
                this.initialize();
            }
        }
        /** The collision group this {@link Node} belongs to it's the default group normally which means it physically collides with every group besides trigger. */
        get collisionGroup() {
            return this.#collisionGroup;
        }
        set collisionGroup(_value) {
            this.#collisionGroup = _value;
            if (this.#rigidbody != null)
                this.#rigidbody.getShapeList().setCollisionGroup(this.#collisionGroup);
        }
        /** Marking the Body as a trigger therefore not influencing the collision system but only sending triggerEvents */
        get isTrigger() {
            return this.#isTrigger;
        }
        set isTrigger(_value) {
            this.#isTrigger = _value;
            if (this.getOimoRigidbody() != null) {
                this.getOimoRigidbody()._isTrigger = this.#isTrigger;
            }
        }
        /**
         * Returns the physical weight of the {@link Node}
         */
        get mass() {
            return this.#rigidbody.getMass();
        }
        /**
         * Setting the physical weight of the {@link Node} in kg
         */
        set mass(_value) {
            this.#massData.mass = _value;
            if (this.node != null)
                if (this.#rigidbody != null)
                    this.#rigidbody.setMassData(this.#massData);
        }
        /** Drag of linear movement. A Body does slow down even on a surface without friction. */
        get dampTranslation() {
            return this.#rigidbody.getLinearDamping();
        }
        set dampTranslation(_value) {
            this.#dampingLinear = _value;
            this.#rigidbody.setLinearDamping(_value);
        }
        /** Drag of rotation. */
        get dampRotation() {
            return this.#rigidbody.getAngularDamping();
        }
        set dampRotation(_value) {
            this.#dampingAngular = _value;
            this.#rigidbody.setAngularDamping(_value);
        }
        /** The factor this rigidbody reacts rotations that happen in the physical world. 0 to lock rotation this axis. */
        get effectRotation() {
            return this.#effectRotation;
        }
        set effectRotation(_effect) {
            this.#effectRotation = _effect;
            this.#rigidbody.setRotationFactor(new OIMO.Vec3(this.#effectRotation.x, this.#effectRotation.y, this.#effectRotation.z));
        }
        /** The factor this rigidbody reacts to world gravity. Default = 1 e.g. 1*9.81 m/s. */
        get effectGravity() {
            return this.#effectGravity;
        }
        set effectGravity(_effect) {
            this.#effectGravity = _effect;
            if (this.#rigidbody != null)
                this.#rigidbody.setGravityScale(this.#effectGravity);
        }
        /**
         * Get the friction of the rigidbody, which is the factor of sliding resistance of this rigidbody on surfaces
         */
        get friction() {
            return this.#friction;
        }
        /**
         * Set the friction of the rigidbody, which is the factor of  sliding resistance of this rigidbody on surfaces
         */
        set friction(_friction) {
            this.#friction = _friction;
            if (this.#rigidbody.getShapeList() != null)
                this.#rigidbody.getShapeList().setFriction(this.#friction);
        }
        /**
         * Get the restitution of the rigidbody, which is the factor of bounciness of this rigidbody on surfaces
         */
        get restitution() {
            return this.#restitution;
        }
        /**
         * Set the restitution of the rigidbody, which is the factor of bounciness of this rigidbody on surfaces
         */
        set restitution(_restitution) {
            this.#restitution = _restitution;
            if (this.#rigidbody.getShapeList() != null)
                this.#rigidbody.getShapeList().setRestitution(this.#restitution);
        }
        //#region Transformation
        /**
         * Returns the rigidbody in the form the physics engine is using it, should not be used unless a functionality
         * is not provided through the FUDGE Integration.
         */
        getOimoRigidbody() {
            return this.#rigidbody;
        }
        /** Rotating the rigidbody therefore changing it's rotation over time directly in physics. This way physics is changing instead of transform.
         *  But you are able to incremental changing it instead of a direct rotation.  Although it's always prefered to use forces in physics.
         */
        rotateBody(_rotationChange) {
            this.#rigidbody.rotateXyz(new OIMO.Vec3(_rotationChange.x * FudgeCore.Calc.deg2rad, _rotationChange.y * FudgeCore.Calc.deg2rad, _rotationChange.z * FudgeCore.Calc.deg2rad));
        }
        /** Translating the rigidbody therefore changing it's place over time directly in physics. This way physics is changing instead of transform.
         *  But you are able to incrementally changing it instead of a direct position. Although it's always prefered to use forces in physics.
         */
        translateBody(_translationChange) {
            this.#rigidbody.translate(new OIMO.Vec3(_translationChange.x, _translationChange.y, _translationChange.z));
        }
        /**
         * Get the current POSITION of the {@link Node} in the physical space
         */
        getPosition() {
            let tmpPos = this.#rigidbody.getPosition();
            return new FudgeCore.Vector3(tmpPos.x, tmpPos.y, tmpPos.z);
        }
        /**
         * Sets the current POSITION of the {@link Node} in the physical space
         */
        setPosition(_value) {
            this.#rigidbody.setPosition(new OIMO.Vec3(_value.x, _value.y, _value.z));
        }
        /**
         * Get the current ROTATION of the {@link Node} in the physical space. Note this range from -pi to pi, so -90 to 90.
         */
        getRotation() {
            let orientation = this.#rigidbody.getOrientation();
            let tmpQuat = new FudgeCore.Quaternion(orientation.x, orientation.y, orientation.z, orientation.w);
            return tmpQuat.eulerAngles;
        }
        /**
         * Sets the current ROTATION of the {@link Node} in the physical space, in degree.
         */
        setRotation(_value) {
            let quat = new OIMO.Quat();
            let mtxRot = FudgeCore.Matrix4x4.IDENTITY();
            mtxRot.rotate(new FudgeCore.Vector3(_value.x, _value.y, _value.z));
            let array = mtxRot.get();
            let rot = new OIMO.Mat3(array[0], array[4], array[8], array[1], array[5], array[9], array[2], array[6], array[10]);
            quat.fromMat3(rot);
            // quat.normalize();
            this.#rigidbody.setOrientation(quat);
        }
        /** Get the current SCALING in the physical space. */
        getScaling() {
            let scaling = this.node.mtxWorld.scaling.clone;
            scaling.x *= this.mtxPivot.scaling.x;
            scaling.y *= this.mtxPivot.scaling.y;
            scaling.z *= this.mtxPivot.scaling.z;
            return scaling;
        }
        /** Scaling requires the collider to be completely recreated anew */
        setScaling(_value) {
            // let scaling: Vector3 = _value.clone;   
            this.createCollider(new OIMO.Vec3(_value.x / 2, _value.y / 2, _value.z / 2), this.#typeCollider); //recreate the collider
            this.#collider = new OIMO.Shape(this.#colliderInfo);
            let oldCollider = this.#rigidbody.getShapeList();
            this.#rigidbody.addShape(this.#collider); //add new collider, before removing the old, so the rb is never active with 0 colliders
            this.#rigidbody.removeShape(oldCollider); //remove the old collider
            this.#collider.userData = this; //reset the extra information so that this collider knows to which FUDGE Component it's connected
            this.#collider.setCollisionGroup(this.collisionGroup);
            this.#collider.setCollisionMask(this.collisionMask);
            this.#collider.setRestitution(this.#restitution);
            this.#collider.setFriction(this.#friction);
            this.#collider.setContactCallback(this.#callbacks);
        }
        /**
         * Initializes the rigidbody according to its initialization setting to match the mesh, the node or its own pivot matrix
         */
        initialize() {
            if (!this.node) // delay initialization until this rigidbody is attached to a node
                return;
            switch (Number(this.initialization)) {
                case BODY_INIT.TO_NODE:
                    this.mtxPivot = FudgeCore.Matrix4x4.IDENTITY();
                    break;
                case BODY_INIT.TO_MESH:
                    let cmpMesh = this.node.getComponent(FudgeCore.ComponentMesh);
                    if (cmpMesh)
                        this.mtxPivot = cmpMesh.mtxPivot.clone;
                    break;
                case BODY_INIT.TO_PIVOT:
                    break;
            }
            let mtxWorld = FudgeCore.Matrix4x4.MULTIPLICATION(this.node.mtxWorld, this.mtxPivot);
            let position = mtxWorld.translation; //Adding the offsets from the pivot
            let rotation = mtxWorld.getEulerAngles();
            let scaling = mtxWorld.scaling;
            //scaling requires collider to be recreated
            this.setScaling(scaling);
            this.#rigidbody.setMassData(this.#massData);
            this.setPosition(position); //set the actual new rotation/position for this Rb again since it's now updated
            this.setRotation(rotation);
            let scalingInverse = this.node.mtxWorld.scaling.map(_i => 1 / _i);
            this.#mtxPivotUnscaled = FudgeCore.Matrix4x4.CONSTRUCTION({ translation: this.mtxPivot.translation, rotation: this.mtxPivot.rotation, scaling: scalingInverse });
            this.#mtxPivotInverse = FudgeCore.Matrix4x4.INVERSION(this.#mtxPivotUnscaled);
            this.addRigidbodyToWorld();
            this.isInitialized = true;
        }
        //#endregion
        //#region Velocity and Forces
        /**
        * Get the current VELOCITY of the {@link Node}
        */
        getVelocity() {
            let velocity = this.#rigidbody.getLinearVelocity();
            return new FudgeCore.Vector3(velocity.x, velocity.y, velocity.z);
        }
        /**
         * Sets the current VELOCITY of the {@link Node}
         */
        setVelocity(_value) {
            let velocity = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.#rigidbody.setLinearVelocity(velocity);
        }
        /**
         * Get the current ANGULAR - VELOCITY of the {@link Node}
         */
        getAngularVelocity() {
            let velocity = this.#rigidbody.getAngularVelocity();
            return new FudgeCore.Vector3(velocity.x, velocity.y, velocity.z);
        }
        /**
         * Sets the current ANGULAR - VELOCITY of the {@link Node}
         */
        setAngularVelocity(_value) {
            let velocity = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.#rigidbody.setAngularVelocity(velocity);
        }
        /**
        * Applies a continous FORCE at the center of the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS.
        * The force is measured in newton, 1kg needs about 10 Newton to fight against gravity.
        */
        applyForce(_force) {
            this.#rigidbody.applyForceToCenter(new OIMO.Vec3(_force.x, _force.y, _force.z));
        }
        /**
        * Applies a continous FORCE at a specific point in the world to the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS
        */
        applyForceAtPoint(_force, _worldPoint) {
            this.#rigidbody.applyForce(new OIMO.Vec3(_force.x, _force.y, _force.z), new OIMO.Vec3(_worldPoint.x, _worldPoint.y, _worldPoint.z));
        }
        /**
        * Applies a continous ROTATIONAL FORCE (Torque) to the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS
        */
        applyTorque(_rotationalForce) {
            this.#rigidbody.applyTorque(new OIMO.Vec3(_rotationalForce.x, _rotationalForce.y, _rotationalForce.z));
        }
        /**
        * Applies a instant FORCE at a point/rigidbodycenter to the RIGIDBODY in the three dimensions. Considering the rigidbod's MASS
        * Influencing the angular speed and the linear speed.
        */
        applyImpulseAtPoint(_impulse, _worldPoint = null) {
            _worldPoint = _worldPoint != null ? _worldPoint : this.getPosition();
            this.#rigidbody.applyImpulse(new OIMO.Vec3(_impulse.x, _impulse.y, _impulse.z), new OIMO.Vec3(_worldPoint.x, _worldPoint.y, _worldPoint.z));
        }
        /**
        * Applies a instant FORCE to the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS
        * Only influencing it's speed not rotation.
        */
        applyLinearImpulse(_impulse) {
            this.#rigidbody.applyLinearImpulse(new OIMO.Vec3(_impulse.x, _impulse.y, _impulse.z));
        }
        /**
       * Applies a instant ROTATIONAL-FORCE to the RIGIDBODY in the three dimensions. Considering the rigidbody's MASS
       * Only influencing it's rotation.
       */
        applyAngularImpulse(_rotationalImpulse) {
            this.#rigidbody.applyAngularImpulse(new OIMO.Vec3(_rotationalImpulse.x, _rotationalImpulse.y, _rotationalImpulse.z));
        }
        /**
       * Changing the VELOCITY of the RIGIDBODY. Only influencing the linear speed not angular
       */
        addVelocity(_value) {
            this.#rigidbody.addLinearVelocity(new OIMO.Vec3(_value.x, _value.y, _value.z));
        }
        /**
       * Changing the VELOCITY of the RIGIDBODY. Only influencing the angular speed not the linear
       */
        addAngularVelocity(_value) {
            this.#rigidbody.addAngularVelocity(new OIMO.Vec3(_value.x, _value.y, _value.z));
        }
        /** Stops the rigidbody from sleeping when movement is too minimal. Decreasing performance, for rarely more precise physics results */
        deactivateAutoSleep() {
            this.#rigidbody.setAutoSleep(false);
        }
        activateAutoSleep() {
            this.#rigidbody.setAutoSleep(true);
        }
        //#endregion
        //#region Collision
        /**
         * Checking for Collision with other Colliders and dispatches a custom event with information about the collider.
         * Automatically called in the RenderManager, no interaction needed.
         */
        checkCollisionEvents() {
            if (!this.isInitialized) // check collisions only if intialization completed
                return;
            let list = this.#rigidbody.getContactLinkList(); //all physical contacts between colliding bodies on this rb
            let objHit; //collision consisting of 2 bodies, so Hit1/2
            let objHit2;
            let event; //The event that will be send and the informations added to it
            let normalImpulse = 0;
            let binormalImpulse = 0;
            let tangentImpulse = 0;
            let colPoint;
            //ADD NEW Collision - That just happened
            for (let i = 0; i < this.#rigidbody.getNumContactLinks(); i++) {
                let collisionManifold = list.getContact().getManifold(); //Manifold = Additional informations about the contact
                objHit = list.getContact().getShape1().userData; //Userdata is used to transfer the ∆í.ComponentRigidbody, it's an empty OimoPhysics Variable
                //Only register the collision on the actual touch, not on "shadowCollide", to register in the moment of impulse calculation
                if (!objHit.isInitialized)
                    continue;
                if (objHit == null || list.getContact().isTouching() == false) // only act if the collision is actual touching, so right at the moment when a impulse is happening, not when shapes overlap
                    return;
                objHit2 = list.getContact().getShape2().userData;
                if (!objHit2.isInitialized)
                    continue;
                if (objHit2 == null || list.getContact().isTouching() == false)
                    return;
                let points = collisionManifold.getPoints(); //All points in the collision where the two bodies are touching, used to calculate the full impact
                let normal = collisionManifold.getNormal();
                if (objHit.getOimoRigidbody() != this.getOimoRigidbody() && this.collisions.indexOf(objHit) == -1) { //Fire, if the hit object is not the Body itself but another and it's not already fired.
                    let colPos = this.collisionCenterPoint(points, collisionManifold.getNumPoints()); //THE point of collision is the first touching point (EXTENSION: could be the center of all touching points combined)
                    colPoint = new FudgeCore.Vector3(colPos.x, colPos.y, colPos.z);
                    points.forEach((_value) => {
                        normalImpulse += _value.getNormalImpulse();
                        binormalImpulse += _value.getBinormalImpulse();
                        tangentImpulse += _value.getTangentImpulse();
                    });
                    this.collisions.push(objHit); //Tell the object that the event for this object does not need to be fired again
                    event = new FudgeCore.EventPhysics("ColliderEnteredCollision" /* COLLISION_ENTER */, objHit, normalImpulse, tangentImpulse, binormalImpulse, colPoint, new FudgeCore.Vector3(normal.x, normal.y, normal.z)); //Building the actual event, with what object did collide and informations about it
                    this.dispatchEvent(event); //Sending the given event
                }
                if (objHit2 != this && this.collisions.indexOf(objHit2) == -1) { //Same as the above but for the case the SECOND hit object is not the body itself
                    let colPos = this.collisionCenterPoint(points, collisionManifold.getNumPoints());
                    colPoint = new FudgeCore.Vector3(colPos.x, colPos.y, colPos.z);
                    points.forEach((_value) => {
                        normalImpulse += _value.getNormalImpulse();
                        binormalImpulse += _value.getBinormalImpulse();
                        tangentImpulse += _value.getTangentImpulse();
                    });
                    this.collisions.push(objHit2);
                    event = new FudgeCore.EventPhysics("ColliderEnteredCollision" /* COLLISION_ENTER */, objHit2, normalImpulse, tangentImpulse, binormalImpulse, colPoint, new FudgeCore.Vector3(normal.x, normal.y, normal.z));
                    this.dispatchEvent(event);
                }
                list = list.getNext(); //Start the same routine with the next collision in the list
            }
            //REMOVE OLD Collisions - That do not happen anymore
            this.collisions.forEach((_value) => {
                let isColliding = false;
                list = this.#rigidbody.getContactLinkList();
                for (let i = 0; i < this.#rigidbody.getNumContactLinks(); i++) {
                    objHit = list.getContact().getShape1().userData;
                    objHit2 = list.getContact().getShape2().userData;
                    if (_value == objHit || _value == objHit2) { //If the given object in the collisions list is still one of the objHit the collision is not CollisionEXIT
                        isColliding = true;
                    }
                    list = list.getNext();
                }
                if (isColliding == false) { //The collision is exiting but was in the collision list, then EXIT Event needs to be fired
                    let index = this.collisions.indexOf(_value); //Find object in the array
                    this.collisions.splice(index); //remove it from the array
                    event = new FudgeCore.EventPhysics("ColliderLeftCollision" /* COLLISION_EXIT */, _value, 0, 0, 0);
                    this.dispatchEvent(event);
                }
            });
        }
        /**
         * Sends a ray through this specific body ignoring the rest of the world and checks if this body was hit by the ray,
         * returning info about the hit. Provides the same functionality and information a regular raycast does but the ray is only testing against this specific body.
         */
        raycastThisBody(_origin, _direction, _length, _debugDraw = false) {
            let hitInfo = new FudgeCore.RayHitInfo();
            let geometry = this.#rigidbody.getShapeList().getGeometry();
            let transform = this.#rigidbody.getTransform();
            let scaledDirection = _direction.clone;
            scaledDirection.scale(_length);
            let endpoint = FudgeCore.Vector3.SUM(scaledDirection, _origin.clone);
            let oimoRay = new OIMO.RayCastHit();
            let hit = geometry.rayCast(new OIMO.Vec3(_origin.x, _origin.y, _origin.z), new OIMO.Vec3(endpoint.x, endpoint.y, endpoint.z), transform, oimoRay); //the actual OimoPhysics Raycast
            if (hit) { //If hit return a bunch of informations about the hit
                hitInfo.hit = true;
                hitInfo.hitPoint = new FudgeCore.Vector3(oimoRay.position.x, oimoRay.position.y, oimoRay.position.z);
                hitInfo.hitNormal = new FudgeCore.Vector3(oimoRay.normal.x, oimoRay.normal.y, oimoRay.normal.z);
                let dx = _origin.x - hitInfo.hitPoint.x; //calculate hit distance
                let dy = _origin.y - hitInfo.hitPoint.y;
                let dz = _origin.z - hitInfo.hitPoint.z;
                hitInfo.hitDistance = Math.sqrt(dx * dx + dy * dy + dz * dz);
                hitInfo.rigidbodyComponent = this;
                hitInfo.rayOrigin = _origin;
                hitInfo.rayEnd = endpoint;
            }
            else { //Only tell the origin, and the hit point is the end of the ray.
                hitInfo.rayOrigin = _origin;
                hitInfo.hitPoint = new FudgeCore.Vector3(endpoint.x, endpoint.y, endpoint.z);
            }
            if (_debugDraw) {
                FudgeCore.Physics.debugDraw.debugRay(hitInfo.rayOrigin, hitInfo.hitPoint, new FudgeCore.Color(0, 1, 0, 1));
            }
            return hitInfo;
        }
        //#endregion
        //#region Saving/Loading - Some properties might be missing, e.g. convexMesh (Float32Array)
        serialize() {
            let serialization = this.getMutator();
            delete serialization.mtxPivot;
            delete serialization.active;
            serialization.typeBody = FudgeCore.BODY_TYPE[this.#typeBody];
            serialization.typeCollider = FudgeCore.COLLIDER_TYPE[this.#typeCollider];
            serialization.initialization = BODY_INIT[this.initialization];
            serialization.id = this.#id;
            serialization.pivot = this.mtxPivot.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            super.deserialize(_serialization[super.constructor.name]);
            this.mtxPivot.deserialize(_serialization.pivot);
            this.#id = _serialization.id;
            this.mass = ifNumber(_serialization.mass, this.mass);
            this.dampTranslation = ifNumber(_serialization.dampTranslation, this.dampTranslation);
            this.dampRotation = ifNumber(_serialization.dampRotation, this.dampRotation);
            this.collisionGroup = ifNumber(_serialization.collisionGroup, this.collisionGroup);
            this.effectRotation = _serialization.effectRotation || this.effectRotation;
            this.effectGravity = ifNumber(_serialization.effectGravity, this.effectGravity);
            this.friction = ifNumber(_serialization.friction, this.friction);
            this.restitution = ifNumber(_serialization.restitution, this.restitution);
            this.isTrigger = _serialization.isTrigger || this.isTrigger;
            this.initialization = _serialization.initialization;
            this.initialization = BODY_INIT[_serialization.initialization];
            this.typeBody = FudgeCore.BODY_TYPE[_serialization.typeBody];
            this.typeCollider = FudgeCore.COLLIDER_TYPE[_serialization.typeCollider];
            // this.create(this.mass, this.#typeBody, this.#typeCollider, this.collisionGroup, null, this.convexMesh);
            return this;
        }
        /** Change properties by an associative array */
        async mutate(_mutator) {
            if (_mutator.typeBody != undefined)
                _mutator.typeBody = parseInt(_mutator.typeBody);
            if (_mutator.typeCollider != undefined)
                _mutator.typeCollider = parseInt(_mutator.typeCollider);
            if (_mutator.initialization != undefined)
                _mutator.initialization = parseInt(_mutator.initialization);
            await super.mutate(_mutator);
            if (_mutator.initialization != undefined && this.isActive)
                this.initialize();
            // TODO: see if this alternative should be, at least partially, done with mutateSelection
            // let callIfExist: Function = (_key: string, _setter: Function) => {
            //   if (_mutator[_key])
            //     _setter(_mutator[_key]);
            // };
            // callIfExist("friction", (_value: number) => this.friction = _value);
            // callIfExist("restitution", (_value: number) => this.restitution = _value);
            // callIfExist("mass", (_value: number) => this.mass = _value);
            // callIfExist("dampTranslation", (_value: number) => this.dampTranslation = _value);
            // callIfExist("dampRotation", (_value: number) => this.dampRotation = _value);
            // callIfExist("effectGravity", (_value: number) => this.effectGravity = _value);
            // callIfExist("collisionGroup", (_value: COLLISION_GROUP) => this.collisionGroup = _value);
            // callIfExist("typeBody", (_value: string) => this.typeBody = parseInt(_value));
            // callIfExist("typeCollider", (_value: string) => this.typeCollider = parseInt(_value));
            // this.dispatchEvent(new Event(EVENT.MUTATE));
        }
        getMutator() {
            let mutator = super.getMutator(true);
            mutator.friction = this.friction;
            mutator.restitution = this.restitution;
            mutator.mass = this.mass;
            mutator.dampTranslation = this.dampTranslation;
            mutator.dampRotation = this.dampRotation;
            mutator.effectGravity = this.effectGravity;
            mutator.typeBody = this.#typeBody;
            mutator.typeCollider = this.#typeCollider;
            mutator.isTrigger = this.#isTrigger;
            // Object.preventExtensions(mutator);
            return mutator;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.typeBody)
                types.typeBody = FudgeCore.BODY_TYPE;
            if (types.typeCollider)
                types.typeCollider = FudgeCore.COLLIDER_TYPE;
            if (types.initialization)
                types.initialization = BODY_INIT;
            return types;
        }
        reduceMutator(_mutator) {
            super.reduceMutator(_mutator);
            delete _mutator.convexMesh; //Convex Mesh can't be shown in the editor because float32Array is not a viable mutator
            delete _mutator.collisionMask;
            delete _mutator.isInitialized;
        }
        //#endregion
        //#region Creation
        create(_mass = 1, _type = FudgeCore.BODY_TYPE.DYNAMIC, _colliderType = FudgeCore.COLLIDER_TYPE.CUBE, _group = FudgeCore.Physics.settings.defaultCollisionGroup, _mtxTransform = null, _convexMesh = null) {
            //Setting up all incoming values to be internal values
            this.convexMesh = _convexMesh;
            this.#typeBody = _type;
            this.#collisionGroup = _group;
            this.#typeCollider = _colliderType;
            this.mass = _mass;
            this.#restitution = FudgeCore.Physics.settings.defaultRestitution;
            this.#friction = FudgeCore.Physics.settings.defaultFriction;
            this.collisionMask = FudgeCore.Physics.settings.defaultCollisionMask;
            //Create the actual rigidbody in the OimoPhysics Space
            this.createRigidbody(_mass, _type, this.#typeCollider, _mtxTransform, this.#collisionGroup);
            this.#id = FudgeCore.Physics.distributeBodyID();
            // Event Callbacks directly from OIMO Physics
            this.#callbacks = new OIMO.ContactCallback(); //fehm
            this.#callbacks.beginTriggerContact = this.triggerEnter;
            this.#callbacks.endTriggerContact = this.triggerExit;
        }
        /** Creates the actual OimoPhysics Rigidbody out of informations the FUDGE Component has. */
        createRigidbody(_mass, _type, _colliderType, _mtxTransform, _collisionGroup = FudgeCore.COLLISION_GROUP.DEFAULT) {
            let oimoType; //Need the conversion from simple enum to number because if enum is defined as Oimo.RigidyBodyType you have to include Oimo to use FUDGE at all
            switch (_type) {
                case FudgeCore.BODY_TYPE.DYNAMIC:
                    oimoType = OIMO.RigidBodyType.DYNAMIC;
                    break;
                case FudgeCore.BODY_TYPE.STATIC:
                    oimoType = OIMO.RigidBodyType.STATIC;
                    break;
                case FudgeCore.BODY_TYPE.KINEMATIC:
                    oimoType = OIMO.RigidBodyType.KINEMATIC;
                    break;
                default:
                    oimoType = OIMO.RigidBodyType.DYNAMIC;
                    break;
            }
            // remove all previous shapes from world. Necessary?
            // while (this.#rigidbody && this.#rigidbody.getShapeList() != null)
            //   this.#rigidbody.removeShape(this.#rigidbody.getShapeList());
            let tmpTransform = _mtxTransform == null ? super.node != null ? super.node.mtxWorld : FudgeCore.Matrix4x4.IDENTITY() : _mtxTransform; //Get transform informations from the world, since physics does not care about hierarchy
            //Convert informations from FUDGE to OimoPhysics and creating a collider with it, while also adding a pivot to derivate from the transform informations if needed
            let scale = new OIMO.Vec3((tmpTransform.scaling.x * this.mtxPivot.scaling.x) / 2, (tmpTransform.scaling.y * this.mtxPivot.scaling.y) / 2, (tmpTransform.scaling.z * this.mtxPivot.scaling.z) / 2);
            let position = new OIMO.Vec3(tmpTransform.translation.x + this.mtxPivot.translation.x, tmpTransform.translation.y + this.mtxPivot.translation.y, tmpTransform.translation.z + this.mtxPivot.translation.z);
            let rotation = new OIMO.Vec3(tmpTransform.rotation.x + this.mtxPivot.rotation.x, tmpTransform.rotation.y + this.mtxPivot.rotation.y, tmpTransform.rotation.z + this.mtxPivot.rotation.z);
            this.createCollider(scale, _colliderType);
            //Setting informations about mass, position/rotation and physical reaction type
            this.#massData.mass = _mass; //_type != PHYSICS_TYPE.STATIC ? _mass : 0; //If a object is static it acts as if it has no mass
            this.#rigidbodyInfo.type = oimoType;
            this.#rigidbodyInfo.position = position;
            this.#rigidbodyInfo.rotation.fromEulerXyz(new OIMO.Vec3(rotation.x, rotation.y, rotation.z)); //Convert eulerAngles in degree to the internally used quaternions
            //Creating the actual rigidbody and it's collider
            this.#rigidbody = new OIMO.RigidBody(this.#rigidbodyInfo);
            this.#collider = new OIMO.Shape(this.#colliderInfo);
            //Filling the additional settings and informations the rigidbody needs. Who is colliding, how is the collision handled (damping, influence factors)
            this.#collider.userData = this;
            this.#collider.setCollisionGroup(_collisionGroup);
            this.#collider.setCollisionMask(this.collisionMask);
            this.#rigidbody.addShape(this.#collider);
            this.#rigidbody.setMassData(this.#massData);
            this.#rigidbody.getShapeList().setRestitution(this.#restitution);
            this.#rigidbody.getShapeList().setFriction(this.#friction);
            this.#rigidbody.getShapeList().setContactCallback(this.#callbacks);
            this.#rigidbody.setLinearDamping(this.#dampingLinear);
            this.#rigidbody.setAngularDamping(this.#dampingAngular);
            this.#rigidbody.setGravityScale(this.#effectGravity);
            this.#rigidbody.setRotationFactor(new OIMO.Vec3(this.#effectRotation.x, this.#effectRotation.y, this.#effectRotation.z));
        }
        /** Creates a collider a shape that represents the object in the physical world.  */
        createCollider(_scale, _colliderType) {
            let shapeConf = new OIMO.ShapeConfig(); //Collider with geometry and infos like friction/restitution and more
            let geometry;
            if (this.typeCollider != _colliderType) //If the collider type was changed set the internal one new, else don't so there is not infinite set calls
                this.typeCollider = _colliderType;
            switch (_colliderType) { //Create a different OimoPhysics geometry based on the given type. That is only the mathematical shape of the collider
                case FudgeCore.COLLIDER_TYPE.CUBE:
                    geometry = new OIMO.BoxGeometry(_scale);
                    break;
                case FudgeCore.COLLIDER_TYPE.SPHERE:
                    geometry = new OIMO.SphereGeometry(_scale.x);
                    break;
                case FudgeCore.COLLIDER_TYPE.CAPSULE:
                    geometry = new OIMO.CapsuleGeometry(_scale.x, _scale.y);
                    break;
                case FudgeCore.COLLIDER_TYPE.CYLINDER:
                    geometry = new OIMO.CylinderGeometry(_scale.x, _scale.y);
                    break;
                case FudgeCore.COLLIDER_TYPE.CONE:
                    geometry = new OIMO.ConeGeometry(_scale.x, _scale.y);
                    break;
                case FudgeCore.COLLIDER_TYPE.PYRAMID:
                    geometry = this.createConvexGeometryCollider(this.createPyramidVertices(), _scale);
                    break;
                case FudgeCore.COLLIDER_TYPE.CONVEX:
                    geometry = this.createConvexGeometryCollider(this.convexMesh, _scale);
                    break;
            }
            shapeConf.geometry = geometry;
            this.#colliderInfo = shapeConf; //the configuration informations that are used to add an actual collider to the rigidbody in createRigidbody
        }
        /** Creating a shape that represents a in itself closed form, out of the given vertices. */
        createConvexGeometryCollider(_vertices, _scale) {
            let verticesAsVec3 = new Array(); //Convert FUDGE Vector3 to OimoVec3
            for (let i = 0; i < _vertices.length; i += 3) { //3 Values for one point
                verticesAsVec3.push(new OIMO.Vec3(_vertices[i] * _scale.x, _vertices[i + 1] * _scale.y, _vertices[i + 2] * _scale.z));
            }
            return new OIMO.ConvexHullGeometry(verticesAsVec3); //Tell OimoPhysics to create a hull that involves all points but close it of. A convex shape can not have a hole in it.
        }
        /** Internal implementation of vertices that construct a pyramid. The vertices of the implemented pyramid mesh can be used too. But they are halfed and double sided, so it's more performant to use this. */
        createPyramidVertices() {
            let vertices = new Float32Array([
                /*0*/ -1, 0, 1, /*1*/ 1, 0, 1, /*2*/ 1, 0, -1, /*3*/ -1, 0, -1,
                /*4*/ 0, 2, 0
            ]);
            return vertices;
        }
        //#region private EVENT functions
        //Calculating the center of a collision as a singular point - in case there is more than one point - by getting the geometrical center of all colliding points
        collisionCenterPoint(_colPoints, _numPoints) {
            let center;
            let totalPoints = 0;
            let totalX = 0;
            let totalY = 0;
            let totalZ = 0;
            _colPoints.forEach((_value) => {
                if (totalPoints < _numPoints) {
                    totalPoints++;
                    totalX += _value.getPosition2().x;
                    totalY += _value.getPosition2().y;
                    totalZ += _value.getPosition2().z;
                }
            });
            center = new OIMO.Vec3(totalX / _numPoints, totalY / _numPoints, totalZ / _numPoints);
            return center;
        }
        //#endregion
        /**
        * Trigger EnteringEvent Callback, automatically called by OIMO Physics within their calculations.
        * Since the event does not know which body is the trigger iniator, the event can be listened to
        * on either the trigger or the triggered. (This is only possible with the FUDGE OIMO Fork!)
        */
        triggerEnter(_contact) {
            let objHit; //collision consisting of 2 bodies, so Hit1/2
            let objHit2;
            let event; //The event that will be send and the informations added to it
            let colPoint;
            //ADD NEW Triggering - That just happened
            let collisionManifold = _contact.getManifold(); //Manifold = Additional informations about the contact
            objHit = _contact.getShape1().userData; //Userdata is used to transfer the ∆í.ComponentRigidbody, it's an empty OimoPhysics Variable
            //Only register the collision on the actual touch, not on "shadowCollide", to register in the moment of impulse calculation
            if (objHit == null || _contact.isTouching() == false) // only act if the collision is actual touching, so right at the moment when a impulse is happening, not when shapes overlap
                return;
            objHit2 = _contact.getShape2().userData;
            if (objHit2 == null || _contact.isTouching() == false)
                return;
            let points = collisionManifold.getPoints(); //All points in the collision where the two bodies are touching, used to calculate the full impact
            let normal = collisionManifold.getNormal();
            if (objHit2.triggerings.indexOf(objHit) == -1) { //Fire, if the hit object is not the Body itself but another and it's not already fired.
                let colPos = objHit2.collisionCenterPoint(points, collisionManifold.getNumPoints()); //THE point of collision is the first touching point (EXTENSION: could be the center of all touching points combined)
                colPoint = new FudgeCore.Vector3(colPos.x, colPos.y, colPos.z);
                // Impulses are 0 since, there are no forces/impulses at work, else this would not be a trigger, but a collision
                objHit2.triggerings.push(objHit); //Tell the object that the event for this object does not need to be fired again
                event = new FudgeCore.EventPhysics("TriggerEnteredCollision" /* TRIGGER_ENTER */, objHit, 0, 0, 0, colPoint, new FudgeCore.Vector3(normal.x, normal.y, normal.z)); //Building the actual event, with what object did collide and informations about it
                objHit2.dispatchEvent(event); //Sending the given event
            }
            if (objHit.triggerings.indexOf(objHit2) == -1) { //Same as the above but for the case the SECOND hit object is not the body itself
                let colPos = objHit.collisionCenterPoint(points, collisionManifold.getNumPoints());
                colPoint = new FudgeCore.Vector3(colPos.x, colPos.y, colPos.z);
                // Impulses are 0 since, there are no forces/impulses at work, else this would not be a trigger, but a collision,
                // also the event is handled before the actual solving impulse step in OIMO
                objHit.triggerings.push(objHit2);
                event = new FudgeCore.EventPhysics("TriggerEnteredCollision" /* TRIGGER_ENTER */, objHit2, 0, 0, 0, colPoint, new FudgeCore.Vector3(normal.x, normal.y, normal.z));
                objHit.dispatchEvent(event);
            }
        }
        /**
        * Trigger LeavingEvent Callback, automatically called by OIMO Physics within their calculations.
        * Since the event does not know which body is the trigger iniator, the event can be listened to
        * on either the trigger or the triggered. (This is only possible with the FUDGE OIMO Fork!)
        */
        triggerExit(_contact) {
            //REMOVE OLD Triggering Body
            let objHit; //collision consisting of 2 bodies, so Hit1/2
            let objHit2;
            let event; //The event that will be send and the informations added to it
            objHit = _contact.getShape1().userData;
            objHit2 = _contact.getShape2().userData;
            // Remove both bodies in both cases, of self and other
            let index = objHit.triggerings.indexOf(objHit2); //Find object in the array
            if (index != -1) {
                objHit.triggerings.splice(index); //remove it from the array
                event = new FudgeCore.EventPhysics("TriggerLeftCollision" /* TRIGGER_EXIT */, objHit2, 0, 0, 0);
                objHit.dispatchEvent(event);
            }
            index = objHit2.triggerings.indexOf(objHit); //Find object in the array
            if (index != -1) {
                objHit2.triggerings.splice(index); //remove it from the array
                event = new FudgeCore.EventPhysics("TriggerLeftCollision" /* TRIGGER_EXIT */, objHit, 0, 0, 0);
                objHit2.dispatchEvent(event);
            }
        }
    }
    ComponentRigidbody.iSubclass = FudgeCore.Component.registerSubclass(ComponentRigidbody);
    ComponentRigidbody.mapBodyType = (typeof OIMO == "undefined") ?
        {
            [FudgeCore.BODY_TYPE.DYNAMIC]: FudgeCore.BODY_TYPE.DYNAMIC, [FudgeCore.BODY_TYPE.STATIC]: FudgeCore.BODY_TYPE.STATIC, [FudgeCore.BODY_TYPE.KINEMATIC]: FudgeCore.BODY_TYPE.KINEMATIC
        } : {
        [FudgeCore.BODY_TYPE.DYNAMIC]: OIMO.RigidBodyType.DYNAMIC, [FudgeCore.BODY_TYPE.STATIC]: OIMO.RigidBodyType.STATIC, [FudgeCore.BODY_TYPE.KINEMATIC]: OIMO.RigidBodyType.KINEMATIC
    };
    FudgeCore.ComponentRigidbody = ComponentRigidbody;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /** Internal class for holding data about physics debug vertices.*/
    class PhysicsDebugVertexBuffer {
        /** Setup the rendering context for this buffer and create the actual buffer for this context. */
        constructor(_renderingContext) {
            this.numVertices = 0;
            this.gl = _renderingContext;
            this.buffer = this.gl.createBuffer();
        }
        /** Fill the bound buffer with data. Used at buffer initialization */
        setData(array) {
            if (this.attribs == null)
                throw "set attributes first";
            this.numVertices = array.length / (this.stride / 4);
            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer);
            this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(array), this.gl.DYNAMIC_DRAW);
            //not necessary an in webgl2 anymore to rebind the same last buffer (which is achieved by giving a null buffer), after buffer is changed. Removed it on all other occasions
            // this.gl.bindBuffer(this.gl.ARRAY_BUFFER, null); 
        }
        /** Set Shader Attributes informations by getting their position in the shader, setting the offset, stride and size. For later use in the binding process */
        setAttribs(attribs) {
            this.attribs = attribs;
            this.offsets = [];
            this.stride = 0;
            let n = attribs.length;
            for (let i = 0; i < n; i++) {
                this.offsets.push(this.stride);
                this.stride += attribs[i].float32Count * Float32Array.BYTES_PER_ELEMENT; // 32bit float Bytes are a constant of 4
            }
        }
        /** Get the position of the attribute in the shader */
        loadAttribIndices(_program) {
            this.indices = _program.getAttribIndices(this.attribs);
        }
        /** Enable a attribute in a shader for this context, */
        bindAttribs() {
            if (this.indices == null)
                throw "indices are not loaded";
            let n = this.attribs.length;
            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.buffer); //making the buffer of this class the current buffer
            for (let i = 0; i < n; i++) {
                this.gl.enableVertexAttribArray(this.indices[i]); //enable the Attribute
                this.gl.vertexAttribPointer(this.indices[i], this.attribs[i].float32Count, this.gl.FLOAT, false, this.stride, this.offsets[i]); //creates a pointer and structure for this attribute
            }
        }
    }
    FudgeCore.PhysicsDebugVertexBuffer = PhysicsDebugVertexBuffer;
    /** Internal class for holding data about PhysicsDebugVertexBuffers */
    class PhysicsDebugIndexBuffer {
        /** Setup the rendering context for this buffer and create the actual buffer for this context. */
        constructor(_renderingContext) {
            this.gl = _renderingContext;
            this.buffer = this.gl.createBuffer();
        }
        /** Fill the bound buffer with data amount. Used at buffer initialization */
        setData(array) {
            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.buffer);
            this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER, new Int16Array(array), this.gl.DYNAMIC_DRAW);
            this.count = array.length;
        }
        /** The actual DrawCall for physicsDebugDraw Buffers. This is where the information from the debug is actually drawn. */
        draw(_mode = this.gl.TRIANGLES, _count = -1) {
            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, this.buffer);
            this.gl.drawElements(_mode, _count >= 0 ? _count : this.count, this.gl.UNSIGNED_SHORT, 0);
        }
    }
    FudgeCore.PhysicsDebugIndexBuffer = PhysicsDebugIndexBuffer;
    /** Internal class for managing data about webGL Attributes */
    class PhysicsDebugVertexAttribute {
        constructor(_float32Count, _name) {
            this.name = _name;
            this.float32Count = _float32Count;
        }
    }
    FudgeCore.PhysicsDebugVertexAttribute = PhysicsDebugVertexAttribute;
    /** Internal class for Shaders used only by the physics debugDraw */
    class PhysicsDebugShader {
        /** Introduce the FUDGE Rendering Context to this class, creating a program and vertex/fragment shader in this context */
        constructor(_renderingContext) {
            this.gl = _renderingContext;
            this.program = this.gl.createProgram();
            this.vertexShader = this.gl.createShader(this.gl.VERTEX_SHADER);
            this.fragmentShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);
        }
        /** Take glsl shaders as strings and compile them, attaching the compiled shaders to a program thats used by this rendering context. */
        compile(vertexSource, fragmentSource) {
            this.uniformLocationMap = new Map();
            this.compileShader(this.vertexShader, vertexSource);
            this.compileShader(this.fragmentShader, fragmentSource);
            this.gl.attachShader(this.program, this.vertexShader);
            this.gl.attachShader(this.program, this.fragmentShader);
            this.gl.linkProgram(this.program);
            if (!this.gl.getProgramParameter(this.program, this.gl.LINK_STATUS)) { //make sure the linking worked, so the program is valid, and shaders are working
                FudgeCore.Debug.log(this.gl.getProgramInfoLog(this.program));
            }
            this.gl.validateProgram(this.program);
            if (!this.gl.getProgramParameter(this.program, this.gl.VALIDATE_STATUS)) {
                console.error("ERROR validating program!", this.gl.getProgramInfoLog(this.program));
                return;
            }
        }
        /** Get index of a attribute in a shader in this program */
        getAttribIndex(_name) {
            return this.gl.getAttribLocation(this.program, _name);
        }
        /** Get the location of a uniform in a shader in this program */
        getUniformLocation(_name) {
            if (this.uniformLocationMap.has(_name))
                return this.uniformLocationMap.get(_name);
            let location = this.gl.getUniformLocation(this.program, _name);
            this.uniformLocationMap.set(_name, location);
            return location;
        }
        /** Get all indices for every attribute in the shaders of this program */
        getAttribIndices(_attribs) {
            let indices = [];
            _attribs.forEach(value => {
                indices.push(this.getAttribIndex(value.name));
            });
            return indices;
        }
        /** Tell the FUDGE Rendering Context to use this program to draw. */
        use() {
            this.gl.useProgram(this.program);
        }
        /** Compile a shader out of a string and validate it. */
        compileShader(shader, source) {
            this.gl.shaderSource(shader, source);
            this.gl.compileShader(shader);
            if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {
                FudgeCore.Debug.log(this.gl.getShaderInfoLog(shader));
            }
        }
    }
    FudgeCore.PhysicsDebugShader = PhysicsDebugShader;
    /** Internal Class used to draw debugInformations about the physics simulation onto the renderContext. No user interaction needed.
     * @author Marko Fehrenbach, HFU 2020 //Based on OimoPhysics Haxe DebugDrawDemo
     */
    class PhysicsDebugDraw extends FudgeCore.RenderWebGL {
        /** Creating the debug for physics in FUDGE. Tell it to draw only wireframe objects, since FUDGE is handling rendering of the objects besides physics.
         * Override OimoPhysics Functions with own rendering. Initialize buffers and connect them with the context for later use. */
        constructor() {
            super();
            this.style = new OIMO.DebugDrawStyle();
            this.oimoDebugDraw = new OIMO.DebugDraw();
            this.oimoDebugDraw.wireframe = true; //Triangle Rendering is handled by FUDGE so, only the physics lines/points need to be rendered, although triangle is still implemented
            this.gl = FudgeCore.RenderWebGL.crc3;
            this.initializeOverride();
            this.shader = new PhysicsDebugShader(this.gl);
            this.shader.compile(this.vertexShaderSource(), this.fragmentShaderSource());
            this.initializeBuffers();
        }
        /** Receive the current DebugMode from the physics settings and set the OimoPhysics.DebugDraw booleans to show only certain informations.
         * Needed since some debug informations exclude others, and can't be drawn at the same time, by OimoPhysics. And for users it provides more readability
         * to debug only what they need and is commonly debugged.
         */
        setDebugMode(_mode = FudgeCore.PHYSICS_DEBUGMODE.NONE) {
            // tslint:disable-next-line
            let draw = { drawAabbs: false, drawBases: false, drawBvh: false, drawContactBases: false, drawContacts: false, drawJointLimits: false, drawJoints: false, drawPairs: false, drawShapes: false };
            switch (_mode) {
                case FudgeCore.PHYSICS_DEBUGMODE.COLLIDERS: //Colliders and Bases
                    draw.drawBases = draw.drawShapes = true;
                    break;
                case FudgeCore.PHYSICS_DEBUGMODE.JOINTS_AND_COLLIDER: //Colliders and joints
                    draw.drawJoints = draw.drawJointLimits = draw.drawShapes = true;
                    break;
                case FudgeCore.PHYSICS_DEBUGMODE.PHYSIC_OBJECTS_ONLY: //Physics Objects only, shows same as Collider / Joints but also hiding every other fudge object
                    draw.drawBases = draw.drawJointLimits = draw.drawJoints = draw.drawShapes = true;
                    break;
                case FudgeCore.PHYSICS_DEBUGMODE.CONTACTS: //Contacts
                    draw.drawBases = draw.drawContactBases = draw.drawContacts = draw.drawPairs = draw.drawShapes = true;
                    break;
                case FudgeCore.PHYSICS_DEBUGMODE.BOUNDING_BOXES: //Bounding Box / Broadphase Bvh / Bases
                    draw.drawAabbs = draw.drawBases = draw.drawBvh = true;
                    break;
            }
            Object.assign(this.oimoDebugDraw, draw);
        }
        /** Creating the empty render buffers. Defining the attributes used in shaders.
         * Needs to create empty buffers to already have them ready to draw later on, linking is only possible with existing buffers. */
        initializeBuffers() {
            let attribs = [
                new PhysicsDebugVertexAttribute(3, "aPosition"),
                new PhysicsDebugVertexAttribute(3, "aNormal"),
                new PhysicsDebugVertexAttribute(3, "aColor")
            ];
            this.pointVBO = new PhysicsDebugVertexBuffer(this.gl);
            this.pointIBO = new PhysicsDebugIndexBuffer(this.gl);
            this.pointVBO.setAttribs(attribs);
            this.pointVBO.loadAttribIndices(this.shader);
            this.lineVBO = new PhysicsDebugVertexBuffer(this.gl);
            this.lineIBO = new PhysicsDebugIndexBuffer(this.gl);
            this.lineVBO.setAttribs(attribs);
            this.lineVBO.loadAttribIndices(this.shader);
            this.triVBO = new PhysicsDebugVertexBuffer(this.gl);
            this.triIBO = new PhysicsDebugIndexBuffer(this.gl);
            this.triVBO.setAttribs(attribs);
            this.triVBO.loadAttribIndices(this.shader);
            this.clearBuffers();
        }
        /** Before OimoPhysics.world is filling the debug. Make sure the buffers are reset. Also receiving the debugMode from settings and updating the current projection for the vertexShader. */
        clearBuffers() {
            this.gl.lineWidth(2.0); //Does not affect anything because lineWidth is currently only supported by Microsoft Edge and FUDGE is optimized for Chrome
            this.pointData = []; //Resetting the data to be filled again
            this.lineData = [];
            this.triData = [];
            this.numPointData = 0; //Resetting the amount of data calls
            this.numLineData = 0;
            this.numTriData = 0;
        }
        /** After OimoPhysics.world filled the debug. Rendering calls. Setting this program to be used by the FUDGE rendering context. And draw each updated buffer and resetting them. */
        drawBuffers() {
            this.shader.use();
            let projection = FudgeCore.Physics.mainCam.mtxWorldToView.get();
            this.gl.uniformMatrix4fv(this.shader.getUniformLocation("u_mtxMeshToView"), false, projection);
            if (this.numPointData > 0) {
                this.pointIboData = []; //Buffer size matching to whats needed
                for (let i = 0; i < this.numPointData; i++) {
                    this.pointIboData.push(i);
                }
                this.pointIBO.setData(this.pointIboData); //Set Index buffer to correct size
                this.pointVBO.setData(this.pointData); //Set Vertex Buffer to current Data
                this.pointVBO.bindAttribs();
                this.pointIBO.draw(this.gl.POINTS, this.numPointData); //The actual draw call for each index in ibo
                this.numPointData = 0;
            }
            if (this.numLineData > 0) {
                this.lineIboData = [];
                for (let i = 0; i < this.numLineData; i++) {
                    this.lineIboData.push(i * 2);
                    this.lineIboData.push(i * 2 + 1);
                }
                this.lineIBO.setData(this.lineIboData);
                this.lineVBO.setData(this.lineData);
                this.lineVBO.bindAttribs();
                this.lineIBO.draw(this.gl.LINES, this.numLineData * 2);
                this.numLineData = 0;
            }
            if (this.numTriData > 0) {
                this.triIboData = [];
                for (let i = 0; i < this.numTriData; i++) {
                    this.triIboData.push(i * 3);
                    this.triIboData.push(i * 3 + 1);
                    this.triIboData.push(i * 3 + 2);
                }
                this.triIBO.setData(this.triIboData);
                this.triVBO.setData(this.triData);
                this.triVBO.bindAttribs();
                this.triIBO.draw(this.gl.TRIANGLES, this.numTriData * 3);
                this.numTriData = 0;
            }
        }
        /** Drawing the ray into the debugDraw Call. By using the overwritten line rendering functions and drawing a point (pointSize defined in the shader) at the end of the ray. */
        debugRay(_origin, _end, _color) {
            this.oimoDebugDraw.line(new OIMO.Vec3(_origin.x, _origin.y, _origin.z), new OIMO.Vec3(_end.x, _end.y, _end.z), new OIMO.Vec3(_color.r, _color.g, _color.b));
            this.oimoDebugDraw.point(new OIMO.Vec3(_end.x, _end.y, _end.z), new OIMO.Vec3(_color.r, _color.g, _color.b));
        }
        /** Overriding the existing functions from OimoPhysics.DebugDraw without actually inherit from the class, to avoid compiler problems.
         * Overriding them to receive debugInformations in the format the physic engine provides them but handling the rendering in the fudge context. */
        initializeOverride() {
            //Override point/line/triangle functions of OimoPhysics which are used to draw wireframes of objects, lines of raycasts or triangles when the objects are rendered by the physics not FUDGE (unused)
            OIMO.DebugDraw.prototype.point = function (_v, _color) {
                let debugWrapper = FudgeCore.Physics.debugDraw; //Get the custom physics debug class to have access to the data.
                if (FudgeCore.Physics.mainCam != null) { //only act when there is a camera that is rendering
                    let data = debugWrapper.pointData; //get the already written buffer informations
                    data.push(_v.x, _v.y, _v.z); //Coordinates of the point
                    data.push(0, 0, 0); //Point Normals - Empty since it's not a polygon
                    data.push(_color.x, _color.y, _color.z); //Color of the point
                    debugWrapper.numPointData++;
                }
            };
            OIMO.DebugDraw.prototype.line = function (_v1, _v2, _color) {
                let debugWrapper = FudgeCore.Physics.debugDraw;
                if (FudgeCore.Physics.mainCam != null) {
                    let data = debugWrapper.lineData;
                    data.push(_v1.x, _v1.y, _v1.z); //Point 1 Coordinates
                    data.push(0, 0, 0); //P1 Normals - Empty since it's not a polygon
                    data.push(_color.x, _color.y, _color.z); //P1 Color
                    data.push(_v2.x, _v2.y, _v2.z); //Point 2 Coordinates
                    data.push(0, 0, 0);
                    data.push(_color.x, _color.y, _color.z);
                    debugWrapper.numLineData++;
                }
            };
            OIMO.DebugDraw.prototype.triangle = function (_v1, _v2, _v3, _n1, _n2, _n3, _color) {
                let debugWrapper = FudgeCore.Physics.debugDraw;
                if (FudgeCore.Physics.mainCam != null) {
                    let data = debugWrapper.triData;
                    data.push(_v1.x, _v1.y, _v1.z);
                    data.push(_n1.x, _n1.y, _n1.z);
                    data.push(_color.x, _color.y, _color.z);
                    data.push(_v2.x, _v2.y, _v2.z);
                    data.push(_n2.x, _n2.y, _n2.z);
                    data.push(_color.x, _color.y, _color.z);
                    data.push(_v3.x, _v3.y, _v3.z);
                    data.push(_n3.x, _n3.y, _n3.z);
                    data.push(_color.x, _color.y, _color.z);
                    debugWrapper.numTriData++;
                }
            };
        }
        /** The source code (string) of the in physicsDebug used very simple vertexShader.
         *  Handling the projection (which includes, view/world[is always identity in this case]/projection in FUDGE). Increasing the size of single points drawn.
         *  And transfer position color to the fragmentShader. */
        vertexShaderSource() {
            return `
			precision mediump float;
			attribute vec3 aPosition;
			attribute vec3 aColor;
			attribute vec3 aNormal;
			varying vec3 vPosition;
			varying vec3 vNormal;
			varying vec3 vColor;
			uniform mat4 u_mtxMeshToView;

			void main() {
				vPosition = aPosition;
				vColor = aColor;
				vNormal = aNormal;
				gl_Position = u_mtxMeshToView * vec4(aPosition,1.0);
				gl_PointSize = 6.0;
			}`;
        }
        /** The source code (string) of the in physicsDebug used super simple fragmentShader. Unlit - only colorizing the drawn pixels, normals/position are given to make it expandable */
        fragmentShaderSource() {
            return `
      precision mediump float;
			varying vec3 vPosition;
			varying vec3 vNormal;
			varying vec3 vColor;

			void main() {
				gl_FragColor = vec4(vColor, 1.0);
			}`;
        }
    }
    FudgeCore.PhysicsDebugDraw = PhysicsDebugDraw;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A physical connection between two bodies with a defined axe of translation and rotation. Two Degrees of Freedom in the defined axis.
     * Two RigidBodies need to be defined to use it. A motor can be defined for rotation and translation, along with spring settings.
     *
     * ```plaintext
     *          JointHolder - bodyAnchor
     *                    ‚îå‚îÄ‚îÄ‚îÄ‚îê
     *                    ‚îÇ   ‚îÇ
     *           <‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> tied body, sliding on axis = 1st degree of freedom
     *                    ‚îÇ   ‚îÇ        rotating around axis = 2nd degree of freedom
     *                    ‚îî‚îÄ‚îÄ‚îÄ‚îò
     * ```
     * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class JointCylindrical extends FudgeCore.JointAxial {
        /** Creating a cylindrical joint between two ComponentRigidbodies moving on one axis and rotating around another bound on a local anchorpoint. */
        constructor(_bodyAnchor = null, _bodyTied = null, _axis = new FudgeCore.Vector3(0, 1, 0), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied, _axis, _localAnchor);
            this.#springDampingRotation = 0;
            this.#springFrequencyRotation = 0;
            this.#motorForce = 0;
            this.#maxRotor = 360;
            this.#minRotor = 0;
            this.#rotorTorque = 0;
            this.#rotorSpeed = 0;
            this.config = new OIMO.CylindricalJointConfig();
            this.#getMutator = () => {
                let mutator = {
                    motorForce: this.motorForce,
                    springDampingRotation: this.springDampingRotation,
                    springFrequencyRotation: this.springFrequencyRotation,
                    maxRotor: this.maxRotor,
                    minRotor: this.minRotor,
                    rotorTorque: this.rotorTorque,
                    rotorSpeed: this.rotorSpeed
                };
                return mutator;
            };
            this.#mutate = (_mutator) => {
                this.mutateBase(_mutator, ["motorForce", "rotorTorque", "rotorSpeed", "maxRotor", "minRotor", "springDampingRotation", "springFrequencyRotation", "springFrequency"]);
            };
        }
        #springDampingRotation;
        #springFrequencyRotation;
        #motorForce;
        #maxRotor;
        #minRotor;
        #rotorTorque;
        #rotorSpeed;
        #rotor;
        #rotorSpringDamper;
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        set springDamping(_value) {
            super.springDamping = _value;
            if (this.joint != null)
                this.joint.getTranslationalSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        set springFrequency(_value) {
            super.springFrequency = _value;
            if (this.joint != null)
                this.joint.getTranslationalSpringDamper().frequency = _value;
        }
        /**
        * The damping of the spring. 1 equals completly damped. Influencing TORQUE / ROTATION
        */
        get springDampingRotation() {
            return this.#springDampingRotation;
        }
        set springDampingRotation(_value) {
            this.#springDampingRotation = _value;
            if (this.joint != null)
                this.joint.getRotationalSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. Influencing TORQUE / ROTATION
        */
        get springFrequencyRotation() {
            return this.#springFrequencyRotation;
        }
        set springFrequencyRotation(_value) {
            this.#springFrequencyRotation = _value;
            if (this.joint != null)
                this.joint.getRotationalSpringDamper().frequency = _value;
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
         */
        get maxRotor() {
            return this.#maxRotor;
        }
        set maxRotor(_value) {
            this.#maxRotor = _value;
            if (this.joint != null)
                this.joint.getRotationalLimitMotor().upperLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        get minRotor() {
            return this.#minRotor;
        }
        set minRotor(_value) {
            this.#minRotor = _value;
            if (this.joint != null)
                this.joint.getRotationalLimitMotor().lowerLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The target rotational speed of the motor in m/s.
         */
        get rotorSpeed() {
            return this.#rotorSpeed;
        }
        set rotorSpeed(_value) {
            this.#rotorSpeed = _value;
            if (this.joint != null)
                this.joint.getRotationalLimitMotor().motorSpeed = _value;
        }
        /**
          * The maximum motor torque in Newton. force <= 0 equals disabled.
         */
        get rotorTorque() {
            return this.#rotorTorque;
        }
        set rotorTorque(_value) {
            this.#rotorTorque = _value;
            if (this.joint != null)
                this.joint.getRotationalLimitMotor().motorTorque = _value;
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit.
         */
        set maxMotor(_value) {
            super.maxMotor = _value;
            if (this.joint != null)
                this.joint.getTranslationalLimitMotor().upperLimit = _value;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit.
         */
        set minMotor(_value) {
            super.minMotor = _value;
            if (this.joint != null)
                this.joint.getTranslationalLimitMotor().lowerLimit = _value;
        }
        set motorSpeed(_value) {
            super.motorSpeed = _value;
            if (this.joint != null)
                this.joint.getTranslationalLimitMotor().motorSpeed = _value;
        }
        /**
          * The maximum motor force in Newton. force <= 0 equals disabled.
         */
        get motorForce() {
            return this.#motorForce;
        }
        set motorForce(_value) {
            this.#motorForce = _value;
            if (this.joint != null)
                this.joint.getTranslationalLimitMotor().motorForce = _value;
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = this.#getMutator();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.#mutate(_serialization);
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        async mutate(_mutator) {
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            super.mutate(_mutator);
        }
        getMutator() {
            let mutator = super.getMutator();
            Object.assign(mutator, this.#getMutator());
            return mutator;
        }
        #getMutator;
        #mutate;
        //#endregion
        constructJoint() {
            this.#rotorSpringDamper = new OIMO.SpringDamper().setSpring(this.springFrequencyRotation, this.springDampingRotation);
            this.motor = new OIMO.TranslationalLimitMotor().setLimits(super.minMotor, super.maxMotor);
            this.motor.setMotor(super.motorSpeed, this.motorForce);
            this.#rotor = new OIMO.RotationalLimitMotor().setLimits(this.minRotor * FudgeCore.Calc.deg2rad, this.maxRotor * FudgeCore.Calc.deg2rad);
            this.#rotor.setMotor(this.rotorSpeed, this.rotorTorque);
            this.config = new OIMO.CylindricalJointConfig();
            super.constructJoint();
            this.config.translationalSpringDamper = this.springDamper;
            this.config.translationalLimitMotor = this.motor;
            this.config.rotationalLimitMotor = this.#rotor;
            this.config.rotationalSpringDamper = this.#rotorSpringDamper;
            this.joint = new OIMO.CylindricalJoint(this.config);
            this.configureJoint();
        }
    }
    JointCylindrical.iSubclass = FudgeCore.Joint.registerSubclass(JointCylindrical);
    FudgeCore.JointCylindrical = JointCylindrical;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with a defined axe movement.
       * Used to create a sliding joint along one axis. Two RigidBodies need to be defined to use it.
       * A motor can be defined to move the connected along the defined axis. Great to construct standard springs or physical sliders.
       *
       * ```plaintext
       *          JointHolder - bodyAnchor
       *                    ‚îå‚îÄ‚îÄ‚îÄ‚îê
       *                    ‚îÇ   ‚îÇ
       *           <‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> tied body, sliding on one Axis, 1 Degree of Freedom
       *                    ‚îÇ   ‚îÇ
       *                    ‚îî‚îÄ‚îÄ‚îÄ‚îò
       * ```
       * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointPrismatic extends FudgeCore.JointAxial {
        //Internally used variables - Joint Properties that are used even when no actual joint is currently existend
        /** Creating a prismatic joint between two ComponentRigidbodies only moving on one axis bound on a local anchorpoint. */
        constructor(_bodyAnchor = null, _bodyTied = null, _axis = new FudgeCore.Vector3(0, 1, 0), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied, _axis, _localAnchor);
            this.#motorForce = 0;
            this.config = new OIMO.PrismaticJointConfig();
            this.maxMotor = 10;
            this.minMotor = -10;
        }
        #motorForce;
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
          * The maximum motor force in Newton. force <= 0 equals disabled. This is the force that the motor is using to hold the position, or reach it if a motorSpeed is defined.
         */
        get motorForce() {
            return this.#motorForce;
        }
        set motorForce(_value) {
            this.#motorForce = _value;
            if (this.joint != null)
                this.joint.getLimitMotor().motorForce = _value;
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = {
                motorForce: this.motorForce,
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.motorForce = _serialization.motorForce;
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator();
            mutator.motorForce = this.motorForce;
            return mutator;
        }
        async mutate(_mutator) {
            if (typeof (_mutator.motorForce) !== "undefined")
                this.motorForce = _mutator.motorForce;
            delete _mutator.motorForce;
            super.mutate(_mutator);
        }
        //#endregion
        /** Actual creation of a joint in the OimoPhysics system */
        constructJoint() {
            this.motor = new OIMO.TranslationalLimitMotor().setLimits(this.minMotor, this.maxMotor); //Create motor settings, to hold positions, set constraint min/max
            this.motor.setMotor(this.motorSpeed, this.motorForce);
            this.config = new OIMO.PrismaticJointConfig(); //Create a specific config for this joint type that is calculating the local axis for both bodies
            super.constructJoint();
            this.config.springDamper = this.springDamper; //Telling the config to use the motor/spring of the FUDGE Component
            this.config.limitMotor = this.motor;
            this.joint = new OIMO.PrismaticJoint(this.config);
            this.configureJoint();
        }
    }
    JointPrismatic.iSubclass = FudgeCore.Joint.registerSubclass(JointPrismatic);
    FudgeCore.JointPrismatic = JointPrismatic;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
      * A physical connection between two bodies, designed to simulate behaviour within a real body. It has two axis, a swing and twist axis, and also the perpendicular axis,
      * similar to a Spherical joint, but more restrictive in it's angles and only two degrees of freedom. Two RigidBodies need to be defined to use it. Mostly used to create humanlike joints that behave like a
      * lifeless body.
      * ```plaintext
      *
      *                      anchor - it can twist on one axis and swing on another
      *                            ‚îÇ
      *         z            ‚îå‚îÄ‚îÄ‚îÄ‚îê ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îê
      *         ‚Üë            ‚îÇ   ‚îÇ ‚Üì ‚îÇ   ‚îÇ        e.g. z = TwistAxis, it can rotate in-itself around this axis
      *    -x ‚Üê‚îÄ‚îº‚îÄ‚Üí x        ‚îÇ   ‚îÇ x ‚îÇ   ‚îÇ        e.g. x = SwingAxis, it can rotate anchored around the base on this axis
      *         ‚Üì            ‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ
      *        -z            ‚îî‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îò         e.g. you can twist the leg in-itself to a certain degree,
      *                                                     but also rotate it forward/backward/left/right to a certain degree
      *                bodyAnchor          bodyTied
      *              (e.g. pelvis)         (e.g. upper-leg)
      *
      * ```
      * Twist equals a rotation around a point without moving on an axis.
      * Swing equals a rotation on a point with a moving local axis.
       * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
      */
    class JointRagdoll extends FudgeCore.Joint {
        constructor(_bodyAnchor = null, _bodyTied = null, _axisFirst = new FudgeCore.Vector3(1, 0, 0), _axisSecond = new FudgeCore.Vector3(0, 0, 1), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            this.#springDampingTwist = 0;
            this.#springFrequencyTwist = 0;
            this.#springDampingSwing = 0;
            this.#springFrequencySwing = 0;
            this.#maxMotorTwist = 360;
            this.#minMotorTwist = 0;
            this.#motorTorqueTwist = 0;
            this.#motorSpeedTwist = 0;
            this.#maxAngleFirst = 0;
            this.#maxAngleSecond = 0;
            this.config = new OIMO.RagdollJointConfig();
            this.#getMutator = () => {
                let mutator = {
                    maxAngleFirst: this.#maxAngleFirst,
                    maxAngleSecond: this.#maxAngleSecond,
                    springDampingTwist: this.springDampingTwist,
                    springFrequencyTwist: this.springFrequencyTwist,
                    springDampingSwing: this.springDampingSwing,
                    springFrequencySwing: this.springFrequencySwing,
                    maxMotorTwist: this.#maxMotorTwist,
                    minMotorTwist: this.#minMotorTwist,
                    motorSpeedTwist: this.motorSpeedTwist,
                    motorTorqueTwist: this.motorTorqueTwist
                };
                return mutator;
            };
            this.#mutate = (_mutator) => {
                if (typeof (_mutator.maxAngleFirst) !== "undefined")
                    this.#maxAngleFirst = _mutator.maxAngleFirst;
                if (typeof (_mutator.maxAngleSecond) !== "undefined")
                    this.#maxAngleSecond = _mutator.maxAngleSecond;
                this.mutateBase(_mutator, [
                    "springDampingTwist", "springFrequencyTwist", "springDampingSwing", "springFrequencySwing", "maxMotorTwist", "minMotorTwist", "motorSpeedTwist", "motorTorqueTwist"
                ]);
            };
            this.axisFirst = _axisFirst;
            this.axisSecond = _axisSecond;
            this.anchor = _localAnchor;
        }
        #springDampingTwist;
        #springFrequencyTwist;
        #springDampingSwing;
        #springFrequencySwing;
        #maxMotorTwist;
        #minMotorTwist;
        #motorTorqueTwist;
        #motorSpeedTwist;
        #motorTwist;
        #springDamperTwist;
        #springDamperSwing;
        #axisFirst;
        #axisSecond;
        #maxAngleFirst;
        #maxAngleSecond;
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
         *  When changed after initialization the joint needs to be reconnected.
         */
        get axisFirst() {
            return new FudgeCore.Vector3(this.#axisFirst.x, this.#axisFirst.y, this.#axisFirst.z);
        }
        set axisFirst(_value) {
            this.#axisFirst = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
        * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
        *  When changed after initialization the joint needs to be reconnected.
        */
        get axisSecond() {
            return new FudgeCore.Vector3(this.#axisSecond.x, this.#axisSecond.y, this.#axisSecond.z);
        }
        set axisSecond(_value) {
            this.#axisSecond = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The maximum angle of rotation along the first axis. Value needs to be positive. Changes do rebuild the joint
         */
        get maxAngleFirstAxis() {
            return this.#maxAngleFirst * FudgeCore.Calc.rad2deg;
        }
        set maxAngleFirstAxis(_value) {
            this.#maxAngleFirst = _value * FudgeCore.Calc.deg2rad;
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The maximum angle of rotation along the second axis. Value needs to be positive. Changes do rebuild the joint
         */
        get maxAngleSecondAxis() {
            return this.#maxAngleSecond * FudgeCore.Calc.rad2deg;
        }
        set maxAngleSecondAxis(_value) {
            this.#maxAngleSecond = _value * FudgeCore.Calc.deg2rad;
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDampingTwist() {
            return this.#springDampingTwist;
        }
        set springDampingTwist(_value) {
            this.#springDampingTwist = _value;
            if (this.joint != null)
                this.joint.getTwistSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequencyTwist() {
            return this.#springFrequencyTwist;
        }
        set springFrequencyTwist(_value) {
            this.#springFrequencyTwist = _value;
            if (this.joint != null)
                this.joint.getTwistSpringDamper().frequency = _value;
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDampingSwing() {
            return this.#springDampingSwing;
        }
        set springDampingSwing(_value) {
            this.#springDampingSwing = _value;
            if (this.joint != null)
                this.joint.getSwingSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequencySwing() {
            return this.#springFrequencySwing;
        }
        set springFrequencySwing(_value) {
            this.#springFrequencySwing = _value;
            if (this.joint != null)
                this.joint.getSwingSpringDamper().frequency = _value;
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
         */
        get maxMotorTwist() {
            return this.#maxMotorTwist * FudgeCore.Calc.rad2deg;
        }
        set maxMotorTwist(_value) {
            _value *= FudgeCore.Calc.deg2rad;
            this.#maxMotorTwist = _value;
            if (this.joint != null)
                this.joint.getTwistLimitMotor().upperLimit = _value;
        }
        /**
         * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        get minMotorTwist() {
            return this.#minMotorTwist * FudgeCore.Calc.rad2deg;
        }
        set minMotorTwist(_value) {
            _value *= FudgeCore.Calc.deg2rad;
            this.#minMotorTwist = _value;
            if (this.joint != null)
                this.joint.getTwistLimitMotor().lowerLimit = _value;
        }
        /**
          * The target rotational speed of the motor in m/s.
         */
        get motorSpeedTwist() {
            return this.#motorSpeedTwist;
        }
        set motorSpeedTwist(_value) {
            this.#motorSpeedTwist = _value;
            if (this.joint != null)
                this.joint.getTwistLimitMotor().motorSpeed = _value;
        }
        /**
          * The maximum motor torque in Newton. force <= 0 equals disabled.
         */
        get motorTorqueTwist() {
            return this.#motorTorqueTwist;
        }
        set motorTorqueTwist(_value) {
            this.#motorTorqueTwist = _value;
            if (this.joint != null)
                this.joint.getTwistLimitMotor().motorTorque = _value;
        }
        /**
          * If the two connected RigidBodies collide with eath other. (Default = false)
         */
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = this.#getMutator();
            serialization.axisFirst = this.axisFirst.serialize();
            serialization.axisSecond = this.axisSecond.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            await this.axisFirst.deserialize(_serialization.axisFirst);
            await this.axisSecond.deserialize(_serialization.axisSecond);
            this.#mutate(_serialization);
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        async mutate(_mutator) {
            if (typeof (_mutator.axisFirst) !== "undefined")
                this.axisFirst = new FudgeCore.Vector3(...(Object.values(_mutator.axisFirst)));
            if (typeof (_mutator.axisSecond) !== "undefined")
                this.axisSecond = new FudgeCore.Vector3(...(Object.values(_mutator.axisSecond)));
            delete _mutator.axisFirst;
            delete _mutator.axisSecond;
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            super.mutate(_mutator);
        }
        getMutator() {
            let mutator = super.getMutator();
            Object.assign(mutator, this.#getMutator());
            mutator.axisFirst = this.axisFirst.getMutator();
            mutator.axisSecond = this.axisSecond.getMutator();
            return mutator;
        }
        #getMutator;
        #mutate;
        //#endregion
        constructJoint() {
            this.#springDamperTwist = new OIMO.SpringDamper().setSpring(this.springFrequencyTwist, this.springDampingTwist);
            this.#springDamperSwing = new OIMO.SpringDamper().setSpring(this.springFrequencySwing, this.springDampingSwing);
            this.#motorTwist = new OIMO.RotationalLimitMotor().setLimits(this.minMotorTwist, this.maxMotorTwist);
            this.#motorTwist.setMotor(this.motorSpeedTwist, this.motorTorqueTwist);
            this.config = new OIMO.RagdollJointConfig();
            super.constructJoint(this.axisFirst, this.axisSecond);
            this.config.swingSpringDamper = this.#springDamperSwing;
            this.config.twistSpringDamper = this.#springDamperTwist;
            this.config.twistLimitMotor = this.#motorTwist;
            this.config.maxSwingAngle1 = this.#maxAngleFirst;
            this.config.maxSwingAngle2 = this.#maxAngleSecond;
            this.joint = new OIMO.RagdollJoint(this.config);
            super.configureJoint();
        }
    }
    JointRagdoll.iSubclass = FudgeCore.Joint.registerSubclass(JointRagdoll);
    FudgeCore.JointRagdoll = JointRagdoll;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with a defined axe of rotation. Also known as HINGE joint.
       * Two RigidBodies need to be defined to use it. A motor can be defined to rotate the connected along the defined axis.
       *
       * ```plaintext
       *                  rotation axis, 1st Degree of freedom
       *                    ‚Üë
       *               ‚îå‚îÄ‚îÄ‚îÄ‚îê‚îÇ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       *               ‚îÇ   ‚îÇ‚îÇ‚îÇ    ‚îÇ
       *               ‚îÇ   ‚îÇ‚îÇ‚îÇ    ‚îÇ
       *               ‚îÇ   ‚îÇ‚îÇ‚îÇ    ‚îÇ
       *               ‚îî‚îÄ‚îÄ‚îÄ‚îò‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       *                    ‚îÇ
       *      bodyAnchor         bodyTied
       *   (e.g. Doorhinge)       (e.g. Door)
       * ```
       * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointRevolute extends FudgeCore.JointAxial {
        constructor(_bodyAnchor = null, _bodyTied = null, _axis = new FudgeCore.Vector3(0, 1, 0), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied, _axis, _localAnchor);
            this.#motorTorque = 0;
            this.config = new OIMO.RevoluteJointConfig();
            this.maxMotor = 360;
            this.minMotor = 0;
        }
        #motorTorque;
        #rotor;
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
         */
        set maxMotor(_value) {
            super.maxMotor = _value;
            _value *= FudgeCore.Calc.deg2rad;
            if (this.joint)
                this.joint.getLimitMotor().upperLimit = _value;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        set minMotor(_value) {
            super.minMotor = _value;
            if (this.joint)
                this.joint.getLimitMotor().lowerLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The maximum motor force in Newton. force <= 0 equals disabled.
         */
        get motorTorque() {
            return this.#motorTorque;
        }
        set motorTorque(_value) {
            this.#motorTorque = _value;
            if (this.joint != null)
                this.joint.getLimitMotor().motorTorque = _value;
        }
        /**
          * If the two connected RigidBodies collide with eath other. (Default = false)
         */
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = {
                motorTorque: this.motorTorque,
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.motorTorque = _serialization.motorTorque;
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator();
            mutator.motorTorque = this.motorTorque;
            return mutator;
        }
        async mutate(_mutator) {
            if (typeof (_mutator.motorTorque) !== "undefined")
                this.motorTorque = _mutator.motorTorque;
            delete _mutator.motorTorque;
            super.mutate(_mutator);
        }
        //#endregion
        constructJoint() {
            this.#rotor = new OIMO.RotationalLimitMotor().setLimits(super.minMotor * FudgeCore.Calc.deg2rad, super.maxMotor * FudgeCore.Calc.deg2rad);
            this.#rotor.setMotor(this.motorSpeed, this.motorTorque);
            this.config = new OIMO.RevoluteJointConfig();
            super.constructJoint();
            this.config.springDamper = this.springDamper;
            this.config.limitMotor = this.#rotor;
            this.joint = new OIMO.RevoluteJoint(this.config);
            this.configureJoint();
        }
    }
    JointRevolute.iSubclass = FudgeCore.Joint.registerSubclass(JointRevolute);
    FudgeCore.JointRevolute = JointRevolute;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with three Degrees of Freedom, also known as ball and socket joint. Two bodies connected at their anchor but free to rotate.
       * Used for things like the connection of bones in the human shoulder (if simplified, else better use JointRagdoll). Two RigidBodies need to be defined to use it. Only spring settings can be defined.
       * 3 Degrees are swing horizontal, swing vertical and twist.
       *
       * ```plaintext
       *              JointHolder
       *         z      bodyAnchor (e.g. Human-Shoulder)
       *      y  ‚Üë
       *        \|          ‚îÄ‚îÄ‚îÄ(‚óè‚îÄ‚îÄ‚îÄ
       *  -x <---|---> x           bodyTied
       *         |\                (e.g. Upper-Arm)
       *         ‚Üì -y
       *        -z
       * ```
       * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointSpherical extends FudgeCore.Joint {
        constructor(_bodyAnchor = null, _bodyTied = null, _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            this.#springDamping = 0;
            this.#springFrequency = 0;
            this.config = new OIMO.SphericalJointConfig();
            this.anchor = new FudgeCore.Vector3(_localAnchor.x, _localAnchor.y, _localAnchor.z);
        }
        #springDamping;
        #springFrequency;
        #springDamper;
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDamping() {
            return this.#springDamping;
        }
        set springDamping(_value) {
            this.#springDamping = _value;
            if (this.joint != null)
                this.joint.getSpringDamper().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequency() {
            return this.#springFrequency;
        }
        set springFrequency(_value) {
            this.#springFrequency = _value;
            if (this.joint != null)
                this.joint.getSpringDamper().frequency = _value;
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = {
                springDamping: this.springDamping,
                springFrequency: this.springFrequency,
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            this.springDamping = _serialization.springDamping;
            this.springFrequency = _serialization.springFrequency;
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        getMutator() {
            let mutator = super.getMutator();
            mutator.springDamping = this.springDamping;
            mutator.springFrequency = this.springFrequency;
            return mutator;
        }
        async mutate(_mutator) {
            this.mutateBase(_mutator, ["springDamping", "springFrequency"]);
            delete _mutator.springDamping;
            delete _mutator.springFrequency;
            super.mutate(_mutator);
        }
        //#endregion
        constructJoint() {
            this.#springDamper = new OIMO.SpringDamper().setSpring(this.springFrequency, this.springDamping);
            this.config = new OIMO.SphericalJointConfig();
            super.constructJoint();
            this.config.springDamper = this.#springDamper;
            this.joint = new OIMO.SphericalJoint(this.config);
            super.configureJoint();
        }
    }
    JointSpherical.iSubclass = FudgeCore.Joint.registerSubclass(JointSpherical);
    FudgeCore.JointSpherical = JointSpherical;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with two defined axis (normally e.g. (0,0,1) and rotation(1,0,0)), they share the same anchor and have free rotation, but transfer the twist.
       * In reality used in cars to transfer the more stable stationary force on the velocity axis to the bumping, damped moving wheel. Two RigidBodies need to be defined to use it.
       * The two motors can be defined for the two rotation axis, along with springs.
       * ```plaintext
       *
       *                      anchor - twist is transfered between bodies
       *         z                   |
       *         ‚Üë            -----  |  ------------
       *         |           |     | ‚Üì |            |
       *  -x <---|---> x     |     | x |            |           e.g. wheel can still turn up/down,
       *         |           |     |   |            |           left right but transfering it's rotation on to the wheel-axis.
       *         ‚Üì            -----     ------------
       *        -z
       *                 attachedRB          connectedRB
       *                (e.g. wheel)       (e.g. wheel-axis)
       * ```
     * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointUniversal extends FudgeCore.Joint {
        constructor(_bodyAnchor = null, _bodyTied = null, _axisFirst = new FudgeCore.Vector3(1, 0, 0), _axisSecond = new FudgeCore.Vector3(0, 0, 1), _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            this.#springDampingFirst = 0;
            this.#springFrequencyFirst = 0;
            this.#springDampingSecond = 0;
            this.#springFrequencySecond = 0;
            this.#maxRotorFirst = 360;
            this.#minRotorFirst = 0;
            this.#rotorTorqueFirst = 0;
            this.#rotorSpeedFirst = 0;
            this.#maxRotorSecond = 360;
            this.#minRotorSecond = 0;
            this.#rotorTorqueSecond = 0;
            this.#rotorSpeedSecond = 0;
            this.config = new OIMO.UniversalJointConfig();
            this.#getMutator = () => {
                let mutator = {
                    springDampingFirst: this.#springDampingFirst,
                    springFrequencyFirst: this.#springFrequencyFirst,
                    springDampingSecond: this.#springDampingSecond,
                    springFrequencySecond: this.#springFrequencySecond,
                    maxRotorFirst: this.#maxRotorFirst,
                    minRotorFirst: this.#minRotorFirst,
                    rotorSpeedFirst: this.#rotorSpeedFirst,
                    rotorTorqueFirst: this.#rotorTorqueFirst,
                    maxRotorSecond: this.#maxRotorSecond,
                    minRotorSecond: this.#minRotorSecond,
                    rotorSpeedSecond: this.#rotorSpeedSecond,
                    rotorTorqueSecond: this.#rotorTorqueSecond
                };
                return mutator;
            };
            this.#mutate = (_mutator) => {
                this.mutateBase(_mutator, [
                    "springDampingFirst", "springFrequencyFirst", "springDampingSecond", "springFrequencySecond",
                    "maxRotorFirst", "minRotorFirst", "rotorSpeedFirst", "rotorTorqueFirst",
                    "maxRotorSecond", "minRotorSecond", "rotorSpeedSecond", ".rotorTorqueSecond"
                ]);
            };
            this.axisFirst = _axisFirst;
            this.axisSecond = _axisSecond;
            this.anchor = _localAnchor;
        }
        #springDampingFirst;
        #springFrequencyFirst;
        #springDampingSecond;
        #springFrequencySecond;
        #maxRotorFirst;
        #minRotorFirst;
        #rotorTorqueFirst;
        #rotorSpeedFirst;
        #maxRotorSecond;
        #minRotorSecond;
        #rotorTorqueSecond;
        #rotorSpeedSecond;
        #motorFirst;
        #motorSecond;
        #axisSpringDamperFirst;
        #axisSpringDamperSecond;
        #axisFirst;
        #axisSecond;
        //#region Get/Set transfor of fudge properties to the physics engine
        /**
         * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
         *  When changed after initialization the joint needs to be reconnected.
         */
        get axisFirst() {
            return new FudgeCore.Vector3(this.#axisFirst.x, this.#axisFirst.y, this.#axisFirst.z);
        }
        set axisFirst(_value) {
            this.#axisFirst = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
        * The axis connecting the the two {@link Node}s e.g. Vector3(0,1,0) to have a upward connection.
        *  When changed after initialization the joint needs to be reconnected.
        */
        get axisSecond() {
            return new FudgeCore.Vector3(this.#axisSecond.x, this.#axisSecond.y, this.#axisSecond.z);
        }
        set axisSecond(_value) {
            this.#axisSecond = new OIMO.Vec3(_value.x, _value.y, _value.z);
            this.disconnect();
            this.dirtyStatus();
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDampingFirst() {
            return this.#springDampingFirst;
        }
        set springDampingFirst(_value) {
            this.#springDampingFirst = _value;
            if (this.joint != null)
                this.joint.getSpringDamper1().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequencyFirst() {
            return this.#springFrequencyFirst;
        }
        set springFrequencyFirst(_value) {
            this.#springFrequencyFirst = _value;
            if (this.joint != null)
                this.joint.getSpringDamper1().frequency = _value;
        }
        /**
         * The damping of the spring. 1 equals completly damped.
         */
        get springDampingSecond() {
            return this.#springDampingSecond;
        }
        set springDampingSecond(_value) {
            this.#springDampingSecond = _value;
            if (this.joint != null)
                this.joint.getSpringDamper2().dampingRatio = _value;
        }
        /**
         * The frequency of the spring in Hz. At 0 the spring is rigid, equals no spring. The smaller the value the less restrictive is the spring.
        */
        get springFrequencySecond() {
            return this.#springFrequencySecond;
        }
        set springFrequencySecond(_value) {
            this.#springFrequencySecond = _value;
            if (this.joint != null)
                this.joint.getSpringDamper2().frequency = _value;
        }
        /**
          * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
         */
        get maxRotorFirst() {
            return this.#maxRotorFirst;
        }
        set maxRotorFirst(_value) {
            this.#maxRotorFirst = _value;
            if (this.joint != null)
                this.joint.getLimitMotor1().upperLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        get minRotorFirst() {
            return this.#minRotorFirst;
        }
        set minRotorFirst(_value) {
            this.#minRotorFirst = _value;
            if (this.joint != null)
                this.joint.getLimitMotor1().lowerLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The target rotational speed of the motor in m/s.
         */
        get rotorSpeedFirst() {
            return this.#rotorSpeedFirst;
        }
        set rotorSpeedFirst(_value) {
            this.#rotorSpeedFirst = _value;
            if (this.joint != null)
                this.joint.getLimitMotor1().motorSpeed = _value;
        }
        /**
          * The maximum motor torque in Newton. force <= 0 equals disabled.
         */
        get rotorTorqueFirst() {
            return this.#rotorTorqueFirst;
        }
        set rotorTorqueFirst(_value) {
            this.#rotorTorqueFirst = _value;
            if (this.joint != null)
                this.joint.getLimitMotor1().motorTorque = _value;
        }
        /**
        * The Upper Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis-Angle measured in Degree.
       */
        get maxRotorSecond() {
            return this.#maxRotorSecond;
        }
        set maxRotorSecond(_value) {
            this.#maxRotorSecond = _value;
            if (this.joint != null)
                this.joint.getLimitMotor2().upperLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The Lower Limit of movement along the axis of this joint. The limiter is disable if lowerLimit > upperLimit. Axis Angle measured in Degree.
         */
        get minRotorSecond() {
            return this.#minRotorSecond;
        }
        set minRotorSecond(_value) {
            this.#minRotorSecond = _value;
            if (this.joint != null)
                this.joint.getLimitMotor2().lowerLimit = _value * FudgeCore.Calc.deg2rad;
        }
        /**
          * The target rotational speed of the motor in m/s.
         */
        get rotorSpeedSecond() {
            return this.#rotorSpeedSecond;
        }
        set rotorSpeedSecond(_value) {
            this.#rotorSpeedSecond = _value;
            if (this.joint != null)
                this.joint.getLimitMotor2().motorSpeed = _value;
        }
        /**
          * The maximum motor torque in Newton. force <= 0 equals disabled.
         */
        get rotorTorqueSecond() {
            return this.#rotorTorqueSecond;
        }
        set rotorTorqueSecond(_value) {
            this.#rotorTorqueSecond = _value;
            if (this.joint != null)
                this.joint.getLimitMotor2().motorTorque = _value;
        }
        /**
          * If the two connected RigidBodies collide with eath other. (Default = false)
         */
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = this.#getMutator();
            serialization.firstAxis = this.axisFirst.serialize();
            serialization.secondAxis = this.axisSecond.serialize();
            serialization[super.constructor.name] = super.serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            this.axisFirst = await new FudgeCore.Vector3().deserialize(_serialization.axisFirst);
            this.axisSecond = await new FudgeCore.Vector3().deserialize(_serialization.axisSecond);
            this.#mutate(_serialization);
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        async mutate(_mutator) {
            if (typeof (_mutator.axisFirst) !== "undefined")
                this.axisFirst = new FudgeCore.Vector3(...(Object.values(_mutator.axisFirst)));
            if (typeof (_mutator.axisSecond) !== "undefined")
                this.axisSecond = new FudgeCore.Vector3(...(Object.values(_mutator.axisSecond)));
            delete _mutator.axisFirst;
            delete _mutator.axisSecond;
            this.#mutate(_mutator);
            this.deleteFromMutator(_mutator, this.#getMutator());
            super.mutate(_mutator);
        }
        getMutator() {
            let mutator = super.getMutator();
            Object.assign(mutator, this.#getMutator());
            mutator.axisFirst = this.axisFirst.getMutator();
            mutator.axisSecond = this.axisSecond.getMutator();
            return mutator;
        }
        #getMutator;
        #mutate;
        //#endregion
        constructJoint() {
            this.#axisSpringDamperFirst = new OIMO.SpringDamper().setSpring(this.#springFrequencyFirst, this.#springDampingFirst);
            this.#axisSpringDamperSecond = new OIMO.SpringDamper().setSpring(this.#springFrequencySecond, this.#springDampingSecond);
            this.#motorFirst = new OIMO.RotationalLimitMotor().setLimits(this.#minRotorFirst * FudgeCore.Calc.deg2rad, this.#maxRotorFirst * FudgeCore.Calc.deg2rad);
            this.#motorFirst.setMotor(this.#rotorSpeedFirst, this.#rotorTorqueFirst);
            this.#motorSecond = new OIMO.RotationalLimitMotor().setLimits(this.#minRotorFirst * FudgeCore.Calc.deg2rad, this.#maxRotorFirst * FudgeCore.Calc.deg2rad);
            this.#motorSecond.setMotor(this.#rotorSpeedFirst, this.#rotorTorqueFirst);
            this.config = new OIMO.UniversalJointConfig();
            super.constructJoint(this.#axisFirst, this.#axisSecond);
            this.config.limitMotor1 = this.#motorFirst;
            this.config.limitMotor2 = this.#motorSecond;
            this.config.springDamper1 = this.#axisSpringDamperFirst;
            this.config.springDamper2 = this.#axisSpringDamperSecond;
            this.joint = new OIMO.UniversalJoint(this.config);
            super.configureJoint();
        }
    }
    JointUniversal.iSubclass = FudgeCore.Joint.registerSubclass(JointUniversal);
    FudgeCore.JointUniversal = JointUniversal;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
       * A physical connection between two bodies with no movement.
       * Best way to simulate convex objects like a chair seat connected to chair legs.
       * The actual anchor point does not matter that much, only in very specific edge cases.
       * Because welding means they simply do not disconnect. (unless you add Breakability)
     * @author Marko Fehrenbach, HFU, 2020 | Jirka Dell'Oro-Friedl, HFU, 2021
       */
    class JointWelding extends FudgeCore.Joint {
        constructor(_bodyAnchor = null, _bodyTied = null, _localAnchor = new FudgeCore.Vector3(0, 0, 0)) {
            super(_bodyAnchor, _bodyTied);
            this.config = new OIMO.GenericJointConfig();
            this.anchor = new FudgeCore.Vector3(_localAnchor.x, _localAnchor.y, _localAnchor.z);
        }
        //#endregion
        //#region Saving/Loading
        serialize() {
            let serialization = {
                [super.constructor.name]: super.serialize()
            };
            return serialization;
        }
        async deserialize(_serialization) {
            super.deserialize(_serialization[super.constructor.name]);
            return this;
        }
        //#endregion
        constructJoint() {
            this.config = new OIMO.GenericJointConfig();
            super.constructJoint(new OIMO.Mat3(), new OIMO.Mat3());
            this.joint = new OIMO.GenericJoint(this.config);
            this.joint.setAllowCollision(this.internalCollision);
        }
    }
    JointWelding.iSubclass = FudgeCore.Joint.registerSubclass(JointWelding);
    FudgeCore.JointWelding = JointWelding;
})(FudgeCore || (FudgeCore = {}));
/// <reference path="../../../Physics/OimoPhysics.d.ts"/>
var FudgeCore;
/// <reference path="../../../Physics/OimoPhysics.d.ts"/>
(function (FudgeCore) {
    /**
      * Manages the OIMO physics engine for FUDGE. Multiple instances may be created, one is active at a time.
      * All methods are static and use the currently active instance. At startup, a default instance is created and become the active instance
      * Attaching a {@link ComponentRigidbody} to a {@link Node} places a physics collider in the physics instance active at that time.
      * @author Marko Fehrenbach, HFU 2020
      */
    class Physics {
        constructor() {
            this.bodyList = new Array();
            this.jointList = new Array();
            if (typeof OIMO == "undefined") { // Check if OIMO Namespace was loaded, else do not use any physics. Check is needed to ensure FUDGE can be used without Physics
                FudgeCore.Debug.error("OIMO physics engine not connected!");
                return null;
            }
            this.oimoWorld = new OIMO.World();
            this.#debugDraw = new FudgeCore.PhysicsDebugDraw(); //Create a FUDGE Physics debugging handling object
            this.oimoWorld.setDebugDraw(this.#debugDraw.oimoDebugDraw); //Tell OimoPhysics where to debug to and how it will be handled
        }
        /** The rendering of physical debug informations. Used internally no interaction needed.*/
        #debugDraw;
        /** The camera/viewport the physics are debugged to. Used internally no interaction needed. */
        #mainCam;
        /**
         * Define the currently active Physics instance
         */
        static set activeInstance(_physics) {
            Physics.∆íactive = _physics;
        }
        /** Get the currently active Physics instance */
        static get activeInstance() {
            return Physics.∆íactive;
        }
        static get debugDraw() {
            return Physics.∆íactive.#debugDraw;
        }
        static get mainCam() {
            return Physics.∆íactive.#mainCam;
        }
        /**
        * Cast a RAY into the physical world from a origin point in a certain direction. Receiving informations about the hit object and the
        * hit point. Do not specify a _group to raycast the whole world, else only bodies within the specific group can be hit.
        */
        static raycast(_origin, _direction, _length = 1, _debugDraw = false, _group = FudgeCore.COLLISION_GROUP.DEFAULT) {
            let hitInfo = new FudgeCore.RayHitInfo();
            let ray = new OIMO.RayCastClosest();
            let begin = new OIMO.Vec3(_origin.x, _origin.y, _origin.z);
            let end = this.getRayEndPoint(begin, new FudgeCore.Vector3(_direction.x, _direction.y, _direction.z), _length);
            ray.clear();
            if (_group == FudgeCore.COLLISION_GROUP.DEFAULT) { //Case 1: Raycasting the whole world, normal mode
                Physics.∆íactive.oimoWorld.rayCast(begin, end, ray);
            }
            else { //Case2: Raycasting on each body in a specific group
                let allHits = new Array();
                Physics.∆íactive.bodyList.forEach(function (value) {
                    if (value.collisionGroup == _group) {
                        hitInfo = value.raycastThisBody(_origin, _direction, _length);
                        if (hitInfo.hit == true) { //Every hit is could potentially be the closest
                            allHits.push(hitInfo);
                        }
                    }
                });
                allHits.forEach(function (value) {
                    if (value.hitDistance < hitInfo.hitDistance || hitInfo.hit == false) {
                        hitInfo = value;
                    }
                });
            }
            if (ray.hit) { //Fill in informations on the hit
                hitInfo.hit = true;
                hitInfo.hitPoint = new FudgeCore.Vector3(ray.position.x, ray.position.y, ray.position.z);
                hitInfo.hitNormal = new FudgeCore.Vector3(ray.normal.x, ray.normal.y, ray.normal.z);
                hitInfo.hitDistance = this.getRayDistance(_origin, hitInfo.hitPoint);
                hitInfo.rigidbodyComponent = ray.shape.userData;
                hitInfo.rayEnd = new FudgeCore.Vector3(end.x, end.y, end.z);
                hitInfo.rayOrigin = _origin;
            }
            else {
                hitInfo.rayOrigin = _origin;
                hitInfo.hitPoint = new FudgeCore.Vector3(end.x, end.y, end.z);
            }
            if (_debugDraw) { //Handle debugging
                Physics.∆íactive.#debugDraw.debugRay(hitInfo.rayOrigin, hitInfo.hitPoint, new FudgeCore.Color(0, 1, 0, 1));
            }
            return hitInfo;
        }
        /**
        * Simulates the physical world. _deltaTime is the amount of time between physical steps, default is about 17ms (assuming 60 frames per second).
        * The maximum value is 1/30 of a second, to have more consistent frame calculations.
        */
        static simulate(_deltaTime = 1 / 60) {
            if (Physics.∆íactive.jointList.length > 0)
                Physics.connectJoints(); //Connect joints if anything has happened between the last call to any of the two paired rigidbodies
            if (FudgeCore.Time.game.getScale() != 0) { //If time is stopped do not simulate to avoid misbehaviour
                _deltaTime = _deltaTime > 1 / 30 ? 1 / 30 : _deltaTime; //If instead of a fixed rate the game framerate is used, make sure irregular timings are fixed to 30fps
                Physics.∆íactive.oimoWorld.step(_deltaTime * FudgeCore.Time.game.getScale()); //Update the simulation by the given deltaTime and the FUDGE internal TimeScale
            }
        }
        /**
         * Draw information about the currently active instance using the {@link ComponentCamera} given
         */
        static draw(_cmpCamera, _mode) {
            Physics.∆íactive.#debugDraw.setDebugMode(_mode);
            Physics.∆íactive.#mainCam = _cmpCamera;
            Physics.∆íactive.oimoWorld.debugDraw(); //Filling the physics world debug informations into the debug rendering handler
            Physics.∆íactive.#debugDraw.drawBuffers();
            Physics.∆íactive.#debugDraw.clearBuffers(); //Updates info about the current projection, resetting the points/lines/triangles that need to be drawn from debug
        }
        /**
          * Adjusts the transforms of the {@link ComponentRigidbody}s in the given branch to match their nodes or meshes
          */
        static adjustTransforms(_branch, _toMesh = false) {
            FudgeCore.Render.prepare(_branch, { ignorePhysics: true });
            for (let node of FudgeCore.Render.nodesPhysics)
                node.getComponent(FudgeCore.ComponentRigidbody).initialize();
        }
        /**
        * Get the applied gravitational force of the active instance. Default earth gravity = 9.81 m/s
        */
        static getGravity() {
            let tmpVec = Physics.∆íactive.oimoWorld.getGravity();
            return new FudgeCore.Vector3(tmpVec.x, tmpVec.y, tmpVec.z);
        }
        /**
        * Set the applied gravitational force of the active instance. Default earth gravity = 9.81 m/s
        */
        static setGravity(_value) {
            let tmpVec = new OIMO.Vec3(_value.x, _value.y, _value.z);
            Physics.∆íactive.oimoWorld.setGravity(tmpVec);
        }
        /**
        * Add a new OIMO Rigidbody to the active instance, happens automatically when adding a FUDGE Rigidbody Component.
        */
        static addRigidbody(_cmpRB) {
            Physics.∆íactive.bodyList.push(_cmpRB);
            Physics.∆íactive.oimoWorld.addRigidBody(_cmpRB.getOimoRigidbody());
        }
        /**
        * Remove the OIMO Rigidbody to the active instance, happens automatically when removing a FUDGE Rigidbody Component
        */
        static removeRigidbody(_cmpRB) {
            // TODO: two lists are being managed, info might deviate. Cleanup!
            let oimoRigidBody = _cmpRB.getOimoRigidbody();
            if (oimoRigidBody._world)
                oimoRigidBody._world.removeRigidBody(oimoRigidBody);
            // what if the rigidbodys oimo-world does not belong to the active instance?
            let id = Physics.∆íactive.bodyList.indexOf(_cmpRB);
            Physics.∆íactive.bodyList.splice(id, 1);
        }
        /**
        * Add a new OIMO Joint/Constraint to the active instance, happens automatically when adding a FUDGE Joint Component
        */
        static addJoint(_cmpJoint) {
            Physics.∆íactive.oimoWorld.addJoint(_cmpJoint.getOimoJoint());
        }
        /**
        * Called internally to inform the physics system that a joint has a change of core properties and needs to be recreated.
        */
        static changeJointStatus(_cmpJoint) {
            if (Physics.∆íactive.jointList.indexOf(_cmpJoint) < 0)
                Physics.∆íactive.jointList.push(_cmpJoint);
        }
        /**
          * Remove the OIMO Joint/Constraint to the active instance, happens automatically when removing a FUDGE Joint Component
          */
        static removeJoint(_cmpJoint) {
            try {
                Physics.∆íactive.oimoWorld.removeJoint(_cmpJoint.getOimoJoint());
            }
            catch (_error) {
                FudgeCore.Debug.fudge(_error);
            }
        }
        /** Returns all the ComponentRigidbodies that are known to the active instance. */
        static getBodyList() {
            return Physics.∆íactive.bodyList;
        }
        /** Giving a ComponentRigidbody a specific identification number so it can be referenced in the loading process. And removed rb's can receive a new id. */
        static distributeBodyID() {
            let freeId = 0;
            let free = false;
            Physics.∆íactive.bodyList.forEach((_value) => {
                if (_value.id != freeId) {
                    free = true;
                }
                else {
                    free = false;
                }
                if (!free) {
                    freeId++;
                }
            });
            return freeId;
        }
        /**
         * Connect all joints that are not connected yet. Used internally no user interaction needed. This functionality is called and needed to make sure joints connect/disconnect
         * if any of the two paired ComponentRigidbodies change.
         */
        static connectJoints() {
            let jointsToConnect = Physics.∆íactive.jointList;
            Physics.∆íactive.jointList = [];
            jointsToConnect.forEach((_joint) => {
                if (_joint.isConnected() == false)
                    if (_joint.isActive)
                        _joint.connect();
                    else
                        Physics.∆íactive.jointList.push(_joint);
            });
        }
        /** Remove all oimo joints and rigidbodies, so that they can be reused in another world  */
        static cleanup() {
            let oimoWorld = Physics.∆íactive.oimoWorld;
            if (oimoWorld != null) {
                //Resetting the world so a new world can be created, fix for re-opening a project in editor, making sure there are no old things calculated
                let jointsWorld = oimoWorld.getNumJoints();
                let bodiesWorld = oimoWorld.getNumRigidBodies();
                for (let body of Physics.∆íactive.bodyList)
                    body.isInitialized = false;
                Physics.∆íactive.jointList = new Array(); // TODO: see if it would be smarter, do use these arrays. Definitely more intuitive...
                for (let i = 0; i < jointsWorld; i++) {
                    let oimoJoint = Physics.∆íactive.oimoWorld.getJointList();
                    oimoWorld.removeJoint(oimoJoint);
                }
                for (let i = 0; i < bodiesWorld; i++) {
                    let oimoBody = oimoWorld.getRigidBodyList();
                    oimoWorld.removeRigidBody(oimoBody);
                }
            }
        }
        // /** Returns the ComponentRigidbody with the given id. Used internally to reconnect joints on loading in the editor. */
        // private static getBodyByID(_id: number): ComponentRigidbody {
        //   let body: ComponentRigidbody = null;
        //   Physics.#activePhysics.bodyList.forEach((value: ComponentRigidbody): void => {
        //     if (value.id == _id) {
        //       body = value;
        //     }
        //   });
        //   return body;
        // }
        /** Internal function to calculate the endpoint of mathematical ray. By adding the multiplied direction to the origin.
           * Used because OimoPhysics defines ray by start/end. But GameEngines commonly use origin/direction.
           */
        static getRayEndPoint(start, direction, length) {
            let origin = FudgeCore.Recycler.get(FudgeCore.Vector3);
            origin.set(start.x, start.y, start.z);
            let scaledDirection = direction.clone;
            scaledDirection.scale(length);
            let endpoint = FudgeCore.Vector3.SUM(scaledDirection, origin);
            FudgeCore.Recycler.store(scaledDirection);
            FudgeCore.Recycler.store(endpoint);
            FudgeCore.Recycler.store(origin);
            return new OIMO.Vec3(endpoint.x, endpoint.y, endpoint.z);
        }
        /** Internal function to get the distance in which a ray hit by subtracting points from each other and get the square root of the squared product of each component. */
        static getRayDistance(origin, hitPoint) {
            let dx = origin.x - hitPoint.x;
            let dy = origin.y - hitPoint.y;
            let dz = origin.z - hitPoint.z;
            return Math.sqrt(dx * dx + dy * dy + dz * dz);
        }
        // /** Returns the actual used world of the OIMO physics engine. No user interaction needed - Only for advanced users that need to access it directly */
        getOimoWorld() {
            return Physics.∆íactive.oimoWorld;
        }
    }
    /** The SETTINGS that apply to the physical world. Ranging from things like sleeping, collisionShapeThickness and others */
    Physics.settings = new FudgeCore.PhysicsSettings(FudgeCore.COLLISION_GROUP.DEFAULT, (FudgeCore.COLLISION_GROUP.DEFAULT | FudgeCore.COLLISION_GROUP.GROUP_1 | FudgeCore.COLLISION_GROUP.GROUP_2 | FudgeCore.COLLISION_GROUP.GROUP_3 | FudgeCore.COLLISION_GROUP.GROUP_4));
    Physics.∆íactive = new Physics();
    FudgeCore.Physics = Physics;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Defines a threedimensional box by two corner-points, one with minimal values and one with maximum values
     */
    class Box {
        constructor(_min = FudgeCore.Vector3.ONE(Infinity), _max = FudgeCore.Vector3.ONE(-Infinity)) {
            this.set(_min, _max);
        }
        /**
         * Define the corners of this box, standard values are Infinity for min, and -Infinity for max,
         * creating an impossible inverted box that can not contain any points
         */
        set(_min = FudgeCore.Vector3.ONE(Infinity), _max = FudgeCore.Vector3.ONE(-Infinity)) {
            this.min = _min;
            this.max = _max;
        }
        /**
         * Expand the box if necessary to include the given point
         */
        expand(_include) {
            this.min.min(_include);
            this.max.max(_include);
        }
        recycle() {
            this.min.set(Infinity, Infinity, Infinity);
            this.max.set(-Infinity, -Infinity, -Infinity);
        }
    }
    FudgeCore.Box = Box;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Stores information provided by {@link Render}-picking e.g. using {@link Picker} and provides methods for further calculation of positions and normals etc.
     *
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class Pick {
        constructor(_node) {
            this.node = _node;
        }
        #mtxViewToWorld;
        #posWorld;
        #posMesh;
        /**
         * Accessor to calculate and store world position of intersection of {@link Ray} and {@link Mesh} only when used.
         */
        get posWorld() {
            if (this.#posWorld)
                return this.#posWorld;
            let pointInClipSpace = FudgeCore.Vector3.Z(this.zBuffer);
            let m = this.#mtxViewToWorld.get();
            let result = FudgeCore.Vector3.TRANSFORMATION(pointInClipSpace, this.#mtxViewToWorld, true);
            let w = m[3] * pointInClipSpace.x + m[7] * pointInClipSpace.y + m[11] * pointInClipSpace.z + m[15];
            result.scale(1 / w);
            this.#posWorld = result;
            return result;
        }
        /**
         * Accessor to calculate and store position in mesh-space of intersection of {@link Ray} and {@link Mesh} only when used.
         */
        get posMesh() {
            if (this.#posMesh)
                return this.#posMesh;
            let mtxWorldToMesh = FudgeCore.Matrix4x4.INVERSION(this.node.getComponent(FudgeCore.ComponentMesh).mtxWorld);
            let posMesh = FudgeCore.Vector3.TRANSFORMATION(this.posWorld, mtxWorldToMesh);
            this.#posMesh = posMesh;
            return posMesh;
        }
        /**
         * Accessor to calculate and store the face normal in world-space at the point of intersection of {@link Ray} and {@link Mesh} only when used.
         */
        get normal() {
            let cmpMesh = this.node.getComponent(FudgeCore.ComponentMesh);
            let result;
            for (let face of cmpMesh.mesh.faces) {
                if (face.isInside(this.posMesh)) {
                    result = face.normal.clone;
                    break;
                }
            }
            result.transform(cmpMesh.mtxWorld, false);
            result.normalize();
            return result;
        }
        /**
         * Called solely by the renderer to enable calculation of the world coordinates of this {@link Pick}
         */
        set mtxViewToWorld(_mtxViewToWorld) {
            this.#mtxViewToWorld = _mtxViewToWorld;
        }
    }
    FudgeCore.Pick = Pick;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Provides static methods for picking using {@link Render}
     *
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class Picker {
        /**
         * Takes a ray plus min and max values for the near and far planes to construct the picker-camera,
         * then renders the pick-texture and returns an unsorted {@link Pick}-array with information about the hits of the ray.
         */
        static pickRay(_nodes, _ray, _min, _max) {
            let cmpCameraPick = new FudgeCore.ComponentCamera();
            cmpCameraPick.mtxPivot.translation = _ray.origin;
            cmpCameraPick.mtxPivot.lookAt(_ray.direction);
            cmpCameraPick.projectCentral(1, 0.001, FudgeCore.FIELD_OF_VIEW.DIAGONAL, _min, _max);
            let picks = FudgeCore.Render.pickBranch(_nodes, cmpCameraPick);
            return picks;
        }
        /**
         * Takes a camera and a point on its virtual normed projection plane (distance 1) to construct the picker-camera,
         * then renders the pick-texture and returns an unsorted {@link Pick}-array with information about the hits of the ray.
         */
        static pickCamera(_nodes, _cmpCamera, _posProjection) {
            let ray = new FudgeCore.Ray(new FudgeCore.Vector3(-_posProjection.x, _posProjection.y, 1));
            let length = ray.direction.magnitude;
            if (_cmpCamera.node) {
                let mtxCamera = FudgeCore.Matrix4x4.MULTIPLICATION(_cmpCamera.node.mtxWorld, _cmpCamera.mtxPivot);
                ray.transform(mtxCamera);
                FudgeCore.Recycler.store(mtxCamera);
            }
            else
                ray.transform(_cmpCamera.mtxPivot);
            let picks = Picker.pickRay(_nodes, ray, length * _cmpCamera.getNear(), length * _cmpCamera.getFar());
            return picks;
        }
        /**
         * Takes the camera of the given viewport and a point the client surface to construct the picker-camera,
         * then renders the pick-texture and returns an unsorted {@link Pick}-array with information about the hits of the ray.
         */
        static pickViewport(_viewport, _posClient) {
            let posProjection = _viewport.pointClientToProjection(_posClient);
            let nodes = Array.from(_viewport.getBranch().getIterator(true));
            let picks = Picker.pickCamera(nodes, _viewport.camera, posProjection);
            return picks;
        }
    }
    FudgeCore.Picker = Picker;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Defined by an origin and a direction of type {@link Pick}, rays are used to calculate picking and intersections
     *
     * @authors Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class Ray {
        constructor(_direction = FudgeCore.Vector3.Z(1), _origin = FudgeCore.Vector3.ZERO(), _length = 1) {
            this.origin = _origin;
            this.direction = _direction;
            this.length = _length;
        }
        /**
         * Returns the point of intersection of this ray with a plane defined by
         * the given point of origin and the planes normal. All values and calculations
         * must be relative to the same coordinate system, preferably the world
         */
        intersectPlane(_origin, _normal) {
            let difference = FudgeCore.Vector3.DIFFERENCE(_origin, this.origin);
            let factor = FudgeCore.Vector3.DOT(difference, _normal) / FudgeCore.Vector3.DOT(this.direction, _normal);
            let intersect = FudgeCore.Vector3.SUM(this.origin, FudgeCore.Vector3.SCALE(this.direction, factor));
            return intersect;
        }
        /**
         * Returns the point of intersection of this ray with a plane defined by the face.
         * All values and calculations must be relative to the same coordinate system, preferably the world
         */
        intersectFacePlane(_face) {
            return this.intersectPlane(_face.getPosition(0), _face.normal);
        }
        /**
         * Returns the shortest distance from the ray to the given target point.
         * All values and calculations must be relative to the same coordinate system, preferably the world.
         */
        getDistance(_target) {
            let originToTarget = FudgeCore.Vector3.DIFFERENCE(_target, this.origin);
            let raySection = FudgeCore.Vector3.NORMALIZATION(this.direction, 1);
            let projectedLength = FudgeCore.Vector3.DOT(originToTarget, raySection);
            raySection.scale(projectedLength);
            raySection.add(this.origin);
            let distance = FudgeCore.Vector3.DIFFERENCE(_target, raySection);
            return distance;
        }
        /**
         * Transform the ray by the given matrix
         */
        transform(_mtxTransform) {
            this.direction.transform(_mtxTransform);
            this.origin.transform(_mtxTransform);
        }
        /**
         * Returns a readable string representation of this ray
         */
        toString() {
            return `origin: ${this.origin.toString()}, direction: ${this.direction.toString()}, length: ${this.length.toPrecision(5)}`;
        }
    }
    FudgeCore.Ray = Ray;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * The main interface to the render engine, here WebGL (see superclass {@link RenderWebGL} and the RenderInjectors
     */
    class Render extends FudgeCore.RenderWebGL {
        // TODO: research if picking should be optimized using radius picking to filter
        //#region Prepare
        /**
         * Recursively iterates over the branch starting with the node given, recalculates all world transforms,
         * collects all lights and feeds all shaders used in the graph with these lights. Sorts nodes for different
         * render passes.
         */
        static prepare(_branch, _options = {}, _mtxWorld = FudgeCore.Matrix4x4.IDENTITY(), _shadersUsed = null) {
            let firstLevel = (_shadersUsed == null);
            if (firstLevel) {
                _shadersUsed = [];
                Render.timestampUpdate = performance.now();
                Render.nodesSimple.reset();
                Render.nodesAlpha.reset();
                Render.nodesPhysics.reset();
                Render.componentsPick.reset();
                Render.lights.forEach(_array => _array.reset());
                _branch.dispatchEvent(new Event("renderPrepareStart" /* RENDER_PREPARE_START */));
            }
            if (!_branch.isActive)
                return; // don't add branch to render list if not active
            _branch.nNodesInBranch = 1;
            _branch.radius = 0;
            _branch.dispatchEventToTargetOnly(new Event("renderPrepare" /* RENDER_PREPARE */));
            _branch.timestampUpdate = Render.timestampUpdate;
            if (_branch.cmpTransform && _branch.cmpTransform.isActive) {
                let mtxWorldBranch = FudgeCore.Matrix4x4.MULTIPLICATION(_mtxWorld, _branch.cmpTransform.mtxLocal);
                _branch.mtxWorld.set(mtxWorldBranch);
                FudgeCore.Recycler.store(mtxWorldBranch);
            }
            else
                _branch.mtxWorld.set(_mtxWorld); // overwrite readonly mtxWorld of the current node
            let cmpRigidbody = _branch.getComponent(FudgeCore.ComponentRigidbody);
            if (cmpRigidbody && cmpRigidbody.isActive) { //TODO: support de-/activation throughout
                Render.nodesPhysics.push(_branch); // add this node to physics list
                if (!_options?.ignorePhysics)
                    this.transformByPhysics(_branch, cmpRigidbody);
            }
            let cmpPick = _branch.getComponent(FudgeCore.ComponentPick);
            if (cmpPick && cmpPick.isActive) {
                Render.componentsPick.push(cmpPick); // add this component to pick list
            }
            let cmpLights = _branch.getComponents(FudgeCore.ComponentLight);
            Render.addLights(cmpLights);
            let cmpMesh = _branch.getComponent(FudgeCore.ComponentMesh);
            let cmpMaterial = _branch.getComponent(FudgeCore.ComponentMaterial);
            if (cmpMesh && cmpMesh.isActive && cmpMaterial && cmpMaterial.isActive) {
                let mtxWorldMesh = FudgeCore.Matrix4x4.MULTIPLICATION(_branch.mtxWorld, cmpMesh.mtxPivot);
                cmpMesh.mtxWorld.set(mtxWorldMesh);
                FudgeCore.Recycler.store(mtxWorldMesh); // TODO: examine, why recycling this causes meshes to be misplaced...
                let shader = cmpMaterial.material.getShader();
                let cmpParticleSystem = _branch.getComponent(FudgeCore.ComponentParticleSystem);
                if (cmpParticleSystem && cmpParticleSystem.isActive && cmpParticleSystem.particleSystem != null)
                    shader = cmpParticleSystem.particleSystem.getShaderFrom(shader);
                if (_shadersUsed.indexOf(shader) < 0)
                    _shadersUsed.push(shader);
                _branch.radius = cmpMesh.radius;
                if (cmpMaterial.sortForAlpha)
                    Render.nodesAlpha.push(_branch); // add this node to render list
                else
                    Render.nodesSimple.push(_branch); // add this node to render list
            }
            for (let child of _branch.getChildren()) {
                Render.prepare(child, _options, _branch.mtxWorld, _shadersUsed);
                _branch.nNodesInBranch += child.nNodesInBranch;
                let cmpMeshChild = child.getComponent(FudgeCore.ComponentMesh);
                let position = cmpMeshChild ? cmpMeshChild.mtxWorld.translation : child.mtxWorld.translation;
                position = position.clone;
                _branch.radius = Math.max(_branch.radius, position.getDistance(_branch.mtxWorld.translation) + child.radius);
                FudgeCore.Recycler.store(position);
            }
            if (firstLevel) {
                _branch.dispatchEvent(new Event("renderPrepareEnd" /* RENDER_PREPARE_END */));
                Render.fillLightsUBO(Render.lights);
            }
        }
        static addLights(_cmpLights) {
            for (let cmpLight of _cmpLights) {
                if (!cmpLight.isActive)
                    continue;
                let type = cmpLight.light.getType();
                let lightsOfType = Render.lights.get(type);
                if (!lightsOfType) {
                    lightsOfType = new FudgeCore.RecycableArray();
                    Render.lights.set(type, lightsOfType);
                }
                lightsOfType.push(cmpLight);
            }
        }
        //#endregion
        //#region Picking
        /**
         * Used with a {@link Picker}-camera, this method renders one pixel with picking information
         * for each node in the line of sight and return that as an unsorted {@link Pick}-array
         */
        static pickBranch(_nodes, _cmpCamera) {
            Render.∆ípicked = [];
            let size = Math.ceil(Math.sqrt(_nodes.length));
            Render.createPickTexture(size);
            Render.setBlendMode(FudgeCore.BLEND.OPAQUE);
            for (let node of _nodes) {
                let cmpMesh = node.getComponent(FudgeCore.ComponentMesh);
                let cmpMaterial = node.getComponent(FudgeCore.ComponentMaterial);
                if (cmpMesh && cmpMesh.isActive && cmpMaterial && cmpMaterial.isActive) {
                    // let mtxMeshToView: Matrix4x4 = Matrix4x4.MULTIPLICATION(_cmpCamera.mtxWorldToView, cmpMesh.mtxWorld);
                    Render.pick(node, node.mtxWorld, _cmpCamera);
                    // RenderParticles.drawParticles();
                    // Recycler.store(mtxMeshToView);
                }
            }
            Render.setBlendMode(FudgeCore.BLEND.TRANSPARENT);
            let picks = Render.getPicks(size, _cmpCamera);
            Render.resetFrameBuffer();
            return picks;
        }
        //#endregion
        //#region Drawing
        static draw(_cmpCamera) {
            _cmpCamera.resetWorldToView();
            Render.drawList(_cmpCamera, this.nodesSimple);
            Render.drawListAlpha(_cmpCamera);
        }
        static drawListAlpha(_cmpCamera) {
            function sort(_a, _b) {
                return (Reflect.get(_a, "zCamera") < Reflect.get(_b, "zCamera")) ? 1 : -1;
            }
            for (let node of Render.nodesAlpha)
                Reflect.set(node, "zCamera", _cmpCamera.pointWorldToClip(node.getComponent(FudgeCore.ComponentMesh).mtxWorld.translation).z);
            let sorted = Render.nodesAlpha.getSorted(sort);
            Render.drawList(_cmpCamera, sorted);
        }
        static drawList(_cmpCamera, _list) {
            for (let node of _list) {
                Render.drawNode(node, _cmpCamera);
            }
        }
        //#region Physics
        static transformByPhysics(_node, _cmpRigidbody) {
            if (!_cmpRigidbody.isInitialized) // || Project.mode == MODE.EDITOR)
                _cmpRigidbody.initialize();
            if (!FudgeCore.Physics.getBodyList().length)
                return;
            if (!_node.mtxLocal) {
                throw (new Error("ComponentRigidbody requires ComponentTransform at the same Node"));
            }
            _cmpRigidbody.checkCollisionEvents();
            if (_cmpRigidbody.typeBody == FudgeCore.BODY_TYPE.KINEMATIC || FudgeCore.Project.mode == FudgeCore.MODE.EDITOR) { //Case of Kinematic Rigidbody
                let mtxPivotWorld = FudgeCore.Matrix4x4.MULTIPLICATION(_node.mtxWorld, _cmpRigidbody.mtxPivotUnscaled);
                _cmpRigidbody.setPosition(mtxPivotWorld.translation);
                _cmpRigidbody.setRotation(mtxPivotWorld.rotation);
                FudgeCore.Recycler.store(mtxPivotWorld);
                return;
            }
            let mtxWorld = FudgeCore.Matrix4x4.CONSTRUCTION({ translation: _cmpRigidbody.getPosition(), rotation: _cmpRigidbody.getRotation(), scaling: null });
            mtxWorld.multiply(_cmpRigidbody.mtxPivotInverse);
            _node.mtxWorld.translation = mtxWorld.translation;
            _node.mtxWorld.rotation = mtxWorld.rotation;
            let mtxLocal = _node.getParent() ? FudgeCore.Matrix4x4.RELATIVE(_node.mtxWorld, _node.getParent().mtxWorld) : _node.mtxWorld;
            _node.mtxLocal.set(mtxLocal);
            FudgeCore.Recycler.store(mtxWorld);
            FudgeCore.Recycler.store(mtxLocal);
        }
    }
    Render.rectClip = new FudgeCore.Rectangle(-1, 1, 2, -2);
    Render.nodesPhysics = new FudgeCore.RecycableArray();
    Render.componentsPick = new FudgeCore.RecycableArray();
    Render.lights = new Map();
    Render.nodesSimple = new FudgeCore.RecycableArray();
    Render.nodesAlpha = new FudgeCore.RecycableArray();
    FudgeCore.Render = Render;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class RenderMesh {
        constructor(_mesh) {
            this.smooth = null;
            this.flat = null;
            this.mesh = _mesh;
        }
        get iBones() {
            return this.∆íiBones || ( // return cache or ...
            this.∆íiBones = this.mesh.vertices.some(_vertex => _vertex.bones) ?
                new Uint8Array(this.mesh.vertices.flatMap((_vertex, _index) => {
                    const bones = this.mesh.vertices.bones(_index);
                    return [bones?.[0]?.index || 0, bones?.[1]?.index || 0, bones?.[2]?.index || 0, bones?.[3]?.index || 0];
                })) :
                undefined);
        }
        get weights() {
            return this.∆íweights || ( // return cache or ...
            this.∆íweights = this.mesh.vertices.some(_vertex => _vertex.bones) ?
                new Float32Array(this.mesh.vertices.flatMap((_vertex, _index) => {
                    const bones = this.mesh.vertices.bones(_index);
                    return [bones?.[0]?.weight || 0, bones?.[1]?.weight || 0, bones?.[2]?.weight || 0, bones?.[3]?.weight || 0];
                })) :
                undefined);
        }
        get vertices() {
            return this.∆ívertices || ( // return cache or ...
            // ... flatten all vertex positions from cloud into a typed array
            this.∆ívertices = new Float32Array(this.mesh.vertices.flatMap((_vertex, _index) => {
                return [...this.mesh.vertices.position(_index).get()];
            })));
        }
        get indices() {
            return this.∆íindices || ( // return cache or ...
            // ... flatten all indices from the faces into a typed array
            this.∆íindices = new Uint16Array(this.mesh.faces.flatMap((_face) => [..._face.indices])));
        }
        get normalsVertex() {
            if (this.∆ínormalsVertex == null) {
                // sum up all unscaled normals of faces connected to one vertex...
                this.mesh.vertices.forEach(_vertex => _vertex.normal.set(0, 0, 0));
                for (let face of this.mesh.faces)
                    for (let index of face.indices) {
                        this.mesh.vertices.normal(index).add(face.normalUnscaled);
                    }
                // ... and normalize them
                this.mesh.vertices.forEach(_vertex => {
                    // some vertices might be unused and yield a zero-normal...
                    if (_vertex.normal.magnitudeSquared > 0)
                        _vertex.normal.normalize();
                });
                // this.∆ínormalsVertex = new Float32Array(normalsVertex.flatMap((_normal: Vector3) => [..._normal.get()]));
                this.∆ínormalsVertex = new Float32Array(this.mesh.vertices.flatMap((_vertex, _index) => {
                    return [...this.mesh.vertices.normal(_index).get()];
                }));
            }
            return this.∆ínormalsVertex;
        }
        get textureUVs() {
            return this.∆ítextureUVs || ( // return cache or ...
            // ... flatten all uvs from the clous into a typed array
            this.∆ítextureUVs = new Float32Array(this.mesh.vertices
                .filter(_vertex => _vertex.uv)
                .flatMap((_vertex) => [..._vertex.uv.get()])));
        }
        get verticesFlat() {
            return this.∆íverticesFlat || (this.∆íverticesFlat = this.createVerticesFlat());
        }
        get indicesFlat() {
            return this.∆íindicesFlat;
        }
        get normalsFlat() {
            return this.∆ínormalsFlat || (this.∆ínormalsFlat = this.createNormalsFlat());
        }
        get textureUVsFlat() {
            return this.∆ítextureUVsFlat || (this.∆ítextureUVsFlat = this.createTextureUVsFlat());
        }
        get iBonesFlat() {
            return this.∆íiBonesFlat;
        }
        get weightsFlat() {
            return this.∆íweightsFlat;
        }
        clear() {
            this.smooth = null;
            this.flat = null;
            // buffers for smooth shading
            this.∆ívertices = undefined;
            this.∆íindices = undefined;
            this.∆ítextureUVs = undefined;
            this.∆ínormalsVertex = undefined;
            // special buffers for flat shading
            this.∆ínormalsFlat = undefined;
            this.∆íverticesFlat = undefined;
            this.∆íindicesFlat = undefined;
            this.∆ítextureUVsFlat = undefined;
            this.∆íiBones = undefined;
            this.∆íweights = undefined;
        }
        createVerticesFlat() {
            let positions = [];
            let bones = [];
            let indices = [];
            let i = 0;
            for (let face of this.mesh.faces)
                for (let index of face.indices) {
                    indices.push(i++);
                    positions.push(this.mesh.vertices.position(index));
                    let bone = this.mesh.vertices.bones(index);
                    if (bone)
                        bones.push(bone);
                }
            this.∆íindicesFlat = new Uint16Array(indices);
            this.∆íiBonesFlat = new Uint8Array(bones.flatMap((_bones) => {
                return [..._bones.map(_bone => _bone.index)];
            }));
            this.∆íweightsFlat = new Float32Array(bones.flatMap((_bones) => {
                return [..._bones.map(_bone => _bone.weight)];
            }));
            return new Float32Array(positions.flatMap(_v => [..._v.get()]));
        }
        createNormalsFlat() {
            let normals = [];
            let zero = FudgeCore.Vector3.ZERO();
            for (let face of this.mesh.faces) {
                // store the face normal at the position of the third vertex
                normals.push(zero);
                normals.push(zero);
                normals.push(face.normal);
            }
            this.∆ínormalsFlat = new Float32Array(normals.flatMap(_n => [..._n.get()]));
            return this.∆ínormalsFlat;
        }
        createTextureUVsFlat() {
            let uv = [];
            // create unique vertices for each face, tripling the number
            for (let i = 0; i < this.indices.length; i++) {
                let index = this.indices[i] * 2;
                uv.push(this.textureUVs[index], this.textureUVs[index + 1]);
            }
            return new Float32Array(uv);
        }
    }
    FudgeCore.RenderMesh = RenderMesh;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Controls the rendering of a branch, using the given {@link ComponentCamera},
     * and the propagation of the rendered image from the offscreen renderbuffer to the target canvas
     * through a series of {@link Framing} objects. The stages involved are in order of rendering
     * {@link Render}.viewport -> {@link Viewport}.source -> {@link Viewport}.destination -> DOM-Canvas -> Client(CSS)
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019-2022
     * @link https://github.com/JirkaDellOro/FUDGE/wiki/Viewport
     */
    class Viewport extends FudgeCore.EventTargetUnified {
        constructor() {
            super(...arguments);
            this.name = "Viewport"; // The name to call this viewport by.
            this.camera = null; // The camera representing the view parameters to render the branch.
            // TODO: verify if client to canvas should be in Viewport or somewhere else (Window, Container?)
            // Multiple viewports using the same canvas shouldn't differ here...
            // different framing methods can be used, this is the default
            this.frameClientToCanvas = new FudgeCore.FramingScaled();
            this.frameCanvasToDestination = new FudgeCore.FramingComplex();
            this.frameDestinationToSource = new FudgeCore.FramingScaled();
            this.frameSourceToRender = new FudgeCore.FramingScaled();
            this.adjustingFrames = true;
            this.adjustingCamera = true;
            this.physicsDebugMode = FudgeCore.PHYSICS_DEBUGMODE.NONE;
            this.componentsPick = new FudgeCore.RecycableArray();
            this.#branch = null; // The to render with all its descendants.
            this.#crc2 = null;
            this.#canvas = null;
        }
        #branch; // The to render with all its descendants.
        #crc2;
        #canvas;
        //#endregion
        // #region Events (passing from canvas to viewport and from there into branch)
        /**
         * Returns true if this viewport currently has focus and thus receives keyboard events
         */
        get hasFocus() {
            return (Viewport.focus == this);
        }
        /**
         * Retrieve the destination canvas
         */
        get canvas() {
            return this.#canvas;
        }
        /**
         * Retrieve the 2D-context attached to the destination canvas
         */
        get context() {
            return this.#crc2;
        }
        /**
         * Connects the viewport to the given canvas to render the given branch to using the given camera-component, and names the viewport as given.
         */
        initialize(_name, _branch, _camera, _canvas) {
            this.name = _name;
            this.camera = _camera;
            this.#canvas = _canvas;
            this.#crc2 = _canvas.getContext("2d");
            this.#canvas.tabIndex = 0; // can get focus and receive keyboard events
            this.rectSource = FudgeCore.Render.getCanvasRect();
            this.rectDestination = this.getClientRectangle();
            this.setBranch(_branch);
        }
        /**
         * Retrieve the size of the destination canvas as a rectangle, x and y are always 0
         */
        getCanvasRectangle() {
            return FudgeCore.Rectangle.GET(0, 0, this.#canvas.width, this.#canvas.height);
        }
        /**
         * Retrieve the client rectangle the canvas is displayed and fit in, x and y are always 0
         */
        getClientRectangle() {
            // FUDGE doesn't care about where the client rect is, only about the size matters.
            // return Rectangle.GET(this.canvas.offsetLeft, this.canvas.offsetTop, this.canvas.clientWidth, this.canvas.clientHeight);
            return FudgeCore.Rectangle.GET(0, 0, this.#canvas.clientWidth, this.#canvas.clientHeight);
        }
        /**
         * Set the branch to be drawn in the viewport.
         */
        setBranch(_branch) {
            if (_branch)
                _branch.dispatchEvent(new Event("attachBranch" /* ATTACH_BRANCH */));
            this.#branch = _branch;
        }
        /**
         * Retrieve the branch this viewport renders
         */
        getBranch() {
            return this.#branch;
        }
        // #region Drawing
        /**
         * Draw this viewport displaying its branch. By default, the transforms in the branch are recalculated first.
         * Pass `false` if calculation was already done for this frame
         */
        draw(_calculateTransforms = true) {
            this.computeDrawing(_calculateTransforms);
            if (this.physicsDebugMode != FudgeCore.PHYSICS_DEBUGMODE.PHYSIC_OBJECTS_ONLY)
                FudgeCore.Render.draw(this.camera);
            if (this.physicsDebugMode != FudgeCore.PHYSICS_DEBUGMODE.NONE) {
                FudgeCore.Physics.draw(this.camera, this.physicsDebugMode);
            }
            this.#crc2.imageSmoothingEnabled = false;
            this.#crc2.drawImage(FudgeCore.Render.getCanvas(), this.rectSource.x, this.rectSource.y, this.rectSource.width, this.rectSource.height, this.rectDestination.x, this.rectDestination.y, this.rectDestination.width, this.rectDestination.height);
        }
        /**
        * The transforms in the branch are recalculated here.
        */
        computeDrawing(_calculateTransforms = true) {
            if (!this.#branch)
                return;
            FudgeCore.Render.resetFrameBuffer();
            if (!this.camera.isActive)
                return;
            if (this.adjustingFrames)
                this.adjustFrames();
            if (this.adjustingCamera)
                this.adjustCamera();
            if (_calculateTransforms)
                this.calculateTransforms();
            FudgeCore.Render.clear(this.camera.clrBackground);
        }
        /**
         * Calculate the cascade of transforms in this branch and store the results as mtxWorld in the {@link Node}s and {@link ComponentMesh}es
         */
        calculateTransforms() {
            let mtxRoot = FudgeCore.Matrix4x4.IDENTITY();
            if (this.#branch.getParent())
                mtxRoot = this.#branch.getParent().mtxWorld;
            this.dispatchEvent(new Event("renderPrepareStart" /* RENDER_PREPARE_START */));
            this.adjustFrames();
            FudgeCore.Render.prepare(this.#branch, null, mtxRoot);
            this.dispatchEvent(new Event("renderPrepareEnd" /* RENDER_PREPARE_END */));
            this.componentsPick = FudgeCore.Render.componentsPick;
        }
        /**
         * Performs a pick on all {@link ComponentPick}s in the branch of this viewport
         * using a ray from its camera through the client coordinates given in the event.
         * Dispatches the event to all nodes hit.
         * If {@link PICK.CAMERA} was chosen as the method to pick, a pick property gets added to the event,
         * which holds the detailed information, but is overwritten for each node.
         */
        dispatchPointerEvent(_event) {
            let posClient = new FudgeCore.Vector2(_event.clientX, _event.clientY);
            let ray = this.getRayFromClient(posClient);
            // let cameraPicks: RecycableArray<Node> = Recycler.get(RecycableArray); //TODO: think about optimization later
            let cameraPicks = [];
            let otherPicks = [];
            for (let cmpPick of this.componentsPick)
                cmpPick.pick == FudgeCore.PICK.CAMERA ? cameraPicks.push(cmpPick.node) : otherPicks.push(cmpPick);
            if (cameraPicks.length) {
                let picks = FudgeCore.Picker.pickCamera(cameraPicks, this.camera, this.pointClientToProjection(posClient));
                for (let pick of picks) {
                    Reflect.set(_event, "pick", pick);
                    pick.node.dispatchEvent(_event);
                }
            }
            for (let cmpPick of otherPicks) {
                cmpPick.pickAndDispatch(ray, _event);
            }
        }
        /**
         * Adjust all frames involved in the rendering process from the display area in the client up to the renderer canvas
         */
        adjustFrames() {
            // get the rectangle of the canvas area as displayed (consider css)
            let rectClient = this.getClientRectangle();
            // adjust the canvas size according to the given framing applied to client
            let rectCanvas = this.frameClientToCanvas.getRect(rectClient);
            this.#canvas.width = rectCanvas.width;
            this.#canvas.height = rectCanvas.height;
            let rectTemp;
            // adjust the destination area on the target-canvas to render to by applying the framing to canvas
            rectTemp = this.frameCanvasToDestination.getRect(rectCanvas);
            this.rectDestination.copy(rectTemp);
            FudgeCore.Recycler.store(rectTemp);
            // adjust the area on the source-canvas to render from by applying the framing to destination area
            rectTemp = this.frameDestinationToSource.getRect(this.rectDestination);
            this.rectSource.copy(rectTemp);
            FudgeCore.Recycler.store(rectTemp);
            // having an offset source does make sense only when multiple viewports display parts of the same rendering. For now: shift it to 0,0
            this.rectSource.x = this.rectSource.y = 0;
            // still, a partial image of the rendering may be retrieved by moving and resizing the render viewport. For now, it's always adjusted to the current viewport
            let rectRender = this.frameSourceToRender.getRect(this.rectSource);
            FudgeCore.Render.setRenderRectangle(rectRender);
            // no more transformation after this for now, offscreen canvas and render-viewport have the same size
            FudgeCore.Render.setCanvasSize(rectRender.width, rectRender.height);
            FudgeCore.Recycler.store(rectClient);
            FudgeCore.Recycler.store(rectCanvas);
            FudgeCore.Recycler.store(rectRender);
        }
        /**
         * Adjust the camera parameters to fit the rendering into the render vieport
         */
        adjustCamera() {
            let rect = FudgeCore.Render.getRenderRectangle();
            // if (this.camera.getProjection() == PROJECTION.ORTHOGRAPHIC)
            //   this.camera.projectOrthographic(-rect.width / 20, rect.width / 20, rect.height / 20, -rect.height / 20);
            // else
            this.camera.projectCentral(rect.width / rect.height, this.camera.getFieldOfView(), this.camera.getDirection(), this.camera.getNear(), this.camera.getFar());
        }
        // #endregion
        //#region Points
        /**
         * Returns a {@link Ray} in world coordinates from this camera through the point given in client space
         */
        getRayFromClient(_point) {
            let posProjection = this.pointClientToProjection(_point);
            let ray = new FudgeCore.Ray(new FudgeCore.Vector3(-posProjection.x, posProjection.y, 1));
            // ray.direction.scale(camera.distance);
            ray.origin.transform(this.camera.mtxPivot);
            ray.direction.transform(this.camera.mtxPivot, false);
            let cameraNode = this.camera.node;
            if (cameraNode) {
                ray.origin.transform(cameraNode.mtxWorld);
                ray.direction.transform(cameraNode.mtxWorld, false);
            }
            return ray;
        }
        /**
         * Returns a point on the client rectangle matching the projection of the given point in world space
         */
        pointWorldToClient(_position) {
            let projection = this.camera.pointWorldToClip(_position);
            let posClient = this.pointClipToClient(projection.toVector2());
            return posClient;
        }
        /**
         * Returns a point on the source-rectangle matching the given point on the client rectangle
         */
        pointClientToSource(_client) {
            let result = this.frameClientToCanvas.getPoint(_client, this.getClientRectangle());
            result = this.frameCanvasToDestination.getPoint(result, this.getCanvasRectangle());
            result = this.frameDestinationToSource.getPoint(result, this.rectSource);
            //TODO: when Source, Render and RenderViewport deviate, continue transformation 
            return result;
        }
        /**
         * Returns a point on the render-rectangle matching the given point on the source rectangle
         */
        pointSourceToRender(_source) {
            let projectionRectangle = this.camera.getProjectionRectangle();
            let point = this.frameSourceToRender.getPoint(_source, projectionRectangle);
            // console.log(projectionRectangle.toString());
            return point;
        }
        /**
         * Returns a point on the render-rectangle matching the given point on the client rectangle
         */
        pointClientToRender(_client) {
            let point = this.pointClientToSource(_client);
            point = this.pointSourceToRender(point);
            //TODO: when Render and RenderViewport deviate, continue transformation 
            return point;
        }
        /**
         * Returns a point on a projection surface in the hypothetical distance of 1 to the camera
         * matching the given point on the client rectangle
         * TODO: examine, if this should be a camera-method. Current implementation is for central-projection
         */
        pointClientToProjection(_client) {
            let posRender = this.pointClientToRender(_client);
            let rectRender = this.frameSourceToRender.getRect(this.rectSource);
            let rectProjection = this.camera.getProjectionRectangle();
            let posProjection = new FudgeCore.Vector2(rectProjection.width * posRender.x / rectRender.width, rectProjection.height * posRender.y / rectRender.height);
            posProjection.subtract(new FudgeCore.Vector2(rectProjection.width / 2, rectProjection.height / 2));
            posProjection.y *= -1;
            return posProjection;
        }
        /**
         * Returns a point in the client rectangle matching the given point in normed clipspace rectangle,
         * which stretches from -1 to 1 in both dimensions, y pointing up
         */
        pointClipToClient(_normed) {
            // let rectClient: Rectangle = this.getClientRectangle();
            // let result: Vector2 = Vector2.ONE(0.5);
            // result.x *= (_normed.x + 1) * rectClient.width;
            // result.y *= (1 - _normed.y) * rectClient.height;
            // result.add(rectClient.position);
            //TODO: check if rectDestination can safely (and more perfomant) be used instead getClientRectangle
            let pointClient = FudgeCore.Render.rectClip.pointToRect(_normed, this.rectDestination);
            return pointClient;
        }
        /**
         * Returns a point in the client rectangle matching the given point in normed clipspace rectangle,
         * which stretches from -1 to 1 in both dimensions, y pointing up
         */
        pointClipToCanvas(_normed) {
            let pointCanvas = FudgeCore.Render.rectClip.pointToRect(_normed, this.getCanvasRectangle());
            return pointCanvas;
        }
        /**
         * Returns a point in the browser page matching the given point of the viewport
         */
        pointClientToScreen(_client) {
            let screen = new FudgeCore.Vector2(this.#canvas.offsetLeft + _client.x, this.#canvas.offsetTop + _client.y);
            return screen;
        }
    }
    FudgeCore.Viewport = Viewport;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Different xr session modes available. Could be expand with more modes in the future.
     * @authors Valentin Schmidberger, HFU, 2022 | Jonas Plotzky, HFU, 2023
     */
    let XR_SESSION_MODE;
    (function (XR_SESSION_MODE) {
        XR_SESSION_MODE["IMMERSIVE_VR"] = "immersive-vr";
        //IMMERSIVE_AR = "immersive-ar",
        //INLINE = "inline"
    })(XR_SESSION_MODE = FudgeCore.XR_SESSION_MODE || (FudgeCore.XR_SESSION_MODE = {}));
    /**
     * Different reference vr-spaces available, creator has to check if the space is supported with its device.
     * Could be expand with more available space types in the future.
     */
    let XR_REFERENCE_SPACE;
    (function (XR_REFERENCE_SPACE) {
        XR_REFERENCE_SPACE["VIEWER"] = "viewer";
        XR_REFERENCE_SPACE["LOCAL"] = "local";
        // LOCAL_FLOOR = "local-floor",
        // BOUNDED_FLOOR = "bounded-floor",
        // UNBOUNDED = "unbounded"
    })(XR_REFERENCE_SPACE = FudgeCore.XR_REFERENCE_SPACE || (FudgeCore.XR_REFERENCE_SPACE = {}));
    /**
     * XRViewport (webXR)-extension of Viewport, to displaying its branch on Head Mounted and AR (not implemted yet) Devices
     */
    class XRViewport extends FudgeCore.Viewport {
        // private poseMtx: Matrix4x4 = new Matrix4x4();
        constructor() {
            super();
            this.vrDevice = null;
            this.session = null;
            this.referenceSpace = null;
            this.useVRController = false;
            this.crc3 = null;
            XRViewport.xrViewportInstance = this;
            this.crc3 = FudgeCore.RenderWebGL.getRenderingContext();
        }
        /**
         * To retrieve private static instance of xr viewport, readonly.
         */
        static get default() {
            return this.xrViewportInstance;
        }
        /**
          * Connects the viewport to the given canvas to render the given branch to using the given camera-component, and names the viewport as given.
          */
        initialize(_name, _branch, _cameraXR /* | ComponentCameraAR*/, _canvas) {
            super.initialize(_name, _branch, _cameraXR, _canvas);
            this.camera = _cameraXR;
        }
        /**
         * The VR Session is initialized here, also VR - Controller are initialized, if boolean is true.
         * Creator has to call FrameRequestXR after this Method to run the viewport in virtual reality.
         */
        async initializeVR(_vrSessionMode = XR_SESSION_MODE.IMMERSIVE_VR, _vrReferenceSpaceType = XR_REFERENCE_SPACE.LOCAL, _vrController = false) {
            let session = await navigator.xr.requestSession(_vrSessionMode);
            this.referenceSpace = await session.requestReferenceSpace(_vrReferenceSpaceType);
            await this.crc3.makeXRCompatible();
            let nativeScaleFactor = XRWebGLLayer.getNativeFramebufferScaleFactor(session);
            //TODO:  Field of view k√∂nnte an der Stelle noch ver√§ndert werden.
            await session.updateRenderState({ baseLayer: new XRWebGLLayer(session, this.crc3, { framebufferScaleFactor: nativeScaleFactor }) });
            this.vrDevice = this.camera;
            this.initializeReferenceSpace();
            this.useVRController = _vrController;
            if (_vrController) {
                this.vrDevice.rightCntrl.cmpTransform = new FudgeCore.ComponentTransform();
                this.vrDevice.leftCntrl.cmpTransform = new FudgeCore.ComponentTransform();
            }
            this.session = session;
            this.calculateTransforms();
        }
        /**
         * The AR session could be initialized here. Up till now not implemented.
         */
        async initializeAR(_arSessionMode = null, _arReferenceSpaceType = null) {
            FudgeCore.Debug.error("NOT IMPLEMENTED YET! Check out initializeVR!");
        }
        /**
         * Draw the xr viewport displaying its branch. By default, the transforms in the branch are recalculated first.
         * Pass `false` if calculation was already done for this frame
         * Called from loop method {@link Loop} again with the xrFrame parameter handover, as soon as FRAME_REQUEST_XR is called from creator.
         */
        draw(_calculateTransforms = true, _xrFrame = null) {
            if (!this.session) {
                super.draw(_calculateTransforms);
                return;
            }
            let pose = _xrFrame?.getViewerPose(this.referenceSpace);
            if (!pose)
                return;
            this.vrDevice.mtxLocal.set(pose.transform.matrix);
            super.computeDrawing(_calculateTransforms);
            let glLayer = this.session.renderState.baseLayer;
            FudgeCore.Render.resetFrameBuffer(glLayer.framebuffer);
            FudgeCore.Render.clear(this.camera.clrBackground);
            for (let view of pose.views) {
                let viewport = glLayer.getViewport(view);
                this.crc3.viewport(viewport.x, viewport.y, viewport.width, viewport.height);
                if (this.useVRController)
                    this.setControllerConfigs(_xrFrame);
                this.camera.mtxProjection.set(view.projectionMatrix);
                this.camera.mtxCameraInverse.set(view.transform.inverse.matrix);
                if (this.physicsDebugMode != FudgeCore.PHYSICS_DEBUGMODE.PHYSIC_OBJECTS_ONLY)
                    FudgeCore.Render.draw(this.camera);
                if (this.physicsDebugMode != FudgeCore.PHYSICS_DEBUGMODE.NONE) {
                    FudgeCore.Physics.draw(this.camera, this.physicsDebugMode);
                }
            }
            FudgeCore.Render.setRenderRectangle(FudgeCore.Render.getRenderRectangle());
        }
        /**
         * Move the reference space to set the initial position/orientation of the vr device in accordance to the node the vr device is attached to.
         */
        initializeReferenceSpace() {
            let mtxWorld = this.vrDevice.node?.mtxWorld;
            if (!mtxWorld)
                return;
            mtxWorld = mtxWorld.clone;
            mtxWorld.rotateY(180); // rotate because the XR Rig is looking in the direction of negative z
            let invMtxTransfom = mtxWorld.inverse(); // inverse because we are moving the reference space
            let invOrientation = new FudgeCore.Quaternion();
            invOrientation.eulerAngles = invMtxTransfom.rotation;
            XRViewport.default.referenceSpace = XRViewport.default.referenceSpace.getOffsetReferenceSpace(new XRRigidTransform(invMtxTransfom.translation, invOrientation));
        }
        //Sets controller matrices and thumbsticks movements.
        setControllerConfigs(_xrFrame) {
            if (_xrFrame) {
                if (XRViewport.default.session.inputSources.length > 0) {
                    XRViewport.default.session.inputSources.forEach(_controller => {
                        try {
                            switch (_controller.handedness) {
                                case ("right"):
                                    this.vrDevice.rightCntrl.cmpTransform.mtxLocal.set(_xrFrame.getPose(_controller.targetRaySpace, XRViewport.default.referenceSpace).transform.matrix);
                                    if (!this.vrDevice.rightCntrl.gamePad)
                                        this.vrDevice.rightCntrl.gamePad = _controller.gamepad;
                                    else {
                                        this.vrDevice.rightCntrl.thumbstickX = _controller.gamepad.axes[2];
                                        this.vrDevice.rightCntrl.thumbstickY = _controller.gamepad.axes[3];
                                    }
                                    break;
                                case ("left"):
                                    this.vrDevice.leftCntrl.cmpTransform.mtxLocal.set(_xrFrame.getPose(_controller.targetRaySpace, XRViewport.default.referenceSpace).transform.matrix);
                                    if (!this.vrDevice.leftCntrl.gamePad)
                                        this.vrDevice.leftCntrl.gamePad = _controller.gamepad;
                                    else {
                                        this.vrDevice.leftCntrl.thumbstickX = _controller.gamepad.axes[2];
                                        this.vrDevice.leftCntrl.thumbstickY = _controller.gamepad.axes[3];
                                    }
                                    break;
                            }
                        }
                        catch (e) {
                            FudgeCore.Debug.info("Input Sources Error: " + e);
                        }
                    });
                }
            }
        }
    }
    XRViewport.xrViewportInstance = null;
    FudgeCore.XRViewport = XRViewport;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Handles file transfer from a FUDGE-Browserapp to the local filesystem without a local server.
     * Saves to the download-path given by the browser, loads from the player's choice.
     */
    class FileIoBrowserLocal extends FudgeCore.EventTargetStatic {
        // TODO: refactor to async function to be handled using promise, instead of using event target
        static async load(_multiple = false) {
            FileIoBrowserLocal.selector = document.createElement("input");
            FileIoBrowserLocal.selector.type = "file";
            FileIoBrowserLocal.selector.multiple = _multiple;
            FileIoBrowserLocal.selector.hidden = true;
            FileIoBrowserLocal.selector.addEventListener("change", FileIoBrowserLocal.handleFileSelect);
            document.body.appendChild(FileIoBrowserLocal.selector);
            return new Promise(_resolve => {
                function hndLoaded(_event) {
                    FileIoBrowserLocal.removeEventListener("fileLoaded" /* FILE_LOADED */, hndLoaded);
                    _resolve(_event.detail.mapFilenameToContent);
                }
                FileIoBrowserLocal.addEventListener("fileLoaded" /* FILE_LOADED */, hndLoaded);
                FileIoBrowserLocal.selector.click();
            });
        }
        // TODO: refactor to async function to be handled using promise, instead of using event target
        static save(_toSave, _type = "text/plain") {
            for (let filename in _toSave) {
                let content = _toSave[filename];
                let blob = new Blob([content], { type: _type });
                let url = window.URL.createObjectURL(blob);
                //*/ using anchor element for download
                let downloader;
                downloader = document.createElement("a");
                downloader.setAttribute("href", url);
                downloader.setAttribute("download", filename);
                document.body.appendChild(downloader);
                downloader.click();
                document.body.removeChild(downloader);
                window.URL.revokeObjectURL(url);
            }
            return new Promise(_resolve => {
                _resolve(_toSave);
                // function hndSaved(_event: Event): void {
                //   FileIoBrowserLocal.removeEventListener(EVENT.FILE_SAVED, hndSaved);
                //   _resolve((<CustomEvent>_event).detail);
                // }
                // FileIoBrowserLocal.addEventListener(EVENT.FILE_SAVED, hndSaved);
                // let event: CustomEvent = new CustomEvent(EVENT.FILE_SAVED, { detail: { mapFilenameToContent: _toSave } });
                // FileIoBrowserLocal.targetStatic.dispatchEvent(event);
            });
        }
        static async handleFileSelect(_event) {
            FudgeCore.Debug.fudge("-------------------------------- handleFileSelect");
            document.body.removeChild(FileIoBrowserLocal.selector);
            let fileList = _event.target.files;
            FudgeCore.Debug.fudge(fileList, fileList.length);
            if (fileList.length == 0)
                return;
            let loaded = {};
            await FileIoBrowserLocal.loadFiles(fileList, loaded);
            let event = new CustomEvent("fileLoaded" /* FILE_LOADED */, { detail: { mapFilenameToContent: loaded } });
            FileIoBrowserLocal.targetStatic.dispatchEvent(event);
        }
        static async loadFiles(_fileList, _loaded) {
            for (let file of _fileList) {
                const content = await new Response(file).text();
                _loaded[file.name] = content;
            }
        }
    }
    FudgeCore.FileIoBrowserLocal = FileIoBrowserLocal;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Mutable array of {@link Mutable}s. The {@link Mutator}s of the entries are included as array in the {@link Mutator}
     * @author Jirka Dell'Oro-Friedl, HFU, 2021
     */
    class MutableArray extends Array {
        constructor(_type, ..._args) {
            super(..._args);
            this.#type = _type;
        }
        #type;
        get type() {
            return this.#type;
        }
        rearrange(_sequence) {
            let length = this.length;
            for (let index of _sequence) {
                let original = this[index];
                // TODO: optimize, copy only double entries
                //@ts-ignore
                let copy = new original.constructor();
                copy.mutate(original.getMutator());
                this.push(copy);
            }
            this.splice(0, length);
        }
        getMutatorAttributeTypes(_mutator) {
            let types = {};
            for (let entry in this)
                types[entry] = this[entry].constructor.name;
            return types;
        }
        getMutator() {
            return this.map((_value) => _value.getMutator());
        }
        getMutatorForUserInterface() {
            return this.getMutator();
        }
        async mutate(_mutator) {
            for (let entry in this)
                await this[entry].mutate(_mutator[entry]);
        }
        /**
         * Updates the values of the given mutator according to the current state of the instance
         */
        updateMutator(_mutator) {
            for (let entry in this) {
                let mutatorValue = _mutator[entry];
                if (!mutatorValue)
                    continue;
                if (this[entry] instanceof FudgeCore.Mutable)
                    _mutator[entry] = this[entry].getMutator();
                else
                    _mutator[entry] = this[entry];
            }
        }
    }
    FudgeCore.MutableArray = MutableArray;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let MODE;
    (function (MODE) {
        MODE[MODE["EDITOR"] = 0] = "EDITOR";
        MODE[MODE["RUNTIME"] = 1] = "RUNTIME";
    })(MODE = FudgeCore.MODE || (FudgeCore.MODE = {}));
    /**
     * Static class handling the resources used with the current FUDGE-instance.
     * Keeps a list of the resources and generates ids to retrieve them.
     * Resources are objects referenced multiple times but supposed to be stored only once
     */
    class Project extends FudgeCore.EventTargetStatic {
        /**
         * Registers the resource and generates an id for it by default.
         * If the resource already has an id, thus having been registered, its deleted from the list and registered anew.
         * It's possible to pass an id, but should not be done except by the Serializer.
         */
        static register(_resource, _idResource) {
            if (_resource.idResource)
                if (_resource.idResource == _idResource)
                    return;
                else
                    this.deregister(_resource);
            _resource.idResource = _idResource || Project.generateId(_resource);
            Project.resources[_resource.idResource] = _resource;
        }
        static deregister(_resource) {
            delete (Project.resources[_resource.idResource]);
            delete (Project.serialization[_resource.idResource]);
        }
        static clear() {
            Project.resources = {};
            Project.serialization = {};
            Project.clearScriptNamespaces();
            // Project.scriptNamespaces = {};
        }
        // <T extends Component>(_class: new () => T): T[] {
        //   return <T[]>(this.components[_class.name] || []).slice(0);
        // }
        static getResourcesByType(_type) {
            let found = [];
            for (let resourceId in Project.resources) {
                let resource = Project.resources[resourceId];
                if (resource instanceof _type)
                    found.push(resource);
            }
            return found;
        }
        static getResourcesByName(_name) {
            let found = [];
            for (let resourceId in Project.resources) {
                let resource = Project.resources[resourceId];
                if (resource.name == _name)
                    found.push(resource);
            }
            return found;
        }
        /**
         * Generate a user readable and unique id using the type of the resource, the date and random numbers
         * @param _resource
         */
        static generateId(_resource) {
            // TODO: build id and integrate info from resource, not just date
            let idResource;
            do
                idResource = _resource.constructor.name + "|" + new Date().toISOString() + "|" + Math.random().toPrecision(5).substr(2, 5);
            while (Project.resources[idResource]);
            return idResource;
        }
        /**
         * Tests, if an object is a {@link SerializableResource}
         * @param _object The object to examine
         */
        static isResource(_object) {
            return (Reflect.has(_object, "idResource"));
        }
        /**
         * Retrieves the resource stored with the given id
         */
        static async getResource(_idResource) {
            let resource = Project.resources[_idResource];
            if (!resource) {
                let serialization = Project.serialization[_idResource];
                if (!serialization) {
                    FudgeCore.Debug.error("Resource not found", _idResource);
                    return null;
                }
                resource = await Project.deserializeResource(serialization);
            }
            return resource;
        }
        /**
         * Creates and registers a resource from a {@link Node}, copying the complete graph starting with it
         * @param _node A node to create the resource from
         * @param _replaceWithInstance if true (default), the node used as origin is replaced by a {@link GraphInstance} of the {@link Graph} created
         */
        static async registerAsGraph(_node, _replaceWithInstance = true) {
            let serialization = _node.serialize();
            let graph = new FudgeCore.Graph(_node.name);
            await graph.deserialize(serialization);
            Project.register(graph);
            if (_replaceWithInstance && _node.getParent()) {
                let instance = await Project.createGraphInstance(graph);
                _node.getParent().replaceChild(_node, instance);
            }
            return graph;
        }
        /**
         * Creates and returns a {@link GraphInstance} of the given {@link Graph}
         * and connects it to the graph for synchronisation of mutation.
         */
        static async createGraphInstance(_graph) {
            let instance = new FudgeCore.GraphInstance(_graph); // TODO: cleanup since creation moved here
            await instance.connectToGraph();
            return instance;
        }
        static registerGraphInstanceForResync(_instance) {
            let instances = Project.graphInstancesToResync[_instance.idSource] || [];
            instances.push(_instance);
            Project.graphInstancesToResync[_instance.idSource] = instances;
        }
        static async resyncGraphInstances(_graph) {
            let instances = Project.graphInstancesToResync[_graph.idResource];
            if (!instances)
                return;
            for (let instance of instances)
                await instance.connectToGraph();
            delete (Project.graphInstancesToResync[_graph.idResource]);
        }
        static registerScriptNamespace(_namespace) {
            let name = FudgeCore.Serializer.registerNamespace(_namespace);
            if (!Project.scriptNamespaces[name])
                Project.scriptNamespaces[name] = _namespace;
        }
        static clearScriptNamespaces() {
            for (let name in Project.scriptNamespaces) {
                Reflect.set(window, name, undefined);
                Project.scriptNamespaces[name] = undefined;
                delete Project.scriptNamespaces[name];
            }
        }
        static getComponentScripts() {
            let compoments = {};
            for (let namespace in Project.scriptNamespaces) {
                compoments[namespace] = [];
                for (let name in Project.scriptNamespaces[namespace]) {
                    let script = Reflect.get(Project.scriptNamespaces[namespace], name);
                    // Using Object.create doesn't call the constructor, but instanceof can be used. More elegant than the loop above, though maybe not as performant. 
                    try {
                        let o = Object.create(script);
                        if (o.prototype instanceof FudgeCore.ComponentScript)
                            compoments[namespace].push(script);
                    }
                    catch (_e) { /* */ }
                }
            }
            return compoments;
        }
        static async loadScript(_url) {
            let script = document.createElement("script");
            script.type = "text/javascript";
            // script.type = "module";
            script.async = false;
            // script.addEventListener("load", handleLoadedScript)
            let head = document.head;
            head.appendChild(script);
            FudgeCore.Debug.log("Loading: ", _url);
            return new Promise((resolve, reject) => {
                script.addEventListener("load", () => resolve());
                script.addEventListener("error", () => {
                    FudgeCore.Debug.error("Loading script", _url);
                    reject();
                });
                script.src = _url.toString();
            });
        }
        static async loadResources(_url) {
            const response = await fetch(_url);
            const resourceFileContent = await response.text();
            let serialization = FudgeCore.Serializer.parse(resourceFileContent);
            let reconstruction = await Project.deserialize(serialization);
            Project.dispatchEvent(new CustomEvent("resourcesLoaded" /* RESOURCES_LOADED */, { detail: { url: _url, resources: reconstruction } }));
            return reconstruction;
        }
        static async loadResourcesFromHTML() {
            const head = document.head;
            let links = head.querySelectorAll("link[type=resources]");
            for (let link of links) {
                let url = link.getAttribute("src");
                await Project.loadResources(url);
            }
        }
        /**
         * Serialize all resources
         */
        static serialize() {
            let serialization = {};
            for (let idResource in Project.resources) {
                let resource = Project.resources[idResource];
                if (idResource != resource.idResource)
                    FudgeCore.Debug.error("Resource-id mismatch", resource);
                serialization[idResource] = FudgeCore.Serializer.serialize(resource);
            }
            return serialization;
        }
        /**
         * Create resources from a serialization, deleting all resources previously registered
         * @param _serialization
         */
        static async deserialize(_serialization) {
            Project.serialization = _serialization;
            Project.resources = {};
            for (let idResource in _serialization) {
                let serialization = _serialization[idResource];
                let resource = await Project.deserializeResource(serialization);
                if (resource)
                    Project.resources[idResource] = resource;
            }
            return Project.resources;
        }
        static async deserializeResource(_serialization) {
            return FudgeCore.Serializer.deserialize(_serialization);
        }
    }
    Project.resources = {};
    Project.serialization = {};
    Project.scriptNamespaces = {};
    Project.baseURL = new URL(location.toString());
    Project.mode = MODE.RUNTIME;
    Project.graphInstancesToResync = {};
    FudgeCore.Project = Project;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    var FBX;
    (function (FBX) {
        /**
         * Reader to read data from an array buffer more conveniently.
         * It saves a current offset which is updated when data is read due to its bytelength.
         * despite getSequence it is mostly a copy of the reference: https://github.com/picode7/binary-reader
         * @author Matthias Roming, HFU, 2023
         */
        class BufferReader {
            constructor(_buffer) {
                this.view = new DataView(_buffer);
                this.offset = 0;
            }
            getChar(_offset = this.offset) {
                return String.fromCharCode(this.getUint8(_offset));
            }
            getBool(_offset = this.offset) {
                return this.getUint8(_offset) != 0;
            }
            getUint8(_offset = this.offset) {
                this.offset = _offset + 1;
                return this.view.getUint8(_offset);
            }
            getUint32(_offset = this.offset) {
                this.offset = _offset + 4;
                return this.view.getUint32(_offset, true);
            }
            getUint64(_offset = this.offset) {
                this.offset = _offset + 8;
                return this.view.getBigUint64(_offset, true);
            }
            getInt16(_offset = this.offset) {
                this.offset = _offset + 2;
                return this.view.getInt16(_offset, true);
            }
            getInt32(_offset = this.offset) {
                this.offset = _offset + 4;
                return this.view.getInt32(_offset, true);
            }
            getInt64(_offset = this.offset) {
                this.offset = _offset + 8;
                return this.view.getBigInt64(_offset, true);
            }
            getFloat32(_offset = this.offset) {
                this.offset = _offset + 4;
                return this.view.getFloat32(_offset, true);
            }
            getFloat64(_offset = this.offset) {
                this.offset = _offset + 8;
                return this.view.getFloat64(_offset, true);
            }
            getString(_length, _offset = this.offset) {
                return String.fromCharCode(...this.getSequence(this.getUint8, _length, _offset));
            }
            *getSequence(_getter, _length, _offset = this.offset) {
                this.offset = _offset;
                for (let i = 0; i < _length; i++) {
                    yield _getter.call(this);
                }
            }
        }
        FBX.BufferReader = BufferReader;
    })(FBX = FudgeCore.FBX || (FudgeCore.FBX = {}));
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    var FBX;
    (function (FBX) {
        let MappingInformationType;
        (function (MappingInformationType) {
            MappingInformationType[MappingInformationType["ByVertex"] = 0] = "ByVertex";
            MappingInformationType[MappingInformationType["ByPolygon"] = 1] = "ByPolygon";
            MappingInformationType[MappingInformationType["ByPolygonVertex"] = 2] = "ByPolygonVertex";
            MappingInformationType[MappingInformationType["ByEdge"] = 3] = "ByEdge";
            MappingInformationType[MappingInformationType["AllSame"] = 4] = "AllSame";
        })(MappingInformationType = FBX.MappingInformationType || (FBX.MappingInformationType = {}));
        let ReferenceInformationType;
        (function (ReferenceInformationType) {
            ReferenceInformationType[ReferenceInformationType["Direct"] = 0] = "Direct";
            ReferenceInformationType[ReferenceInformationType["IndexToDirect"] = 1] = "IndexToDirect";
        })(ReferenceInformationType = FBX.ReferenceInformationType || (FBX.ReferenceInformationType = {}));
    })(FBX = FudgeCore.FBX || (FudgeCore.FBX = {}));
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Asset loader for Filmbox files.
     * @author Matthias Roming, HFU, 2023
     */
    class FBXLoader {
        constructor(_buffer, _uri) {
            this.#skinMaterials = [];
            this.uri = _uri;
            this.nodes = FudgeCore.FBX.parseNodesFromBinary(_buffer);
            console.log(this.nodes);
            this.fbx = FudgeCore.FBX.loadFromNodes(this.nodes);
            console.log(this.fbx);
        }
        static #defaultMaterial;
        static #defaultSkinMaterial;
        #scenes;
        #nodes;
        #meshes;
        #materials;
        #skinMaterials;
        #textures;
        #skeletons;
        #animations;
        static async LOAD(_uri) {
            if (!this.loaders)
                this.loaders = {};
            if (!this.loaders[_uri]) {
                const response = await fetch(_uri);
                const binary = await response.arrayBuffer();
                this.loaders[_uri] = new FBXLoader(binary, _uri);
            }
            return this.loaders[_uri];
        }
        static get defaultMaterial() {
            return this.#defaultMaterial || (this.#defaultMaterial =
                new FudgeCore.Material("FBXDefaultMaterial", FudgeCore.ShaderGouraud, new FudgeCore.CoatRemissive(FudgeCore.Color.CSS("white"))));
        }
        static get defaultSkinMaterial() {
            return this.#defaultSkinMaterial || (this.#defaultSkinMaterial =
                new FudgeCore.Material("FBXDefaultSkinMaterial", FudgeCore.ShaderGouraudSkin, new FudgeCore.CoatRemissive(FudgeCore.Color.CSS("white"))));
        }
        async getScene(_index = 0) {
            if (!this.#scenes)
                this.#scenes = [];
            if (!this.#scenes[_index]) {
                const documentFBX = this.fbx.documents[_index].load();
                const scene = new FudgeCore.Graph(documentFBX.name);
                for (const childFBX of documentFBX.children) {
                    if (childFBX.type == "Model") {
                        if (childFBX.subtype == "LimbNode")
                            scene.addChild(await FudgeCore.SkeletonInstance.CREATE(await this.getSkeleton(childFBX)));
                        else
                            scene.addChild(await this.getNode(this.fbx.objects.models.indexOf(childFBX), scene));
                    }
                }
                if (this.fbx.objects.animStacks && this.fbx.objects.animStacks.length > 0) {
                    const animation = await this.getAnimation(documentFBX.ActiveAnimStackName.length > 0 ?
                        this.fbx.objects.animStacks.findIndex(_animStack => _animStack.name == documentFBX.ActiveAnimStackName) : 0);
                    for (const child of scene) {
                        if (child.name == "Skeleton0")
                            child.getParent().addComponent(new FudgeCore.ComponentAnimator(animation, FudgeCore.ANIMATION_PLAYMODE.LOOP, FudgeCore.ANIMATION_QUANTIZATION.CONTINOUS));
                    }
                }
                FudgeCore.Project.register(scene);
                this.#scenes[_index] = scene;
            }
            return await FudgeCore.Project.createGraphInstance(this.#scenes[_index]);
        }
        async getNode(_index, _root) {
            if (!this.#nodes)
                this.#nodes = [];
            if (!this.#nodes[_index]) {
                // create node with transform
                const modelFBX = this.fbx.objects.models[_index].load();
                const node = new FudgeCore.Node(modelFBX.name);
                await this.generateTransform(modelFBX, node);
                // node.addComponent(new ComponentTransform(Matrix4x4.CONSTRUCTION({
                //   translation: this.getTransformVector(modelFBX.LclTranslation, Vector3.ZERO),
                //   rotation: this.getTransformVector(modelFBX.LclRotation, Vector3.ZERO),
                //   scaling: this.getTransformVector(modelFBX.LclScaling, Vector3.ONE)
                // })));
                // if (modelFBX.PreRotation)
                //   node.mtxLocal.multiply(Matrix4x4.ROTATION(modelFBX.PreRotation), true);
                // if (modelFBX.PostRotation)
                //   node.mtxLocal.multiply(Matrix4x4.ROTATION(modelFBX.PostRotation));
                this.#nodes[_index] = node;
                // attach children and components
                if (modelFBX.children)
                    for (const childFBX of modelFBX.children) {
                        if (childFBX.type == "Model") {
                            if (_root && childFBX.subtype == "LimbNode") {
                                const skeleton = await this.getSkeleton(childFBX);
                                let skeletonInstance;
                                for (const child of _root) {
                                    if (child instanceof FudgeCore.SkeletonInstance && child.idSource == skeleton.idResource)
                                        skeletonInstance = child;
                                }
                                node.addChild(skeletonInstance || await FudgeCore.SkeletonInstance.CREATE(skeleton));
                            }
                            else
                                node.addChild(await this.getNode(this.fbx.objects.models.indexOf(childFBX)));
                        }
                        else if (childFBX.type == "Geometry") {
                            const mesh = await this.getMesh(this.fbx.objects.geometries.indexOf(childFBX));
                            const cmpMesh = new FudgeCore.ComponentMesh(mesh);
                            node.addComponent(new FudgeCore.ComponentMaterial(FBXLoader.defaultMaterial));
                            if (mesh instanceof FudgeCore.MeshSkin) {
                                const skeleton = await this.getSkeleton(childFBX.children[0].children[0].children[0]); // Model.Deformer.SubDeformer.LimbNode
                                cmpMesh.skeleton = (_root?.getChild(0) || await FudgeCore.SkeletonInstance.CREATE(skeleton));
                                for (const subDeformerFBX of childFBX.children[0].children) {
                                    const bone = cmpMesh.skeleton.bones[subDeformerFBX.children[0].name];
                                    bone.mtxLocal.set(subDeformerFBX.TransformLink);
                                    if (bone.getParent())
                                        bone.mtxLocal.multiply(bone.getParent().mtxWorldInverse);
                                }
                                node.getComponent(FudgeCore.ComponentMaterial).material = FBXLoader.defaultSkinMaterial;
                            }
                            node.addComponent(cmpMesh);
                        }
                        else if (childFBX.type == "Material") {
                            // TODO: additional skin materials get created here, check if the original material is still needed
                            const iMaterial = this.fbx.objects.materials.indexOf(childFBX);
                            const material = await this.getMaterial(iMaterial);
                            node.getComponent(FudgeCore.ComponentMaterial).material = node.getComponent(FudgeCore.ComponentMesh).mesh instanceof FudgeCore.MeshSkin ?
                                this.#skinMaterials[iMaterial] || (this.#skinMaterials[iMaterial] = new FudgeCore.Material(material.name, material.getShader() == FudgeCore.ShaderPhong ?
                                    FudgeCore.ShaderPhongSkin :
                                    FudgeCore.ShaderPhongTexturedSkin, material.coat)) :
                                material;
                        }
                    }
            }
            return this.#nodes[_index];
        }
        async getMesh(_index) {
            if (!this.#meshes)
                this.#meshes = [];
            if (!this.#meshes[_index])
                this.#meshes[_index] = await (this.fbx.objects.geometries[_index].children?.[0].type == "Deformer" ?
                    new FudgeCore.MeshSkin() :
                    new FudgeCore.MeshImport()).load(FudgeCore.MeshLoaderFBX, this.uri, this.fbx.objects.geometries[_index]);
            return this.#meshes[_index];
        }
        async getMaterial(_index) {
            if (!this.#materials)
                this.#materials = [];
            if (!this.#materials[_index]) {
                const materialFBX = this.fbx.objects.materials[_index].load();
                if (!(materialFBX.DiffuseColor instanceof FudgeCore.Vector3))
                    materialFBX.DiffuseColor?.children[0].load();
                // FBX supports lambert and phong shading, either way fudge has no lambert shader so we always use phong.
                // In DiffuseColor the texture of the material color is stored, if it's defined we use a texture shader.
                // TODO: materialFBX also contains additional values like shininess and reflectivity (and others) which are not suppported.
                this.#materials[_index] = new FudgeCore.Material(materialFBX.name, materialFBX.DiffuseColor && !(materialFBX.DiffuseColor instanceof FudgeCore.Vector3) ?
                    FudgeCore.ShaderPhongTextured :
                    FudgeCore.ShaderPhong, materialFBX.DiffuseColor && !(materialFBX.DiffuseColor instanceof FudgeCore.Vector3) ?
                    new FudgeCore.CoatRemissiveTextured(new FudgeCore.Color(...materialFBX.Diffuse.get()), await this.getTexture(this.fbx.objects.textures.indexOf(materialFBX.DiffuseColor)), materialFBX.DiffuseFactor ?? 1, materialFBX.SpecularFactor ?? average(materialFBX.Specular?.get()) ?? 0) :
                    new FudgeCore.CoatRemissive(new FudgeCore.Color(...(materialFBX.DiffuseColor ?? materialFBX.Diffuse).get()), materialFBX.DiffuseFactor ?? 1, materialFBX.SpecularFactor ?? average(materialFBX.Specular?.get()) ?? 0));
            }
            return this.#materials[_index];
            function average(_array) {
                if (_array)
                    return _array.reduce((a, b) => a + b) / _array.length;
                else
                    return undefined;
            }
        }
        async getTexture(_index) {
            return new Promise((resolve, reject) => {
                if (!this.#textures)
                    this.#textures = [];
                if (this.#textures[_index])
                    return resolve(this.#textures[_index]);
                const videoFBX = this.fbx.objects.textures[_index].children[0];
                const texture = new FudgeCore.TextureImage();
                texture.image = new Image();
                texture.image.onload = () => resolve(texture);
                texture.image.onerror = reject;
                texture.image.src = URL.createObjectURL(new Blob([videoFBX.Content], { type: "image/png" }));
                this.#textures[_index] = texture;
                // TODO: get and set mipmap information ???
            });
        }
        // Problem: mehrere Deformer verweisen auf das selbe Skelett aber nutzen dabei nicht immer alle Knochen
        // => Problem besteht auch im GLTFLoader
        /**
         * Retriefs the skeleton containing the given limb node.
         */
        async getSkeleton(_fbxLimbNode) {
            if (!this.#skeletons)
                this.#skeletons = [];
            return this.#skeletons.find(_skeleton => _fbxLimbNode.name in _skeleton.bones) || await (async () => {
                const skeleton = new FudgeCore.Skeleton(`Skeleton${this.#skeletons.length}`);
                let rootNode = _fbxLimbNode;
                while (rootNode.parents && rootNode.parents.some(parent => parent.subtype == "LimbNode"))
                    rootNode = rootNode.parents.find(_parent => _parent.subtype == "LimbNode");
                const iRootNode = this.fbx.objects.models.findIndex(_model => _model.name == rootNode.name);
                skeleton.addChild(await this.getNode(iRootNode));
                for (const node of skeleton) {
                    if (node != skeleton && this.fbx.objects.models[this.#nodes.indexOf(node)].subtype == "LimbNode")
                        skeleton.registerBone(node);
                }
                skeleton.setDefaultPose();
                FudgeCore.Project.register(skeleton);
                this.#skeletons.push(skeleton);
                return skeleton;
            })();
        }
        async getAnimation(_index) {
            if (!this.#animations)
                this.#animations = [];
            if (!this.#animations[_index]) {
                const animStack = this.fbx.objects.animStacks[_index];
                const animNodesFBX = animStack.children[0].children;
                const animStructure = { children: { "Skeleton0": { mtxBoneLocals: {} } } };
                for (const animNodeFBX of animNodesFBX) {
                    if (typeof animNodeFBX.dX == "number" && typeof animNodeFBX.dY == "number" && typeof animNodeFBX.dZ == "number")
                        continue;
                    const target = animNodeFBX.parents.find(_parent => _parent.type != "AnimLayer");
                    (animStructure.children.Skeleton0.mtxBoneLocals[target.name] ||
                        (animStructure.children.Skeleton0.mtxBoneLocals[target.name] = {}))[{
                        T: "translation",
                        R: "rotation",
                        S: "scale"
                    }[animNodeFBX.name]] = this.getAnimationVector3(animNodeFBX, target);
                }
                this.#animations[_index] = new FudgeCore.Animation(animStack.name, animStructure);
            }
            return this.#animations[_index];
        }
        /**
         * fetched from three.js, adapted to FUDGE and optimized
         * https://github.com/mrdoob/three.js/blob/dev/examples/jsm/loaders/FBXLoader.js
         * line 3950
         */
        async generateTransform(_modelFBX, _node) {
            const parentIndex = this.fbx.objects.models.indexOf(_modelFBX.parents.find(_parent => _parent.type == "Model"));
            const parent = parentIndex >= 0 ? await this.getNode(parentIndex) : undefined;
            const mtxLocalRotation = _modelFBX.PreRotation || _modelFBX.LclRotation || _modelFBX.PostRotation ?
                FudgeCore.Matrix4x4.IDENTITY() :
                undefined;
            if (_modelFBX.PreRotation) {
                mtxLocalRotation.rotate(this.getOrdered(_modelFBX.PreRotation, _modelFBX));
            }
            if (_modelFBX.LclRotation) {
                mtxLocalRotation.rotate(this.getOrdered(this.getTransformVector(_modelFBX.LclRotation, FudgeCore.Vector3.ZERO), _modelFBX));
            }
            if (_modelFBX.PostRotation) {
                let mtxPostRotationInverse = FudgeCore.Matrix4x4.ROTATION(this.getOrdered(_modelFBX.PostRotation, _modelFBX));
                mtxPostRotationInverse = FudgeCore.Matrix4x4.INVERSION(mtxPostRotationInverse);
                mtxLocalRotation.multiply(mtxPostRotationInverse);
            }
            const mtxLocalScaling = _modelFBX.LclScaling ?
                FudgeCore.Matrix4x4.SCALING(this.getTransformVector(_modelFBX.LclScaling, FudgeCore.Vector3.ONE)) :
                undefined;
            const mtxParentWorldRotation = parent ? FudgeCore.Matrix4x4.ROTATION(parent.mtxWorld.rotation) : undefined;
            const mtxParentWorldScale = parent ? (() => {
                const mtxParentWorldScale = FudgeCore.Matrix4x4.INVERSION(mtxParentWorldRotation);
                mtxParentWorldScale.translate(FudgeCore.Vector3.SCALE(parent.mtxWorld.translation, -1));
                mtxParentWorldScale.multiply(parent.mtxWorld);
                return mtxParentWorldScale;
            })() : undefined;
            const mtxWorldRotationScale = parent || mtxLocalRotation || mtxLocalScaling ? FudgeCore.Matrix4x4.IDENTITY() : undefined;
            if (parent || mtxLocalRotation || mtxLocalScaling) {
                const inheritType = _modelFBX.InheritType || 0;
                if (inheritType == 0) {
                    if (parent)
                        mtxWorldRotationScale.multiply(mtxParentWorldRotation);
                    if (mtxLocalRotation)
                        mtxWorldRotationScale.multiply(mtxLocalRotation);
                    if (parent)
                        mtxWorldRotationScale.multiply(mtxParentWorldScale);
                    if (mtxLocalScaling)
                        mtxWorldRotationScale.multiply(mtxLocalScaling);
                }
                else if (inheritType == 1) {
                    if (parent) {
                        mtxWorldRotationScale.multiply(mtxParentWorldRotation);
                        mtxWorldRotationScale.multiply(mtxParentWorldScale);
                    }
                    if (mtxLocalRotation)
                        mtxWorldRotationScale.multiply(mtxLocalRotation);
                    if (mtxLocalScaling)
                        mtxWorldRotationScale.multiply(mtxLocalScaling);
                }
                else {
                    if (parent)
                        mtxWorldRotationScale.multiply(mtxParentWorldRotation);
                    if (mtxLocalRotation)
                        mtxWorldRotationScale.multiply(mtxLocalRotation);
                    if (parent) {
                        mtxWorldRotationScale.multiply(mtxParentWorldScale);
                        let mtxParentLocalScalingInverse = FudgeCore.Matrix4x4.SCALING(parent.mtxLocal.scaling);
                        mtxParentLocalScalingInverse = FudgeCore.Matrix4x4.INVERSION(mtxParentLocalScalingInverse);
                        mtxWorldRotationScale.multiply(mtxParentLocalScalingInverse);
                    }
                    if (mtxLocalScaling)
                        mtxWorldRotationScale.multiply(mtxLocalScaling);
                }
            }
            // Calculate the local transform matrix
            let translation;
            translation = FudgeCore.Vector3.ZERO();
            if (_modelFBX.LclTranslation)
                translation.add(this.getTransformVector(_modelFBX.LclTranslation, FudgeCore.Vector3.ZERO));
            if (_modelFBX.RotationOffset)
                translation.add(_modelFBX.RotationOffset);
            if (_modelFBX.RotationPivot)
                translation.add(_modelFBX.RotationPivot);
            const mtxTransform = FudgeCore.Matrix4x4.TRANSLATION(translation);
            if (mtxLocalRotation)
                mtxTransform.multiply(mtxLocalRotation);
            translation = FudgeCore.Vector3.ZERO();
            if (_modelFBX.RotationPivot)
                translation.subtract(_modelFBX.RotationPivot);
            if (_modelFBX.ScalingOffset)
                translation.add(_modelFBX.ScalingOffset);
            if (_modelFBX.ScalingPivot)
                translation.add(_modelFBX.ScalingPivot);
            mtxTransform.translate(translation);
            if (mtxLocalScaling)
                mtxTransform.multiply(mtxLocalScaling);
            if (_modelFBX.ScalingPivot)
                mtxTransform.translate(FudgeCore.Vector3.SCALE(_modelFBX.ScalingPivot, -1));
            const mtxWorldTranslation = parent ?
                FudgeCore.Matrix4x4.TRANSLATION(FudgeCore.Matrix4x4.MULTIPLICATION(parent.mtxWorld, FudgeCore.Matrix4x4.TRANSLATION(mtxTransform.translation)).translation) :
                FudgeCore.Matrix4x4.TRANSLATION(mtxTransform.translation);
            mtxTransform.set(mtxWorldTranslation);
            mtxTransform.multiply(mtxWorldRotationScale);
            _node.mtxWorld.set(mtxTransform);
            if (parent)
                mtxTransform.multiply(FudgeCore.Matrix4x4.INVERSION(parent.mtxWorld), true);
            _node.addComponent(new FudgeCore.ComponentTransform(mtxTransform));
        }
        getTransformVector(_vector, _default) {
            return (_vector == undefined ?
                _default() :
                _vector instanceof FudgeCore.Vector3 ?
                    _vector :
                    new FudgeCore.Vector3(typeof (_vector = _vector.load()).dX == "number" ?
                        _vector.dX :
                        _vector.dX.load().Default, typeof _vector.dY == "number" ?
                        _vector.dY :
                        _vector.dY.load().Default, typeof _vector.dZ == "number" ?
                        _vector.dZ :
                        _vector.dZ.load().Default));
        }
        getAnimationVector3(_animNode, _target) {
            const vectorSequence = {};
            for (const valueName in _animNode)
                if (valueName == "dX" || valueName == "dY" || valueName == "dZ") {
                    const value = _animNode[valueName];
                    if (typeof value != "number") {
                        const sequence = new FudgeCore.AnimationSequence();
                        for (let i = 0; i < value.KeyTime.length; ++i) {
                            // According to the reference time is defined as a signed int64, unit being 1/46186158000 seconds
                            // ref: https://archive.blender.org/wiki/index.php/User:Mont29/Foundation/FBX_File_Structure/#Some_Specific_Property_Types
                            sequence.addKey(new FudgeCore.AnimationKey(Number((value.KeyTime[i] - value.KeyTime.reduce((_min, _v) => _v < _min ? _v : _min)) / BigInt("46186158")), value.KeyValueFloat[i]));
                        }
                        vectorSequence[valueName[1].toLowerCase()] = sequence;
                    }
                }
            if (_animNode.name == "R" && (_target.PreRotation || _target.PostRotation)) {
                let preRototation;
                if (_target.PreRotation)
                    preRototation = FudgeCore.Matrix4x4.ROTATION(_target.PreRotation);
                let postRotation;
                if (_target.PostRotation)
                    postRotation = FudgeCore.Matrix4x4.ROTATION(_target.PostRotation);
                [vectorSequence.x, vectorSequence.y, vectorSequence.z]
                    .flatMap(_seq => _seq?.getKeys())
                    .map(_key => _key?.time)
                    .sort((_timeA, _timeB) => _timeA - _timeB) // sort times
                    .filter((_time, _index, _times) => _time != _times[_index + 1]) // remove duplicates
                    .map(_time => {
                    return { x: findKey(vectorSequence.x), y: findKey(vectorSequence.y), z: findKey(vectorSequence.z) };
                    function findKey(_sequence) {
                        return _sequence?.getKeys().find(_key => _key.time == _time);
                    }
                })
                    .forEach(_frame => {
                    let vctEulerAngles = FudgeCore.Recycler.get(FudgeCore.Vector3);
                    vctEulerAngles.set(_frame.x?.value ?? 0, _frame.y?.value ?? 0, _frame.z?.value ?? 0);
                    const mtxRotation = FudgeCore.Matrix4x4.ROTATION(vctEulerAngles);
                    if (preRototation)
                        mtxRotation.multiply(preRototation, true);
                    if (postRotation)
                        mtxRotation.multiply(postRotation);
                    vctEulerAngles = mtxRotation.getEulerAngles();
                    if (_frame.x)
                        _frame.x.value = vctEulerAngles.x;
                    if (_frame.y)
                        _frame.y.value = vctEulerAngles.y;
                    if (_frame.z)
                        _frame.z.value = vctEulerAngles.z;
                });
            }
            return vectorSequence;
        }
        getOrdered(_rotation, _modelFBX) {
            if (!_modelFBX.EulerOrder)
                return _rotation;
            const data = _rotation.get();
            const result = FudgeCore.Recycler.get(FudgeCore.Vector3);
            result.set(data[_modelFBX.EulerOrder.indexOf("Z")], data[_modelFBX.EulerOrder.indexOf("Y")], data[_modelFBX.EulerOrder.indexOf("X")]);
            return result;
        }
    }
    FudgeCore.FBXLoader = FBXLoader;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    var FBX;
    (function (FBX) {
        /**
         * Interface to represent fbx-nodes containing its name, children and properties.
         * Children and properites are lazy.
         * @author Matthias Roming, HFU, 2023
         */
        class Node {
            constructor(_name, _loadProperties, _loadChildren) {
                this.name = _name;
                this.loadProperties = _loadProperties;
                this.loadChildren = _loadChildren;
            }
            #children;
            #properties;
            get properties() {
                return this.#properties || (this.#properties = this.loadProperties());
            }
            get children() {
                return this.#children || (this.#children = this.loadChildren());
            }
        }
        FBX.Node = Node;
        let ArrayEncoding;
        (function (ArrayEncoding) {
            ArrayEncoding[ArrayEncoding["UNCOMPRESSED"] = 0] = "UNCOMPRESSED";
            ArrayEncoding[ArrayEncoding["COMPRESSED"] = 1] = "COMPRESSED";
        })(ArrayEncoding = FBX.ArrayEncoding || (FBX.ArrayEncoding = {}));
    })(FBX = FudgeCore.FBX || (FudgeCore.FBX = {}));
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    var FBX;
    (function (FBX) {
        /**
         * Loads an fbx file from its fbx-node array which may be retrieved by parseNodesFromBinary.
         * @author Matthias Roming, HFU, 2023
         */
        function loadFromNodes(_nodes) {
            const fbx = {
                documents: undefined,
                objects: {
                    all: undefined,
                    models: [],
                    geometries: [],
                    materials: [],
                    poses: [],
                    textures: [],
                    animStacks: []
                },
                connections: undefined
            };
            for (const node of _nodes) {
                if (node.name == "Documents")
                    fbx.documents = node.children
                        .filter(_documentNode => _documentNode.name == "Document")
                        .map(_documentNode => getDocument(_documentNode));
                else if (node.name == "Objects")
                    fbx.objects.all = node.children.map(_objectNode => getObject(_objectNode, fbx));
                else if (node.name == "Connections")
                    fbx.connections = node.children.map(_connectionNode => getConnection(_connectionNode));
                if (fbx.documents && fbx.objects.all && fbx.connections)
                    break;
            }
            groupObjects(fbx);
            applyConnections(fbx.connections, fbx.documents, fbx.objects.all);
            return fbx;
        }
        FBX.loadFromNodes = loadFromNodes;
        function getDocument(_node) {
            const document = {
                uid: _node.properties[0],
                name: _node.properties[2],
                loaded: false,
                load: () => loadObjectProperties(_node, document)
            };
            return document;
        }
        function getObject(_node, _fbx) {
            const nameAndType = _node.properties[1].split("::");
            const object = {
                uid: _node.properties[0],
                name: nameAndType[0],
                type: nameAndType[1],
                subtype: _node.properties[2],
                loaded: false,
                load: () => loadObjectProperties(_node, object)
            };
            return object;
        }
        function groupObjects(_fbx) {
            for (const object of _fbx.objects.all) {
                if (object.type == "Model")
                    _fbx.objects.models.push(object);
                else if (object.type == "Geometry")
                    _fbx.objects.geometries.push(object);
                else if (object.type == "Material")
                    _fbx.objects.materials.push(object);
                else if (object.type == "Pose")
                    _fbx.objects.poses.push(object);
                else if (object.type == "Texture")
                    _fbx.objects.textures.push(object);
                else if (object.type == "AnimStack")
                    _fbx.objects.animStacks.push(object);
            }
        }
        function getConnection(_node) {
            if (!(_node.properties[0] == "OO" || _node.properties[0] == "OP")) {
                console.warn(`Connection type ${_node.properties[0]} is not supported`);
                return null;
            }
            return {
                childUID: _node.properties[1],
                parentUID: _node.properties[2],
                propertyName: _node.properties[0] == "OP" ? _node.properties[3] : null
            };
        }
        function applyConnections(_connections, _documents, _objects) {
            for (const connection of _connections) {
                let parent = _documents.find(_document => _document.load().RootNode == connection.parentUID);
                let child;
                for (const object of _objects) {
                    if (parent == undefined && object.uid == connection.parentUID)
                        parent = object;
                    if (child == undefined && object.uid == connection.childUID)
                        child = object;
                    if (parent != undefined && child != undefined)
                        break;
                }
                if (child)
                    (child.parents || (child.parents = [])).push(parent);
                if (connection.propertyName == null)
                    (parent.children || (parent.children = [])).push(child);
                else
                    parent[formatPropertyName(connection.propertyName)] = child;
            }
        }
        function loadObjectProperties(_node, _object) {
            if (_object.loaded)
                return _object;
            for (const child of _node.children) {
                if (child.name == "Properties70")
                    for (const property70 of child.children) {
                        const name = formatPropertyName(property70.properties[0]);
                        if (!_object[name])
                            _object[name] = getProperty70Value(property70);
                    }
                else {
                    const name = formatPropertyName(child.name);
                    if (!_object[name])
                        _object[name] = getPropertyValue(child);
                }
            }
            _object.loaded = true;
            return _object;
        }
        function getPropertyValue(_node) {
            return _node.children.length > 0
                ? _node.children.reduce((_subProperties, _subProperty) => {
                    const name = formatPropertyName(_subProperty.name);
                    if (_subProperties[name] == undefined)
                        _subProperties[name] = getPropertyValue(_subProperty);
                    else {
                        if (!(_subProperties[name] instanceof Array))
                            _subProperties[name] = [_subProperties[name]];
                        _subProperties[name].push(getPropertyValue(_subProperty));
                    }
                    return _subProperties;
                }, {})
                : _node.properties[0];
        }
        function getProperty70Value(_node) {
            switch (_node.properties[1]) {
                case "bool":
                    return _node.properties[4];
                case "int":
                case "enum":
                case "ULongLong":
                case "double":
                case "Number":
                case "FieldOfView":
                    return _node.properties[4];
                case "Color":
                case "ColorRGB":
                case "Vector3D":
                case "Lcl Translation":
                case "Lcl Rotation":
                case "Lcl Scaling":
                    return new FudgeCore.Vector3(..._node.properties.slice(4, 7));
                case "KString":
                default:
                    return _node.properties[4];
            }
        }
        function formatPropertyName(_name) {
            return _name.replace(/[^a-zA-Z]/, "");
        }
    })(FBX = FudgeCore.FBX || (FudgeCore.FBX = {}));
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    var FBX;
    (function (FBX) {
        /**
         * Parses fbx-nodes array from a binary fbx-file.
         * despite the lazy node implementation it is mostly a copy of the reference: https://github.com/picode7/fbx-parser
         * @author Matthias Roming, HFU, 2023
         */
        function parseNodesFromBinary(_buffer) {
            if (_buffer.byteLength < binaryStartChars.length)
                throw "Not a binary FBX file";
            const data = new FBX.BufferReader(_buffer);
            const firstChars = new Uint8Array(data.getSequence(data.getUint8, binaryStartChars.length));
            const matchesFBXBinaryFirstChars = firstChars.every((_value, _index) => _value == binaryStartChars[_index]);
            if (!matchesFBXBinaryFirstChars)
                throw "Not a binary FBX file";
            const version = data.getUint32();
            const nodeAttributesAsUInt64 = version >= 7500; // Warum >= 7500?
            const nodes = [];
            while (true) {
                const node = readNode(data, nodeAttributesAsUInt64);
                if (node == null)
                    break;
                nodes.push(node);
            }
            return nodes;
        }
        FBX.parseNodesFromBinary = parseNodesFromBinary;
        function readNode(_data, _attributesAsUint64) {
            const endOffset = _attributesAsUint64 ? Number(_data.getUint64()) : _data.getUint32();
            if (endOffset == 0)
                return null;
            const propertiesLength = _attributesAsUint64 ? Number(_data.getUint64()) : _data.getUint32();
            const propertiesByteLength = _attributesAsUint64 ? Number(_data.getUint64()) : _data.getUint32();
            const nameLength = _data.getUint8();
            const name = _data.getString(nameLength);
            const propertiesOffset = _data.offset;
            const childrenOffset = propertiesOffset + propertiesByteLength;
            const node = new FBX.Node(name, () => {
                _data.offset = propertiesOffset;
                const properties = [];
                for (let iProperty = 0; iProperty < propertiesLength; iProperty++) {
                    properties.push(readProperty(_data));
                }
                return properties;
            }, () => {
                _data.offset = childrenOffset;
                const children = [];
                while (endOffset - _data.offset > nullCountAtNodeEnd) {
                    const child = readNode(_data, _attributesAsUint64);
                    if (child)
                        children.push(child);
                }
                return children;
            });
            _data.offset = endOffset;
            return node;
        }
        function readProperty(_data) {
            const typeCode = _data.getChar();
            const value = {
                C: _data.getBool,
                Y: _data.getInt16,
                I: _data.getInt32,
                L: _data.getInt64,
                F: _data.getFloat32,
                D: _data.getFloat64,
                S: () => _data.getString(_data.getUint32()).replace("\x00\x01", "::"),
                s: () => _data.getString(_data.getUint32()).replace("\x00\x01", "::"),
                R: () => new Uint8Array(readRaw(_data, _data.getUint8)),
                r: () => new Uint8Array(readArray(_data, _data.getUint8)),
                b: () => new Uint8Array(readArray(_data, _data.getUint8)),
                i: () => new Int32Array(readArray(_data, _data.getInt32)),
                l: () => new BigInt64Array(readArray(_data, _data.getInt64)),
                f: () => new Float32Array(readArray(_data, _data.getFloat32)),
                d: () => new Float32Array(readArray(_data, _data.getFloat64))
            }[typeCode]?.call(_data);
            if (value == null)
                FudgeCore.Debug.warn(`Unknown property type ${typeCode.charCodeAt(0)}`);
            return value;
        }
        function readArray(_data, _getter) {
            const length = _data.getUint32();
            const encoding = _data.getUint32();
            const byteLength = _data.getUint32();
            const endOffset = _data.offset + byteLength;
            const iterable = encoding == FBX.ArrayEncoding.COMPRESSED ?
                (() => {
                    const arrayData = new Uint8Array(_data.view.buffer, _data.offset, byteLength);
                    const inflatedData = (Reflect.get(globalThis, "pako") ? pako.inflate : fflate.inflateSync)(arrayData);
                    return new FBX.BufferReader(inflatedData.buffer).getSequence(_getter, length);
                })() :
                _data.getSequence(_getter, length);
            _data.offset = endOffset;
            return iterable;
        }
        function readRaw(_data, _getter) {
            // raw binary data needs to be interpreted in a special way see:
            // https://code.blender.org/2013/08/fbx-binary-file-format-specification/
            const length = _data.getUint32();
            return _data.getSequence(_getter, length);
            ;
        }
        const binaryStartChars = Uint8Array.from("Kaydara FBX Binary\x20\x20\x00\x1a\x00".split(""), (v) => v.charCodeAt(0));
        const nullCountAtNodeEnd = 13;
    })(FBX = FudgeCore.FBX || (FudgeCore.FBX = {}));
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Asset loader for gl Transfer Format files.
     * @authors Matthias Roming, HFU, 2022 | Jonas Plotzky, HFU, 2023
     */
    class GLTFLoader {
        constructor(_gltf, _url) {
            this.gltf = _gltf;
            this.url = _url;
        }
        #scenes;
        #nodes;
        #cameras;
        #animations;
        #meshes;
        #materials;
        #textures;
        #skeletons;
        #buffers;
        static async LOAD(_url) {
            if (!this.loaders)
                this.loaders = {};
            if (!this.loaders[_url]) {
                const response = await fetch(_url);
                const gltf = await response.json();
                gltf.nodes.forEach((_node, _iNode) => // mark parents of nodes
                 _node.children?.forEach(_iChild => gltf.nodes[_iChild].parent = _iNode));
                this.loaders[_url] = new GLTFLoader(gltf, _url);
            }
            return this.loaders[_url];
        }
        async getScene(_name) {
            const iScene = _name ? this.gltf.scenes.findIndex(_scene => _scene.name == _name) : this.gltf.scene;
            if (iScene == -1)
                throw new Error(`Couldn't find name ${_name} in gltf scenes.`);
            return await this.getSceneByIndex(iScene);
        }
        async getSceneByIndex(_iScene = this.gltf.scene) {
            if (!this.#scenes)
                this.#scenes = [];
            if (!this.#scenes[_iScene]) {
                const gltfScene = this.gltf.scenes[_iScene];
                const scene = new FudgeCore.Graph(gltfScene.name);
                for (const iNode of gltfScene.nodes)
                    scene.addChild(await this.getNodeByIndex(iNode));
                if (this.gltf.animations?.length > 0)
                    scene.addComponent(new FudgeCore.ComponentAnimator(await this.getAnimationByIndex(0)));
                FudgeCore.Project.register(scene);
                this.#scenes[_iScene] = scene;
            }
            return await FudgeCore.Project.createGraphInstance(this.#scenes[_iScene]);
        }
        async getNode(_name) {
            const iNode = this.gltf.nodes.findIndex(_node => _node.name == _name);
            if (iNode == -1)
                throw new Error(`Couldn't find name ${_name} in gltf nodes.`);
            return await this.getNodeByIndex(iNode);
        }
        async getNodeByIndex(_iNode) {
            if (!this.#nodes)
                this.#nodes = [];
            if (!this.#nodes[_iNode]) {
                const gltfNode = this.gltf.nodes[_iNode];
                let iSkeleton = this.gltf.skins?.findIndex(_skin => _skin.joints[0] == _iNode);
                const node = iSkeleton >= 0 ? new FudgeCore.Skeleton(gltfNode.name) : new FudgeCore.Node(gltfNode.name);
                // check for children
                if (gltfNode.children)
                    for (const iNode of gltfNode.children)
                        node.addChild(await this.getNodeByIndex(iNode));
                // check for transformation
                if (gltfNode.matrix || gltfNode.rotation || gltfNode.scale || gltfNode.translation) {
                    if (!node.getComponent(FudgeCore.ComponentTransform))
                        node.addComponent(new FudgeCore.ComponentTransform());
                    if (gltfNode.matrix) {
                        node.mtxLocal.set(Float32Array.from(gltfNode.matrix));
                    }
                    else {
                        if (gltfNode.translation)
                            node.mtxLocal.translate(new FudgeCore.Vector3(...gltfNode.translation));
                        if (gltfNode.rotation) {
                            const rotation = new FudgeCore.Quaternion();
                            rotation.set(gltfNode.rotation);
                            node.mtxLocal.rotate(rotation.eulerAngles);
                        }
                        if (gltfNode.scale)
                            node.mtxLocal.scale(new FudgeCore.Vector3(...gltfNode.scale));
                    }
                }
                // check for camera
                if (gltfNode.camera != undefined) {
                    node.addComponent(await this.getCameraByIndex(gltfNode.camera));
                }
                // check for mesh and material
                if (gltfNode.mesh != undefined) {
                    node.addComponent(new FudgeCore.ComponentMesh(await this.getMeshByIndex(gltfNode.mesh)));
                    const gltfMesh = this.gltf.meshes?.[gltfNode.mesh];
                    if (gltfMesh.primitives.length > 1)
                        throw new Error(`Node ${gltfNode.name} has a mesh with more than one primitive attached to it. FUDGE currently only supports one primitive per mesh.`);
                    const iMaterial = gltfMesh.primitives?.[0]?.material;
                    if (iMaterial != undefined) {
                        node.addComponent(new FudgeCore.ComponentMaterial(await this.getMaterialByIndex(iMaterial, node.getComponent(FudgeCore.ComponentMesh).mesh instanceof FudgeCore.MeshSkin)));
                    }
                    else {
                        if (node.getComponent(FudgeCore.ComponentMesh).mesh instanceof FudgeCore.MeshSkin) {
                            if (!GLTFLoader.defaultSkinMaterial)
                                GLTFLoader.defaultSkinMaterial = new FudgeCore.Material("GLTFDefaultSkinMaterial", FudgeCore.ShaderGouraudSkin, new FudgeCore.CoatRemissive(FudgeCore.Color.CSS("white")));
                            node.addComponent(new FudgeCore.ComponentMaterial(GLTFLoader.defaultSkinMaterial));
                        }
                        else {
                            if (!GLTFLoader.defaultMaterial)
                                GLTFLoader.defaultMaterial = new FudgeCore.Material("GLTFDefaultMaterial", FudgeCore.ShaderGouraud, new FudgeCore.CoatRemissive(FudgeCore.Color.CSS("white")));
                            node.addComponent(new FudgeCore.ComponentMaterial(GLTFLoader.defaultMaterial));
                        }
                    }
                }
                // check for skeleton        
                if (gltfNode.skin != undefined) {
                    let iSkeleton = this.gltf.skins[gltfNode.skin].joints[0];
                    node.getComponent(FudgeCore.ComponentMesh).skeleton = await this.getNodeByIndex(iSkeleton);
                }
                this.#nodes[_iNode] = node;
                // replace skeleton with skeleton instance
                if (iSkeleton >= 0) {
                    let skeletonInstance = await FudgeCore.SkeletonInstance.CREATE(await this.getSkeletonByIndex(iSkeleton));
                    // replace cached nodes from skeleton with skeleton instance bones
                    this.#nodes = this.#nodes.map(_node => skeletonInstance.bones[_node.name] || _node);
                    this.#nodes[_iNode] = skeletonInstance;
                }
            }
            return this.#nodes[_iNode];
        }
        async getCamera(_name) {
            const iCamera = this.gltf.cameras.findIndex(_camera => _camera.name == _name);
            if (iCamera == -1)
                throw new Error(`Couldn't find name ${_name} in gltf cameras.`);
            return await this.getCameraByIndex(iCamera);
        }
        async getCameraByIndex(_iCamera) {
            if (!this.#cameras)
                this.#cameras = [];
            if (!this.#cameras[_iCamera]) {
                const gltfCamera = this.gltf.cameras[_iCamera];
                const camera = new FudgeCore.ComponentCamera();
                if (gltfCamera.perspective)
                    camera.projectCentral(gltfCamera.perspective.aspectRatio, gltfCamera.perspective.yfov * FudgeCore.Calc.rad2deg, null, gltfCamera.perspective.znear, gltfCamera.perspective.zfar);
                else
                    camera.projectOrthographic(-gltfCamera.orthographic.xmag, gltfCamera.orthographic.xmag, -gltfCamera.orthographic.ymag, gltfCamera.orthographic.ymag);
                return camera;
            }
            return this.#cameras[_iCamera];
        }
        async getAnimation(_name) {
            const iAnimation = this.gltf.animations.findIndex(_animation => _animation.name == _name);
            if (iAnimation == -1)
                throw new Error(`Couldn't find name ${_name} in gltf animations.`);
            return await this.getAnimationByIndex(iAnimation);
        }
        async getAnimationByIndex(_iAnimation) {
            if (!this.#animations)
                this.#animations = [];
            if (!this.#animations[_iAnimation]) {
                const gltfAnimation = this.gltf.animations[_iAnimation];
                // TODO: maybe refactor this to iterate over channels directly and remove this map
                const mapiNodeToGltfChannel = [];
                for (const gltfChannel of gltfAnimation.channels) {
                    if (gltfChannel.target.node == undefined)
                        continue;
                    if (!mapiNodeToGltfChannel[gltfChannel.target.node])
                        mapiNodeToGltfChannel[gltfChannel.target.node] = [];
                    mapiNodeToGltfChannel[gltfChannel.target.node].push(gltfChannel);
                }
                const animationStructure = {};
                for (const iNode in mapiNodeToGltfChannel) {
                    const gltfChannels = mapiNodeToGltfChannel[iNode];
                    const gltfNode = this.gltf.nodes[gltfChannels[0].target.node];
                    const path = [];
                    path.push(gltfChannels[0].target.node);
                    let root = gltfNode;
                    while (root.parent != undefined) { // parent of gltfNode is set when json is loaded
                        path.push(root.parent);
                        root = this.gltf.nodes[root.parent];
                    }
                    let currentStructure = animationStructure;
                    for (const iPathNode of path.reverse()) {
                        const pathNode = this.gltf.nodes[iPathNode];
                        if (currentStructure.children == undefined)
                            currentStructure.children = {};
                        if (currentStructure.children[pathNode.name] == undefined)
                            currentStructure.children[pathNode.name] = {};
                        currentStructure = currentStructure.children[pathNode.name];
                        let iSkin = this.gltf.skins?.findIndex(_skin => _skin.joints[0] == iPathNode);
                        if (iSkin >= 0 && this.gltf.skins[iSkin].joints.includes(gltfChannels[0].target.node)) {
                            const mtxBoneLocal = {};
                            for (const gltfChannel of gltfChannels)
                                mtxBoneLocal[gltfChannel.target.path] =
                                    await this.getAnimationSequenceVector3(gltfAnimation.samplers[gltfChannel.sampler], gltfChannel.target.path);
                            if (currentStructure.mtxBoneLocals == undefined)
                                currentStructure.mtxBoneLocals = {};
                            currentStructure.mtxBoneLocals[gltfNode.name] = mtxBoneLocal;
                            break;
                        }
                        if (pathNode == gltfNode) {
                            const mtxLocal = {};
                            for (const gltfChannel of gltfChannels)
                                mtxLocal[gltfChannel.target.path] =
                                    await this.getAnimationSequenceVector3(gltfAnimation.samplers[gltfChannel.sampler], gltfChannel.target.path);
                            currentStructure.components = {
                                ComponentTransform: [
                                    { mtxLocal: mtxLocal }
                                ]
                            };
                        }
                    }
                }
                this.#animations[_iAnimation] = new FudgeCore.Animation(gltfAnimation.name, animationStructure);
            }
            return this.#animations[_iAnimation];
        }
        async getMesh(_name) {
            const iMesh = this.gltf.meshes.findIndex(_mesh => _mesh.name == _name);
            if (iMesh == -1)
                throw new Error(`Couldn't find name ${_name} in gltf meshes.`);
            return await this.getMeshByIndex(iMesh);
        }
        async getMeshByIndex(_iMesh) {
            if (!this.#meshes)
                this.#meshes = [];
            if (!this.#meshes[_iMesh]) {
                const gltfMesh = this.gltf.meshes[_iMesh];
                this.#meshes[_iMesh] = await (gltfMesh.primitives[0].attributes.JOINTS_0 != undefined ?
                    new FudgeCore.MeshSkin() :
                    new FudgeCore.MeshImport()).load(FudgeCore.MeshLoaderGLTF, this.url, gltfMesh);
            }
            return this.#meshes[_iMesh];
        }
        async getMaterialByIndex(_iMaterial, _skin = false) {
            if (!this.#materials)
                this.#materials = [];
            if (!this.#materials[_iMaterial]) {
                const gltfMaterial = this.gltf.materials[_iMaterial];
                // TODO: in the future create an appropriate shader based on the gltf material properties
                const gltfBaseColorTexture = gltfMaterial.pbrMetallicRoughness?.baseColorTexture;
                const material = new FudgeCore.Material(gltfMaterial.name, gltfBaseColorTexture ?
                    (_skin ? FudgeCore.ShaderPhongTexturedSkin : FudgeCore.ShaderPhongTextured) :
                    (_skin ? FudgeCore.ShaderPhongSkin : FudgeCore.ShaderPhong));
                if (gltfBaseColorTexture) {
                    const texture = await this.getTextureByIndex(gltfBaseColorTexture.index);
                    material.coat = new FudgeCore.CoatRemissiveTextured(new FudgeCore.Color(...gltfMaterial.pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1]), // TODO: check if shader should multiply baseColorTexture values with baseColorFactor
                    texture, 1, 1);
                }
                this.#materials[_iMaterial] = material;
            }
            return this.#materials[_iMaterial];
        }
        async getTextureByIndex(_iTexture) {
            if (!this.#textures)
                this.#textures = [];
            if (!this.#textures[_iTexture]) {
                const gltfTexture = this.gltf.textures[_iTexture];
                const gltfSampler = this.gltf.samplers?.[gltfTexture.sampler];
                const gltfImage = this.gltf.images[gltfTexture.source];
                if (gltfSampler && (gltfSampler.wrapS != undefined || gltfSampler.wrapT != undefined))
                    console.warn(`${GLTFLoader.name}: Texture ${_iTexture} in '${this.url}' has a wrapS and wrapT of '${getWebGLParameterName(gltfSampler.wrapS)}' and '${getWebGLParameterName(gltfSampler.wrapT)}' respectively. FUDGE only supports the default behavior of '${getWebGLParameterName(WebGL2RenderingContext.REPEAT)}'.`);
                let url = gltfImage.uri;
                if (!gltfImage.uri && gltfImage.bufferView) {
                    // TODO: this is duplicate code from getBufferData, maybe refactor getBufferData to handle bufferViewIndex input
                    const gltfBufferView = this.gltf.bufferViews[gltfImage.bufferView];
                    const buffer = await this.getBuffer(gltfBufferView.buffer);
                    const byteOffset = gltfBufferView.byteOffset || 0;
                    const byteLength = gltfBufferView.byteLength || 0;
                    url = URL.createObjectURL(new Blob([new Uint8Array(buffer, byteOffset, byteLength / Uint8Array.BYTES_PER_ELEMENT)], { type: gltfImage.mimeType }));
                }
                const texture = new FudgeCore.TextureImage();
                await texture.load(url);
                if (gltfSampler && gltfSampler.magFilter == WebGL2RenderingContext.NEAREST && gltfSampler.minFilter == WebGL2RenderingContext.NEAREST)
                    texture.mipmap = FudgeCore.MIPMAP.CRISP;
                else if (gltfSampler && gltfSampler.magFilter == WebGL2RenderingContext.NEAREST && gltfSampler.minFilter == WebGL2RenderingContext.NEAREST_MIPMAP_LINEAR)
                    texture.mipmap = FudgeCore.MIPMAP.MEDIUM;
                else if (gltfSampler && gltfSampler.magFilter == WebGL2RenderingContext.LINEAR && gltfSampler.minFilter == WebGL2RenderingContext.LINEAR_MIPMAP_LINEAR)
                    texture.mipmap = FudgeCore.MIPMAP.BLURRY;
                else if (gltfSampler && gltfSampler.magFilter != undefined && gltfSampler.minFilter != undefined)
                    throw new Error(`${GLTFLoader.name}: Texture ${_iTexture} in '${this.url}' has a magFilter and minFilter of '${getWebGLParameterName(gltfSampler.magFilter)}' and '${getWebGLParameterName(gltfSampler.minFilter)}' respectively. FUDGE only supports the following combinations: NEAREST and NEAREST | NEAREST and NEAREST_MIPMAP_LINEAR | LINEAR and LINEAR_MIPMAP_LINEAR.`);
                this.#textures[_iTexture] = texture;
            }
            return this.#textures[_iTexture];
        }
        async getSkeleton(_name) {
            const iSkeleton = this.gltf.skins.findIndex(_skeleton => _skeleton.name == _name);
            if (iSkeleton == -1)
                throw new Error(`Couldn't find name ${_name} in gltf skins.`);
            return await this.getSkeletonByIndex(iSkeleton);
        }
        async getSkeletonByIndex(_iSkeleton) {
            if (!this.#skeletons)
                this.#skeletons = [];
            if (!this.#skeletons[_iSkeleton]) {
                const gltfSkeleton = this.gltf.skins[_iSkeleton];
                const skeleton = await this.getNodeByIndex(gltfSkeleton.joints[0]);
                // convert float array to array of matrices and register bones
                const floatArray = await this.getFloat32Array(gltfSkeleton.inverseBindMatrices);
                const span = 16;
                for (let iFloat = 0, iBone = 0; iFloat < floatArray.length; iFloat += span, iBone++) {
                    const mtxBindInverse = new FudgeCore.Matrix4x4();
                    mtxBindInverse.set(floatArray.subarray(iFloat, iFloat + span));
                    skeleton.registerBone(this.#nodes[gltfSkeleton.joints[iBone]], mtxBindInverse);
                }
                FudgeCore.Project.register(skeleton);
                this.#skeletons[_iSkeleton] = skeleton;
            }
            return this.#skeletons[_iSkeleton];
        }
        async getUint8Array(_iAccessor) {
            const array = await this.getBufferData(_iAccessor);
            if (this.gltf.accessors[_iAccessor]?.componentType == COMPONENT_TYPE.UNSIGNED_BYTE)
                return array;
            else {
                console.warn(`Expected component type UNSIGNED_BYTE but was ${COMPONENT_TYPE[this.gltf.accessors[_iAccessor]?.componentType]}.`);
                return Uint8Array.from(array);
            }
        }
        async getUint16Array(_iAccessor) {
            const array = await this.getBufferData(_iAccessor);
            if (this.gltf.accessors[_iAccessor]?.componentType == COMPONENT_TYPE.UNSIGNED_SHORT)
                return array;
            else {
                console.warn(`Expected component type UNSIGNED_SHORT but was ${COMPONENT_TYPE[this.gltf.accessors[_iAccessor]?.componentType]}.`);
                return Uint16Array.from(array);
            }
        }
        async getUint32Array(_iAccessor) {
            const array = await this.getBufferData(_iAccessor);
            if (this.gltf.accessors[_iAccessor]?.componentType == COMPONENT_TYPE.UNSIGNED_INT)
                return array;
            else {
                console.warn(`Expected component type UNSIGNED_INT but was ${COMPONENT_TYPE[this.gltf.accessors[_iAccessor]?.componentType]}.`);
                return Uint32Array.from(array);
            }
        }
        async getFloat32Array(_iAccessor) {
            const array = await this.getBufferData(_iAccessor);
            if (this.gltf.accessors[_iAccessor]?.componentType == COMPONENT_TYPE.FLOAT)
                return array;
            else {
                console.warn(`Expected component type FLOAT but was ${COMPONENT_TYPE[this.gltf.accessors[_iAccessor]?.componentType]}.`);
                return Float32Array.from(array);
            }
        }
        async getBufferData(_iAccessor) {
            const gltfAccessor = this.gltf.accessors[_iAccessor];
            if (!gltfAccessor)
                throw new Error("Couldn't find accessor");
            const gltfBufferView = this.gltf.bufferViews[gltfAccessor.bufferView];
            if (!gltfBufferView)
                throw new Error("Couldn't find buffer view");
            const buffer = await this.getBuffer(gltfBufferView.buffer);
            ;
            const byteOffset = gltfBufferView.byteOffset || 0;
            const byteLength = gltfBufferView.byteLength || 0;
            switch (gltfAccessor.componentType) {
                case COMPONENT_TYPE.UNSIGNED_BYTE:
                    return new Uint8Array(buffer, byteOffset, byteLength / Uint8Array.BYTES_PER_ELEMENT);
                case COMPONENT_TYPE.BYTE:
                    return new Int8Array(buffer, byteOffset, byteLength / Int8Array.BYTES_PER_ELEMENT);
                case COMPONENT_TYPE.UNSIGNED_SHORT:
                    return new Uint16Array(buffer, byteOffset, byteLength / Uint16Array.BYTES_PER_ELEMENT);
                case COMPONENT_TYPE.SHORT:
                    return new Int16Array(buffer, byteOffset, byteLength / Int16Array.BYTES_PER_ELEMENT);
                case COMPONENT_TYPE.UNSIGNED_INT:
                    return new Uint32Array(buffer, byteOffset, byteLength / Uint32Array.BYTES_PER_ELEMENT);
                case COMPONENT_TYPE.INT:
                    return new Int32Array(buffer, byteOffset, byteLength / Int32Array.BYTES_PER_ELEMENT);
                case COMPONENT_TYPE.FLOAT:
                    return new Float32Array(buffer, byteOffset, byteLength / Float32Array.BYTES_PER_ELEMENT);
                default:
                    throw new Error(`Unsupported component type: ${gltfAccessor.componentType}.`);
            }
        }
        async getBuffer(_iBuffer) {
            const gltfBuffer = this.gltf.buffers[_iBuffer];
            if (!gltfBuffer)
                throw new Error("Couldn't find buffer");
            if (!this.#buffers)
                this.#buffers = [];
            if (!this.#buffers[_iBuffer]) {
                const response = await fetch(gltfBuffer.uri);
                this.#buffers[_iBuffer] = await response.arrayBuffer();
            }
            return this.#buffers[_iBuffer];
        }
        async getAnimationSequenceVector3(_sampler, _transformationType) {
            const input = await this.getFloat32Array(_sampler.input);
            const output = await this.getFloat32Array(_sampler.output);
            const millisPerSecond = 1000;
            const isRotation = _transformationType == "rotation";
            const sequences = {};
            sequences.x = new FudgeCore.AnimationSequence();
            sequences.y = new FudgeCore.AnimationSequence();
            sequences.z = new FudgeCore.AnimationSequence();
            if (isRotation)
                sequences.w = new FudgeCore.AnimationSequence();
            for (let iInput = 0; iInput < input.length; ++iInput) {
                let iOutput = iInput * (_transformationType == "rotation" ? 4 : 3); // output buffer either contains data for quaternion or vector3
                let time = millisPerSecond * input[iInput];
                sequences.x.addKey(new FudgeCore.AnimationKey(time, output[iOutput + 0]));
                sequences.y.addKey(new FudgeCore.AnimationKey(time, output[iOutput + 1]));
                sequences.z.addKey(new FudgeCore.AnimationKey(time, output[iOutput + 2]));
                if (isRotation)
                    sequences.w.addKey(new FudgeCore.AnimationKey(time, output[iOutput + 3]));
            }
            return sequences;
        }
    }
    FudgeCore.GLTFLoader = GLTFLoader;
    function getWebGLParameterName(_value) {
        return Object.keys(WebGL2RenderingContext).find(_key => Reflect.get(WebGL2RenderingContext, _key) == _value);
    }
    let COMPONENT_TYPE;
    (function (COMPONENT_TYPE) {
        COMPONENT_TYPE[COMPONENT_TYPE["BYTE"] = 5120] = "BYTE";
        COMPONENT_TYPE[COMPONENT_TYPE["UNSIGNED_BYTE"] = 5121] = "UNSIGNED_BYTE";
        COMPONENT_TYPE[COMPONENT_TYPE["SHORT"] = 5122] = "SHORT";
        COMPONENT_TYPE[COMPONENT_TYPE["UNSIGNED_SHORT"] = 5123] = "UNSIGNED_SHORT";
        COMPONENT_TYPE[COMPONENT_TYPE["INT"] = 5124] = "INT";
        COMPONENT_TYPE[COMPONENT_TYPE["UNSIGNED_INT"] = 5125] = "UNSIGNED_INT";
        COMPONENT_TYPE[COMPONENT_TYPE["FLOAT"] = 5126] = "FLOAT";
    })(COMPONENT_TYPE || (COMPONENT_TYPE = {}));
    // type TransformationType = "rotation" | "scale" | "translation";
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    FudgeCore.shaderSources = {};
    FudgeCore.shaderSources["ShaderPhong.frag"] = /*glsl*/ `#version 300 es
/**
* Phong shading
* @authors Jirka Dell'Oro-Friedl, HFU, 2022
*/

precision mediump float;
precision highp int;

  // TEXTURE: input UVs and texture
  #if defined(TEXTURE)
in vec2 v_vctTexture;
uniform sampler2D u_texture;
  #endif

uniform vec4 u_vctColor;
uniform float u_fDiffuse;
uniform float u_fSpecular;
uniform mat4 u_mtxMeshToWorld;
uniform vec3 u_vctCamera;

in vec4 v_vctColor;
in vec4 v_vctPosition;
in vec3 v_vctNormal;
out vec4 vctFrag;

struct Light {
  vec4 vctColor;
  mat4 mtxShape;
  mat4 mtxShapeInverse;
};

const uint MAX_LIGHTS_DIRECTIONAL = 15u;
const uint MAX_LIGHTS_POINT = 100u;
const uint MAX_LIGHTS_SPOT = 100u;

layout(std140) uniform Lights {
  uint u_nLightsDirectional;
  uint u_nLightsPoint;
  uint u_nLightsSpot;
  Light u_ambient;
  Light u_directional[MAX_LIGHTS_DIRECTIONAL];
  Light u_point[MAX_LIGHTS_POINT];
  Light u_spot[MAX_LIGHTS_SPOT];
};

float calculateReflection(vec3 _vctLight, vec3 _vctView, vec3 _vctNormal, float _fSpecular) {
  if(_fSpecular <= 0.0)
    return 0.0;
  vec3 vctReflection = normalize(reflect(-_vctLight, _vctNormal));
  float fHitCamera = dot(vctReflection, _vctView);
  // attempted BLINN 
  // vec3 halfway = normalize(_vctView + _vctLight);
  // float fHitCamera = dot(-halfway, _vctNormal);
  return pow(max(fHitCamera, 0.0), _fSpecular * 10.0) * _fSpecular; // 10.0 = magic number, looks good... 
}

vec4 illuminateDirected(vec3 _vctDirection, vec3 _vctNormal, vec4 _vctColor, vec3 _vctView, float _fSpecular) {
  vec4 vctResult = vec4(0, 0, 0, 1);
  vec3 vctDirection = normalize(_vctDirection);
  float fIllumination = -dot(_vctNormal, vctDirection);
  if(fIllumination > 0.0f) {
    vctResult += u_fDiffuse * fIllumination * _vctColor;
    float fReflection = calculateReflection(vctDirection, _vctView, _vctNormal, _fSpecular);
    vctResult += fReflection * _vctColor;
  }
  return vctResult;
}

void main() {
  vctFrag = v_vctColor;
  vec3 vctView = normalize(vec3(u_mtxMeshToWorld * v_vctPosition) - u_vctCamera);

  for(uint i = 0u; i < u_nLightsDirectional; i++) {
    vec3 vctDirection = vec3(u_directional[i].mtxShape * vec4(0.0, 0.0, 1.0, 1.0));
    vctFrag += illuminateDirected(vctDirection, v_vctNormal, u_directional[i].vctColor, vctView, u_fSpecular);
  }
  // calculate point light effect
  for(uint i = 0u; i < u_nLightsPoint; i++) {
    vec3 vctPositionLight = vec3(u_point[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
    vec3 vctDirection = vec3(u_mtxMeshToWorld * v_vctPosition) - vctPositionLight;
    float fIntensity = 1.0 - length(mat3(u_point[i].mtxShapeInverse) * vctDirection);
    if(fIntensity < 0.0)
      continue;
    vctFrag += illuminateDirected(vctDirection, v_vctNormal, fIntensity * u_point[i].vctColor, vctView, u_fSpecular);
  }
  // calculate spot light effect
  for(uint i = 0u; i < u_nLightsSpot; i++) {
    vec3 vctPositionLight = vec3(u_spot[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
    vec3 vctDirection = vec3(u_mtxMeshToWorld * v_vctPosition) - vctPositionLight;
    vec3 vctDirectionInverted = mat3(u_spot[i].mtxShapeInverse) * vctDirection;
    if(vctDirectionInverted.z <= 0.0)
      continue;
    float fIntensity = 1.0 - min(1.0, 2.0 * length(vctDirectionInverted.xy) / vctDirectionInverted.z);
    fIntensity *= 1.0 - pow(vctDirectionInverted.z, 2.0);
    if(fIntensity < 0.0)
      continue;
    vctFrag += illuminateDirected(vctDirection, v_vctNormal, fIntensity * u_spot[i].vctColor, vctView, u_fSpecular);
  }

  // TEXTURE: multiply with texel color
    #if defined(TEXTURE)
  vec4 vctColorTexture = texture(u_texture, v_vctTexture);
  vctFrag *= vctColorTexture;
    #endif
}`;
    FudgeCore.shaderSources["ShaderPick.frag"] = /*glsl*/ `#version 300 es
/**
* Renders for Raycasting
* @authors Jirka Dell'Oro-Friedl, HFU, 2019
*/
precision mediump float;
precision highp int;

uniform int u_id;
uniform vec2 u_vctSize;
uniform vec4 u_vctColor;
out ivec4 vctFrag;

void main() {
    int pixel = int(trunc(gl_FragCoord.x) + u_vctSize.x * trunc(gl_FragCoord.y));

    if (pixel != u_id)
      discard;

    uint icolor = uint(u_vctColor.r * 255.0) << 24 | uint(u_vctColor.g * 255.0) << 16 | uint(u_vctColor.b * 255.0) << 8 | uint(u_vctColor.a * 255.0);
                
    vctFrag = ivec4(floatBitsToInt(gl_FragCoord.z), icolor, 0, 0);
}`;
    FudgeCore.shaderSources["ShaderPick.vert"] = /*glsl*/ `#version 300 es
/**
* Renders for Raycasting
* @authors Jirka Dell'Oro-Friedl, HFU, 2019
*/
in vec3 a_vctPosition;       
uniform mat4 u_mtxMeshToView;

void main() {   
    gl_Position = u_mtxMeshToView * vec4(a_vctPosition, 1.0);
}`;
    FudgeCore.shaderSources["ShaderPickTextured.frag"] = /*glsl*/ `#version 300 es
/**
* Renders for Raycasting
* @authors Jirka Dell'Oro-Friedl, HFU, 2019
*/
precision mediump float;
precision highp int;

uniform int u_id;
uniform vec2 u_vctSize;
in vec2 v_vctTexture;
uniform vec4 u_vctColor;
uniform sampler2D u_texture;

out ivec4 vctFrag;

void main() {
    int pixel = int(trunc(gl_FragCoord.x) + u_vctSize.x * trunc(gl_FragCoord.y));

    if (pixel != u_id)
      discard;
    
    vec4 vctColor = u_vctColor * texture(u_texture, v_vctTexture);
    uint icolor = uint(vctColor.r * 255.0) << 24 | uint(vctColor.g * 255.0) << 16 | uint(vctColor.b * 255.0) << 8 | uint(vctColor.a * 255.0);
  
  vctFrag = ivec4(floatBitsToInt(gl_FragCoord.z), icolor, floatBitsToInt(v_vctTexture.x), floatBitsToInt(v_vctTexture.y));
}`;
    FudgeCore.shaderSources["ShaderPickTextured.vert"] = /*glsl*/ `#version 300 es
/**
* Renders for Raycasting
* @authors Jirka Dell'Oro-Friedl, HFU, 2019
*/
in vec3 a_vctPosition;       
in vec2 a_vctTexture;
uniform mat4 u_mtxMeshToView;
uniform mat3 u_mtxPivot;

out vec2 v_vctTexture;

void main() {   
    gl_Position = u_mtxMeshToView * vec4(a_vctPosition, 1.0);
    v_vctTexture = vec2(u_mtxPivot * vec3(a_vctTexture, 1.0)).xy;
}`;
    FudgeCore.shaderSources["ShaderUniversal.frag"] = /*glsl*/ `#version 300 es
/**
* Universal Shader as base for many others. Controlled by compiler directives
* @authors Jirka Dell'Oro-Friedl, HFU, 2021
*/

precision mediump float;
precision highp int;

  // MINIMAL (no define needed): include base color
uniform vec4 u_vctColor;

  // FLAT: input vertex colors flat, so the third of a triangle determines the color
  #if defined(FLAT) 
flat in vec4 v_vctColor;
  // LIGHT: input vertex colors for each vertex for interpolation over the face
  #elif defined(LIGHT) || defined(PARTICLE_COLOR)
in vec4 v_vctColor;
  #endif

  // TEXTURE: input UVs and texture
  #if defined(TEXTURE) || defined(MATCAP)
in vec2 v_vctTexture;
uniform sampler2D u_texture;
  #endif

out vec4 vctFrag;

void main() {
    // MINIMAL: set the base color
  vctFrag = u_vctColor;

    // VERTEX: multiply with vertex color
    #if defined(FLAT) || defined(LIGHT) || defined(PARTICLE_COLOR)
  vctFrag *= v_vctColor;
    #endif

    // TEXTURE: multiply with texel color
    #if defined(TEXTURE) || defined(MATCAP)
  vec4 vctColorTexture = texture(u_texture, v_vctTexture);
  vctFrag *= vctColorTexture;
    #endif

    // discard pixel alltogether when transparent: don't show in Z-Buffer
  if(vctFrag.a < 0.01)
    discard;
}`;
    FudgeCore.shaderSources["ShaderUniversal.vert"] = /*glsl*/ `#version 300 es
/**
* Universal Shader as base for many others. Controlled by compiler directives
* @authors 2021, Luis Keck, HFU, 2021 | Jirka Dell'Oro-Friedl, HFU, 2021
*/

precision mediump float;
precision highp int;

  // MINIMAL (no define needed): buffers for transformation
uniform mat4 u_mtxMeshToView;
in vec3 a_vctPosition;

  // PARTICLE: offer buffer and functionality for in shader position calculation
  // CAMERA: offer buffer and functionality for specular reflection depending on the camera-position
  #if defined(CAMERA) || defined(PARTICLE)
uniform mat4 u_mtxMeshToWorld;
uniform vec3 u_vctCamera;
  #endif

  #if defined(CAMERA)
uniform float u_fSpecular;

float calculateReflection(vec3 _vctLight, vec3 _vctView, vec3 _vctNormal, float _fSpecular) {
  if(_fSpecular <= 0.0)
    return 0.0;
  vec3 vctReflection = normalize(reflect(-_vctLight, _vctNormal));
  float fHitCamera = dot(vctReflection, _vctView);
  return pow(max(fHitCamera, 0.0), _fSpecular * 10.0) * _fSpecular; // 10.0 = magic number, looks good... 
}
  #endif

  // LIGHT: offer buffers for lighting vertices with different light types
  #if defined(LIGHT)
uniform mat4 u_mtxNormalMeshToWorld;
in vec3 a_vctNormal;
uniform float u_fDiffuse;

struct Light {
  vec4 vctColor;
  mat4 mtxShape;
  mat4 mtxShapeInverse;
};

const uint MAX_LIGHTS_DIRECTIONAL = 15u;
const uint MAX_LIGHTS_POINT = 100u;
const uint MAX_LIGHTS_SPOT = 100u;

layout(std140) uniform Lights {
  uint u_nLightsDirectional;
  uint u_nLightsPoint;
  uint u_nLightsSpot;
  Light u_ambient;
  Light u_directional[MAX_LIGHTS_DIRECTIONAL];
  Light u_point[MAX_LIGHTS_POINT];
  Light u_spot[MAX_LIGHTS_SPOT];
};

vec4 illuminateDirected(vec3 _vctDirection, vec3 _vctNormal, vec4 _vctColor, vec3 _vctView, float _fSpecular) {
  vec4 vctResult = vec4(0, 0, 0, 1);
  vec3 vctDirection = normalize(_vctDirection);
  float fIllumination = -dot(_vctNormal, vctDirection);
  if(fIllumination > 0.0f) {
    vctResult += u_fDiffuse * fIllumination * _vctColor;
        #if defined(CAMERA)
    float fReflection = calculateReflection(vctDirection, _vctView, _vctNormal, _fSpecular);
    vctResult += fReflection * _vctColor;
        #endif
  }
  return vctResult;
}
  #endif 

  // TEXTURE: offer buffers for UVs and pivot matrix
  #if defined(TEXTURE)
uniform mat3 u_mtxPivot;
in vec2 a_vctTexture;
out vec2 v_vctTexture;
  #endif

  #if defined(MATCAP) // MatCap-shader generates texture coordinates from surface normals
in vec3 a_vctNormal;
uniform mat4 u_mtxNormalMeshToWorld;
uniform mat4 u_mtxWorldToCamera;
out vec2 v_vctTexture;
  #endif

  #if defined(PHONG)
out vec3 v_vctNormal;
out vec4 v_vctPosition;
  #endif

  #if defined(SKIN)
// uniform mat4 u_mtxMeshToWorld;
// Bones
// https://github.com/mrdoob/three.js/blob/dev/src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl.js
in uvec4 a_iBone;
in vec4 a_fWeight;
const uint MAX_BONES = 256u;
layout (std140) uniform Skin {
  mat4 u_bones[MAX_BONES];
};
  #endif

  // FLAT: outbuffer is flat
  #if defined(FLAT)
flat out vec4 v_vctColor;
  #elif defined(LIGHT) || defined(PARTICLE)
  // regular if not FLAT
out vec4 v_vctColor;
  #endif

  #if defined(PARTICLE)
uniform mat4 u_mtxWorldToView;
uniform float u_fParticleSystemDuration;
uniform float u_fParticleSystemSize;
uniform float u_fParticleSystemTime;
uniform sampler2D u_fParticleSystemRandomNumbers;
uniform bool u_bParticleSystemFaceCamera;
uniform bool u_bParticleSystemRestrict;

mat4 lookAt(vec3 _vctTranslation, vec3 _vctTarget) {
  vec3 vctUp = vec3(0.0, 1.0, 0.0);
  vec3 zAxis = normalize(_vctTarget - _vctTranslation);
  vec3 xAxis = normalize(cross(vctUp, zAxis));
  vec3 yAxis = u_bParticleSystemRestrict ? vctUp : normalize(cross(zAxis, xAxis));
  zAxis = u_bParticleSystemRestrict ? normalize(cross(xAxis, vctUp)) : zAxis;

  return mat4(
    xAxis.x, xAxis.y, xAxis.z, 0.0,
    yAxis.x, yAxis.y, yAxis.z, 0.0,
    zAxis.x, zAxis.y, zAxis.z, 0.0,
    _vctTranslation.x,  _vctTranslation.y,  _vctTranslation.z, 1.0
  );
}

float fetchRandomNumber(int _iIndex, int _iParticleSystemRandomNumbersSize, int _iParticleSystemRandomNumbersLength) {
  _iIndex = _iIndex % _iParticleSystemRandomNumbersLength;
  return texelFetch(u_fParticleSystemRandomNumbers, ivec2(_iIndex % _iParticleSystemRandomNumbersSize, _iIndex / _iParticleSystemRandomNumbersSize), 0).r;
}
  #endif

void main() {
  vec4 vctPosition = vec4(a_vctPosition, 1.0);

    #if defined(CAMERA) || defined(PARTICLE)
  mat4 mtxMeshToWorld = u_mtxMeshToWorld;
    #endif

    #if defined(PARTICLE)
  float fParticleId = float(gl_InstanceID);
  int iParticleSystemRandomNumbersSize = textureSize(u_fParticleSystemRandomNumbers, 0).x; // the dimension of the quadratic texture
  int iParticleSystemRandomNumbersLength = iParticleSystemRandomNumbersSize * iParticleSystemRandomNumbersSize; // the total number of texels in the texture
  /*$variables*/
  /*$mtxLocal*/
  /*$mtxWorld*/
  mtxMeshToWorld = /*$mtxWorld*/ mtxMeshToWorld /*$mtxLocal*/;
  if (u_bParticleSystemFaceCamera) 
    mtxMeshToWorld = 
      lookAt(vec3(mtxMeshToWorld[3][0], mtxMeshToWorld[3][1], mtxMeshToWorld[3][2]), u_vctCamera) * 
      mat4(
        length(vec3(mtxMeshToWorld[0][0], mtxMeshToWorld[1][0], mtxMeshToWorld[2][0])), 0.0, 0.0, 0.0,
        0.0, length(vec3(mtxMeshToWorld[0][1], mtxMeshToWorld[1][1], mtxMeshToWorld[2][1])), 0.0, 0.0,
        0.0, 0.0, length(vec3(mtxMeshToWorld[0][2], mtxMeshToWorld[1][2], mtxMeshToWorld[2][2])), 0.0,
        0.0, 0.0, 0.0, 1.0
      );
  mat4 mtxMeshToView = u_mtxWorldToView * mtxMeshToWorld;
    #else
  mat4 mtxMeshToView = u_mtxMeshToView;
    #endif

    #if defined(LIGHT) || defined(MATCAP)
  vec3 vctNormal = a_vctNormal;
      #if defined(PARTICLE)
  mat4 mtxNormalMeshToWorld = transpose(inverse(mtxMeshToWorld));
      #else
  mat4 mtxNormalMeshToWorld = u_mtxNormalMeshToWorld;
      #endif
      #if defined(LIGHT)
  v_vctColor = u_fDiffuse * u_ambient.vctColor;
      #endif
    #endif


    #if defined(SKIN)
  mat4 mtxSkin = a_fWeight.x * u_bones[a_iBone.x] +
    a_fWeight.y * u_bones[a_iBone.y] +
    a_fWeight.z * u_bones[a_iBone.z] +
    a_fWeight.w * u_bones[a_iBone.w];

  mtxMeshToView *= mtxSkin;
  mtxNormalMeshToWorld = transpose(inverse(mtxMeshToWorld * mtxSkin));
    #endif

    // calculate position and normal according to input and defines
  gl_Position = mtxMeshToView * vctPosition;

    #if defined(CAMERA) || defined(MATCAP)
  vec3 vctView = normalize(vec3(u_mtxMeshToWorld * vctPosition) - u_vctCamera);
    #endif

    #if defined(LIGHT)
  vctNormal = normalize(mat3(mtxNormalMeshToWorld) * vctNormal);
      #if defined(PHONG)
  v_vctNormal = vctNormal; // pass normal to fragment shader
  v_vctPosition = vctPosition;
      #endif  

    #if !defined(PHONG)
  // calculate directional light effect
  for(uint i = 0u; i < u_nLightsDirectional; i++) {
    vec3 vctDirection = vec3(u_directional[i].mtxShape * vec4(0.0, 0.0, 1.0, 1.0));
    v_vctColor += illuminateDirected(vctDirection, vctNormal, u_directional[i].vctColor, vctView, u_fSpecular);
  }
  // calculate point light effect
  for(uint i = 0u; i < u_nLightsPoint; i++) {
    vec3 vctPositionLight = vec3(u_point[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
    vec3 vctDirection = vec3(mtxMeshToWorld * vctPosition) - vctPositionLight;
    float fIntensity = 1.0 - length(mat3(u_point[i].mtxShapeInverse) * vctDirection);
    if(fIntensity < 0.0)
      continue;
    v_vctColor += illuminateDirected(vctDirection, vctNormal, fIntensity * u_point[i].vctColor, vctView, u_fSpecular);
  }

  // calculate spot light effect
  for(uint i = 0u; i < u_nLightsSpot; i++) {
    vec3 vctPositionLight = vec3(u_spot[i].mtxShape * vec4(0.0, 0.0, 0.0, 1.0));
    vec3 vctDirection = vec3(mtxMeshToWorld * vctPosition) - vctPositionLight;
    vec3 vctDirectionInverted = mat3(u_spot[i].mtxShapeInverse) * vctDirection;
    if(vctDirectionInverted.z <= 0.0)
      continue;
    float fIntensity = 1.0 - min(1.0, 2.0 * length(vctDirectionInverted.xy) / vctDirectionInverted.z);
    fIntensity *= 1.0 - pow(vctDirectionInverted.z, 2.0);
    if(fIntensity < 0.0)
      continue;
    v_vctColor += illuminateDirected(vctDirection, vctNormal, fIntensity * u_spot[i].vctColor, vctView, u_fSpecular);
  }
      #endif // PHONG
    #endif

    // TEXTURE: transform UVs
    #if defined(TEXTURE)
  v_vctTexture = vec2(u_mtxPivot * vec3(a_vctTexture, 1.0)).xy;
    #endif

    #if defined(MATCAP)
  vec4 vctVertexInCamera = normalize(u_mtxWorldToCamera * vctPosition);
  vctVertexInCamera.xy *= -1.0;
  mat4 mtx_RotX = mat4(1, 0, 0, 0, 0, vctVertexInCamera.z, vctVertexInCamera.y, 0, 0, -vctVertexInCamera.y, vctVertexInCamera.z, 0, 0, 0, 0, 1);
  mat4 mtx_RotY = mat4(vctVertexInCamera.z, 0, -vctVertexInCamera.x, 0, 0, 1, 0, 0, vctVertexInCamera.x, 0, vctVertexInCamera.z, 0, 0, 0, 0, 1);

  vctNormal = mat3(u_mtxNormalMeshToWorld) * a_vctNormal;

  // adds correction for things being far and to the side, but distortion for things being close
  vctNormal = mat3(mtx_RotX * mtx_RotY) * vctNormal;
  
  vec3 vctReflection = normalize(mat3(u_mtxWorldToCamera) * normalize(vctNormal));
  vctReflection.y = -vctReflection.y;

  v_vctTexture = 0.5 * vctReflection.xy + 0.5;
    #endif

    #if defined(PARTICLE_COLOR)
  vec4 vctParticleColor = /*$color*/;
      #if defined(LIGHT)
  v_vctColor *= vctParticleColor;
  v_vctColor.a = vctParticleColor.a;
      #else
  v_vctColor = vctParticleColor;
      #endif
    #else
    // always full opacity for now...
      #if defined(LIGHT)
    v_vctColor.a = 1.0;
      #endif
    #endif
}`;
})(FudgeCore || (FudgeCore = {}));
// / <reference path="../Coat/Coat.ts"/>
var FudgeCore;
// / <reference path="../Coat/Coat.ts"/>
(function (FudgeCore) {
    var Shader_1;
    /**
     * Static superclass for the representation of WebGl shaderprograms.
     * @authors Jascha Karag√∂l, HFU, 2019 | Jirka Dell'Oro-Friedl, HFU, 2019
     */
    // TODO: define attribute/uniforms as layout and use those consistently in shaders
    let Shader = Shader_1 = class Shader {
        /** The type of coat that can be used with this shader to create a material */
        static getCoat() { return FudgeCore.CoatColored; }
        static getVertexShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderUniversal.vert"], this.define);
        }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderUniversal.frag"], this.define);
        }
        static deleteProgram() { }
        static useProgram() { }
        static createProgram() { }
        static registerSubclass(_subclass) { return Shader_1.subclasses.push(_subclass) - 1; }
        // replace the mandatory header of the shader with itself plus the definitions given
        static insertDefines(_shader, _defines) {
            if (!_defines)
                return _shader;
            let code = `#version 300 es\n`;
            for (let define of _defines)
                code += `#define ${define}\n`;
            return _shader.replace("#version 300 es", code);
        }
    };
    /** refers back to this class from any subclass e.g. in order to find compatible other resources*/
    Shader.baseClass = Shader_1;
    /** list of all the subclasses derived from this class, if they registered properly*/
    Shader.subclasses = [];
    Shader = Shader_1 = __decorate([
        FudgeCore.RenderInjectorShader.decorate
    ], Shader);
    FudgeCore.Shader = Shader;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderFlat extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    ShaderFlat.iSubclass = FudgeCore.Shader.registerSubclass(ShaderFlat);
    ShaderFlat.define = [
        "LIGHT",
        "FLAT",
        "CAMERA"
    ];
    FudgeCore.ShaderFlat = ShaderFlat;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderFlatSkin extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    ShaderFlatSkin.iSubclass = FudgeCore.Shader.registerSubclass(ShaderFlatSkin);
    ShaderFlatSkin.define = [
        "LIGHT",
        "FLAT",
        "SKIN",
        "CAMERA"
    ];
    FudgeCore.ShaderFlatSkin = ShaderFlatSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderFlatTextured extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    ShaderFlatTextured.iSubclass = FudgeCore.Shader.registerSubclass(ShaderFlatTextured);
    ShaderFlatTextured.define = [
        "LIGHT",
        "FLAT",
        "TEXTURE",
        "CAMERA"
    ];
    FudgeCore.ShaderFlatTextured = ShaderFlatTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderFlatTexturedSkin extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    ShaderFlatTexturedSkin.iSubclass = FudgeCore.Shader.registerSubclass(ShaderFlatTexturedSkin);
    ShaderFlatTexturedSkin.define = [
        "LIGHT",
        "FLAT",
        "TEXTURE",
        "CAMERA",
        "SKIN"
    ];
    FudgeCore.ShaderFlatTexturedSkin = ShaderFlatTexturedSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGouraud extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    ShaderGouraud.iSubclass = FudgeCore.Shader.registerSubclass(ShaderGouraud);
    ShaderGouraud.define = [
        "LIGHT",
        "CAMERA"
    ];
    FudgeCore.ShaderGouraud = ShaderGouraud;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGouraudSkin extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissive; }
    }
    ShaderGouraudSkin.iSubclass = FudgeCore.Shader.registerSubclass(ShaderGouraudSkin);
    ShaderGouraudSkin.define = [
        "LIGHT",
        "SKIN",
        "CAMERA"
    ];
    FudgeCore.ShaderGouraudSkin = ShaderGouraudSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGouraudTextured extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    ShaderGouraudTextured.iSubclass = FudgeCore.Shader.registerSubclass(ShaderGouraudTextured);
    ShaderGouraudTextured.define = [
        "LIGHT",
        "TEXTURE",
        "CAMERA"
    ];
    FudgeCore.ShaderGouraudTextured = ShaderGouraudTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderGouraudTexturedSkin extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
    }
    ShaderGouraudTexturedSkin.iSubclass = FudgeCore.Shader.registerSubclass(ShaderGouraudTexturedSkin);
    ShaderGouraudTexturedSkin.define = [
        "LIGHT",
        "TEXTURE",
        "CAMERA",
        "SKIN"
    ];
    FudgeCore.ShaderGouraudTexturedSkin = ShaderGouraudTexturedSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderLit extends FudgeCore.Shader {
    }
    ShaderLit.iSubclass = FudgeCore.Shader.registerSubclass(ShaderLit);
    ShaderLit.define = [];
    FudgeCore.ShaderLit = ShaderLit;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderLitSkin extends FudgeCore.Shader {
    }
    ShaderLitSkin.iSubclass = FudgeCore.Shader.registerSubclass(ShaderLitSkin);
    ShaderLitSkin.define = [
        "SKIN"
    ];
    FudgeCore.ShaderLitSkin = ShaderLitSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderLitTextured extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatTextured; }
    }
    ShaderLitTextured.iSubclass = FudgeCore.Shader.registerSubclass(ShaderLitTextured);
    ShaderLitTextured.define = [
        "TEXTURE"
    ];
    FudgeCore.ShaderLitTextured = ShaderLitTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderLitTexturedSkin extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatTextured; }
    }
    ShaderLitTexturedSkin.iSubclass = FudgeCore.Shader.registerSubclass(ShaderLitTexturedSkin);
    ShaderLitTexturedSkin.define = [
        "TEXTURE",
        "SKIN"
    ];
    FudgeCore.ShaderLitTexturedSkin = ShaderLitTexturedSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderMatCap extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatTextured; }
    }
    ShaderMatCap.iSubclass = FudgeCore.Shader.registerSubclass(ShaderMatCap);
    ShaderMatCap.define = [
        "MATCAP",
        "CAMERA"
    ];
    FudgeCore.ShaderMatCap = ShaderMatCap;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhong extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissive; }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPhong.frag"], this.define);
        }
    }
    ShaderPhong.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhong);
    ShaderPhong.define = [
        "LIGHT",
        "CAMERA",
        "PHONG"
    ];
    FudgeCore.ShaderPhong = ShaderPhong;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhongSkin extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissive; }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPhong.frag"], this.define);
        }
    }
    ShaderPhongSkin.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhongSkin);
    ShaderPhongSkin.define = [
        "LIGHT",
        "CAMERA",
        "PHONG",
        "SKIN"
    ];
    FudgeCore.ShaderPhongSkin = ShaderPhongSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhongTextured extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPhong.frag"], this.define);
        }
    }
    ShaderPhongTextured.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhongTextured);
    ShaderPhongTextured.define = [
        "LIGHT",
        "CAMERA",
        "PHONG",
        "TEXTURE"
    ];
    FudgeCore.ShaderPhongTextured = ShaderPhongTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPhongTexturedSkin extends FudgeCore.Shader {
        static getCoat() { return FudgeCore.CoatRemissiveTextured; }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPhong.frag"], this.define);
        }
    }
    ShaderPhongTexturedSkin.iSubclass = FudgeCore.Shader.registerSubclass(ShaderPhongTexturedSkin);
    ShaderPhongTexturedSkin.define = [
        "LIGHT",
        "CAMERA",
        "PHONG",
        "TEXTURE",
        "SKIN"
    ];
    FudgeCore.ShaderPhongTexturedSkin = ShaderPhongTexturedSkin;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPick extends FudgeCore.Shader {
        static getVertexShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPick.vert"], this.define);
        }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPick.frag"], this.define);
        }
    }
    ShaderPick.define = [];
    FudgeCore.ShaderPick = ShaderPick;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class ShaderPickTextured extends FudgeCore.Shader {
        static getVertexShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPickTextured.vert"], this.define);
        }
        static getFragmentShaderSource() {
            return this.insertDefines(FudgeCore.shaderSources["ShaderPickTextured.frag"], this.define);
        }
    }
    ShaderPickTextured.define = [];
    FudgeCore.ShaderPickTextured = ShaderPickTextured;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A skeleton is an extension of {@link Graph}. The skeleton represents the root bone while its descendant {@link Node}s in the hierarchy make up the other bones.
     * Like the Graph it serves as a template for {@link SkeletonInstance}s.
     */
    class Skeleton extends FudgeCore.Graph {
        /**
         * Creates a new skeleton with a name
         */
        constructor(_name = "Skeleton") {
            super(_name);
            this.bones = {};
            this.mtxBindInverses = {};
            /**
             * Deregisters all bones of a removed node
             */
            this.hndChildRemove = (_event) => {
                if (_event.currentTarget != this)
                    return;
                for (const node of _event.target)
                    if (this.bones[node.name]) {
                        delete this.bones[node.name];
                        delete this.mtxBindInverses[node.name];
                    }
            };
            this.registerBone(this);
            this.addEventListener("childRemove" /* CHILD_REMOVE */, this.hndChildRemove);
        }
        /**
         * Appends a node to this skeleton or the given parent and registers it as a bone
         * @param _mtxInit initial local matrix
         * @param _parentName name of the parent node, that must be registered as a bone
         */
        addBone(_bone, _parentName, _mtxInit) {
            if (_parentName)
                this.bones[_parentName].addChild(_bone);
            else
                this.addChild(_bone);
            if (!_bone.cmpTransform)
                _bone.addComponent(new FudgeCore.ComponentTransform());
            if (_mtxInit)
                _bone.mtxLocal.set(_mtxInit);
            this.calculateMtxWorld(_bone);
            this.registerBone(_bone);
        }
        /**
         * Registers a node as a bone with its bind inverse matrix
         * @param _bone the node to be registered, that should be a descendant of this skeleton
         * @param _mtxBindInverse a precalculated inverse matrix of the bind pose from the bone
         */
        registerBone(_bone, _mtxBindInverse = _bone.mtxWorldInverse) {
            this.bones[_bone.name] = _bone;
            this.mtxBindInverses[_bone.name] = _mtxBindInverse;
        }
        /**
         * Sets the current state of this skeleton as the default pose
         * by updating the inverse bind matrices
         */
        setDefaultPose() {
            for (const node of this) {
                if (!(node.name in this.mtxBindInverses))
                    continue;
                this.calculateMtxWorld(node);
                this.mtxBindInverses[node.name] = node.mtxWorldInverse;
            }
        }
        indexOfBone(_boneName) {
            let index = 0;
            for (const boneName in this.bones) {
                if (_boneName == boneName)
                    return index;
                index++;
            }
            return -1;
        }
        serialize() {
            const serialization = super.serialize();
            serialization.mtxBindInverses = {};
            for (const boneName in this.mtxBindInverses)
                serialization.mtxBindInverses[boneName] = this.mtxBindInverses[boneName].serialize();
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            for (const node of this)
                if (_serialization.mtxBindInverses[node.name])
                    this.registerBone(node, await new FudgeCore.Matrix4x4().deserialize(_serialization.mtxBindInverses[node.name]));
            return this;
        }
        /**
         * Calculates and sets the world matrix of a bone relative to its parent
         */
        calculateMtxWorld(_node) {
            _node.mtxWorld.set(_node.cmpTransform ?
                FudgeCore.Matrix4x4.MULTIPLICATION(_node.getParent().mtxWorld, _node.mtxLocal) :
                _node.getParent().mtxWorld);
            _node.mtxWorldInverse.set(FudgeCore.Matrix4x4.INVERSION(_node.mtxWorld));
        }
    }
    FudgeCore.Skeleton = Skeleton;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * An instance of a {@link Skeleton}.
     * It holds all the information needed to animate itself. Referenced from a {@link ComponentMesh} it can be associated with a {@link MeshSkin} and enable skeleton animation for the mesh.
     * As an extension of {@link GraphInstance} it also keeps a reference to its resource and can thus optimize serialization.
     */
    class SkeletonInstance extends FudgeCore.GraphInstance {
        #bones;
        #mtxBoneLocals;
        #mtxBones;
        #mtxBonesUpdated;
        static async CREATE(_skeleton) {
            const skeleton = new SkeletonInstance();
            await skeleton.set(_skeleton);
            return skeleton;
        }
        get bones() {
            return this.#bones;
        }
        get mtxBoneLocals() {
            return this.#mtxBoneLocals;
        }
        /**
         * Gets the bone transformations for a vertex
         */
        get mtxBones() {
            if (this.#mtxBonesUpdated != this.timestampUpdate) {
                this.calculateMtxBones();
                this.#mtxBonesUpdated = this.timestampUpdate;
            }
            return this.#mtxBones;
        }
        /**
         * Set this skeleton instance to be a recreation of the {@link Skeleton} given
         */
        async set(_skeleton) {
            await super.set(_skeleton);
            this.skeletonSource = _skeleton;
            this.registerBones();
        }
        serialize() {
            const serialization = super.serialize();
            if (this.bindPose) {
                serialization.bindPose = {};
                for (const boneName in this.bindPose)
                    serialization.bindPose[boneName] = this.bindPose[boneName].serialize();
            }
            return serialization;
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization);
            this.skeletonSource = FudgeCore.Project.resources[_serialization.idSource || _serialization.idResource];
            this.registerBones();
            if (_serialization.bindPose) {
                this.bindPose = {};
                for (const boneName in _serialization.bindPose)
                    this.bindPose[boneName] = await new FudgeCore.Matrix4x4().deserialize(_serialization.bindPose[boneName]);
            }
            return this;
        }
        /**
         * Resets this skeleton instance to its default pose
         */
        resetPose() {
            for (const boneName in this.bones)
                this.bones[boneName].mtxLocal.set(FudgeCore.Matrix4x4.INVERSION(this.skeletonSource.mtxBindInverses[boneName]));
        }
        applyAnimation(_mutator) {
            super.applyAnimation(_mutator);
            if (_mutator.mtxBoneLocals)
                for (const boneName in _mutator.mtxBoneLocals) // shortcut to mutate the local matrix of a bone, bypassing the hierarchy
                    this.mtxBoneLocals[boneName]?.mutate(_mutator.mtxBoneLocals[boneName]);
            if (_mutator.bones)
                for (const boneName in _mutator.bones)
                    this.bones[boneName]?.applyAnimation(_mutator.bones[boneName]);
        }
        calculateMtxBones() {
            this.#mtxBones = [];
            for (const boneName in this.bones) {
                // bone matrix T = N^-1 * B_delta * B_0^-1 * S
                const mtxBone = this.getParent()?.mtxWorldInverse.clone || FudgeCore.Matrix4x4.IDENTITY();
                // if (this.mtxPivot) mtxBone.multiply(this.mtxPivot);
                mtxBone.multiply(this.bones[boneName].mtxWorld);
                mtxBone.multiply(this.skeletonSource.mtxBindInverses[boneName]);
                // if (this.mtxPivot) mtxBone.multiply(Matrix4x4.INVERSION(this.mtxPivot));
                this.#mtxBones.push(mtxBone);
            }
        }
        registerBones() {
            this.#bones = {};
            this.#mtxBoneLocals = {};
            for (const node of this)
                if (this.skeletonSource.mtxBindInverses[node.name]) {
                    this.bones[node.name] = node;
                    this.mtxBoneLocals[node.name] = node.mtxLocal;
                }
        }
    }
    FudgeCore.SkeletonInstance = SkeletonInstance;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    let MIPMAP;
    (function (MIPMAP) {
        MIPMAP[MIPMAP["CRISP"] = 0] = "CRISP";
        MIPMAP[MIPMAP["MEDIUM"] = 1] = "MEDIUM";
        MIPMAP[MIPMAP["BLURRY"] = 2] = "BLURRY";
    })(MIPMAP = FudgeCore.MIPMAP || (FudgeCore.MIPMAP = {}));
    /**
     * Baseclass for different kinds of textures.
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    let Texture = class Texture extends FudgeCore.Mutable {
        constructor(_name = "Texture") {
            super();
            this.idResource = undefined;
            this.mipmap = MIPMAP.CRISP;
            this.name = _name;
        }
        useRenderData() { }
        refresh() {
            this.renderData = null;
        }
        //#region Transfer
        serialize() {
            let serialization = {
                idResource: this.idResource,
                name: this.name,
                mipmap: MIPMAP[this.mipmap]
            };
            return serialization;
        }
        async deserialize(_serialization) {
            FudgeCore.Project.register(this, _serialization.idResource);
            this.name = _serialization.name;
            this.mipmap = MIPMAP[_serialization.mipmap];
            return this;
        }
        getMutatorAttributeTypes(_mutator) {
            let types = super.getMutatorAttributeTypes(_mutator);
            if (types.mipmap)
                types.mipmap = MIPMAP;
            return types;
        }
        reduceMutator(_mutator) {
            delete _mutator.idResource;
        }
    };
    Texture = __decorate([
        FudgeCore.RenderInjectorTexture.decorate
    ], Texture);
    FudgeCore.Texture = Texture;
    /**
     * Texture created from an existing image
     */
    class TextureImage extends Texture {
        constructor(_url) {
            super();
            this.image = null;
            if (_url) {
                this.load(_url);
                this.name = _url.toString().split("/").pop();
            }
            FudgeCore.Project.register(this);
        }
        get texImageSource() {
            return this.image;
        }
        /**
         * Asynchronously loads the image from the given url
         */
        async load(_url) {
            this.url = _url;
            this.image = new Image();
            // const response: Response = await window.fetch(this.url);
            // const blob: Blob = await response.blob();
            // let objectURL: string = URL.createObjectURL(blob);
            // this.image.src = objectURL;
            return new Promise((resolve, reject) => {
                this.image.addEventListener("load", () => {
                    this.renderData = null; // refresh render data on next draw call
                    resolve();
                });
                this.image.addEventListener("error", () => reject());
                this.image.src = new URL(this.url.toString(), FudgeCore.Project.baseURL).toString();
            });
        }
        //#region Transfer
        serialize() {
            return {
                url: this.url,
                type: this.type,
                [super.constructor.name]: super.serialize()
            };
        }
        async deserialize(_serialization) {
            await super.deserialize(_serialization[super.constructor.name]);
            await this.load(_serialization.url);
            // this.type is an accessor of Mutable doesn't need to be deserialized
            return this;
        }
        async mutate(_mutator) {
            if (_mutator.url != this.url.toString())
                await this.load(_mutator.url);
            // except url from mutator for further processing
            delete (_mutator.url);
            super.mutate(_mutator);
            // TODO: examine necessity to reconstruct, if mutator is kept by caller
            // _mutator.url = this.url; 
        }
    }
    FudgeCore.TextureImage = TextureImage;
    /**
     * Texture created from a canvas
     */
    class TextureBase64 extends Texture {
        constructor(_name, _base64, _mipmap = MIPMAP.CRISP) {
            super(_name);
            this.image = new Image();
            this.image.src = _base64;
            this.mipmap = _mipmap;
        }
        get texImageSource() {
            return this.image;
        }
    }
    FudgeCore.TextureBase64 = TextureBase64;
    class TextureCanvas extends Texture {
        constructor(_name, _crc2) {
            super(_name);
            this.crc2 = _crc2;
        }
        get texImageSource() {
            return this.crc2.canvas;
        }
    }
    FudgeCore.TextureCanvas = TextureCanvas;
    /**
     * Texture created from a FUDGE-Sketch
     */
    class TextureSketch extends TextureCanvas {
        get texImageSource() {
            return null;
        }
    }
    FudgeCore.TextureSketch = TextureSketch;
    /**
     * Texture created from an HTML-page
     */
    class TextureHTML extends TextureCanvas {
        get texImageSource() {
            return null;
        }
    }
    FudgeCore.TextureHTML = TextureHTML;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    class TextureDefault extends FudgeCore.TextureBase64 {
        static get() {
            return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAYAAACAvzbMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAADWLSURBVHhe7d0HnFTlvf/xH9uXZYGl9yrSRJpEUexYsJIba8Re498WNcZEb+41epOIsWs0Niyxm2g0duwaewO7oqJCAGnSt7H/8304B4dldpk5Z3b3zO7nzeu85pwzM8vMs7PPb35PO61qPBZjrVq18vfiKebFR/lFRPlFQ/lFE/fyy/FvAQBICwEEABAKAQQAEAp9IBHRhhoN5RcN5RdNSyg//YzCwkJr3bq1O169erXbMoEAEhF/wNFQftFQftE09/LLzc21Ll262E9+8hMbP368VVdX2+uvv27Tp093QSTq+yeARMQfcDSUXzSUXzTNtfxycnKspKTEBg0aZEceeaQdeuihtmLFCvvss89s3rx59vjjj9vDDz8cOROJHECqqqps9uzZtmzZMlu5cqVLldq1a2d9+/Z1+1HxAYyG8ouG8ouG8osmTPnl5+db9+7dbffdd7dTTz3V1cXvvvuuvfzyyy4DkVWrVtmNN95oS5YsccdhhQ4g5eXl9uyzz9qMGTNszZo1/tkfKQIq+u29995WWlrqn00fH8BoKL9oKL9oKL9o0ik/PbZNmza2xRZb2HHHHWeTJ0+2hQsX2pNPPmmLFy/2H7XOf/7zH7v11ltdPR5FqACyYMECu+eee1KKXmvXrrX99tvPRo8e7YJKuvgARkP5RROUnz67+iKUl5dnlZWVtnz58li8dj5/0TSn8lOT1b777msXXHCBde7c2V577TV78803k77Hb7/91u644w6rqKjwz4STdgBRtqHUJ4hoChCffPKJffXVV649rX379jZgwAC3BZQuTZo0ybbbbjuXXqWDD2A0lF80Qfl17NjRjjnmGOvUqZN988039sADD7gvUk39+vn8RdOcyq9r1642depU23rrre3RRx91X3JEdbSasIqLi23YsGHuXKYCSNopgXrvg+Ch/o/77rvPvVi9+J///Od29NFH29ChQ90LDGj4mNIlBZm4/8LQssycOdM1xb766qtJm2JF2UfPnj3t17/+tU2YMMF23XVXO/bYY11QQfM1f/58u+mmm1zfgfp44071sV6zPstB8FA9rC/8Tz31lOsXybS0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";
        }
    }
    TextureDefault.texture = new TextureDefault("TextureDefault", TextureDefault.get(), FudgeCore.MIPMAP.MEDIUM);
    FudgeCore.TextureDefault = TextureDefault;
})(FudgeCore || (FudgeCore = {}));
// /<reference path="../Event/Event.ts"/>
// /<reference path="../Time/Time.ts"/>
var FudgeCore;
// /<reference path="../Event/Event.ts"/>
// /<reference path="../Time/Time.ts"/>
(function (FudgeCore) {
    /**
     * Determines the mode a loop runs in
     */
    let LOOP_MODE;
    (function (LOOP_MODE) {
        /** Loop cycles controlled by window.requestAnimationFrame */
        LOOP_MODE["FRAME_REQUEST"] = "frameRequest";
        /** Loop cycles controlled by xrSession.requestAnimationFrame */
        LOOP_MODE["FRAME_REQUEST_XR"] = "frameRequestXR";
        /** Loop cycles with the given framerate in {@link Time.game} */
        LOOP_MODE["TIME_GAME"] = "timeGame";
        /** Loop cycles with the given framerate in realtime, independent of {@link Time.game} */
        LOOP_MODE["TIME_REAL"] = "timeReal";
    })(LOOP_MODE = FudgeCore.LOOP_MODE || (FudgeCore.LOOP_MODE = {}));
    /**
     * Core loop of a FUDGE application. Initializes automatically and must be started explicitly.
     * It then fires {@link EVENT.LOOP_FRAME} to all added listeners at each frame
     *
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Loop extends FudgeCore.EventTargetStatic {
        /** The gametime the loop was started, overwritten at each start */
        static get timeStartGame() { return Loop.∆íTimeStartGame; }
        /** The realtime the loop was started, overwritten at each start */
        static get timeStartReal() { return Loop.∆íTimeStartReal; }
        /** The gametime elapsed since the last loop cycle */
        static get timeFrameGame() { return Loop.∆íTimeFrameGame; }
        /** The realtime elapsed since the last loop cycle */
        static get timeFrameReal() { return Loop.∆íTimeFrameReal; }
        /** The gametime the last loop cycle started*/
        static get timeFrameStartGame() { return Loop.∆íTimeFrameStartGame; }
        /** The realtime the last loop cycle started*/
        static get timeFrameStartReal() { return Loop.∆íTimeFrameStartReal; }
        /** The average number of frames per second in gametime */
        static get fpsGameAverage() { return 1000 / Loop.∆íTimeLastFrameGameAvg; }
        /** The average number of frames per second in realtime */
        static get fpsRealAverage() { return 1000 / Loop.∆íTimeLastFrameRealAvg; }
        /** The number of frames triggered so far */
        static get frames() { return Loop.∆íFrames; }
        /**
         * Starts the loop with the given mode and fps.
         * The default for _mode is FRAME_REQUEST, see {@link LOOP_MODE}, hooking the loop to the browser's animation frame.
         * Is only applicable in TIME-modes.
         * _syncWithAnimationFrame is experimental and only applicable in TIME-modes, deferring the loop-cycle until the next possible animation frame.
         */
        static start(_mode = LOOP_MODE.FRAME_REQUEST, _fps = 60, _syncWithAnimationFrame = false) {
            Loop.stop();
            Loop.∆íTimeStartGame = FudgeCore.Time.game.get();
            Loop.∆íTimeStartReal = performance.now();
            Loop.∆íTimeFrameStartGame = Loop.∆íTimeStartGame;
            Loop.∆íTimeFrameStartReal = Loop.∆íTimeStartReal;
            Loop.fpsDesired = (_mode == LOOP_MODE.FRAME_REQUEST) ? 60 : _fps;
            Loop.framesToAverage = Loop.fpsDesired;
            Loop.∆íTimeLastFrameGameAvg = Loop.∆íTimeLastFrameRealAvg = 1000 / Loop.fpsDesired;
            Loop.mode = _mode;
            Loop.syncWithAnimationFrame = _syncWithAnimationFrame;
            let log = `Loop starting in mode ${Loop.mode}`;
            if (Loop.mode != LOOP_MODE.FRAME_REQUEST)
                log += ` with attempted ${_fps} fps`;
            FudgeCore.Debug.fudge(log);
            switch (_mode) {
                case LOOP_MODE.FRAME_REQUEST:
                    Loop.loopFrame();
                    break;
                case LOOP_MODE.FRAME_REQUEST_XR:
                    Loop.loopFrameXR();
                    break;
                case LOOP_MODE.TIME_REAL:
                    Loop.idIntervall = window.setInterval(Loop.loopTime, 1000 / Loop.fpsDesired);
                    Loop.loopTime();
                    break;
                case LOOP_MODE.TIME_GAME:
                    Loop.idIntervall = FudgeCore.Time.game.setTimer(1000 / Loop.fpsDesired, 0, Loop.loopTime);
                    Loop.loopTime();
                    break;
                default:
                    break;
            }
            Loop.running = true;
        }
        /**
         * Stops the loop
         */
        static stop() {
            if (!Loop.running)
                return;
            switch (Loop.mode) {
                case LOOP_MODE.FRAME_REQUEST:
                    window.cancelAnimationFrame(Loop.idRequest);
                    break;
                case LOOP_MODE.FRAME_REQUEST_XR:
                    FudgeCore.XRViewport.default.session.cancelAnimationFrame(Loop.idRequest);
                    FudgeCore.XRViewport.default.session = null;
                    break;
                case LOOP_MODE.TIME_REAL:
                    window.clearInterval(Loop.idIntervall);
                    window.cancelAnimationFrame(Loop.idRequest);
                    break;
                case LOOP_MODE.TIME_GAME:
                    FudgeCore.Time.game.deleteTimer(Loop.idIntervall);
                    window.cancelAnimationFrame(Loop.idRequest);
                    break;
                default:
                    break;
            }
            Loop.running = false;
            FudgeCore.Debug.fudge("Loop stopped!");
        }
        static continue() {
            if (Loop.running)
                return;
            Loop.start(Loop.mode, Loop.fpsDesired, Loop.syncWithAnimationFrame);
        }
        static loop() {
            let time;
            time = performance.now();
            Loop.∆íTimeFrameReal = time - Loop.∆íTimeFrameStartReal;
            Loop.∆íTimeFrameStartReal = time;
            time = FudgeCore.Time.game.get();
            Loop.∆íTimeFrameGame = time - Loop.∆íTimeFrameStartGame;
            Loop.∆íTimeFrameStartGame = time;
            Loop.∆íTimeLastFrameGameAvg = ((Loop.framesToAverage - 1) * Loop.∆íTimeLastFrameGameAvg + Loop.∆íTimeFrameGame) / Loop.framesToAverage;
            Loop.∆íTimeLastFrameRealAvg = ((Loop.framesToAverage - 1) * Loop.∆íTimeLastFrameRealAvg + Loop.∆íTimeFrameReal) / Loop.framesToAverage;
            // TODO: consider LoopEvent which conveys information such as timeElapsed etc...
            Loop.∆íFrames++;
            let event = new Event("loopFrame" /* LOOP_FRAME */);
            Loop.targetStatic.dispatchEvent(event);
        }
        static loopFrame() {
            Loop.loop();
            Loop.idRequest = window.requestAnimationFrame(Loop.loopFrame);
        }
        static loopFrameXR(_time = null, _xrFrame = null) {
            Loop.loop();
            FudgeCore.XRViewport.default.draw(true, _xrFrame);
            Loop.idRequest = FudgeCore.XRViewport.default.session.requestAnimationFrame(Loop.loopFrameXR);
        }
        static loopTime() {
            if (Loop.syncWithAnimationFrame)
                Loop.idRequest = window.requestAnimationFrame(Loop.loop);
            else
                Loop.loop();
        }
    }
    Loop.∆íTimeStartGame = 0;
    Loop.∆íTimeStartReal = 0;
    Loop.∆íTimeFrameGame = 0;
    Loop.∆íTimeFrameReal = 0;
    Loop.∆íTimeFrameStartGame = 0;
    Loop.∆íTimeFrameStartReal = 0;
    Loop.∆íTimeLastFrameGameAvg = 0;
    Loop.∆íTimeLastFrameRealAvg = 0;
    Loop.∆íFrames = 0;
    Loop.running = false;
    Loop.mode = LOOP_MODE.FRAME_REQUEST;
    Loop.idIntervall = 0;
    Loop.idRequest = 0;
    Loop.fpsDesired = 30;
    Loop.framesToAverage = 30;
    Loop.syncWithAnimationFrame = false;
    FudgeCore.Loop = Loop;
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * Instances of this class generate a timestamp that correlates with the time elapsed since the start of the program but allows for resetting and scaling.
     * Supports {@link Timer}s similar to window.setInterval but with respect to the scaled time.
     * All time values are given in milliseconds
     *
     * @authors Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Time extends FudgeCore.EventTargetUnified {
        constructor() {
            super();
            this.timers = {};
            this.idTimerAddedLast = 0;
            this.start = performance.now();
            this.scale = 1.0;
            this.offset = 0.0;
            this.lastCallToElapsed = 0.0;
        }
        /**
         * Returns representions of the time given in milliseconds in various formats defined in {@link TimeUnits}
         */
        static getUnits(_milliseconds) {
            let units = {};
            units.asSeconds = _milliseconds / 1000;
            units.asMinutes = units.asSeconds / 60;
            units.asHours = units.asMinutes / 60;
            units.hours = Math.floor(units.asHours);
            units.minutes = Math.floor(units.asMinutes) % 60;
            units.seconds = Math.floor(units.asSeconds) % 60;
            units.fraction = _milliseconds % 1000;
            units.thousands = _milliseconds % 10;
            units.hundreds = _milliseconds % 100 - units.thousands;
            units.tenths = units.fraction - units.hundreds - units.thousands;
            return units;
        }
        //#region Get/Set time and scaling
        /**
         * Retrieves the current scaled timestamp of this instance in milliseconds
         */
        get() {
            return this.offset + this.scale * (performance.now() - this.start);
        }
        /**
         * Returns the remaining time to the given point of time
         */
        getRemainder(_to) {
            return _to - this.get();
        }
        /**
         * (Re-) Sets the timestamp of this instance
         * @param _time The timestamp to represent the current time (default 0.0)
         */
        set(_time = 0) {
            this.offset = _time;
            this.start = performance.now();
            this.getElapsedSincePreviousCall();
        }
        /**
         * Sets the scaling of this time, allowing for slowmotion (<1) or fastforward (>1)
         * @param _scale The desired scaling (default 1.0)
         */
        setScale(_scale = 1.0) {
            this.set(this.get());
            this.scale = _scale;
            //TODO: catch scale=0
            this.rescaleAllTimers();
            this.getElapsedSincePreviousCall();
            this.dispatchEvent(new Event("timeScaled" /* TIME_SCALED */));
        }
        /**
         * Retrieves the current scaling of this time
         */
        getScale() {
            return this.scale;
        }
        /**
         * Retrieves the offset of this time
         */
        getOffset() {
            return this.offset;
        }
        /**
         * Retrieves the scaled time in milliseconds passed since the last call to this method
         * Automatically reset at every call to set(...) and setScale(...)
         */
        getElapsedSincePreviousCall() {
            let current = this.get();
            let elapsed = current - this.lastCallToElapsed;
            this.lastCallToElapsed = current;
            return elapsed;
        }
        //#endregion
        //#region Timers
        /**
         * Returns a Promise<void> to be resolved after the time given. To be used with async/await
         */
        delay(_lapse) {
            return new Promise(_resolve => this.setTimer(_lapse, 1, () => _resolve()));
        }
        // TODO: examine if web-workers would enhance performance here!
        /**
         * Stops and deletes all {@link Timer}s attached. Should be called before this Time-object leaves scope
         */
        clearAllTimers() {
            for (let id in this.timers) {
                this.deleteTimer(Number(id));
            }
        }
        /**
         * Deletes {@link Timer} found using the internal id of the connected interval-object
         * @param _id
         */
        deleteTimerByItsInternalId(_id) {
            for (let id in this.timers) {
                let timer = this.timers[id];
                if (timer.id == _id) {
                    timer.clear();
                    delete this.timers[id];
                    // TODO: check if an early out is OK here... should be!
                }
            }
        }
        /**
         * Installs a timer at this time object
         * @param _lapse The object-time to elapse between the calls to _callback
         * @param _count The number of calls desired, 0 = Infinite
         * @param _handler The function to call each the given lapse has elapsed
         * @param _arguments Additional parameters to pass to callback function
         */
        setTimer(_lapse, _count, _handler, ..._arguments) {
            // tslint:disable-next-line: no-unused-expression
            new FudgeCore.Timer(this, _lapse, _count, _handler, _arguments);
            //this.addTimer(timer);
            return this.idTimerAddedLast;
        }
        /**
         * This method is called internally by {@link Time} and {@link Timer} and must not be called otherwise
         */
        addTimer(_timer) {
            this.timers[++this.idTimerAddedLast] = _timer;
            return this.idTimerAddedLast;
        }
        /**
         * Deletes the timer with the id given by this time object
         */
        deleteTimer(_id) {
            let timer = this.timers[_id];
            if (!timer)
                return;
            timer.clear();
            delete this.timers[_id];
        }
        /**
         * Returns a reference to the timer with the given id or null if not found.
         */
        getTimer(_id) {
            return this.timers[_id];
        }
        /**
         * Returns a copy of the list of timers currently installed on this time object
         */
        getTimers() {
            let result = {};
            return Object.assign(result, this.timers);
        }
        /**
         * Returns true if there are {@link Timers} installed to this
         */
        hasTimers() {
            return (Object.keys(this.timers).length > 0);
        }
        /**
         * Recreates {@link Timer}s when scaling changes
         */
        rescaleAllTimers() {
            for (let id in this.timers) {
                let timer = this.timers[id];
                timer.clear();
                delete this.timers[id];
                if (!this.scale)
                    // Time has stopped, no need to replace cleared timers
                    continue;
                /* this.timers[id] =  */
                timer = timer.installCopy(); // the timer is automatically added to this time instance
                delete this.timers[this.idTimerAddedLast]; // remove the copy again ...
                this.timers[id] = timer; // ... and place it at the id of the original
            }
        }
    }
    /** Standard game time starting automatically with the application */
    Time.game = new Time();
    FudgeCore.Time = Time;
    //#endregion
})(FudgeCore || (FudgeCore = {}));
var FudgeCore;
(function (FudgeCore) {
    /**
     * A {@link Timer}-instance internally uses window.setInterval to call a given handler with a given frequency a given number of times,
     * passing an {@link EventTimer}-instance with additional information and given arguments.
     * The frequency scales with the {@link Time}-instance the {@link Timer}-instance is attached to.
     *
     * @author Jirka Dell'Oro-Friedl, HFU, 2019
     */
    class Timer {
        /**
         * Creates a {@link Timer} instance.
         * @param _time The {@link Time} instance, the timer attaches to
         * @param _elapse The time in milliseconds to elapse, to the next call of _handler, measured in _time
         * @param _count The desired number of calls to _handler, Timer deinstalls automatically after last call. Passing 0 invokes infinite calls
         * @param _handler The {@link TimerHandler} instance to call
         * @param _arguments Additional arguments to pass to _handler
         *
         * TODO: for proper handling and deletion, use Time.setTimer instead of instantiating timers yourself.
         */
        constructor(_time, _elapse, _count, _handler, ..._arguments) {
            this.time = _time;
            this.elapse = _elapse;
            this.event = new FudgeCore.EventTimer(this, _arguments);
            this.handler = _handler;
            this.count = _count;
            let scale = Math.abs(_time.getScale());
            if (!scale) {
                // Time is stopped, timer won't be active
                this.active = false;
                return;
            }
            this.timeoutReal = this.elapse / scale;
            let callback = () => {
                if (!this.active)
                    return;
                this.event.count = this.count;
                this.event.lastCall = (this.count == 1);
                _handler(this.event);
                this.event.firstCall = false;
                if (this.count > 0)
                    if (--this.count == 0)
                        _time.deleteTimerByItsInternalId(this.idWindow);
            };
            this.idWindow = window.setInterval(callback, this.timeoutReal, _arguments);
            this.active = true;
            _time.addTimer(this);
        }
        /**
         * Returns the window-id of the timer, which was returned by setInterval
         */
        get id() {
            return this.idWindow;
        }
        /**
         * Returns the time-intervall for calls to the handler
         */
        get lapse() {
            return this.elapse;
        }
        /**
         * Attaches a copy of this at its current state to the same {@link Time}-instance. Used internally when rescaling {@link Time}
         */
        installCopy() {
            return new Timer(this.time, this.elapse, this.count, this.handler, this.event.arguments);
        }
        /**
         * Clears the timer, removing it from the interval-timers handled by window
         */
        clear() {
            // if (this.type == TIMER_TYPE.TIMEOUT) {
            //     if (this.active)
            //         // save remaining time to timeout as new timeout for restart
            //         this.timeout = this.timeout * (1 - (performance.now() - this.startTimeReal) / this.timeoutReal);
            //     window.clearTimeout(this.id);
            // }
            // else
            // TODO: reusing timer starts interval anew. Should be remaining interval as timeout, then starting interval anew 
            window.clearInterval(this.idWindow);
            this.active = false;
        }
    }
    FudgeCore.Timer = Timer;
})(FudgeCore || (FudgeCore = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRnVkZ2VDb3JlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vU291cmNlL0RlYnVnL0RlYnVnVGFyZ2V0LnRzIiwiLi4vU291cmNlL0RlYnVnL0RlYnVnSW50ZXJmYWNlcy50cyIsIi4uL1NvdXJjZS9EZWJ1Zy9EZWJ1Z0NvbnNvbGUudHMiLCIuLi9Tb3VyY2UvRGVidWcvRGVidWcudHMiLCIuLi9Tb3VyY2UvRXZlbnQvRXZlbnQudHMiLCIuLi9Tb3VyY2UvU2VyaWFsaXphdGlvbi9NdXRhYmxlLnRzIiwiLi4vU291cmNlL1NlcmlhbGl6YXRpb24vU2VyaWFsaXplci50cyIsIi4uL1NvdXJjZS9HcmFwaC9Ob2RlLnRzIiwiLi4vU291cmNlL0NvbXBvbmVudC9Db21wb25lbnQudHMiLCIuLi9Tb3VyY2UvUmVjeWNsZS9SZWN5Y2FibGVBcnJheS50cyIsIi4uL1NvdXJjZS9SZW5kZXIvUmVuZGVySW5qZWN0b3IudHMiLCIuLi9Tb3VyY2UvUmVuZGVyL1JlbmRlckluamVjdG9yU2hhZGVyLnRzIiwiLi4vU291cmNlL1JlbmRlci9SZW5kZXJJbmplY3RvckNvYXQudHMiLCIuLi9Tb3VyY2UvUmVuZGVyL1JlbmRlckluamVjdG9yTWVzaC50cyIsIi4uL1NvdXJjZS9SZW5kZXIvUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS50cyIsIi4uL1NvdXJjZS9SZW5kZXIvUmVuZGVySW5qZWN0b3JDb21wb25lbnRQYXJ0aWNsZVN5c3RlbS50cyIsIi4uL1NvdXJjZS9SZWN5Y2xlL1JlY3ljbGVyLnRzIiwiLi4vU291cmNlL01hdGgvVmVjdG9yMi50cyIsIi4uL1NvdXJjZS9NYXRoL1JlY3RhbmdsZS50cyIsIi4uL1NvdXJjZS9SZW5kZXIvUmVuZGVyV2ViR0wudHMiLCIuLi9Tb3VyY2UvUmVuZGVyL1JlbmRlckluamVjdG9yVGV4dHVyZS50cyIsIi4uL1NvdXJjZS9QaHlzaWNzL0hlbHBlcnNQaHlzaWNzLnRzIiwiLi4vU291cmNlL1BoeXNpY3MvSm9pbnQudHMiLCIuLi9Tb3VyY2UvUGh5c2ljcy9Kb2ludEF4aWFsLnRzIiwiLi4vU291cmNlL1JlZmVyZW5jZXMudHMiLCIuLi9Tb3VyY2UvQW5pbWF0aW9uL0FuaW1hdGlvbi50cyIsIi4uL1NvdXJjZS9BbmltYXRpb24vQW5pbWF0aW9uRnVuY3Rpb24udHMiLCIuLi9Tb3VyY2UvQW5pbWF0aW9uL0FuaW1hdGlvbktleS50cyIsIi4uL1NvdXJjZS9BbmltYXRpb24vQW5pbWF0aW9uU2VxdWVuY2UudHMiLCIuLi9Tb3VyY2UvQW5pbWF0aW9uL0FuaW1hdGlvblNwcml0ZS50cyIsIi4uL1NvdXJjZS9BdWRpby9BdWRpby50cyIsIi4uL1NvdXJjZS9FdmVudC9FdmVudEF1ZGlvLnRzIiwiLi4vU291cmNlL0F1ZGlvL0F1ZGlvTWFuYWdlci50cyIsIi4uL1NvdXJjZS9BdWRpby9BdWRpb09zY2lsbGF0b3IudHMiLCIuLi9Tb3VyY2UvQ29tcG9uZW50L0NvbXBvbmVudEFuaW1hdG9yLnRzIiwiLi4vU291cmNlL0NvbXBvbmVudC9Db21wb25lbnRBdWRpby50cyIsIi4uL1NvdXJjZS9Db21wb25lbnQvQ29tcG9uZW50QXVkaW9MaXN0ZW5lci50cyIsIi4uL1NvdXJjZS9Db21wb25lbnQvQ29tcG9uZW50Q2FtZXJhLnRzIiwiLi4vU291cmNlL0NvbXBvbmVudC9Db21wb25lbnRGYWNlQ2FtZXJhLnRzIiwiLi4vU291cmNlL0NvbXBvbmVudC9Db21wb25lbnRHcmFwaEZpbHRlci50cyIsIi4uL1NvdXJjZS9MaWdodC9MaWdodC50cyIsIi4uL1NvdXJjZS9Db21wb25lbnQvQ29tcG9uZW50TGlnaHQudHMiLCIuLi9Tb3VyY2UvQ29tcG9uZW50L0NvbXBvbmVudE1hdGVyaWFsLnRzIiwiLi4vU291cmNlL0NvbXBvbmVudC9Db21wb25lbnRNZXNoLnRzIiwiLi4vU291cmNlL0NvbXBvbmVudC9Db21wb25lbnRQYXJ0aWNsZVN5c3RlbS50cyIsIi4uL1NvdXJjZS9Db21wb25lbnQvQ29tcG9uZW50UGljay50cyIsIi4uL1NvdXJjZS9Db21wb25lbnQvQ29tcG9uZW50U2NyaXB0LnRzIiwiLi4vU291cmNlL0NvbXBvbmVudC9Db21wb25lbnRUcmFuc2Zvcm0udHMiLCIuLi9Tb3VyY2UvQ29tcG9uZW50L0NvbXBvbmVudFZSRGV2aWNlLnRzIiwiLi4vU291cmNlL0NvbnRyb2wvQ29udHJvbC50cyIsIi4uL1NvdXJjZS9Db250cm9sL0F4aXMudHMiLCIuLi9Tb3VyY2UvQ29udHJvbC9LZXlib2FyZC50cyIsIi4uL1NvdXJjZS9EZWJ1Zy9EZWJ1Z0FsZXJ0LnRzIiwiLi4vU291cmNlL0RlYnVnL0RlYnVnRGlhbG9nLnRzIiwiLi4vU291cmNlL0RlYnVnL0RlYnVnVGV4dEFyZWEudHMiLCIuLi9Tb3VyY2UvRXZlbnQvRXZlbnRLZXlib2FyZC50cyIsIi4uL1NvdXJjZS9FdmVudC9FdmVudFRpbWVyLnRzIiwiLi4vU291cmNlL0V2ZW50L0V2ZW50VG91Y2gudHMiLCIuLi9Tb3VyY2UvR3JhcGgvR3JhcGgudHMiLCIuLi9Tb3VyY2UvR3JhcGgvR3JhcGhJbnN0YW5jZS50cyIsIi4uL1NvdXJjZS9NYXRlcmlhbC9Db2F0LnRzIiwiLi4vU291cmNlL01hdGVyaWFsL0NvYXRDb2xvcmVkLnRzIiwiLi4vU291cmNlL01hdGVyaWFsL0NvYXRSZW1pc3NpdmUudHMiLCIuLi9Tb3VyY2UvTWF0ZXJpYWwvQ29hdFRleHR1cmVkLnRzIiwiLi4vU291cmNlL01hdGVyaWFsL0NvYXRSZW1pc3NpdmVUZXh0dXJlZC50cyIsIi4uL1NvdXJjZS9NYXRlcmlhbC9Db2xvci50cyIsIi4uL1NvdXJjZS9NYXRlcmlhbC9NYXRlcmlhbC50cyIsIi4uL1NvdXJjZS9NYXRoL0NhbGMudHMiLCIuLi9Tb3VyY2UvTWF0aC9GcmFtaW5nLnRzIiwiLi4vU291cmNlL01hdGgvR2VvMi50cyIsIi4uL1NvdXJjZS9NYXRoL0dlbzMudHMiLCIuLi9Tb3VyY2UvTWF0aC9MRklCNC50cyIsIi4uL1NvdXJjZS9NYXRoL01hdHJpeDN4My50cyIsIi4uL1NvdXJjZS9NYXRoL01hdHJpeDR4NC50cyIsIi4uL1NvdXJjZS9NYXRoL05vaXNlLnRzIiwiLi4vU291cmNlL01hdGgvTm9pc2UyLnRzIiwiLi4vU291cmNlL01hdGgvTm9pc2UzLnRzIiwiLi4vU291cmNlL01hdGgvTm9pc2U0LnRzIiwiLi4vU291cmNlL01hdGgvUXVhdGVybmlvbi50cyIsIi4uL1NvdXJjZS9NYXRoL1JhbmRvbS50cyIsIi4uL1NvdXJjZS9NYXRoL1ZlY3RvcjMudHMiLCIuLi9Tb3VyY2UvTWVzaC9GYWNlLnRzIiwiLi4vU291cmNlL01lc2gvTWVzaC50cyIsIi4uL1NvdXJjZS9NZXNoL01lc2hDdWJlLnRzIiwiLi4vU291cmNlL01lc2gvTWVzaFBvbHlnb24udHMiLCIuLi9Tb3VyY2UvTWVzaC9NZXNoRXh0cnVzaW9uLnRzIiwiLi4vU291cmNlL01lc2gvTWVzaEZyb21EYXRhLnRzIiwiLi4vU291cmNlL01lc2gvTWVzaEltcG9ydC50cyIsIi4uL1NvdXJjZS9NZXNoL01lc2hQeXJhbWlkLnRzIiwiLi4vU291cmNlL01lc2gvTWVzaFF1YWQudHMiLCIuLi9Tb3VyY2UvTWVzaC9NZXNoVGVycmFpbi50cyIsIi4uL1NvdXJjZS9NZXNoL01lc2hSZWxpZWYudHMiLCIuLi9Tb3VyY2UvTWVzaC9NZXNoUm90YXRpb24udHMiLCIuLi9Tb3VyY2UvUmVuZGVyL1JlbmRlckluamVjdG9yTWVzaFNraW4udHMiLCIuLi9Tb3VyY2UvTWVzaC9NZXNoU2tpbi50cyIsIi4uL1NvdXJjZS9NZXNoL01lc2hTcGhlcmUudHMiLCIuLi9Tb3VyY2UvTWVzaC9NZXNoU3ByaXRlLnRzIiwiLi4vU291cmNlL01lc2gvTWVzaFRvcnVzLnRzIiwiLi4vU291cmNlL01lc2gvUXVhZC50cyIsIi4uL1NvdXJjZS9NZXNoL1ZlcnRleC50cyIsIi4uL1NvdXJjZS9NZXNoL1ZlcnRpY2VzLnRzIiwiLi4vU291cmNlL01lc2gvTG9hZGVyL01lc2hMb2FkZXIudHMiLCIuLi9Tb3VyY2UvTWVzaC9Mb2FkZXIvTWVzaExvYWRlckZCWC50cyIsIi4uL1NvdXJjZS9NZXNoL0xvYWRlci9NZXNoTG9hZGVyR0xURi50cyIsIi4uL1NvdXJjZS9NZXNoL0xvYWRlci9NZXNoTG9hZGVyT0JKLnRzIiwiLi4vU291cmNlL1BhcnRpY2xlU3lzdGVtL1BhcnRpY2xlU3lzdGVtLnRzIiwiLi4vU291cmNlL1BhcnRpY2xlU3lzdGVtL1NoYWRlclBhcnRpY2xlU3lzdGVtLnRzIiwiLi4vU291cmNlL1BoeXNpY3MvQ29tcG9uZW50UmlnaWRib2R5LnRzIiwiLi4vU291cmNlL1BoeXNpY3MvRGVidWdQaHlzaWNzRHJhdy50cyIsIi4uL1NvdXJjZS9QaHlzaWNzL0pvaW50Q3lsaW5kcmljYWwudHMiLCIuLi9Tb3VyY2UvUGh5c2ljcy9Kb2ludFByaXNtYXRpYy50cyIsIi4uL1NvdXJjZS9QaHlzaWNzL0pvaW50UmFnZG9sbC50cyIsIi4uL1NvdXJjZS9QaHlzaWNzL0pvaW50UmV2b2x1dGUudHMiLCIuLi9Tb3VyY2UvUGh5c2ljcy9Kb2ludFNwaGVyaWNhbC50cyIsIi4uL1NvdXJjZS9QaHlzaWNzL0pvaW50VW5pdmVyc2FsLnRzIiwiLi4vU291cmNlL1BoeXNpY3MvSm9pbnRXZWxkaW5nLnRzIiwiLi4vU291cmNlL1BoeXNpY3MvUGh5c2ljcy50cyIsIi4uL1NvdXJjZS9SYXkvQm94LnRzIiwiLi4vU291cmNlL1JheS9QaWNrLnRzIiwiLi4vU291cmNlL1JheS9QaWNrZXIudHMiLCIuLi9Tb3VyY2UvUmF5L1JheS50cyIsIi4uL1NvdXJjZS9SZW5kZXIvUmVuZGVyLnRzIiwiLi4vU291cmNlL1JlbmRlci9SZW5kZXJNZXNoLnRzIiwiLi4vU291cmNlL1JlbmRlci9WaWV3cG9ydC50cyIsIi4uL1NvdXJjZS9SZW5kZXIvWFJWaWV3cG9ydC50cyIsIi4uL1NvdXJjZS9TZXJpYWxpemF0aW9uL0ZpbGVJb0Jyb3dzZXJMb2NhbC50cyIsIi4uL1NvdXJjZS9TZXJpYWxpemF0aW9uL011dGFibGVBcnJheS50cyIsIi4uL1NvdXJjZS9TZXJpYWxpemF0aW9uL1Byb2plY3QudHMiLCIuLi9Tb3VyY2UvU2VyaWFsaXphdGlvbi9GQlgvQnVmZmVyUmVhZGVyLnRzIiwiLi4vU291cmNlL1NlcmlhbGl6YXRpb24vRkJYL0ZCWC50cyIsIi4uL1NvdXJjZS9TZXJpYWxpemF0aW9uL0ZCWC9GQlhMb2FkZXIudHMiLCIuLi9Tb3VyY2UvU2VyaWFsaXphdGlvbi9GQlgvRkJYTm9kZS50cyIsIi4uL1NvdXJjZS9TZXJpYWxpemF0aW9uL0ZCWC9sb2FkRnJvbU5vZGVzLnRzIiwiLi4vU291cmNlL1NlcmlhbGl6YXRpb24vRkJYL3BhcnNlTm9kZXNGcm9tQmluYXJ5LnRzIiwiLi4vU291cmNlL1NlcmlhbGl6YXRpb24vR0xURi9HTFRGLnRzIiwiLi4vU291cmNlL1NlcmlhbGl6YXRpb24vR0xURi9HTFRGTG9hZGVyLnRzIiwiLi4vU291cmNlL1NoYWRlci9NZXJnZWRTaGFkZXJTb3VyY2VzLnRzIiwiLi4vU291cmNlL1NoYWRlci9TaGFkZXIudHMiLCIuLi9Tb3VyY2UvU2hhZGVyL1NoYWRlckZsYXQudHMiLCIuLi9Tb3VyY2UvU2hhZGVyL1NoYWRlckZsYXRTa2luLnRzIiwiLi4vU291cmNlL1NoYWRlci9TaGFkZXJGbGF0VGV4dHVyZWQudHMiLCIuLi9Tb3VyY2UvU2hhZGVyL1NoYWRlckZsYXRUZXh0dXJlZFNraW4udHMiLCIuLi9Tb3VyY2UvU2hhZGVyL1NoYWRlckdvdXJhdWQudHMiLCIuLi9Tb3VyY2UvU2hhZGVyL1NoYWRlckdvdXJhdWRTa2luLnRzIiwiLi4vU291cmNlL1NoYWRlci9TaGFkZXJHb3VyYXVkVGV4dHVyZWQudHMiLCIuLi9Tb3VyY2UvU2hhZGVyL1NoYWRlckdvdXJhdWRUZXh0dXJlZFNraW4udHMiLCIuLi9Tb3VyY2UvU2hhZGVyL1NoYWRlckxpdC50cyIsIi4uL1NvdXJjZS9TaGFkZXIvU2hhZGVyTGl0U2tpbi50cyIsIi4uL1NvdXJjZS9TaGFkZXIvU2hhZGVyTGl0VGV4dHVyZWQudHMiLCIuLi9Tb3VyY2UvU2hhZGVyL1NoYWRlckxpdFRleHR1cmVkU2tpbi50cyIsIi4uL1NvdXJjZS9TaGFkZXIvU2hhZGVyTWF0Q2FwLnRzIiwiLi4vU291cmNlL1NoYWRlci9TaGFkZXJQaG9uZy50cyIsIi4uL1NvdXJjZS9TaGFkZXIvU2hhZGVyUGhvbmdTa2luLnRzIiwiLi4vU291cmNlL1NoYWRlci9TaGFkZXJQaG9uZ1RleHR1cmVkLnRzIiwiLi4vU291cmNlL1NoYWRlci9TaGFkZXJQaG9uZ1RleHR1cmVkU2tpbi50cyIsIi4uL1NvdXJjZS9TaGFkZXIvU2hhZGVyUGljay50cyIsIi4uL1NvdXJjZS9TaGFkZXIvU2hhZGVyUGlja1RleHR1cmVkLnRzIiwiLi4vU291cmNlL1NrZWxldG9uL1NrZWxldG9uLnRzIiwiLi4vU291cmNlL1NrZWxldG9uL1NrZWxldG9uSW5zdGFuY2UudHMiLCIuLi9Tb3VyY2UvVGV4dHVyZS9UZXh0dXJlLnRzIiwiLi4vU291cmNlL1RleHR1cmUvVGV4dHVyZURlZmF1bHQudHMiLCIuLi9Tb3VyY2UvVGltZS9Mb29wLnRzIiwiLi4vU291cmNlL1RpbWUvVGltZS50cyIsIi4uL1NvdXJjZS9UaW1lL1RpbWVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFVLFNBQVMsQ0FnQmxCO0FBaEJELFdBQVUsU0FBUztJQUNqQjs7T0FFRztJQUNILE1BQXNCLFdBQVc7UUFFeEIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxRQUFnQixFQUFFLEdBQUcsS0FBZTtZQUMvRCxJQUFJLEdBQUcsR0FBVyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQywyQkFBMkI7WUFDbEUsS0FBSyxJQUFJLEdBQUcsSUFBSSxLQUFLO2dCQUNuQixJQUFJLEdBQUcsWUFBWSxNQUFNO29CQUN2QixHQUFHLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQywrQkFBK0I7O29CQUU1RSxHQUFHLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLCtCQUErQjtZQUNqRSxPQUFPLEdBQUcsQ0FBQztRQUNiLENBQUM7S0FDRjtJQVhxQixxQkFBVyxjQVdoQyxDQUFBO0FBQ0gsQ0FBQyxFQWhCUyxTQUFTLEtBQVQsU0FBUyxRQWdCbEI7QUNoQkQsb0NBQW9DO0FBQ3BDLElBQVUsU0FBUyxDQWdDbEI7QUFqQ0Qsb0NBQW9DO0FBQ3BDLFdBQVUsU0FBUztJQUNqQjs7T0FFRztJQUNILElBQVksWUFlWDtJQWZELFdBQVksWUFBWTtRQUN0QiwrQ0FBVyxDQUFBO1FBQ1gsK0NBQVcsQ0FBQTtRQUNYLDZDQUFVLENBQUE7UUFDViwrQ0FBVyxDQUFBO1FBQ1gsaURBQVksQ0FBQTtRQUNaLGtEQUFZLENBQUE7UUFDWixtREFBYSxDQUFBO1FBQ2IsbURBQWEsQ0FBQTtRQUNiLHFFQUFzQixDQUFBO1FBQ3RCLHlEQUFnQixDQUFBO1FBQ2hCLHFEQUFjLENBQUE7UUFDZCx3REFBNEMsQ0FBQTtRQUM1QyxxREFBa0QsQ0FBQTtRQUNsRCwrQ0FBdUIsQ0FBQTtJQUN6QixDQUFDLEVBZlcsWUFBWSxHQUFaLHNCQUFZLEtBQVosc0JBQVksUUFldkI7SUFFWSxzQkFBWSxHQUFrQztRQUN6RCxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHO1FBQ3hCLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUc7UUFDdkIsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRztRQUN4QixDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHO1FBQ3pCLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUk7UUFDMUIsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSTtLQUM1QixDQUFDO0FBSUosQ0FBQyxFQWhDUyxTQUFTLEtBQVQsU0FBUyxRQWdDbEI7QUNqQ0QsdUNBQXVDO0FBQ3ZDLElBQVUsU0FBUyxDQWdDbEI7QUFqQ0QsdUNBQXVDO0FBQ3ZDLFdBQVUsU0FBUztJQUNqQjs7T0FFRztJQUNILE1BQWEsWUFBYSxTQUFRLFVBQUEsV0FBVztRQWMzQzs7V0FFRztRQUNJLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBZ0IsRUFBRSxHQUFHLEtBQWU7WUFDdEQsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFBLFlBQVksQ0FBQyxVQUFBLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxRQUFRLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQztRQUN0RSxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQWdCLEVBQUUsR0FBRyxLQUFlO1lBQ3ZELE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBQSxZQUFZLENBQUMsVUFBQSxZQUFZLENBQUMsTUFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUM7UUFDckUsQ0FBQzs7SUF6QmEsc0JBQVMsR0FBNkI7UUFDbEQsQ0FBQyxVQUFBLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLENBQUMsSUFBSTtRQUNqQyxDQUFDLFVBQUEsWUFBWSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxHQUFHO1FBQy9CLENBQUMsVUFBQSxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxDQUFDLElBQUk7UUFDakMsQ0FBQyxVQUFBLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLENBQUMsS0FBSztRQUNuQyxDQUFDLFVBQUEsWUFBWSxDQUFDLEtBQUssQ0FBQyxFQUFFLFlBQVksQ0FBQyxLQUFLO1FBQ3hDLENBQUMsVUFBQSxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQUUsT0FBTyxDQUFDLEtBQUs7UUFDbkMsQ0FBQyxVQUFBLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLENBQUMsS0FBSztRQUNuQyxDQUFDLFVBQUEsWUFBWSxDQUFDLGNBQWMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxjQUFjO1FBQ3JELENBQUMsVUFBQSxZQUFZLENBQUMsUUFBUSxDQUFDLEVBQUUsT0FBTyxDQUFDLFFBQVE7UUFDekMsQ0FBQyxVQUFBLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxZQUFZLENBQUMsTUFBTTtLQUMzQyxDQUFDO0lBWlMsc0JBQVksZUEyQnhCLENBQUE7QUFDSCxDQUFDLEVBaENTLFNBQVMsS0FBVCxTQUFTLFFBZ0NsQjtBQ2pDRCx1Q0FBdUM7QUFDdkMsMENBQTBDO0FBQzFDLHVDQUF1QztBQUN2QyxJQUFVLFNBQVMsQ0FvS2xCO0FBdktELHVDQUF1QztBQUN2QywwQ0FBMEM7QUFDMUMsdUNBQXVDO0FBQ3ZDLFdBQVUsU0FBUztJQUNqQjs7OztPQUlHO0lBQ0gsTUFBYSxLQUFLO1FBTWhCOztXQUVHO1FBQ0ksTUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFvQixFQUFFLE9BQXFCO1lBQ2pFLEtBQUssSUFBSSxNQUFNLElBQUksS0FBSyxDQUFDLFNBQVM7Z0JBQ2hDLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRTFDLEtBQUssSUFBSSxNQUFNLElBQUksVUFBQSxZQUFZLEVBQUU7Z0JBQy9CLElBQUksTUFBTSxHQUFXLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDdEMsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDO29CQUNmLE1BQU07Z0JBQ1IsSUFBSSxDQUFDLFVBQUEsWUFBWSxDQUFDLFFBQVEsRUFBRSxVQUFBLFlBQVksQ0FBQyxNQUFNLEVBQUUsVUFBQSxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDdEYsMkJBQTJCO29CQUMzQixTQUFTO2dCQUNYLElBQUksT0FBTyxHQUFHLE1BQU07b0JBQ2xCLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7YUFDbkU7UUFDSCxDQUFDO1FBRU0sTUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFvQjtZQUMxQyxJQUFJLE1BQU0sR0FBaUIsQ0FBQyxDQUFDO1lBQzdCLEtBQUssSUFBSSxNQUFNLElBQUksT0FBTyxDQUFDLFNBQVM7Z0JBQ2xDLE1BQU0sSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDN0IsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUVNLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBb0IsRUFBRSxPQUFxQjtZQUNqRSxJQUFJLE9BQU8sR0FBaUIsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxPQUFPLEdBQUcsT0FBTyxDQUFDLENBQUM7UUFDOUMsQ0FBQztRQUVNLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBb0IsRUFBRSxPQUFxQjtZQUNwRSxJQUFJLE9BQU8sR0FBaUIsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxPQUFPLEdBQUcsT0FBTyxDQUFDLENBQUM7UUFDOUMsQ0FBQztRQUVEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFpQixFQUFFLEdBQUcsS0FBZ0I7WUFDdkQsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFBLFlBQVksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3JELENBQUM7UUFDRDs7V0FFRztRQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBaUIsRUFBRSxHQUFHLEtBQWdCO1lBQ3RELEtBQUssQ0FBQyxRQUFRLENBQUMsVUFBQSxZQUFZLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNwRCxDQUFDO1FBQ0Q7O1dBRUc7UUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQWlCLEVBQUUsR0FBRyxLQUFnQjtZQUN2RCxLQUFLLENBQUMsUUFBUSxDQUFDLFVBQUEsWUFBWSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDckQsQ0FBQztRQUNEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFpQixFQUFFLEdBQUcsS0FBZ0I7WUFDeEQsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFBLFlBQVksQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3RELENBQUM7UUFDRDs7V0FFRztRQUNJLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBaUIsRUFBRSxHQUFHLEtBQWdCO1lBQ3hELEtBQUssQ0FBQyxRQUFRLENBQUMsVUFBQSxZQUFZLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN0RCxDQUFDO1FBQ0Q7O1dBRUc7UUFDSSxNQUFNLENBQUMsS0FBSztZQUNqQixLQUFLLENBQUMsUUFBUSxDQUFDLFVBQUEsWUFBWSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDakQsQ0FBQztRQUNEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFhO1lBQy9CLEtBQUssQ0FBQyxRQUFRLENBQUMsVUFBQSxZQUFZLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNsRCxDQUFDO1FBQ0Q7O1dBRUc7UUFDSSxNQUFNLENBQUMsY0FBYyxDQUFDLEtBQWE7WUFDeEMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFBLFlBQVksQ0FBQyxjQUFjLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzNELENBQUM7UUFDRDs7V0FFRztRQUNJLE1BQU0sQ0FBQyxRQUFRO1lBQ3BCLEtBQUssQ0FBQyxRQUFRLENBQUMsVUFBQSxZQUFZLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNwRCxDQUFDO1FBQ0Q7O1dBRUc7UUFDSSxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQWE7WUFDaEMsSUFBSSxPQUFPLENBQUMsU0FBUyxHQUFHLENBQUM7Z0JBQ3ZCLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDOztnQkFFMUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFFNUIsS0FBSyxJQUFJLEtBQUssSUFBSSxPQUFPLENBQUMsV0FBVyxFQUFFO2dCQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFN0QsSUFBSSxPQUFPLENBQUMsU0FBUyxHQUFHLENBQUM7Z0JBQ3ZCLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNyQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQWlCLEVBQUUsR0FBRyxLQUFnQjtZQUN6RCxLQUFLLENBQUMsUUFBUSxDQUFDLFVBQUEsWUFBWSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDdkQsQ0FBQztRQUVEOztXQUVHO1FBQ0ssTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFxQixFQUFFLFFBQWlCLEVBQUUsS0FBZ0I7WUFDaEYsSUFBSSxPQUFPLElBQUksVUFBQSxZQUFZLENBQUMsR0FBRyxJQUFJLE9BQU8sSUFBSSxVQUFBLFlBQVksQ0FBQyxJQUFJLElBQUksT0FBTyxJQUFJLFVBQUEsWUFBWSxDQUFDLEtBQUssRUFBRTtnQkFDaEcsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLFVBQUEsWUFBWSxDQUFDLE1BQU0sQ0FBQztvQkFDdEMsS0FBSyxJQUFJLFFBQVEsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLFVBQUEsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRTt3QkFDaEUsSUFBSSxRQUFRLEVBQUU7NEJBQ1osSUFBSSxLQUFLLEdBQWEsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQzs0QkFDMUQsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO3lCQUNwQjthQUNOO1lBQ0QsSUFBSSxTQUFTLEdBQTZCLEtBQUssQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDbkUsS0FBSyxJQUFJLFFBQVEsSUFBSSxTQUFTLENBQUMsTUFBTSxFQUFFO2dCQUNyQyxJQUFJLFFBQVE7b0JBQ1YsSUFBSSxLQUFLLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDO3dCQUMzQixRQUFRLENBQUMsUUFBUSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUM7O3dCQUU3QixRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFM0IsQ0FBQztRQUNEOztXQUVHO1FBQ0ssTUFBTSxDQUFDLFlBQVk7WUFDekIsSUFBSSxNQUFNLEdBQW1ELEVBQUUsQ0FBQztZQUNoRSxJQUFJLE9BQU8sR0FBbUI7Z0JBQzVCLFVBQUEsWUFBWSxDQUFDLElBQUksRUFBRSxVQUFBLFlBQVksQ0FBQyxHQUFHLEVBQUUsVUFBQSxZQUFZLENBQUMsSUFBSSxFQUFFLFVBQUEsWUFBWSxDQUFDLEtBQUssRUFBRSxVQUFBLFlBQVksQ0FBQyxLQUFLO2dCQUM5RixVQUFBLFlBQVksQ0FBQyxLQUFLLEVBQUUsVUFBQSxZQUFZLENBQUMsS0FBSyxFQUFFLFVBQUEsWUFBWSxDQUFDLGNBQWMsRUFBRSxVQUFBLFlBQVksQ0FBQyxRQUFRO2dCQUMxRixVQUFBLFlBQVksQ0FBQyxNQUFNO2FBQ3BCLENBQUM7WUFFRixLQUFLLElBQUksTUFBTSxJQUFJLE9BQU87Z0JBQ3hCLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsVUFBQSxZQUFZLEVBQUUsVUFBQSxZQUFZLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTdFLE1BQU0sQ0FBQyxVQUFBLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBQSxZQUFZLENBQUMsQ0FBQztZQUVqRCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDOztJQTNKRDs7T0FFRztJQUNZLGVBQVMsR0FBbUQsS0FBSyxDQUFDLFlBQVksRUFBRSxDQUFDO0lBSnJGLGVBQUssUUE2SmpCLENBQUE7QUFDSCxDQUFDLEVBcEtTLFNBQVMsS0FBVCxTQUFTLFFBb0tsQjtBQ3ZLRCxJQUFVLFNBQVMsQ0FnSGxCO0FBaEhELFdBQVUsU0FBUztJQTZFakIsNkZBQTZGO0lBQzdGLE1BQWEsa0JBQW1CLFNBQVEsV0FBVztRQUNqRCxnQkFBZ0IsQ0FBQyxLQUFhLEVBQUUsUUFBOEIsRUFBRSxRQUE0QztZQUMxRyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFzQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDeEYsQ0FBQztRQUNELG1CQUFtQixDQUFDLEtBQWEsRUFBRSxRQUE4QixFQUFFLFFBQTRDO1lBQzdHLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQXNDLFFBQVEsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUMzRixDQUFDO1FBRUQsYUFBYSxDQUFDLE1BQW9CO1lBQ2hDLE9BQU8sS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyQyxDQUFDO0tBQ0Y7SUFYWSw0QkFBa0IscUJBVzlCLENBQUE7SUFFRDs7T0FFRztJQUNILE1BQWEsaUJBQWtCLFNBQVEsa0JBQWtCO1FBR3ZEO1lBQ0UsS0FBSyxFQUFFLENBQUM7UUFDVixDQUFDO1FBRU0sTUFBTSxDQUFDLGdCQUFnQixDQUFDLEtBQWEsRUFBRSxRQUF1QjtZQUNuRSxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ25FLENBQUM7UUFDTSxNQUFNLENBQUMsbUJBQW1CLENBQUMsS0FBYSxFQUFFLFFBQXVCO1lBQ3RFLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDdEUsQ0FBQztRQUNNLE1BQU0sQ0FBQyxhQUFhLENBQUMsTUFBYTtZQUN2QyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3JELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQzs7SUFmZ0IsOEJBQVksR0FBc0IsSUFBSSxpQkFBaUIsRUFBRSxDQUFDO0lBRGhFLDJCQUFpQixvQkFpQjdCLENBQUE7QUFDSCxDQUFDLEVBaEhTLFNBQVMsS0FBVCxTQUFTLFFBZ0hsQjtBQ2hIRCxJQUFVLFNBQVMsQ0E2TWxCO0FBN01ELFdBQVUsU0FBUztJQW1CakIsNEZBQTRGO0lBRTVGOztPQUVHO0lBQ0gsU0FBZ0IscUJBQXFCLENBQUMsT0FBZTtRQUNuRCxJQUFJLE9BQU8sR0FBWSxFQUFFLENBQUM7UUFDMUIsSUFBSSxVQUFVLEdBQWlDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ2hHLEtBQUssSUFBSSxTQUFTLElBQUksVUFBVSxFQUFFO1lBQ2hDLElBQUksS0FBSyxHQUFXLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ3BELElBQUksS0FBSyxZQUFZLFFBQVE7Z0JBQzNCLFNBQVM7WUFDWCw4REFBOEQ7WUFDOUQsY0FBYztZQUNkLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUM7U0FDdkM7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBWmUsK0JBQXFCLHdCQVlwQyxDQUFBO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsTUFBc0IsT0FBUSxTQUFRLFVBQUEsa0JBQWtCO1FBQ3REOztXQUVHO1FBQ0gseURBQXlEO1FBQ3pELHFFQUFxRTtRQUNyRSwyRUFBMkU7UUFDM0UsNENBQTRDO1FBQzVDLFFBQVE7UUFDUixRQUFRO1FBQ1IsSUFBSTtRQUVHLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxRQUFpQixFQUFFLEtBQWU7WUFDakUsSUFBSSxHQUFHLEdBQVcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNCLElBQUksT0FBTyxHQUFZLEVBQUUsQ0FBQztZQUMxQixJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxTQUFTLEVBQUUsa0VBQWtFO2dCQUNoRyxPQUFPLFFBQVEsQ0FBQztZQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzdCLElBQUksS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDO2dCQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUN4RixPQUFPLE9BQU8sQ0FBQztRQUNqQixDQUFDO1FBRUQ7OztXQUdHO1FBQ0gsSUFBVyxJQUFJO1lBQ2IsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQztRQUMvQixDQUFDO1FBQ0Q7Ozs7V0FJRztRQUNJLFVBQVUsQ0FBQyxjQUF1QixLQUFLO1lBQzVDLElBQUksT0FBTyxHQUFZLEVBQUUsQ0FBQztZQUUxQiwyQ0FBMkM7WUFDM0MsS0FBSyxJQUFJLFNBQVMsSUFBSSxJQUFJLEVBQUU7Z0JBQzFCLElBQUksS0FBSyxHQUFXLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDcEMsSUFBSSxLQUFLLFlBQVksUUFBUTtvQkFDM0IsU0FBUztnQkFDWCxJQUFJLEtBQUssWUFBWSxNQUFNLElBQUksQ0FBQyxDQUFDLEtBQUssWUFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxZQUFZLFVBQUEsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7b0JBQ3JJLFNBQVM7Z0JBQ1gsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUN0QztZQUVELElBQUksQ0FBQyxXQUFXO2dCQUNkLDJDQUEyQztnQkFDM0MsTUFBTSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3BDLDZCQUE2QjtZQUM3QixJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRTVCLG9FQUFvRTtZQUNwRSxLQUFLLElBQUksU0FBUyxJQUFJLE9BQU8sRUFBRTtnQkFDN0IsSUFBSSxLQUFLLEdBQVcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUN2QyxJQUFJLEtBQUssWUFBWSxPQUFPO29CQUMxQixPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDO2dCQUMxQyxJQUFJLEtBQUssWUFBWSxVQUFBLFlBQVk7b0JBQy9CLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQzthQUNuRTtZQUVELE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxzQkFBc0I7WUFDM0IsT0FBNEIsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2hELENBQUM7UUFDRDs7O1dBR0c7UUFDSSwwQkFBMEI7WUFDL0IsT0FBZ0MsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3BELENBQUM7UUFDRDs7O1dBR0c7UUFDSCx5REFBeUQ7UUFDekQscURBQXFEO1FBQ3JELElBQUk7UUFDSjs7O1dBR0c7UUFDSSx3QkFBd0IsQ0FBQyxRQUFpQjtZQUMvQyxJQUFJLEtBQUssR0FBMEIsRUFBRSxDQUFDO1lBQ3RDLEtBQUssSUFBSSxTQUFTLElBQUksUUFBUSxFQUFFO2dCQUM5QixJQUFJLElBQUksR0FBVyxJQUFJLENBQUM7Z0JBQ3hCLElBQUksS0FBSyxHQUF1QyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ3BFLElBQUksUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLFNBQVM7b0JBQ2xDLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLFFBQVE7d0JBQzVCLElBQUksR0FBYSxJQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQzt5QkFDaEQsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksVUFBVTt3QkFDbkMsSUFBSSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQzs7d0JBRXJCLElBQUksR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQztnQkFDaEQsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQzthQUN6QjtZQUNELE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUNEOzs7V0FHRztRQUNJLGFBQWEsQ0FBQyxRQUFpQjtZQUNwQyxLQUFLLElBQUksU0FBUyxJQUFJLFFBQVEsRUFBRTtnQkFDOUIsSUFBSSxLQUFLLEdBQVcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUN4QyxJQUFJLEtBQUssWUFBWSxPQUFPO29CQUMxQixRQUFRLENBQUMsU0FBUyxDQUFDLEdBQUcsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDOztvQkFFekMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxHQUFhLElBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQzthQUNwRDtRQUNILENBQUM7UUFDRDs7OztXQUlHO1FBQ0ksS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFpQixFQUFFLGFBQXVCLElBQUksRUFBRSxrQkFBMkIsSUFBSTtZQUNqRyxNQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQzVDLElBQUksZUFBZTtnQkFDakIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLFdBQVcsd0JBQWUsRUFBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxFQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUNwRyxDQUFDO1FBRUQ7O1dBRUc7UUFDTyxLQUFLLENBQUMsVUFBVSxDQUFDLFFBQWlCLEVBQUUsVUFBcUI7WUFDakUsSUFBSSxPQUFPLEdBQVksRUFBRSxDQUFDO1lBQzFCLElBQUksQ0FBQyxVQUFVO2dCQUNiLE9BQU8sR0FBRyxRQUFRLENBQUM7O2dCQUVuQixLQUFLLElBQUksU0FBUyxJQUFJLFVBQVUsRUFBRSxzQ0FBc0M7b0JBQ3RFLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFLLFdBQVc7d0JBQzlDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFL0MsS0FBSyxJQUFJLFNBQVMsSUFBSSxPQUFPLEVBQUU7Z0JBQzdCLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxTQUFTLENBQUM7b0JBQy9CLFNBQVM7Z0JBQ1gsSUFBSSxNQUFNLEdBQVcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7Z0JBQ2xELElBQUksS0FBSyxHQUFxQixPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ2pELElBQUksTUFBTSxZQUFZLFVBQUEsWUFBWSxJQUFJLE1BQU0sWUFBWSxPQUFPO29CQUM3RCxNQUFNLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQzs7b0JBRXhDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQzthQUN2QztRQUNILENBQUM7S0FNRjtJQS9KcUIsaUJBQU8sVUErSjVCLENBQUE7QUFDSCxDQUFDLEVBN01TLFNBQVMsS0FBVCxTQUFTLFFBNk1sQjtBQzdNRCxJQUFVLFNBQVMsQ0E2T2xCO0FBN09ELFdBQVUsU0FBUztJQWdCakI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0F5Qkc7SUFDSCxNQUFzQixVQUFVO1FBSTlCOzs7V0FHRztRQUNJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxVQUFrQjtZQUNoRCxLQUFLLElBQUksSUFBSSxJQUFJLFVBQVUsQ0FBQyxVQUFVO2dCQUNwQyxJQUFJLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksVUFBVTtvQkFDM0MsT0FBTyxJQUFJLENBQUM7WUFFaEIsSUFBSSxJQUFJLEdBQVcsVUFBVSxDQUFDLGVBQWUsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDbEUsSUFBSSxDQUFDLElBQUk7Z0JBQ1AsS0FBSyxJQUFJLFVBQVUsSUFBSSxVQUFVLENBQUMsVUFBVSxFQUFFO29CQUM1QyxJQUFJLEdBQUcsVUFBVSxDQUFDLGVBQWUsQ0FBQyxVQUFVLEVBQUUsVUFBVSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO29CQUNqRixJQUFJLElBQUksRUFBRTt3QkFDUixJQUFJLEdBQUcsVUFBVSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUM7d0JBQy9CLE1BQU07cUJBQ1A7aUJBQ0Y7WUFFSCxJQUFJLENBQUMsSUFBSTtnQkFDUCxNQUFNLElBQUksS0FBSyxDQUFDLDRFQUE0RSxDQUFDLENBQUM7WUFFaEcsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxVQUFVLENBQUM7WUFDekMsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBR0Q7Ozs7V0FJRztRQUNJLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBcUI7WUFDM0MsSUFBSSxhQUFhLEdBQWtCLEVBQUUsQ0FBQztZQUN0QyxzREFBc0Q7WUFDdEQsaUVBQWlFO1lBQ2pFLElBQUksSUFBSSxHQUFXLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDN0MsSUFBSSxDQUFDLElBQUk7Z0JBQ1AsTUFBTSxJQUFJLEtBQUssQ0FBQyw0Q0FBNEMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLG1GQUFtRixDQUFDLENBQUM7WUFDM0ssYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUMxQyxPQUFPLGFBQWEsQ0FBQztZQUNyQiw4QkFBOEI7UUFDaEMsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSSxNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUMzRCxJQUFJLFdBQXlCLENBQUM7WUFDOUIsSUFBSSxJQUFZLENBQUM7WUFDakIsSUFBSTtnQkFDRixzRUFBc0U7Z0JBQ3RFLEtBQUssSUFBSSxJQUFJLGNBQWMsRUFBRTtvQkFDM0IsV0FBVyxHQUFHLFVBQVUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzNDLFdBQVcsR0FBRyxNQUFNLFdBQVcsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7b0JBQ2xFLE9BQU8sV0FBVyxDQUFDO2lCQUNwQjthQUNGO1lBQUMsT0FBTyxNQUFNLEVBQUU7Z0JBQ2YsSUFBSSxPQUFPLEdBQVcsc0JBQXNCLElBQUksS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsR0FBRyxNQUFNLENBQUM7Z0JBQ25JLE1BQU0sSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDMUI7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRDs7OztXQUlHO1FBQ0ksTUFBTSxDQUFDLGNBQWMsQ0FBeUIsS0FBa0IsRUFBRSxRQUF3QjtZQUMvRixJQUFJLGNBQWMsR0FBb0IsRUFBRSxDQUFDO1lBQ3pDLElBQUksSUFBSSxHQUFXLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxJQUFJO2dCQUNQLE1BQU0sSUFBSSxLQUFLLENBQUMsNENBQTRDLEtBQUssQ0FBQyxJQUFJLG1GQUFtRixDQUFDLENBQUM7WUFFN0osS0FBSyxJQUFJLE1BQU0sSUFBSSxRQUFRO2dCQUN6QixjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO1lBRTFDLElBQUksYUFBYSxHQUFrQixFQUFFLENBQUM7WUFDdEMsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLGNBQWMsQ0FBQztZQUNyQyxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRUQ7Ozs7V0FJRztRQUNJLE1BQU0sQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLENBQUMsY0FBNkI7WUFDaEUsSUFBSSxhQUFhLEdBQW1CLEVBQUUsQ0FBQztZQUN2QyxJQUFJLFNBQWlDLENBQUM7WUFDdEMsSUFBSSxjQUFjLEdBQW9CLEVBQUUsQ0FBQztZQUN6QyxJQUFJO2dCQUNGLHNFQUFzRTtnQkFDdEUsS0FBSyxJQUFJLElBQUksSUFBSSxjQUFjLEVBQUU7b0JBQy9CLFNBQVMsR0FBRyxVQUFVLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUM1QyxjQUFjLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUN0QyxNQUFNO2lCQUNQO2FBQ0Y7WUFBQyxPQUFPLE1BQU0sRUFBRTtnQkFDZixNQUFNLElBQUksS0FBSyxDQUFDLDBCQUEwQixHQUFHLE1BQU0sQ0FBQyxDQUFDO2FBQ3REO1lBRUQsS0FBSyxJQUFJLGFBQWEsSUFBSSxjQUFjLEVBQUU7Z0JBQ3hDLElBQUksWUFBWSxHQUFpQixJQUFJLFNBQVMsRUFBRSxDQUFDO2dCQUNqRCxNQUFNLFlBQVksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7Z0JBQzlDLGFBQWEsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7YUFDbEM7WUFFRCxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRUQsOEhBQThIO1FBQ3ZILE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBYSxJQUFZLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQztRQUUvRDs7O1dBR0c7UUFDSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQTZCO1lBQ25ELG1GQUFtRjtZQUNuRixJQUFJLElBQUksR0FBVyxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDM0QsSUFBSSxNQUFNLEdBQVcsVUFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMvQyxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFhO1lBQy9CLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFhO1lBQ3JDLElBQUksV0FBVyxHQUEyQixVQUFVLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzNFLElBQUksY0FBYyxHQUFpQixJQUFJLFdBQVcsRUFBRSxDQUFDO1lBQ3JELE9BQU8sY0FBYyxDQUFDO1FBQ3hCLENBQUM7UUFFRCxxSEFBcUg7UUFDOUcsTUFBTSxDQUFDLGNBQWMsQ0FBeUIsS0FBYTtZQUNoRSxJQUFJLFFBQVEsR0FBVyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDbkUsSUFBSSxTQUFTLEdBQVcsVUFBVSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN2RCxJQUFJLENBQUMsU0FBUztnQkFDWixNQUFNLElBQUksS0FBSyxDQUFDLDhDQUE4QyxLQUFLLHlEQUF5RCxDQUFDLENBQUM7WUFDaEksT0FBaUIsU0FBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3hDLENBQUM7UUFFRDs7O1dBR0c7UUFDSyxNQUFNLENBQUMsV0FBVyxDQUFDLE9BQXFCO1lBQzlDLElBQUksUUFBUSxHQUFXLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO1lBQ2hELG9EQUFvRDtZQUNwRCxLQUFLLElBQUksYUFBYSxJQUFJLFVBQVUsQ0FBQyxVQUFVLEVBQUU7Z0JBQy9DLElBQUksS0FBSyxHQUFzQixVQUFVLENBQUMsVUFBVyxDQUFDLGFBQWEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUMvRSxJQUFJLEtBQUssSUFBSSxPQUFPLFlBQVksS0FBSztvQkFDbkMsT0FBTyxhQUFhLEdBQUcsR0FBRyxHQUFHLFFBQVEsQ0FBQzthQUN6QztZQUNELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVEOzs7V0FHRztRQUNLLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBYTtZQUN2QyxJQUFJLGFBQWEsR0FBVyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDcEUsT0FBTyxVQUFVLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxJQUFJLFNBQVMsQ0FBQztRQUMzRCxDQUFDO1FBRUQ7Ozs7V0FJRztRQUNLLE1BQU0sQ0FBQyxlQUFlLENBQUMsVUFBa0IsRUFBRSxPQUFlO1lBQ2hFLEtBQUssSUFBSSxJQUFJLElBQUksT0FBTztnQkFDdEIsSUFBYyxPQUFRLENBQUMsSUFBSSxDQUFDLElBQUksVUFBVTtvQkFDeEMsT0FBTyxJQUFJLENBQUM7WUFDaEIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDOztJQWhNRCwyR0FBMkc7SUFDNUYscUJBQVUsR0FBc0IsRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLENBQUM7SUFGOUMsb0JBQVUsYUFrTS9CLENBQUE7QUFDSCxDQUFDLEVBN09TLFNBQVMsS0FBVCxTQUFTLFFBNk9sQjtBQzdPRCxJQUFVLFNBQVMsQ0EyaEJsQjtBQTNoQkQsV0FBVSxTQUFTO0lBS2pCOzs7O09BSUc7SUFDSCxNQUFhLElBQUssU0FBUSxVQUFBLGtCQUFrQjtRQXNCMUM7O1dBRUc7UUFDSCxZQUFtQixLQUFhO1lBQzlCLEtBQUssRUFBRSxDQUFDO1lBeEJNLGFBQVEsR0FBYyxVQUFBLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNwRCxvQkFBZSxHQUFXLENBQUMsQ0FBQztZQUNuQyxxRkFBcUY7WUFDOUUsbUJBQWMsR0FBVyxDQUFDLENBQUM7WUFDbEMsaUlBQWlJO1lBQzFILFdBQU0sR0FBVyxDQUFDLENBQUM7WUFLbEIsV0FBTSxHQUFnQixJQUFJLENBQUMsQ0FBQywyQkFBMkI7WUFDdkQsYUFBUSxHQUFXLEVBQUUsQ0FBQyxDQUFDLDhDQUE4QztZQUNyRSxlQUFVLEdBQXlCLEVBQUUsQ0FBQztZQUM5QyxtSEFBbUg7WUFDbkgsNEdBQTRHO1lBQ3BHLGNBQVMsR0FBMkIsRUFBRSxDQUFDO1lBQ3ZDLGFBQVEsR0FBMkIsRUFBRSxDQUFDO1lBQ3RDLFdBQU0sR0FBWSxJQUFJLENBQUM7WUF3SC9COzs7ZUFHRztZQUNILDRDQUE0QztZQUM1QixnQkFBVyxHQUEyQixJQUFJLENBQUMsUUFBUSxDQUFDO1lBckhsRSxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztRQUNwQixDQUFDO1FBbkJELHVCQUF1QixDQUFTO1FBQ2hDLGdCQUFnQixDQUFZO1FBb0I1QixJQUFXLFFBQVE7WUFDakIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3JCLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsWUFBWTtZQUNyQixPQUEyQixJQUFJLENBQUMsYUFBYSxDQUFDLFVBQUEsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RSxDQUFDO1FBRUQ7OztXQUdHO1FBQ0gsSUFBVyxRQUFRO1lBQ2pCLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUM7UUFDcEMsQ0FBQztRQUVELElBQVcsZUFBZTtZQUN4QixJQUFJLElBQUksQ0FBQyx1QkFBdUIsSUFBSSxJQUFJLENBQUMsZUFBZTtnQkFDdEQsSUFBSSxDQUFDLGdCQUFnQixHQUFHLFVBQUEsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFN0QsSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUM7WUFDcEQsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDL0IsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxTQUFTO1lBQ2xCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFDOUIsQ0FBQztRQUVEOzs7V0FHRztRQUNJLENBQUUsV0FBVyxDQUFDLFVBQW1CLEtBQUs7WUFDM0MsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUM3QixNQUFNLElBQUksQ0FBQztnQkFDWCxLQUFLLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxRQUFRO29CQUM3QixLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQ3JDO1FBQ0gsQ0FBQztRQUVNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztZQUN0QixPQUFPLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM1QixDQUFDO1FBRU0sUUFBUSxDQUFDLEdBQVk7WUFDMUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxvQ0FBcUIsQ0FBQyx1Q0FBc0IsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDcEcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxvQ0FBcUIsQ0FBQyx1Q0FBc0IsQ0FBQyxDQUFDLENBQUM7UUFDcEYsQ0FBQztRQUVELG9CQUFvQjtRQUNwQjs7V0FFRztRQUNJLFNBQVM7WUFDZCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDckIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksV0FBVztZQUNoQixJQUFJLFFBQVEsR0FBUyxJQUFJLENBQUM7WUFDMUIsT0FBTyxRQUFRLENBQUMsU0FBUyxFQUFFO2dCQUN6QixRQUFRLEdBQUcsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ2xDLE9BQU8sUUFBUSxDQUFDO1FBQ2xCLENBQUM7UUFFRDs7V0FFRztRQUNJLE9BQU87WUFDWixJQUFJLFFBQVEsR0FBUyxJQUFJLENBQUM7WUFDMUIsSUFBSSxJQUFJLEdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxQixPQUFPLFFBQVEsQ0FBQyxTQUFTLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO1lBQ2hELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUdEOztXQUVHO1FBQ0ksUUFBUSxDQUFDLE1BQWM7WUFDNUIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQy9CLENBQUM7UUFFRDs7V0FFRztRQUNJLFdBQVc7WUFDaEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoQyxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxpQkFBaUIsQ0FBQyxLQUFhO1lBQ3BDLElBQUksS0FBSyxHQUFXLEVBQUUsQ0FBQztZQUN2QixLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFXLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLENBQUM7WUFDbkUsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO1FBU0Q7OztXQUdHO1FBQ0ksUUFBUSxDQUFDLE1BQVk7WUFDMUIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUM7Z0JBQ2hDLG1DQUFtQztnQkFDbkMsT0FBTztZQUVULElBQUksWUFBWSxHQUFZLEtBQUssQ0FBQztZQUNsQyxJQUFJLGFBQWEsR0FBUyxVQUFBLFlBQVksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztZQUNyRSxJQUFJLFFBQVEsR0FBUyxJQUFJLENBQUM7WUFDMUIsT0FBTyxRQUFRLEVBQUU7Z0JBQ2YsUUFBUSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7Z0JBQzdCLFlBQVksR0FBRyxZQUFZLElBQUksQ0FBQyxRQUFRLElBQUksYUFBYSxDQUFDLENBQUM7Z0JBQzNELElBQUksUUFBUSxJQUFJLE1BQU07b0JBQ3BCLE1BQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyx3RkFBd0YsQ0FBQyxDQUFDLENBQUM7O29CQUU1RyxRQUFRLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQzthQUM5QjtZQUVELElBQUksY0FBYyxHQUFTLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDekMsSUFBSSxjQUFjO2dCQUNoQixjQUFjLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzNCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQ3JCLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLG1DQUFxQixFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdkUsSUFBSSxZQUFZO2dCQUNkLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxLQUFLLDhDQUEwQixDQUFDLENBQUM7UUFDL0QsQ0FBQztRQUVEOztXQUVHO1FBQ0ksV0FBVyxDQUFDLE1BQVk7WUFDN0IsSUFBSSxLQUFLLEdBQVcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMzQyxJQUFJLEtBQUssR0FBRyxDQUFDO2dCQUNYLE9BQU87WUFFVCxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyxtQ0FBcUIsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3ZFLE1BQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxLQUFLLHdDQUF1QixDQUFDLENBQUM7WUFDeEQsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLFVBQUEsWUFBWSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO2dCQUNqRSxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksS0FBSyxnREFBMEIsQ0FBQyxDQUFDO1lBQzdELElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztRQUN2QixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxpQkFBaUI7WUFDdEIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU07Z0JBQ3pCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLENBQUM7UUFFRDs7V0FFRztRQUNJLFNBQVMsQ0FBQyxPQUFhO1lBQzVCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDeEMsQ0FBQztRQUVEOztXQUVHO1FBQ0ksWUFBWSxDQUFDLFFBQWMsRUFBRSxLQUFXO1lBQzdDLElBQUksS0FBSyxHQUFXLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDN0MsSUFBSSxLQUFLLEdBQUcsQ0FBQztnQkFDWCxPQUFPLEtBQUssQ0FBQztZQUVmLElBQUksY0FBYyxHQUFTLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUM3QyxJQUFJLGNBQWM7Z0JBQ2hCLGNBQWMsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFcEMsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDdkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUM7WUFDN0IsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFFcEIsS0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssbUNBQXFCLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN0RSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsVUFBQSxZQUFZLENBQUMsT0FBTyxDQUFDLG1CQUFtQixFQUFFLENBQUM7Z0JBQ2pFLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBSSxLQUFLLDhDQUEwQixDQUFDLENBQUM7WUFFNUQsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBR00sU0FBUyxDQUFDLGdCQUF3QjtZQUN2QyxPQUFPLENBQUMsSUFBSSxDQUFDLGVBQWUsSUFBSSxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3BELENBQUM7UUFFTSxjQUFjLENBQUMsU0FBZTtZQUNuQyxJQUFJLElBQUksR0FBUyxJQUFJLENBQUM7WUFDdEIsT0FBTyxJQUFJLElBQUksSUFBSSxJQUFJLFNBQVM7Z0JBQzlCLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQ3JCLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLENBQUM7UUFDeEIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksY0FBYyxDQUFDLFFBQWlCO1lBQ3JDLElBQUksWUFBWSxJQUFJLFFBQVEsRUFBRTtnQkFDNUIsS0FBSyxNQUFNLGFBQWEsSUFBSSxRQUFRLENBQUMsVUFBVSxFQUFFO29CQUMvQyxJQUFJLGdCQUFnQixHQUFnQixJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsb0RBQW9EO29CQUN4SCxJQUFJLGVBQWUsR0FBYyxRQUFRLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDO29CQUNwRSxJQUFJLGdCQUFnQixJQUFJLFNBQVMsSUFBSSxlQUFlLElBQUksU0FBUyxFQUFFO3dCQUNqRSxLQUFLLE1BQU0sQ0FBQyxJQUFJLGVBQWUsRUFBRTs0QkFDL0IsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7eUJBQzdEO3FCQUNGO2lCQUNGO2FBQ0Y7WUFDRCxJQUFJLFVBQVUsSUFBSSxRQUFRLEVBQUU7Z0JBQzFCLEtBQUssTUFBTSxTQUFTLElBQUksUUFBUSxDQUFDLFFBQVEsRUFBRTtvQkFDekMsS0FBSyxNQUFNLFNBQVMsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLEVBQUU7d0JBQ3pELFNBQVMsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO3FCQUN4RDtpQkFDRjthQUNGO1FBQ0gsQ0FBQztRQUNELGFBQWE7UUFFYixxQkFBcUI7UUFDckI7O1dBRUc7UUFDSSxnQkFBZ0I7WUFDckIsSUFBSSxHQUFHLEdBQWdCLEVBQUUsQ0FBQztZQUMxQixLQUFLLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7Z0JBQ2hDLEdBQUcsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzthQUN6QztZQUNELE9BQU8sR0FBRyxDQUFDO1FBQ2IsQ0FBQztRQUVEOztXQUVHO1FBQ0ksYUFBYSxDQUFzQixNQUFtQjtZQUMzRCxPQUFZLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVELENBQUM7UUFDRDs7V0FFRztRQUNJLFlBQVksQ0FBc0IsTUFBbUI7WUFDMUQsSUFBSSxJQUFJLEdBQWEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEQsSUFBSSxJQUFJO2dCQUNOLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLFVBQXFCO1lBQ2pDLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEMsQ0FBQztRQUNEOztXQUVHO1FBQ0ksWUFBWSxDQUFDLFVBQXFCO1lBQ3ZDLElBQUksVUFBVSxDQUFDLElBQUksSUFBSSxJQUFJO2dCQUN6QixPQUFPO1lBQ1QsSUFBSSxPQUFPLEdBQWdCLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzVELElBQUksT0FBTyxLQUFLLFNBQVM7Z0JBQ3ZCLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7aUJBRWhELElBQUksT0FBTyxDQUFDLE1BQU0sSUFBSSxVQUFVLENBQUMsV0FBVztnQkFDMUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxhQUFhLFVBQVUsQ0FBQyxJQUFJLHNFQUFzRSxDQUFDLENBQUM7O2dCQUVwSCxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBRTdCLFVBQVUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUIsVUFBVSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssb0NBQXFCLENBQUMsQ0FBQztZQUN6RCxJQUFJLENBQUMseUJBQXlCLENBQUMsSUFBSSxXQUFXLHFDQUFzQixFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxtQ0FBbUM7UUFDbkksQ0FBQztRQUVEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLFVBQXFCO1lBQ2pDLElBQUksQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDbkMsQ0FBQztRQUNEOztXQUVHO1FBQ0ksZUFBZSxDQUFDLFVBQXFCO1lBQzFDLElBQUk7Z0JBQ0YsSUFBSSxnQkFBZ0IsR0FBZ0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3JFLElBQUksT0FBTyxHQUFXLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDM0QsSUFBSSxPQUFPLEdBQUcsQ0FBQztvQkFDYixPQUFPO2dCQUNULFVBQVUsQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLDBDQUF3QixDQUFDLENBQUM7Z0JBQzVELElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLFdBQVcsMkNBQXlCLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLHNDQUFzQztnQkFDdkksZ0JBQWdCLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDcEMsVUFBVSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUMvQjtZQUFDLE9BQU8sTUFBTSxFQUFFO2dCQUNmLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLFVBQVUsbUJBQW1CLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO2FBQzNGO1FBQ0gsQ0FBQztRQUNELGFBQWE7UUFFYix3QkFBd0I7UUFDakIsU0FBUztZQUNkLElBQUksYUFBYSxHQUFrQjtnQkFDakMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2dCQUNmLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTthQUNwQixDQUFDO1lBRUYsSUFBSSxVQUFVLEdBQWtCLEVBQUUsQ0FBQztZQUNuQyxLQUFLLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7Z0JBQ2hDLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQ3RCLEtBQUssSUFBSSxTQUFTLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDM0MsZ0RBQWdEO29CQUNoRCxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQUEsVUFBVSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO2lCQUN4RDthQUNGO1lBQ0QsYUFBYSxDQUFDLFlBQVksQ0FBQyxHQUFHLFVBQVUsQ0FBQztZQUV6QyxJQUFJLFFBQVEsR0FBb0IsRUFBRSxDQUFDO1lBQ25DLEtBQUssSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDL0IsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFBLFVBQVUsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzthQUM1QztZQUNELGFBQWEsQ0FBQyxVQUFVLENBQUMsR0FBRyxRQUFRLENBQUM7WUFFckMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssd0NBQXVCLENBQUMsQ0FBQztZQUNyRCxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxJQUFJLENBQUMsSUFBSSxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUM7WUFDaEMsZ0RBQWdEO1lBRWhELCtFQUErRTtZQUMvRSxLQUFLLElBQUksSUFBSSxJQUFJLGNBQWMsQ0FBQyxVQUFVLEVBQUU7Z0JBQzFDLEtBQUssSUFBSSxtQkFBbUIsSUFBSSxjQUFjLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFO29CQUMvRCxJQUFJLHFCQUFxQixHQUF5QixNQUFNLFVBQUEsVUFBVSxDQUFDLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO29CQUNwRyxJQUFJLENBQUMsWUFBWSxDQUFDLHFCQUFxQixDQUFDLENBQUM7aUJBQzFDO2FBQ0Y7WUFFRCxJQUFJLGNBQWMsQ0FBQyxRQUFRO2dCQUN6QixLQUFLLElBQUksZUFBZSxJQUFJLGNBQWMsQ0FBQyxRQUFRLEVBQUU7b0JBQ25ELElBQUksaUJBQWlCLEdBQWUsTUFBTSxVQUFBLFVBQVUsQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUM7b0JBQ2xGLElBQUksQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsQ0FBQztpQkFDckM7WUFFSCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyw0Q0FBeUIsQ0FBQyxDQUFDO1lBQ3ZELEtBQUssSUFBSSxTQUFTLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO2dCQUMzQyxTQUFTLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyw0Q0FBeUIsQ0FBQyxDQUFDO1lBRTlELElBQUksQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3JDLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUNELGFBQWE7UUFFYjs7V0FFRztRQUNJLGlCQUFpQixDQUFDLFFBQWMsSUFBSSxFQUFFLFNBQWlCLENBQUM7WUFDN0Qsd0NBQXdDO1lBQ3hDLElBQUksQ0FBQyxLQUFLO2dCQUNSLEtBQUssR0FBRyxJQUFJLENBQUM7WUFFZixJQUFJLE1BQU0sR0FBVyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRXhDLElBQUksTUFBTSxHQUFXLE1BQU0sR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDdkQsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLENBQUMsVUFBVTtnQkFDL0IsTUFBTSxJQUFJLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztZQUN2RixNQUFNLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUM7WUFDdkMsS0FBSyxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMsUUFBUSxFQUFFO2dCQUNoQyxNQUFNLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7YUFDckQ7WUFDRCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQsaUJBQWlCO1FBQ2pCOzs7V0FHRztRQUNJLGdCQUFnQixDQUFDLEtBQXFCLEVBQUUsUUFBOEIsRUFBRSxXQUFrRCxLQUFLO1lBQ3BJLElBQUksYUFBYSxHQUEyQixRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDdEYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUM7Z0JBQ3ZCLGFBQWEsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDNUIsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0QyxDQUFDO1FBQ0Q7O1dBRUc7UUFDSSxtQkFBbUIsQ0FBQyxLQUFxQixFQUFFLFFBQThCLEVBQUUsV0FBa0QsS0FBSztZQUN2SSxJQUFJLGdCQUFnQixHQUEyQixRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdkcsSUFBSSxnQkFBZ0I7Z0JBQ2xCLEtBQUssSUFBSSxDQUFDLEdBQVcsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRTtvQkFDM0QsSUFBSSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxRQUFRO3dCQUNqQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLENBQUM7UUFDRDs7OztXQUlHO1FBQ0ksYUFBYSxDQUFDLE1BQWE7WUFDaEMsSUFBSSxTQUFTLEdBQVcsRUFBRSxDQUFDO1lBQzNCLElBQUksUUFBUSxHQUFTLElBQUksQ0FBQztZQUMxQix5QkFBeUI7WUFDekIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUN6RSw0RkFBNEY7WUFDNUYsT0FBTyxRQUFRLENBQUMsTUFBTTtnQkFDcEIsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzdDLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksS0FBSyxDQUFPLElBQUksRUFBRSxHQUFHLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUV0RyxnQkFBZ0I7WUFDaEIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsWUFBWSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUM7WUFDOUYsS0FBSyxJQUFJLENBQUMsR0FBVyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN0RCxJQUFJLFFBQVEsR0FBUyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xDLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLGVBQWUsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUM7Z0JBQ3BGLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDNUQ7WUFFRCxlQUFlO1lBQ2YsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsWUFBWSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7WUFDeEYsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsZUFBZSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUNoRixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ3ZELElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPO2dCQUNqQixPQUFPLElBQUksQ0FBQztZQUVkLGVBQWU7WUFDZixNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQztZQUM3RixLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDakQsSUFBSSxRQUFRLEdBQVMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxlQUFlLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO2dCQUNwRixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2FBQzdEO1lBQ0QsT0FBTyxJQUFJLENBQUMsQ0FBQyxzRUFBc0U7UUFDckYsQ0FBQztRQUNEOztXQUVHO1FBQ0kseUJBQXlCLENBQUMsTUFBYTtZQUM1QyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxZQUFZLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztZQUN4RixNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxlQUFlLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQ2hGLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQywyRUFBMkU7WUFDcEksT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBQ0Q7OztXQUdHO1FBQ0ksY0FBYyxDQUFDLE1BQWE7WUFDakMsbUNBQW1DO1lBQ25DLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDO1lBQzlGLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7WUFDekUsSUFBSSxDQUFDLHVCQUF1QixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZDLENBQUM7UUFFTyx1QkFBdUIsQ0FBQyxNQUFhO1lBQzNDLHFCQUFxQjtZQUNyQixNQUFNLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxlQUFlLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQ2hGLElBQUksUUFBUSxHQUEyQixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDeEUsS0FBSyxJQUFJLE9BQU8sSUFBSSxRQUFRO2dCQUMxQixhQUFhO2dCQUNiLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNsQix5Q0FBeUM7WUFDekMsd0RBQXdEO1lBQ3hELHVCQUF1QjtZQUN2QixNQUFNO1lBRU4sb0JBQW9CO1lBQ3BCLEtBQUssSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDL0IsS0FBSyxDQUFDLHVCQUF1QixDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQ3ZDO1FBQ0gsQ0FBQztRQUVPLGFBQWEsQ0FBQyxVQUFrQyxFQUFFLE1BQWE7WUFDckUsSUFBSSxVQUFVLEVBQUUsTUFBTSxHQUFHLENBQUM7Z0JBQ3hCLEtBQUssSUFBSSxPQUFPLElBQUksVUFBVTtvQkFDNUIsYUFBYTtvQkFDYixPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEIsQ0FBQztLQUVGO0lBaGhCWSxjQUFJLE9BZ2hCaEIsQ0FBQTtBQUNILENBQUMsRUEzaEJTLFNBQVMsS0FBVCxTQUFTLFFBMmhCbEI7QUMzaEJELGtEQUFrRDtBQUNsRCwrQ0FBK0M7QUFDL0MsSUFBVSxTQUFTLENBbUdsQjtBQXJHRCxrREFBa0Q7QUFDbEQsK0NBQStDO0FBQy9DLFdBQVUsU0FBUztJQUNqQjs7OztPQUlHO0lBQ0gsTUFBc0IsU0FBVSxTQUFRLFVBQUEsT0FBTztRQVk3QztZQUNFLEtBQUssRUFBRSxDQUFDO1lBTFYsVUFBSyxHQUFnQixJQUFJLENBQUM7WUFDaEIsY0FBUyxHQUFZLElBQUksQ0FBQztZQUMxQixXQUFNLEdBQVksSUFBSSxDQUFDO1lBSS9CLElBQUksQ0FBQyxnQkFBZ0Isd0JBQWUsQ0FBQyxNQUFtQixFQUFFLEVBQUU7Z0JBQzFELElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtvQkFDZCx1RUFBdUU7b0JBQ3ZFLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztvQkFDL0IsWUFBWTtvQkFDWixNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUN2RixJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztpQkFDbEM7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFmRCxLQUFLLENBQXFCO1FBaUJoQixNQUFNLENBQUMsZ0JBQWdCLENBQUMsU0FBMkIsSUFBWSxPQUFPLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFHM0gsSUFBVyxRQUFRO1lBQ2pCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNyQixDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFXLFdBQVc7WUFDcEIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3hCLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsSUFBSTtZQUNiLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNwQixDQUFDO1FBRU0sUUFBUSxDQUFDLEdBQVk7WUFDMUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyw4Q0FBMEIsQ0FBQyxpREFBMkIsQ0FBQyxDQUFDLENBQUM7UUFDN0YsQ0FBQztRQUVEOztXQUVHO1FBQ0ksWUFBWSxDQUFDLFVBQXVCO1lBQ3pDLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxVQUFVO2dCQUMxQixPQUFPO1lBQ1QsSUFBSSxpQkFBaUIsR0FBUyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ3pDLElBQUk7Z0JBQ0YsSUFBSSxpQkFBaUI7b0JBQ25CLGlCQUFpQixDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDMUMsSUFBSSxDQUFDLEtBQUssR0FBRyxVQUFVLENBQUM7Z0JBQ3hCLElBQUksSUFBSSxDQUFDLEtBQUs7b0JBQ1osSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDakM7WUFBQyxPQUFPLE1BQU0sRUFBRTtnQkFDZixJQUFJLENBQUMsS0FBSyxHQUFHLGlCQUFpQixDQUFDO2FBQ2hDO1FBQ0gsQ0FBQztRQUVELGtCQUFrQjtRQUNYLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0I7Z0JBQ2pDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTthQUNwQixDQUFDO1lBQ0YsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUNNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDckMsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRU0sS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFpQixFQUFFLGFBQXVCLElBQUksRUFBRSxrQkFBMkIsSUFBSTtZQUNqRyxNQUFNLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSxlQUFlLENBQUMsQ0FBQztZQUMxRCxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssV0FBVztnQkFDMUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbkMsQ0FBQztRQUVTLGFBQWEsQ0FBQyxRQUFpQjtZQUN2QyxPQUFPLFFBQVEsQ0FBQyxTQUFTLENBQUM7WUFDMUIsT0FBTyxRQUFRLENBQUMsUUFBUSxDQUFDO1FBQzNCLENBQUM7O0lBdkZELGtHQUFrRztJQUMzRSxtQkFBUyxHQUFxQixTQUFTLENBQUM7SUFDL0QscUZBQXFGO0lBQzlELG9CQUFVLEdBQXVCLEVBQUUsQ0FBQztJQU52QyxtQkFBUyxZQTRGOUIsQ0FBQTtBQUNILENBQUMsRUFuR1MsU0FBUyxLQUFULFNBQVMsUUFtR2xCO0FDckdELElBQVUsU0FBUyxDQWtFbEI7QUFsRUQsV0FBVSxTQUFTO0lBQ2pCOzs7O09BSUc7SUFDSCxNQUFhLGNBQWM7UUFBM0I7WUFDRSxZQUFPLEdBQVcsQ0FBQyxDQUFDO1lBQ3BCLFdBQU0sR0FBYSxJQUFJLEtBQUssRUFBSyxDQUFDO1FBeURwQyxDQUFDO1FBMURDLE9BQU8sQ0FBYTtRQUNwQixNQUFNLENBQTRCO1FBQ2xDLHNCQUFzQjtRQUV0QixvQ0FBb0M7UUFDcEMsa0RBQWtEO1FBQ2xELHdCQUF3QjtRQUN4QixJQUFJO1FBRUosSUFBVyxNQUFNO1lBQ2YsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7UUFFRDs7V0FFRztRQUNJLEtBQUs7WUFDVixJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztRQUNuQixDQUFDO1FBRU0sT0FBTztZQUNaLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNmLENBQUM7UUFFTSxJQUFJLENBQUMsTUFBUztZQUNuQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxNQUFNLENBQUM7WUFDbkMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2YsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7UUFFTSxHQUFHO1lBQ1IsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2YsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNuQyxDQUFDO1FBRUQ7OztXQUdHO1FBQ0gsd0JBQXdCO1FBQ3hCLDZDQUE2QztRQUM3QyxzQkFBc0I7UUFDdEIsMENBQTBDO1FBQzFDLE1BQU07UUFDTixnREFBZ0Q7UUFDaEQsd0NBQXdDO1FBQ3hDLElBQUk7UUFFRyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztZQUN2QixLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUU7Z0JBQzNDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRU0sU0FBUyxDQUFDLEtBQTZCO1lBQzVDLElBQUksTUFBTSxHQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckQsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNuQixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO0tBQ0Y7SUEzRFksd0JBQWMsaUJBMkQxQixDQUFBO0FBQ0gsQ0FBQyxFQWxFUyxTQUFTLEtBQVQsU0FBUyxRQWtFbEI7QUNsRUQsSUFBVSxTQUFTLENBY2xCO0FBZEQsV0FBVSxTQUFTO0lBQ2pCLDZFQUE2RTtJQUM3RSxNQUFhLGNBQWM7UUFFbEIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxZQUFzQixFQUFFLFNBQWdDO1lBQzNFLElBQUksU0FBUyxHQUFhLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFFBQVEsR0FBRyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDL0UsSUFBSSxDQUFDLFNBQVMsRUFBRTtnQkFDZCxVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMscUNBQXFDLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ3hFO1lBQ0QsTUFBTSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLGVBQWUsRUFBRTtnQkFDN0QsS0FBSyxFQUFFLFNBQVM7YUFDakIsQ0FBQyxDQUFDO1FBQ0wsQ0FBQztLQUNGO0lBWFksd0JBQWMsaUJBVzFCLENBQUE7QUFDSCxDQUFDLEVBZFMsU0FBUyxLQUFULFNBQVMsUUFjbEI7QUNkRCxJQUFVLFNBQVMsQ0FvS2xCO0FBcEtELFdBQVUsU0FBUztJQUNqQixxREFBcUQ7SUFDckQsTUFBYSxvQkFBb0I7UUFDeEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFzQjtZQUMzQyxNQUFNLENBQUMsY0FBYyxDQUFDLFlBQVksRUFBRSxZQUFZLEVBQUU7Z0JBQ2hELEtBQUssRUFBRSxvQkFBb0IsQ0FBQyxVQUFVO2FBQ3ZDLENBQUMsQ0FBQztZQUNILE1BQU0sQ0FBQyxjQUFjLENBQUMsWUFBWSxFQUFFLGVBQWUsRUFBRTtnQkFDbkQsS0FBSyxFQUFFLG9CQUFvQixDQUFDLGFBQWE7YUFDMUMsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUUsZUFBZSxFQUFFO2dCQUNuRCxLQUFLLEVBQUUsb0JBQW9CLENBQUMsYUFBYTthQUMxQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBRU0sTUFBTSxDQUFDLFVBQVU7WUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO2dCQUNmLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUV2QixJQUFJLElBQUksR0FBMkIsVUFBQSxXQUFXLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztZQUNyRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoQyxDQUFDO1FBRU0sTUFBTSxDQUFDLGFBQWE7WUFDekIsSUFBSSxJQUFJLEdBQTJCLFVBQUEsV0FBVyxDQUFDLG1CQUFtQixFQUFFLENBQUM7WUFDckUsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO2dCQUNoQixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDakMsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO2dCQUN2QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7Z0JBQ3JCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQzthQUNyQjtRQUNILENBQUM7UUFFUyxNQUFNLENBQUMsYUFBYTtZQUM1QixVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsdUJBQXVCLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2hELElBQUksSUFBSSxHQUEyQixVQUFBLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBQ3JFLElBQUksT0FBTyxHQUFpQixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFFakQsSUFBSTtnQkFDRixJQUFJLFNBQVMsR0FBZ0IsYUFBYSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLHNCQUFzQixDQUFDLGFBQWEsQ0FBQyxDQUFDO2dCQUMvRyxJQUFJLFdBQVcsR0FBZ0IsYUFBYSxDQUFDLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxFQUFFLHNCQUFzQixDQUFDLGVBQWUsQ0FBQyxDQUFDO2dCQUVySCxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxVQUFBLFdBQVcsQ0FBQyxNQUFNLENBQWMsU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDdkUsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsVUFBQSxXQUFXLENBQUMsTUFBTSxDQUFjLFdBQVcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pFLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBRTFCLElBQUksS0FBSyxHQUFXLFVBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBUyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDaEYsSUFBSSxLQUFLLEtBQUssRUFBRSxFQUFFO29CQUNoQixNQUFNLElBQUksS0FBSyxDQUFDLHdCQUF3QixHQUFHLEtBQUssQ0FBQyxDQUFDO2lCQUNuRDtnQkFFRCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztnQkFDdkIsSUFBSSxDQUFDLFVBQVUsR0FBRyxnQkFBZ0IsRUFBRSxDQUFDO2dCQUNyQyxJQUFJLENBQUMsUUFBUSxHQUFHLGNBQWMsRUFBRSxDQUFDO2dCQUVqQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO29CQUNoQyxPQUFPO2dCQUVULElBQUksQ0FBQyxVQUFBLFdBQVcsQ0FBQyxTQUFTO29CQUN4QixVQUFBLFdBQVcsQ0FBQyxTQUFTLEdBQUcsZUFBZSxFQUFFLENBQUM7Z0JBQzVDLElBQUksQ0FBQyxVQUFBLFdBQVcsQ0FBQyx3QkFBd0I7b0JBQ3ZDLFVBQUEsV0FBVyxDQUFDLHdCQUF3QixHQUFHLDhCQUE4QixFQUFFLENBQUM7Z0JBRTFFLG9DQUFvQztnQkFDcEMsTUFBTSxVQUFVLEdBQVcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sRUFBRSxVQUFBLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzFGLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLFVBQUEsY0FBYyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUM5RTtZQUFDLE9BQU8sTUFBTSxFQUFFO2dCQUNmLFVBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDcEIsUUFBUSxDQUFDO2FBQ1Y7WUFFRCxTQUFTLGFBQWEsQ0FBQyxXQUFtQixFQUFFLFdBQW1CO2dCQUM3RCxJQUFJLFdBQVcsR0FBZ0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDOUQsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUM7Z0JBQzVDLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ2hDLElBQUksS0FBSyxHQUFXLFVBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBUyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztnQkFDbkYsSUFBSSxLQUFLLEtBQUssRUFBRSxFQUFFO29CQUNoQixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO29CQUV6QixNQUFNLElBQUksS0FBSyxDQUFDLDBCQUEwQixHQUFHLEtBQUssQ0FBQyxDQUFDO2lCQUNyRDtnQkFDRCxvQ0FBb0M7Z0JBQ3BDLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsV0FBVyxFQUFFLHNCQUFzQixDQUFDLGNBQWMsQ0FBQyxFQUFFO29CQUNoRixLQUFLLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7b0JBQzFDLE9BQU8sSUFBSSxDQUFDO2lCQUNiO2dCQUNELE9BQU8sV0FBVyxDQUFDO1lBQ3JCLENBQUM7WUFFRCxTQUFTLGdCQUFnQjtnQkFDdkIsSUFBSSxrQkFBa0IsR0FBK0IsRUFBRSxDQUFDO2dCQUN4RCxJQUFJLGNBQWMsR0FBVyxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFFLHNCQUFzQixDQUFDLGlCQUFpQixDQUFDLENBQUM7Z0JBQ3pHLEtBQUssSUFBSSxDQUFDLEdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBRyxjQUFjLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQy9DLElBQUksYUFBYSxHQUFvQixVQUFBLFdBQVcsQ0FBQyxNQUFNLENBQWtCLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQzNHLElBQUksQ0FBQyxhQUFhLEVBQUU7d0JBQ2xCLE1BQU07cUJBQ1A7b0JBRUQsa0JBQWtCLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUU5RjtnQkFDRCxPQUFPLGtCQUFrQixDQUFDO1lBQzVCLENBQUM7WUFFRCxTQUFTLGNBQWM7Z0JBQ3JCLElBQUksZ0JBQWdCLEdBQTZDLEVBQUUsQ0FBQztnQkFDcEUsSUFBSSxZQUFZLEdBQVcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxzQkFBc0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztnQkFDckcsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDN0MsSUFBSSxJQUFJLEdBQW9CLFVBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBa0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNuRyxJQUFJLENBQUMsSUFBSSxFQUFFO3dCQUNULE1BQU07cUJBQ1A7b0JBQ0QsSUFBSSxRQUFRLEdBQXlCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUNqRixJQUFJLFFBQVE7d0JBQ1YsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLFVBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBdUIsUUFBUSxDQUFDLENBQUM7aUJBQ3BGO2dCQUNELE9BQU8sZ0JBQWdCLENBQUM7WUFDMUIsQ0FBQztZQUVELFNBQVMsZUFBZTtnQkFDdEIsTUFBTSxVQUFVLEdBQVcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sRUFBRSxVQUFBLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzFGLE1BQU0sU0FBUyxHQUFXLElBQUksQ0FBQyw4QkFBOEIsQ0FDM0QsT0FBTyxFQUNQLFVBQVUsRUFDVixJQUFJLENBQUMsdUJBQXVCLENBQzdCLENBQUM7Z0JBQ0YsTUFBTSxHQUFHLEdBQWdCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztnQkFDN0MsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUMxQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDbkUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUMzQyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsVUFBQSxjQUFjLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztnQkFFN0UsT0FBTyxHQUFHLENBQUM7WUFDYixDQUFDO1lBRUQsU0FBUyw4QkFBOEI7Z0JBQ3JDLE1BQU0sZ0JBQWdCLEdBQWE7b0JBQ2pDLHNCQUFzQjtvQkFDdEIsZ0JBQWdCO29CQUNoQixlQUFlO29CQUNmLG9CQUFvQjtvQkFDcEIsMkJBQTJCO29CQUMzQixxQkFBcUI7b0JBQ3JCLG9CQUFvQjtpQkFDckIsQ0FBQztnQkFFRixNQUFNLGtCQUFrQixHQUF1QixJQUFJLENBQUMsaUJBQWlCLENBQ25FLE9BQU8sRUFDUCxnQkFBZ0IsQ0FDakIsQ0FBQztnQkFFRixNQUFNLGtCQUFrQixHQUFhLElBQUksQ0FBQyxpQkFBaUIsQ0FDekQsT0FBTyxFQUNQLGtCQUFrQixFQUNsQixJQUFJLENBQUMsY0FBYyxDQUNwQixDQUFDO2dCQUVGLE1BQU0sdUJBQXVCLEdBQWdELEVBQUUsQ0FBQztnQkFDaEYsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsdUJBQXVCLENBQUMsS0FBSyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFFekcsT0FBTyx1QkFBdUIsQ0FBQztZQUNqQyxDQUFDO1FBQ0gsQ0FBQztLQUNGO0lBaktZLDhCQUFvQix1QkFpS2hDLENBQUE7QUFDSCxDQUFDLEVBcEtTLFNBQVMsS0FBVCxTQUFTLFFBb0tsQjtBQ3BLRCxJQUFVLFNBQVMsQ0F3Q2xCO0FBeENELFdBQVUsU0FBUztJQUVqQixtREFBbUQ7SUFDbkQsTUFBYSxrQkFBbUIsU0FBUSxVQUFBLGNBQWM7UUFDN0MsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFzQjtZQUMzQyxVQUFBLGNBQWMsQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLGtCQUFrQixDQUFDLENBQUM7UUFDMUQsQ0FBQztRQUVTLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBb0IsT0FBc0IsRUFBRSxZQUErQjtZQUMzRyxJQUFJLE9BQU8sR0FBeUIsT0FBTyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUNuRSxJQUFJLEtBQUssR0FBVSxVQUFBLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDdkUsVUFBQSxXQUFXLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQzFFLENBQUM7UUFFUyxNQUFNLENBQUMsbUJBQW1CLENBQXNCLE9BQXNCLEVBQUUsWUFBK0I7WUFDL0csa0JBQWtCLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUM7WUFDdkUsSUFBSSxPQUE2QixDQUFDO1lBQ2xDLE9BQU8sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQzFDLFVBQUEsV0FBVyxDQUFDLG1CQUFtQixFQUFFLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEUsT0FBTyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDekMsVUFBQSxXQUFXLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNyRSxDQUFDO1FBRVMsTUFBTSxDQUFDLGtCQUFrQixDQUFxQixPQUFzQixFQUFFLFlBQStCO1lBQzdHLGtCQUFrQixDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBRXZFLElBQUksSUFBSSxHQUEyQixVQUFBLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBQ3JFLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDN0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxFQUFFLEtBQUssRUFBRSxZQUFZLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDNUYsQ0FBQztRQUNTLE1BQU0sQ0FBQywyQkFBMkIsQ0FBOEIsT0FBc0IsRUFBRSxZQUErQjtZQUMvSCxrQkFBa0IsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FBQztZQUV6RSxJQUFJLElBQUksR0FBMkIsVUFBQSxXQUFXLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztZQUNyRSxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQzdCLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNqRCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsRUFBRSxLQUFLLEVBQUUsWUFBWSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQzVGLENBQUM7S0FDRjtJQXBDWSw0QkFBa0IscUJBb0M5QixDQUFBO0FBQ0gsQ0FBQyxFQXhDUyxTQUFTLEtBQVQsU0FBUyxRQXdDbEI7QUN4Q0QsSUFBVSxTQUFTLENBaUhsQjtBQWpIRCxXQUFVLFNBQVM7SUFDakIsTUFBYSxrQkFBa0I7UUFDdEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFzQjtZQUMzQyxNQUFNLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsa0JBQWtCLEVBQUU7Z0JBQ2hFLEtBQUssRUFBRSxrQkFBa0IsQ0FBQyxnQkFBZ0I7YUFDM0MsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLGtCQUFrQixFQUFFO2dCQUNoRSxLQUFLLEVBQUUsa0JBQWtCLENBQUMsZ0JBQWdCO2FBQzNDLENBQUMsQ0FBQztZQUNILE1BQU0sQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxxQkFBcUIsRUFBRTtnQkFDbkUsS0FBSyxFQUFFLGtCQUFrQixDQUFDLG1CQUFtQjthQUM5QyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBRVMsTUFBTSxDQUFDLGdCQUFnQixDQUFhLE9BQXNCO1lBQ2xFLElBQUksSUFBSSxHQUEyQixVQUFBLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBRXJFLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLFVBQUEsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzFELElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQ25DLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksSUFBSTtvQkFDOUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEdBQUc7d0JBQ3JCLFFBQVEsRUFBRSxZQUFZLENBQUMsc0JBQXNCLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDO3dCQUN6RixPQUFPLEVBQUUsWUFBWSxDQUFDLHNCQUFzQixDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDO3dCQUMvRixPQUFPLEVBQUUsWUFBWSxDQUFDLHNCQUFzQixDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQzt3QkFDdkYsVUFBVSxFQUFFLFlBQVksQ0FBQyxzQkFBc0IsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUM7d0JBQzdGLFFBQVEsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxNQUFNO3FCQUM3QyxDQUFDO2dCQUNKLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUM7YUFDN0I7aUJBQ0k7Z0JBQ0gsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sSUFBSSxJQUFJO29CQUNoQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRzt3QkFDdkIsUUFBUSxFQUFFLFlBQVksQ0FBQyxzQkFBc0IsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7d0JBQ3JGLE9BQU8sRUFBRSxZQUFZLENBQUMsc0JBQXNCLENBQUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUM7d0JBQzNGLE9BQU8sRUFBRSxZQUFZLENBQUMsc0JBQXNCLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDO3dCQUN6RixVQUFVLEVBQUUsWUFBWSxDQUFDLHNCQUFzQixDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQzt3QkFDekYsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLE1BQU07cUJBQ3pDLENBQUM7Z0JBQ0osT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQzthQUMvQjtZQUVELFNBQVMsWUFBWSxDQUFDLEtBQWEsRUFBRSxNQUFrQztnQkFDckUsSUFBSSxNQUFNLEdBQWdCLFVBQUEsV0FBVyxDQUFDLE1BQU0sQ0FBYyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQztnQkFDL0UsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQy9CLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxzQkFBc0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDbkUsT0FBTyxNQUFNLENBQUM7WUFDaEIsQ0FBQztRQUNILENBQUM7UUFFUyxNQUFNLENBQUMsZ0JBQWdCLENBQWEsT0FBc0IsRUFBRSxlQUEwQixFQUFFLGNBQXlCLEVBQUUsR0FBWTtZQUN2SSxJQUFJLGFBQWEsR0FBa0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ2xFLElBQUksSUFBSSxHQUEyQixVQUFBLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBRXJFLFNBQVMsU0FBUyxDQUFDLEtBQWEsRUFBRSxPQUFvQjtnQkFDcEQsSUFBSSxTQUFTLEdBQVcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbEQsSUFBSSxTQUFTLElBQUksU0FBUztvQkFDeEIsT0FBTztnQkFDVCxJQUFJLENBQUMsVUFBVSxDQUFDLHNCQUFzQixDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDOUQsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUN4QyxVQUFBLFdBQVcsQ0FBQyxxQkFBcUIsQ0FDL0IsU0FBUyxFQUNULEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsc0JBQXNCLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQzVGLENBQUM7WUFDSixDQUFDO1lBRUQsSUFBSSxPQUE2QixDQUFDO1lBRWxDLE9BQU8sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDOUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsY0FBYyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFFNUQsT0FBTyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUMvQyxJQUFJLE9BQU87Z0JBQ1QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsZUFBZSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFFL0QsT0FBTyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsd0JBQXdCLENBQUMsQ0FBQztZQUNyRCxJQUFJLE9BQU8sRUFBRTtnQkFDWCxJQUFJLFlBQVksR0FBYyxVQUFBLFNBQVMsQ0FBQyxTQUFTLENBQUMsVUFBQSxTQUFTLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hGLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLFlBQVksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2FBQzNEO1lBRUQsU0FBUyxDQUFDLGVBQWUsRUFBRSxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDbkQsU0FBUyxDQUFDLGFBQWEsRUFBRSxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7WUFHaEQsNkRBQTZEO1lBQzdELElBQUksU0FBUyxHQUFXLE9BQU8sQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDM0QsSUFBSSxTQUFTLEVBQUU7Z0JBQ2IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQyxZQUFZLEVBQUUsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUMvRSxJQUFJLENBQUMsdUJBQXVCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxvQkFBb0I7Z0JBQzdELElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLHNCQUFzQixDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ25GO1lBRUQscUVBQXFFO1lBQ3JFLE9BQU8sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ25DLElBQUksT0FBTztnQkFDVCxVQUFBLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFFNUQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxzQkFBc0IsQ0FBQyxvQkFBb0IsRUFBRSxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDcEYsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVTLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxjQUE2QjtZQUNoRSxJQUFJLElBQUksR0FBMkIsVUFBQSxXQUFXLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztZQUNyRSxJQUFJLGNBQWMsRUFBRTtnQkFDbEIsd0RBQXdEO2dCQUN4RCxJQUFJLENBQUMsVUFBVSxDQUFDLHNCQUFzQixDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDM0QsSUFBSSxDQUFDLFlBQVksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxZQUFZLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUM3QyxJQUFJLENBQUMsVUFBVSxDQUFDLHNCQUFzQixDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUNuRSxJQUFJLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUMzQztRQUNILENBQUM7S0FDRjtJQS9HWSw0QkFBa0IscUJBK0c5QixDQUFBO0FBQ0gsQ0FBQyxFQWpIUyxTQUFTLEtBQVQsU0FBUyxRQWlIbEI7QUNqSEQsSUFBVSxTQUFTLENBNlJsQjtBQTdSRCxXQUFVLFNBQVM7SUFDakIsSUFBaUIsWUFBWSxDQW1DNUI7SUFuQ0QsV0FBaUIsWUFBWTtRQUMzQixJQUFZLFFBWVg7UUFaRCxXQUFZLFFBQVE7WUFDbEIsbUJBQW1CO1lBQ25CLGlDQUFxQixDQUFBO1lBQ3JCLHVDQUEyQixDQUFBO1lBQzNCLDZDQUFpQyxDQUFBO1lBQ2pDLGlDQUFxQixDQUFBO1lBQ3JCLDZCQUFpQixDQUFBO1lBQ2pCLDJCQUFlLENBQUE7WUFDZix1Q0FBMkIsQ0FBQTtZQUMzQixzQ0FBMEIsQ0FBQTtZQUMxQiw2QkFBaUIsQ0FBQTtZQUNqQix3Q0FBNEIsQ0FBQTtRQUM5QixDQUFDLEVBWlcsUUFBUSxHQUFSLHFCQUFRLEtBQVIscUJBQVEsUUFZbkI7UUFFWSx3Q0FBMkIsR0FBK0M7WUFDckYsb0NBQW9DO1lBQ3BDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDO1lBQ25DLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO1lBQ3RDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDO1lBQ3pDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDO1lBQ25DLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO1lBQ2pDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ2hDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO1lBQ3RDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDO1lBQ3RDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO1lBQ2pDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO1NBQ3hDLENBQUM7UUFFVyxpQ0FBb0IsR0FBOEI7WUFDN0QsY0FBYyxFQUFFLDJCQUEyQjtZQUMzQyxVQUFVLEVBQUUsdUJBQXVCO1lBQ25DLFVBQVUsRUFBRSx1QkFBdUI7WUFDbkMsVUFBVSxFQUFFLGFBQWE7U0FDMUIsQ0FBQztJQUNKLENBQUMsRUFuQ2dCLFlBQVksR0FBWixzQkFBWSxLQUFaLHNCQUFZLFFBbUM1QjtJQUVEOzs7T0FHRztJQUNILE1BQWEsa0NBQW1DLFNBQVEsVUFBQSxvQkFBb0I7UUEyQ25FLE1BQU0sQ0FBVSxRQUFRLENBQUMsWUFBc0I7WUFDcEQsS0FBSyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDdkMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLHVCQUF1QixFQUFFO2dCQUNyRSxLQUFLLEVBQUUsa0NBQWtDLENBQUMscUJBQXFCO2FBQ2hFLENBQUMsQ0FBQztZQUNILE1BQU0sQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSx5QkFBeUIsRUFBRTtnQkFDdkUsS0FBSyxFQUFFLGtDQUFrQyxDQUFDLHVCQUF1QjthQUNsRSxDQUFDLENBQUM7UUFDTCxDQUFDO1FBRU0sTUFBTSxDQUFDLHFCQUFxQjtZQUNqQyxJQUFJLElBQUksR0FBd0IsSUFBSSxDQUFDLElBQUksQ0FBQztZQUMxQyxJQUFJLFFBQVEsR0FBa0MsSUFBSSxFQUFFLFFBQVEsQ0FBQztZQUM3RCxJQUFJLFFBQVEsR0FBa0MsSUFBSSxFQUFFLFFBQVEsQ0FBQztZQUU3RCxJQUFJLE1BQU0sR0FBVyxJQUFJLENBQUMsa0JBQWtCO2lCQUN6QyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsNEJBQTRCLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO2lCQUN2SCxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsa0NBQWtDLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUM7aUJBQ3JILE9BQU8sQ0FBQyxlQUFlLEVBQUUsa0NBQWtDLENBQUMsdUJBQXVCLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO2lCQUN2RyxPQUFPLENBQUMsZUFBZSxFQUFFLFFBQVEsSUFBSSxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQzdFLE9BQU8sQ0FBQyxlQUFlLEVBQUUsa0NBQWtDLENBQUMsdUJBQXVCLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO2lCQUN2RyxPQUFPLENBQUMsZUFBZSxFQUFFLFFBQVEsSUFBSSxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7aUJBQzdFLFVBQVUsQ0FBQyxZQUFZLEVBQUUsa0NBQWtDLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQzNGLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxNQUFNLENBQUMsdUJBQXVCO1lBQ25DLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxrQkFBa0IsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLDBCQUEwQixDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3JJLENBQUM7UUFFRCx5QkFBeUI7UUFFakIsTUFBTSxDQUFDLGlCQUFpQixDQUFDLFVBQTRDLEVBQUUsY0FBb0Q7WUFDakksSUFBSSxDQUFDLFVBQVU7Z0JBQUUsT0FBTyxFQUFFLENBQUM7WUFFM0IsT0FBTyxVQUFVO2lCQUNkLEdBQUcsQ0FBQyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsMEJBQTBCLEdBQUcsY0FBYyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxrQ0FBa0MsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUM7aUJBQ3BLLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsU0FBUyxDQUFDLElBQUksTUFBTSxTQUFTLENBQUMsS0FBSyxHQUFHLENBQUM7aUJBQ2pFLE1BQU0sQ0FBQyxDQUFDLFlBQW9CLEVBQUUsS0FBYSxFQUFFLEVBQUUsQ0FBQyxHQUFHLFlBQVksS0FBSyxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUN0RixDQUFDO1FBRU8sTUFBTSxDQUFDLHVCQUF1QixDQUFDLGdCQUFpRCxFQUFFLGFBQWdDO1lBQ3hILElBQUksQ0FBQyxnQkFBZ0IsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLElBQUksQ0FBQztnQkFBRSxPQUFPLEVBQUUsQ0FBQztZQUVqRSxJQUFJLGVBQWUsR0FBOEUsZ0JBQWdCO2lCQUM5RyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUU7Z0JBQ1gsSUFBSSxPQUFPLEdBQVksS0FBSyxDQUFDLGNBQWMsS0FBSyxPQUFPLENBQUM7Z0JBQ3hELElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQzVFLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxrQ0FBa0MsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQTZCLENBQUM7Z0JBRW5KLE9BQU8sQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDekMsQ0FBQyxDQUFDLENBQUM7WUFFTCxJQUFJLElBQUksR0FBVyxFQUFFLENBQUM7WUFDdEIsSUFBSSxJQUFJLGVBQWU7aUJBQ3BCLEdBQUcsQ0FBQyxDQUFDLENBQUMsZUFBZSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsTUFBYyxFQUFFLEVBQUU7Z0JBQ3JELElBQUksUUFBUSxHQUFXLE1BQU0sR0FBRyxhQUFhLENBQUM7Z0JBQzlDLElBQUksZUFBZSxJQUFJLFFBQVEsRUFBRTtvQkFDL0IsSUFBSSxTQUFTLEdBQStCLENBQUMsTUFBYyxFQUFFLEVBQUUsQ0FBQyxHQUFHLE1BQU0sTUFBTSxVQUFBLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztvQkFDOUYsT0FBTyxrQkFBa0IsUUFBUSxNQUFNLFNBQVMsQ0FBQyxFQUFFLENBQUM7K0JBQ2pDLFFBQVEsTUFBTSxTQUFTLENBQUMsRUFBRSxDQUFDOytCQUMzQixRQUFRLE1BQU0sU0FBUyxDQUFDLEVBQUUsQ0FBQzsyQkFDL0IsUUFBUSxtQkFBbUIsUUFBUTsyQkFDbkMsUUFBUSxtQkFBbUIsUUFBUTsyQkFDbkMsUUFBUSxtQkFBbUIsUUFBUTsyQkFDbkMsUUFBUSxtQkFBbUIsUUFBUTsyQkFDbkMsUUFBUSxtQkFBbUIsUUFBUTsyQkFDbkMsUUFBUSxtQkFBbUIsUUFBUSxNQUFNLENBQUM7aUJBQzFEOztvQkFDQyxPQUFPLEVBQUUsQ0FBQztZQUNkLENBQUMsQ0FBQztpQkFDRCxNQUFNLENBQUMsQ0FBQyxlQUF1QixFQUFFLEVBQUUsQ0FBQyxlQUFlLElBQUksRUFBRSxDQUFDO2lCQUMxRCxNQUFNLENBQUMsQ0FBQyxZQUFvQixFQUFFLEtBQWEsRUFBRSxFQUFFLENBQUMsR0FBRyxZQUFZLEtBQUssS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDcEYsSUFBSSxJQUFJLElBQUksQ0FBQztZQUViLElBQUksSUFBSSxXQUFXLGFBQWEsS0FBSyxDQUFDO1lBQ3RDLElBQUksSUFBSSxlQUFlO2lCQUNwQixHQUFHLENBQUMsQ0FBQyxDQUFDLGVBQWUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLE1BQWMsRUFBRSxFQUFFO2dCQUNyRCxJQUFJLFFBQVEsR0FBVyxNQUFNLEdBQUcsYUFBYSxDQUFDO2dCQUM5QyxRQUFRLGVBQWUsRUFBRTtvQkFDdkIsS0FBSyxXQUFXO3dCQUNkLE9BQU87Ozs7Z0JBSUwsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsQ0FBQztvQkFDN0IsS0FBSyxRQUFRO3dCQUNYLE9BQU87cUJBQ0EsUUFBUSxXQUFXLFFBQVEsVUFBVSxRQUFRLFdBQVcsUUFBUSxXQUFXLFFBQVE7cUJBQ25GLFFBQVEsV0FBVyxRQUFRLFdBQVcsUUFBUSxXQUFXLFFBQVEsV0FBVyxRQUFRLFVBQVUsUUFBUSxXQUFXLFFBQVEsV0FBVyxRQUFRLFdBQVcsUUFBUSxXQUFXLFFBQVEsVUFBVSxRQUFRLFdBQVcsUUFBUTtxQkFDdk4sUUFBUSxXQUFXLFFBQVEsV0FBVyxRQUFRLFdBQVcsUUFBUSxXQUFXLFFBQVEsVUFBVSxRQUFRLFdBQVcsUUFBUSxXQUFXLFFBQVEsV0FBVyxRQUFRLFdBQVcsUUFBUSxVQUFVLFFBQVEsV0FBVyxRQUFROztnQkFFNU4sQ0FBQztvQkFDTCxLQUFLLE9BQU87d0JBQ1YsT0FBTztnQkFDTCxFQUFFO3FCQUNHLEVBQUU7MEJBQ0csRUFBRTs7Z0JBRVosQ0FBQztvQkFDTDt3QkFDRSxNQUFNLFlBQVksVUFBQSxjQUFjLENBQUMsSUFBSSxNQUFNLGVBQWUsMkJBQTJCLENBQUM7aUJBQ3pGO1lBQ0gsQ0FBQyxDQUFDO2lCQUNELE1BQU0sQ0FBQyxDQUFDLFlBQW9CLEVBQUUsS0FBYSxFQUFFLEVBQUUsQ0FBQyxHQUFHLFlBQVksUUFBUSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQ25GLElBQUksSUFBSSxLQUFLLENBQUM7WUFFZCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTyxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQWlDO1lBQzVELElBQUksQ0FBQyxNQUFNO2dCQUFFLE9BQU8sRUFBRSxDQUFDO1lBRXZCLElBQUksSUFBSSxHQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUM1RCxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQVUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsa0NBQWtDLENBQUMsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztpQkFDdkcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRWQsT0FBTyxRQUFRLElBQUksSUFBSSxDQUFDO1FBQzFCLENBQUM7UUFFTyxNQUFNLENBQUMsa0JBQWtCLENBQUMsV0FBb0M7WUFDcEUsSUFBSSxZQUFZLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxFQUFFO2dCQUN4QyxJQUFJLFVBQVUsR0FBYSxFQUFFLENBQUM7Z0JBQzlCLEtBQUssSUFBSSxLQUFLLElBQUksV0FBVyxDQUFDLFVBQVUsRUFBRTtvQkFDeEMsVUFBVSxDQUFDLElBQUksQ0FBQyxrQ0FBa0MsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2lCQUMvRTtnQkFDRCxPQUFPLGtDQUFrQyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7YUFDOUY7WUFFRCxJQUFJLFlBQVksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLEVBQUU7Z0JBQ3hDLE9BQU8sWUFBWSxDQUFDLG9CQUFvQixDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSwwQkFBMEIsR0FBRyxXQUFXLENBQUMsS0FBSyxDQUFDO2FBQy9HO1lBRUQsSUFBSSxZQUFZLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxFQUFFO2dCQUN4QyxJQUFJLEtBQUssR0FBVyxXQUFXLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO2dCQUNqRCxPQUFPLEdBQUcsS0FBSyxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7YUFDckQ7WUFFRCxJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7Z0JBQ3BDLElBQUksSUFBSSxHQUFXLFdBQVcsQ0FBQyxJQUFJO3FCQUNoQyxVQUFVLENBQUMseUJBQXlCLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLFlBQVksQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsSUFBSSwwQkFBMEIsR0FBRyxNQUFNLENBQUM7cUJBQ25JLFVBQVUsQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxDQUFDO2dCQUNsRSxJQUFJLEdBQUcsa0NBQWtDLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBRWpFLE9BQU8sSUFBSSxDQUFDO2FBQ2I7WUFFRCxNQUFNLFlBQVksVUFBQSxjQUFjLENBQUMsSUFBSSwyREFBMkQsQ0FBQztRQUNuRyxDQUFDO1FBRU8sTUFBTSxDQUFDLGdCQUFnQixDQUFDLFNBQWdDLEVBQUUsV0FBcUI7WUFDckYsSUFBSSxXQUFXLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQywyQkFBMkIsQ0FBQyxTQUFTLENBQUM7Z0JBQzFFLE1BQU0sWUFBWSxVQUFBLGNBQWMsQ0FBQyxJQUFJLE1BQU0sU0FBUyxvQkFBb0IsWUFBWSxDQUFDLDJCQUEyQixDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUM7WUFDM0ksSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO2dCQUMxRCxPQUFPLGtDQUFrQyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQzs7Z0JBRTVFLE1BQU0sWUFBWSxVQUFBLGNBQWMsQ0FBQyxJQUFJLE1BQU0sU0FBUyx1QkFBdUIsQ0FBQztRQUNoRixDQUFDO1FBRU8sTUFBTSxDQUFDLGdCQUFnQixDQUFDLEtBQWE7WUFDM0MsSUFBSSxhQUFhLEdBQVcsb0JBQW9CLENBQUM7WUFDakQsSUFBSSxLQUFzQixDQUFDO1lBQzNCLE9BQU8sQ0FBQyxLQUFLLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRTtnQkFDbEQsSUFBSSxpQkFBaUIsR0FBYSxrQ0FBa0MsQ0FBQyxTQUFTLENBQXdCLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDN0gsSUFBSSxDQUFDLGlCQUFpQjtvQkFDcEIsU0FBUztnQkFFWCxJQUFJLFlBQVksR0FBYSxFQUFFLENBQUM7Z0JBQ2hDLElBQUksWUFBWSxHQUFXLENBQUMsQ0FBQztnQkFDN0IsSUFBSSxrQkFBa0IsR0FBVyxhQUFhLENBQUMsU0FBUyxDQUFDO2dCQUN6RCxPQUFPLFlBQVksR0FBRyxDQUFDLEVBQUU7b0JBQ3ZCLFFBQVEsS0FBSyxDQUFDLGtCQUFrQixDQUFDLEVBQUU7d0JBQ2pDLEtBQUssR0FBRzs0QkFDTixZQUFZLEVBQUUsQ0FBQzs0QkFDZixNQUFNO3dCQUNSLEtBQUssR0FBRzs0QkFDTixZQUFZLEVBQUUsQ0FBQzs0QkFDZixNQUFNO3dCQUNSLEtBQUssR0FBRzs0QkFDTixJQUFJLFlBQVksSUFBSSxDQUFDO2dDQUNuQixZQUFZLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7NEJBQ3hDLE1BQU07cUJBQ1Q7b0JBQ0Qsa0JBQWtCLEVBQUUsQ0FBQztpQkFDdEI7Z0JBRUQsSUFBSSxJQUFJLEdBQ04sQ0FBQyxhQUFhLENBQUMsU0FBUyxHQUFHLENBQUMsRUFBRSxHQUFHLFlBQVksRUFBRSxrQkFBa0IsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQVcsQ0FBQyxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsRUFBRTtvQkFDdEksT0FBTyxNQUFNLElBQUksVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFDdEMsWUFBWSxDQUFDLENBQUM7d0JBQ2QsWUFBWSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxDQUFDLEVBQUUsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7Z0JBQ25GLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFFVCxhQUFhLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7Z0JBQ3RDLEtBQUssR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLEVBQUUsQ0FBQzthQUN4RztZQUNELE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQzs7SUEvT3NCLDRDQUFTLEdBQWlEO1FBQy9FLDhEQUE4RDtRQUM5RCxrQ0FBa0M7UUFDbEMsS0FBSztRQUNMLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFdBQXFCLEVBQUUsRUFBRTtZQUMxRCxPQUFPLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFlBQW9CLEVBQUUsTUFBYyxFQUFFLEVBQUUsQ0FBQyxHQUFHLFlBQVksTUFBTSxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDNUcsQ0FBQztRQUNELENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLFdBQXFCLEVBQUUsRUFBRTtZQUM3RCxPQUFPLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFlBQW9CLEVBQUUsTUFBYyxFQUFFLEVBQUUsQ0FBQyxHQUFHLFlBQVksTUFBTSxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDNUcsQ0FBQztRQUNELENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLFdBQXFCLEVBQUUsRUFBRTtZQUNoRSxPQUFPLElBQUksV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLFlBQW9CLEVBQUUsTUFBYyxFQUFFLEVBQUUsQ0FBQyxHQUFHLFlBQVksTUFBTSxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDNUcsQ0FBQztRQUNELENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFdBQXFCLEVBQUUsRUFBRTtZQUMxRCxPQUFPLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ25ELENBQUM7UUFDRCxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxXQUFxQixFQUFFLEVBQUU7WUFDeEQsT0FBTyxJQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFvQixFQUFFLE1BQWMsRUFBRSxFQUFFLENBQUMsT0FBTyxZQUFZLEtBQUssTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDO1FBQ2hILENBQUM7UUFDRCxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxXQUFxQixFQUFFLEVBQUU7WUFDdkQsT0FBTyxPQUFPLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUNyRCxDQUFDO1FBQ0QsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsV0FBcUIsRUFBRSxFQUFFO1lBQzdELElBQUksQ0FBQyxHQUFXLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLENBQUMsR0FBVyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLEdBQVcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksQ0FBQyxHQUFXLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLENBQUMsR0FBVyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDO1FBQ2hGLENBQUM7UUFDRCxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxXQUFxQixFQUFFLEVBQUU7WUFDN0QsSUFBSSxDQUFDLEdBQVcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9CLE9BQU8sUUFBUSxDQUFDLEdBQUcsQ0FBQztRQUN0QixDQUFDO1FBQ0QsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsV0FBcUIsRUFBRSxFQUFFO1lBQ3hELE9BQU8seUJBQXlCLFdBQVcsQ0FBQyxDQUFDLENBQUMsMEVBQTBFLENBQUM7UUFDM0gsQ0FBQztRQUNELENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLFdBQXFCLEVBQUUsRUFBRTtZQUM5RCxPQUFPLElBQUksa0NBQWtDLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxPQUFPLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxXQUFXLENBQUMsQ0FBQyxDQUFDLE9BQU8sV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDbEosQ0FBQztLQUNGLENBQUM7SUF6Q1MsNENBQWtDLHFDQWtQOUMsQ0FBQTtBQUNILENBQUMsRUE3UlMsU0FBUyxLQUFULFNBQVMsUUE2UmxCO0FDN1JELElBQVUsU0FBUyxDQStEbEI7QUEvREQsV0FBVSxTQUFTO0lBRWpCOzs7T0FHRztJQUNILE1BQWEscUNBQXFDO1FBQ3pDLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBc0I7WUFDM0MsTUFBTSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLGVBQWUsRUFBRTtnQkFDN0QsS0FBSyxFQUFFLHFDQUFxQyxDQUFDLGFBQWE7YUFDM0QsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLGtCQUFrQixFQUFFO2dCQUNoRSxLQUFLLEVBQUUscUNBQXFDLENBQUMsZ0JBQWdCO2FBQzlELENBQUMsQ0FBQztRQUNMLENBQUM7UUFFUyxNQUFNLENBQUMsYUFBYTtZQUM1QixJQUFJLElBQUksR0FBMkIsVUFBQSxXQUFXLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztZQUNyRSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7Z0JBQ25CLGdCQUFnQjtnQkFDaEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLDZIQUE2SDtnQkFDbEwsSUFBSSxDQUFDLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2FBQ3RFO2lCQUFNO2dCQUNMLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDO2dCQUNyQixNQUFNLE9BQU8sR0FBaUIsVUFBQSxNQUFNLENBQUMsTUFBTSxDQUFlLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDO2dCQUNoRixJQUFJLENBQUMsV0FBVyxDQUFDLHNCQUFzQixDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFFN0QsSUFBSSxXQUFXLEdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUMxRCxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO2dCQUU5RSxJQUFJLGFBQWEsR0FBYSxFQUFFLENBQUM7Z0JBQ2pDLEtBQUssSUFBSSxDQUFDLEdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLEdBQUcsV0FBVyxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUMxRCxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO2lCQUNuQztnQkFDRCxJQUFJO29CQUNGLElBQUksQ0FBQyxVQUFVLENBQ2Isc0JBQXNCLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxzQkFBc0IsQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsc0JBQXNCLENBQUMsR0FBRyxFQUFFLHNCQUFzQixDQUFDLEtBQUssRUFDeEosWUFBWSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FDakMsQ0FBQztpQkFDSDtnQkFBQyxPQUFPLE1BQU0sRUFBRTtvQkFDZixVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQ3JCO2dCQUVELElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUMzRSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFFM0UsSUFBSSxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUM7Z0JBRTFCLElBQUksQ0FBQyxXQUFXLENBQUMsc0JBQXNCLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUUxRCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7YUFDdEI7UUFDSCxDQUFDO1FBRVMsTUFBTSxDQUFDLGdCQUFnQjtZQUMvQixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVU7Z0JBQUUsT0FBTztZQUU3QixJQUFJLElBQUksR0FBMkIsVUFBQSxXQUFXLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztZQUNyRSxJQUFJLENBQUMsV0FBVyxDQUFDLHNCQUFzQixDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMxRCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNwQyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDekIsQ0FBQztLQUNGO0lBeERZLCtDQUFxQyx3Q0F3RGpELENBQUE7QUFDSCxDQUFDLEVBL0RTLFNBQVMsS0FBVCxTQUFTLFFBK0RsQjtBQy9ERCxJQUFVLFNBQVMsQ0FnRmxCO0FBaEZELFdBQVUsU0FBUztJQUlqQjs7Ozs7T0FLRztJQUNILE1BQXNCLFFBQVE7UUFHNUI7Ozs7V0FJRztRQUNJLE1BQU0sQ0FBQyxHQUFHLENBQTBDLEVBQWU7WUFDeEUsSUFBSSxHQUFHLEdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQztZQUMxQixJQUFJLFNBQVMsR0FBYSxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzlDLElBQUksU0FBUyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUNyQyxJQUFJLFFBQVEsR0FBUyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQ3JDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztnQkFDbkIsT0FBTyxRQUFRLENBQUM7YUFDakI7O2dCQUVDLE9BQU8sSUFBSSxFQUFFLEVBQUUsQ0FBQztRQUNwQixDQUFDO1FBRUQ7Ozs7O1dBS0c7UUFDSSxNQUFNLENBQUMsTUFBTSxDQUFzQixFQUFlO1lBQ3ZELElBQUksQ0FBSSxDQUFDO1lBQ1QsSUFBSSxHQUFHLEdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQztZQUMxQixJQUFJLFNBQVMsR0FBYSxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQzlDLElBQUksQ0FBQyxTQUFTLElBQUksU0FBUyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7Z0JBQ3ZDLENBQUMsR0FBRyxJQUFJLEVBQUUsRUFBRSxDQUFDO2dCQUNiLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLE9BQU8sQ0FBQyxDQUFDO2FBQ1Y7WUFDRCxJQUFJLFFBQVEsR0FBUyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ25CLE9BQU8sUUFBUSxDQUFDO1FBQ2xCLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxNQUFNLENBQUMsS0FBSyxDQUFDLFNBQWlCO1lBQ25DLElBQUksR0FBRyxHQUFXLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDO1lBQzdDLGlCQUFpQjtZQUNqQixJQUFJLFNBQVMsR0FBYSxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNwRCxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzFCLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsU0FBUyxDQUFDO1lBQ2hDLGdGQUFnRjtZQUNoRix3QkFBd0I7UUFDMUIsQ0FBQztRQUVEOzs7V0FHRztRQUNJLE1BQU0sQ0FBQyxJQUFJLENBQUksRUFBZTtZQUNuQyxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUMsSUFBSSxDQUFDO1lBQzFCLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzNCLENBQUM7UUFFRDs7V0FFRztRQUNJLE1BQU0sQ0FBQyxPQUFPO1lBQ25CLFFBQVEsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLENBQUM7O0lBbkVjLGNBQUssR0FBaUMsRUFBRSxDQUFDO0lBRHBDLGtCQUFRLFdBcUU3QixDQUFBO0FBQ0gsQ0FBQyxFQWhGUyxTQUFTLEtBQVQsU0FBUyxRQWdGbEI7QUNoRkQsSUFBVSxTQUFTLENBNFdsQjtBQTVXRCxXQUFVLFNBQVM7SUFDakI7Ozs7Ozs7T0FPRztJQUNILE1BQWEsT0FBUSxTQUFRLFVBQUEsT0FBTztRQUdsQyxZQUFtQixLQUFhLENBQUMsRUFBRSxLQUFhLENBQUM7WUFDL0MsS0FBSyxFQUFFLENBQUM7WUFDUixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksWUFBWSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDekMsQ0FBQztRQUVELGdCQUFnQjtRQUNoQjs7O1dBR0c7UUFDSSxNQUFNLENBQUMsSUFBSTtZQUNoQixNQUFNLE1BQU0sR0FBWSxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDOUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDakIsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUVEOzs7V0FHRztRQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBaUIsQ0FBQztZQUNsQyxNQUFNLE1BQU0sR0FBWSxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDOUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDM0IsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSSxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQWlCLENBQUM7WUFDaEMsTUFBTSxNQUFNLEdBQVksVUFBQSxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzlDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ3RCLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFRDs7OztXQUlHO1FBQ0ksTUFBTSxDQUFDLENBQUMsQ0FBQyxTQUFpQixDQUFDO1lBQ2hDLE1BQU0sTUFBTSxHQUFZLFVBQUEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN0QixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRU0sTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFnQixFQUFFLGFBQXdCLEVBQUUsc0JBQStCLElBQUk7WUFDMUcsSUFBSSxNQUFNLEdBQVksVUFBQSxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzVDLElBQUksQ0FBQyxHQUFpQixhQUFhLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDMUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDM0IsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFL0IsSUFBSSxtQkFBbUIsRUFBRTtnQkFDdkIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7YUFDdkM7WUFFRCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQ7Ozs7O1dBS0c7UUFDSSxNQUFNLENBQUMsYUFBYSxDQUFDLE9BQWdCLEVBQUUsVUFBa0IsQ0FBQztZQUMvRCxJQUFJLE1BQU0sR0FBWSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDckMsSUFBSTtnQkFDRixJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7Z0JBQzFCLElBQUksTUFBTSxHQUFXLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDaEQsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDO2FBQ3BEO1lBQUMsT0FBTyxNQUFNLEVBQUU7Z0JBQ2YsVUFBQSxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQ3BCO1lBQ0QsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFnQixFQUFFLE1BQWM7WUFDbEQsSUFBSSxNQUFNLEdBQVksVUFBQSxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztZQUNuRCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsUUFBbUI7WUFDdEMsSUFBSSxNQUFNLEdBQVksVUFBQSxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzVDLEtBQUssSUFBSSxNQUFNLElBQUksUUFBUTtnQkFDekIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkQsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLFVBQVUsQ0FBQyxRQUFpQixFQUFFLFdBQW9CO1lBQzlELElBQUksTUFBTSxHQUFZLFVBQUEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuRSxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQVcsRUFBRSxFQUFXO1lBQ3hDLElBQUksYUFBYSxHQUFXLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdEQsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVEOzs7Ozs7V0FNRztRQUNJLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBVyxFQUFFLEVBQVc7WUFDMUMsSUFBSSxZQUFZLEdBQVcsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNyRCxPQUFPLFlBQVksQ0FBQztRQUN0QixDQUFDO1FBRUQ7Ozs7Ozs7O1dBUUc7UUFDSSxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQWdCLEVBQUUsYUFBc0IsS0FBSztZQUNwRSxJQUFJLE1BQU0sR0FBWSxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDNUMsSUFBSSxVQUFVO2dCQUNaLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQzs7Z0JBRWxDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwQyxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLFNBQWlCLENBQUMsRUFBRSxhQUFxQixDQUFDO1lBQzFELElBQUksTUFBTSxHQUFZLFVBQUEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM1QyxJQUFJLEdBQUcsR0FBUyxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQSxJQUFJLENBQUMsQ0FBQztZQUNuQyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQztZQUM1QixNQUFNLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUNqQixVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDcEIsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUNELFlBQVk7UUFFWixtQkFBbUI7UUFDbkIsSUFBSSxDQUFDO1lBQ0gsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLENBQUM7UUFDRCxJQUFJLENBQUM7WUFDSCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsQ0FBQztRQUVELElBQUksQ0FBQyxDQUFDLEVBQVU7WUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNwQixDQUFDO1FBQ0QsSUFBSSxDQUFDLENBQUMsRUFBVTtZQUNkLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLENBQUM7UUFFRDs7V0FFRztRQUNILElBQUksU0FBUztZQUNYLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFJLGdCQUFnQjtZQUNsQixPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2pDLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsS0FBSztZQUNkLElBQUksS0FBSyxHQUFZLFVBQUEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMzQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDMUIsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFXLEdBQUc7WUFDWixJQUFJLEdBQUcsR0FBUyxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQSxJQUFJLENBQUMsQ0FBQztZQUNuQyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7WUFFL0IsSUFBSSxHQUFHLENBQUMsU0FBUyxLQUFLLENBQUM7Z0JBQ3JCLE9BQU8sR0FBRyxDQUFDO1lBRWIsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUN2RixPQUFPLEdBQUcsQ0FBQztRQUNiLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsR0FBRyxDQUFDLElBQVU7WUFDdkIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBQSxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ2pELENBQUM7UUFDRCxZQUFZO1FBRUwsT0FBTztZQUNaLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksSUFBSSxDQUFDLFNBQWtCO1lBQzVCLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoQyxDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksTUFBTSxDQUFDLFFBQWlCLEVBQUUsYUFBcUIsTUFBTSxDQUFDLE9BQU87WUFDbEUsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVU7Z0JBQUUsT0FBTyxLQUFLLENBQUM7WUFDN0QsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVU7Z0JBQUUsT0FBTyxLQUFLLENBQUM7WUFDN0QsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksR0FBRyxDQUFDLE9BQWdCO1lBQ3pCLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUQsQ0FBQztRQUVEOzs7V0FHRztRQUNJLFFBQVEsQ0FBQyxXQUFvQjtZQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xFLENBQUM7UUFFRDs7V0FFRztRQUNJLEtBQUssQ0FBQyxPQUFlO1lBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFDLEVBQUUsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RELENBQUM7UUFFRDs7V0FFRztRQUNJLFNBQVMsQ0FBQyxVQUFrQixDQUFDO1lBQ2xDLElBQUksQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ3hELENBQUM7UUFFRDs7V0FFRztRQUNJLEdBQUcsQ0FBQyxLQUFhLENBQUMsRUFBRSxLQUFhLENBQUM7WUFDdkMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDbEIsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDcEIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksR0FBRztZQUNSLE9BQU8sSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3JDLENBQUM7UUFFTSxTQUFTLENBQUMsYUFBd0IsRUFBRSxzQkFBK0IsSUFBSTtZQUM1RSxJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWEsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUNwRixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxHQUFHLENBQUMsUUFBaUI7WUFDMUIsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxDQUFDO1FBQ0Q7O1dBRUc7UUFDSSxHQUFHLENBQUMsUUFBaUI7WUFDMUIsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxTQUFTLENBQUMsS0FBYSxDQUFDO1lBQzdCLE9BQU8sSUFBSSxVQUFBLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDekMsQ0FBQztRQUVNLFFBQVE7WUFDYixJQUFJLE1BQU0sR0FBVyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7WUFDNUUsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUNEOzs7V0FHRztRQUNJLEdBQUcsQ0FBQyxTQUF3RTtZQUNqRixJQUFJLElBQUksR0FBWSxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDMUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNyQyxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxrQkFBa0I7UUFDWCxTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNyRCxnSEFBZ0g7WUFDaEgsYUFBYSxDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUUsR0FBRyxPQUFPLElBQUksSUFBSSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEUsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksUUFBUSxFQUFFO2dCQUN2QyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQWtCLGNBQWMsQ0FBQyxDQUFDO2FBQ2hFOztnQkFFQyxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzlCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVNLFVBQVU7WUFDZixJQUFJLE9BQU8sR0FBWTtnQkFDckIsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2FBQ2pDLENBQUM7WUFDRixPQUFPLE9BQU8sQ0FBQztRQUNqQixDQUFDO1FBQ1MsYUFBYSxDQUFDLFFBQWlCLElBQWdCLENBQUM7S0FFM0Q7SUFsV1ksaUJBQU8sVUFrV25CLENBQUE7QUFDSCxDQUFDLEVBNVdTLFNBQVMsS0FBVCxTQUFTLFFBNFdsQjtBQzVXRCw2Q0FBNkM7QUFDN0MsaUNBQWlDO0FBRWpDLElBQVUsU0FBUyxDQStNbEI7QUFsTkQsNkNBQTZDO0FBQzdDLGlDQUFpQztBQUVqQyxXQUFVLFNBQVM7SUFDakI7O09BRUc7SUFDSCxJQUFZLFFBVVg7SUFWRCxXQUFZLFFBQVE7UUFDbEIsNkNBQWMsQ0FBQTtRQUNkLGlEQUFnQixDQUFBO1FBQ2hCLCtDQUFlLENBQUE7UUFDZixvREFBaUIsQ0FBQTtRQUNqQiw0Q0FBYSxDQUFBO1FBQ2Isc0RBQWtCLENBQUE7UUFDbEIsb0RBQWlCLENBQUE7UUFDakIsd0RBQW1CLENBQUE7UUFDbkIsc0RBQWtCLENBQUE7SUFDcEIsQ0FBQyxFQVZXLFFBQVEsR0FBUixrQkFBUSxLQUFSLGtCQUFRLFFBVW5CO0lBRUQ7OztPQUdHO0lBQ0gsTUFBYSxTQUFVLFNBQVEsVUFBQSxPQUFPO1FBSXBDLFlBQVksS0FBYSxDQUFDLEVBQUUsS0FBYSxDQUFDLEVBQUUsU0FBaUIsQ0FBQyxFQUFFLFVBQWtCLENBQUMsRUFBRSxVQUFvQixRQUFRLENBQUMsT0FBTztZQUN2SCxLQUFLLEVBQUUsQ0FBQztZQUpILGFBQVEsR0FBWSxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQSxPQUFPLENBQUMsQ0FBQztZQUMxQyxTQUFJLEdBQVksVUFBQSxRQUFRLENBQUMsR0FBRyxDQUFDLFVBQUEsT0FBTyxDQUFDLENBQUM7WUFJM0MsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztRQUM1RCxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQWEsQ0FBQyxFQUFFLEtBQWEsQ0FBQyxFQUFFLFNBQWlCLENBQUMsRUFBRSxVQUFrQixDQUFDLEVBQUUsVUFBb0IsUUFBUSxDQUFDLE9BQU87WUFDN0gsSUFBSSxJQUFJLEdBQWMsVUFBQSxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzlDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztZQUNqRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRCxJQUFJLENBQUM7WUFDSCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFDRCxJQUFJLENBQUM7WUFDSCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFDRCxJQUFJLEtBQUs7WUFDUCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLENBQUM7UUFDRCxJQUFJLE1BQU07WUFDUixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLENBQUM7UUFFRDs7V0FFRztRQUNILElBQUksSUFBSTtZQUNOLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQztnQkFDakIsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUN6QixPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBQ0Q7O1dBRUc7UUFDSCxJQUFJLEdBQUc7WUFDTCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUM7Z0JBQ2pCLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDekIsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsQ0FBQztRQUNEOztXQUVHO1FBQ0gsSUFBSSxLQUFLO1lBQ1AsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDO2dCQUNqQixPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN6QyxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFDRDs7V0FFRztRQUNILElBQUksTUFBTTtZQUNSLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQztnQkFDakIsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRUQsSUFBSSxDQUFDLENBQUMsRUFBVTtZQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN2QixDQUFDO1FBQ0QsSUFBSSxDQUFDLENBQUMsRUFBVTtZQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUN2QixDQUFDO1FBQ0QsSUFBSSxLQUFLLENBQUMsTUFBYztZQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDdkIsQ0FBQztRQUNELElBQUksTUFBTSxDQUFDLE9BQWU7WUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDO1FBQ3hCLENBQUM7UUFDRCxJQUFJLElBQUksQ0FBQyxNQUFjO1lBQ3JCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO1lBQ2xDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQztRQUMzQixDQUFDO1FBQ0QsSUFBSSxHQUFHLENBQUMsTUFBYztZQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUNuQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDM0IsQ0FBQztRQUNELElBQUksS0FBSyxDQUFDLE1BQWM7WUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDO1FBQ3pDLENBQUM7UUFDRCxJQUFJLE1BQU0sQ0FBQyxNQUFjO1lBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQztRQUN6QyxDQUFDO1FBRUQsSUFBVyxLQUFLO1lBQ2QsT0FBTyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNoRSxDQUFDO1FBRU0sT0FBTztZQUNaLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQzVCLENBQUM7UUFFTSxJQUFJLENBQUMsS0FBZ0I7WUFDMUIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2RSxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxrQkFBa0IsQ0FBQyxLQUFhLENBQUMsRUFBRSxLQUFhLENBQUMsRUFBRSxTQUFpQixDQUFDLEVBQUUsVUFBa0IsQ0FBQyxFQUFFLFVBQW9CLFFBQVEsQ0FBQyxPQUFPO1lBQ3JJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztZQUMvQixRQUFRLE9BQU8sR0FBRyxJQUFJLEVBQUU7Z0JBQ3RCLEtBQUssSUFBSTtvQkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7b0JBQUMsTUFBTTtnQkFDdkMsS0FBSyxJQUFJO29CQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxNQUFNLEdBQUcsQ0FBQyxDQUFDO29CQUFDLE1BQU07Z0JBQ3BELEtBQUssSUFBSTtvQkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsTUFBTSxDQUFDO29CQUFDLE1BQU07YUFDakQ7WUFDRCxRQUFRLE9BQU8sR0FBRyxJQUFJLEVBQUU7Z0JBQ3RCLEtBQUssSUFBSTtvQkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7b0JBQUMsTUFBTTtnQkFDdkMsS0FBSyxJQUFJO29CQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxPQUFPLEdBQUcsQ0FBQyxDQUFDO29CQUFDLE1BQU07Z0JBQ3JELEtBQUssSUFBSTtvQkFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsT0FBTyxDQUFDO29CQUFDLE1BQU07YUFDbEQ7UUFDSCxDQUFDO1FBRU0sV0FBVyxDQUFDLE1BQWUsRUFBRSxPQUFrQjtZQUNwRCxJQUFJLE1BQU0sR0FBWSxNQUFNLENBQUMsS0FBSyxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ3ZDLE1BQU0sQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQ3pDLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzdCLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxRQUFRLENBQUMsTUFBZTtZQUM3QixPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxNQUFNLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLElBQUksTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUcsQ0FBQztRQUVEOzs7V0FHRztRQUNJLFFBQVEsQ0FBQyxLQUFnQjtZQUM5QixJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUs7Z0JBQUUsT0FBTyxLQUFLLENBQUM7WUFDMUMsSUFBSSxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJO2dCQUFFLE9BQU8sS0FBSyxDQUFDO1lBQzFDLElBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTTtnQkFBRSxPQUFPLEtBQUssQ0FBQztZQUMxQyxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLEdBQUc7Z0JBQUUsT0FBTyxLQUFLLENBQUM7WUFDMUMsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxlQUFlLENBQUMsS0FBZ0I7WUFDckMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO2dCQUN2QixPQUFPLElBQUksQ0FBQztZQUVkLElBQUksWUFBWSxHQUFjLElBQUksU0FBUyxFQUFFLENBQUM7WUFDOUMsWUFBWSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2pELFlBQVksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMvQyxZQUFZLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUN4RSxZQUFZLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUUzRSxPQUFPLFlBQVksQ0FBQztRQUN0QixDQUFDO1FBRUQ7O09BRUQ7UUFDUSxNQUFNLENBQUMsS0FBZ0I7WUFDNUIsSUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJO2dCQUFFLE9BQU8sS0FBSyxDQUFDO1lBQ3pDLElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSztnQkFBRSxPQUFPLEtBQUssQ0FBQztZQUMzQyxJQUFJLElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDLEdBQUc7Z0JBQUUsT0FBTyxLQUFLLENBQUM7WUFDdkMsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNO2dCQUFFLE9BQU8sS0FBSyxDQUFDO1lBQzdDLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVEOztXQUVHO1FBQ0ksUUFBUTtZQUNiLElBQUksTUFBTSxHQUFXLHdCQUF3QixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQztZQUN0RyxNQUFNLElBQUksVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsU0FBUyxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ3pKLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFUyxhQUFhLENBQUMsUUFBaUIsSUFBZSxDQUFDO0tBQzFEO0lBMUxZLG1CQUFTLFlBMExyQixDQUFBO0FBQ0gsQ0FBQyxFQS9NUyxTQUFTLEtBQVQsU0FBUyxRQStNbEI7QUNsTkQsd0NBQXdDO0FBQ3hDLDhDQUE4QztBQUM5Qyw0Q0FBNEM7QUFDNUMsNENBQTRDO0FBQzVDLDREQUE0RDtBQUM1RCwrREFBK0Q7QUFDL0QsMkNBQTJDO0FBRTNDLElBQVUsU0FBUyxDQWdjbEI7QUF4Y0Qsd0NBQXdDO0FBQ3hDLDhDQUE4QztBQUM5Qyw0Q0FBNEM7QUFDNUMsNENBQTRDO0FBQzVDLDREQUE0RDtBQUM1RCwrREFBK0Q7QUFDL0QsMkNBQTJDO0FBRTNDLFdBQVUsU0FBUztJQUNqQiwyQ0FBMkM7SUFJM0MsSUFBWSxLQUVYO0lBRkQsV0FBWSxLQUFLO1FBQ2YscUNBQU0sQ0FBQTtRQUFFLCtDQUFXLENBQUE7UUFBRSx5Q0FBUSxDQUFBO1FBQUUsK0NBQVcsQ0FBQTtRQUFFLHlDQUFRLENBQUE7SUFDdEQsQ0FBQyxFQUZXLEtBQUssR0FBTCxlQUFLLEtBQUwsZUFBSyxRQUVoQjtJQVVZLHdCQUFjLEdBQTJEO1FBQ3BGLE1BQU0sRUFBRTtZQUNOLElBQUksRUFBRSxRQUFRO1lBQ2QsT0FBTyxFQUFFLENBQUM7U0FDWDtRQUNELElBQUksRUFBRTtZQUNKLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLENBQUM7U0FDWDtLQUNGLENBQUM7SUFFRjs7O09BR0c7SUFDSCxNQUFzQixXQUFZLFNBQVEsVUFBQSxpQkFBaUI7UUFTekQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsVUFBVSxDQUFDLFVBQW9CLEVBQUUsTUFBZ0I7WUFDN0QsSUFBSSxXQUFXLEdBQVksT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3ZFLElBQUksaUJBQWlCLEdBQTJCO2dCQUM5QyxLQUFLLEVBQUUsQ0FBQyxNQUFNLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUssSUFBSSxLQUFLO2dCQUNsRSxTQUFTLEVBQUUsQ0FBQyxVQUFVLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLFNBQVMsSUFBSSxLQUFLO2dCQUNsRixrQkFBa0IsRUFBRSxLQUFLO2FBQzFCLENBQUM7WUFDRixVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsd0JBQXdCLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztZQUN6RCxJQUFJLE1BQU0sR0FBc0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNqRSxJQUFJLElBQTRCLENBQUM7WUFDakMsSUFBSSxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQ3ZCLE1BQU0sQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLGlCQUFpQixDQUFDLEVBQzlDLG1DQUFtQyxDQUNwQyxDQUFDO1lBQ0YsV0FBVyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7WUFDeEIsd0NBQXdDO1lBQ3hDLElBQUksQ0FBQyxNQUFNLENBQUMsc0JBQXNCLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDOUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFDLElBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEQsV0FBVyxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDNUMscUZBQXFGO1lBQ3JGLFdBQVcsQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBRXJELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSSxNQUFNLENBQUMscUJBQXFCLENBQUMsa0JBQTBCLEVBQUUsb0JBQXlDO1lBQ3ZHLFdBQVcsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsa0JBQWtCLEVBQUUsb0JBQW9CLENBQUMsSUFBSSxFQUFFLG9CQUFvQixDQUFDLFFBQVEsRUFBRSxvQkFBb0IsQ0FBQyxTQUFTLEVBQUUsb0JBQW9CLENBQUMsTUFBTSxFQUFFLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQy9NLENBQUM7UUFFRDs7OztVQUlFO1FBQ0ssTUFBTSxDQUFDLE1BQU0sQ0FBSSxNQUFnQixFQUFFLFdBQW1CLEVBQUU7WUFDN0QsSUFBSSxNQUFNLEtBQUssSUFBSTtnQkFDakIsTUFBTSxJQUFJLEtBQUssQ0FBQyxxQkFBcUIsUUFBUSxrQkFBa0IsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUN4SCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsU0FBUztZQUNyQixPQUEwQixXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLCtCQUErQjtRQUNwRixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsbUJBQW1CO1lBQy9CLE9BQU8sV0FBVyxDQUFDLElBQUksQ0FBQztRQUMxQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsYUFBYTtZQUN6QixJQUFJLE1BQU0sR0FBeUMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDM0UsT0FBTyxVQUFBLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMxRCxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsYUFBYSxDQUFDLE1BQWMsRUFBRSxPQUFlO1lBQ3pELFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7WUFDdkMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQztRQUMzQyxDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksTUFBTSxDQUFDLGtCQUFrQixDQUFDLEtBQWdCO1lBQy9DLFdBQVcsQ0FBQyxVQUFVLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3ZGLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6RSxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsS0FBSyxDQUFDLFNBQWdCLElBQUk7WUFDdEMsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BFLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLHNCQUFzQixDQUFDLGdCQUFnQixHQUFHLHNCQUFzQixDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDNUcsQ0FBQztRQUVEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLGdCQUFnQixDQUFDLGVBQWlDLElBQUk7WUFDbEUsV0FBVyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ3JGLENBQUM7UUFFRDs7V0FFRztRQUNJLE1BQU0sQ0FBQyxrQkFBa0I7WUFDOUIsT0FBTyxXQUFXLENBQUMsVUFBVSxDQUFDO1FBQ2hDLENBQUM7UUFFTSxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQWM7WUFDdkMsSUFBSSxLQUFLO2dCQUNQLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLFVBQVUsQ0FBQyxDQUFDOztnQkFFM0QsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDaEUsQ0FBQztRQUVNLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBWTtZQUNyQyxRQUFRLEtBQUssRUFBRTtnQkFDYixLQUFLLEtBQUssQ0FBQyxNQUFNO29CQUNmLFdBQVcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLHNCQUFzQixDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUNoRSxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLEVBQUUsc0JBQXNCLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3BGLE1BQU07Z0JBQ1IsS0FBSyxLQUFLLENBQUMsV0FBVztvQkFDcEIsV0FBVyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQ2hFLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLHNCQUFzQixDQUFDLFNBQVMsRUFBRSxzQkFBc0IsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO29CQUN6Ryw0R0FBNEc7b0JBQzVHLE1BQU07Z0JBQ1IsS0FBSyxLQUFLLENBQUMsUUFBUTtvQkFDakIsV0FBVyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQ2hFLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLHNCQUFzQixDQUFDLFNBQVMsRUFBRSxzQkFBc0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztvQkFDL0YsTUFBTTtnQkFDUixLQUFLLEtBQUssQ0FBQyxXQUFXO29CQUNwQixXQUFXLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO29CQUM3RSxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQyxTQUFTLEVBQUUsc0JBQXNCLENBQUMsU0FBUyxDQUFDLENBQUM7b0JBQy9GLE1BQU07Z0JBQ1IsS0FBSyxLQUFLLENBQUMsUUFBUSxFQUFFLDJHQUEyRztvQkFDOUgsV0FBVyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQ2hFLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLHNCQUFzQixDQUFDLFNBQVMsRUFBRSxzQkFBc0IsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2dCQUMzRztvQkFDRSxNQUFNO2FBQ1Q7UUFDSCxDQUFDO1FBRUQsaUJBQWlCO1FBQ2pCOztXQUVHO1FBQ08sTUFBTSxDQUFDLGlCQUFpQixDQUFDLEtBQWE7WUFDOUMsc0JBQXNCO1lBQ3RCLE1BQU0sYUFBYSxHQUFrQixVQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDakUsVUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFFMUU7Z0JBQ0UsTUFBTSxjQUFjLEdBQVcsc0JBQXNCLENBQUMsT0FBTyxDQUFDO2dCQUM5RCxNQUFNLE1BQU0sR0FBVyxzQkFBc0IsQ0FBQyxZQUFZLENBQUM7Z0JBQzNELE1BQU0sSUFBSSxHQUFXLHNCQUFzQixDQUFDLEdBQUcsQ0FBQztnQkFDaEQsVUFBQSxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUksVUFBVSxDQUFDLEtBQUssR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RELFVBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQ3BCLHNCQUFzQixDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsY0FBYyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsVUFBQSxNQUFNLENBQUMsVUFBVSxDQUN2RyxDQUFDO2dCQUVGLDBDQUEwQztnQkFDMUMsVUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLEVBQUUsc0JBQXNCLENBQUMsa0JBQWtCLEVBQUUsc0JBQXNCLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ3ZJLFVBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsVUFBVSxFQUFFLHNCQUFzQixDQUFDLGNBQWMsRUFBRSxzQkFBc0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztnQkFDMUksVUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLEVBQUUsc0JBQXNCLENBQUMsY0FBYyxFQUFFLHNCQUFzQixDQUFDLGFBQWEsQ0FBQyxDQUFDO2FBQzNJO1lBRUQsTUFBTSxXQUFXLEdBQXFCLFVBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBQ3RFLFVBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsc0JBQXNCLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBQzdFLE1BQU0sZUFBZSxHQUFXLHNCQUFzQixDQUFDLGlCQUFpQixDQUFDO1lBQ3pFLFVBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLEVBQUUsZUFBZSxFQUFFLHNCQUFzQixDQUFDLFVBQVUsRUFBRSxhQUFhLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFM0ksV0FBVyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDN0IsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVTLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBYSxFQUFFLFVBQTJCO1lBQ2xFLHdHQUF3RztZQUN4RyxJQUFJLElBQUksR0FBZSxJQUFJLFVBQVUsQ0FBQyxLQUFLLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3pELFVBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLHNCQUFzQixDQUFDLFlBQVksRUFBRSxzQkFBc0IsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFFbEgsSUFBSSxjQUFjLEdBQWMsVUFBQSxTQUFTLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUMvRSxJQUFJLE1BQU0sR0FBVyxFQUFFLENBQUM7WUFDeEIsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFVBQUEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3RELElBQUksT0FBTyxHQUFXLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFDOUQsSUFBSSxPQUFPLElBQUksQ0FBQyxFQUFFLGtCQUFrQjtvQkFDbEMsU0FBUztnQkFDWCxJQUFJLElBQUksR0FBUyxVQUFBLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ25DLElBQUksQ0FBQyxPQUFPLEdBQUcscUJBQXFCLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDOUQsSUFBSSxDQUFDLEtBQUssR0FBRyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDbEQsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQSxPQUFPLENBQUMsQ0FBQztnQkFDdkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUscUJBQXFCLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkcsSUFBSSxDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7Z0JBRXJDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDbkI7WUFFRCxPQUFPLE1BQU0sQ0FBQztZQUVkLFNBQVMscUJBQXFCLENBQUMsV0FBdUIsRUFBRSxNQUFjO2dCQUNwRSxJQUFJLE1BQU0sR0FBZ0IsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzdDLElBQUksSUFBSSxHQUFhLElBQUksUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUMxQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDdEMsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVCLENBQUM7WUFFRCxTQUFTLG1CQUFtQixDQUFDLFdBQXVCLEVBQUUsTUFBYztnQkFDbEUsSUFBSSxNQUFNLEdBQWdCLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM3QyxJQUFJLElBQUksR0FBYSxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDMUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ3RDLElBQUksS0FBSyxHQUFVLFVBQUEsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDM0gsT0FBTyxLQUFLLENBQUM7WUFDZixDQUFDO1FBQ0gsQ0FBQztRQUVEOzs7O1VBSUU7UUFDUSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQVcsRUFBRSxlQUEwQixFQUFFLFVBQTJCO1lBQ3hGLElBQUk7Z0JBQ0YsSUFBSSxPQUFPLEdBQWtCLEtBQUssQ0FBQyxZQUFZLENBQUMsVUFBQSxhQUFhLENBQUMsQ0FBQztnQkFDL0QsSUFBSSxXQUFXLEdBQXNCLEtBQUssQ0FBQyxZQUFZLENBQUMsVUFBQSxpQkFBaUIsQ0FBQyxDQUFDO2dCQUMzRSxJQUFJLElBQUksR0FBUyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztnQkFDM0MsSUFBSSxNQUFNLEdBQW9CLElBQUksWUFBWSxVQUFBLFlBQVksQ0FBQyxDQUFDLENBQUMsVUFBQSxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsVUFBQSxVQUFVLENBQUM7Z0JBRTdGLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQztnQkFDcEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQUM7Z0JBQ3hDLElBQUksYUFBYSxHQUFjLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxVQUFVLENBQUMsY0FBYyxFQUFFLFVBQVUsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBRS9ILElBQUksbUJBQW1CLEdBQXlCLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQzdFLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBRWhILElBQUksSUFBSSxHQUFTLE9BQU8sQ0FBQyxJQUFJLENBQUM7Z0JBQzlCLElBQUksYUFBYSxHQUFrQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLGVBQWUsRUFBRSxhQUFhLEVBQUUsVUFBQSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUN4SCxXQUFXLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxzQkFBc0IsQ0FBQyxTQUFTLEVBQUUsYUFBYSxDQUFDLFFBQVEsRUFBRSxzQkFBc0IsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBRWxJLElBQUksSUFBSSxHQUFTLElBQUksVUFBQSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ2pDLFVBQUEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDM0I7WUFBQyxPQUFPLE1BQU0sRUFBRTtnQkFDZixFQUFFO2FBQ0g7UUFDSCxDQUFDO1FBQ0QsWUFBWTtRQUVaLGdCQUFnQjtRQUNoQjs7V0FFRztRQUNPLE1BQU0sQ0FBQyxhQUFhLENBQUMsT0FBZ0M7WUFDN0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTO2dCQUN4QixPQUFPO1lBRVQsV0FBVyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsc0JBQXNCLENBQUMsY0FBYyxFQUFFLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUUxRiwrQ0FBK0M7WUFDL0MsSUFBSSxTQUFTLEdBQW1DLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBQSxZQUFZLENBQUMsQ0FBQztZQUMxRSxJQUFJLFNBQVMsRUFBRTtnQkFDYixJQUFJLE1BQU0sR0FBVSxJQUFJLFVBQUEsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMxQyxLQUFLLElBQUksUUFBUSxJQUFJLFNBQVM7b0JBQzVCLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFFbkMsV0FBVyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQzVCLFdBQVcsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUMvQixXQUFXLENBQUMsd0JBQXdCLENBQUMsb0JBQW9CLENBQUMsRUFBRSw2REFBNkQ7Z0JBQ3pILElBQUksWUFBWSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUNwQyxDQUFDO2FBQ0g7WUFFRCwwREFBMEQ7WUFDMUQscUdBQXFHO1lBQ3JHLFVBQVUsQ0FBQyxVQUFBLGdCQUFnQixFQUFFLHNCQUFzQixFQUFFLGVBQWUsQ0FBQyxDQUFDO1lBQ3RFLFVBQVUsQ0FBQyxVQUFBLFVBQVUsRUFBRSxnQkFBZ0IsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNwRCxVQUFVLENBQUMsVUFBQSxTQUFTLEVBQUUsZUFBZSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRWpELFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLHNCQUFzQixDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUV6RSxTQUFTLFVBQVUsQ0FBQyxLQUFrQixFQUFFLFFBQWdCLEVBQUUsVUFBa0I7Z0JBQzFFLE1BQU0sU0FBUyxHQUFtQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUVyRSxXQUFXLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FDNUIsV0FBVyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQy9CLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBQyxRQUFRLENBQUMsRUFBRSxnRUFBZ0U7Z0JBQ2hILElBQUksVUFBVSxDQUFDLENBQUMsU0FBUyxFQUFFLE1BQU0sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUN6QyxDQUFDO2dCQUVGLElBQUksQ0FBQyxTQUFTO29CQUNaLE9BQU87Z0JBRVQsTUFBTSxhQUFhLEdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxxREFBcUQ7Z0JBQ2hHLE1BQU0sVUFBVSxHQUFpQixJQUFJLFlBQVksQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLGFBQWEsQ0FBQyxDQUFDO2dCQUVwRixJQUFJLE1BQU0sR0FBVyxDQUFDLENBQUM7Z0JBQ3ZCLEtBQUssSUFBSSxRQUFRLElBQUksU0FBUyxFQUFFO29CQUM5QixNQUFNLGVBQWUsR0FBVyxNQUFNLEdBQUcsYUFBYSxDQUFDO29CQUV2RCxlQUFlO29CQUNmLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLEVBQUUsZUFBZSxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUVyRSxlQUFlO29CQUNmLElBQUksUUFBUSxHQUFjLFVBQUEsU0FBUyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQzlGLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxFQUFFLGVBQWUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLG9CQUFvQjtvQkFFekUsc0JBQXNCO29CQUN0QixJQUFJLEtBQUssSUFBSSxVQUFBLGdCQUFnQixFQUFFO3dCQUM3QixJQUFJLFVBQVUsR0FBYyxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUM7d0JBQy9DLFVBQVUsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxFQUFFLGVBQWUsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQywrQkFBK0I7d0JBQzNGLFVBQUEsUUFBUSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztxQkFDNUI7b0JBRUQsVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUN6QixNQUFNLEVBQUUsQ0FBQztpQkFDVjtnQkFFRCxXQUFXLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FDNUIsV0FBVyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQy9CLFdBQVcsQ0FBQyx3QkFBd0IsQ0FBQyxHQUFHLFVBQVUsY0FBYyxDQUFDLEVBQUUsdURBQXVEO2dCQUMxSCxVQUFVLENBQ1gsQ0FBQztZQUNKLENBQUM7UUFDSCxDQUFDO1FBQ0QsWUFBWTtRQUVaOztXQUVHO1FBQ08sTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFXLEVBQUUsVUFBMkI7WUFDaEUsSUFBSSxPQUFPLEdBQWtCLEtBQUssQ0FBQyxZQUFZLENBQUMsVUFBQSxhQUFhLENBQUMsQ0FBQztZQUMvRCxJQUFJLFdBQVcsR0FBc0IsS0FBSyxDQUFDLFlBQVksQ0FBQyxVQUFBLGlCQUFpQixDQUFDLENBQUM7WUFDM0UsSUFBSSxJQUFJLEdBQVMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDM0MsSUFBSSxpQkFBaUIsR0FBNEIsS0FBSyxDQUFDLFlBQVksQ0FBQyxVQUFBLHVCQUF1QixDQUFDLENBQUM7WUFDN0YsSUFBSSxhQUFhLEdBQVksaUJBQWlCLElBQUksaUJBQWlCLENBQUMsUUFBUSxDQUFDO1lBQzdFLElBQUksTUFBTSxHQUFvQixXQUFXLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQy9ELElBQUksYUFBYTtnQkFBRSxNQUFNLEdBQUcsaUJBQWlCLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUVuRixNQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQUM7WUFFeEMsSUFBSSxhQUFhLEdBQWMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxjQUFjLEVBQUUsVUFBVSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUMvSCxJQUFJLGFBQWEsR0FBa0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFFekYsSUFBSSxPQUFPLEdBQXlCLE1BQU0sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDbkUsSUFBSSxPQUFPO2dCQUNULFdBQVcsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBRTlFLE9BQU8sR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDOUMsSUFBSSxPQUFPO2dCQUNULFdBQVcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsY0FBYyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFFckYsT0FBTyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUNoRCxJQUFJLE9BQU8sRUFBRTtnQkFDWCxnSEFBZ0g7Z0JBQ2hILFdBQVcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQzthQUN0RjtZQUVELElBQUksYUFBYSxFQUFFO2dCQUNqQixXQUFXLENBQUMsYUFBYSxDQUFDLGlCQUFpQixFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsS0FBSyxDQUFDLFlBQVksQ0FBQyxVQUFBLG1CQUFtQixDQUFDLEVBQUUsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDO2FBQ3hJO2lCQUFNO2dCQUNMLFdBQVcsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLHNCQUFzQixDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUMsUUFBUSxFQUFFLHNCQUFzQixDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUNuSTtRQUNILENBQUM7UUFFUyxNQUFNLENBQUMsYUFBYSxDQUFDLGtCQUEyQyxFQUFFLE9BQXdCLEVBQUUsY0FBNkIsRUFBRSxjQUFtQyxFQUFFLGFBQXNCO1lBQzlMLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3pELFdBQVcsQ0FBQyxZQUFZLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDdkQsa0JBQWtCLENBQUMsYUFBYSxFQUFFLENBQUM7WUFFbkMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQywyQkFBMkIsQ0FBQyxFQUFFLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZHLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsdUJBQXVCLENBQUMsRUFBRSxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMvRixXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLHVCQUF1QixDQUFDLEVBQUUsa0JBQWtCLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDL0YsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxnQ0FBZ0MsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0pBQWdKO1lBRW5PLElBQUksVUFBVSxHQUFZLGNBQWMsSUFBSSxjQUFjLENBQUMsUUFBUSxDQUFDO1lBQ3BFLFdBQVcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsNkJBQTZCLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEcsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQywyQkFBMkIsQ0FBQyxFQUFFLFVBQVUsSUFBSSxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXpILFdBQVcsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsc0JBQXNCLENBQUMsU0FBUyxFQUFFLGNBQWMsQ0FBQyxRQUFRLEVBQUUsc0JBQXNCLENBQUMsY0FBYyxFQUFFLENBQUMsRUFBRSxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUVySyxXQUFXLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM1QyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuQyxDQUFDO1FBRU8sTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFXLEVBQUUsUUFBdUIsRUFBRSxlQUEwQixFQUFFLE9BQWlCO1lBQy9HLElBQUksYUFBYSxHQUF3QixLQUFLLENBQUMsWUFBWSxDQUFDLFVBQUEsbUJBQW1CLENBQUMsQ0FBQztZQUNqRixJQUFJLGFBQWEsSUFBSSxhQUFhLENBQUMsUUFBUSxFQUFFO2dCQUMzQyxJQUFJLGFBQXdCLENBQUM7Z0JBQzdCLGFBQWEsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztnQkFDeEMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxhQUFhLENBQUMsRUFBRSxFQUFFLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDdkcsT0FBTyxVQUFBLFNBQVMsQ0FBQyxjQUFjLENBQUMsZUFBZSxFQUFFLGFBQWEsQ0FBQyxDQUFDO2FBQ2pFO1lBRUQsT0FBTyxVQUFBLFNBQVMsQ0FBQyxjQUFjLENBQUMsZUFBZSxFQUFFLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0RSxDQUFDO1FBRU8sTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQXVCLEVBQUUsT0FBd0IsRUFBRSxjQUF5QjtZQUMxRyxJQUFJLFFBQVEsQ0FBQyxJQUFJLFlBQVksVUFBQSxRQUFRLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDeEUsZ0NBQWdDO2dCQUNoQyxPQUFPLFFBQVEsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxRQUFRLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDOztnQkFFckgsT0FBTyxRQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBQ3RGLENBQUM7O0lBeFpnQixnQkFBSSxHQUEyQixXQUFXLENBQUMsVUFBVSxFQUFFLENBQUM7SUFFMUQsc0JBQVUsR0FBYyxXQUFXLENBQUMsYUFBYSxFQUFFLENBQUM7SUFOL0MscUJBQVcsY0ErWmhDLENBQUE7QUFDSCxDQUFDLEVBaGNTLFNBQVMsS0FBVCxTQUFTLFFBZ2NsQjtBQ3hjRCxJQUFVLFNBQVMsQ0FxRGxCO0FBckRELFdBQVUsU0FBUztJQUNoQix1REFBdUQ7SUFDeEQsTUFBYSxxQkFBc0IsU0FBUSxVQUFBLGNBQWM7UUFDaEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxZQUFzQjtZQUMzQyxVQUFBLGNBQWMsQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFFLHFCQUFxQixDQUFDLENBQUM7UUFDN0QsQ0FBQztRQUVTLE1BQU0sQ0FBQyxhQUFhO1lBQzVCLElBQUksSUFBSSxHQUEyQixVQUFBLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBQ3JFLElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtnQkFDbkIsZ0JBQWdCO2dCQUNoQixJQUFJLENBQUMsYUFBYSxDQUFDLHNCQUFzQixDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNwRCxJQUFJLENBQUMsV0FBVyxDQUFDLHNCQUFzQixDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7YUFDbEY7aUJBQ0k7Z0JBQ0gsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7Z0JBQ3JCLGtEQUFrRDtnQkFDbEQsTUFBTSxPQUFPLEdBQWlCLFVBQUEsTUFBTSxDQUFDLE1BQU0sQ0FBZSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQztnQkFDaEYsSUFBSSxDQUFDLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBRTdELElBQUk7b0JBQ0YsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7b0JBQ25HLElBQUksQ0FBQyxVQUFVLENBQ2Isc0JBQXNCLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxzQkFBc0IsQ0FBQyxJQUFJLEVBQUUsc0JBQXNCLENBQUMsSUFBSSxFQUFFLHNCQUFzQixDQUFDLGFBQWEsRUFDcEksSUFBSSxDQUFDLGNBQWMsQ0FDcEIsQ0FBQztpQkFDSDtnQkFBQyxPQUFPLE1BQU0sRUFBRTtvQkFDZixVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQ3JCO2dCQUNELFFBQVEsSUFBSSxDQUFDLE1BQU0sRUFBRTtvQkFDbkIsS0FBSyxVQUFBLE1BQU0sQ0FBQyxLQUFLO3dCQUNmLElBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsVUFBVSxFQUFFLHNCQUFzQixDQUFDLGtCQUFrQixFQUFFLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUNqSSxJQUFJLENBQUMsYUFBYSxDQUFDLHNCQUFzQixDQUFDLFVBQVUsRUFBRSxzQkFBc0IsQ0FBQyxrQkFBa0IsRUFBRSxzQkFBc0IsQ0FBQyxPQUFPLENBQUMsQ0FBQzt3QkFDakksTUFBTTtvQkFDUixLQUFLLFVBQUEsTUFBTSxDQUFDLE1BQU07d0JBQ2hCLElBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsVUFBVSxFQUFFLHNCQUFzQixDQUFDLGtCQUFrQixFQUFFLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUNqSSxJQUFJLENBQUMsYUFBYSxDQUFDLHNCQUFzQixDQUFDLFVBQVUsRUFBRSxzQkFBc0IsQ0FBQyxrQkFBa0IsRUFBRSxzQkFBc0IsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO3dCQUMvSSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzt3QkFDckMsTUFBTTtvQkFDUixLQUFLLFVBQUEsTUFBTSxDQUFDLE1BQU07d0JBQ2hCLElBQUksQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsVUFBVSxFQUFFLHNCQUFzQixDQUFDLGtCQUFrQixFQUFFLHNCQUFzQixDQUFDLE1BQU0sQ0FBQyxDQUFDO3dCQUNoSSxJQUFJLENBQUMsYUFBYSxDQUFDLHNCQUFzQixDQUFDLFVBQVUsRUFBRSxzQkFBc0IsQ0FBQyxrQkFBa0IsRUFBRSxzQkFBc0IsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO3dCQUM5SSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQzt3QkFDckMsTUFBTTtpQkFDVDtnQkFDRCxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLE9BQU8sQ0FBQztnQkFFdEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxzQkFBc0IsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBRTFELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQzthQUN0QjtRQUNILENBQUM7S0FDRjtJQWxEWSwrQkFBcUIsd0JBa0RqQyxDQUFBO0FBQ0gsQ0FBQyxFQXJEUyxTQUFTLEtBQVQsU0FBUyxRQXFEbEI7QUNyREQsSUFBVSxTQUFTLENBb09sQjtBQXBPRCxXQUFVLFNBQVM7SUFRZixNQUFhLFlBQWEsU0FBUSxLQUFLO1FBa0JuQyxzSUFBc0k7UUFDdEksWUFBWSxLQUFvQixFQUFFLGFBQWlDLEVBQUUsY0FBc0IsRUFBRSxlQUF1QixFQUFFLGdCQUF3QixFQUFFLGtCQUEyQixJQUFJLEVBQUUsbUJBQTRCLElBQUk7WUFDN00sS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2IsSUFBSSxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUM7WUFDbEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxjQUFjLENBQUM7WUFDcEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxlQUFlLENBQUM7WUFDdEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxnQkFBZ0IsQ0FBQztZQUN2QyxJQUFJLENBQUMsY0FBYyxHQUFHLGVBQWUsQ0FBQztZQUN0QyxJQUFJLENBQUMsZUFBZSxHQUFHLGdCQUFnQixDQUFDO1FBQzVDLENBQUM7S0FDSjtJQTVCWSxzQkFBWSxlQTRCeEIsQ0FBQTtJQUVEOztNQUVFO0lBQ0YsSUFBWSxlQU9YO0lBUEQsV0FBWSxlQUFlO1FBQ3ZCLDJEQUFXLENBQUE7UUFDWCwyREFBVyxDQUFBO1FBQ1gsMkRBQVcsQ0FBQTtRQUNYLDJEQUFXLENBQUE7UUFDWCw0REFBWSxDQUFBO1FBQ1osNERBQVksQ0FBQTtJQUNoQixDQUFDLEVBUFcsZUFBZSxHQUFmLHlCQUFlLEtBQWYseUJBQWUsUUFPMUI7SUFFRDs7TUFFRTtJQUNGLElBQVksU0FPWDtJQVBELFdBQVksU0FBUztRQUNqQiwySEFBMkg7UUFDM0gsK0NBQU8sQ0FBQTtRQUNQLGtIQUFrSDtRQUNsSCw2Q0FBTSxDQUFBO1FBQ04sbUhBQW1IO1FBQ25ILG1EQUFTLENBQUEsQ0FBQyxpQ0FBaUM7SUFDL0MsQ0FBQyxFQVBXLFNBQVMsR0FBVCxtQkFBUyxLQUFULG1CQUFTLFFBT3BCO0lBRUQ7Ozs7Ozs7O01BUUU7SUFDRixJQUFZLGFBUVg7SUFSRCxXQUFZLGFBQWE7UUFDckIsaURBQUksQ0FBQTtRQUNKLHFEQUFNLENBQUE7UUFDTix1REFBTyxDQUFBO1FBQ1AseURBQVEsQ0FBQTtRQUNSLGlEQUFJLENBQUE7UUFDSix1REFBTyxDQUFBO1FBQ1AscURBQU0sQ0FBQTtJQUNWLENBQUMsRUFSVyxhQUFhLEdBQWIsdUJBQWEsS0FBYix1QkFBYSxRQVF4QjtJQUVELHNIQUFzSDtJQUN0SCxJQUFZLGlCQU9YO0lBUEQsV0FBWSxpQkFBaUI7UUFDekIseURBQUksQ0FBQTtRQUNKLG1FQUFTLENBQUE7UUFDVCx1RkFBbUIsQ0FBQTtRQUNuQiw2RUFBYyxDQUFBO1FBQ2QsaUVBQVEsQ0FBQTtRQUNSLHVGQUFtQixDQUFBO0lBQ3ZCLENBQUMsRUFQVyxpQkFBaUIsR0FBakIsMkJBQWlCLEtBQWpCLDJCQUFpQixRQU81QjtJQUVELHdEQUF3RDtJQUN4RCxNQUFhLFVBQVU7UUFTbkI7WUFOTyxhQUFRLEdBQVksVUFBQSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7WUFFbkMsY0FBUyxHQUFZLFVBQUEsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3BDLFdBQU0sR0FBWSxVQUFBLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNqQyxjQUFTLEdBQVksVUFBQSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7WUFHdkMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ25CLENBQUM7UUFFTSxPQUFPO1lBQ1YsSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7WUFDakIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7WUFDckIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN4QixJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDO1lBQy9CLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDekIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzFCLENBQUM7S0FDSjtJQXRCWSxvQkFBVSxhQXNCdEIsQ0FBQTtJQUVELHNFQUFzRTtJQUN0RSxNQUFhLGVBQWU7UUFFeEIsWUFBWSxzQkFBOEIsRUFBRSxxQkFBNkI7WUFDckUsSUFBSSxPQUFPLElBQUksSUFBSSxXQUFXO2dCQUMxQixPQUFPO1lBQ1gsSUFBSSxDQUFDLHFCQUFxQixHQUFHLHNCQUFzQixDQUFDO1lBQ3BELElBQUksQ0FBQyxvQkFBb0IsR0FBRyxxQkFBcUIsQ0FBQztRQUN0RCxDQUFDO1FBRUQsZ05BQWdOO1FBQ2hOLElBQUksZUFBZTtZQUNmLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUM7UUFDeEMsQ0FBQztRQUNELElBQUksZUFBZSxDQUFDLE1BQWU7WUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDO1FBQzFDLENBQUM7UUFDRCxnREFBZ0Q7UUFDaEQsSUFBSSx5QkFBeUI7WUFDekIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLHlCQUF5QixDQUFDO1FBQ2xELENBQUM7UUFDRCxJQUFJLHlCQUF5QixDQUFDLE1BQWM7WUFDeEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyx5QkFBeUIsR0FBRyxNQUFNLENBQUM7UUFDcEQsQ0FBQztRQUVELGdEQUFnRDtRQUNoRCxJQUFJLGdDQUFnQztZQUNoQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsZ0NBQWdDLENBQUM7UUFDekQsQ0FBQztRQUNELElBQUksZ0NBQWdDLENBQUMsTUFBYztZQUMvQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdDQUFnQyxHQUFHLE1BQU0sQ0FBQztRQUMzRCxDQUFDO1FBRUQsK0ZBQStGO1FBQy9GLElBQUkscUJBQXFCO1lBQ3JCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztRQUM5QyxDQUFDO1FBQ0QsSUFBSSxxQkFBcUIsQ0FBQyxNQUFjO1lBQ3BDLElBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCLEdBQUcsTUFBTSxDQUFDO1FBQ2hELENBQUM7UUFFRCxnS0FBZ0s7UUFDaEssSUFBSSxzQkFBc0I7WUFDdEIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDO1FBQ3pDLENBQUM7UUFDRCxJQUFJLHNCQUFzQixDQUFDLFVBQWtCO1lBQ3pDLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsVUFBVSxDQUFDO1FBQy9DLENBQUM7UUFFRCxzSkFBc0o7UUFDdEosSUFBSSxlQUFlO1lBQ2YsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQztRQUN4QyxDQUFDO1FBQ0QsSUFBSSxlQUFlLENBQUMsTUFBYztZQUM5QixJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUM7UUFDMUMsQ0FBQztRQUVELHVFQUF1RTtRQUN2RSxJQUFJLGtCQUFrQjtZQUNsQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUM7UUFDM0MsQ0FBQztRQUNELElBQUksa0JBQWtCLENBQUMsTUFBYztZQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQztRQUM3QyxDQUFDO1FBRUQ7O1VBRUU7UUFDRixJQUFJLG9CQUFvQjtZQUNwQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUM7UUFDN0MsQ0FBQztRQUNELElBQUksb0JBQW9CLENBQUMsTUFBYztZQUNuQyxJQUFJLENBQUMsT0FBTyxDQUFDLG9CQUFvQixHQUFHLE1BQU0sQ0FBQztRQUMvQyxDQUFDO1FBRUQseUpBQXlKO1FBQ3pKLElBQUkscUJBQXFCO1lBQ3JCLE9BQXdCLElBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUM7UUFDL0QsQ0FBQztRQUNELElBQUkscUJBQXFCLENBQUMsTUFBdUI7WUFDN0MsSUFBSSxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsR0FBRyxNQUFNLENBQUM7UUFDaEQsQ0FBQztRQUVELCtOQUErTjtRQUMvTixJQUFJLDJCQUEyQjtZQUMzQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsZ0NBQWdDLENBQUM7UUFDekQsQ0FBQztRQUNELElBQUksMkJBQTJCLENBQUMsTUFBYztZQUMxQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdDQUFnQyxHQUFHLE1BQU0sQ0FBQztRQUMzRCxDQUFDO1FBRUQ7OE5BQ3NOO1FBQ3ROLElBQUksMEJBQTBCO1lBQzFCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyx1Q0FBdUMsQ0FBQztRQUNoRSxDQUFDO1FBQ0QsSUFBSSwwQkFBMEIsQ0FBQyxNQUFjO1lBQ3pDLElBQUksQ0FBQyxPQUFPLENBQUMsdUNBQXVDLEdBQUcsTUFBTSxDQUFDO1FBQ2xFLENBQUM7UUFFRDs7O1dBR0c7UUFDSCxJQUFJLGdCQUFnQjtZQUNoQixPQUFPLFVBQUEsT0FBTyxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUUsQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO1FBQzVFLENBQUM7UUFDRCxJQUFJLGdCQUFnQixDQUFDLE1BQWM7WUFDL0IsVUFBQSxPQUFPLENBQUMsY0FBYyxDQUFDLFlBQVksRUFBRSxDQUFDLHdCQUF3QixDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3ZFLFVBQUEsT0FBTyxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMzRSxDQUFDO0tBQ0o7SUE5R1kseUJBQWUsa0JBOEczQixDQUFBO0FBQ0wsQ0FBQyxFQXBPUyxTQUFTLEtBQVQsU0FBUyxRQW9PbEI7QUNwT0QsSUFBVSxTQUFTLENBc1NsQjtBQXRTRCxXQUFVLFNBQVM7SUFDakI7Ozs7Ozs7O1NBUUs7SUFDTCxNQUFzQixLQUFNLFNBQVEsVUFBQSxTQUFTO1FBMkIzQywyRUFBMkU7UUFDM0UsWUFBbUIsY0FBa0MsSUFBSSxFQUFFLFlBQWdDLElBQUk7WUFDN0YsS0FBSyxFQUFFLENBQUM7WUF2QlYsa0JBQWEsR0FBVyxDQUFDLENBQUM7WUFDMUIsZ0JBQVcsR0FBVyxDQUFDLENBQUM7WUFJeEIsZUFBVSxHQUFZLEtBQUssQ0FBQztZQUU1Qix1QkFBa0IsR0FBWSxLQUFLLENBQUM7WUFFcEMsZ0JBQVcsR0FBVyxDQUFDLENBQUM7WUFDeEIsaUJBQVksR0FBVyxDQUFDLENBQUM7WUFLekIseUZBQXlGO1lBQy9FLGNBQVMsR0FBWSxLQUFLLENBQUMsQ0FBQyw2Q0FBNkM7WUFvTW5GLGdCQUFXLEdBQUcsR0FBWSxFQUFFO2dCQUMxQixJQUFJLE9BQU8sR0FBWTtvQkFDckIsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLG1CQUFtQjtvQkFDNUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLGtCQUFrQjtvQkFDMUMsVUFBVSxFQUFFLElBQUksQ0FBQyxXQUFXO29CQUM1QixXQUFXLEVBQUUsSUFBSSxDQUFDLFlBQVk7aUJBQy9CLENBQUM7Z0JBQ0YsT0FBTyxPQUFPLENBQUM7WUFDakIsQ0FBQyxDQUFBO1lBRUQsWUFBTyxHQUFHLENBQUMsUUFBaUIsRUFBUSxFQUFFO2dCQUNwQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDLG1CQUFtQixFQUFFLFlBQVksRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBQ2hGLENBQUMsQ0FBQTtZQXlDTyxhQUFRLEdBQUcsQ0FBQyxNQUFhLEVBQUUsRUFBRTtnQkFDbkMsUUFBUSxNQUFNLENBQUMsSUFBSSxFQUFFO29CQUNuQjt3QkFDRSxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQiwyQ0FBeUIsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO3dCQUMzRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7d0JBQ25CLE1BQU07b0JBQ1I7d0JBQ0UsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsMkNBQXlCLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQzt3QkFDOUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO3dCQUNuQixNQUFNO2lCQUNUO1lBQ0gsQ0FBQyxDQUFBO1lBNVBDLElBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO1lBQzlCLElBQUksQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1lBRTFCOzs7Y0FHRTtZQUNGLElBQUksQ0FBQyxnQkFBZ0IscUNBQXNCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMxRCxJQUFJLENBQUMsZ0JBQWdCLDJDQUF5QixJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDL0QsQ0FBQztRQWpDRCxhQUFhLENBQWE7UUFDMUIsV0FBVyxDQUFhO1FBQ3hCLFdBQVcsQ0FBcUI7UUFDaEMsU0FBUyxDQUFxQjtRQUU5QixVQUFVLENBQWtCO1FBQzVCLE9BQU8sQ0FBWTtRQUNuQixrQkFBa0IsQ0FBa0I7UUFFcEMsV0FBVyxDQUFhO1FBQ3hCLFlBQVksQ0FBYTtRQUV6QixtQkFBbUIsQ0FBUztRQXVCbEIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFNBQXVCLElBQVksT0FBTyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRW5ILGlKQUFpSjtRQUNqSixJQUFXLFVBQVU7WUFDbkIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQzFCLENBQUM7UUFFRCxJQUFXLFVBQVUsQ0FBQyxNQUEwQjtZQUM5QyxJQUFJLENBQUMsYUFBYSxHQUFHLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JELElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO1lBQzFCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNsQixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDckIsQ0FBQztRQUVELGdFQUFnRTtRQUNoRSxJQUFXLFFBQVE7WUFDakIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3hCLENBQUM7UUFDRCxJQUFXLFFBQVEsQ0FBQyxNQUEwQjtZQUM1QyxJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25ELElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNsQixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDckIsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxNQUFNO1lBQ2YsT0FBTyxJQUFJLFVBQUEsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckUsQ0FBQztRQUNELElBQVcsTUFBTSxDQUFDLE1BQWU7WUFDL0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMzRCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3JCLENBQUM7UUFFRDs7VUFFRTtRQUNGLElBQVcsV0FBVztZQUNwQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDM0IsQ0FBQztRQUNELElBQVcsV0FBVyxDQUFDLE1BQWM7WUFDbkMsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7WUFDM0IsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3ZFLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsVUFBVTtZQUNuQixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDMUIsQ0FBQztRQUNELElBQVcsVUFBVSxDQUFDLE1BQWM7WUFDbEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUM7WUFDMUIsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3JFLENBQUM7UUFFRDs7OztXQUlHO1FBQ0gsSUFBVyxpQkFBaUI7WUFDMUIsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQUM7UUFDakMsQ0FBQztRQUNELElBQVcsaUJBQWlCLENBQUMsTUFBZTtZQUMxQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsTUFBTSxDQUFDO1lBQ2pDLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDaEYsQ0FBQztRQUVNLFlBQVksQ0FBQyxLQUFhO1lBQy9CLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUM7WUFDakMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO2dCQUNaLE9BQU87WUFFVCxJQUFJLFFBQVEsR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzFELElBQUksUUFBUSxDQUFDLE1BQU0sSUFBSSxDQUFDO2dCQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDOztnQkFFakMsVUFBQSxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLDhEQUE4RCxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQ25JLENBQUM7UUFFTSxXQUFXLENBQUMsS0FBVztZQUM1QixJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7Z0JBQ3RCLE9BQU87WUFFVCxVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksY0FBYyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksUUFBUSxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUV0RixJQUFJLFdBQVcsR0FBdUIsS0FBSyxDQUFDLFlBQVksQ0FBQyxVQUFBLGtCQUFrQixDQUFDLENBQUM7WUFDN0UsSUFBSSxRQUFRLEdBQXVCLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQUEsa0JBQWtCLENBQUMsQ0FBQztZQUU5RSxJQUFJLENBQUMsV0FBVyxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUM3QixVQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksd0NBQXdDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxPQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO2dCQUNuSSxPQUFPO2FBQ1I7WUFFRCxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQztZQUMzQixJQUFJLENBQUMsUUFBUSxHQUFHLFdBQVcsQ0FBQztRQUM5QixDQUFDO1FBRUQsdUlBQXVJO1FBQ2hJLFdBQVc7WUFDaEIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQ3pCLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxPQUFPO1lBQ1osSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLEtBQUssRUFBRTtnQkFDNUIsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDLEVBQUU7b0JBQ3RELElBQUksSUFBSSxDQUFDLG1CQUFtQjt3QkFDMUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztvQkFDOUMsT0FBTztpQkFDUjtnQkFFRCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQ3RCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO2dCQUN2QixJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7YUFDakI7UUFDSCxDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksVUFBVTtZQUNmLElBQUksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLEVBQUU7Z0JBQzNCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztnQkFDbkIsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7YUFDekI7UUFDSCxDQUFDO1FBRUQ7OztVQUdFO1FBQ0ssWUFBWTtZQUNqQixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDcEIsQ0FBQztRQUVNLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0IsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3RELGFBQWEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUMvQyxhQUFhLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDMUQsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLElBQUksVUFBQSxPQUFPLEVBQUUsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3JFLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDN0IsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDaEUsSUFBSSxDQUFDLFlBQVksQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUNyRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTSxVQUFVO1lBQ2YsSUFBSSxPQUFPLEdBQVksS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUMzQyxPQUFPLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDMUMsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztRQUVNLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBaUI7WUFDbkMsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLFdBQVc7Z0JBQzFDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxVQUFBLE9BQU8sQ0FBQyxHQUFhLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNFLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQztZQUN2QixJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsa0JBQWtCLENBQUMsS0FBSyxXQUFXO2dCQUN0RCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDdkIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFFRCxXQUFXLENBUVY7UUFFRCxPQUFPLENBRU47UUFFUyxhQUFhLENBQUMsUUFBaUI7WUFDdkMsT0FBTyxRQUFRLENBQUMsWUFBWSxDQUFDO1lBQzdCLE9BQU8sUUFBUSxDQUFDLEtBQUssQ0FBQztZQUN0QixPQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUM7WUFDdEIsS0FBSyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoQyxDQUFDO1FBRUQsMEZBQTBGO1FBQ2hGLFdBQVc7WUFDbkIsVUFBQSxPQUFPLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEMsQ0FBQztRQUVTLFFBQVE7WUFDaEIsVUFBQSxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFFUyxXQUFXO1lBQ25CLFVBQUEsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixDQUFDO1FBRVMsY0FBYyxDQUFDLEdBQUcsYUFBdUI7WUFDakQsSUFBSSxhQUFhLEdBQVksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLDhEQUE4RDtZQUN0SSxJQUFJLFdBQVcsR0FBYyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxhQUFhLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVqSixpR0FBaUc7WUFDakcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxXQUFXLEVBQUUsR0FBRyxhQUFhLENBQUMsQ0FBQztRQUMxSCxDQUFDO1FBRVMsY0FBYztZQUN0QixJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDMUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzVDLElBQUksQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDeEQsQ0FBQztRQUVTLGlCQUFpQixDQUFDLFFBQWlCLEVBQUUsT0FBZ0I7WUFDN0QsS0FBSyxJQUFJLEdBQUcsSUFBSSxPQUFPO2dCQUNyQixPQUFPLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6QixDQUFDOztJQTVRRCxrR0FBa0c7SUFDM0UsZUFBUyxHQUFpQixLQUFLLENBQUM7SUFDdkQscUZBQXFGO0lBQzlELGdCQUFVLEdBQW1CLEVBQUUsQ0FBQztJQUpuQyxlQUFLLFFBMlIxQixDQUFBO0FBQ0gsQ0FBQyxFQXRTUyxTQUFTLEtBQVQsU0FBUyxRQXNTbEI7QUN0U0QsSUFBVSxTQUFTLENBa0tsQjtBQWxLRCxXQUFVLFNBQVM7SUFDakI7OztPQUdHO0lBQ0gsTUFBc0IsVUFBVyxTQUFRLFVBQUEsS0FBSztRQWM1QyxpSkFBaUo7UUFDakosWUFBWSxjQUFrQyxJQUFJLEVBQUUsWUFBZ0MsSUFBSSxFQUFFLFFBQWlCLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxlQUF3QixJQUFJLFVBQUEsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzNLLEtBQUssQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFkaEMsb0JBQW9CO1lBRXBCLGNBQVMsR0FBVyxFQUFFLENBQUM7WUFDdkIsY0FBUyxHQUFXLENBQUMsRUFBRSxDQUFDO1lBQ3hCLGdCQUFXLEdBQVcsQ0FBQyxDQUFDO1lBRXhCLHFCQUFnQixHQUFXLENBQUMsQ0FBQztZQUM3QixtQkFBYyxHQUFXLENBQUMsQ0FBQztZQStIM0IsZ0JBQVcsR0FBRyxHQUFZLEVBQUU7Z0JBQzFCLElBQUksT0FBTyxHQUFZO29CQUNyQixhQUFhLEVBQUUsSUFBSSxDQUFDLGNBQWM7b0JBQ2xDLGVBQWUsRUFBRSxJQUFJLENBQUMsZ0JBQWdCO29CQUN0QyxRQUFRLEVBQUUsSUFBSSxDQUFDLFNBQVM7b0JBQ3hCLFFBQVEsRUFBRSxJQUFJLENBQUMsU0FBUztvQkFDeEIsVUFBVSxFQUFFLElBQUksQ0FBQyxXQUFXO2lCQUM3QixDQUFDO2dCQUNGLE9BQU8sT0FBTyxDQUFDO1lBQ2pCLENBQUMsQ0FBQTtZQUNELFlBQU8sR0FBRyxDQUFDLFFBQWlCLEVBQVEsRUFBRTtnQkFDcEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxlQUFlLEVBQUUsaUJBQWlCLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ3hHLENBQUMsQ0FBQTtZQW5JQyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixJQUFJLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQztZQUMzQixJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ3JCLENBQUM7UUFuQkQsb0JBQW9CO1FBRXBCLFNBQVMsQ0FBYztRQUN2QixTQUFTLENBQWU7UUFDeEIsV0FBVyxDQUFhO1FBQ3hCLEtBQUssQ0FBWTtRQUNqQixnQkFBZ0IsQ0FBYTtRQUM3QixjQUFjLENBQWE7UUFjM0Isb0VBQW9FO1FBQ3BFOzs7V0FHRztRQUNILElBQVcsSUFBSTtZQUNiLE9BQU8sSUFBSSxVQUFBLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9ELENBQUM7UUFDRCxJQUFXLElBQUksQ0FBQyxNQUFlO1lBQzdCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekQsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNyQixDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFXLFFBQVE7WUFDakIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3hCLENBQUM7UUFFRCxJQUFXLFFBQVEsQ0FBQyxNQUFjO1lBQ2hDLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1lBQ3hCLElBQUk7Z0JBQzZCLElBQUksQ0FBQyxLQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQzthQUNoRjtZQUFDLE9BQU8sRUFBVyxFQUFFLEVBQUUsS0FBSyxFQUFFO1FBQ2pDLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsUUFBUTtZQUNqQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQztRQUNELElBQVcsUUFBUSxDQUFDLE1BQWM7WUFDaEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7WUFDeEIsSUFBSTtnQkFDNkIsSUFBSSxDQUFDLEtBQU0sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO2FBQ2hGO1lBQUMsT0FBTyxFQUFXLEVBQUUsRUFBRSxLQUFLLEVBQUU7UUFDakMsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxhQUFhO1lBQ3RCLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztRQUM3QixDQUFDO1FBQ0QsSUFBVyxhQUFhLENBQUMsTUFBYztZQUNyQyxJQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQztZQUM3QixJQUFJO2dCQUM2QixJQUFJLENBQUMsS0FBTSxDQUFDLGVBQWUsRUFBRSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7YUFDcEY7WUFBQyxPQUFPLEVBQVcsRUFBRSxFQUFFLEtBQUssRUFBRTtRQUNqQyxDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFXLFVBQVU7WUFDbkIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQzFCLENBQUM7UUFFRCxJQUFXLFVBQVUsQ0FBQyxNQUFjO1lBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO1lBQzFCLElBQUk7Z0JBQ29CLElBQUksQ0FBQyxLQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQzthQUN2RTtZQUFDLE9BQU8sRUFBVyxFQUFFLEVBQUUsS0FBSyxFQUFFO1FBQ2pDLENBQUM7UUFFRDs7VUFFRTtRQUNGLElBQVcsZUFBZTtZQUN4QixPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztRQUMvQixDQUFDO1FBQ0QsSUFBVyxlQUFlLENBQUMsTUFBYztZQUN2QyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDO1lBQy9CLElBQUk7Z0JBQ29CLElBQUksQ0FBQyxLQUFNLENBQUMsZUFBZSxFQUFFLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQzthQUN4RTtZQUFDLE9BQU8sRUFBVyxFQUFFLEVBQUUsS0FBSyxFQUFFO1FBQ2pDLENBQUM7UUFDRCxZQUFZO1FBRVosd0JBQXdCO1FBQ2pCLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0IsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3RELGFBQWEsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUMzQyxhQUFhLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDMUQsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLElBQUksVUFBQSxPQUFPLEVBQUUsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2pFLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDN0IsS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzFELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVNLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBaUI7WUFDbkMsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLFdBQVc7Z0JBQ3hDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxVQUFBLE9BQU8sQ0FBQyxHQUFhLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3ZFLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQztZQUNyQixJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7WUFDckQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRU0sVUFBVTtZQUNmLElBQUksT0FBTyxHQUFZLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMxQyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDdEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7WUFDM0MsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztRQUVELFdBQVcsQ0FTVjtRQUNELE9BQU8sQ0FFTjtRQUVELFlBQVk7UUFFRixjQUFjO1lBQ3RCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDbEcsS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQztLQUNGO0lBNUpxQixvQkFBVSxhQTRKL0IsQ0FBQTtBQUNILENBQUMsRUFsS1MsU0FBUyxLQUFULFNBQVMsUUFrS2xCO0FDbEtELDRDQUE0QztBQUM1QyxzQ0FBc0M7QUFDdEMscUNBQXFDO0FBQ3JDLHNDQUFzQztBQUN0QyxnREFBZ0Q7QUFDaEQsb0RBQW9EO0FBQ3BELHFDQUFxQztBQUNyQyw4Q0FBOEM7QUFDOUMsaURBQWlEO0FBQ2pELDZDQUE2QztBQUM3Qyx1REFBdUQ7QUFDdkQsaURBQWlEO0FBQ2pELHdDQUF3QztBQUN4Qyw2Q0FBNkM7QUFHN0Msa0JBQWtCO0FBQ2xCLFNBQVMsUUFBUSxDQUFDLE1BQWMsRUFBRSxRQUFnQjtJQUNoRCxPQUFPLE9BQU8sTUFBTSxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7QUFDMUQsQ0FBQztBQ25CRCwrQ0FBK0M7QUFFL0MsSUFBVSxTQUFTLENBK2lCbEI7QUFqakJELCtDQUErQztBQUUvQyxXQUFVLFNBQVM7SUE4Q2pCOzs7T0FHRztJQUNILElBQUssd0JBU0o7SUFURCxXQUFLLHdCQUF3QjtRQUMzQixpQ0FBaUM7UUFDakMsMkVBQU0sQ0FBQTtRQUNOLHlCQUF5QjtRQUN6Qiw2RUFBTyxDQUFBO1FBQ1AsdUJBQXVCO1FBQ3ZCLCtFQUFRLENBQUE7UUFDUix3QkFBd0I7UUFDeEIsNkZBQWUsQ0FBQTtJQUNqQixDQUFDLEVBVEksd0JBQXdCLEtBQXhCLHdCQUF3QixRQVM1QjtJQUVEOzs7T0FHRztJQUNILElBQVksa0JBWVg7SUFaRCxXQUFZLGtCQUFrQjtRQUM1QixnRUFBZ0U7UUFDaEUsbUNBQWEsQ0FBQTtRQUNiLHlEQUF5RDtRQUN6RCw0Q0FBc0IsQ0FBQTtRQUN0QiwyREFBMkQ7UUFDM0QsdURBQWlDLENBQUE7UUFDakMsOENBQThDO1FBQzlDLGtEQUE0QixDQUFBO1FBQzVCLDJJQUEySTtRQUMzSSxtQ0FBYSxDQUFBO1FBQ2IsMENBQTBDO0lBQzVDLENBQUMsRUFaVyxrQkFBa0IsR0FBbEIsNEJBQWtCLEtBQWxCLDRCQUFrQixRQVk3QjtJQUVELElBQVksc0JBUVg7SUFSRCxXQUFZLHNCQUFzQjtRQUNoQyx1SUFBdUk7UUFDdkkseUdBQXlHO1FBQ3pHLGlEQUF1QixDQUFBO1FBQ3ZCLG9IQUFvSDtRQUNwSCwrQ0FBcUIsQ0FBQTtRQUNyQixvSkFBb0o7UUFDcEosMkNBQWlCLENBQUE7SUFDbkIsQ0FBQyxFQVJXLHNCQUFzQixHQUF0QixnQ0FBc0IsS0FBdEIsZ0NBQXNCLFFBUWpDO0lBRUQ7Ozs7O09BS0c7SUFDSCxNQUFhLFNBQVUsU0FBUSxVQUFBLE9BQU87UUFtQnBDLFlBQW1CLFFBQWdCLFNBQVMsQ0FBQyxJQUFJLEVBQUUsaUJBQXFDLEVBQUUsRUFBRSxPQUFlLEVBQUU7WUFDM0csS0FBSyxFQUFFLENBQUM7WUFkSCxlQUFVLEdBQVcsU0FBUyxDQUFDO1lBRS9CLGNBQVMsR0FBVyxDQUFDLENBQUM7WUFDdEIsV0FBTSxHQUFtQixFQUFFLENBQUMsQ0FBQyxnRkFBZ0Y7WUFHN0csV0FBTSxHQUEwQixFQUFFLENBQUM7WUFDaEMsb0JBQWUsR0FBVyxFQUFFLENBQUMsQ0FBQywyREFBMkQ7WUFFbkcsNkRBQTZEO1lBQ3JELG9CQUFlLEdBQXlELElBQUksR0FBRyxFQUFtRCxDQUFDO1lBQzNJLGtDQUE2QixHQUFzRCxJQUFJLEdBQUcsRUFBZ0QsQ0FBQztZQUl6SSxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixJQUFJLENBQUMsa0JBQWtCLEdBQUcsY0FBYyxDQUFDO1lBQ3pDLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsTUFBTSxFQUFFLGNBQWMsQ0FBQyxDQUFDO1lBQ3hGLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1lBQzVCLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQzFCLFVBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBVkQsNkJBQTZCLENBQThHO1FBWWpJLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxTQUEyQixJQUFZLE9BQU8sU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUUzSCxJQUFXLFNBQVM7WUFDbEIsbUNBQW1DO1lBQ25DLElBQUksRUFBRSxHQUFlLElBQUksVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNqRCxPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUM7UUFFRCxJQUFXLEdBQUc7WUFDWixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7UUFDOUIsQ0FBQztRQUVELElBQVcsR0FBRyxDQUFDLElBQVk7WUFDekIsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7WUFDNUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUM3QixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDcEIsQ0FBQztRQUVNLFVBQVU7WUFDZixJQUFJLENBQUMsNkJBQTZCLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDN0MsQ0FBQztRQUVEOzs7V0FHRztRQUNILFFBQVEsQ0FBQyxLQUFhLEVBQUUsVUFBa0IsRUFBRSxhQUFxQztZQUMvRSxJQUFJLENBQUMsR0FBWSxFQUFFLENBQUM7WUFDcEIsSUFBSSxrQkFBNEMsQ0FBQztZQUVqRCxJQUFJLGFBQWEsSUFBSSxzQkFBc0IsQ0FBQyxTQUFTO2dCQUNuRCxrQkFBa0IsR0FBRyxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLHdCQUF3QixDQUFDLE1BQU0sQ0FBQzs7Z0JBRXpHLGtCQUFrQixHQUFHLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLHdCQUF3QixDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsd0JBQXdCLENBQUMsUUFBUSxDQUFDO1lBRW5ILENBQUMsR0FBRyxJQUFJLENBQUMsMkJBQTJCLENBQUMsSUFBSSxDQUFDLDhCQUE4QixDQUFDLGtCQUFrQixDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDdkcsT0FBTyxDQUFDLENBQUM7UUFDWCxDQUFDO1FBRUQ7Ozs7V0FJRztRQUNILGVBQWUsQ0FBQyxJQUFZLEVBQUUsSUFBWSxFQUFFLGFBQXFDLEVBQUUsVUFBa0I7WUFDbkcsSUFBSSxTQUFTLEdBQWEsRUFBRSxDQUFDO1lBQzdCLElBQUksVUFBVSxHQUFXLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMzRCxJQUFJLFVBQVUsR0FBVyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDM0QsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQzdCLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUU3QixPQUFPLFVBQVUsSUFBSSxVQUFVLEVBQUU7Z0JBQy9CLElBQUksYUFBYSxHQUEwQixJQUFJLENBQUMsbUJBQW1CLENBQUMsVUFBVSxFQUFFLGFBQWEsQ0FBQyxDQUFDO2dCQUMvRixJQUFJLFVBQVUsSUFBSSxVQUFVLEVBQUU7b0JBQzVCLFNBQVMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7aUJBQ2xGO3FCQUFNO29CQUNMLFNBQVMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO29CQUMzRixJQUFJLEdBQUcsQ0FBQyxDQUFDO2lCQUNWO2dCQUNELFVBQVUsRUFBRSxDQUFDO2FBQ2Q7WUFFRCxPQUFPLFNBQVMsQ0FBQztRQUNuQixDQUFDO1FBRUQ7Ozs7V0FJRztRQUNILFFBQVEsQ0FBQyxLQUFhLEVBQUUsS0FBYTtZQUNuQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQztZQUMzQixJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQy9CLENBQUM7UUFFRDs7O1dBR0c7UUFDSCxXQUFXLENBQUMsS0FBYTtZQUN2QixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUMvQixDQUFDO1FBR0Q7O1dBRUc7UUFDSCxrQkFBa0I7WUFDaEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7WUFDbkIsSUFBSSxDQUFDLHdCQUF3QixDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3pELENBQUM7UUFFRDs7V0FFRztRQUNJLFlBQVksQ0FBQyxLQUFhLEVBQUUsU0FBNkIsRUFBRSxZQUFvQixLQUFLO1lBQ3pGLFFBQVEsU0FBUyxFQUFFO2dCQUNqQixLQUFLLGtCQUFrQixDQUFDLElBQUk7b0JBQzFCLHFDQUFxQztvQkFDckMsT0FBTyxTQUFTLENBQUM7Z0JBQ25CLEtBQUssa0JBQWtCLENBQUMsU0FBUztvQkFDL0IsSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLFNBQVM7d0JBQ3pCLE9BQU8sSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBSyxvQ0FBb0M7Z0JBQzFFLEtBQUssa0JBQWtCLENBQUMsZUFBZTtvQkFDckMsSUFBSSxLQUFLLElBQUksSUFBSSxDQUFDLFNBQVM7d0JBQ3pCLGtDQUFrQzt3QkFDbEMsT0FBTyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxDQUFLLG9DQUFvQzthQUMzRTtZQUNELE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSSxrQkFBa0IsQ0FBQyxLQUFhLEVBQUUsU0FBNkI7WUFDcEUsUUFBUSxTQUFTLEVBQUU7Z0JBQ2pCLEtBQUssa0JBQWtCLENBQUMsSUFBSTtvQkFDMUIsT0FBTyxDQUFDLENBQUM7Z0JBQ1gsb0NBQW9DO2dCQUNwQywrREFBK0Q7Z0JBQy9ELGdCQUFnQjtnQkFDaEIsU0FBUztnQkFDVCxpQkFBaUI7Z0JBQ2pCLEtBQUssa0JBQWtCLENBQUMsWUFBWTtvQkFDbEMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDWixLQUFLLGtCQUFrQixDQUFDLFNBQVMsQ0FBQztnQkFDbEMsS0FBSyxrQkFBa0IsQ0FBQyxlQUFlO29CQUNyQyxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO3dCQUMzQixPQUFPLENBQUMsQ0FBQztxQkFDVjtnQkFDSDtvQkFDRSxPQUFPLENBQUMsQ0FBQzthQUNaO1FBQ0gsQ0FBQztRQUVELGtCQUFrQjtRQUNYLFNBQVM7WUFDZCxJQUFJLENBQUMsR0FBa0I7Z0JBQ3JCLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtnQkFDM0IsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2dCQUNmLE1BQU0sRUFBRSxFQUFFO2dCQUNWLE1BQU0sRUFBRSxFQUFFO2dCQUNWLGVBQWUsRUFBRSxJQUFJLENBQUMsZUFBZTtnQkFDckMsMkJBQTJCO2FBQzVCLENBQUM7WUFDRixLQUFLLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7Z0JBQzVCLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNwQztZQUNELEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDNUIsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ3BDO1lBQ0QsQ0FBQyxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUN2RixPQUFPLENBQUMsQ0FBQztRQUNYLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELFVBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2xELElBQUksQ0FBQyxJQUFJLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQztZQUNoQyxJQUFJLENBQUMsZUFBZSxHQUFHLGNBQWMsQ0FBQyxlQUFlLENBQUM7WUFDdEQsNENBQTRDO1lBQzVDLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1lBQ2pCLEtBQUssSUFBSSxJQUFJLElBQUksY0FBYyxDQUFDLE1BQU0sRUFBRTtnQkFDdEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxjQUFjLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2pEO1lBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7WUFDakIsS0FBSyxJQUFJLElBQUksSUFBSSxjQUFjLENBQUMsTUFBTSxFQUFFO2dCQUN0QyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDakQ7WUFDRCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksR0FBRyxFQUFtRCxDQUFDO1lBRWxGLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxNQUFNLElBQUksQ0FBQyxtQ0FBbUMsQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUU1RyxJQUFJLENBQUMsNkJBQTZCLEdBQUcsSUFBSSxHQUFHLEVBQWdELENBQUM7WUFFN0YsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDMUIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRUQsaUNBQWlDO1FBQ2pDLDZCQUE2QjtRQUM3QixJQUFJO1FBRU0sYUFBYSxDQUFDLFFBQWlCO1lBQ3ZDLE9BQU8sUUFBUSxDQUFDLFNBQVMsQ0FBQztRQUM1QixDQUFDO1FBQ0Q7Ozs7V0FJRztRQUNLLGlDQUFpQyxDQUFDLFVBQWtCO1lBQzFELElBQUksYUFBYSxHQUFrQixFQUFFLENBQUM7WUFDdEMsS0FBSyxNQUFNLFFBQVEsSUFBSSxVQUFVLEVBQUU7Z0JBQ2pDLElBQUksbUJBQW1CLEdBQXFCLFVBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDbEUsSUFBSSxtQkFBbUIsWUFBWSxVQUFBLGlCQUFpQixFQUFFO29CQUNwRCxhQUFhLENBQUMsUUFBUSxDQUFDLEdBQUcsbUJBQW1CLENBQUMsU0FBUyxFQUFFLENBQUM7aUJBQzNEO3FCQUFNO29CQUNMLElBQUksVUFBQSxTQUFTLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLEVBQUU7d0JBQzVELGFBQWEsQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUM7d0JBQzdCLEtBQUssTUFBTSxDQUFDLElBQUksbUJBQW1CLEVBQUU7NEJBQ2pCLGFBQWEsQ0FBQyxRQUFRLENBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxDQUFXLG1CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzt5QkFDNUg7cUJBQ0Y7eUJBQU07d0JBQ0wsYUFBYSxDQUFDLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQyxpQ0FBaUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO3FCQUN2RjtpQkFDRjthQUNGO1lBQ0QsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUNEOzs7O1dBSUc7UUFDSyxLQUFLLENBQUMsbUNBQW1DLENBQUMsY0FBNkI7WUFDN0UsSUFBSSxTQUFTLEdBQXVCLEVBQUUsQ0FBQztZQUN2QyxLQUFLLElBQUksQ0FBQyxJQUFJLGNBQWMsRUFBRTtnQkFDNUIsSUFBSSxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLEVBQUU7b0JBQ3ZDLElBQUksT0FBTyxHQUFzQixJQUFJLFVBQUEsaUJBQWlCLEVBQUUsQ0FBQztvQkFDekQsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFzQixDQUFDLE1BQU0sT0FBTyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUNsRjtxQkFBTTtvQkFDTCxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxJQUFJLENBQUMsbUNBQW1DLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ2xGO2FBQ0Y7WUFDRCxPQUFPLFNBQVMsQ0FBQztRQUNuQixDQUFDO1FBQ0QsWUFBWTtRQUVaOztXQUVHO1FBQ0ssbUJBQW1CLENBQUMsVUFBa0IsRUFBRSxhQUFxQztZQUNuRixJQUFJLGFBQWEsSUFBSSxzQkFBc0IsQ0FBQyxNQUFNLEVBQUU7Z0JBQ2xELElBQUksVUFBVSxJQUFJLENBQUMsRUFBRTtvQkFDbkIsT0FBTyxJQUFJLENBQUMsd0JBQXdCLENBQUMsd0JBQXdCLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQ3ZFO3FCQUFNO29CQUNMLE9BQU8sSUFBSSxDQUFDLHdCQUF3QixDQUFDLHdCQUF3QixDQUFDLE9BQU8sQ0FBQyxDQUFDO2lCQUN4RTthQUNGO2lCQUFNO2dCQUNMLElBQUksVUFBVSxJQUFJLENBQUMsRUFBRTtvQkFDbkIsT0FBTyxJQUFJLENBQUMsd0JBQXdCLENBQUMsd0JBQXdCLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ3pFO3FCQUFNO29CQUNMLE9BQU8sSUFBSSxDQUFDLHdCQUF3QixDQUFDLHdCQUF3QixDQUFDLGVBQWUsQ0FBQyxDQUFDO2lCQUNoRjthQUNGO1FBQ0gsQ0FBQztRQUVEOztXQUVHO1FBQ0ssMkJBQTJCLENBQUMsVUFBOEIsRUFBRSxLQUFhO1lBQy9FLElBQUksVUFBVSxHQUFZLEVBQUUsQ0FBQztZQUM3QixLQUFLLElBQUksQ0FBQyxJQUFJLFVBQVUsRUFBRTtnQkFDeEIsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDLFlBQVksVUFBQSxpQkFBaUIsRUFBRTtvQkFDOUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUF1QixVQUFVLENBQUMsQ0FBQyxDQUFFLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUNwRTtxQkFBTTtvQkFDTCxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLDJCQUEyQixDQUFxQixVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7aUJBQzVGO2FBQ0Y7WUFDRCxPQUFPLFVBQVUsQ0FBQztRQUNwQixDQUFDO1FBRUQ7OztXQUdHO1FBQ0ssd0JBQXdCLENBQUMsVUFBOEI7WUFDN0QsS0FBSyxJQUFJLENBQUMsSUFBSSxVQUFVLEVBQUU7Z0JBQ3hCLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxZQUFZLFVBQUEsaUJBQWlCLEVBQUU7b0JBQzlDLElBQUksUUFBUSxHQUF5QyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ25FLElBQUksUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7d0JBQ3ZCLElBQUksWUFBWSxHQUFXLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7d0JBQ3JFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO3FCQUN6RDtpQkFDRjtxQkFBTTtvQkFDTCxJQUFJLENBQUMsd0JBQXdCLENBQXFCLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUNsRTthQUNGO1FBQ0gsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSyw4QkFBOEIsQ0FBQyxLQUErQjtZQUNwRSxJQUFJLENBQUMsSUFBSSxDQUFDLDZCQUE2QixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDbEQsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7Z0JBQzFCLElBQUksRUFBRSxHQUF1QixFQUFFLENBQUM7Z0JBQ2hDLFFBQVEsS0FBSyxFQUFFO29CQUNiLEtBQUssd0JBQXdCLENBQUMsTUFBTTt3QkFDbEMsRUFBRSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQzt3QkFDN0IsTUFBTTtvQkFDUixLQUFLLHdCQUF3QixDQUFDLE9BQU87d0JBQ25DLEVBQUUsR0FBRyxJQUFJLENBQUMsZ0NBQWdDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzt3QkFDOUcsTUFBTTtvQkFDUixLQUFLLHdCQUF3QixDQUFDLFFBQVE7d0JBQ3BDLEVBQUUsR0FBRyxJQUFJLENBQUMsZ0NBQWdDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzt3QkFDL0csTUFBTTtvQkFDUixLQUFLLHdCQUF3QixDQUFDLGVBQWU7d0JBQzNDLEVBQUUsR0FBRyxJQUFJLENBQUMsZ0NBQWdDLENBQUMsSUFBSSxDQUFDLDhCQUE4QixDQUFDLHdCQUF3QixDQUFDLE9BQU8sQ0FBQyxFQUFFLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzt3QkFDN0osTUFBTTtvQkFDUjt3QkFDRSxPQUFPLEVBQUUsQ0FBQztpQkFDYjtnQkFDRCxJQUFJLENBQUMsNkJBQTZCLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQzthQUNuRDtZQUNELE9BQU8sSUFBSSxDQUFDLDZCQUE2QixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2RCxDQUFDO1FBRUQ7Ozs7V0FJRztRQUNLLHdCQUF3QixDQUFDLEtBQStCO1lBQzlELElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDcEMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7Z0JBQzFCLElBQUksRUFBRSxHQUEwQixFQUFFLENBQUM7Z0JBQ25DLFFBQVEsS0FBSyxFQUFFO29CQUNiLEtBQUssd0JBQXdCLENBQUMsTUFBTTt3QkFDbEMsRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7d0JBQ2pCLE1BQU07b0JBQ1IsS0FBSyx3QkFBd0IsQ0FBQyxPQUFPO3dCQUNuQyxFQUFFLEdBQUcsSUFBSSxDQUFDLDZCQUE2QixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzt3QkFDckQsTUFBTTtvQkFDUixLQUFLLHdCQUF3QixDQUFDLFFBQVE7d0JBQ3BDLEVBQUUsR0FBRyxJQUFJLENBQUMsOEJBQThCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3dCQUN0RCxNQUFNO29CQUNSLEtBQUssd0JBQXdCLENBQUMsZUFBZTt3QkFDM0MsRUFBRSxHQUFHLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsd0JBQXdCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQzt3QkFDMUcsTUFBTTtvQkFDUjt3QkFDRSxPQUFPLEVBQUUsQ0FBQztpQkFDYjtnQkFDRCxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDckM7WUFDRCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pDLENBQUM7UUFFRDs7Ozs7V0FLRztRQUNLLGdDQUFnQyxDQUFDLGFBQWlDLEVBQUUsY0FBd0I7WUFDbEcsSUFBSSxZQUFZLEdBQXVCLEVBQUUsQ0FBQztZQUMxQyxLQUFLLElBQUksQ0FBQyxJQUFJLGFBQWEsRUFBRTtnQkFDM0IsSUFBSSxhQUFhLENBQUMsQ0FBQyxDQUFDLFlBQVksVUFBQSxpQkFBaUIsRUFBRTtvQkFDakQsWUFBWSxDQUFDLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDcEQ7cUJBQU07b0JBQ0wsWUFBWSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxnQ0FBZ0MsQ0FBcUIsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxDQUFDO2lCQUMvRzthQUNGO1lBQ0QsT0FBTyxZQUFZLENBQUM7UUFDdEIsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSyx3QkFBd0IsQ0FBQyxTQUE0QjtZQUMzRCxJQUFJLEdBQUcsR0FBc0IsSUFBSSxVQUFBLGlCQUFpQixFQUFFLENBQUM7WUFDckQsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2pELElBQUksTUFBTSxHQUFpQixTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMvQyxJQUFJLEdBQUcsR0FBaUIsSUFBSSxVQUFBLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN2SSxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ2pCO1lBQ0QsT0FBTyxHQUFHLENBQUM7UUFDYixDQUFDO1FBRUQ7Ozs7V0FJRztRQUNLLHlCQUF5QixDQUFDLFNBQTRCO1lBQzVELElBQUksR0FBRyxHQUFzQixJQUFJLFVBQUEsaUJBQWlCLEVBQUUsQ0FBQztZQUNyRCxJQUFJLFNBQVMsR0FBVyxJQUFJLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztZQUNwRCxLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLElBQUksU0FBUyxFQUFFO2dCQUMxRCxJQUFJLEdBQUcsR0FBaUIsSUFBSSxVQUFBLFlBQVksQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUMvRSxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ2pCO1lBQ0QsT0FBTyxHQUFHLENBQUM7UUFDYixDQUFDO1FBRUQ7Ozs7V0FJRztRQUNLLDZCQUE2QixDQUFDLE9BQThCO1lBQ2xFLElBQUksRUFBRSxHQUEwQixFQUFFLENBQUM7WUFDbkMsS0FBSyxJQUFJLElBQUksSUFBSSxPQUFPLEVBQUU7Z0JBQ3hCLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUMzQztZQUNELE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQztRQUVEOzs7O1dBSUc7UUFDSyw4QkFBOEIsQ0FBQyxPQUE4QjtZQUNuRSxJQUFJLEVBQUUsR0FBMEIsRUFBRSxDQUFDO1lBQ25DLElBQUksU0FBUyxHQUFXLElBQUksR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDO1lBQ3BELEtBQUssSUFBSSxJQUFJLElBQUksT0FBTyxFQUFFO2dCQUN4QixFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDO2FBQ3hEO1lBQ0QsT0FBTyxFQUFFLENBQUM7UUFDWixDQUFDO1FBRUQ7Ozs7OztXQU1HO1FBQ0ssa0JBQWtCLENBQUMsY0FBcUMsRUFBRSxJQUFZLEVBQUUsSUFBWTtZQUMxRixJQUFJLGVBQWUsR0FBYSxFQUFFLENBQUM7WUFDbkMsS0FBSyxJQUFJLElBQUksSUFBSSxjQUFjLEVBQUU7Z0JBQy9CLElBQUksSUFBSSxJQUFJLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxFQUFFO29CQUMvRCxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUM1QjthQUNGO1lBQ0QsT0FBTyxlQUFlLENBQUM7UUFDekIsQ0FBQzs7SUE3Y0QscUdBQXFHO0lBQ3JHLGtFQUFrRTtJQUNsRSx3RkFBd0Y7SUFDakUsb0JBQVUsR0FBdUIsRUFBRSxDQUFDO0lBQ3BDLG1CQUFTLEdBQVcsU0FBUyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBTHRFLG1CQUFTLFlBK2NyQixDQUFBO0FBQ0gsQ0FBQyxFQS9pQlMsU0FBUyxLQUFULFNBQVMsUUEraUJsQjtBQ2pqQkQsa0RBQWtEO0FBQ2xELCtDQUErQztBQUUvQyxJQUFVLFNBQVMsQ0EyRWxCO0FBOUVELGtEQUFrRDtBQUNsRCwrQ0FBK0M7QUFFL0MsV0FBVSxTQUFTO0lBQ2pCOzs7OztPQUtHO0lBQ0gsTUFBYSxpQkFBaUI7UUFTNUIsWUFBWSxNQUFvQixFQUFFLFVBQXdCLElBQUk7WUFSdEQsTUFBQyxHQUFXLENBQUMsQ0FBQztZQUNkLE1BQUMsR0FBVyxDQUFDLENBQUM7WUFDZCxNQUFDLEdBQVcsQ0FBQyxDQUFDO1lBQ2QsTUFBQyxHQUFXLENBQUMsQ0FBQztZQU1wQixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztZQUNwQixJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQztZQUN0QixJQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDbkIsQ0FBQztRQUVELElBQUksUUFBUSxDQUFDLE1BQW9CO1lBQy9CLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNuQixDQUFDO1FBRUQsSUFBSSxTQUFTLENBQUMsT0FBcUI7WUFDakMsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7WUFDdEIsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ25CLENBQUM7UUFFTSxhQUFhO1lBQ2xCLE9BQU8sRUFBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBQyxDQUFDO1FBQ3RELENBQUM7UUFFRDs7OztXQUlHO1FBQ0gsUUFBUSxDQUFDLEtBQWE7WUFDcEIsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO1lBQ3pCLElBQUksS0FBSyxHQUFXLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDbEMsSUFBSSxLQUFLLEdBQVcsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNsQyxPQUFPLElBQUksQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDbkUsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSCxTQUFTO1lBQ1AsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQ2YsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3RDLE9BQU87YUFDUjtZQUNELElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO2dCQUN2QyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO2dCQUMxQixJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzdCLE9BQU87YUFDUjtZQUVELElBQUksRUFBRSxHQUFXLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO1lBRXBELElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7WUFDMUIsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztZQUU3QixJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQy9ILElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ2pHLENBQUM7S0FFRjtJQWxFWSwyQkFBaUIsb0JBa0U3QixDQUFBO0FBRUgsQ0FBQyxFQTNFUyxTQUFTLEtBQVQsU0FBUyxRQTJFbEI7QUM5RUQsa0RBQWtEO0FBQ2xELCtDQUErQztBQUUvQyxJQUFVLFNBQVMsQ0FpSWxCO0FBcElELGtEQUFrRDtBQUNsRCwrQ0FBK0M7QUFFL0MsV0FBVSxTQUFTO0lBQ2pCOzs7Ozs7T0FNRztJQUNILE1BQWEsWUFBYSxTQUFRLFVBQUEsT0FBTztRQWdCdkMsWUFBWSxRQUFnQixDQUFDLEVBQUUsU0FBaUIsQ0FBQyxFQUFFLFdBQW1CLENBQUMsRUFBRSxZQUFvQixDQUFDLEVBQUUsWUFBcUIsS0FBSztZQUN4SCxLQUFLLEVBQUUsQ0FBQztZQU5WLGNBQVMsR0FBWSxLQUFLLENBQUM7WUFFM0IsYUFBUSxHQUFXLENBQUMsQ0FBQztZQUNyQixjQUFTLEdBQVcsQ0FBQyxDQUFDO1lBSXBCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1lBQ25CLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1lBQ3pCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1lBQzNCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1lBRTNCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDN0MsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLFVBQUEsaUJBQWlCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3ZELENBQUM7UUFqQkQsS0FBSyxDQUFTO1FBQ2QsTUFBTSxDQUFTO1FBQ2YsU0FBUyxDQUFrQjtRQUUzQixRQUFRLENBQWE7UUFDckIsU0FBUyxDQUFhO1FBY3RCOzs7OztXQUtHO1FBQ0ksTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFnQixFQUFFLEVBQWdCO1lBQ3RELE9BQU8sRUFBRSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDO1FBQzNCLENBQUM7UUFFRCxJQUFJLElBQUk7WUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDcEIsQ0FBQztRQUVELElBQUksSUFBSSxDQUFDLEtBQWE7WUFDcEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDbkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQy9CLENBQUM7UUFFRCxJQUFJLEtBQUs7WUFDUCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDckIsQ0FBQztRQUVELElBQUksS0FBSyxDQUFDLE1BQWM7WUFDdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFDckIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUM1QixJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQy9CLENBQUM7UUFFRCxJQUFJLFFBQVE7WUFDVixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQztRQUVELElBQUksUUFBUSxDQUFDLFNBQWtCO1lBQzdCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1lBQzNCLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDNUIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUMvQixDQUFDO1FBRUQsSUFBSSxPQUFPO1lBQ1QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3ZCLENBQUM7UUFFRCxJQUFJLE9BQU8sQ0FBQyxNQUFjO1lBQ3hCLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDOUIsQ0FBQztRQUVELElBQUksUUFBUTtZQUNWLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUN4QixDQUFDO1FBRUQsSUFBSSxRQUFRLENBQUMsTUFBYztZQUN6QixJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQztZQUN4QixJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQy9CLENBQUM7UUFHRCxrQkFBa0I7UUFDbEIsU0FBUztZQUNQLElBQUksYUFBYSxHQUFrQixFQUFFLENBQUM7WUFDdEMsYUFBYSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ2hDLGFBQWEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUNsQyxhQUFhLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDdEMsYUFBYSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ3hDLGFBQWEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUN4QyxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxJQUFJLENBQUMsS0FBSyxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUM7WUFDakMsSUFBSSxDQUFDLE1BQU0sR0FBRyxjQUFjLENBQUMsS0FBSyxDQUFDO1lBQ25DLElBQUksQ0FBQyxRQUFRLEdBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQztZQUN2QyxJQUFJLENBQUMsU0FBUyxHQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUM7WUFDekMsSUFBSSxDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUMsUUFBUSxDQUFDO1lBRXpDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7WUFFN0MsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRUQsVUFBVTtZQUNSLE9BQU8sSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQzFCLENBQUM7UUFFUyxhQUFhLENBQUMsUUFBaUI7WUFDdkMsRUFBRTtRQUNKLENBQUM7S0FHRjtJQXZIWSxzQkFBWSxlQXVIeEIsQ0FBQTtBQUVILENBQUMsRUFqSVMsU0FBUyxLQUFULFNBQVMsUUFpSWxCO0FDcElELElBQVUsU0FBUyxDQTRKbEI7QUE1SkQsV0FBVSxTQUFTO0lBQ2pCOzs7O09BSUc7SUFDSCxNQUFhLGlCQUFrQixTQUFRLFVBQUEsT0FBTztRQUE5Qzs7WUFDVSxTQUFJLEdBQW1CLEVBQUUsQ0FBQztRQW9KcEMsQ0FBQztRQWxKQyxJQUFJLE1BQU07WUFDUixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQzFCLENBQUM7UUFFRDs7OztXQUlHO1FBQ0gsUUFBUSxDQUFDLEtBQWE7WUFDcEIsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDO2dCQUN2QixPQUFPLFNBQVMsQ0FBQyxDQUFDLGtMQUFrTDtZQUN0TSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxLQUFLO2dCQUNyRCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1lBRzVCLEtBQUssSUFBSSxDQUFDLEdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3JELElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxLQUFLLEVBQUU7b0JBQy9ELE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUNqRDthQUNGO1lBQ0QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUMvQyxDQUFDO1FBRUQ7OztXQUdHO1FBQ0gsTUFBTSxDQUFDLElBQWtCO1lBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3JCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQUEsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzdCLENBQUM7UUFFRDs7O1dBR0c7UUFDSCxTQUFTLENBQUMsSUFBa0IsRUFBRSxLQUFjLEVBQUUsTUFBZTtZQUMzRCxJQUFJLEtBQUssSUFBSSxJQUFJO2dCQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1lBQ3BCLElBQUksTUFBTSxJQUFJLElBQUk7Z0JBQ2hCLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQUEsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzdCLENBQUM7UUFFRDs7O1dBR0c7UUFDSCxTQUFTLENBQUMsSUFBa0I7WUFDMUIsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUNqRCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFO29CQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ3ZCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO29CQUMzQixPQUFPO2lCQUNSO2FBQ0Y7UUFDSCxDQUFDO1FBRUQ7O1dBRUc7UUFDSCxPQUFPLENBQUMsS0FBYTtZQUNuQixLQUFLLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJO2dCQUN2QixJQUFJLEdBQUcsQ0FBQyxJQUFJLElBQUksS0FBSztvQkFDbkIsT0FBTyxHQUFHLENBQUM7WUFDZixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRDs7OztXQUlHO1FBQ0gsZ0JBQWdCLENBQUMsTUFBYztZQUM3QixJQUFJLE1BQU0sR0FBRyxDQUFDLElBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUM1QyxPQUFPLElBQUksQ0FBQzthQUNiO1lBQ0QsSUFBSSxFQUFFLEdBQWlCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDekMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBQzNCLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQztRQUVEOzs7O1dBSUc7UUFDSCxNQUFNLENBQUMsTUFBYztZQUNuQixJQUFJLE1BQU0sR0FBRyxDQUFDLElBQUksTUFBTSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTTtnQkFDMUMsT0FBTyxJQUFJLENBQUM7WUFDZCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDM0IsQ0FBQztRQUVELE9BQU87WUFDTCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDbkIsQ0FBQztRQUVELGtCQUFrQjtRQUNsQixTQUFTO1lBQ1AsSUFBSSxDQUFDLEdBQWtCO2dCQUNyQixJQUFJLEVBQUUsRUFBRTtnQkFDUixpQkFBaUIsRUFBRSxJQUFJO2FBQ3hCLENBQUM7WUFDRixLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2pELENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQzthQUN0QztZQUNELE9BQU8sQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUMzRCxnRkFBZ0Y7Z0JBQ2hGLElBQUksQ0FBQyxHQUFpQixJQUFJLFVBQUEsWUFBWSxFQUFFLENBQUM7Z0JBQ3pDLE1BQU0sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzVDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ2xCO1lBRUQsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7WUFDM0IsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBQ1MsYUFBYSxDQUFDLFFBQWlCO1lBQ3ZDLEVBQUU7UUFDSixDQUFDO1FBQ0QsWUFBWTtRQUVaOztXQUVHO1FBQ0ssbUJBQW1CO1lBQ3pCLEtBQUssSUFBSSxDQUFDLEdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDakQsSUFBSSxDQUFDLEdBQXNCLElBQUksVUFBQSxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQy9ELElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQztnQkFDN0IsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO29CQUM3QixpS0FBaUs7b0JBQ2pLLENBQUMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDM0IsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO29CQUM1QixNQUFNO2lCQUNQO2dCQUNELENBQUMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7YUFDakM7UUFDSCxDQUFDO0tBQ0Y7SUFySlksMkJBQWlCLG9CQXFKN0IsQ0FBQTtBQUNILENBQUMsRUE1SlMsU0FBUyxLQUFULFNBQVMsUUE0SmxCO0FDNUpELElBQVUsU0FBUyxDQTJJbEI7QUEzSUQsV0FBVSxTQUFTO0lBQ2pCLE1BQWEsZUFBZ0IsU0FBUSxVQUFBLFNBQVM7UUFXNUMsc0NBQXNDO1FBQ3RDLFlBQVksUUFBZ0IsaUJBQWlCO1lBQzNDLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBWGYsWUFBTyxHQUFZLFVBQUEsY0FBYyxDQUFDLE9BQU8sQ0FBQztZQUV6QyxXQUFNLEdBQVcsRUFBRSxDQUFDO1lBQ3BCLGNBQVMsR0FBVyxDQUFDLENBQUM7WUFDdEIsVUFBSyxHQUFZLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ25DLFNBQUksR0FBWSxJQUFJLFVBQUEsT0FBTyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUNwQyxTQUFJLEdBQVksSUFBSSxVQUFBLE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbkMsU0FBSSxHQUFZLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBS3pDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUNuQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQzVILENBQUM7UUFFTSxVQUFVLENBQUMsUUFBaUI7WUFDakMsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUM7WUFDeEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUMsVUFBVSxDQUFDO1FBQ3ZDLENBQUM7UUFFTSxNQUFNLENBQUMsUUFBaUIsRUFBRSxPQUFlLEVBQUUsVUFBa0IsRUFBRSxNQUFlLEVBQUUsS0FBYyxFQUFFLEtBQWMsRUFBRSxLQUFjLEVBQUUsZ0JBQXdCO1lBQzdKLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7WUFDdEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUM7WUFDNUIsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7WUFDcEIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxnQkFBZ0IsQ0FBQztZQUV4QyxJQUFJLEtBQUssR0FBWSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDckMsSUFBSSxTQUFTLEdBQWMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1lBRS9DLElBQUksWUFBWSxHQUFzQixJQUFJLFVBQUEsaUJBQWlCLEVBQUUsQ0FBQztZQUM5RCxJQUFJLFlBQVksR0FBc0IsSUFBSSxVQUFBLGlCQUFpQixFQUFFLENBQUM7WUFDOUQsSUFBSSxNQUFNLEdBQXNCLElBQUksVUFBQSxpQkFBaUIsRUFBRSxDQUFDO1lBQ3hELElBQUksTUFBTSxHQUFzQixJQUFJLFVBQUEsaUJBQWlCLEVBQUUsQ0FBQztZQUN4RCxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksVUFBQSxZQUFZLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxVQUFBLFlBQVksQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFNUMsS0FBSyxJQUFJLEtBQUssR0FBVyxDQUFDLEVBQUUsS0FBSyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUU7Z0JBQ3pELElBQUksSUFBSSxHQUFXLElBQUksR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztnQkFDdkQsSUFBSSxRQUFRLEdBQVksU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHNEQUFzRDtnQkFDM0gsWUFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLFVBQUEsWUFBWSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQSxnQkFBZ0I7Z0JBQzVHLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxVQUFBLFlBQVksQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUEsZ0JBQWdCO2FBQzlHO1lBRUQsSUFBSSxDQUFDLGtCQUFrQixHQUFHO2dCQUN4QixZQUFZLEVBQUU7b0JBQ1osbUJBQW1CLEVBQUUsQ0FBQzs0QkFDcEIsVUFBVSxFQUFFO2dDQUNWLGFBQWEsRUFBRTtvQ0FDYixDQUFDLEVBQUUsWUFBWTtvQ0FDZixDQUFDLEVBQUUsWUFBWTtpQ0FDaEI7Z0NBQ0QsU0FBUyxFQUFFO29DQUNULENBQUMsRUFBRSxNQUFNO29DQUNULENBQUMsRUFBRSxNQUFNO2lDQUNWOzZCQUNGO3lCQUNGLENBQUM7aUJBQ0g7YUFDRixDQUFBO1lBRUQsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFDNUIsQ0FBQztRQUVNLFFBQVE7WUFDYixPQUFPLElBQUksVUFBQSxPQUFPLENBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssRUFDL0MsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUNqRCxDQUFDO1FBQ0osQ0FBQztRQUVNLFlBQVk7WUFDakIsSUFBSSxLQUFLLEdBQVcsQ0FBQyxDQUFDO1lBQ3RCLElBQUksS0FBSyxHQUFXLENBQUMsQ0FBQztZQUN0QixJQUFJLFNBQVMsR0FBYyxFQUFFLENBQUM7WUFDOUIsS0FBSyxJQUFJLEtBQUssR0FBVyxDQUFDLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEVBQUU7Z0JBQ3hELFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxVQUFBLE9BQU8sQ0FDeEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFDeEQsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FDekQsQ0FBQyxDQUFDO2dCQUVILEtBQUssRUFBRSxDQUFBO2dCQUNQLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7b0JBQzNCLEtBQUssR0FBRyxDQUFDLENBQUM7b0JBQ1YsS0FBSyxFQUFFLENBQUM7aUJBQ1Q7YUFDRjtZQUNELE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFFRCxrQkFBa0I7UUFDWCxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQWlCLEVBQUUsVUFBcUIsRUFBRSxlQUF5QjtZQUNyRixLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDNUgsQ0FBQztRQUVNLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0IsRUFBRSxDQUFDO1lBQ3RDLGFBQWEsQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztZQUMzQyxhQUFhLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDekMsYUFBYSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBQ25DLGFBQWEsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUN6QyxLQUFLLElBQUksSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDO2dCQUNoRCxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQWEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFFLENBQUMsU0FBUyxFQUFFLENBQUM7WUFFdkUsSUFBSSxtQkFBbUIsR0FBdUIsSUFBSSxDQUFDLGtCQUFrQixDQUFDO1lBQ3RFLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxFQUFFLENBQUMsQ0FBQyxpQ0FBaUM7WUFDL0Qsd0RBQXdEO1lBQ3hELGFBQWEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUMxRCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsbUJBQW1CLENBQUMsQ0FBQyw2QkFBNkI7WUFDNUUsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsRUFBaUI7WUFDeEMsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDcEQsSUFBSSxFQUFFLENBQUMsU0FBUztnQkFDZCxJQUFJLENBQUMsT0FBTyxHQUFZLE1BQU0sVUFBQSxPQUFPLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQzs7Z0JBRWhFLElBQUksQ0FBQyxPQUFPLEdBQUcsVUFBQSxjQUFjLENBQUMsT0FBTyxDQUFDO1lBRXhDLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUM7Z0JBQ3RDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBRSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUMzRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3RILE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUNELFlBQVk7UUFFTCxrQkFBa0I7WUFDdkIsSUFBSSxTQUFTLEdBQWMsSUFBSSxVQUFBLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDbkcsT0FBTyxTQUFTLENBQUM7UUFDbkIsQ0FBQzs7SUF2SXNCLHlCQUFTLEdBQVcsVUFBQSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLENBQUM7SUFENUUseUJBQWUsa0JBeUkzQixDQUFBO0FBQ0gsQ0FBQyxFQTNJUyxTQUFTLEtBQVQsU0FBUyxRQTJJbEI7QUMzSUQsSUFBVSxTQUFTLENBMkVsQjtBQTNFRCxXQUFVLFNBQVM7SUFDakI7OztPQUdHO0lBQ0gsTUFBYSxLQUFNLFNBQVEsVUFBQSxPQUFPO1FBUWhDLFlBQVksSUFBa0I7WUFDNUIsS0FBSyxFQUFFLENBQUM7WUFSSCxTQUFJLEdBQVcsT0FBTyxDQUFDO1lBQ3ZCLGVBQVUsR0FBVyxTQUFTLENBQUM7WUFDL0IsV0FBTSxHQUFnQixTQUFTLENBQUM7WUFDaEMsU0FBSSxHQUFRLFNBQVMsQ0FBQztZQUNyQixRQUFHLEdBQWdCLFNBQVMsQ0FBQztZQUM3QixVQUFLLEdBQVksS0FBSyxDQUFDO1lBSTdCLElBQUksSUFBSSxFQUFFO2dCQUNSLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQzthQUM5QztZQUNELFVBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRUQsSUFBSSxPQUFPO1lBQ1QsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7UUFFRDs7V0FFRztRQUNJLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBaUI7WUFDakMsVUFBQSxLQUFLLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMvQixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztZQUNoQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNuQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEVBQUUsVUFBQSxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDMUQsTUFBTSxRQUFRLEdBQWEsTUFBTSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztZQUNwRSxNQUFNLFdBQVcsR0FBZ0IsTUFBTSxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDOUQsSUFBSSxNQUFNLEdBQWdCLE1BQU0sVUFBQSxZQUFZLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNsRixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUNyQixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUNsQixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyxxQkFBbUIsQ0FBQyxDQUFDO1FBQ25ELENBQUM7UUFFRCxrQkFBa0I7UUFDWCxTQUFTO1lBQ2QsT0FBTztnQkFDTCxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7Z0JBQ2IsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO2dCQUMzQixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7Z0JBQ2YsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2FBQ2hCLENBQUM7UUFDSixDQUFDO1FBQ00sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxVQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNsRCxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxJQUFJLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQztZQUNoQyxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQWlCO1lBQ25DLElBQUksR0FBRyxHQUFXLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyw4Q0FBOEM7WUFDOUUsSUFBSSxRQUFRLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFO2dCQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUMxQixpREFBaUQ7WUFDakQsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN0QixLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZCLGlEQUFpRDtZQUNqRCxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDcEMsQ0FBQztRQUVTLGFBQWEsQ0FBQyxRQUFpQjtZQUN2QywrQkFBK0I7WUFDL0IsT0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDO1FBQ3hCLENBQUM7S0FFRjtJQXJFWSxlQUFLLFFBcUVqQixDQUFBO0FBQ0gsQ0FBQyxFQTNFUyxTQUFTLEtBQVQsU0FBUyxRQTJFbEI7QUUzRUQsNkNBQTZDO0FBQzdDLElBQVUsU0FBUyxDQXVFbEI7QUF4RUQsNkNBQTZDO0FBQzdDLFdBQVUsU0FBUztJQUNqQjs7OztPQUlHO0lBQ0gsTUFBYSxZQUFhLFNBQVEsWUFBWTtRQVM1QyxZQUFZLGNBQW9DO1lBQzlDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUxoQixVQUFLLEdBQVMsSUFBSSxDQUFDO1lBQ25CLGdCQUFXLEdBQTJCLElBQUksQ0FBQztZQXVCbkQ7O2VBRUc7WUFDSSxhQUFRLEdBQUcsQ0FBQyxNQUFtQixFQUFRLEVBQUU7Z0JBQzlDLElBQUksSUFBSSxDQUFDLEtBQUs7b0JBQ1osSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBSSxLQUFLLGdEQUEwQixDQUFDLENBQUM7Z0JBQ2pFLElBQUksQ0FBQyxNQUFNO29CQUNULE9BQU87Z0JBQ1QsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7Z0JBQ3BCLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksS0FBSyw4Q0FBMEIsQ0FBQyxDQUFDO1lBQ2pFLENBQUMsQ0FBQTtZQUVEOztlQUVHO1lBQ0ksd0JBQW1CLEdBQUcsR0FBUyxFQUFFO2dCQUN0QyxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDcEIsQ0FBQyxDQUFBO1lBRUQ7O2VBRUc7WUFDSSxlQUFVLEdBQUcsQ0FBQyxZQUEyQyxFQUFRLEVBQUU7Z0JBQ3hFLElBQUksQ0FBQyxXQUFXLEdBQUcsWUFBWSxDQUFDO1lBQ2xDLENBQUMsQ0FBQTtZQUVEOztlQUVHO1lBQ0ksV0FBTSxHQUFHLEdBQVMsRUFBRTtnQkFDekIsNERBQTREO2dCQUM1RCxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ3BELElBQUksSUFBSSxDQUFDLFdBQVc7b0JBQ2xCLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMzQyxDQUFDLENBQUE7WUFwREMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3RDLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsTUFBTSxDQUFDLE1BQWM7WUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztRQUNoQyxDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFXLE1BQU07WUFDZixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUM5QixDQUFDOztJQTFCRCxvR0FBb0c7SUFDN0Usb0JBQU8sR0FBaUIsSUFBSSxZQUFZLENBQUMsRUFBRSxXQUFXLEVBQUUsYUFBYSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBS3BHLHdCQUFXLEdBQVUsSUFBSSxLQUFLLGlDQUFvQixDQUFDO0lBUHZELHNCQUFZLGVBZ0V4QixDQUFBO0FBQ0gsQ0FBQyxFQXZFUyxTQUFTLEtBQVQsU0FBUyxRQXVFbEI7QUN4RUQsd0JBQXdCO0FBRXhCLFVBQVU7QUFDVixzREFBc0Q7QUFDdEQsVUFBVTtBQUNWLHFGQUFxRjtBQUVyRixVQUFVO0FBQ1Ysc0RBQXNEO0FBQ3RELDREQUE0RDtBQUM1RCx3REFBd0Q7QUFDeEQsa0RBQWtEO0FBQ2xELDhDQUE4QztBQUM5QyxVQUFVO0FBQ1YsaUNBQWlDO0FBQ2pDLDhCQUE4QjtBQUM5Qiw0QkFBNEI7QUFDNUIsUUFBUTtBQUNSLFVBQVU7QUFDVix5REFBeUQ7QUFDekQsMkNBQTJDO0FBQzNDLFVBQVU7QUFDVixxQ0FBcUM7QUFFckMsbURBQW1EO0FBRW5ELHFDQUFxQztBQUNyQyxtREFBbUQ7QUFDbkQsZ0RBQWdEO0FBRWhELHVDQUF1QztBQUN2QywwQ0FBMEM7QUFFMUMsMEZBQTBGO0FBQzFGLDBGQUEwRjtBQUMxRiw4RUFBOEU7QUFDOUUscURBQXFEO0FBQ3JELHFEQUFxRDtBQUNyRCxtRUFBbUU7QUFDbkUsZ0JBQWdCO0FBQ2hCLHFCQUFxQjtBQUNyQiw4Q0FBOEM7QUFDOUMsaUZBQWlGO0FBQ2pGLG9CQUFvQjtBQUNwQix5QkFBeUI7QUFDekIsNkZBQTZGO0FBQzdGLG9CQUFvQjtBQUNwQixnQkFBZ0I7QUFDaEIsWUFBWTtBQUVaLDZFQUE2RTtBQUM3RSxxREFBcUQ7QUFDckQsbUVBQW1FO0FBQ25FLGdCQUFnQjtBQUNoQixxQkFBcUI7QUFDckIsOENBQThDO0FBQzlDLGlGQUFpRjtBQUNqRixvQkFBb0I7QUFDcEIsZ0JBQWdCO0FBQ2hCLFlBQVk7QUFFWix3REFBd0Q7QUFDeEQsMENBQTBDO0FBQzFDLFlBQVk7QUFFWix5SEFBeUg7QUFDekgsZ0VBQWdFO0FBQ2hFLDhDQUE4QztBQUM5Qyw0Q0FBNEM7QUFFNUMsZ0VBQWdFO0FBQ2hFLDhDQUE4QztBQUM5Qyw0Q0FBNEM7QUFFNUMsNkdBQTZHO0FBQzdHLFlBQVk7QUFFWiw0REFBNEQ7QUFDNUQsMkNBQTJDO0FBQzNDLFlBQVk7QUFFWiw0Q0FBNEM7QUFDNUMscUNBQXFDO0FBQ3JDLFlBQVk7QUFFWixvRUFBb0U7QUFDcEUscURBQXFEO0FBQ3JELCtEQUErRDtBQUMvRCxZQUFZO0FBRVosK0NBQStDO0FBQy9DLDBDQUEwQztBQUMxQyxZQUFZO0FBRVoseUZBQXlGO0FBQ3pGLDJDQUEyQztBQUMzQywySEFBMkg7QUFDM0gsWUFBWTtBQUVaLDBDQUEwQztBQUMxQyxxQ0FBcUM7QUFDckMsWUFBWTtBQUVaLG9FQUFvRTtBQUNwRSxrREFBa0Q7QUFDbEQsc0RBQXNEO0FBQ3RELHlDQUF5QztBQUN6QyxtR0FBbUc7QUFDbkcseUhBQXlIO0FBRXpILDREQUE0RDtBQUM1RCxZQUFZO0FBQ1osUUFBUTtBQUNSLElBQUk7QUNqSEosd0NBQXdDO0FBQ3hDLGtEQUFrRDtBQUVsRCxJQUFVLFNBQVMsQ0FvTWxCO0FBdk1ELHdDQUF3QztBQUN4QyxrREFBa0Q7QUFFbEQsV0FBVSxTQUFTO0lBRWpCOzs7T0FHRztJQUNILE1BQWEsaUJBQWtCLFNBQVEsVUFBQSxTQUFTO1FBYTlDLFlBQVksVUFBc0IsRUFBRSxZQUFnQyxVQUFBLGtCQUFrQixDQUFDLElBQUksRUFBRSxnQkFBd0MsVUFBQSxzQkFBc0IsQ0FBQyxTQUFTO1lBQ25LLEtBQUssRUFBRSxDQUFDO1lBUkgsc0JBQWlCLEdBQVksSUFBSSxDQUFDO1lBQ2xDLG9CQUFlLEdBQVksS0FBSyxDQUFDO1lBRXhDLFdBQU0sR0FBVyxDQUFDLENBQUM7WUFFbkIsY0FBUyxHQUFXLENBQUMsQ0FBQztZQWlJdEIseUJBQXlCO1lBQ3pCOzs7O2VBSUc7WUFDSyx3QkFBbUIsR0FBRyxDQUFDLEVBQVMsRUFBRSxLQUFjLEVBQVcsRUFBRTtnQkFDbkUsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsSUFBSSxDQUFDO29CQUFFLE9BQU8sSUFBSSxDQUFDO2dCQUUvQyxJQUFJLElBQUksR0FBVyxLQUFLLElBQUksS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUN4RSxJQUFJLElBQUksQ0FBQyxZQUFZLElBQUksVUFBQSxzQkFBc0IsQ0FBQyxNQUFNLEVBQUU7b0JBQ3RELElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7aUJBQ3JEO2dCQUNELElBQUksU0FBUyxHQUFXLElBQUksQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDL0UsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztnQkFDckYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsWUFBWSxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBRXZHLElBQUksSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLEVBQUU7b0JBQzFCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO29CQUN0QixJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO29CQUN2QyxJQUFJLE9BQU8sR0FBWSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztvQkFDbkYsSUFBSSxJQUFJLENBQUMsSUFBSSxFQUFFO3dCQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO3FCQUNuQztvQkFDRCxPQUFPLE9BQU8sQ0FBQztpQkFDaEI7Z0JBQ0QsT0FBTyxJQUFJLENBQUM7WUFDZCxDQUFDLENBQUE7WUFZRDs7ZUFFRztZQUNLLGdCQUFXLEdBQUcsR0FBUyxFQUFFO2dCQUMvQixJQUFJLFFBQVEsR0FBVyxJQUFJLENBQUMsTUFBTSxDQUFDO2dCQUNuQyxJQUFJLElBQUksQ0FBQyxpQkFBaUI7b0JBQ3hCLFFBQVEsSUFBSSxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQ25DLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3JDLENBQUMsQ0FBQTtZQTVLQyxJQUFJLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQztZQUMxQixJQUFJLENBQUMsWUFBWSxHQUFHLGFBQWEsQ0FBQztZQUNsQyxJQUFJLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQztZQUU1QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksVUFBQSxJQUFJLEVBQUUsQ0FBQztZQUU3Qix1RUFBdUU7WUFDdkUsSUFBSSxDQUFDLFNBQVMsRUFBRSxrQkFBa0IsRUFBRSxDQUFDO1lBRXJDLElBQUksQ0FBQyxnQkFBZ0IsMkNBQXlCLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUMxRSxJQUFJLENBQUMsZ0JBQWdCLHFDQUFzQixHQUFHLEVBQUU7Z0JBQzlDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLG1DQUFxQixHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQzNFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdEIsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBcEJELE1BQU0sQ0FBYTtRQUNuQixVQUFVLENBQU87UUFDakIsU0FBUyxDQUFhO1FBb0J0QixJQUFXLEtBQUssQ0FBQyxNQUFjO1lBQzdCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNyQixDQUFDO1FBRUQsSUFBVyxLQUFLO1lBQ2QsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3JCLENBQUM7UUFFRDs7V0FFRztRQUNGLElBQVcsSUFBSTtZQUNkLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztRQUMxRCxDQUFDO1FBRU0sUUFBUSxDQUFDLEdBQVk7WUFDMUIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7Z0JBQ1osT0FBTztZQUVULElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM5QixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsS0FBYTtZQUN6QixJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMzQixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztZQUN2QixLQUFLLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO1lBQ3pDLElBQUksT0FBTyxHQUFZLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ2xJLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3BDLENBQUM7UUFFRDs7V0FFRztRQUNJLFdBQVcsQ0FBQyxNQUFjO1lBQy9CLElBQUksSUFBSSxHQUFXLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2pELElBQUksSUFBSTtnQkFDTixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RCLENBQUM7UUFFRDs7OztXQUlHO1FBQ0ksZUFBZSxDQUFDLEtBQWE7WUFDbEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7WUFDM0IsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQy9DLENBQUM7UUFFRCxrQkFBa0I7UUFDWCxTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCLEVBQUUsQ0FBQztZQUN0QyxhQUFhLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDMUQsYUFBYSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQztZQUN0RCxhQUFhLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDdkMsYUFBYSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQy9DLGFBQWEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUNqQyxhQUFhLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDO1lBQ3pELGFBQWEsQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQztZQUVyRCxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxNQUFNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNoRSxJQUFJLENBQUMsU0FBUyxHQUFjLE1BQU0sVUFBQSxPQUFPLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNsRixJQUFJLENBQUMsUUFBUSxHQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUM7WUFDeEMsSUFBSSxDQUFDLFlBQVksR0FBRyxjQUFjLENBQUMsWUFBWSxDQUFDO1lBQ2hELElBQUksQ0FBQyxLQUFLLEdBQUcsY0FBYyxDQUFDLEtBQUssQ0FBQztZQUNsQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsY0FBYyxDQUFDLGlCQUFpQixDQUFDO1lBQzFELElBQUksQ0FBQyxlQUFlLEdBQUcsY0FBYyxDQUFDLGVBQWUsQ0FBQztZQUV0RCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQWlCO1lBQ25DLE1BQU0sS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM3QixJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLEtBQUssV0FBVyxFQUFFO2dCQUNyRCxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN4QixJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQ3JDO1FBQ0gsQ0FBQztRQUVNLHdCQUF3QixDQUFDLFFBQWlCO1lBQy9DLElBQUksS0FBSyxHQUEwQixLQUFLLENBQUMsd0JBQXdCLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDNUUsSUFBSSxLQUFLLENBQUMsUUFBUTtnQkFDaEIsS0FBSyxDQUFDLFFBQVEsR0FBRyxVQUFBLGtCQUFrQixDQUFDO1lBQ3RDLElBQUksS0FBSyxDQUFDLFlBQVk7Z0JBQ3BCLEtBQUssQ0FBQyxZQUFZLEdBQUcsVUFBQSxzQkFBc0IsQ0FBQztZQUM5QyxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFDRCxZQUFZO1FBRUosaUJBQWlCLENBQUMsR0FBWTtZQUNwQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFVBQUEsT0FBTyxDQUFDLElBQUksSUFBSSxVQUFBLElBQUksQ0FBQyxNQUFNLElBQUksVUFBQSxPQUFPLENBQUMsSUFBSSxJQUFJLFVBQUEsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUU7Z0JBQy9GLFVBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsaUNBQW9CLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDaEUsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsdUNBQXVCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2FBQzVFO2lCQUNJO2dCQUNILFVBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsaUNBQW9CLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDbkUsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsdUNBQXVCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2FBQy9FO1FBQ0gsQ0FBQztRQStCRDs7O1dBR0c7UUFDSyxhQUFhLENBQUMsTUFBZ0I7WUFDcEMsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQzlDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUMxQztRQUNILENBQUM7O0lBaExzQiwyQkFBUyxHQUFXLFVBQUEsU0FBUyxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFEOUUsMkJBQWlCLG9CQTZMN0IsQ0FBQTtBQUNILENBQUMsRUFwTVMsU0FBUyxLQUFULFNBQVMsUUFvTWxCO0FDdk1ELElBQVUsU0FBUyxDQThVbEI7QUE5VUQsV0FBVSxTQUFTO0lBQ2pCLElBQVksWUFTWDtJQVRELFdBQVksWUFBWTtRQUN0QixtREFBbUMsQ0FBQTtRQUNuQyxtREFBbUMsQ0FBQTtRQUNuQyxpREFBaUMsQ0FBQTtRQUNqQyxnREFBZ0MsQ0FBQTtRQUNoQyw0Q0FBNEIsQ0FBQTtRQUM1Qiw4Q0FBOEIsQ0FBQTtRQUM5Qiw0Q0FBNEIsQ0FBQTtRQUM1QixnREFBZ0MsQ0FBQTtJQUNsQyxDQUFDLEVBVFcsWUFBWSxHQUFaLHNCQUFZLEtBQVosc0JBQVksUUFTdkI7SUFFRCxJQUFZLGVBRVg7SUFGRCxXQUFZLGVBQWU7UUFDekIseURBQU0sQ0FBQTtRQUFFLHlEQUFNLENBQUE7UUFBRSxxREFBSSxDQUFBO0lBQ3RCLENBQUMsRUFGVyxlQUFlLEdBQWYseUJBQWUsS0FBZix5QkFBZSxRQUUxQjtJQUVEOzs7Ozs7Ozs7Ozs7T0FZRztJQUNILE1BQWEsY0FBZSxTQUFRLFVBQUEsU0FBUztRQWUzQyxZQUFtQixTQUFnQixJQUFJLEVBQUUsUUFBaUIsS0FBSyxFQUFFLFNBQWtCLEtBQUssRUFBRSxnQkFBOEIsVUFBQSxZQUFZLENBQUMsT0FBTztZQUMxSSxLQUFLLEVBQUUsQ0FBQztZQWRWLHlGQUF5RjtZQUNsRixhQUFRLEdBQWMsVUFBQSxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUM7WUFFeEMsY0FBUyxHQUFZLEtBQUssQ0FBQztZQU83QixZQUFPLEdBQVksS0FBSyxDQUFDO1lBQ3pCLGFBQVEsR0FBWSxLQUFLLENBQUM7WUEyTGxDLFlBQVk7WUFHSixrQkFBYSxHQUFrQixDQUFDLE1BQWEsRUFBRSxFQUFFO2dCQUN2RCxVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUM5RCxJQUFJLElBQUksQ0FBQyxPQUFPO29CQUNkLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDcEIsQ0FBQyxDQUFBO1lBRU8sa0JBQWEsR0FBa0IsQ0FBQyxNQUFhLEVBQUUsRUFBRTtnQkFDdkQsaUVBQWlFO2dCQUNqRSxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztZQUN2QixDQUFDLENBQUE7WUFxQ0Q7OztlQUdHO1lBQ0ssaUJBQVksR0FBRyxDQUFDLE1BQWEsRUFBUSxFQUFFO2dCQUM3QyxxQkFBcUI7Z0JBQ3JCLElBQUksTUFBTSxDQUFDLElBQUksc0NBQXVCLEVBQUU7b0JBQ3RDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLCtDQUEyQixJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO29CQUM3RSxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixpREFBMkIsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztvQkFDN0UsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0Isa0NBQXFCLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQ2xFLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsVUFBQSxZQUFZLENBQUMsT0FBTyxDQUFDLG1CQUFtQixFQUFFLENBQUMsQ0FBQztpQkFDdEY7cUJBQ0k7b0JBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsK0NBQTJCLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQ2hGLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLGlEQUEyQixJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO29CQUNoRixJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixrQ0FBcUIsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztvQkFDckUsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7aUJBQ3ZCO2dCQUNELElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQzFCLENBQUMsQ0FBQTtZQUVEOztlQUVHO1lBQ0ssZ0JBQVcsR0FBRyxDQUFDLE1BQWEsRUFBUSxFQUFFO2dCQUM1QyxxQkFBcUI7Z0JBQ3JCLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxnREFBNEIsQ0FBQyxDQUFDO2dCQUMxRCxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUMxQixDQUFDLENBQUE7WUFFRDs7ZUFFRztZQUNLLFdBQU0sR0FBRyxDQUFDLE1BQWEsRUFBUSxFQUFFO2dCQUN2QyxJQUFJLFNBQVMsR0FBYyxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUN6QyxJQUFJLElBQUksQ0FBQyxJQUFJO29CQUNYLFNBQVMsR0FBRyxVQUFBLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUUxRSxtQ0FBbUM7Z0JBQ25DLElBQUksUUFBUSxHQUFZLFNBQVMsQ0FBQyxXQUFXLENBQUM7Z0JBQzlDLElBQUksT0FBTyxHQUFZLFVBQUEsT0FBTyxDQUFDLGNBQWMsQ0FBQyxVQUFBLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUU5RSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQztnQkFDekMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUV6QyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxLQUFLLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDM0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQzNDLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUUzQyxVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQ3hCLHVGQUF1RjtnQkFDdkYsSUFBSSxJQUFJLENBQUMsSUFBSTtvQkFDWCxVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDOUIsQ0FBQyxDQUFBO1lBOVJDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDNUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFFakMsSUFBSSxDQUFDLGdCQUFnQixxQ0FBc0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzlELElBQUksQ0FBQyxnQkFBZ0IsMkNBQXlCLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUVqRSxJQUFJLE1BQU07Z0JBQ1IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN0QixDQUFDO1FBR0QsSUFBVyxNQUFNLENBQUMsTUFBYztZQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDO1FBQ2hDLENBQUM7UUFFRCxJQUFXLE1BQU07WUFDZixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUM5QixDQUFDO1FBRUQsSUFBVyxJQUFJLENBQUMsR0FBWTtZQUMxQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7UUFDekIsQ0FBQztRQUVELElBQVcsSUFBSTtZQUNiLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDMUIsQ0FBQztRQUVELElBQVcsWUFBWSxDQUFDLE1BQWM7WUFDcEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztRQUMxQyxDQUFDO1FBRUQsSUFBVyxZQUFZO1lBQ3JCLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDO1FBQ3hDLENBQUM7UUFHRCxJQUFXLFNBQVM7WUFDbEIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7UUFDRCxJQUFXLFVBQVU7WUFDbkIsT0FBTyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQztRQUMzQixDQUFDO1FBQ0QsSUFBVyxVQUFVO1lBQ25CLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUN2QixDQUFDO1FBRU0sUUFBUSxDQUFDLE1BQWE7WUFDM0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBQ00sUUFBUTtZQUNiLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNwQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxTQUFTLENBQUMsU0FBdUIsRUFBRSxNQUFjO1lBQ3RELE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDOUMsQ0FBQztRQUVELG9EQUFvRDtRQUM3QyxnQkFBZ0IsQ0FBQyxLQUFzQjtZQUM1QyxJQUFJLElBQUksR0FBYyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQy9DLElBQUksT0FBTyxHQUFZLFVBQUEscUJBQXFCLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkQsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksWUFBWSxDQUFDLEtBQXNCO1lBQ3hDLFFBQVEsS0FBSyxFQUFFO2dCQUNiLEtBQUssZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztnQkFDaEQsS0FBSyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO2dCQUNoRCxLQUFLLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7YUFDN0M7UUFDSCxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxJQUFJLENBQUMsR0FBWTtZQUN0QixJQUFJLEdBQUcsRUFBRTtnQkFDUCxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFO29CQUN0QixJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDaEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2lCQUN6QjtxQkFDSTtvQkFDSCxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixzQkFBb0IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2lCQUNwRTtnQkFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLGdCQUFnQixzQkFBb0IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO2FBQ3JFOztnQkFFQyxJQUFJO29CQUNGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7aUJBQ3BCO2dCQUFDLE9BQU8sTUFBZSxFQUFFLEVBQUUsd0RBQXdELEVBQUU7WUFDeEYsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUM7UUFDckIsQ0FBQztRQUVEOzs7Ozs7Ozs7Ozs7OztXQWNHO1FBQ0ksZ0JBQWdCLENBQUMsTUFBaUIsRUFBRSxPQUFrQjtZQUMzRCxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMxQixJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsT0FBTyxFQUFFO2dCQUN2QixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQy9CLE9BQU87YUFDUjtZQUNELElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzVCLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLENBQUM7UUFFRDs7V0FFRztRQUNJLFFBQVEsQ0FBQyxHQUFZO1lBQzFCLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDcEIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDMUIsQ0FBQztRQUVEOzs7V0FHRztRQUNJLE9BQU8sQ0FBQyxHQUFZO1lBQ3pCLElBQUksR0FBRztnQkFDTCxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDOztnQkFFMUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNqRCxDQUFDO1FBRUQsa0JBQWtCO1FBQ1gsU0FBUztZQUNkLElBQUksYUFBYSxHQUFrQixLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDckQsYUFBYSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQztZQUNqRCxhQUFhLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDckMsYUFBYSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQy9CLGFBQWEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUNuQyw4REFBOEQ7WUFDOUQsb0NBQW9DO1lBQ3BDLE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUM7UUFDTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELE1BQU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUN4QyxJQUFJLEtBQUssR0FBaUIsTUFBTSxVQUFBLE9BQU8sQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQy9FLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QyxJQUFJLENBQUMsTUFBTSxHQUFHLGNBQWMsQ0FBQyxNQUFNLENBQUM7WUFDcEMsSUFBSSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDbEMsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRU0sVUFBVTtZQUNmLElBQUksT0FBTyxHQUFZLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUMsSUFBSSxLQUFLLEdBQVksT0FBTyxDQUFDLEtBQUssQ0FBQztZQUNuQyxPQUFPLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxxQ0FBcUM7WUFDM0QsT0FBTyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ3pCLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUM3QixPQUFPLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLHlCQUF5QjtZQUNoRCxPQUFPLE9BQU8sQ0FBQztRQUNqQixDQUFDO1FBRUQsMERBQTBEO1FBQzFELGtDQUFrQztRQUNsQyxzQ0FBc0M7UUFDdEMsa0NBQWtDO1FBQ2xDLElBQUk7UUFFTSxhQUFhLENBQUMsUUFBaUI7WUFDdkMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM5QixPQUFPLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFDM0IsQ0FBQztRQWVPLE9BQU8sQ0FBQyxnQkFBOEIsVUFBQSxZQUFZLENBQUMsT0FBTztZQUNoRSxJQUFJLE1BQU0sR0FBWSxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3BDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDckIsSUFBSSxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUM7WUFDbEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxhQUFhLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDM0MsSUFBSSxDQUFDLElBQUksR0FBRyxhQUFhLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDdkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0QyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hCLENBQUM7UUFFTyxZQUFZLENBQUMsTUFBYSxFQUFFLEtBQWM7WUFDaEQsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUNmLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLENBQUM7Z0JBQ3pCLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQzthQUMzQjtZQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQ3JELElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUVqQyxJQUFJLE1BQU0sRUFBRTtnQkFDVixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztnQkFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQzthQUNwQztZQUVELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztRQUMzQixDQUFDO1FBRU8sZ0JBQWdCO1lBQ3RCLElBQUk7Z0JBQ0YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQ2pFO1lBQUMsT0FBTyxNQUFNLEVBQUU7Z0JBQ2YsTUFBTTthQUNQO1FBQ0gsQ0FBQzs7SUF0UHNCLHdCQUFTLEdBQVcsVUFBQSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUM7SUFEM0Usd0JBQWMsaUJBZ1QxQixDQUFBO0FBQ0gsQ0FBQyxFQTlVUyxTQUFTLEtBQVQsU0FBUyxRQThVbEI7QUM5VUQsSUFBVSxTQUFTLENBZ0RsQjtBQWhERCxXQUFVLFNBQVM7SUFDakI7Ozs7T0FJRztJQUNILE1BQWEsc0JBQXVCLFNBQVEsVUFBQSxTQUFTO1FBQXJEOztZQUVTLGFBQVEsR0FBYyxVQUFBLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQXVDcEQsQ0FBQztRQXJDQzs7V0FFRztRQUNJLE1BQU0sQ0FBQyxTQUF3QjtZQUNwQyxJQUFJLFNBQVMsR0FBYyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3pDLElBQUksSUFBSSxDQUFDLElBQUk7Z0JBQ1gsU0FBUyxHQUFHLFVBQUEsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFMUUsbUNBQW1DO1lBQ25DLElBQUksUUFBUSxHQUFZLFNBQVMsQ0FBQyxXQUFXLENBQUM7WUFDOUMsSUFBSSxPQUFPLEdBQVksVUFBQSxPQUFPLENBQUMsY0FBYyxDQUFDLFVBQUEsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDOUUsSUFBSSxFQUFFLEdBQVksVUFBQSxPQUFPLENBQUMsY0FBYyxDQUFDLFVBQUEsT0FBTyxDQUFDLENBQUMsRUFBRSxFQUFFLFNBQVMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUN4RSxJQUFJLFNBQVMsQ0FBQyxTQUFTLElBQUksU0FBUyxFQUFFO2dCQUNwQyxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUN2QyxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUN2QyxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUV2QyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUVyQyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMzQixTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMzQixTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQzVCO2lCQUFNO2dCQUNMLDJFQUEyRTtnQkFDM0UsU0FBUyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMxRCxTQUFTLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDN0U7WUFFRCxVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDeEIsVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ25CLElBQUksSUFBSSxDQUFDLElBQUk7Z0JBQ1gsVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRTVCLGtGQUFrRjtRQUNwRixDQUFDOztJQXZDc0IsZ0NBQVMsR0FBVyxVQUFBLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0lBRG5GLGdDQUFzQix5QkF5Q2xDLENBQUE7QUFDSCxDQUFDLEVBaERTLFNBQVMsS0FBVCxTQUFTLFFBZ0RsQjtBQ2hERCxxQ0FBcUM7QUFDckMsSUFBVSxTQUFTLENBa1BsQjtBQW5QRCxxQ0FBcUM7QUFDckMsV0FBVSxTQUFTO0lBQ2pCLElBQVksYUFJWDtJQUpELFdBQVksYUFBYTtRQUN2QiwwQ0FBeUIsQ0FBQTtRQUN6QixzQ0FBcUIsQ0FBQTtRQUNyQixzQ0FBcUIsQ0FBQTtJQUN2QixDQUFDLEVBSlcsYUFBYSxHQUFiLHVCQUFhLEtBQWIsdUJBQWEsUUFJeEI7SUFDRDs7O09BR0c7SUFDSCxJQUFZLFVBS1g7SUFMRCxXQUFZLFVBQVU7UUFDcEIsaUNBQW1CLENBQUE7UUFDbkIsMkNBQTZCLENBQUE7UUFDN0IsbUNBQXFCLENBQUE7UUFDckIsK0JBQWlCLENBQUE7SUFDbkIsQ0FBQyxFQUxXLFVBQVUsR0FBVixvQkFBVSxLQUFWLG9CQUFVLFFBS3JCO0lBQ0Q7OztPQUdHO0lBQ0gsTUFBYSxlQUFnQixTQUFRLFVBQUEsU0FBUztRQUE5Qzs7WUFFUyxhQUFRLEdBQWMsVUFBQSxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDM0Msa0JBQWEsR0FBVSxJQUFJLFVBQUEsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsc0RBQXNEO1lBSTNHLG1CQUFjLEdBQWMsSUFBSSxVQUFBLFNBQVMsQ0FBQyxDQUFDLG9HQUFvRztZQUV2SSxlQUFVLEdBQWUsVUFBVSxDQUFDLE9BQU8sQ0FBQztZQUM1QyxnQkFBVyxHQUFXLEVBQUUsQ0FBQyxDQUFDLDRCQUE0QjtZQUN0RCxnQkFBVyxHQUFXLEdBQUcsQ0FBQztZQUMxQixjQUFTLEdBQWtCLGFBQWEsQ0FBQyxRQUFRLENBQUM7WUFDbEQsU0FBSSxHQUFXLENBQUMsQ0FBQztZQUNqQixRQUFHLEdBQVcsSUFBSSxDQUFDO1lBQ25CLHNCQUFpQixHQUFZLElBQUksQ0FBQyxDQUFDLDRFQUE0RTtZQTZNdkgsWUFBWTtRQUNkLENBQUM7UUF6TkMsc0lBQXNJO1FBQ3RJLGVBQWUsQ0FBWTtRQUMzQixpQkFBaUIsQ0FBWTtRQUM3QixjQUFjLENBQTRCLENBQUMsb0dBQW9HO1FBUy9JLDRFQUE0RTtRQUU1RSxJQUFXLFFBQVE7WUFDakIsSUFBSSxTQUFTLEdBQWMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7WUFDL0MsSUFBSTtnQkFDRixTQUFTLEdBQUcsVUFBQSxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN6RTtZQUFDLE9BQU8sTUFBTSxFQUFFO2dCQUNmLGlGQUFpRjthQUNsRjtZQUNELE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFDRDs7O1dBR0c7UUFDSCxJQUFXLGNBQWM7WUFDdkIsSUFBSSxJQUFJLENBQUMsZUFBZTtnQkFDdEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDO1lBRTlCLG1GQUFtRjtZQUNuRixJQUFJLENBQUMsZUFBZSxHQUFHLFVBQUEsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQzVGLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztRQUM5QixDQUFDO1FBRUQsSUFBVyxnQkFBZ0I7WUFDekIsSUFBSSxJQUFJLENBQUMsaUJBQWlCO2dCQUN4QixPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztZQUVoQyxtRkFBbUY7WUFDbkYsSUFBSSxDQUFDLGlCQUFpQixHQUFHLFVBQUEsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDNUQsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUM7UUFDaEMsQ0FBQztRQUNELElBQVcsYUFBYTtZQUN0QixJQUFJLElBQUksQ0FBQyxjQUFjO2dCQUNyQixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7WUFFN0IsbUZBQW1GO1lBQ25GLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxVQUFBLFNBQVMsQ0FBQztZQUNwQyxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDN0IsQ0FBQztRQUNNLGdCQUFnQjtZQUNyQixJQUFJLElBQUksQ0FBQyxlQUFlO2dCQUFFLFVBQUEsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDL0QsSUFBSSxJQUFJLENBQUMsaUJBQWlCO2dCQUFFLFVBQUEsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUNuRSxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztZQUM1QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO1FBQ2hDLENBQUM7UUFFTSxhQUFhO1lBQ2xCLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUN6QixDQUFDO1FBRU0sb0JBQW9CO1lBQ3pCLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDO1FBQ2hDLENBQUM7UUFFTSxTQUFTO1lBQ2QsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQzFCLENBQUM7UUFFTSxjQUFjO1lBQ25CLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUMxQixDQUFDO1FBRU0sWUFBWTtZQUNqQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQztRQUVNLE9BQU87WUFDWixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDbkIsQ0FBQztRQUNNLE1BQU07WUFDWCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDbEIsQ0FBQztRQUVEOzs7OztXQUtHO1FBQ0ksY0FBYyxDQUFDLFVBQWtCLElBQUksQ0FBQyxXQUFXLEVBQUUsZUFBdUIsSUFBSSxDQUFDLFdBQVcsRUFBRSxhQUE0QixJQUFJLENBQUMsU0FBUyxFQUFFLFFBQWdCLENBQUMsRUFBRSxPQUFlLElBQUk7WUFDbkwsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7WUFDM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxZQUFZLENBQUM7WUFDaEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUM7WUFDNUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDO1lBQ2hCLElBQUksQ0FBQyxjQUFjLEdBQUcsVUFBQSxTQUFTLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyw2QkFBNkI7UUFDM0ksQ0FBQztRQUNEOzs7Ozs7V0FNRztRQUNJLG1CQUFtQixDQUFDLFFBQWdCLENBQUMsVUFBQSxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsV0FBVyxHQUFHLENBQUMsRUFBRSxTQUFpQixVQUFBLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxFQUFFLFVBQWtCLFVBQUEsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDLFlBQVksR0FBRyxDQUFDLEVBQUUsT0FBZSxDQUFDLFVBQUEsTUFBTSxDQUFDLFNBQVMsRUFBRSxDQUFDLFlBQVksR0FBRyxDQUFDO1lBQzdPLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDLFlBQVksQ0FBQztZQUMxQyxJQUFJLENBQUMsY0FBYyxHQUFHLFVBQUEsU0FBUyxDQUFDLHVCQUF1QixDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLCtCQUErQjtRQUNuSSxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxzQkFBc0I7WUFDM0IsSUFBSSxNQUFNLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQywyRUFBMkU7WUFDNUksSUFBSSxhQUFhLEdBQVcsQ0FBQyxDQUFDO1lBQzlCLElBQUksV0FBVyxHQUFXLENBQUMsQ0FBQztZQUU1QixJQUFJLElBQUksQ0FBQyxTQUFTLElBQUksYUFBYSxDQUFDLFFBQVEsRUFBRTtnQkFDNUMsSUFBSSxNQUFNLEdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ2pELGFBQWEsR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDO2dCQUNoQyxXQUFXLEdBQUcsTUFBTSxHQUFHLE1BQU0sQ0FBQzthQUMvQjtpQkFDSSxJQUFJLElBQUksQ0FBQyxTQUFTLElBQUksYUFBYSxDQUFDLFFBQVEsRUFBRTtnQkFDakQsV0FBVyxHQUFHLE1BQU0sQ0FBQztnQkFDckIsYUFBYSxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO2FBQ2hEO2lCQUNJLEVBQUMsMEJBQTBCO2dCQUM5QixhQUFhLEdBQUcsTUFBTSxDQUFDO2dCQUN2QixXQUFXLEdBQUcsYUFBYSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7YUFDaEQ7WUFFRCxPQUFPLFVBQUEsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLGFBQWEsR0FBRyxDQUFDLEVBQUUsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLENBQUM7UUFFTSxnQkFBZ0IsQ0FBQyxrQkFBMkI7WUFDakQsSUFBSSxNQUFlLENBQUM7WUFDcEIsSUFBSSxDQUFDLEdBQWlCLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDaEQsSUFBSSxDQUFDLEdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRWpILE1BQU0sR0FBRyxVQUFBLE9BQU8sQ0FBQyxjQUFjLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3pFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ3BCLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxnQkFBZ0IsQ0FBQyxpQkFBMEI7WUFDaEQsSUFBSSxjQUFjLEdBQWMsVUFBQSxTQUFTLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUN6RSxJQUFJLENBQUMsR0FBaUIsY0FBYyxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQzNDLElBQUksUUFBUSxHQUFZLFVBQUEsT0FBTyxDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDeEYsSUFBSSxDQUFDLEdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLGlCQUFpQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsaUJBQWlCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxpQkFBaUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzlHLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBRXRCLE9BQU8sUUFBUSxDQUFDO1FBQ2xCLENBQUM7UUFFRCxrQkFBa0I7UUFDWCxTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCO2dCQUNqQyxlQUFlLEVBQUUsSUFBSSxDQUFDLGFBQWE7Z0JBQ25DLGlCQUFpQixFQUFFLElBQUksQ0FBQyxpQkFBaUI7Z0JBQ3pDLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVTtnQkFDM0IsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO2dCQUM3QixTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVM7Z0JBQ3pCLE1BQU0sRUFBRSxJQUFJLENBQUMsV0FBVztnQkFDeEIsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFO2dCQUNoQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxDQUFDLFNBQVMsRUFBRTthQUM1QyxDQUFDO1lBQ0YsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxDQUFDLGFBQWEsR0FBRyxjQUFjLENBQUMsZUFBZSxDQUFDO1lBQ3BELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxjQUFjLENBQUMsaUJBQWlCLENBQUM7WUFDMUQsSUFBSSxDQUFDLFVBQVUsR0FBRyxjQUFjLENBQUMsVUFBVSxDQUFDO1lBQzVDLElBQUksQ0FBQyxXQUFXLEdBQUcsY0FBYyxDQUFDLFdBQVcsQ0FBQztZQUM5QyxJQUFJLENBQUMsV0FBVyxHQUFHLGNBQWMsQ0FBQyxNQUFNLENBQUM7WUFDekMsSUFBSSxDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUMsU0FBUyxDQUFDO1lBQzFDLE1BQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RELE1BQU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2hFLFFBQVEsSUFBSSxDQUFDLFVBQVUsRUFBRTtnQkFDdkIsS0FBSyxVQUFVLENBQUMsWUFBWTtvQkFDMUIsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUMsQ0FBQyw2Q0FBNkM7b0JBQ3pFLE1BQU07Z0JBQ1IsS0FBSyxVQUFVLENBQUMsT0FBTztvQkFDckIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO29CQUN0QixNQUFNO2FBQ1Q7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTSx3QkFBd0IsQ0FBQyxRQUFpQjtZQUMvQyxJQUFJLEtBQUssR0FBMEIsS0FBSyxDQUFDLHdCQUF3QixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzVFLElBQUksS0FBSyxDQUFDLFNBQVM7Z0JBQ2pCLEtBQUssQ0FBQyxTQUFTLEdBQUcsYUFBYSxDQUFDO1lBQ2xDLElBQUksS0FBSyxDQUFDLFVBQVU7Z0JBQ2xCLEtBQUssQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1lBQ2hDLE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUVNLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBaUI7WUFDbkMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUV2QixRQUFRLElBQUksQ0FBQyxVQUFVLEVBQUU7Z0JBQ3ZCLEtBQUssVUFBVSxDQUFDLE9BQU87b0JBQ3JCLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztvQkFDeEUsTUFBTTthQUNUO1FBQ0gsQ0FBQztRQUVTLGFBQWEsQ0FBQyxRQUFpQjtZQUN2QyxPQUFPLFFBQVEsQ0FBQyxTQUFTLENBQUM7WUFDMUIsS0FBSyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoQyxDQUFDOztJQTFOc0IseUJBQVMsR0FBVyxVQUFBLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUQ1RSx5QkFBZSxrQkE2TjNCLENBQUE7QUFDSCxDQUFDLEVBbFBTLFNBQVMsS0FBVCxTQUFTLFFBa1BsQjtBQ25QRCxJQUFVLFNBQVMsQ0FrQmxCO0FBbEJELFdBQVUsU0FBUztJQUNqQjs7OztPQUlHO0lBQ0gsTUFBYSxtQkFBb0IsU0FBUSxVQUFBLFNBQVM7UUFPaEQ7WUFDRSxLQUFLLEVBQUUsQ0FBQztZQUxILFlBQU8sR0FBWSxJQUFJLENBQUM7WUFDeEIsT0FBRSxHQUFZLFVBQUEsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMzQixhQUFRLEdBQVksS0FBSyxDQUFDO1lBSS9CLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLENBQUM7O0lBVHNCLDZCQUFTLEdBQVcsVUFBQSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQURoRiw2QkFBbUIsc0JBVy9CLENBQUE7QUFDSCxDQUFDLEVBbEJTLFNBQVMsS0FBVCxTQUFTLFFBa0JsQjtBQ2xCRCxJQUFVLFNBQVMsQ0F1QmxCO0FBdkJELFdBQVUsU0FBUztJQUNqQjs7Ozs7T0FLRztJQUNILE1BQWEsb0JBQXFCLFNBQVEsVUFBQSxTQUFTO1FBRWpEO1lBQ0UsS0FBSyxFQUFFLENBQUM7WUFDUixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUN4QixDQUFDO1FBRU0sU0FBUztZQUNkLE9BQU8sSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQzNCLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDNUIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDOztJQWJzQiw4QkFBUyxHQUFXLFVBQUEsU0FBUyxDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixDQUFDLENBQUM7SUFEakYsOEJBQW9CLHVCQWVoQyxDQUFBO0FBQ0gsQ0FBQyxFQXZCUyxTQUFTLEtBQVQsU0FBUyxRQXVCbEI7QUN2QkQsSUFBVSxTQUFTLENBOEVsQjtBQTlFRCxXQUFVLFNBQVM7SUFFakI7OztPQUdHO0lBQ0gsTUFBc0IsS0FBTSxTQUFRLFVBQUEsT0FBTztRQUV6QyxZQUFZLFNBQWdCLElBQUksVUFBQSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQy9DLEtBQUssRUFBRSxDQUFDO1lBQ1IsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7UUFDdEIsQ0FBQztRQUVNLE9BQU87WUFDWixPQUFvQixJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ3ZDLENBQUM7UUFFTSxTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCO2dCQUNqQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUU7YUFDOUIsQ0FBQztZQUNGLE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25ELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVTLGFBQWEsS0FBZSxDQUFDO0tBQ3hDO0lBeEJxQixlQUFLLFFBd0IxQixDQUFBO0lBRUQ7Ozs7Ozs7T0FPRztJQUNILE1BQWEsWUFBYSxTQUFRLEtBQUs7S0FDdEM7SUFEWSxzQkFBWSxlQUN4QixDQUFBO0lBQ0Q7Ozs7Ozs7O09BUUc7SUFDSCxNQUFhLGdCQUFpQixTQUFRLEtBQUs7S0FDMUM7SUFEWSwwQkFBZ0IsbUJBQzVCLENBQUE7SUFDRDs7Ozs7Ozs7OztPQVVHO0lBQ0gsTUFBYSxVQUFXLFNBQVEsS0FBSztLQUNwQztJQURZLG9CQUFVLGFBQ3RCLENBQUE7SUFDRDs7Ozs7Ozs7O09BU0c7SUFDSCxNQUFhLFNBQVUsU0FBUSxLQUFLO0tBQ25DO0lBRFksbUJBQVMsWUFDckIsQ0FBQTtBQUNILENBQUMsRUE5RVMsU0FBUyxLQUFULFNBQVMsUUE4RWxCO0FDOUVELHdDQUF3QztBQUN4QyxJQUFVLFNBQVMsQ0E2RWxCO0FBOUVELHdDQUF3QztBQUN4QyxXQUFVLFNBQVM7SUFFakI7O09BRUc7SUFDSCx3REFBd0Q7SUFDeEQsSUFBWSxVQUtYO0lBTEQsV0FBWSxVQUFVO1FBQ3BCLHNDQUF3QixDQUFBO1FBQ3hCLDhDQUFnQyxDQUFBO1FBQ2hDLGtDQUFvQixDQUFBO1FBQ3BCLGdDQUFrQixDQUFBO0lBQ3BCLENBQUMsRUFMVyxVQUFVLEdBQVYsb0JBQVUsS0FBVixvQkFBVSxRQUtyQjtJQUNEOzs7O1FBSUk7SUFDSixNQUFhLGNBQWUsU0FBUSxVQUFBLFNBQVM7UUFLM0MsNkhBQTZIO1FBRTdILFlBQVksU0FBZ0IsSUFBSSxVQUFBLFlBQVksRUFBRTtZQUM1QyxLQUFLLEVBQUUsQ0FBQztZQU5WLCtNQUErTTtZQUN4TSxhQUFRLEdBQWMsVUFBQSxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDM0MsVUFBSyxHQUFVLElBQUksQ0FBQztZQUt6QixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztZQUN2QixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztRQUN0QixDQUFDO1FBRU0sT0FBTyxDQUFrQixNQUFtQjtZQUNqRCxJQUFJLE1BQU0sR0FBWSxFQUFFLENBQUM7WUFDekIsSUFBSSxJQUFJLENBQUMsS0FBSztnQkFDWixNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUVuQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7WUFDMUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUIsQ0FBQztRQUVNLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0I7Z0JBQ2pDLEtBQUssRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRTtnQkFDaEMsS0FBSyxFQUFFLFVBQUEsVUFBVSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO2FBQ3hDLENBQUM7WUFDRixhQUFhLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDMUQsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDaEUsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdEQsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFzQixVQUFBLFVBQVUsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2hGLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVNLFVBQVU7WUFDZixJQUFJLE9BQU8sR0FBWSxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzlDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUM7WUFDekMsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztRQUVNLHdCQUF3QixDQUFDLFFBQWlCO1lBQy9DLElBQUksS0FBSyxHQUEwQixLQUFLLENBQUMsd0JBQXdCLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDNUUsSUFBSSxLQUFLLENBQUMsSUFBSTtnQkFDWixLQUFLLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQztZQUMxQixPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFFTSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQWlCO1lBQ25DLElBQUksSUFBSSxHQUFXLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDakMsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssV0FBVyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJO2dCQUN0RSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQUEsVUFBVSxDQUFDLGNBQWMsQ0FBUSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3ZELE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQywyQ0FBMkM7WUFDbkUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN2QixRQUFRLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLHNCQUFzQjtRQUM5QyxDQUFDOztJQXpEc0Isd0JBQVMsR0FBVyxVQUFBLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUQzRSx3QkFBYyxpQkEyRDFCLENBQUE7QUFDSCxDQUFDLEVBN0VTLFNBQVMsS0FBVCxTQUFTLFFBNkVsQjtBQzlFRCxJQUFVLFNBQVMsQ0FtRGxCO0FBbkRELFdBQVUsU0FBUztJQUNqQjs7O09BR0c7SUFDSCxNQUFhLGlCQUFrQixTQUFRLFVBQUEsU0FBUztRQVE5QywyQ0FBMkM7UUFFM0MsWUFBbUIsWUFBc0IsSUFBSTtZQUMzQyxLQUFLLEVBQUUsQ0FBQztZQVRILGVBQVUsR0FBVSxVQUFBLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDdkMsaUJBQVksR0FBVSxVQUFBLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDekMsYUFBUSxHQUFjLFVBQUEsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBRWxELDRMQUE0TDtZQUNyTCxpQkFBWSxHQUFZLEtBQUssQ0FBQztZQUtuQyxJQUFJLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQztZQUMxQixtRUFBbUU7UUFDckUsQ0FBQztRQUVELGtCQUFrQjtRQUNYLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0I7Z0JBQ2pDLFlBQVksRUFBRSxJQUFJLENBQUMsWUFBWTtnQkFDL0IsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFO2dCQUN2QyxZQUFZLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUU7Z0JBQzNDLEtBQUssRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRTtnQkFDaEMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssQ0FBQyxTQUFTLEVBQUU7Z0JBQzNDLFVBQVUsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVU7YUFDckMsQ0FBQztZQUVGLE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELElBQUksQ0FBQyxRQUFRLEdBQWEsTUFBTSxVQUFBLE9BQU8sQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQy9FLE1BQU0sSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzdELE1BQU0sSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQ2pFLElBQUksQ0FBQyxZQUFZLEdBQUcsY0FBYyxDQUFDLFlBQVksQ0FBQztZQUNoRCxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN0RCxNQUFNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNoRSxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7O0lBckNzQiwyQkFBUyxHQUFXLFVBQUEsU0FBUyxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFEOUUsMkJBQWlCLG9CQTZDN0IsQ0FBQTtBQUNILENBQUMsRUFuRFMsU0FBUyxLQUFULFNBQVMsUUFtRGxCO0FDbkRELElBQVUsU0FBUyxDQXFJbEI7QUFySUQsV0FBVSxTQUFTO0lBQ2pCOzs7T0FHRztJQUNILE1BQWEsYUFBYyxTQUFRLFVBQUEsU0FBUztRQU8xQyxZQUFtQixLQUFZLEVBQUUsU0FBNEI7WUFDM0QsS0FBSyxFQUFFLENBQUM7WUFOSCxhQUFRLEdBQWMsVUFBQSxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDbEMsYUFBUSxHQUFjLFVBQUEsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBTXpELElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1FBQzVCLENBQUM7UUFFRCxJQUFXLE1BQU07WUFDZixJQUFJLE9BQU8sR0FBWSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQztZQUM3QyxJQUFJLEtBQUssR0FBVyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUYsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDbEMsQ0FBQztRQUVELE1BQU07UUFDTixxRUFBcUU7UUFDckUsdUNBQXVDO1FBQ3ZDLE1BQU07UUFDTixzREFBc0Q7UUFDdEQsMEZBQTBGO1FBQzFGLHdDQUF3QztRQUN4QywrQ0FBK0M7UUFFL0MsdUhBQXVIO1FBQ3ZILHlEQUF5RDtRQUV6RCwyRkFBMkY7UUFDM0YsK0ZBQStGO1FBRS9GLHlCQUF5QjtRQUN6QiwrREFBK0Q7UUFFL0QsNENBQTRDO1FBQzVDLG1EQUFtRDtRQUNuRCx5QkFBeUI7UUFDekIsb0JBQW9CO1FBQ3BCLDRIQUE0SDtRQUM1SCxnSEFBZ0g7UUFDaEgsT0FBTztRQUVQLHdCQUF3QjtRQUN4QixrQ0FBa0M7UUFFbEMsbUJBQW1CO1FBQ25CLElBQUk7UUFFSix5RkFBeUY7UUFDekYsa0NBQWtDO1FBQ2xDLHNDQUFzQztRQUN0QyxhQUFhO1FBQ2IsOEVBQThFO1FBQzlFLDZFQUE2RTtRQUM3RSxPQUFPO1FBQ1AsZ0JBQWdCO1FBQ2hCLElBQUk7UUFFSixrQkFBa0I7UUFDWCxTQUFTO1lBQ2QsSUFBSSxhQUE0QixDQUFDO1lBQ2pDLCtIQUErSDtZQUMvSCxJQUFJLE1BQU0sR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQztZQUMxQyxJQUFJLE1BQU07Z0JBQ1IsYUFBYSxHQUFHLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDOztnQkFFbkMsYUFBYSxHQUFHLEVBQUUsSUFBSSxFQUFFLFVBQUEsVUFBVSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUU1RCxJQUFJLElBQUksQ0FBQyxRQUFRO2dCQUNmLGFBQWEsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7WUFFbEQsYUFBYSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ2hELGFBQWEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUMxRCxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxJQUFJLElBQVUsQ0FBQztZQUNmLElBQUksY0FBYyxDQUFDLE1BQU07Z0JBQ3ZCLElBQUksR0FBUyxNQUFNLFVBQUEsT0FBTyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7O2dCQUU5RCxJQUFJLEdBQVMsTUFBTSxVQUFBLFVBQVUsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2pFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1lBRWpCLElBQUksY0FBYyxDQUFDLFFBQVE7Z0JBQ3pCLElBQUksQ0FBQyxnQkFBZ0IscUNBQXNCLENBQUMsTUFBYSxFQUFFLEVBQUU7b0JBQzNELElBQUksTUFBTSxDQUFDLE1BQU0sSUFBSSxJQUFJO3dCQUFFLE9BQU87b0JBQ2xDLE1BQU0sY0FBYyxHQUFlLEdBQUcsRUFBRTt3QkFDdEMsaUJBQWlCO3dCQUNqQixJQUFJLElBQUksR0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDO3dCQUMzQixPQUFPLElBQUksQ0FBQyxTQUFTLEVBQUUsRUFBRTs0QkFDdkIsSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQzt5QkFDekI7d0JBQ0QsS0FBSyxNQUFNLElBQUksSUFBSSxJQUFJLEVBQUU7NEJBQ3ZCLElBQUksSUFBSSxZQUFZLFVBQUEsZ0JBQWdCLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxjQUFjLENBQUMsUUFBUTtnQ0FDOUUsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7eUJBQ3hCO3dCQUNELElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFOzRCQUNsQixNQUFNLDJCQUEyQixHQUE0QixNQUFNLENBQUMsRUFBRTtnQ0FDcEUsSUFBSSxDQUFDLG1CQUFtQixtQ0FBcUIsMkJBQTJCLENBQUMsQ0FBQztnQ0FDMUUsSUFBSSxNQUFNLENBQUMsTUFBTSxZQUFZLFVBQUEsZ0JBQWdCLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLElBQUksY0FBYyxDQUFDLFFBQVE7b0NBQ2hHLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztxQ0FDM0I7b0NBQ0gsY0FBYyxFQUFFLENBQUM7aUNBQ2xCOzRCQUNILENBQUMsQ0FBQzs0QkFDRixJQUFJLENBQUMsZ0JBQWdCLG1DQUFxQiwyQkFBMkIsQ0FBQyxDQUFDO3lCQUN4RTtvQkFDSCxDQUFDLENBQUM7b0JBQ0YsY0FBYyxFQUFFLENBQUM7Z0JBQ25CLENBQUMsQ0FBQyxDQUFDO1lBRUwsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdEQsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDaEUsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRU0sMEJBQTBCO1lBQy9CLElBQUksT0FBTyxHQUFxRCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEYsa0JBQWtCO1lBQ2xCLHlCQUF5QjtZQUN6QixPQUFPLE9BQU8sQ0FBQztRQUNqQixDQUFDOztJQTVIc0IsdUJBQVMsR0FBVyxVQUFBLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUQxRSx1QkFBYSxnQkErSHpCLENBQUE7QUFDSCxDQUFDLEVBcklTLFNBQVMsS0FBVCxTQUFTLFFBcUlsQjtBQ3JJRCxJQUFVLFNBQVMsQ0FpTGxCO0FBakxELFdBQVUsU0FBUzs7SUFFakIsSUFBWSx3QkFLWDtJQUxELFdBQVksd0JBQXdCO1FBQ2xDLHNFQUFzRTtRQUN0RSx1RUFBSSxDQUFBO1FBQ0osb0VBQW9FO1FBQ3BFLGlGQUFTLENBQUE7SUFDWCxDQUFDLEVBTFcsd0JBQXdCLEdBQXhCLGtDQUF3QixLQUF4QixrQ0FBd0IsUUFLbkM7SUFFRDs7Ozs7T0FLRztJQUVILElBQWEsdUJBQXVCLCtCQUFwQyxNQUFhLHVCQUF3QixTQUFRLFVBQUEsU0FBUztRQWdCcEQsWUFBbUIsa0JBQWtDLElBQUk7WUFDdkQsS0FBSyxFQUFFLENBQUM7WUFKVixlQUFVLEdBQVcsQ0FBQyxDQUFDO1lBa0h2QixZQUFZO1lBRUosYUFBUSxHQUFHLENBQUMsTUFBYSxFQUFRLEVBQUU7Z0JBQ3pDLFFBQVEsTUFBTSxDQUFDLElBQUksRUFBRTtvQkFDbkIsZ0RBQTZCO29CQUM3Qjt3QkFDRSxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLGlDQUFvQixJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7d0JBQ3BFLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLHVDQUF1QixJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBQzlELE1BQU07b0JBQ1I7d0JBQ0UsVUFBQSxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQixpQ0FBb0IsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO3dCQUN2RSxJQUFJLENBQUMsSUFBSSxDQUFDLG1CQUFtQix1Q0FBdUIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2lCQUNwRTtZQUNILENBQUMsQ0FBQztZQUVNLFdBQU0sR0FBRyxHQUFTLEVBQUU7Z0JBQzFCLElBQUksSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUTtvQkFDM0IsUUFBUSxJQUFJLENBQUMsUUFBUSxFQUFFO3dCQUNyQixRQUFRO3dCQUNSLEtBQUssd0JBQXdCLENBQUMsSUFBSTs0QkFDaEMsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7NEJBQ2QsTUFBTTt3QkFDUixLQUFLLHdCQUF3QixDQUFDLFNBQVM7NEJBQ3JDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQzs0QkFDMUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7NEJBQ25CLE1BQU07cUJBQ1Q7WUFDTCxDQUFDLENBQUM7WUFFTSxvQkFBZSxHQUFHLEdBQVMsRUFBRTtnQkFDbkMsSUFBSSxTQUFTLEdBQVcsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7Z0JBQy9ELElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ2pDLENBQUMsQ0FBQztZQTdJQSxJQUFJLENBQUMsY0FBYyxHQUFHLGVBQWUsQ0FBQztZQUN0QyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztZQUN0QixJQUFJLENBQUMsU0FBUyxHQUFHLFVBQUEsS0FBSyxDQUFDLFFBQVEsQ0FBQztZQUNoQyxJQUFJLENBQUMsUUFBUSxHQUFHLHdCQUF3QixDQUFDLElBQUksQ0FBQztZQUM5QyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztZQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNmLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxVQUFBLElBQUksRUFBRSxDQUFDO1lBRXhCLElBQUksQ0FBQyxnQkFBZ0IscUNBQXNCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMxRCxJQUFJLENBQUMsZ0JBQWdCLDJDQUF5QixJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDN0QsSUFBSSxDQUFDLGdCQUFnQiw2Q0FBMEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2hFLENBQUM7UUFsQkQsOEJBQThCO1FBQzlCLEtBQUssQ0FBUztRQUNkLFVBQVUsQ0FBYTtRQUNkLEtBQUssQ0FBTztRQWlCckI7O1dBRUc7UUFDSCxJQUFXLElBQUk7WUFDYixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDcEIsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxJQUFJLENBQUMsS0FBYTtZQUMzQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNuQixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUMxQixDQUFDO1FBRUQsSUFBVyxJQUFJO1lBQ2IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzFCLENBQUM7UUFFRCxJQUFXLElBQUksQ0FBQyxLQUFhO1lBQzNCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3hCLENBQUM7UUFFRCxJQUFXLFNBQVM7WUFDbEIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQ3pCLENBQUM7UUFFRCxJQUFXLFNBQVMsQ0FBQyxNQUFjO1lBQ2pDLElBQUksQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO1lBQ3pCLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN6QixDQUFDO1FBRU0sYUFBYSxLQUEwQyxDQUFDO1FBQ3hELGdCQUFnQixLQUEwQyxDQUFDO1FBRWxFLGtCQUFrQjtRQUNYLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0I7Z0JBQ2pDLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFO2dCQUMzQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsY0FBYyxFQUFFLFVBQVU7Z0JBQ2pELFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUztnQkFDekIsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO2dCQUN6QixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7Z0JBQ3ZCLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtnQkFDdkIsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2FBQ2hCLENBQUM7WUFFRixPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxNQUFNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNoRSxJQUFJLGNBQWMsQ0FBQyxnQkFBZ0I7Z0JBQUUsSUFBSSxDQUFDLGNBQWMsR0FBbUIsTUFBTSxVQUFBLE9BQU8sQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDdEksSUFBSSxDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUMsU0FBUyxDQUFDO1lBQzFDLElBQUksQ0FBQyxTQUFTLEdBQUcsY0FBYyxDQUFDLFNBQVMsQ0FBQztZQUMxQyxJQUFJLENBQUMsUUFBUSxHQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUM7WUFDeEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxjQUFjLENBQUMsUUFBUSxDQUFDO1lBQ3hDLElBQUksQ0FBQyxJQUFJLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQztZQUVoQyxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTSxVQUFVLENBQUMsV0FBcUI7WUFDckMsSUFBSSxPQUFPLEdBQVksS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5QyxPQUFPLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDekIsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztRQUVNLDBCQUEwQjtZQUMvQixJQUFJLE9BQU8sR0FBcUQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0RixPQUFPLE9BQU8sQ0FBQyxjQUFjLENBQUM7WUFDOUIsT0FBTyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsY0FBYyxFQUFFLDBCQUEwQixFQUFFLENBQUM7WUFDM0UsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztRQUVNLHNCQUFzQjtZQUMzQixJQUFJLE9BQU8sR0FBNkMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQzFFLE9BQU8sT0FBTyxDQUFDLGNBQWMsQ0FBQztZQUM5QixPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUM7WUFDcEIsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztRQUVNLHdCQUF3QixDQUFDLFFBQWlCO1lBQy9DLElBQUksS0FBSyxHQUEwQixLQUFLLENBQUMsd0JBQXdCLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDNUUsSUFBSSxLQUFLLENBQUMsU0FBUztnQkFDakIsS0FBSyxDQUFDLFNBQVMsR0FBRyxVQUFBLEtBQUssQ0FBQztZQUMxQixJQUFJLEtBQUssQ0FBQyxRQUFRO2dCQUNoQixLQUFLLENBQUMsUUFBUSxHQUFHLHdCQUF3QixDQUFDO1lBQzVDLE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUVTLGFBQWEsQ0FBQyxRQUFpQjtZQUN2QyxLQUFLLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlCLE9BQU8sUUFBUSxDQUFDLHVCQUF1QixDQUFDO1lBQ3hDLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQztRQUN2QixDQUFDO0tBa0NGLENBQUE7SUEvSndCLGlDQUFTLEdBQVcsVUFBQSxTQUFTLENBQUMsZ0JBQWdCLENBQUMseUJBQXVCLENBQUUsQ0FBQTtJQURwRix1QkFBdUI7UUFEbkMsVUFBQSxxQ0FBcUMsQ0FBQyxRQUFRO09BQ2xDLHVCQUF1QixDQWdLbkM7SUFoS1ksaUNBQXVCLDBCQWdLbkMsQ0FBQTtBQUNILENBQUMsRUFqTFMsU0FBUyxLQUFULFNBQVMsUUFpTGxCO0FDakxELElBQVUsU0FBUyxDQW9EbEI7QUFwREQsV0FBVSxTQUFTO0lBQ2pCLElBQVksSUFJWDtJQUpELFdBQVksSUFBSTtRQUNkLHlCQUFpQixDQUFBO1FBQ2pCLHlCQUFpQixDQUFBO1FBQ2pCLDJCQUFtQixDQUFBO0lBQ3JCLENBQUMsRUFKVyxJQUFJLEdBQUosY0FBSSxLQUFKLGNBQUksUUFJZjtJQUdEOzs7T0FHRztJQUNILE1BQWEsYUFBYyxTQUFRLFVBQUEsU0FBUztRQUE1Qzs7WUFFUyxTQUFJLEdBQVMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQXFDbEMsQ0FBQztRQW5DUSxlQUFlLENBQUMsSUFBUyxFQUFFLE1BQW9CO1lBQ3BELElBQUksT0FBTyxHQUFrQixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFBLGFBQWEsQ0FBQyxDQUFDO1lBQ25FLElBQUksUUFBUSxHQUFZLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQztZQUVoRyxRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7Z0JBQ2pCLEtBQUssSUFBSSxDQUFDLE1BQU07b0JBQ2Qsa0ZBQWtGO29CQUNsRixJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO3dCQUMzRCxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztxQkFDakM7b0JBQ0QsTUFBTTtnQkFDUixLQUFLLElBQUksQ0FBQyxPQUFPO29CQUNmLElBQUksT0FBTyxHQUFlLFVBQUEsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsVUFBQSxPQUFPLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztvQkFDbkksSUFBSSxPQUFPLENBQUMsR0FBRzt3QkFDYixJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztvQkFDbEMsTUFBTTtnQkFDTixtQkFBbUI7YUFDdEI7UUFDSCxDQUFDO1FBRU0sU0FBUztZQUNkLE9BQU8sSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQzNCLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDNUIsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRU0sd0JBQXdCLENBQUMsUUFBaUI7WUFDL0MsSUFBSSxLQUFLLEdBQTBCLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM1RSxJQUFJLEtBQUssQ0FBQyxJQUFJO2dCQUNaLEtBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1lBQ3BCLE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQzs7SUFyQ3NCLHVCQUFTLEdBQVcsVUFBQSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsYUFBYSxDQUFDLENBQUM7SUFEMUUsdUJBQWEsZ0JBdUN6QixDQUFBO0FBQ0gsQ0FBQyxFQXBEUyxTQUFTLEtBQVQsU0FBUyxRQW9EbEI7QUNwREQsSUFBVSxTQUFTLENBd0JsQjtBQXhCRCxXQUFVLFNBQVM7SUFDakI7Ozs7T0FJRztJQUNILE1BQWEsZUFBZ0IsU0FBUSxVQUFBLFNBQVM7UUFJNUM7WUFDRSxLQUFLLEVBQUUsQ0FBQztZQUNSLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLENBQUM7UUFFTSxTQUFTO1lBQ2QsT0FBTyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDM0IsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUM1QixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7O0lBZkQscUlBQXFJO0lBQ3JJLDJCQUEyQjtJQUNKLHlCQUFTLEdBQVcsVUFBQSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLENBQUM7SUFINUUseUJBQWUsa0JBaUIzQixDQUFBO0FBQ0gsQ0FBQyxFQXhCUyxTQUFTLEtBQVQsU0FBUyxRQXdCbEI7QUN4QkQsSUFBVSxTQUFTLENBOEdsQjtBQTlHRCxXQUFVLFNBQVM7SUFFakIsSUFBWSxJQUVYO0lBRkQsV0FBWSxJQUFJO1FBQ2QsK0JBQUksQ0FBQTtRQUFFLG1DQUFNLENBQUE7UUFBRSxpQ0FBSyxDQUFBO1FBQUUsK0JBQUksQ0FBQTtJQUMzQixDQUFDLEVBRlcsSUFBSSxHQUFKLGNBQUksS0FBSixjQUFJLFFBRWY7SUFFRDs7O09BR0c7SUFDSCxNQUFhLGtCQUFtQixTQUFRLFVBQUEsU0FBUztRQUkvQyxZQUFtQixXQUFzQixVQUFBLFNBQVMsQ0FBQyxRQUFRLEVBQUU7WUFDM0QsS0FBSyxFQUFFLENBQUM7WUFDUixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUMzQixDQUFDO1FBRUQsa0RBQWtEO1FBQ2xEOzs7V0FHRztRQUNJLE1BQU0sQ0FBQyxRQUFjLElBQUk7WUFDOUIsSUFBSSxTQUFTLEdBQWMsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUN6QyxJQUFJLFNBQVMsR0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ2hDLElBQUksU0FBUztnQkFDWCxTQUFTLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQztZQUVqQyxJQUFJLEtBQUs7Z0JBQ1AsU0FBUyxHQUFHLFVBQUEsU0FBUyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUV6RSxJQUFJLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQztRQUM1QixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxTQUFTLENBQUMsYUFBd0IsRUFBRSxRQUFjLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBYyxJQUFJO1lBQ3BGLFFBQVEsS0FBSyxFQUFFO2dCQUNiLEtBQUssSUFBSSxDQUFDLElBQUk7b0JBQ1osSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7b0JBQ3RDLE1BQU07Z0JBQ1IsS0FBSyxJQUFJLENBQUMsTUFBTTtvQkFDZCxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQzVDLE1BQU07Z0JBQ1IsS0FBSyxJQUFJLENBQUMsSUFBSTtvQkFDWixJQUFJLENBQUMsS0FBSzt3QkFDUixNQUFNLElBQUksS0FBSyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7Z0JBQy9ELEtBQUssSUFBSSxDQUFDLEtBQUs7b0JBQ2IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO29CQUU1QyxJQUFJLElBQUksR0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDO29CQUMzQixJQUFJLElBQUksRUFBRTt3QkFDUixJQUFJLE9BQWtCLENBQUM7d0JBQ3ZCLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUU7NEJBQ3RCLHFEQUFxRDs0QkFDckQsT0FBTyxHQUFHLFVBQUEsU0FBUyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzs0QkFDbEUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7NEJBQzNCLFVBQUEsUUFBUSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQzt5QkFDekI7d0JBRUQsSUFBSSxNQUFNLEdBQVMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO3dCQUNwQyxJQUFJLE1BQU0sRUFBRTs0QkFDVixrQ0FBa0M7NEJBQ2xDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7NEJBQzlCLE9BQU8sR0FBRyxVQUFBLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7NEJBQzdFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDOzRCQUMzQixVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7eUJBQ3pCO3FCQUNGO29CQUNELE1BQU07YUFDVDtRQUNILENBQUM7UUFDRCxZQUFZO1FBRVosa0JBQWtCO1FBQ1gsU0FBUztZQUNkLElBQUksYUFBYSxHQUFrQjtnQkFDakMsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFO2dCQUNoQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxDQUFDLFNBQVMsRUFBRTthQUM1QyxDQUFDO1lBQ0YsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUNNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDaEUsTUFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdEQsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRUQsMkNBQTJDO1FBQzNDLG1DQUFtQztRQUNuQyxJQUFJO1FBQ0osa0NBQWtDO1FBQ2xDLHNDQUFzQztRQUN0QyxJQUFJO1FBRUosOEVBQThFO1FBQzlFLHdGQUF3RjtRQUN4RixvQkFBb0I7UUFDcEIsSUFBSTtRQUVNLGFBQWEsQ0FBQyxRQUFpQjtZQUN2QyxPQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUM7WUFDdEIsS0FBSyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoQyxDQUFDOztJQWhHc0IsNEJBQVMsR0FBVyxVQUFBLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRC9FLDRCQUFrQixxQkFtRzlCLENBQUE7QUFDSCxDQUFDLEVBOUdTLFNBQVMsS0FBVCxTQUFTLFFBOEdsQjtBQzlHRCxJQUFVLFNBQVMsQ0ErRmxCO0FBL0ZELFdBQVUsU0FBUztJQUVqQjs7T0FFRztJQUNILE1BQWEsWUFBWTtRQUF6QjtZQUNTLGlCQUFZLEdBQXVCLElBQUksQ0FBQztZQUN4QyxZQUFPLEdBQVksSUFBSSxDQUFDO1lBQ3hCLGdCQUFXLEdBQVcsSUFBSSxDQUFDO1lBQzNCLGdCQUFXLEdBQVcsSUFBSSxDQUFDO1FBQ3BDLENBQUM7S0FBQTtJQUxZLHNCQUFZLGVBS3hCLENBQUE7SUFFRDs7O09BR0c7SUFDSCxNQUFhLGlCQUFrQixTQUFRLFVBQUEsZUFBZTtRQU9wRDtZQUNFLEtBQUssRUFBRSxDQUFDO1lBTkgsZUFBVSxHQUFpQixJQUFJLFlBQVksRUFBRSxDQUFDO1lBQzlDLGNBQVMsR0FBaUIsSUFBSSxZQUFZLEVBQUUsQ0FBQztZQU1sRCxJQUFJLENBQUMsZ0JBQWdCLHFDQUFzQixJQUFJLENBQUMsMkJBQTJCLENBQUMsQ0FBQztRQUMvRSxDQUFDO1FBTEQsU0FBUyxDQUFZO1FBT3JCOzs7V0FHRztRQUNILElBQVcsUUFBUTtZQUNqQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxXQUFXLENBQUMsT0FBZ0I7WUFDckMsSUFBSSxjQUFjLEdBQVksVUFBQSxPQUFPLENBQUMsS0FBSyxDQUFDLFVBQUEsT0FBTyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pHLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEdBQUcsVUFBQSxVQUFVLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7WUFDcEksSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDO1FBQ3ZDLENBQUM7UUFFRDs7O1dBR0c7UUFDSCxJQUFXLFFBQVEsQ0FBQyxPQUFnQjtZQUNsQyxJQUFJLE1BQU0sR0FBWSxVQUFBLE9BQU8sQ0FBQyxLQUFLLENBQUMsVUFBQSxPQUFPLENBQUMsS0FBSyxDQUFDLFVBQUEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFFckgsSUFBSSxXQUFXLEdBQWUsSUFBSSxVQUFBLFVBQVUsRUFBRSxDQUFDO1lBQy9DLFdBQVcsQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO1lBQ2pDLDZCQUE2QjtZQUM3QixVQUFBLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsdUJBQXVCLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxVQUFBLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsVUFBQSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEwseUJBQXlCO1lBQ3pCLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEdBQUcsVUFBQSxVQUFVLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLGdCQUFnQixDQUFDLFVBQUEsT0FBTyxDQUFDLElBQUksRUFBRSxFQUF5QixXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQ3hLLHFDQUFxQztZQUNyQyxVQUFBLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsdUJBQXVCLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxVQUFBLE9BQU8sQ0FBQyxVQUFVLENBQUMsVUFBQSxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEwsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBQSxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELENBQUM7UUFFRDs7V0FFRztRQUNJLFNBQVMsQ0FBQyxHQUFZO1lBQzNCLElBQUksY0FBYyxHQUFZLFVBQUEsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyRCxVQUFBLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsdUJBQXVCLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1lBQ3BJLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxNQUFNLENBQUMsR0FBWTtZQUN4QixJQUFJLFNBQVMsR0FBWSxVQUFBLE9BQU8sQ0FBQyxLQUFLLENBQUMsVUFBQSxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFFOUUsSUFBSSxXQUFXLEdBQWUsSUFBSSxVQUFBLFVBQVUsRUFBRSxDQUFDO1lBQy9DLFdBQVcsQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDO1lBQ3BDLDZCQUE2QjtZQUM3QixVQUFBLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsdUJBQXVCLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxVQUFBLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsVUFBQSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEwseUJBQXlCO1lBQ3pCLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEdBQUcsVUFBQSxVQUFVLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLGdCQUFnQixDQUFDLFVBQUEsT0FBTyxDQUFDLElBQUksRUFBRSxFQUF5QixXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQ3hLLHFDQUFxQztZQUNyQyxVQUFBLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsdUJBQXVCLENBQUMsSUFBSSxnQkFBZ0IsQ0FBQyxVQUFBLE9BQU8sQ0FBQyxVQUFVLENBQUMsVUFBQSxPQUFPLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEwsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBQSxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEQsQ0FBQztRQUVPLDJCQUEyQjtZQUNqQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQUEsa0JBQWtCLENBQUMsQ0FBQyxRQUFRLENBQUM7UUFFdkUsQ0FBQzs7SUE1RXNCLDJCQUFTLEdBQVcsVUFBQSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUQ5RSwyQkFBaUIsb0JBOEU3QixDQUFBO0FBQ0gsQ0FBQyxFQS9GUyxTQUFTLEtBQVQsU0FBUyxRQStGbEI7QUMvRkQsSUFBVSxTQUFTLENBdU1sQjtBQXZNRCxXQUFVLFNBQVM7SUFlakI7Ozs7Ozs7Ozs7T0FVRztJQUNILE1BQWEsT0FBUSxTQUFRLFdBQVc7UUFrQnRDLFlBQVksS0FBYSxFQUFFLFVBQWtCLENBQUMsRUFBRSw0QkFBK0MsRUFBRSxTQUFpQixDQUFDO1lBQ2pILEtBQUssRUFBRSxDQUFDO1lBZEEsdUJBQWtCLEdBQVcsQ0FBQyxDQUFDO1lBQy9CLGtCQUFhLEdBQVcsQ0FBQyxDQUFDO1lBQzFCLGVBQVUsR0FBVyxDQUFDLENBQUM7WUFDdkIsaUJBQVksR0FBVyxDQUFDLENBQUM7WUFDekIsbUJBQWMsR0FBVyxDQUFDLENBQUM7WUFDM0IseUJBQW9CLEdBQVcsQ0FBQyxDQUFDO1lBQ2pDLFdBQU0sR0FBVyxDQUFDLENBQUM7WUFFbkIsU0FBSSxHQUFTLFVBQUEsSUFBSSxDQUFDLElBQUksQ0FBQztZQUN2QixtQkFBYyxHQUFXLENBQUMsQ0FBQztZQUMzQix3QkFBbUIsR0FBVyxDQUFDLENBQUM7WUFDaEMsWUFBTyxHQUFXLFNBQVMsQ0FBQztZQWdJOUIsbUJBQWMsR0FBRyxDQUFDLGFBQWtDLEVBQVEsRUFBRTtnQkFDcEUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO29CQUNkLE9BQU87Z0JBRVQsSUFBSSxLQUFLLEdBQVUsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNwRCxJQUFJLE1BQWMsQ0FBQztnQkFDbkIsSUFBSSxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksUUFBUTtvQkFDcEMsTUFBTSxHQUFHLGFBQWEsQ0FBQzs7b0JBRXZCLE1BQU0sR0FBRyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7Z0JBQ2xDLElBQUksYUFBYSxHQUFZLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztnQkFFN0QsSUFBSSxLQUFLLEVBQUU7b0JBQ1QsS0FBSyxDQUFDLE1BQU0sR0FBRyxhQUFhLENBQUM7b0JBQzdCLElBQUksQ0FBQyxhQUFhO3dCQUNoQixPQUFPO2lCQUNWO2dCQUVELElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDO2dCQUU3QixJQUFJLEtBQUssR0FBZ0IsSUFBSSxXQUFXLHdCQUF1QjtvQkFDN0QsTUFBTSxFQUFFO3dCQUNOLE1BQU0sRUFBRSxNQUFNO3FCQUNmO2lCQUNGLENBQUMsQ0FBQztnQkFFSCxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzVCLENBQUMsQ0FBQTtZQXZKQyxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQztZQUN0QixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNuQixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hCLENBQUM7UUFFRDs7V0FFRztRQUNJLFdBQVcsQ0FBQyxLQUFXO1lBQzVCLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN6QixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxRQUFRLENBQUMsTUFBYztZQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU07Z0JBQ2QsT0FBTztZQUVULElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3pDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQzVDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFDekMsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFFM0MsSUFBSSxJQUFJLENBQUMsSUFBSSx3QkFBNkIsRUFBRTtnQkFDMUMsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztnQkFDbkUsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7Z0JBQzlDLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO2FBQ3ZCO1lBRUQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUsscUJBQXFCLENBQUMsQ0FBQztZQUNuRCxJQUFJLElBQUksQ0FBQyxJQUFJLHdCQUE2QjtnQkFDeEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7O2dCQUV4QyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlCLENBQUM7UUFFTSxLQUFLLENBQUMsTUFBYztZQUN6QixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3RCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksUUFBUSxDQUFDLEtBQWE7WUFDM0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUMzQyxDQUFDO1FBRUQ7OztXQUdHO1FBQ0kscUJBQXFCLENBQUMsc0JBQThCLENBQUM7WUFDMUQsSUFBSSxDQUFDLGtCQUFrQixHQUFHLG1CQUFtQixDQUFDO1lBQzlDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNwQyxJQUFJLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQztZQUN6QixJQUFJLElBQUksQ0FBQyxrQkFBa0I7Z0JBQ3pCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzlGLENBQUM7UUFFRDs7V0FFRztRQUNJLFNBQVMsQ0FBQyxPQUFlO1lBQzlCLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDO1FBQ3hCLENBQUM7UUFFRDs7V0FFRztRQUNJLFNBQVM7WUFDZCxPQUFPLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUNoQyxDQUFDO1FBRUQ7O1dBRUc7UUFDTyxlQUFlO1lBQ3ZCLElBQUksTUFBTSxHQUFXLENBQUMsQ0FBQztZQUN2QixJQUFJLEtBQUssR0FBVyxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7WUFFM0MsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNqQjtvQkFDRSxJQUFJLFdBQVcsR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO29CQUMxQyxJQUFJLHFCQUFxQixHQUFXLFdBQVcsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUM7b0JBQzNFLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO29CQUV6QixJQUFJLElBQUksQ0FBQyxjQUFjLEdBQUcsQ0FBQyxFQUFFO3dCQUMzQixJQUFJLHFCQUFxQixHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUU7NEJBQy9DLE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxHQUFHLHFCQUFxQixDQUFDOzRCQUNyRSxNQUFNO3lCQUNQOzZCQUNJOzRCQUNILE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7NEJBQ25FLHFCQUFxQixJQUFJLElBQUksQ0FBQyxjQUFjLENBQUM7eUJBQzlDO3FCQUNGO29CQUNELE1BQU0sSUFBSSxLQUFLLEdBQUcscUJBQXFCLENBQUM7b0JBQ3hDLHFHQUFxRztvQkFDckcsTUFBTTtnQkFDUiwwQkFBK0I7Z0JBQy9CLDBCQUErQjtnQkFDL0I7b0JBQ0UsTUFBTSxHQUFHLEtBQUssQ0FBQztvQkFDZixNQUFNO2FBQ1Q7WUFDRCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBQ0Q7O1dBRUc7UUFDSyxlQUFlO1lBQ3JCLElBQUksSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLEVBQUU7Z0JBQzNCLElBQUkscUJBQXFCLEdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUM7Z0JBQy9FLElBQUkscUJBQXFCLEdBQUcsSUFBSSxDQUFDLGNBQWM7b0JBQzdDLE9BQU8sSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLHFCQUFxQixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7YUFDdEg7WUFDRCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDM0IsQ0FBQztLQThCRjtJQTVLWSxpQkFBTyxVQTRLbkIsQ0FBQTtBQUNILENBQUMsRUF2TVMsU0FBUyxLQUFULFNBQVMsUUF1TWxCO0FDdk1ELGlDQUFpQztBQUNqQyxJQUFVLFNBQVMsQ0EyRmxCO0FBNUZELGlDQUFpQztBQUNqQyxXQUFVLFNBQVM7SUFDakI7Ozs7Ozs7Ozs7Ozs7Ozs7O09BaUJHO0lBQ0gsTUFBYSxJQUFLLFNBQVEsVUFBQSxPQUFPO1FBQWpDOztZQUNVLGFBQVEsR0FBeUIsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUMzQyxnQkFBVyxHQUFXLENBQUMsQ0FBQztZQWlEeEIsbUJBQWMsR0FBa0IsQ0FBQyxNQUFhLEVBQVEsRUFBRTtnQkFDOUQsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNO29CQUNkLE9BQU87Z0JBRVQsSUFBSSxPQUFPLEdBQXNCLE1BQU0sQ0FBQyxNQUFPLENBQUM7Z0JBQ2hELElBQUksS0FBSyxHQUFnQixJQUFJLFdBQVcsd0JBQXVCLEVBQUMsTUFBTSxFQUFFO3dCQUN0RSxPQUFPLEVBQUUsT0FBTzt3QkFDaEIsS0FBSyxFQUFnQixNQUFPLENBQUMsTUFBTSxDQUFDLE1BQU07d0JBQzFDLE1BQU0sRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFO3FCQUN6QixFQUFDLENBQUMsQ0FBQztnQkFDSixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzVCLENBQUMsQ0FBQTtZQUVPLGtCQUFhLEdBQWtCLENBQUMsTUFBYSxFQUFRLEVBQUU7Z0JBQzdELElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTTtvQkFDZCxPQUFPO2dCQUVULElBQUksS0FBSyxHQUFVLElBQUksS0FBSyxzQkFBc0IsTUFBTSxDQUFDLENBQUM7Z0JBQzFELElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDNUIsQ0FBQyxDQUFBO1FBQ0gsQ0FBQztRQW5FQzs7V0FFRztRQUNJLFVBQVUsQ0FBQyxRQUFpQjtZQUNqQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQzNDLFFBQVEsQ0FBQyxnQkFBZ0Isc0JBQXNCLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUNuRSxRQUFRLENBQUMsZ0JBQWdCLHdCQUF1QixJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDdkUsQ0FBQztRQUVEOztXQUVHO1FBQ0ksVUFBVSxDQUFDLEtBQWE7WUFDN0IsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxhQUFhLENBQUMsS0FBYTtZQUNoQyxJQUFJLE9BQU8sR0FBWSxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzlDLElBQUksT0FBTyxFQUFFO2dCQUNYLE9BQU8sQ0FBQyxtQkFBbUIsc0JBQXNCLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztnQkFDckUsT0FBTyxDQUFDLG1CQUFtQix3QkFBdUIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO2dCQUN2RSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUM3QjtRQUNILENBQUM7UUFFRDs7V0FFRztRQUNJLFNBQVM7WUFDZCxJQUFJLFFBQVEsR0FBVyxDQUFDLENBQUM7WUFDekIsS0FBSyxJQUFJLE9BQU8sSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUVqQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNO29CQUNuQixRQUFRLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO2FBQ3RDO1lBRUQsSUFBSSxRQUFRLElBQUksSUFBSSxDQUFDLFdBQVc7Z0JBQzlCLEtBQUssQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUM7WUFFNUIsT0FBTyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDM0IsQ0FBQztLQXNCRjtJQXZFWSxjQUFJLE9BdUVoQixDQUFBO0FBQ0gsQ0FBQyxFQTNGUyxTQUFTLEtBQVQsU0FBUyxRQTJGbEI7QUM1RkQsSUFBVSxTQUFTLENBbUZsQjtBQW5GRCxXQUFVLFNBQVM7SUFLakI7O09BRUc7SUFDSCxNQUFzQixRQUFRO1FBRTVCLGtDQUFrQztRQUVsQzs7V0FFRztRQUNJLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBc0I7WUFDL0MsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLEVBQUU7Z0JBQ3RCLElBQUksUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7b0JBQzVCLE9BQU8sSUFBSSxDQUFDO2FBQ2Y7WUFDRCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFFRDs7V0FFRztRQUNJLE1BQU0sQ0FBQyxjQUFjLENBQUMsS0FBc0I7WUFDakQsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLEVBQUU7Z0JBQ3RCLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQztvQkFDN0IsT0FBTyxLQUFLLENBQUM7YUFDaEI7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxNQUFNLENBQUMsVUFBVSxDQUFJLE9BQVUsRUFBRSxTQUFZLEVBQUUsS0FBc0IsRUFBRSxTQUFrQixLQUFLO1lBQ25HLElBQUksQ0FBQyxNQUFNLElBQUksUUFBUSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUM7Z0JBQ3pDLE9BQU8sT0FBTyxDQUFDO1lBQ2pCLElBQUksUUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUM7Z0JBQ2hDLE9BQU8sT0FBTyxDQUFDO1lBQ2pCLE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQTBCLEVBQUUsU0FBMEI7WUFDNUUsT0FBTyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxTQUFTLENBQUMsR0FBRyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDdEYsQ0FBQztRQUVELGtEQUFrRDtRQUNsRCw2QkFBNkI7UUFDN0Isc0VBQXNFO1FBQ3RFLDZCQUE2QjtRQUM3QixzREFBc0Q7UUFDdEQsTUFBTTtRQUVOLGlDQUFpQztRQUNqQyx1REFBdUQ7UUFDdkQsMENBQTBDO1FBQzFDLDJEQUEyRDtRQUMzRCxzREFBc0Q7UUFDdEQsMkRBQTJEO1FBQzNELHlDQUF5QztRQUN6Qyw4Q0FBOEM7UUFDOUMsTUFBTTtRQUNOLElBQUk7UUFFSSxNQUFNLENBQUMsVUFBVTtZQUN2QixJQUFJLEtBQUssR0FBZSxFQUFFLENBQUM7WUFDM0IsUUFBUSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUNqRSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQy9ELE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUVPLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxNQUFxQjtZQUNwRCxRQUFRLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksU0FBUyxDQUFDLENBQUM7UUFDakUsQ0FBQzs7SUF4RWMsb0JBQVcsR0FBZSxRQUFRLENBQUMsVUFBVSxFQUFFLENBQUM7SUFEM0Msa0JBQVEsV0EwRTdCLENBQUE7QUFDSCxDQUFDLEVBbkZTLFNBQVMsS0FBVCxTQUFTLFFBbUZsQjtBQ25GRCx1Q0FBdUM7QUFDdkMsSUFBVSxTQUFTLENBc0JsQjtBQXZCRCx1Q0FBdUM7QUFDdkMsV0FBVSxTQUFTO0lBQ2pCOztPQUVHO0lBQ0gsTUFBYSxVQUFXLFNBQVEsVUFBQSxXQUFXO1FBU2xDLE1BQU0sQ0FBQyxjQUFjLENBQUMsU0FBaUI7WUFDNUMsSUFBSSxRQUFRLEdBQWEsVUFBVSxRQUFnQixFQUFFLEdBQUcsS0FBZTtnQkFDckUsSUFBSSxJQUFJLEdBQWEsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO2dCQUN4RCxJQUFJLEdBQUcsR0FBVyxTQUFTLEdBQUcsR0FBRyxHQUFHLFVBQUEsV0FBVyxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQy9FLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNiLENBQUMsQ0FBQztZQUNGLE9BQU8sUUFBUSxDQUFDO1FBQ2xCLENBQUM7O0lBZmEsb0JBQVMsR0FBNkI7UUFDbEQsQ0FBQyxVQUFBLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBRSxVQUFVLENBQUMsY0FBYyxDQUFDLFVBQUEsWUFBWSxDQUFDLFVBQUEsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9FLENBQUMsVUFBQSxZQUFZLENBQUMsR0FBRyxDQUFDLEVBQUUsVUFBVSxDQUFDLGNBQWMsQ0FBQyxVQUFBLFlBQVksQ0FBQyxVQUFBLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM3RSxDQUFDLFVBQUEsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLFVBQVUsQ0FBQyxjQUFjLENBQUMsVUFBQSxZQUFZLENBQUMsVUFBQSxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDL0UsQ0FBQyxVQUFBLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxVQUFVLENBQUMsY0FBYyxDQUFDLFVBQUEsWUFBWSxDQUFDLFVBQUEsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pGLENBQUMsVUFBQSxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQUUsVUFBVSxDQUFDLGNBQWMsQ0FBQyxVQUFBLFlBQVksQ0FBQyxVQUFBLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNqRixDQUFDLFVBQUEsWUFBWSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFVBQVUsQ0FBQyxjQUFjLENBQUMsVUFBQSxZQUFZLENBQUMsVUFBQSxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDcEYsQ0FBQztJQVJTLG9CQUFVLGFBaUJ0QixDQUFBO0FBQ0gsQ0FBQyxFQXRCUyxTQUFTLEtBQVQsU0FBUyxRQXNCbEI7QUN2QkQsdUNBQXVDO0FBQ3ZDLElBQVUsU0FBUyxDQU9sQjtBQVJELHVDQUF1QztBQUN2QyxXQUFVLFNBQVM7SUFDZjs7T0FFRztJQUNILE1BQWEsV0FBWSxTQUFRLFVBQUEsV0FBVztLQUUzQztJQUZZLHFCQUFXLGNBRXZCLENBQUE7QUFDTCxDQUFDLEVBUFMsU0FBUyxLQUFULFNBQVMsUUFPbEI7QUNSRCx1Q0FBdUM7QUFDdkMsSUFBVSxTQUFTLENBdURsQjtBQXhERCx1Q0FBdUM7QUFDdkMsV0FBVSxTQUFTO0lBQ2pCOztPQUVHO0lBQ0gsTUFBYSxhQUFjLFNBQVEsVUFBQSxXQUFXO1FBa0JyQyxNQUFNLENBQUMsS0FBSztZQUNqQixhQUFhLENBQUMsUUFBUSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7WUFDeEMsYUFBYSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDNUIsQ0FBQztRQUVNLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBYTtZQUMvQixhQUFhLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQztZQUNsQyxhQUFhLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQyxDQUFDO1FBQ00sTUFBTSxDQUFDLFFBQVE7WUFDcEIsYUFBYSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixDQUFDO1FBRU0sTUFBTSxDQUFDLGNBQWMsQ0FBQyxTQUFpQjtZQUM1QyxJQUFJLFFBQVEsR0FBYSxVQUFVLFFBQWdCLEVBQUUsR0FBRyxLQUFlO2dCQUNyRSxhQUFhLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxHQUFHLEdBQUcsVUFBQSxXQUFXLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3JGLENBQUMsQ0FBQztZQUNGLE9BQU8sUUFBUSxDQUFDO1FBQ2xCLENBQUM7UUFFTyxNQUFNLENBQUMsY0FBYyxDQUFDLE1BQWM7WUFDMUMsSUFBSSxNQUFNLEdBQVcsRUFBRSxDQUFDO1lBQ3hCLEtBQUssSUFBSSxDQUFDLEdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFO2dCQUNyQyxNQUFNLElBQUksSUFBSSxDQUFDO1lBQ2pCLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFTyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQWE7WUFDaEMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxXQUFXLElBQUksYUFBYSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDL0csSUFBSSxhQUFhLENBQUMsVUFBVTtnQkFDMUIsYUFBYSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsYUFBYSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUM7UUFDM0UsQ0FBQzs7SUFoRGEsc0JBQVEsR0FBd0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNuRSx3QkFBVSxHQUFZLElBQUksQ0FBQztJQUUzQix1QkFBUyxHQUE2QjtRQUNsRCxDQUFDLFVBQUEsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLGFBQWEsQ0FBQyxjQUFjLENBQUMsVUFBQSxZQUFZLENBQUMsVUFBQSxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEYsQ0FBQyxVQUFBLFlBQVksQ0FBQyxHQUFHLENBQUMsRUFBRSxhQUFhLENBQUMsY0FBYyxDQUFDLFVBQUEsWUFBWSxDQUFDLFVBQUEsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hGLENBQUMsVUFBQSxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQUUsYUFBYSxDQUFDLGNBQWMsQ0FBQyxVQUFBLFlBQVksQ0FBQyxVQUFBLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNsRixDQUFDLFVBQUEsWUFBWSxDQUFDLEtBQUssQ0FBQyxFQUFFLGFBQWEsQ0FBQyxjQUFjLENBQUMsVUFBQSxZQUFZLENBQUMsVUFBQSxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDcEYsQ0FBQyxVQUFBLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxhQUFhLENBQUMsY0FBYyxDQUFDLFVBQUEsWUFBWSxDQUFDLFVBQUEsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BGLENBQUMsVUFBQSxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQUUsYUFBYSxDQUFDLEtBQUs7UUFDekMsQ0FBQyxVQUFBLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxhQUFhLENBQUMsS0FBSztRQUN6QyxDQUFDLFVBQUEsWUFBWSxDQUFDLGNBQWMsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxLQUFLO1FBQ2xELENBQUMsVUFBQSxZQUFZLENBQUMsUUFBUSxDQUFDLEVBQUUsYUFBYSxDQUFDLFFBQVE7UUFDL0MsQ0FBQyxVQUFBLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxhQUFhLENBQUMsY0FBYyxDQUFDLFVBQUEsWUFBWSxDQUFDLFVBQUEsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ3ZGLENBQUM7SUFDYSxvQkFBTSxHQUFhLEVBQUUsQ0FBQztJQWhCMUIsdUJBQWEsZ0JBa0R6QixDQUFBO0FBQ0gsQ0FBQyxFQXZEUyxTQUFTLEtBQVQsU0FBUyxRQXVEbEI7QUN4REQsSUFBVSxTQUFTLENBK01sQjtBQS9NRCxXQUFVLFNBQVM7SUFDakI7O09BRUc7SUFDSCxJQUFZLGFBNEtYO0lBNUtELFdBQVksYUFBYTtRQUN2QiwyQkFBVSxDQUFBO1FBQ1YsMkJBQVUsQ0FBQTtRQUNWLDJCQUFVLENBQUE7UUFDViwyQkFBVSxDQUFBO1FBQ1YsMkJBQVUsQ0FBQTtRQUNWLDJCQUFVLENBQUE7UUFDViwyQkFBVSxDQUFBO1FBQ1YsMkJBQVUsQ0FBQTtRQUNWLDJCQUFVLENBQUE7UUFDViwyQkFBVSxDQUFBO1FBQ1YsMkJBQVUsQ0FBQTtRQUNWLDJCQUFVLENBQUE7UUFDViwyQkFBVSxDQUFBO1FBQ1YsMkJBQVUsQ0FBQTtRQUNWLDJCQUFVLENBQUE7UUFDViwyQkFBVSxDQUFBO1FBQ1YsMkJBQVUsQ0FBQTtRQUNWLDJCQUFVLENBQUE7UUFDViwyQkFBVSxDQUFBO1FBQ1YsMkJBQVUsQ0FBQTtRQUNWLDJCQUFVLENBQUE7UUFDViwyQkFBVSxDQUFBO1FBQ1YsMkJBQVUsQ0FBQTtRQUNWLDJCQUFVLENBQUE7UUFDViwyQkFBVSxDQUFBO1FBQ1YsMkJBQVUsQ0FBQTtRQUNWLCtCQUFjLENBQUE7UUFDZCxnQ0FBZSxDQUFBO1FBQ2YsK0JBQWMsQ0FBQTtRQUNkLCtCQUFjLENBQUE7UUFDZCxpQ0FBZ0IsQ0FBQTtRQUNoQixnQ0FBZSxDQUFBO1FBQ2YsZ0NBQWUsQ0FBQTtRQUNmLCtCQUFjLENBQUE7UUFDZCxpQ0FBZ0IsQ0FBQTtRQUNoQixpQ0FBZ0IsQ0FBQTtRQUNoQixnQ0FBZSxDQUFBO1FBQ2YsZ0NBQWUsQ0FBQTtRQUNmLGdDQUFlLENBQUE7UUFDZix3Q0FBdUIsQ0FBQTtRQUN2QixrQ0FBaUIsQ0FBQTtRQUNqQiw2Q0FBNEIsQ0FBQTtRQUM1QiwrQ0FBOEIsQ0FBQTtRQUM5QixnQ0FBZSxDQUFBO1FBQ2YsMENBQXlCLENBQUE7UUFDekIsd0NBQXVCLENBQUE7UUFDdkIsZ0NBQWUsQ0FBQTtRQUNmLHlDQUF3QixDQUFBO1FBQ3hCLHlDQUF3QixDQUFBO1FBQ3hCLHdDQUF1QixDQUFBO1FBQ3ZCLGdDQUFlLENBQUE7UUFDZixrQ0FBaUIsQ0FBQTtRQUNqQixnQ0FBZSxDQUFBO1FBQ2YsMkNBQTBCLENBQUE7UUFDMUIsbURBQWtDLENBQUE7UUFDbEMscUNBQW9CLENBQUE7UUFDcEIsZ0NBQWUsQ0FBQTtRQUNmLHVDQUFzQixDQUFBO1FBQ3RCLDBCQUFTLENBQUE7UUFDVCwwQkFBUyxDQUFBO1FBQ1QsMEJBQVMsQ0FBQTtRQUNULDBCQUFTLENBQUE7UUFDVCwwQkFBUyxDQUFBO1FBQ1QsMEJBQVMsQ0FBQTtRQUNULDBCQUFTLENBQUE7UUFDVCwwQkFBUyxDQUFBO1FBQ1QsMEJBQVMsQ0FBQTtRQUNULDRCQUFXLENBQUE7UUFDWCxnQ0FBZSxDQUFBO1FBQ2YsMkNBQTBCLENBQUE7UUFDMUIsb0NBQW1CLENBQUE7UUFDbkIsb0NBQW1CLENBQUE7UUFDbkIsb0NBQW1CLENBQUE7UUFDbkIsbURBQWtDLENBQUE7UUFDbEMsb0NBQW1CLENBQUE7UUFDbkIsb0NBQW1CLENBQUE7UUFDbkIsb0NBQW1CLENBQUE7UUFDbkIseUNBQXdCLENBQUE7UUFDeEIsb0NBQW1CLENBQUE7UUFDbkIsb0NBQW1CLENBQUE7UUFDbkIsb0NBQW1CLENBQUE7UUFDbkIsb0NBQW1CLENBQUE7UUFDbkIsaURBQWdDLENBQUE7UUFDaEMsNkNBQTRCLENBQUE7UUFDNUIsa0RBQWlDLENBQUE7UUFDakMsNEJBQVcsQ0FBQTtRQUNYLDRCQUFXLENBQUE7UUFDWCw2Q0FBNEIsQ0FBQTtRQUM1Qiw0QkFBVyxDQUFBO1FBQ1gsNEJBQVcsQ0FBQTtRQUNYLDRCQUFXLENBQUE7UUFDWCw0QkFBVyxDQUFBO1FBQ1gsNEJBQVcsQ0FBQTtRQUNYLDRCQUFXLENBQUE7UUFDWCw0QkFBVyxDQUFBO1FBQ1gsNEJBQVcsQ0FBQTtRQUNYLDRCQUFXLENBQUE7UUFDWCw0QkFBVyxDQUFBO1FBQ1gsNEJBQVcsQ0FBQTtRQUNYLDRCQUFXLENBQUE7UUFDWCx1Q0FBc0IsQ0FBQTtRQUN0QixnQ0FBZSxDQUFBO1FBQ2YsZ0NBQWUsQ0FBQTtRQUNmLG1DQUFrQixDQUFBO1FBQ2xCLG9DQUFtQixDQUFBO1FBQ25CLDJDQUEwQixDQUFBO1FBQzFCLHFDQUFvQixDQUFBO1FBQ3BCLDZDQUE0QixDQUFBO1FBQzVCLDhCQUFhLENBQUE7UUFDYixnQ0FBZSxDQUFBO1FBQ2YsNERBQTJDLENBQUE7UUFDM0MsNEJBQVcsQ0FBQTtRQUNYLDhCQUFhLENBQUE7UUFDYixvREFBbUMsQ0FBQTtRQUNuQyw2Q0FBNEIsQ0FBQTtRQUM1Qiw0Q0FBMkIsQ0FBQTtRQUMzQixzREFBcUMsQ0FBQTtRQUNyQywyQ0FBMEIsQ0FBQTtRQUMxQixvREFBbUMsQ0FBQTtRQUNuQyx5Q0FBd0IsQ0FBQTtRQUN4QixnQ0FBZSxDQUFBO1FBQ2Ysc0RBQXFDLENBQUE7UUFDckMsMkNBQTBCLENBQUE7UUFDMUIsa0RBQWlDLENBQUE7UUFDakMsdUNBQXNCLENBQUE7UUFDdEIsNkNBQTRCLENBQUE7UUFDNUIsK0NBQThCLENBQUE7UUFDOUIsdUNBQXNCLENBQUE7UUFDdEIsOEJBQWEsQ0FBQTtRQUNiLHFDQUFvQixDQUFBO1FBQ3BCLDhCQUFhLENBQUE7UUFDYixxQ0FBb0IsQ0FBQTtRQUNwQiwyQ0FBMEIsQ0FBQTtRQUMxQix5Q0FBd0IsQ0FBQTtRQUN4Qix5Q0FBd0IsQ0FBQTtRQUN4Qiw0QkFBVyxDQUFBO1FBQ1gsbUNBQWtCLENBQUE7UUFDbEIsdUNBQXNCLENBQUE7UUFDdEIsa0NBQWlCLENBQUE7UUFDakIsa0NBQWlCLENBQUE7UUFDakIsd0NBQXVCLENBQUE7UUFDdkIsbUNBQWtCLENBQUE7UUFDbEIseUNBQXdCLENBQUE7UUFDeEIscUNBQW9CLENBQUE7UUFDcEIsNkNBQTRCLENBQUE7UUFDNUIsZ0NBQWUsQ0FBQTtRQUNmLGlEQUFnQyxDQUFBO1FBQ2hDLHVEQUFzQyxDQUFBO1FBQ3RDLG1EQUFrQyxDQUFBO1FBQ2xDLDZDQUE0QixDQUFBO1FBQzVCLG1EQUFrQyxDQUFBO1FBQ2xDLDZDQUE0QixDQUFBO1FBQzVCLDJDQUEwQixDQUFBO1FBQzFCLDJDQUEwQixDQUFBO1FBQzFCLDBEQUF5QyxDQUFBO1FBRXpDLHlCQUF5QjtRQUN6QiwwQkFBUyxDQUFBO1FBRVQsb0JBQW9CO1FBQ3BCLGdDQUFlLENBQUE7UUFDZixnQ0FBZSxDQUFBO1FBQ2Ysa0NBQWlCLENBQUE7UUFDakIsOEJBQWEsQ0FBQTtRQUNiLDhCQUFhLENBQUE7UUFDYixtQ0FBa0IsQ0FBQTtRQUNsQix3REFBdUMsQ0FBQTtRQUN2QywwREFBeUMsQ0FBQTtRQUV6QyxTQUFTO1FBQ1QsZ0NBQWUsQ0FBQTtJQUNqQixDQUFDLEVBNUtXLGFBQWEsR0FBYix1QkFBYSxLQUFiLHVCQUFhLFFBNEt4QjtJQUVELElBQVksZ0JBWVg7SUFaRCxXQUFZLGdCQUFnQjtRQUMxQiw4QkFBbUIsQ0FBQTtRQUNuQiw4QkFBbUIsQ0FBQTtRQUNuQix3Q0FBMkIsQ0FBQTtRQUMzQixvQ0FBdUIsQ0FBQTtRQUN2QiwwQ0FBOEIsQ0FBQTtRQUM5QixzQ0FBOEIsQ0FBQTtRQUM5Qix5Q0FBa0MsQ0FBQTtRQUNsQyxvQ0FBdUIsQ0FBQTtRQUN2QixtQ0FBMkIsQ0FBQTtRQUMzQiwrQ0FBeUMsQ0FBQTtRQUN6QyxtQ0FBMkIsQ0FBQTtJQUM3QixDQUFDLEVBWlcsZ0JBQWdCLEdBQWhCLDBCQUFnQixLQUFoQiwwQkFBZ0IsUUFZM0I7SUFFRDs7Ozs7Ozs7Ozs7Ozs7T0FjRztBQUNMLENBQUMsRUEvTVMsU0FBUyxLQUFULFNBQVMsUUErTWxCO0FDL01ELElBQVUsU0FBUyxDQXFCbEI7QUFyQkQsV0FBVSxTQUFTO0lBSWY7O09BRUc7SUFDSCxNQUFhLFVBQVU7UUFRbkIsWUFBWSxNQUFhLEVBQUUsR0FBRyxVQUFvQjtZQVAzQyxTQUFJLDRCQUFpQztZQUdyQyxjQUFTLEdBQVksSUFBSSxDQUFDO1lBQzFCLGFBQVEsR0FBWSxLQUFLLENBQUM7WUFJN0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFDckIsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUM7WUFDNUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFDMUIsQ0FBQztLQUNKO0lBYlksb0JBQVUsYUFhdEIsQ0FBQTtBQUNMLENBQUMsRUFyQlMsU0FBUyxLQUFULFNBQVMsUUFxQmxCO0FDckJELElBQVUsU0FBUyxDQXVNbEI7QUF2TUQsV0FBVSxTQUFTO0lBQ2pCOztPQUVHO0lBQ0gsSUFBWSxXQWVYO0lBZkQsV0FBWSxXQUFXO1FBQ3JCLGlHQUFpRztRQUNqRyxpQ0FBa0IsQ0FBQTtRQUNsQixrRkFBa0Y7UUFDbEYsK0JBQWdCLENBQUE7UUFDaEIsd0hBQXdIO1FBQ3hILG1DQUFvQixDQUFBO1FBQ3BCLGdHQUFnRztRQUNoRyxpQ0FBa0IsQ0FBQTtRQUNsQix5RUFBeUU7UUFDekUscUNBQXNCLENBQUE7UUFDdEIsbUdBQW1HO1FBQ25HLG1DQUFvQixDQUFBO1FBQ3BCLHVDQUF1QztRQUN2QyxxQ0FBc0IsQ0FBQTtJQUN4QixDQUFDLEVBZlcsV0FBVyxHQUFYLHFCQUFXLEtBQVgscUJBQVcsUUFldEI7SUFhRDs7OztPQUlHO0lBQ0gsTUFBYSxvQkFBb0I7UUFnQi9CLFlBQW1CLE9BQW9CLEVBQUUsYUFBcUIsQ0FBQyxFQUFFLGVBQXVCLEVBQUUsRUFBRSxjQUFzQixHQUFHLEVBQUUsYUFBcUIsSUFBSTtZQWZ6SSxhQUFRLEdBQVksVUFBQSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDbkMsYUFBUSxHQUFZLFVBQUEsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1lBSWxDLFlBQU8sR0FBWSxVQUFBLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNsQyxVQUFLLEdBQVksS0FBSyxDQUFDO1lBS3ZCLFNBQUksR0FBUyxJQUFJLFVBQUEsSUFBSSxFQUFFLENBQUM7WUFDeEIsa0JBQWEsR0FBVyxDQUFDLENBQUM7WUFDMUIsbUJBQWMsR0FBVyxDQUFDLENBQUM7WUEyQjNCLGFBQVEsR0FBRyxDQUFDLE1BQWtCLEVBQVEsRUFBRTtnQkFDOUMsTUFBTSxDQUFDLGNBQWMsRUFBRSxDQUFDO2dCQUN4QixJQUFJLFVBQVUsR0FBVSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMxQyxJQUFJLFFBQVEsR0FBWSxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsd0RBQXdEO2dCQUMxSCxJQUFJLE1BQWUsQ0FBQztnQkFFcEIsUUFBUSxNQUFNLENBQUMsSUFBSSxFQUFFO29CQUNuQixLQUFLLFlBQVk7d0JBQ2YsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7d0JBQ25CLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7d0JBRTVCLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFOzRCQUM5QixjQUFjOzRCQUNkLElBQUksS0FBSyxHQUFZLElBQUksVUFBQSxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7NEJBQ2pJLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQzt5QkFDdEM7d0JBRUQsSUFBSSxZQUFZLEdBQWlCLENBQUMsV0FBdUIsRUFBUSxFQUFFOzRCQUNqRSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQzs0QkFDbEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQ3ZCLElBQUksV0FBVyxDQUFtQixXQUFXLENBQUMsSUFBSSxFQUFFO2dDQUNsRCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQUU7NkJBQ3ZFLENBQUMsQ0FDSCxDQUFDO3dCQUNKLENBQUMsQ0FBQzt3QkFFRixJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxDQUFDO3dCQUN4QixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksVUFBQSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQzt3QkFDdEUsTUFBTTtvQkFDUixLQUFLLFVBQVU7d0JBQ2IsSUFBSSxDQUFDLFNBQVMsRUFBRSxLQUFLLEVBQUUsQ0FBQzt3QkFFeEIsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7NEJBQzdCLHVCQUF1Qjs0QkFDdkIsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQzs0QkFDNUIsTUFBTTt5QkFDUDt3QkFFRCxJQUFJLFdBQVcsR0FBaUIsQ0FBQyxXQUF1QixFQUFRLEVBQUU7NEJBQ2hFLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUN2QixJQUFJLFdBQVcsQ0FBbUIsV0FBVyxDQUFDLEdBQUcsRUFBRTtnQ0FDakQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFFOzZCQUN2RSxDQUFDLENBQ0gsQ0FBQzt3QkFDSixDQUFDLENBQUM7d0JBRUYsMkVBQTJFO3dCQUMzRSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsTUFBTSxFQUFFOzRCQUM1QixJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDOzRCQUN6QiwwQkFBMEI7NEJBQzFCLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUN2QixJQUFJLFdBQVcsQ0FBbUIsV0FBVyxDQUFDLE1BQU0sRUFBRTtnQ0FDcEQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFFOzZCQUN2RSxDQUFDLENBQUMsQ0FBQzt5QkFDUDt3QkFDRCwrREFBK0Q7NkJBQzFELElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSzs0QkFDbEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLFVBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLEVBQUUsV0FBVyxDQUFDLENBQUM7d0JBRTNFLE1BQU07b0JBQ1IsS0FBSyxXQUFXO3dCQUNkLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO3dCQUNuQyxNQUFNLEdBQUcsVUFBQSxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dCQUN6RCxJQUFJLENBQUMsS0FBSyxLQUFLLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyw0Q0FBNEM7d0JBQ2hHLElBQUksUUFBUSxHQUFZLFVBQUEsT0FBTyxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO3dCQUNuRSxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FDdkIsSUFBSSxXQUFXLENBQW1CLFdBQVcsQ0FBQyxJQUFJLEVBQUU7NEJBQ2xELE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUU7eUJBQzNHLENBQUMsQ0FBQyxDQUFDO3dCQUNOLG9FQUFvRTt3QkFDcEUsTUFBTSxHQUFHLFVBQUEsT0FBTyxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO3dCQUNyRCxJQUFJLE1BQU0sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRTs0QkFDdkMsSUFBSSxRQUFRLEdBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQ0FDL0QsVUFBQSxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQ0FDbEMsVUFBQSxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7NEJBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUN2QixJQUFJLFdBQVcsQ0FBbUIsV0FBVyxDQUFDLEtBQUssRUFBRTtnQ0FDbkQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFOzZCQUMvSCxDQUFDLENBQUMsQ0FBQzs0QkFDTixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQzt5QkFDMUI7d0JBQ0Qsd0JBQXdCO3dCQUN4QixNQUFNO29CQUNSO3dCQUNFLE1BQU07aUJBQ1Q7Z0JBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0MsQ0FBQyxDQUFBO1lBRU8sZ0JBQVcsR0FBRyxDQUFDLE1BQWtCLEVBQUUsU0FBa0IsRUFBUSxFQUFFO2dCQUNyRSxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxJQUFJLENBQUM7b0JBQzVCLE9BQU87Z0JBRVQsSUFBSSxDQUFDLEdBQWMsTUFBTSxDQUFDLE9BQU8sQ0FBQztnQkFDbEMsSUFBSSxLQUFLLEdBQVksSUFBSSxVQUFBLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7Z0JBQzNGLElBQUksYUFBYSxHQUFXLEtBQUssQ0FBQyxTQUFTLENBQUM7Z0JBQzVDLElBQUksVUFBVSxHQUFXLGFBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO2dCQUM1RCxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWM7b0JBQzVDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUN2QixJQUFJLFdBQVcsQ0FBbUIsV0FBVyxDQUFDLEtBQUssRUFBRTt3QkFDbkQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRTtxQkFDOUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ1IsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7WUFDckMsQ0FBQyxDQUFBO1lBaElDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDO1lBQ3RCLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDO1lBQzVCLElBQUksQ0FBQyxXQUFXLEdBQUcsWUFBWSxDQUFDO1lBQ2hDLElBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO1lBQzlCLElBQUksQ0FBQyxRQUFRLEdBQUcsVUFBVSxDQUFDO1lBQzNCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksUUFBUSxDQUFDLEdBQVk7WUFDMUIsSUFBSSxHQUFHLEVBQUU7Z0JBQ1AsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLEVBQWlCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDekUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQWlCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDdkUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQWlCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDeEUsT0FBTzthQUNSO1lBRUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxZQUFZLEVBQWlCLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM1RSxJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLFVBQVUsRUFBaUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzFFLElBQUksQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsV0FBVyxFQUFpQixJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDN0UsQ0FBQztRQTRHTyxZQUFZLENBQUMsU0FBa0I7WUFDckMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUMsQ0FBQztRQUVPLG1CQUFtQixDQUFDLFFBQW1CO1lBQzdDLElBQUksT0FBTyxHQUFZLFVBQUEsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3RDLEtBQUssSUFBSSxLQUFLLElBQUksUUFBUSxFQUFFO2dCQUMxQixPQUFPLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUM7Z0JBQzNCLE9BQU8sQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQzthQUM1QjtZQUNELE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNuQyxPQUFPLE9BQU8sQ0FBQztRQUNqQixDQUFDO0tBQ0Y7SUFqS1ksOEJBQW9CLHVCQWlLaEMsQ0FBQTtBQUNILENBQUMsRUF2TVMsU0FBUyxLQUFULFNBQVMsUUF1TWxCO0FDdk1ELElBQVUsU0FBUyxDQStDbEI7QUEvQ0QsV0FBVSxTQUFTO0lBQ2pCOzs7O09BSUc7SUFDSCxNQUFhLEtBQU0sU0FBUSxVQUFBLElBQUk7UUFHN0IsNkJBQTZCO1FBRTdCLFlBQVksUUFBZ0IsT0FBTztZQUNqQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7WUFMUixlQUFVLEdBQVcsU0FBUyxDQUFDO1lBQy9CLFNBQUksR0FBVyxPQUFPLENBQUM7WUF1QnRCLGNBQVMsR0FBRyxLQUFLLEVBQUUsTUFBbUIsRUFBRSxFQUFFO2dCQUVoRCxzRUFBc0U7Z0JBQ3RFLGtEQUFrRDtnQkFDbEQseUJBQXlCO2dCQUN6QiwyRUFBMkU7Z0JBQzNFLGNBQWM7Z0JBRWQsMkNBQTJDO2dCQUMzQyx3QkFBd0I7Z0JBQ3hCLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsZ0NBQWdDO2dCQUNsRixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksV0FBVyxtQ0FBcUIsRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEYsd0RBQXdEO2dCQUN4RCx5QkFBeUI7WUFDM0IsQ0FBQyxDQUFBO1lBaENDLElBQUksQ0FBQyxnQkFBZ0Isd0JBQWUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3RELENBQUM7UUFFTSxTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNyRCxhQUFhLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7WUFDM0MsYUFBYSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO1lBQy9CLE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELE1BQU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUN4QyxVQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNsRCxNQUFNLFVBQUEsT0FBTyxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLDhDQUEwQixDQUFDLENBQUM7WUFDeEQsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO0tBaUJGO0lBeENZLGVBQUssUUF3Q2pCLENBQUE7QUFDSCxDQUFDLEVBL0NTLFNBQVMsS0FBVCxTQUFTLFFBK0NsQjtBQy9DRCxJQUFVLFNBQVMsQ0FvTGxCO0FBcExELFdBQVUsU0FBUztJQUVqQixJQUFLLElBRUo7SUFGRCxXQUFLLElBQUk7UUFDUCxpQ0FBSyxDQUFBO1FBQUUsK0NBQVksQ0FBQTtRQUFFLDJDQUFVLENBQUE7UUFBRSx1Q0FBUSxDQUFBO0lBQzNDLENBQUMsRUFGSSxJQUFJLEtBQUosSUFBSSxRQUVSO0lBRUQ7Ozs7O09BS0c7SUFDSCxNQUFhLGFBQWMsU0FBUSxVQUFBLElBQUk7UUFPckM7Ozs7V0FJRztRQUNILFlBQW1CLE1BQWM7WUFDL0IsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBWnpCLHdEQUF3RDtZQUN4RCxzRkFBc0Y7WUFDdEYsY0FBUyxHQUFXLFNBQVMsQ0FBQztZQUM5QixVQUFLLEdBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUN6QiwyQkFBc0IsR0FBWSxJQUFJLENBQUM7WUErRnZDOztlQUVHO1lBQ0sscUJBQWdCLEdBQUcsS0FBSyxFQUFFLE1BQW1CLEVBQWlCLEVBQUU7Z0JBQ3RFLG9KQUFvSjtnQkFDcEosSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7b0JBQzVCLGdEQUFnRDtvQkFDaEQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO29CQUN4QixPQUFPO2lCQUNSO2dCQUVELElBQUksSUFBSSxDQUFDLFVBQVUsRUFBRTtvQkFDbkIsT0FBTztnQkFFVCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxpRUFBaUU7Z0JBQ2pHLE1BQU0sSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQVMsTUFBTSxDQUFDLGFBQWEsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDMUYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssMENBQXdCLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUMsQ0FBQTtZQUN4RSxDQUFDLENBQUE7WUFFRDs7ZUFFRztZQUNLLHdCQUFtQixHQUFHLEtBQUssRUFBRSxNQUFtQixFQUFpQixFQUFFO2dCQUN6RSxpSUFBaUk7Z0JBQ2pJLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO29CQUM1QixnREFBZ0Q7b0JBQ2hELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztvQkFDeEIsT0FBTztpQkFDUjtnQkFFRCxJQUFJLE1BQU0sQ0FBQyxNQUFNLFlBQVksYUFBYSxJQUFJLE1BQU0sQ0FBQyxNQUFNLElBQUksSUFBSSxFQUFFO29CQUNuRSxzREFBc0Q7b0JBQ3RELE9BQU87aUJBQ1I7Z0JBRUQsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO29CQUNuQixPQUFPO2dCQUVULElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLGlFQUFpRTtnQkFDN0YsTUFBTSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDcEYsQ0FBQyxDQUFBO1lBOUhDLElBQUksQ0FBQyxnQkFBZ0Isd0JBQWUsSUFBSSxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFDO1lBRXBFLElBQUksQ0FBQyxNQUFNO2dCQUNULE9BQU87WUFDVCxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7UUFDckMsQ0FBQztRQWxCRCx3REFBd0Q7UUFDeEQsc0ZBQXNGO1FBQ3RGLFNBQVMsQ0FBcUI7UUFDOUIsS0FBSyxDQUFvQjtRQUN6QixzQkFBc0IsQ0FBaUI7UUFnQnZDLElBQVcsUUFBUTtZQUNqQixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksS0FBSyxDQUFDLEtBQUs7WUFDaEIsSUFBSSxRQUFRLEdBQWlCLE1BQU0sVUFBQSxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN2RSxNQUFNLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDM0IsQ0FBQztRQUVELHVGQUF1RjtRQUNoRixTQUFTO1lBQ2QsSUFBSSxNQUFNLEdBQXlCLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBQSxvQkFBb0IsQ0FBQyxDQUFDO1lBQzNFLElBQUksYUFBYSxHQUFrQixFQUFFLENBQUM7WUFFdEMsSUFBSSxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsRUFBRSw2RkFBNkY7Z0JBQzFILGFBQWEsR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7O2dCQUVsQyxhQUFhLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDO1lBRTdDLGFBQWEsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztZQUMvQixhQUFhLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDeEMsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUMsUUFBUSxDQUFDO1lBQ3pDLElBQUksQ0FBQyxjQUFjLENBQUMscUJBQXFCLEVBQUU7Z0JBQ3pDLE1BQU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLGdEQUFnRDtnQkFDekYsSUFBSSxDQUFDLHNCQUFzQixHQUFHLEtBQUssQ0FBQzthQUNyQztZQUNELElBQUksS0FBSyxHQUFVLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUU5QixJQUFJLEtBQUs7Z0JBQ1AsaUdBQWlHO2dCQUNqRywyRUFBMkU7Z0JBQzNFLFNBQVM7Z0JBQ1QsTUFBTSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyx5QkFBeUI7WUFDeEQsSUFBSTtpQkFDQztnQkFDSCxVQUFBLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUM5QztZQUNELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVNLEtBQUssQ0FBQyxjQUFjO1lBQ3pCLElBQUksS0FBSyxHQUFVLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUM5QixJQUFJLElBQUksQ0FBQyxzQkFBc0I7Z0JBQzdCLE1BQU0sSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUV4Qix5RkFBeUY7WUFDekYsS0FBSyxDQUFDLGdCQUFnQixtQ0FBcUIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDbEUsdUhBQXVIO1FBQ3pILENBQUM7UUFFRDs7V0FFRztRQUNJLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBYTtZQUM1Qiw0SEFBNEg7WUFDNUgsSUFBSSxhQUFhLEdBQWtCLFVBQUEsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNoRSx3Q0FBd0M7WUFDeEMsS0FBSyxJQUFJLElBQUksSUFBSSxhQUFhLEVBQUU7Z0JBQzlCLE1BQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDNUMsTUFBTTthQUNQO1lBQ0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO1lBQ25DLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLDhDQUEwQixDQUFDLENBQUM7UUFDMUQsQ0FBQztRQUVEOztXQUVHO1FBQ0ksR0FBRztZQUNSLE9BQWMsVUFBQSxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNsRCxDQUFDO1FBNENPLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBbUIsRUFBRSxPQUFhLEVBQUUsWUFBa0IsRUFBRSxLQUFhO1lBQ2pHLDBEQUEwRDtZQUMxRCxLQUFLLElBQUksSUFBSSxJQUFJLEtBQUs7Z0JBQ3BCLElBQUksSUFBSSxZQUFZLGFBQWE7b0JBQy9CLElBQUksSUFBSSxJQUFJLElBQUk7d0JBQUUsTUFBTTt5QkFDbkI7d0JBQ0gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO3dCQUNuRCxPQUFPO3FCQUNSO1lBRUwsSUFBSSxLQUFLLEdBQVcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMzQyxLQUFLLElBQUksQ0FBQyxHQUFXLEtBQUssR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDM0MsSUFBSSxVQUFVLEdBQVcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHNEQUFzRDtnQkFDekgsWUFBWSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQywyQ0FBMkM7Z0JBQzdGLHNEQUFzRDthQUN2RDtZQUNELElBQUksU0FBUyxHQUFjLFlBQVksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDMUYsSUFBSSxTQUFTO2dCQUNYLE1BQU0sU0FBUyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xELENBQUM7UUFFTyxVQUFVO1lBQ2hCLElBQUksU0FBUyxHQUF5QixJQUFJLENBQUMsWUFBWSxDQUFDLFVBQUEsb0JBQW9CLENBQUMsQ0FBQztZQUM5RSxPQUFPLENBQUMsU0FBUyxJQUFJLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMzQyxDQUFDO0tBQ0Y7SUF2S1ksdUJBQWEsZ0JBdUt6QixDQUFBO0FBQ0gsQ0FBQyxFQXBMUyxTQUFTLEtBQVQsU0FBUyxRQW9MbEI7QUNwTEQsSUFBVSxTQUFTLENBeUJsQjtBQXpCRCxXQUFVLFNBQVM7SUFDakI7Ozs7T0FJRztJQUNILE1BQWEsSUFBSyxTQUFRLFVBQUEsT0FBTztRQUl4QixhQUFhLENBQUMsT0FBd0IsRUFBRSxZQUErQixJQUF5QyxDQUFDO1FBRXhILGtCQUFrQjtRQUNYLFNBQVM7WUFDZCxPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUM7UUFDTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVTLGFBQWEsQ0FBQyxRQUFpQjtZQUN2QyxPQUFPLFFBQVEsQ0FBQyxVQUFVLENBQUM7UUFDNUIsQ0FBQztLQUVIO0lBbEJZLGNBQUksT0FrQmhCLENBQUE7QUFDSCxDQUFDLEVBekJTLFNBQVMsS0FBVCxTQUFTLFFBeUJsQjtBQ3pCRCxJQUFVLFNBQVMsQ0F5QmxCO0FBekJELFdBQVUsU0FBUztJQUNqQjs7T0FFRztJQUVILElBQWEsV0FBVyxHQUF4QixNQUFhLFdBQVksU0FBUSxVQUFBLElBQUk7UUFFbkMsWUFBWSxTQUFnQixJQUFJLFVBQUEsS0FBSyxFQUFFO1lBQ3JDLEtBQUssRUFBRSxDQUFDO1lBQ1IsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7UUFDdEIsQ0FBQztRQUVELGtCQUFrQjtRQUNYLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0IsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3JELGFBQWEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUM3QyxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBQ00sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxNQUFNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDeEMsTUFBTSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbkQsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO0tBRUYsQ0FBQTtJQW5CWSxXQUFXO1FBRHZCLFVBQUEsa0JBQWtCLENBQUMsUUFBUTtPQUNmLFdBQVcsQ0FtQnZCO0lBbkJZLHFCQUFXLGNBbUJ2QixDQUFBO0FBQ0gsQ0FBQyxFQXpCUyxTQUFTLEtBQVQsU0FBUyxRQXlCbEI7QUN6QkQsSUFBVSxTQUFTLENBK0JsQjtBQS9CRCxXQUFVLFNBQVM7SUFDakI7O09BRUc7SUFFSCxJQUFhLGFBQWEsR0FBMUIsTUFBYSxhQUFjLFNBQVEsVUFBQSxXQUFXO1FBSTVDLFlBQVksU0FBZ0IsSUFBSSxVQUFBLEtBQUssRUFBRSxFQUFFLFdBQW1CLENBQUMsRUFBRSxZQUFvQixDQUFDO1lBQ2xGLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNkLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1FBQzVCLENBQUM7UUFFRCxrQkFBa0I7UUFDWCxTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNyRCxhQUFhLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDckMsYUFBYSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3ZDLE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUM7UUFDTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELE1BQU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUN4QyxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUM7WUFDdEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxjQUFjLENBQUMsUUFBUSxDQUFDO1lBQ3hDLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztLQUVGLENBQUE7SUF6QlksYUFBYTtRQUR6QixVQUFBLGtCQUFrQixDQUFDLFFBQVE7T0FDZixhQUFhLENBeUJ6QjtJQXpCWSx1QkFBYSxnQkF5QnpCLENBQUE7QUFDSCxDQUFDLEVBL0JTLFNBQVMsS0FBVCxTQUFTLFFBK0JsQjtBQy9CRCxJQUFVLFNBQVMsQ0EyQmxCO0FBM0JELFdBQVUsU0FBUztJQUNqQjs7T0FFRztJQUVILElBQWEsWUFBWSxHQUF6QixNQUFhLFlBQWEsU0FBUSxVQUFBLFdBQVc7UUFHM0MsWUFBWSxTQUFnQixJQUFJLFVBQUEsS0FBSyxFQUFFLEVBQUUsV0FBb0IsVUFBQSxjQUFjLENBQUMsT0FBTztZQUNqRixLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7WUFIVCxZQUFPLEdBQVksSUFBSSxDQUFDO1lBSTdCLElBQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDO1FBQzFCLENBQUM7UUFFRCxrQkFBa0I7UUFDWCxTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNyRCxhQUFhLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO1lBQ2xELE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUM7UUFDTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELE1BQU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUN4QyxJQUFJLGNBQWMsQ0FBQyxTQUFTO2dCQUMxQixJQUFJLENBQUMsT0FBTyxHQUFZLE1BQU0sVUFBQSxPQUFPLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM5RSxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7S0FFRixDQUFBO0lBckJZLFlBQVk7UUFEeEIsVUFBQSxrQkFBa0IsQ0FBQyxRQUFRO09BQ2YsWUFBWSxDQXFCeEI7SUFyQlksc0JBQVksZUFxQnhCLENBQUE7QUFDSCxDQUFDLEVBM0JTLFNBQVMsS0FBVCxTQUFTLFFBMkJsQjtBQzNCRCxzQ0FBc0M7QUFFdEMsSUFBVSxTQUFTLENBOEJsQjtBQWhDRCxzQ0FBc0M7QUFFdEMsV0FBVSxTQUFTO0lBQ2pCOztPQUVHO0lBRUgsSUFBYSxxQkFBcUIsR0FBbEMsTUFBYSxxQkFBc0IsU0FBUSxVQUFBLFlBQVk7UUFJckQsWUFBWSxTQUFnQixJQUFJLFVBQUEsS0FBSyxFQUFFLEVBQUUsV0FBb0IsVUFBQSxjQUFjLENBQUMsT0FBTyxFQUFFLFdBQW1CLENBQUMsRUFBRSxZQUFvQixDQUFDO1lBQzlILEtBQUssQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDeEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUM7WUFDeEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7UUFDNUIsQ0FBQztRQUVELGtCQUFrQjtRQUNYLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0IsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3JELGFBQWEsQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNyQyxhQUFhLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDdkMsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUNNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3hDLElBQUksQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQztZQUN0QyxJQUFJLENBQUMsUUFBUSxHQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUM7WUFDeEMsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO0tBRUYsQ0FBQTtJQXhCWSxxQkFBcUI7UUFEakMsVUFBQSxrQkFBa0IsQ0FBQyxRQUFRO09BQ2YscUJBQXFCLENBd0JqQztJQXhCWSwrQkFBcUIsd0JBd0JqQyxDQUFBO0FBQ0gsQ0FBQyxFQTlCUyxTQUFTLEtBQVQsU0FBUyxRQThCbEI7QUNoQ0QsSUFBVSxTQUFTLENBMkhsQjtBQTNIRCxXQUFVLFNBQVM7SUFDakI7O09BRUc7SUFDSCxNQUFhLEtBQU0sU0FBUSxVQUFBLE9BQU87UUFTaEMsWUFBWSxLQUFhLENBQUMsRUFBRSxLQUFhLENBQUMsRUFBRSxLQUFhLENBQUMsRUFBRSxLQUFhLENBQUM7WUFDeEUsS0FBSyxFQUFFLENBQUM7WUFDUixJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ25DLENBQUM7UUFFTSxNQUFNLENBQUMsb0JBQW9CLENBQUMsUUFBZ0I7WUFDakQsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO1lBQ2hDLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDOUIsQ0FBQztRQUVNLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBZ0IsRUFBRSxTQUFpQixDQUFDO1lBQ3BELElBQUksR0FBRyxHQUFXLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN2RCxJQUFJLEtBQUssR0FBVSxJQUFJLEtBQUssQ0FDMUIsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFDcEMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFDcEMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFDcEMsTUFBTSxDQUFDLENBQUM7WUFDVixPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFHTSxNQUFNLENBQUMsUUFBUSxDQUFDLE9BQWMsRUFBRSxPQUFjO1lBQ25ELE9BQU8sSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0csQ0FBQztRQUVNLFdBQVcsQ0FBQyxFQUFVLEVBQUUsRUFBVSxFQUFFLEVBQVUsRUFBRSxFQUFVO1lBQy9ELElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN0QyxJQUFJLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDdEMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN4QyxDQUFDO1FBRU0sWUFBWSxDQUFDLEVBQVUsRUFBRSxFQUFVLEVBQUUsRUFBVSxFQUFFLEVBQVU7WUFDaEUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxFQUFFLEVBQUUsR0FBRyxHQUFHLEVBQUUsRUFBRSxHQUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDM0QsQ0FBQztRQUVNLFFBQVE7WUFDYixPQUFPLElBQUksWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUQsQ0FBQztRQUVNLGdCQUFnQixDQUFDLE1BQW9CO1lBQzFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDL0QsQ0FBQztRQUVNLGlCQUFpQixDQUFDLE1BQXlCO1lBQ2hELElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEUsQ0FBQztRQUVNLGlCQUFpQjtZQUN0QixPQUFPLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekYsQ0FBQztRQUVNLEdBQUcsQ0FBQyxNQUFhO1lBQ3RCLElBQUksQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbkIsSUFBSSxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ25CLElBQUksQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNyQixDQUFDO1FBRU0sTUFBTTtZQUNYLElBQUksS0FBSyxHQUFzQixJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztZQUN4RCxPQUFPLFFBQVEsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7UUFDcEUsQ0FBQztRQUVNLE1BQU07WUFDWCxJQUFJLEtBQUssR0FBc0IsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDeEQsSUFBSSxHQUFHLEdBQVcsRUFBRSxDQUFDO1lBQ3JCLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSztnQkFDcEIsR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUM1QyxPQUFPLEdBQUcsQ0FBQztRQUNiLENBQUM7UUFFTSxNQUFNLENBQUMsSUFBWTtZQUN4QixJQUFJLEtBQUssR0FBc0IsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7WUFDeEQsSUFBSSxPQUFPLEdBQVcsQ0FBQyxDQUFDO1lBQ3hCLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSztnQkFDcEIsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUM1RCxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDaEMsQ0FBQztRQUVNLElBQUksQ0FBQyxNQUFhO1lBQ3ZCLElBQUksQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNsQixJQUFJLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDbEIsSUFBSSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNwQixDQUFDO1FBRU0sUUFBUTtZQUNiLE9BQU8sT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBQ2hILENBQUM7UUFFRCxrQkFBa0I7UUFDWCxTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekQsZ0hBQWdIO1lBQ2hILGFBQWEsQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFLEdBQUcsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN4RixPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxJQUFJLE9BQU8sQ0FBQyxjQUFjLENBQUMsSUFBSSxRQUFRLEVBQUU7Z0JBQ3ZDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQWtCLGNBQWMsQ0FBQyxDQUFDO2FBQ2hGOztnQkFFQyxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzlCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVTLGFBQWEsQ0FBQyxRQUFpQixJQUFnQixDQUFDOztJQXBIMUQsc0VBQXNFO0lBQ3ZELFVBQUksR0FBNkIsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7SUFGdkYsZUFBSyxRQXNIakIsQ0FBQTtBQUNILENBQUMsRUEzSFMsU0FBUyxLQUFULFNBQVMsUUEySGxCO0FDM0hELElBQVUsU0FBUyxDQXNHbEI7QUF0R0QsV0FBVSxTQUFTO0lBQ2pCOzs7T0FHRztJQUNILE1BQWEsUUFBUyxTQUFRLFVBQUEsT0FBTztRQU9uQyxZQUFtQixLQUFhLEVBQUUsT0FBdUIsRUFBRSxLQUFZO1lBQ3JFLEtBQUssRUFBRSxDQUFDO1lBSkgsZUFBVSxHQUFXLFNBQVMsQ0FBQztZQUtwQyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixJQUFJLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQztZQUMxQixJQUFJLE9BQU8sRUFBRTtnQkFDWCxJQUFJLEtBQUs7b0JBQ1AsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7O29CQUVsQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyx3QkFBd0IsRUFBRSxDQUFDO2FBQy9DO1lBQ0QsVUFBQSxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFqQkQsd0NBQXdDO1FBQ3hDLEtBQUssQ0FBTztRQWtCWjs7V0FFRztRQUNGLElBQVcsSUFBSTtZQUNkLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNwQixDQUFDO1FBQ0Q7O1dBRUc7UUFDSCxJQUFXLElBQUksQ0FBQyxLQUFXO1lBQ3pCLElBQUksS0FBSyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRTtnQkFDaEQsSUFBSSxLQUFLLFlBQVksSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUU7b0JBQzVDLFVBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDOztvQkFFNUQsTUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLDZCQUE2QixDQUFDLENBQUMsQ0FBQztZQUNyRCxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNyQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSx3QkFBd0I7WUFDN0IsSUFBSSxJQUFJLEdBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ25ELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSSxTQUFTLENBQUMsV0FBMEI7WUFDekMsSUFBSSxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7WUFDOUIsSUFBSSxJQUFJLEdBQVMsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7WUFDakQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7WUFDckMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbkIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksU0FBUztZQUNkLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUN6QixDQUFDO1FBR0Qsa0JBQWtCO1FBQ2xCLDhLQUE4SztRQUN2SyxTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCO2dCQUNqQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7Z0JBQ2YsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO2dCQUMzQixNQUFNLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJO2dCQUM1QixJQUFJLEVBQUUsVUFBQSxVQUFVLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7YUFDdkMsQ0FBQztZQUNGLE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUM7UUFDTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELElBQUksQ0FBQyxJQUFJLEdBQUcsY0FBYyxDQUFDLElBQUksQ0FBQztZQUNoQyxVQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNsRCxJQUFJLENBQUMsVUFBVSxHQUFhLFNBQVUsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDOUQsSUFBSSxJQUFJLEdBQWUsTUFBTSxVQUFBLFVBQVUsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3pFLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1lBQ2pCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVNLFVBQVU7WUFDZixJQUFJLE9BQU8sR0FBWSxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzlDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUN0QyxPQUFPLE9BQU8sQ0FBQztRQUNqQixDQUFDO1FBRVMsYUFBYSxDQUFDLFFBQWlCO1lBQ3ZDLDhCQUE4QjtRQUNoQyxDQUFDO0tBRUY7SUFoR1ksa0JBQVEsV0FnR3BCLENBQUE7QUFDSCxDQUFDLEVBdEdTLFNBQVMsS0FBVCxTQUFTLFFBc0dsQjtBQ3RHRCxJQUFVLFNBQVMsQ0FtQmxCO0FBbkJELFdBQVUsU0FBUztJQUNqQjs7T0FFRztJQUNILE1BQXNCLElBQUk7UUFNeEI7O1dBRUc7UUFDSSxNQUFNLENBQUMsS0FBSyxDQUFJLE1BQVMsRUFBRSxJQUFPLEVBQUUsSUFBTyxFQUFFLGFBQWtELENBQUMsT0FBVSxFQUFFLE9BQVUsRUFBRSxFQUFFLEdBQUcsT0FBTyxPQUFPLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUM3SixJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDO2dCQUFFLE9BQU8sSUFBSSxDQUFDO1lBQzFDLElBQUksVUFBVSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUM7Z0JBQUUsT0FBTyxJQUFJLENBQUM7WUFDMUMsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQzs7SUFaRCx5RUFBeUU7SUFDbEQsWUFBTyxHQUFXLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDO0lBQ3ZELHlFQUF5RTtJQUNsRCxZQUFPLEdBQVcsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7SUFKdEMsY0FBSSxPQWN6QixDQUFBO0FBQ0gsQ0FBQyxFQW5CUyxTQUFTLEtBQVQsU0FBUyxRQW1CbEI7QUNuQkQsSUFBVSxTQUFTLENBb0psQjtBQXBKRCxXQUFVLFNBQVM7SUFRakI7Ozs7O09BS0c7SUFDSCxNQUFzQixPQUFRLFNBQVEsVUFBQSxPQUFPO1FBb0JqQyxhQUFhLENBQUMsUUFBaUIsSUFBZ0IsQ0FBQztLQUMzRDtJQXJCcUIsaUJBQU8sVUFxQjVCLENBQUE7SUFFRDs7O09BR0c7SUFDSCxNQUFhLFlBQWEsU0FBUSxPQUFPO1FBSXZDLFlBQW1CLFNBQWlCLEdBQUcsRUFBRSxVQUFrQixHQUFHO1lBQzVELEtBQUssRUFBRSxDQUFDO1lBSkgsVUFBSyxHQUFXLEdBQUcsQ0FBQztZQUNwQixXQUFNLEdBQVcsR0FBRyxDQUFDO1lBSTFCLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFFTSxPQUFPLENBQUMsTUFBYyxFQUFFLE9BQWU7WUFDNUMsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7WUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7UUFDeEIsQ0FBQztRQUVNLFFBQVEsQ0FBQyxhQUFzQixFQUFFLFVBQXFCO1lBQzNELElBQUksTUFBTSxHQUFZLElBQUksVUFBQSxPQUFPLENBQy9CLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsS0FBSyxFQUNoRSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FDbkUsQ0FBQztZQUNGLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFTSxlQUFlLENBQUMsTUFBZSxFQUFFLEtBQWdCO1lBQ3RELElBQUksTUFBTSxHQUFZLElBQUksVUFBQSxPQUFPLENBQy9CLE1BQU0sQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxDQUFDLEVBQzdDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQ2hELENBQUM7WUFDRixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRU0sT0FBTyxDQUFDLFVBQXFCO1lBQ2xDLE9BQU8sVUFBQSxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEQsQ0FBQztLQUNGO0lBakNZLHNCQUFZLGVBaUN4QixDQUFBO0lBQ0Q7OztPQUdHO0lBQ0gsTUFBYSxhQUFjLFNBQVEsT0FBTztRQUExQzs7WUFDUyxjQUFTLEdBQVcsR0FBRyxDQUFDO1lBQ3hCLGVBQVUsR0FBVyxHQUFHLENBQUM7UUEwQmxDLENBQUM7UUF4QlEsUUFBUSxDQUFDLFVBQWtCLEVBQUUsV0FBbUI7WUFDckQsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUM7WUFDNUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7UUFDaEMsQ0FBQztRQUVNLFFBQVEsQ0FBQyxhQUFzQixFQUFFLFVBQXFCO1lBQzNELElBQUksTUFBTSxHQUFZLElBQUksVUFBQSxPQUFPLENBQy9CLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFDakQsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUNuRCxDQUFDO1lBQ0YsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUVNLGVBQWUsQ0FBQyxNQUFlLEVBQUUsS0FBZ0I7WUFDdEQsSUFBSSxNQUFNLEdBQVksSUFBSSxVQUFBLE9BQU8sQ0FDL0IsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDLEVBQ25DLE1BQU0sQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUNyQyxDQUFDO1lBQ0YsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUVNLE9BQU8sQ0FBQyxVQUFxQjtZQUNsQyxPQUFPLFVBQUEsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyRyxDQUFDO0tBQ0Y7SUE1QlksdUJBQWEsZ0JBNEJ6QixDQUFBO0lBRUQ7OztPQUdHO0lBQ0gsTUFBYSxjQUFlLFNBQVEsT0FBTztRQUEzQzs7WUFDUyxXQUFNLEdBQVcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDMUQsWUFBTyxHQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDO1FBZ0NwRSxDQUFDO1FBOUJRLFFBQVEsQ0FBQyxhQUFzQixFQUFFLFVBQXFCO1lBQzNELElBQUksTUFBTSxHQUFZLElBQUksVUFBQSxPQUFPLENBQy9CLGFBQWEsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLEtBQUssRUFDekUsYUFBYSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUN6RSxDQUFDO1lBQ0YsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUNNLGVBQWUsQ0FBQyxNQUFlLEVBQUUsS0FBZ0I7WUFDdEQsSUFBSSxNQUFNLEdBQVksSUFBSSxVQUFBLE9BQU8sQ0FDL0IsTUFBTSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxFQUM3RCxNQUFNLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQzdELENBQUM7WUFDRixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRU0sT0FBTyxDQUFDLFVBQXFCO1lBQ2xDLElBQUksQ0FBQyxVQUFVO2dCQUNiLE9BQU8sSUFBSSxDQUFDO1lBRWQsSUFBSSxJQUFJLEdBQVcsVUFBVSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxVQUFVLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQzFGLElBQUksSUFBSSxHQUFXLFVBQVUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsVUFBVSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztZQUN6RixJQUFJLElBQUksR0FBVyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsVUFBVSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztZQUNsRyxJQUFJLElBQUksR0FBVyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztZQUVyRyxPQUFPLFVBQUEsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksR0FBRyxJQUFJLEVBQUUsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQzdELENBQUM7UUFFTSxVQUFVO1lBQ2YsT0FBTyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDeEQsQ0FBQztLQUNGO0lBbENZLHdCQUFjLGlCQWtDMUIsQ0FBQTtBQUNILENBQUMsRUFwSlMsU0FBUyxLQUFULFNBQVMsUUFvSmxCO0FDcEpELElBQVUsU0FBUyxDQW1DbEI7QUFuQ0QsV0FBVSxTQUFTO0lBQ2pCOzs7Ozs7T0FNRztJQUNILE1BQWEsSUFBSTtRQUlmLFlBQVksU0FBaUIsQ0FBQyxFQUFFLGFBQXFCLENBQUM7WUFIL0MsY0FBUyxHQUFXLENBQUMsQ0FBQztZQUN0QixVQUFLLEdBQVcsQ0FBQyxDQUFDO1lBR3ZCLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQy9CLENBQUM7UUFFRDs7V0FFRztRQUNJLEdBQUcsQ0FBQyxTQUFpQixDQUFDLEVBQUUsYUFBcUIsQ0FBQztZQUNuRCxJQUFJLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQztZQUM1QixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztRQUN0QixDQUFDO1FBRU0sT0FBTztZQUNaLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNiLENBQUM7UUFFRDs7V0FFRztRQUNJLFFBQVE7WUFDYixPQUFPLFVBQVUsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQzdGLENBQUM7S0FDRjtJQTFCWSxjQUFJLE9BMEJoQixDQUFBO0FBQ0gsQ0FBQyxFQW5DUyxTQUFTLEtBQVQsU0FBUyxRQW1DbEI7QUNuQ0QsSUFBVSxTQUFTLENBc0NsQjtBQXRDRCxXQUFVLFNBQVM7SUFDakI7Ozs7Ozs7T0FPRztJQUNILE1BQWEsSUFBSTtRQUtmLFlBQVksYUFBcUIsQ0FBQyxFQUFFLFlBQW9CLENBQUMsRUFBRSxhQUFxQixDQUFDO1lBSjFFLGNBQVMsR0FBVyxDQUFDLENBQUM7WUFDdEIsYUFBUSxHQUFXLENBQUMsQ0FBQztZQUNyQixjQUFTLEdBQVcsQ0FBQyxDQUFDO1lBRzNCLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxHQUFHLENBQUMsYUFBcUIsQ0FBQyxFQUFFLFlBQW9CLENBQUMsRUFBRSxhQUFxQixDQUFDO1lBQzlFLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDO1lBQzVCLElBQUksQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1lBQzFCLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDO1FBQzlCLENBQUM7UUFFTSxPQUFPO1lBQ1osSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ2IsQ0FBQztRQUVEOztXQUVHO1FBQ0ksUUFBUTtZQUNiLE9BQU8sY0FBYyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsZUFBZSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDL0ksQ0FBQztLQUNGO0lBNUJZLGNBQUksT0E0QmhCLENBQUE7QUFDSCxDQUFDLEVBdENTLFNBQVMsS0FBVCxTQUFTLFFBc0NsQjtBQ3RDRCxJQUFVLFNBQVMsQ0E2RmxCO0FBN0ZELFdBQVUsU0FBUztJQUNqQixzREFBc0Q7SUFDdEQsNENBQTRDO0lBQzVDLFNBQWdCLElBQUk7UUFDbEIsSUFBSSxDQUFDLEdBQVcsVUFBVSxDQUFDO1FBRTNCLElBQUksSUFBSSxHQUFhLFVBQVUsSUFBcUI7WUFDbEQsSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUN2QixLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDNUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3hCLElBQUksQ0FBQyxHQUFXLG1CQUFtQixHQUFHLENBQUMsQ0FBQztnQkFDeEMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ1osQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDUCxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNQLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNaLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ1AsQ0FBQyxJQUFJLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxPQUFPO2FBQzlCO1lBQ0QsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxzQkFBc0IsQ0FBQyxDQUFDLFFBQVE7UUFDckQsQ0FBQyxDQUFDO1FBRUYsNkJBQTZCO1FBQzdCLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQXBCZSxjQUFJLE9Bb0JuQixDQUFBO0lBR0Qsc0RBQXNEO0lBQ3RELFNBQWdCLEtBQUs7UUFDbkIsNEJBQTRCO1FBQzVCLCtEQUErRDtRQUMvRCxJQUFJLElBQUksR0FBYSxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDM0QsSUFBSSxFQUFFLEdBQVcsQ0FBQyxFQUNoQixFQUFFLEdBQVcsRUFBRSxFQUNmLEVBQUUsR0FBVyxHQUFHLEVBQ2hCLEVBQUUsR0FBVyxHQUFHLENBQUM7UUFFbkIsSUFBSSxDQUFDLEdBQWEsRUFBRSxDQUFDO1FBRXJCLElBQUksSUFBSSxHQUFhLElBQUksRUFBRSxDQUFDO1FBQzVCLElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDckIsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLENBQUM7U0FDdEI7UUFDRCxLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3BDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDakIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxtQkFBbUIsQ0FBQyxDQUFDLFFBQVE7WUFDakQsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUNaLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDWDtTQUNGO1FBQ0QsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDNUMsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDcEMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxtQkFBbUIsQ0FBQyxDQUFDLFFBQVE7Z0JBQ3JELElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRTtvQkFDWixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUNYO2FBQ0Y7U0FDRjtRQUNELElBQUksR0FBRyxJQUFJLENBQUM7UUFFWixJQUFJLE1BQU0sR0FBYTtZQUNyQixJQUFJLENBQVMsQ0FBQztZQUVkLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7WUFDcEIsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztZQUNwQixFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO1lBQ3BCLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7WUFFcEIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDbEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUNULENBQUMsSUFBSSxDQUFDLENBQUM7YUFDUjtZQUNELENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDWCxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ1QsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNSO1lBQ0QsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNYLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDVCxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ1I7WUFFRCxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbkIsQ0FBQyxDQUFDO1FBRUYsZ0NBQWdDO1FBQ2hDLGlEQUFpRDtRQUNqRCxLQUFLO1FBQ0wsMkJBQTJCO1FBQzNCLGdDQUFnQztRQUNoQyxzQkFBc0I7UUFFdEIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQWpFZSxlQUFLLFFBaUVwQixDQUFBO0FBQ0gsQ0FBQyxFQTdGUyxTQUFTLEtBQVQsU0FBUyxRQTZGbEI7QUM3RkQsSUFBVSxTQUFTLENBd2NsQjtBQXhjRCxXQUFVLFNBQVM7SUFXakI7OztPQUdHO0lBQ0gsTUFBYSxTQUFVLFNBQVEsVUFBQSxPQUFPO1FBS3BDO1lBQ0UsS0FBSyxFQUFFLENBQUM7WUFMRixTQUFJLEdBQWlCLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsMEJBQTBCO1lBQ3BFLFlBQU8sR0FBWSxJQUFJLENBQUMsQ0FBQyw2SEFBNkg7WUFLNUosSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQ2YsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3BCLENBQUM7UUFHRCx3Q0FBd0M7UUFDakMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFjLEVBQUUsT0FBZTtZQUN0RCxJQUFJLFNBQVMsR0FBYyxJQUFJLFNBQVMsQ0FBQztZQUN6QyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztnQkFDakIsQ0FBQyxHQUFHLE1BQU0sRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDaEIsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDO2dCQUNsQixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQzthQUNULENBQUMsQ0FBQztZQUNILE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFFTSxNQUFNLENBQUMsUUFBUTtZQUNwQixNQUFNLFNBQVMsR0FBYyxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDckQsT0FBTyxTQUFTLENBQUM7UUFDbkIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLFdBQVcsQ0FBQyxVQUFtQjtZQUMzQyxNQUFNLFNBQVMsR0FBYyxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDckQsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQ2pCLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7Z0JBQ1AsVUFBVSxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUM7YUFDOUIsQ0FBQyxDQUFDO1lBQ0gsT0FBTyxTQUFTLENBQUM7UUFDbkIsQ0FBQztRQUVEOzs7V0FHRztRQUNJLE1BQU0sQ0FBQyxRQUFRLENBQUMsZUFBdUI7WUFDNUMsTUFBTSxTQUFTLEdBQWMsVUFBQSxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3JELElBQUksY0FBYyxHQUFXLGVBQWUsR0FBRyxVQUFBLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDNUQsSUFBSSxHQUFHLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUMzQyxJQUFJLEdBQUcsR0FBVyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzNDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUNqQixHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7Z0JBQ1gsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7Z0JBQ1osQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO2FBQ1IsQ0FBQyxDQUFDO1lBQ0gsT0FBTyxTQUFTLENBQUM7UUFDbkIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFnQjtZQUNwQyxNQUFNLFNBQVMsR0FBYyxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDckQsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQ2pCLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7Z0JBQ2YsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDZixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7YUFDUixDQUFDLENBQUM7WUFDSCxPQUFPLFNBQVMsQ0FBQztRQUNuQixDQUFDO1FBQ0QsWUFBWTtRQUdMLE1BQU0sQ0FBQyxjQUFjLENBQUMsUUFBbUIsRUFBRSxTQUFvQjtZQUNwRSxJQUFJLEdBQUcsR0FBVyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDM0MsSUFBSSxHQUFHLEdBQVcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzNDLElBQUksR0FBRyxHQUFXLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMzQyxJQUFJLEdBQUcsR0FBVyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDM0MsSUFBSSxHQUFHLEdBQVcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzNDLElBQUksR0FBRyxHQUFXLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMzQyxJQUFJLEdBQUcsR0FBVyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDM0MsSUFBSSxHQUFHLEdBQVcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzNDLElBQUksR0FBRyxHQUFXLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMzQyxJQUFJLEdBQUcsR0FBVyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBSSxHQUFHLEdBQVcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzVDLElBQUksR0FBRyxHQUFXLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM1QyxJQUFJLEdBQUcsR0FBVyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBSSxHQUFHLEdBQVcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzVDLElBQUksR0FBRyxHQUFXLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM1QyxJQUFJLEdBQUcsR0FBVyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDNUMsSUFBSSxHQUFHLEdBQVcsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzVDLElBQUksR0FBRyxHQUFXLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM1QyxJQUFJLFNBQVMsR0FBYyxJQUFJLFNBQVMsQ0FBQztZQUN6QyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztnQkFDakIsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUNqQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7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U0FBUyxDQUFDLENBQUM7WUFDckQsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxHQUFHLEdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDL0IsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQ2hCO2dCQUNFLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDN0MsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQzdDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDN0MsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQzdDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDN0MsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQzdDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDN0MsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQzdDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2dCQUM3QyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRztnQkFDN0MsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUc7Z0JBQzdDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHO2FBQzlDLENBQUMsQ0FBQztZQUNMLE9BQU8sU0FBUyxDQUFDO1FBQ25CLENBQUM7UUFFRDs7V0FFRztRQUNJLE1BQU0sQ0FBQyxTQUFTLENBQUMsSUFBZTtZQUNyQyxJQUFJLENBQUMsR0FBaUIsSUFBSSxDQUFDLElBQUksQ0FBQztZQUNoQyxJQUFJLE1BQU0sR0FBYyxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQ2QsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDdkIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDdkIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztnQkFDeEIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQzthQUN6QixDQUFDLENBQUM7WUFDSCxPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFlO1lBQ3JDLElBQUksQ0FBQyxHQUFpQixJQUFJLENBQUMsSUFBSSxDQUFDO1lBQ2hDLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksR0FBRyxHQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM3QixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM3QixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM3QixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBRTlCLElBQUksRUFBRSxHQUFXLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUM7Z0JBQ3JELENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztZQUV6QyxJQUFJLEVBQUUsR0FBVyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDO2dCQUNyRCxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFDekMsSUFBSSxFQUFFLEdBQVcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQztnQkFDdEQsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBQzFDLElBQUksRUFBRSxHQUFXLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUM7Z0JBQ3RELENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztZQUUxQyxJQUFJLENBQUMsR0FBVyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFFbEUsTUFBTSxTQUFTLEdBQWMsVUFBQSxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3JELFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO2dCQUNqQixDQUFDLEdBQUcsRUFBRTtnQkFDTixDQUFDLEdBQUcsRUFBRTtnQkFDTixDQUFDLEdBQUcsRUFBRTtnQkFDTixDQUFDLEdBQUcsRUFBRTtnQkFDTixDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUNyRixDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUNyRixDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUN2RixDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUN2RixDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUMzRixDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUMzRixDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUMzRixDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUMzRixDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUMzRixDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUMzRixDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFH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QUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDO2dCQUMzQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDO2dCQUMzQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDO2dCQUM1QyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRSxDQUFDO2FBQzdDLENBQUMsQ0FBQztZQUNILE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVNLE9BQU87WUFDWixJQUFJLENBQUMsR0FBaUIsSUFBSSxDQUFDLElBQUksQ0FBQztZQUNoQyxJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLEdBQUcsR0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUMvQixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM3QixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM3QixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksSUFBSSxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM3QixJQUFJLElBQUksR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzdCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUM5QixJQUFJLEtBQUssR0FBVyxHQUFHLEdBQUcsR0FBRyxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFXLEdBQUcsR0FBRyxHQUFHLENBQUM7WUFDOUIsSUFBSSxLQUFLLEdBQVcsR0FBRyxHQUFHLEdBQUcsQ0FBQztZQUU5QixJQUFJLEVBQUUsR0FBVyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDO2dCQUNyRCxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFFekMsSUFBSSxFQUFFLEdBQVcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQztnQkFDckQsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBQ3pDLElBQUksRUFBRSxHQUFXLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUM7Z0JBQ3RELENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztZQUMxQyxJQUFJLEVBQUUsR0FBVyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUN0RCxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUM7WUFFMUMsSUFBSSxDQUFDLEdBQVcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBRWxFLHlDQUF5QztZQUN6QyxNQUFNLE1BQU0sR0FBYyxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7Z0JBQ2QsQ0FBQyxHQUFHLEVBQUU7Z0JBQ04sQ0FBQyxHQUFHLEVBQUU7Z0JBQ04sQ0FBQyxHQUFHLEVBQUU7Z0JBQ04sQ0FBQyxHQUFHLEVBQUU7Z0JBQ04sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDckYsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDckYsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDdkYsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDdkYsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDM0YsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDM0YsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDM0YsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDM0YsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDM0YsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDM0YsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FBRyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUMsQ0FBQztnQkFDM0YsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEdBQUcsR0FB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RUFBRSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRXJHLHlEQUF5RDtnQkFDekQsTUFBTSxFQUFFLEdBQVcsR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO2dCQUNyRCxNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsQ0FBQztvQkFDdkIsQ0FBQyxDQUFDLEdBQUc7b0JBQ0wsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztnQkFDN0QsTUFBTSxFQUFFLEdBQVcsR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO2dCQUNyRCxNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsQ0FBQztvQkFDdkIsQ0FBQyxDQUFDLEdBQUc7b0JBQ0wsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztnQkFDN0QsTUFBTSxFQUFFLEdBQVcsR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO2dCQUNyRCxNQUFNLEVBQUUsR0FB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TUFBTSxDQUFDLE1BQU0sQ0FBQztnQkFDM0MsTUFBTSxFQUFFLEdBQVcsRUFBRSxHQUFHLEVBQUUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO2dCQUMzQyxNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsRUFBRSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQzNDLE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQywrQ0FBK0M7Z0JBQ2pHLE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxnREFBZ0Q7Z0JBQ2xHLE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2pELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyw4Q0FBOEM7Z0JBQ2pHLE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7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QUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2dCQUMxRSxNQUFNLEVBQUUsR0FBVyxHQUFHLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztnQkFDL0QsTUFBTSxFQUFFLEdBQVcsRUFBRSxHQUFHLENBQUM7b0JBQ3ZCLENBQUMsQ0FBQyxHQUFHO29CQUNMLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztnQkFDMUUsTUFBTSxFQUFFLEdBQVcsR0FBRyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7Z0JBQy9ELE1BQU0sRUFBRSxHQUFXLEVBQUUsR0FBRyxDQUFDO29CQUN2QixDQUFDLENBQUMsR0FBRztvQkFDTCxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBQzFFLE1BQU0sRUFBRSxHQUFXLEdBQUcsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO2dCQUMvRCxNQUFNLEVBQUUsR0FBVyxFQUFFLEdBQUcsQ0FBQztvQkFDdkIsQ0FBQyxDQUFDLEdBQUc7b0JBQ0wsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2dCQUMxRSxNQUFNLEVBQUUsR0FBVyxHQUFHLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztnQkFDL0QsTUFBTSxFQUFFLEdBQVcsRUFBRSxHQUFHLENBQUM7b0JBQ3ZCLENBQUMsQ0FBQyxHQUFHO29CQUNMLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztnQkFFMUUsd0RBQXdEO2dCQUN4RCxPQUFPLGlCQUFpQixHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ3RELENBQUMsQ0FBQztRQUNKLENBQUM7UUF2SUQsT0FBTyxDQUFvRTs7SUFGNUQsYUFBTSxHQUFXLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDL0MsZUFBUSxHQUFlLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMs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LEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLO1lBQ3ZDLElBQUksVUFBQSxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSztZQUN2QyxJQUFJLFVBQUEsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLFVBQUEsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUs7WUFDdkMsSUFBSSxVQUFBLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxVQUFBLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBRSxLQUFLO2FBQ3hDLENBQUM7WUFFRixJQUFJLENBQUMsS0FBSyxHQUFHO2dCQUNYLEdBQUcsSUFBSSxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUs7Z0JBQzVDLEdBQUcsSUFBSSxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUs7Z0JBQzVDLEdBQUcsSUFBSSxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUs7Z0JBQzVDLEdBQUcsSUFBSSxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUs7Z0JBQzVDLEdBQUcsSUFBSSxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUs7Z0JBQy9DLEdBQUcsSUFBSSxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFF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QUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDbEQsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLFVBQUEsSUFBSSxDQUNqQixJQUFJLENBQUMsUUFBUSxFQUNiLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQzNDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQzNDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQzNDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQzNDLEtBQUssQ0FDTixDQUFDLENBQUM7b0JBQ0gsS0FBSyxHQUFHLENBQUMsS0FBSyxJQUFJLFVBQUEsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFBLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFVBQUEsU0FBUyxDQUFDLElBQUksQ0FBQztpQkFDckU7Z0JBQ0QsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLG9EQUFvRDtvQkFDbEYsS0FBSyxHQUFHLENBQUMsS0FBSyxJQUFJLFVBQUEsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFBLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLFVB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QUFDO2dCQUN2RCxJQUFJLFVBQUEsT0FBTyxDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUU7b0JBQzNCLElBQUksSUFBSSxHQUFrQixZQUFZLENBQUMsT0FBTyxDQUFDO29CQUMvQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQy9CLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDL0IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUN4QyxZQUFZLENBQUMsVUFBVSxFQUFFLENBQUM7aUJBQzNCO1lBQ0gsQ0FBQyxDQUFDO1FBQ0osQ0FBQztRQUVEOztpRUFFeUQ7UUFDakQsa0JBQWtCO1lBQ3hCLE9BQU87Ozs7Ozs7Ozs7Ozs7Ozs7S0FnQlIsQ0FBQztRQUNGLENBQUM7UUFFRCxtTEFBbUw7UUFDM0ssb0JBQW9CO1lBQzFCLE9BQU87Ozs7Ozs7O0tBUVIsQ0FBQztRQUNGLENBQUM7S0FDRjtJQXZQWSwwQkFBZ0IsbUJBdVA1QixDQUFBO0FBRUgsQ0FBQyxFQWphUyxTQUFTLEtBQVQsU0FBUyxRQWlhbEI7QUNoYUQsSUFBVSxTQUFTLENBNE5sQjtBQTVORCxXQUFVLFNBQVM7SUFDakI7Ozs7Ozs7Ozs7Ozs7T0FhRztJQUNILE1BQWEsZ0JBQWlCLFNBQVEsVUFBQSxVQUFVO1FBb0I5QyxpSkFBaUo7UUFDakosWUFBWSxjQUFrQyxJQUFJLEVBQUUsWUFBZ0MsSUFBSSxFQUFFLFFBQWlCLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxlQUF3QixJQUFJLFVBQUEsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQzNLLEtBQUssQ0FBQyxXQUFXLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxZQUFZLENBQUMsQ0FBQztZQXBCckQsMkJBQXNCLEdBQVcsQ0FBQyxDQUFDO1lBQ25DLDZCQUF3QixHQUFXLENBQUMsQ0FBQztZQUVyQyxnQkFBVyxHQUFXLENBQUMsQ0FBQztZQUV4QixjQUFTLEdBQVcsR0FBRyxDQUFDO1lBQ3hCLGNBQVMsR0FBVyxDQUFDLENBQUM7WUFDdEIsaUJBQVksR0FBVyxDQUFDLENBQUM7WUFDekIsZ0JBQVcsR0FBVyxDQUFDLENBQUM7WUFNZCxXQUFNLEdBQWdDLElBQUksSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7WUF1SmxGLGdCQUFXLEdBQUcsR0FBWSxFQUFFO2dCQUMxQixJQUFJLE9BQU8sR0FBWTtvQkFDckIsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO29CQUMzQixxQkFBcUIsRUFBRSxJQUFJLENBQUMscUJBQXFCO29CQUNqRCx1QkFBdUIsRUFBRSxJQUFJLENBQUMsdUJBQXVCO29CQUNyRCxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7b0JBQ3ZCLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUTtvQkFDdkIsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO29CQUM3QixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7aUJBQzVCLENBQUM7Z0JBQ0YsT0FBTyxPQUFPLENBQUM7WUFDakIsQ0FBQyxDQUFBO1lBRUQsWUFBTyxHQUFHLENBQUMsUUFBaUIsRUFBUSxFQUFFO2dCQUNwQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDLFlBQVksRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsdUJBQXVCLEVBQUUseUJBQXlCLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO1lBQ3hLLENBQUMsQ0FBQTtRQS9KRCxDQUFDO1FBckJELHNCQUFzQixDQUFhO1FBQ25DLHdCQUF3QixDQUFhO1FBRXJDLFdBQVcsQ0FBYTtRQUV4QixTQUFTLENBQWU7UUFDeEIsU0FBUyxDQUFhO1FBQ3RCLFlBQVksQ0FBYTtRQUN6QixXQUFXLENBQWE7UUFFeEIsTUFBTSxDQUE0QjtRQUNsQyxrQkFBa0IsQ0FBb0I7UUFZdEMsb0VBQW9FO1FBRXBFOztXQUVHO1FBQ0gsSUFBVyxhQUFhLENBQUMsTUFBYztZQUNyQyxLQUFLLENBQUMsYUFBYSxHQUFHLE1BQU0sQ0FBQztZQUM3QixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLDRCQUE0QixFQUFFLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQztRQUMxRixDQUFDO1FBRUQ7O1VBRUU7UUFDRixJQUFXLGVBQWUsQ0FBQyxNQUFjO1lBQ3ZDLEtBQUssQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDO1lBQy9CLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsNEJBQTRCLEVBQUUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1FBQ3ZGLENBQUM7UUFFRDs7VUFFRTtRQUNGLElBQUkscUJBQXFCO1lBQ3ZCLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDO1FBQ3JDLENBQUM7UUFDRCxJQUFJLHFCQUFxQixDQUFDLE1BQWM7WUFDdEMsSUFBSSxDQUFDLHNCQUFzQixHQUFHLE1BQU0sQ0FBQztZQUNyQyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLHlCQUF5QixFQUFFLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQztRQUN2RixDQUFDO1FBRUQ7O1VBRUU7UUFDRixJQUFJLHVCQUF1QjtZQUN6QixPQUFPLElBQUksQ0FBQyx3QkFBd0IsQ0FBQztRQUN2QyxDQUFDO1FBQ0QsSUFBSSx1QkFBdUIsQ0FBQyxNQUFjO1lBQ3hDLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxNQUFNLENBQUM7WUFDdkMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyx5QkFBeUIsRUFBRSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7UUFDcEYsQ0FBQztRQUdEOztXQUVHO1FBQ0gsSUFBSSxRQUFRO1lBQ1YsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3hCLENBQUM7UUFDRCxJQUFJLFFBQVEsQ0FBQyxNQUFjO1lBQ3pCLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1lBQ3hCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsdUJBQXVCLEVBQUUsQ0FBQyxVQUFVLEdBQUcsTUFBTSxHQUFHLFVBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUNsRyxDQUFDO1FBQ0Q7O1dBRUc7UUFDSCxJQUFJLFFBQVE7WUFDVixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQztRQUNELElBQUksUUFBUSxDQUFDLE1BQWM7WUFDekIsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7WUFDeEIsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLFVBQVUsR0FBRyxNQUFNLEdBQUcsVUFBQSxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ2xHLENBQUM7UUFDRDs7V0FFRztRQUNILElBQUksVUFBVTtZQUNaLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUMxQixDQUFDO1FBQ0QsSUFBSSxVQUFVLENBQUMsTUFBYztZQUMzQixJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQztZQUMxQixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLHVCQUF1QixFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUNuRixDQUFDO1FBQ0Q7O1dBRUc7UUFDSCxJQUFJLFdBQVc7WUFDYixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDM0IsQ0FBQztRQUNELElBQUksV0FBVyxDQUFDLE1BQWM7WUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7WUFDM0IsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUM7UUFDcEYsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxRQUFRLENBQUMsTUFBYztZQUNoQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQztZQUN4QixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFDcEIsSUFBSSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsRUFBRSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7UUFDaEUsQ0FBQztRQUNEOztXQUVHO1FBQ0gsSUFBVyxRQUFRLENBQUMsTUFBYztZQUNoQyxLQUFLLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQztZQUN4QixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFDcEIsSUFBSSxDQUFDLEtBQUssQ0FBQywwQkFBMEIsRUFBRSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7UUFDaEUsQ0FBQztRQUVELElBQVcsVUFBVSxDQUFDLE1BQWM7WUFDbEMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUM7WUFDMUIsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQ3BCLElBQUksQ0FBQyxLQUFLLENBQUMsMEJBQTBCLEVBQUUsQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO1FBQ2hFLENBQUM7UUFDRDs7V0FFRztRQUNILElBQUksVUFBVTtZQUNaLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUMxQixDQUFDO1FBQ0QsSUFBSSxVQUFVLENBQUMsTUFBYztZQUMzQixJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQztZQUMxQixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLDBCQUEwQixFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUN0RixDQUFDO1FBRUQsWUFBWTtRQUVaLHdCQUF3QjtRQUNqQixTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN0RCxhQUFhLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDMUQsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUM3QixLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDMUQsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRU0sS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFpQjtZQUNuQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7WUFDckQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRU0sVUFBVTtZQUNmLElBQUksT0FBTyxHQUFZLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMxQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUMzQyxPQUFPLE9BQU8sQ0FBQztRQUNqQixDQUFDO1FBRUQsV0FBVyxDQVdWO1FBRUQsT0FBTyxDQUVOO1FBQ0QsWUFBWTtRQUVGLGNBQWM7WUFDdEIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsdUJBQXVCLEVBQUUsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7WUFFdEgsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyx1QkFBdUIsRUFBRSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUMxRixJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUN2RCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsVUFBQSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxRQUFRLEdBQUcsVUFBQSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDcEgsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7WUFFeEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1lBQ2hELEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUV2QixJQUFJLENBQUMsTUFBTSxDQUFDLHlCQUF5QixHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7WUFDMUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ2pELElBQUksQ0FBQyxNQUFNLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLHNCQUFzQixHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztZQUU3RCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNwRCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDeEIsQ0FBQzs7SUExTXNCLDBCQUFTLEdBQVcsVUFBQSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUR6RSwwQkFBZ0IsbUJBNE01QixDQUFBO0FBQ0gsQ0FBQyxFQTVOUyxTQUFTLEtBQVQsU0FBUyxRQTRObEI7QUM3TkQsSUFBVSxTQUFTLENBMEZsQjtBQTFGRCxXQUFVLFNBQVM7SUFDakI7Ozs7Ozs7Ozs7Ozs7O1NBY0s7SUFDTCxNQUFhLGNBQWUsU0FBUSxVQUFBLFVBQVU7UUFRNUMsNEdBQTRHO1FBRTVHLHdIQUF3SDtRQUN4SCxZQUFZLGNBQWtDLElBQUksRUFBRSxZQUFnQyxJQUFJLEVBQUUsUUFBaUIsSUFBSSxVQUFBLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLGVBQXdCLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDM0ssS0FBSyxDQUFDLFdBQVcsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBVHJELGdCQUFXLEdBQVcsQ0FBQyxDQUFDO1lBR2QsV0FBTSxHQUE4QixJQUFJLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1lBUTVFLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1lBQ25CLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDdEIsQ0FBQztRQWJELFdBQVcsQ0FBYTtRQWN4QixvRUFBb0U7UUFDcEU7O1dBRUc7UUFDSCxJQUFXLFVBQVU7WUFDbkIsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQzFCLENBQUM7UUFDRCxJQUFXLFVBQVUsQ0FBQyxNQUFjO1lBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO1lBQzFCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUN6RSxDQUFDO1FBQ0QsWUFBWTtRQUVaLHdCQUF3QjtRQUNqQixTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCO2dCQUNqQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVU7Z0JBQzNCLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFO2FBQzVDLENBQUM7WUFDRixPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxJQUFJLENBQUMsVUFBVSxHQUFHLGNBQWMsQ0FBQyxVQUFVLENBQUM7WUFDNUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzFELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVNLFVBQVU7WUFDZixJQUFJLE9BQU8sR0FBWSxLQUFLLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDMUMsT0FBTyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1lBQ3JDLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUM7UUFFTSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQWlCO1lBQ25DLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsS0FBSyxXQUFXO2dCQUM5QyxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUM7WUFDeEMsT0FBTyxRQUFRLENBQUMsVUFBVSxDQUFDO1lBQzNCLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDekIsQ0FBQztRQUNELFlBQVk7UUFFWiwyREFBMkQ7UUFDakQsY0FBYztZQUN0QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsa0VBQWtFO1lBQzNKLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBRXRELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDLGlHQUFpRztZQUNoSixLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7WUFFdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLG1FQUFtRTtZQUNqSCxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBRXBDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNsRCxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDeEIsQ0FBQzs7SUF2RXNCLHdCQUFTLEdBQVcsVUFBQSxLQUFLLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLENBQUM7SUFEdkUsd0JBQWMsaUJBeUUxQixDQUFBO0FBQ0gsQ0FBQyxFQTFGUyxTQUFTLEtBQVQsU0FBUyxRQTBGbEI7QUMxRkQsSUFBVSxTQUFTLENBaVNsQjtBQWpTRCxXQUFVLFNBQVM7SUFDakI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztRQXFCSTtJQUVKLE1BQWEsWUFBYSxTQUFRLFVBQUEsS0FBSztRQTRCckMsWUFBWSxjQUFrQyxJQUFJLEVBQUUsWUFBZ0MsSUFBSSxFQUFFLGFBQXNCLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxjQUF1QixJQUFJLFVBQUEsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsZUFBd0IsSUFBSSxVQUFBLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUM3TixLQUFLLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBekJoQyx3QkFBbUIsR0FBVyxDQUFDLENBQUM7WUFDaEMsMEJBQXFCLEdBQVcsQ0FBQyxDQUFDO1lBRWxDLHdCQUFtQixHQUFXLENBQUMsQ0FBQztZQUNoQywwQkFBcUIsR0FBVyxDQUFDLENBQUM7WUFFbEMsbUJBQWMsR0FBVyxHQUFHLENBQUM7WUFDN0IsbUJBQWMsR0FBVyxDQUFDLENBQUM7WUFDM0Isc0JBQWlCLEdBQVcsQ0FBQyxDQUFDO1lBQzlCLHFCQUFnQixHQUFXLENBQUMsQ0FBQztZQVM3QixtQkFBYyxHQUFXLENBQUMsQ0FBQztZQUMzQixvQkFBZSxHQUFXLENBQUMsQ0FBQztZQUdsQixXQUFNLEdBQTRCLElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFpTTFFLGdCQUFXLEdBQUcsR0FBWSxFQUFFO2dCQUMxQixJQUFJLE9BQU8sR0FBWTtvQkFDckIsYUFBYSxFQUFFLElBQUksQ0FBQyxjQUFjO29CQUNsQyxjQUFjLEVBQUUsSUFBSSxDQUFDLGVBQWU7b0JBQ3BDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxrQkFBa0I7b0JBQzNDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxvQkFBb0I7b0JBQy9DLGtCQUFrQixFQUFFLElBQUksQ0FBQyxrQkFBa0I7b0JBQzNDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxvQkFBb0I7b0JBQy9DLGFBQWEsRUFBRSxJQUFJLENBQUMsY0FBYztvQkFDbEMsYUFBYSxFQUFFLElBQUksQ0FBQyxjQUFjO29CQUNsQyxlQUFlLEVBQUUsSUFBSSxDQUFDLGVBQWU7b0JBQ3JDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxnQkFBZ0I7aUJBQ3hDLENBQUM7Z0JBQ0YsT0FBTyxPQUFPLENBQUM7WUFDakIsQ0FBQyxDQUFBO1lBRUQsWUFBTyxHQUFHLENBQUMsUUFBaUIsRUFBUSxFQUFFO2dCQUNwQyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssV0FBVztvQkFDakQsSUFBSSxDQUFDLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDO2dCQUMvQyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLEtBQUssV0FBVztvQkFDbEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDO2dCQUNqRCxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRTtvQkFDeEIsb0JBQW9CLEVBQUUsc0JBQXNCLEVBQUUsb0JBQW9CLEVBQUUsc0JBQXNCLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxpQkFBaUIsRUFBRSxrQkFBa0I7aUJBQ3BLLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQTtZQXJOQyxJQUFJLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQztZQUM1QixJQUFJLENBQUMsVUFBVSxHQUFHLFdBQVcsQ0FBQztZQUM5QixJQUFJLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQztRQUM3QixDQUFDO1FBN0JELG1CQUFtQixDQUFhO1FBQ2hDLHFCQUFxQixDQUFhO1FBRWxDLG1CQUFtQixDQUFhO1FBQ2hDLHFCQUFxQixDQUFhO1FBRWxDLGNBQWMsQ0FBZTtRQUM3QixjQUFjLENBQWE7UUFDM0IsaUJBQWlCLENBQWE7UUFDOUIsZ0JBQWdCLENBQWE7UUFFN0IsV0FBVyxDQUE0QjtRQUN2QyxrQkFBa0IsQ0FBb0I7UUFDdEMsa0JBQWtCLENBQW9CO1FBQ3RDLFVBQVUsQ0FBWTtRQUN0QixXQUFXLENBQVk7UUFHdkIsY0FBYyxDQUFhO1FBQzNCLGVBQWUsQ0FBYTtRQVk1QixvRUFBb0U7UUFDcEU7OztXQUdHO1FBQ0gsSUFBSSxTQUFTO1lBQ1gsT0FBTyxJQUFJLFVBQUEsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUUsQ0FBQztRQUNELElBQUksU0FBUyxDQUFDLE1BQWU7WUFDM0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5RCxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3JCLENBQUM7UUFFRDs7O1VBR0U7UUFDRixJQUFJLFVBQVU7WUFDWixPQUFPLElBQUksVUFBQSxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqRixDQUFDO1FBQ0QsSUFBSSxVQUFVLENBQUMsTUFBZTtZQUM1QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9ELElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNsQixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDckIsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBSSxpQkFBaUI7WUFDbkIsT0FBTyxJQUFJLENBQUMsY0FBYyxHQUFHLFVBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUM1QyxDQUFDO1FBQ0QsSUFBSSxpQkFBaUIsQ0FBQyxNQUFjO1lBQ2xDLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxHQUFHLFVBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUM1QyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3JCLENBQUM7UUFFRDs7V0FFRztRQUNILElBQUksa0JBQWtCO1lBQ3BCLE9BQU8sSUFBSSxDQUFDLGVBQWUsR0FBRyxVQUFBLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDN0MsQ0FBQztRQUNELElBQUksa0JBQWtCLENBQUMsTUFBYztZQUNuQyxJQUFJLENBQUMsZUFBZSxHQUFHLE1BQU0sR0FBRyxVQUFBLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDN0MsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNyQixDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFJLGtCQUFrQjtZQUNwQixPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztRQUNsQyxDQUFDO1FBQ0QsSUFBSSxrQkFBa0IsQ0FBQyxNQUFjO1lBQ25DLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxNQUFNLENBQUM7WUFDbEMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7UUFDbEYsQ0FBQztRQUVEOztVQUVFO1FBQ0YsSUFBSSxvQkFBb0I7WUFDdEIsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUM7UUFDcEMsQ0FBQztRQUNELElBQUksb0JBQW9CLENBQUMsTUFBYztZQUNyQyxJQUFJLENBQUMscUJBQXFCLEdBQUcsTUFBTSxDQUFDO1lBQ3BDLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1FBQy9FLENBQUM7UUFFRDs7V0FFRztRQUNILElBQUksa0JBQWtCO1lBQ3BCLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDO1FBQ2xDLENBQUM7UUFDRCxJQUFJLGtCQUFrQixDQUFDLE1BQWM7WUFDbkMsSUFBSSxDQUFDLG1CQUFtQixHQUFHLE1BQU0sQ0FBQztZQUNsQyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLG9CQUFvQixFQUFFLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQztRQUNsRixDQUFDO1FBRUQ7O1VBRUU7UUFDRixJQUFJLG9CQUFvQjtZQUN0QixPQUFPLElBQUksQ0FBQyxxQkFBcUIsQ0FBQztRQUNwQyxDQUFDO1FBQ0QsSUFBSSxvQkFBb0IsQ0FBQyxNQUFjO1lBQ3JDLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxNQUFNLENBQUM7WUFDcEMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7UUFDL0UsQ0FBQztRQUtEOztXQUVHO1FBQ0gsSUFBSSxhQUFhO1lBQ2YsT0FBTyxJQUFJLENBQUMsY0FBYyxHQUFHLFVBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUM1QyxDQUFDO1FBQ0QsSUFBSSxhQUFhLENBQUMsTUFBYztZQUM5QixNQUFNLElBQUksVUFBQSxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDO1lBQzdCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO1FBQzlFLENBQUM7UUFDRDs7V0FFRztRQUNILElBQUksYUFBYTtZQUNmLE9BQU8sSUFBSSxDQUFDLGNBQWMsR0FBRyxVQUFBLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDNUMsQ0FBQztRQUNELElBQUksYUFBYSxDQUFDLE1BQWM7WUFDOUIsTUFBTSxJQUFJLFVBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUN2QixJQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQztZQUM3QixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUM5RSxDQUFDO1FBQ0Q7O1dBRUc7UUFDSCxJQUFJLGVBQWU7WUFDakIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDL0IsQ0FBQztRQUNELElBQUksZUFBZSxDQUFDLE1BQWM7WUFDaEMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLE1BQU0sQ0FBQztZQUMvQixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUM5RSxDQUFDO1FBQ0Q7O1dBRUc7UUFDSCxJQUFJLGdCQUFnQjtZQUNsQixPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztRQUNoQyxDQUFDO1FBQ0QsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFjO1lBQ2pDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUM7WUFDaEMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUM7UUFDL0UsQ0FBQztRQUVEOztXQUVHO1FBRUgsWUFBWTtRQUVaLHdCQUF3QjtRQUNqQixTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN0RCxhQUFhLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDckQsYUFBYSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3ZELGFBQWEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUMxRCxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxNQUFNLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMzRCxNQUFNLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM3RCxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzdCLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUMxRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQWlCO1lBQ25DLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxXQUFXO2dCQUM3QyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksVUFBQSxPQUFPLENBQUMsR0FBYSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqRixJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEtBQUssV0FBVztnQkFDOUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLFVBQUEsT0FBTyxDQUFDLEdBQWEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbkYsT0FBTyxRQUFRLENBQUMsU0FBUyxDQUFDO1lBQzFCLE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQztZQUMzQixJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7WUFDckQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRU0sVUFBVTtZQUNmLElBQUksT0FBTyxHQUFZLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMxQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUMzQyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDaEQsT0FBTyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xELE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUM7UUFFRCxXQUFXLENBY1Y7UUFFRCxPQUFPLENBUU47UUFDRCxZQUFZO1FBRUYsY0FBYztZQUN0QixJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUNoSCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsa0JBQWtCLENBQUMsQ0FBQztZQUVoSCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3JHLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFFdkUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQzVDLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDdEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUM7WUFDeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUM7WUFDeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztZQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDO1lBQ2pELElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUM7WUFFbEQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2hELEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN6QixDQUFDOztJQXRRc0Isc0JBQVMsR0FBVyxVQUFBLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQURyRSxzQkFBWSxlQXdReEIsQ0FBQTtBQUNILENBQUMsRUFqU1MsU0FBUyxLQUFULFNBQVMsUUFpU2xCO0FDalNELElBQVUsU0FBUyxDQWtIbEI7QUFsSEQsV0FBVSxTQUFTO0lBQ2pCOzs7Ozs7Ozs7Ozs7Ozs7OztTQWlCSztJQUNMLE1BQWEsYUFBYyxTQUFRLFVBQUEsVUFBVTtRQVUzQyxZQUFZLGNBQWtDLElBQUksRUFBRSxZQUFnQyxJQUFJLEVBQUUsUUFBaUIsSUFBSSxVQUFBLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLGVBQXdCLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDM0ssS0FBSyxDQUFDLFdBQVcsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBUnJELGlCQUFZLEdBQVcsQ0FBQyxDQUFDO1lBSWYsV0FBTSxHQUE2QixJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBTTFFLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDO1lBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO1FBQ3BCLENBQUM7UUFaRCxZQUFZLENBQWE7UUFDekIsTUFBTSxDQUE0QjtRQWFsQzs7V0FFRztRQUNILElBQVcsUUFBUSxDQUFDLE1BQWM7WUFDaEMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFDeEIsTUFBTSxJQUFJLFVBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUN2QixJQUFJLElBQUksQ0FBQyxLQUFLO2dCQUNaLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUNuRCxDQUFDO1FBQ0Q7O1dBRUc7UUFDSCxJQUFXLFFBQVEsQ0FBQyxNQUFjO1lBQ2hDLEtBQUssQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDO1lBQ3hCLElBQUksSUFBSSxDQUFDLEtBQUs7Z0JBQ1osSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsQ0FBQyxVQUFVLEdBQUcsTUFBTSxHQUFHLFVBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUNsRSxDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFJLFdBQVc7WUFDYixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDM0IsQ0FBQztRQUNELElBQUksV0FBVyxDQUFDLE1BQWM7WUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7WUFDM0IsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUUsQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDO1FBQzFFLENBQUM7UUFFRDs7V0FFRztRQUVILFlBQVk7UUFFWix3QkFBd0I7UUFDakIsU0FBUztZQUNkLElBQUksYUFBYSxHQUFrQjtnQkFDakMsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO2dCQUM3QixDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxDQUFDLFNBQVMsRUFBRTthQUM1QyxDQUFDO1lBQ0YsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxjQUFjLENBQUMsV0FBVyxDQUFDO1lBQzlDLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUMxRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTSxVQUFVO1lBQ2YsSUFBSSxPQUFPLEdBQVksS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQzFDLE9BQU8sQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztZQUN2QyxPQUFPLE9BQU8sQ0FBQztRQUNqQixDQUFDO1FBRU0sS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFpQjtZQUNuQyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLEtBQUssV0FBVztnQkFDL0MsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDO1lBQzFDLE9BQU8sUUFBUSxDQUFDLFdBQVcsQ0FBQztZQUM1QixLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFDRCxZQUFZO1FBRUYsY0FBYztZQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsVUFBQSxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxRQUFRLEdBQUcsVUFBQSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDdEgsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7WUFFeEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBQzdDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztZQUV2QixJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQzdDLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7WUFFckMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN4QixDQUFDOztJQTVGc0IsdUJBQVMsR0FBVyxVQUFBLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUR0RSx1QkFBYSxnQkE4RnpCLENBQUE7QUFDSCxDQUFDLEVBbEhTLFNBQVMsS0FBVCxTQUFTLFFBa0hsQjtBQ2xIRCxJQUFVLFNBQVMsQ0FvR2xCO0FBcEdELFdBQVUsU0FBUztJQUNqQjs7Ozs7Ozs7Ozs7Ozs7OztTQWdCSztJQUNMLE1BQWEsY0FBZSxTQUFRLFVBQUEsS0FBSztRQVV2QyxZQUFZLGNBQWtDLElBQUksRUFBRSxZQUFnQyxJQUFJLEVBQUUsZUFBd0IsSUFBSSxVQUFBLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNwSSxLQUFLLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBUmhDLG1CQUFjLEdBQVcsQ0FBQyxDQUFDO1lBQzNCLHFCQUFnQixHQUFXLENBQUMsQ0FBQztZQUluQixXQUFNLEdBQThCLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7WUFJNUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLFVBQUEsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUUsQ0FBQztRQVZELGNBQWMsQ0FBYTtRQUMzQixnQkFBZ0IsQ0FBYTtRQUM3QixhQUFhLENBQW9CO1FBVWpDLG9FQUFvRTtRQUVwRTs7V0FFRztRQUNILElBQUksYUFBYTtZQUNmLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztRQUM3QixDQUFDO1FBQ0QsSUFBSSxhQUFhLENBQUMsTUFBYztZQUM5QixJQUFJLENBQUMsY0FBYyxHQUFHLE1BQU0sQ0FBQztZQUM3QixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7UUFDN0UsQ0FBQztRQUVEOztVQUVFO1FBQ0YsSUFBSSxlQUFlO1lBQ2pCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDO1FBQy9CLENBQUM7UUFDRCxJQUFJLGVBQWUsQ0FBQyxNQUFjO1lBQ2hDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxNQUFNLENBQUM7WUFDL0IsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1FBQzFFLENBQUM7UUFDRCxZQUFZO1FBRVosd0JBQXdCO1FBQ2pCLFNBQVM7WUFDZCxJQUFJLGFBQWEsR0FBa0I7Z0JBQ2pDLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtnQkFDakMsZUFBZSxFQUFFLElBQUksQ0FBQyxlQUFlO2dCQUNyQyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxDQUFDLFNBQVMsRUFBRTthQUM1QyxDQUFDO1lBQ0YsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsSUFBSSxDQUFDLGFBQWEsR0FBRyxjQUFjLENBQUMsYUFBYSxDQUFDO1lBQ2xELElBQUksQ0FBQyxlQUFlLEdBQUcsY0FBYyxDQUFDLGVBQWUsQ0FBQztZQUN0RCxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDMUQsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRU0sVUFBVTtZQUNmLElBQUksT0FBTyxHQUFZLEtBQUssQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMxQyxPQUFPLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7WUFDM0MsT0FBTyxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDO1lBQy9DLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUM7UUFFTSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQWlCO1lBQ25DLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLENBQUMsZUFBZSxFQUFFLGlCQUFpQixDQUFDLENBQUMsQ0FBQztZQUNoRSxPQUFPLFFBQVEsQ0FBQyxhQUFhLENBQUM7WUFDOUIsT0FBTyxRQUFRLENBQUMsZUFBZSxDQUFDO1lBQ2hDLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDekIsQ0FBQztRQUNELFlBQVk7UUFFRixjQUFjO1lBQ3RCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ2pHLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztZQUM5QyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQztZQUU5QyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDbEQsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQ3pCLENBQUM7O0lBL0VzQix3QkFBUyxHQUFXLFVBQUEsS0FBSyxDQUFDLGdCQUFnQixDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBRHZFLHdCQUFjLGlCQWlGMUIsQ0FBQTtBQUNILENBQUMsRUFwR1MsU0FBUyxLQUFULFNBQVMsUUFvR2xCO0FDcEdELElBQVUsU0FBUyxDQTZTbEI7QUE3U0QsV0FBVSxTQUFTO0lBQ2pCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7U0FrQks7SUFDTCxNQUFhLGNBQWUsU0FBUSxVQUFBLEtBQUs7UUE2QnZDLFlBQVksY0FBa0MsSUFBSSxFQUFFLFlBQWdDLElBQUksRUFBRSxhQUFzQixJQUFJLFVBQUEsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsY0FBdUIsSUFBSSxVQUFBLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLGVBQXdCLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDN04sS0FBSyxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQztZQTNCaEMsd0JBQW1CLEdBQVcsQ0FBQyxDQUFDO1lBQ2hDLDBCQUFxQixHQUFXLENBQUMsQ0FBQztZQUVsQyx5QkFBb0IsR0FBVyxDQUFDLENBQUM7WUFDakMsMkJBQXNCLEdBQVcsQ0FBQyxDQUFDO1lBRW5DLG1CQUFjLEdBQVcsR0FBRyxDQUFDO1lBQzdCLG1CQUFjLEdBQVcsQ0FBQyxDQUFDO1lBQzNCLHNCQUFpQixHQUFXLENBQUMsQ0FBQztZQUM5QixxQkFBZ0IsR0FBVyxDQUFDLENBQUM7WUFFN0Isb0JBQWUsR0FBVyxHQUFHLENBQUM7WUFDOUIsb0JBQWUsR0FBVyxDQUFDLENBQUM7WUFDNUIsdUJBQWtCLEdBQVcsQ0FBQyxDQUFDO1lBQy9CLHNCQUFpQixHQUFXLENBQUMsQ0FBQztZQVVwQixXQUFNLEdBQThCLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7WUErTTlFLGdCQUFXLEdBQUcsR0FBWSxFQUFFO2dCQUMxQixJQUFJLE9BQU8sR0FBWTtvQkFDckIsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLG1CQUFtQjtvQkFDNUMsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLHFCQUFxQjtvQkFDaEQsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLG9CQUFvQjtvQkFDOUMscUJBQXFCLEVBQUUsSUFBSSxDQUFDLHNCQUFzQjtvQkFDbEQsYUFBYSxFQUFFLElBQUksQ0FBQyxjQUFjO29CQUNsQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGNBQWM7b0JBQ2xDLGVBQWUsRUFBRSxJQUFJLENBQUMsZ0JBQWdCO29CQUN0QyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsaUJBQWlCO29CQUN4QyxjQUFjLEVBQUUsSUFBSSxDQUFDLGVBQWU7b0JBQ3BDLGNBQWMsRUFBRSxJQUFJLENBQUMsZUFBZTtvQkFDcEMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGlCQUFpQjtvQkFDeEMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLGtCQUFrQjtpQkFDM0MsQ0FBQztnQkFDRixPQUFPLE9BQU8sQ0FBQztZQUNqQixDQUFDLENBQUE7WUFFRCxZQUFPLEdBQUcsQ0FBQyxRQUFpQixFQUFRLEVBQUU7Z0JBQ3BDLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFO29CQUN4QixvQkFBb0IsRUFBRSxzQkFBc0IsRUFBRSxxQkFBcUIsRUFBRSx1QkFBdUI7b0JBQzVGLGVBQWUsRUFBRSxlQUFlLEVBQUUsaUJBQWlCLEVBQUUsa0JBQWtCO29CQUN2RSxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFBRSxrQkFBa0IsRUFBRSxvQkFBb0I7aUJBQUMsQ0FDOUUsQ0FBQztZQUNKLENBQUMsQ0FBQTtZQW5PQyxJQUFJLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQztZQUM1QixJQUFJLENBQUMsVUFBVSxHQUFHLFdBQVcsQ0FBQztZQUM5QixJQUFJLENBQUMsTUFBTSxHQUFHLFlBQVksQ0FBQztRQUM3QixDQUFDO1FBL0JELG1CQUFtQixDQUFhO1FBQ2hDLHFCQUFxQixDQUFhO1FBRWxDLG9CQUFvQixDQUFhO1FBQ2pDLHNCQUFzQixDQUFhO1FBRW5DLGNBQWMsQ0FBZTtRQUM3QixjQUFjLENBQWE7UUFDM0IsaUJBQWlCLENBQWE7UUFDOUIsZ0JBQWdCLENBQWE7UUFFN0IsZUFBZSxDQUFlO1FBQzlCLGVBQWUsQ0FBYTtRQUM1QixrQkFBa0IsQ0FBYTtRQUMvQixpQkFBaUIsQ0FBYTtRQUU5QixXQUFXLENBQTRCO1FBQ3ZDLFlBQVksQ0FBNEI7UUFDeEMsc0JBQXNCLENBQW9CO1FBQzFDLHVCQUF1QixDQUFvQjtRQUMzQyxVQUFVLENBQVk7UUFDdEIsV0FBVyxDQUFZO1FBWXZCLG9FQUFvRTtRQUNwRTs7O1dBR0c7UUFDSCxJQUFJLFNBQVM7WUFDWCxPQUFPLElBQUksVUFBQSxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5RSxDQUFDO1FBQ0QsSUFBSSxTQUFTLENBQUMsTUFBZTtZQUMzQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlELElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNsQixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDckIsQ0FBQztRQUNEOzs7VUFHRTtRQUNGLElBQUksVUFBVTtZQUNaLE9BQU8sSUFBSSxVQUFBLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pGLENBQUM7UUFDRCxJQUFJLFVBQVUsQ0FBQyxNQUFlO1lBQzVCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0QsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNyQixDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFJLGtCQUFrQjtZQUNwQixPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztRQUNsQyxDQUFDO1FBQ0QsSUFBSSxrQkFBa0IsQ0FBQyxNQUFjO1lBQ25DLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxNQUFNLENBQUM7WUFDbEMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUM7UUFDOUUsQ0FBQztRQUVEOztVQUVFO1FBQ0YsSUFBSSxvQkFBb0I7WUFDdEIsT0FBTyxJQUFJLENBQUMscUJBQXFCLENBQUM7UUFDcEMsQ0FBQztRQUNELElBQUksb0JBQW9CLENBQUMsTUFBYztZQUNyQyxJQUFJLENBQUMscUJBQXFCLEdBQUcsTUFBTSxDQUFDO1lBQ3BDLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDO1FBQzNFLENBQUM7UUFFRDs7V0FFRztRQUNILElBQUksbUJBQW1CO1lBQ3JCLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixDQUFDO1FBQ25DLENBQUM7UUFDRCxJQUFJLG1CQUFtQixDQUFDLE1BQWM7WUFDcEMsSUFBSSxDQUFDLG9CQUFvQixHQUFHLE1BQU0sQ0FBQztZQUNuQyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQztRQUM5RSxDQUFDO1FBRUQ7O1VBRUU7UUFDRixJQUFJLHFCQUFxQjtZQUN2QixPQUFPLElBQUksQ0FBQyxzQkFBc0IsQ0FBQztRQUNyQyxDQUFDO1FBQ0QsSUFBSSxxQkFBcUIsQ0FBQyxNQUFjO1lBQ3RDLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxNQUFNLENBQUM7WUFDckMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7UUFDM0UsQ0FBQztRQUtEOztXQUVHO1FBQ0gsSUFBSSxhQUFhO1lBQ2YsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBQzdCLENBQUM7UUFDRCxJQUFJLGFBQWEsQ0FBQyxNQUFjO1lBQzlCLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDO1lBQzdCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sR0FBRyxVQUFBLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDekYsQ0FBQztRQUNEOztXQUVHO1FBQ0gsSUFBSSxhQUFhO1lBQ2YsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBQzdCLENBQUM7UUFDRCxJQUFJLGFBQWEsQ0FBQyxNQUFjO1lBQzlCLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDO1lBQzdCLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJO2dCQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUMsVUFBVSxHQUFHLE1BQU0sR0FBRyxVQUFBLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDekYsQ0FBQztRQUNEOztXQUVHO1FBQ0gsSUFBSSxlQUFlO1lBQ2pCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDO1FBQy9CLENBQUM7UUFDRCxJQUFJLGVBQWUsQ0FBQyxNQUFjO1lBQ2hDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxNQUFNLENBQUM7WUFDL0IsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO1FBQzFFLENBQUM7UUFDRDs7V0FFRztRQUNILElBQUksZ0JBQWdCO1lBQ2xCLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDO1FBQ2hDLENBQUM7UUFDRCxJQUFJLGdCQUFnQixDQUFDLE1BQWM7WUFDakMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLE1BQU0sQ0FBQztZQUNoQyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUM7UUFDM0UsQ0FBQztRQUVEOztTQUVDO1FBQ0QsSUFBSSxjQUFjO1lBQ2hCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQztRQUM5QixDQUFDO1FBQ0QsSUFBSSxjQUFjLENBQUMsTUFBYztZQUMvQixJQUFJLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQztZQUM5QixJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDLFVBQVUsR0FBRyxNQUFNLEdBQUcsVUFBQSxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3pGLENBQUM7UUFDRDs7V0FFRztRQUNILElBQUksY0FBYztZQUNoQixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUM7UUFDOUIsQ0FBQztRQUNELElBQUksY0FBYyxDQUFDLE1BQWM7WUFDL0IsSUFBSSxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUM7WUFDOUIsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQyxVQUFVLEdBQUcsTUFBTSxHQUFHLFVBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN6RixDQUFDO1FBQ0Q7O1dBRUc7UUFDSCxJQUFJLGdCQUFnQjtZQUNsQixPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztRQUNoQyxDQUFDO1FBQ0QsSUFBSSxnQkFBZ0IsQ0FBQyxNQUFjO1lBQ2pDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUM7WUFDaEMsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUk7Z0JBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDO1FBQzFFLENBQUM7UUFDRDs7V0FFRztRQUNILElBQUksaUJBQWlCO1lBQ25CLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDO1FBQ2pDLENBQUM7UUFDRCxJQUFJLGlCQUFpQixDQUFDLE1BQWM7WUFDbEMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQztZQUNqQyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSTtnQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUM7UUFDM0UsQ0FBQztRQUVEOztXQUVHO1FBRUgsWUFBWTtRQUVaLHdCQUF3QjtRQUNqQixTQUFTO1lBQ2QsSUFBSSxhQUFhLEdBQWtCLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUN0RCxhQUFhLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDckQsYUFBYSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3ZELGFBQWEsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUMxRCxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sSUFBSSxVQUFBLE9BQU8sRUFBRSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDM0UsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLElBQUksVUFBQSxPQUFPLEVBQUUsQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzdFLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDN0IsS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzFELE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVNLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBaUI7WUFDbkMsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxLQUFLLFdBQVc7Z0JBQzdDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxVQUFBLE9BQU8sQ0FBQyxHQUFhLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pGLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsS0FBSyxXQUFXO2dCQUM5QyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksVUFBQSxPQUFPLENBQUMsR0FBYSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuRixPQUFPLFFBQVEsQ0FBQyxTQUFTLENBQUM7WUFDMUIsT0FBTyxRQUFRLENBQUMsVUFBVSxDQUFDO1lBQzNCLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDdkIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUNyRCxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFFTSxVQUFVO1lBQ2YsSUFBSSxPQUFPLEdBQVksS0FBSyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1lBQzNDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUNoRCxPQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDbEQsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztRQUVELFdBQVcsQ0FnQlY7UUFFRCxPQUFPLENBTU47UUFDRCxZQUFZO1FBRUYsY0FBYztZQUN0QixJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztZQUN0SCxJQUFJLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUV6SCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxjQUFjLEdBQUcsVUFBQSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxjQUFjLEdBQUcsVUFBQSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckksSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1lBQ3pFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLGNBQWMsR0FBRyxVQUFBLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGNBQWMsR0FBRyxVQUFBLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN0SSxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFFMUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO1lBQzlDLEtBQUssQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDeEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztZQUMzQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQzVDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQztZQUN4RCxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsdUJBQXVCLENBQUM7WUFFekQsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2xELEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN6QixDQUFDOztJQXRSc0Isd0JBQVMsR0FBVyxVQUFBLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUR2RSx3QkFBYyxpQkF3UjFCLENBQUE7QUFDSCxDQUFDLEVBN1NTLFNBQVMsS0FBVCxTQUFTLFFBNlNsQjtBQzdTRCxJQUFVLFNBQVMsQ0E2Q2xCO0FBN0NELFdBQVUsU0FBUztJQUNqQjs7Ozs7O1NBTUs7SUFDTCxNQUFhLFlBQWEsU0FBUSxVQUFBLEtBQUs7UUFNckMsWUFBWSxjQUFrQyxJQUFJLEVBQUUsWUFBZ0MsSUFBSSxFQUFFLGVBQXdCLElBQUksVUFBQSxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDcEksS0FBSyxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUh0QixXQUFNLEdBQTRCLElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFLeEUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLFVBQUEsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUUsQ0FBQztRQUNELFlBQVk7UUFHWix3QkFBd0I7UUFDakIsU0FBUztZQUNkLElBQUksYUFBYSxHQUFrQjtnQkFDakMsQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssQ0FBQyxTQUFTLEVBQUU7YUFDNUMsQ0FBQztZQUNGLE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUMxRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFDRCxZQUFZO1FBR0YsY0FBYztZQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDNUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBRXZELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNoRCxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3ZELENBQUM7O0lBbENzQixzQkFBUyxHQUFXLFVBQUEsS0FBSyxDQUFDLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxDQUFDO0lBRHJFLHNCQUFZLGVBb0N4QixDQUFBO0FBQ0gsQ0FBQyxFQTdDUyxTQUFTLEtBQVQsU0FBUyxRQTZDbEI7QUM3Q0QseURBQXlEO0FBRXpELElBQVUsU0FBUyxDQTBTbEI7QUE1U0QseURBQXlEO0FBRXpELFdBQVUsU0FBUztJQUNqQjs7Ozs7UUFLSTtJQUNKLE1BQWEsT0FBTztRQWNsQjtZQUhRLGFBQVEsR0FBeUIsSUFBSSxLQUFLLEVBQUUsQ0FBQztZQUM3QyxjQUFTLEdBQVksSUFBSSxLQUFLLEVBQUUsQ0FBQztZQUd2QyxJQUFJLE9BQU8sSUFBSSxJQUFJLFdBQVcsRUFBRSxFQUFDLCtIQUErSDtnQkFDOUosVUFBQSxLQUFLLENBQUMsS0FBSyxDQUFDLG9DQUFvQyxDQUFDLENBQUM7Z0JBQ2xELE9BQU8sSUFBSSxDQUFDO2FBQ2I7WUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1lBQ2xDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxVQUFBLGdCQUFnQixFQUFFLENBQUMsQ0FBRSxrREFBa0Q7WUFDN0YsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLCtEQUErRDtRQUM3SCxDQUFDO1FBakJELDBGQUEwRjtRQUMxRixVQUFVLENBQW1CO1FBQzdCLDhGQUE4RjtRQUM5RixRQUFRLENBQWtCO1FBZTFCOztXQUVHO1FBQ0ksTUFBTSxLQUFLLGNBQWMsQ0FBQyxRQUFpQjtZQUNoRCxPQUFPLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQztRQUM3QixDQUFDO1FBRUQsZ0RBQWdEO1FBQ3pDLE1BQU0sS0FBSyxjQUFjO1lBQzlCLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQztRQUN6QixDQUFDO1FBRU0sTUFBTSxLQUFLLFNBQVM7WUFDekIsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQztRQUNwQyxDQUFDO1FBQ00sTUFBTSxLQUFLLE9BQU87WUFDdkIsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztRQUNsQyxDQUFDO1FBRUQ7OztVQUdFO1FBQ0ssTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFnQixFQUFFLFVBQW1CLEVBQUUsVUFBa0IsQ0FBQyxFQUFFLGFBQXNCLEtBQUssRUFBRSxTQUEwQixVQUFBLGVBQWUsQ0FBQyxPQUFPO1lBQzlKLElBQUksT0FBTyxHQUFlLElBQUksVUFBQSxVQUFVLEVBQUUsQ0FBQztZQUMzQyxJQUFJLEdBQUcsR0FBd0IsSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDekQsSUFBSSxLQUFLLEdBQWMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEUsSUFBSSxHQUFHLEdBQWMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxVQUFBLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQ2hILEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNaLElBQUksTUFBTSxJQUFJLFVBQUEsZUFBZSxDQUFDLE9BQU8sRUFBRSxFQUFFLGlEQUFpRDtnQkFDeEYsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7YUFDcEQ7aUJBQU0sRUFBRSxvREFBb0Q7Z0JBQzNELElBQUksT0FBTyxHQUFpQixJQUFJLEtBQUssRUFBRSxDQUFDO2dCQUN4QyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBVSxLQUF5QjtvQkFDbEUsSUFBSSxLQUFLLENBQUMsY0FBYyxJQUFJLE1BQU0sRUFBRTt3QkFDbEMsT0FBTyxHQUFHLEtBQUssQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQzt3QkFDOUQsSUFBSSxPQUFPLENBQUMsR0FBRyxJQUFJLElBQUksRUFBRSxFQUFFLCtDQUErQzs0QkFDeEUsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzt5QkFDdkI7cUJBQ0Y7Z0JBQ0gsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEtBQWlCO29CQUN6QyxJQUFJLEtBQUssQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDLFdBQVcsSUFBSSxPQUFPLENBQUMsR0FBRyxJQUFJLEtBQUssRUFBRTt3QkFDbkUsT0FBTyxHQUFHLEtBQUssQ0FBQztxQkFDakI7Z0JBQ0gsQ0FBQyxDQUFDLENBQUM7YUFDSjtZQUNELElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLGlDQUFpQztnQkFDOUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUM7Z0JBQ25CLE9BQU8sQ0FBQyxRQUFRLEdBQUcsSUFBSSxVQUFBLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMvRSxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksVUFBQSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDMUUsT0FBTyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ3JFLE9BQU8sQ0FBQyxrQkFBa0IsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQztnQkFDaEQsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLFVBQUEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xELE9BQU8sQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDO2FBQzdCO2lCQUFNO2dCQUNMLE9BQU8sQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDO2dCQUM1QixPQUFPLENBQUMsUUFBUSxHQUFHLElBQUksVUFBQSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNyRDtZQUNELElBQUksVUFBVSxFQUFFLEVBQUUsa0JBQWtCO2dCQUNsQyxPQUFPLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxPQUFPLENBQUMsUUFBUSxFQUFFLElBQUksVUFBQSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNqRztZQUNELE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUM7UUFHRDs7O1VBR0U7UUFDSyxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQXFCLENBQUMsR0FBRyxFQUFFO1lBQ2hELElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLENBQUM7Z0JBQ3RDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLG9HQUFvRztZQUMvSCxJQUFJLFVBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSwwREFBMEQ7Z0JBQ3pGLFVBQVUsR0FBRyxVQUFVLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsdUdBQXVHO2dCQUMvSixPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUUsK0VBQStFO2FBQ3BKO1FBQ0gsQ0FBQztRQUVEOztXQUVHO1FBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxVQUEyQixFQUFFLEtBQXlCO1lBQ3ZFLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMvQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUM7WUFDdEMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQywrRUFBK0U7WUFDdEgsT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUM7WUFDekMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBRSxrSEFBa0g7UUFDaEssQ0FBQztRQUVEOztZQUVJO1FBQ0csTUFBTSxDQUFDLGdCQUFnQixDQUFDLE9BQWEsRUFBRSxVQUFtQixLQUFLO1lBQ3BFLFVBQUEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUNqRCxLQUFLLElBQUksSUFBSSxJQUFJLFVBQUEsTUFBTSxDQUFDLFlBQVk7Z0JBQ2xDLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBQSxrQkFBa0IsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ3ZELENBQUM7UUFFRDs7VUFFRTtRQUNLLE1BQU0sQ0FBQyxVQUFVO1lBQ3RCLElBQUksTUFBTSxHQUFjLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQy9ELE9BQU8sSUFBSSxVQUFBLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25ELENBQUM7UUFFRDs7VUFFRTtRQUNLLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBZTtZQUN0QyxJQUFJLE1BQU0sR0FBYyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNwRSxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDL0MsQ0FBQztRQUVEOztVQUVFO1FBQ0ssTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUEwQjtZQUNuRCxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLENBQUM7UUFDcEUsQ0FBQztRQUVEOztVQUVFO1FBQ0ssTUFBTSxDQUFDLGVBQWUsQ0FBQyxNQUEwQjtZQUN0RCxrRUFBa0U7WUFDbEUsSUFBSSxhQUFhLEdBQW1CLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQzlELElBQUksYUFBYSxDQUFDLE1BQU07Z0JBQ3RCLGFBQWEsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3RELDRFQUE0RTtZQUM1RSxJQUFJLEVBQUUsR0FBVyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDMUQsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBRUQ7O1VBRUU7UUFDSyxNQUFNLENBQUMsUUFBUSxDQUFDLFNBQWdCO1lBQ3JDLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQztRQUMvRCxDQUFDO1FBRUQ7O1VBRUU7UUFDSyxNQUFNLENBQUMsaUJBQWlCLENBQUMsU0FBZ0I7WUFDOUMsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQztnQkFDbEQsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlDLENBQUM7UUFFRDs7WUFFSTtRQUNHLE1BQU0sQ0FBQyxXQUFXLENBQUMsU0FBZ0I7WUFDeEMsSUFBSTtnQkFDRixPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUM7YUFDakU7WUFBQyxPQUFPLE1BQWUsRUFBRTtnQkFDeEIsVUFBQSxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQ3JCO1FBQ0gsQ0FBQztRQUVELGtGQUFrRjtRQUMzRSxNQUFNLENBQUMsV0FBVztZQUN2QixPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQ2xDLENBQUM7UUFFRCwwSkFBMEo7UUFDbkosTUFBTSxDQUFDLGdCQUFnQjtZQUM1QixJQUFJLE1BQU0sR0FBVyxDQUFDLENBQUM7WUFDdkIsSUFBSSxJQUFJLEdBQVksS0FBSyxDQUFDO1lBQzFCLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQTBCLEVBQVEsRUFBRTtnQkFDcEUsSUFBSSxNQUFNLENBQUMsRUFBRSxJQUFJLE1BQU0sRUFBRTtvQkFDdkIsSUFBSSxHQUFHLElBQUksQ0FBQztpQkFDYjtxQkFBTTtvQkFDTCxJQUFJLEdBQUcsS0FBSyxDQUFDO2lCQUNkO2dCQUNELElBQUksQ0FBQyxJQUFJLEVBQUU7b0JBQ1QsTUFBTSxFQUFFLENBQUM7aUJBQ1Y7WUFDSCxDQUFDLENBQ0EsQ0FBQztZQUNGLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxNQUFNLENBQUMsYUFBYTtZQUN6QixJQUFJLGVBQWUsR0FBWSxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQztZQUN6RCxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7WUFDL0IsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQWEsRUFBUSxFQUFFO2dCQUM5QyxJQUFJLE1BQU0sQ0FBQyxXQUFXLEVBQUUsSUFBSSxLQUFLO29CQUMvQixJQUFJLE1BQU0sQ0FBQyxRQUFRO3dCQUNqQixNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7O3dCQUVqQixPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDN0MsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBRUQsMkZBQTJGO1FBQ3BGLE1BQU0sQ0FBQyxPQUFPO1lBQ25CLElBQUksU0FBUyxHQUFlLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO1lBQ3RELElBQUksU0FBUyxJQUFJLElBQUksRUFBRTtnQkFDckIsMklBQTJJO2dCQUMzSSxJQUFJLFdBQVcsR0FBVyxTQUFTLENBQUMsWUFBWSxFQUFFLENBQUM7Z0JBQ25ELElBQUksV0FBVyxHQUFXLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2dCQUN4RCxLQUFLLElBQUksSUFBSSxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUTtvQkFDdkMsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7Z0JBQzdCLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUMsQ0FBQyxzRkFBc0Y7Z0JBQy9ILEtBQUssSUFBSSxDQUFDLEdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUU7b0JBQzVDLElBQUksU0FBUyxHQUFlLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxDQUFDO29CQUNyRSxTQUFTLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2lCQUNsQztnQkFDRCxLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUM1QyxJQUFJLFFBQVEsR0FBbUIsU0FBUyxDQUFDLGdCQUFnQixFQUFFLENBQUM7b0JBQzVELFNBQVMsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUM7aUJBQ3JDO2FBQ0Y7UUFDSCxDQUFDO1FBRUQseUhBQXlIO1FBQ3pILGdFQUFnRTtRQUNoRSx5Q0FBeUM7UUFDekMsbUZBQW1GO1FBQ25GLDZCQUE2QjtRQUM3QixzQkFBc0I7UUFDdEIsUUFBUTtRQUNSLFFBQVE7UUFDUixpQkFBaUI7UUFDakIsSUFBSTtRQUVKOzthQUVLO1FBQ0csTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFnQixFQUFFLFNBQWtCLEVBQUUsTUFBYztZQUNoRixJQUFJLE1BQU0sR0FBWSxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQSxPQUFPLENBQUMsQ0FBQztZQUM1QyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEMsSUFBSSxlQUFlLEdBQVksU0FBUyxDQUFDLEtBQUssQ0FBQztZQUMvQyxlQUFlLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzlCLElBQUksUUFBUSxHQUFZLFVBQUEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFDN0QsVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ2hDLFVBQUEsUUFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6QixVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdkIsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzRCxDQUFDO1FBRUQsdUtBQXVLO1FBQy9KLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBZSxFQUFFLFFBQWlCO1lBQzlELElBQUksRUFBRSxHQUFXLE1BQU0sQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUN2QyxJQUFJLEVBQUUsR0FBVyxNQUFNLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDdkMsSUFBSSxFQUFFLEdBQVcsTUFBTSxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQ3ZDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ2hELENBQUM7UUFHRCx3SkFBd0o7UUFDakosWUFBWTtZQUNqQixPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBQ25DLENBQUM7O0lBMVJELDJIQUEySDtJQUM3RyxnQkFBUSxHQUFvQixJQUFJLFVBQUEsZUFBZSxDQUFDLFVBQUEsZUFBZSxDQUFDLE9BQU8sRUFBRSxDQUFDLFVBQUEsZUFBZSxDQUFDLE9BQU8sR0FBRyxVQUFBLGVBQWUsQ0FBQyxPQUFPLEdBQUcsVUFBQSxlQUFlLENBQUMsT0FBTyxHQUFHLFVBQUEsZUFBZSxDQUFDLE9BQU8sR0FBRyxVQUFBLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQzNNLGVBQU8sR0FBWSxJQUFJLE9BQU8sRUFBRSxDQUFDO0lBSHJDLGlCQUFPLFVBa1NuQixDQUFBO0FBQ0gsQ0FBQyxFQTFTUyxTQUFTLEtBQVQsU0FBUyxRQTBTbEI7QUM1U0QsSUFBVSxTQUFTLENBa0NsQjtBQWxDRCxXQUFVLFNBQVM7SUFDakI7O09BRUc7SUFDSCxNQUFhLEdBQUc7UUFJZCxZQUFZLE9BQWdCLFVBQUEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFBRSxPQUFnQixVQUFBLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUM7WUFDdkYsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDdkIsQ0FBQztRQUVEOzs7V0FHRztRQUNJLEdBQUcsQ0FBQyxPQUFnQixVQUFBLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUUsT0FBZ0IsVUFBQSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDO1lBQ3RGLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDO1lBQ2hCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLENBQUM7UUFFRDs7V0FFRztRQUNJLE1BQU0sQ0FBQyxRQUFpQjtZQUM3QixJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN2QixJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRU0sT0FBTztZQUNaLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoRCxDQUFDO0tBQ0Y7SUE3QlksYUFBRyxNQTZCZixDQUFBO0FBQ0gsQ0FBQyxFQWxDUyxTQUFTLEtBQVQsU0FBUyxRQWtDbEI7QUNsQ0QsSUFBVSxTQUFTLENBeUVsQjtBQXpFRCxXQUFVLFNBQVM7SUFDakI7Ozs7T0FJRztJQUNILE1BQWEsSUFBSTtRQVNmLFlBQVksS0FBVztZQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztRQUNwQixDQUFDO1FBTkQsZUFBZSxDQUFZO1FBQzNCLFNBQVMsQ0FBVTtRQUNuQixRQUFRLENBQVU7UUFNbEI7O1dBRUc7UUFDSCxJQUFXLFFBQVE7WUFDakIsSUFBSSxJQUFJLENBQUMsU0FBUztnQkFDaEIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ3hCLElBQUksZ0JBQWdCLEdBQVksVUFBQSxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN4RCxJQUFJLENBQUMsR0FBaUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUNqRCxJQUFJLE1BQU0sR0FBWSxVQUFBLE9BQU8sQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMzRixJQUFJLENBQUMsR0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDM0csTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFFcEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7WUFDeEIsT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxPQUFPO1lBQ2hCLElBQUksSUFBSSxDQUFDLFFBQVE7Z0JBQ2YsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3ZCLElBQUksY0FBYyxHQUFjLFVBQUEsU0FBUyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFBLGFBQWEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3BHLElBQUksT0FBTyxHQUFZLFVBQUEsT0FBTyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLGNBQWMsQ0FBQyxDQUFDO1lBQzdFLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDO1lBQ3hCLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsTUFBTTtZQUNmLElBQUksT0FBTyxHQUFrQixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFBLGFBQWEsQ0FBQyxDQUFDO1lBQ25FLElBQUksTUFBZSxDQUFDO1lBRXBCLEtBQUssSUFBSSxJQUFJLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQ25DLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUU7b0JBQy9CLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQztvQkFDM0IsTUFBTTtpQkFDUDthQUNGO1lBRUQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQzFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNuQixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFXLGNBQWMsQ0FBQyxlQUEwQjtZQUNsRCxJQUFJLENBQUMsZUFBZSxHQUFHLGVBQWUsQ0FBQztRQUN6QyxDQUFDO0tBQ0Y7SUFsRVksY0FBSSxPQWtFaEIsQ0FBQTtBQUNILENBQUMsRUF6RVMsU0FBUyxLQUFULFNBQVMsUUF5RWxCO0FDekVELElBQVUsU0FBUyxDQXFEbEI7QUFyREQsV0FBVSxTQUFTO0lBQ2pCOzs7O09BSUc7SUFDSCxNQUFhLE1BQU07UUFDakI7OztXQUdHO1FBQ0ksTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFjLEVBQUUsSUFBUyxFQUFFLElBQVksRUFBRSxJQUFZO1lBQ3pFLElBQUksYUFBYSxHQUFvQixJQUFJLFVBQUEsZUFBZSxFQUFFLENBQUM7WUFDM0QsYUFBYSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUNqRCxhQUFhLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDOUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLFVBQUEsYUFBYSxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFFM0UsSUFBSSxLQUFLLEdBQVcsVUFBQSxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxhQUFhLENBQUMsQ0FBQztZQUM3RCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQWMsRUFBRSxVQUEyQixFQUFFLGNBQXVCO1lBQzNGLElBQUksR0FBRyxHQUFRLElBQUksVUFBQSxHQUFHLENBQUMsSUFBSSxVQUFBLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVFLElBQUksTUFBTSxHQUFXLEdBQUcsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO1lBRTdDLElBQUksVUFBVSxDQUFDLElBQUksRUFBRTtnQkFDbkIsSUFBSSxTQUFTLEdBQWMsVUFBQSxTQUFTLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDbkcsR0FBRyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDekIsVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQzNCOztnQkFFQyxHQUFHLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUdyQyxJQUFJLEtBQUssR0FBVyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsTUFBTSxHQUFHLFVBQVUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxNQUFNLEdBQUcsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7WUFDN0csT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksTUFBTSxDQUFDLFlBQVksQ0FBQyxTQUFtQixFQUFFLFVBQW1CO1lBQ2pFLElBQUksYUFBYSxHQUFZLFNBQVMsQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUMzRSxJQUFJLEtBQUssR0FBVyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN4RSxJQUFJLEtBQUssR0FBVyxNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsTUFBTSxFQUFFLGFBQWEsQ0FBQyxDQUFDO1lBQzlFLE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztLQUNGO0lBOUNZLGdCQUFNLFNBOENsQixDQUFBO0FBQ0gsQ0FBQyxFQXJEUyxTQUFTLEtBQVQsU0FBUyxRQXFEbEI7QUNyREQsSUFBVSxTQUFTLENBbUVsQjtBQW5FRCxXQUFVLFNBQVM7SUFDakI7Ozs7T0FJRztJQUNILE1BQWEsR0FBRztRQU1kLFlBQVksYUFBc0IsVUFBQSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQW1CLFVBQUEsT0FBTyxDQUFDLElBQUksRUFBRSxFQUFFLFVBQWtCLENBQUM7WUFDcEcsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7WUFDdEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUM7WUFDNUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7UUFDeEIsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSSxjQUFjLENBQUMsT0FBZ0IsRUFBRSxPQUFnQjtZQUN0RCxJQUFJLFVBQVUsR0FBWSxVQUFBLE9BQU8sQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNuRSxJQUFJLE1BQU0sR0FBVyxVQUFBLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLE9BQU8sQ0FBQyxHQUFHLFVBQUEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQzdGLElBQUksU0FBUyxHQUFZLFVBQUEsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLFVBQUEsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDekYsT0FBTyxTQUFTLENBQUM7UUFDbkIsQ0FBQztRQUVEOzs7V0FHRztRQUNJLGtCQUFrQixDQUFDLEtBQVc7WUFDbkMsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2pFLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxXQUFXLENBQUMsT0FBZ0I7WUFDakMsSUFBSSxjQUFjLEdBQVksVUFBQSxPQUFPLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdkUsSUFBSSxVQUFVLEdBQVksVUFBQSxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbkUsSUFBSSxlQUFlLEdBQVcsVUFBQSxPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUN0RSxVQUFVLENBQUMsS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ2xDLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzVCLElBQUksUUFBUSxHQUFZLFVBQUEsT0FBTyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDaEUsT0FBTyxRQUFRLENBQUM7UUFDbEIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksU0FBUyxDQUFDLGFBQXdCO1lBQ3ZDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3hDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3ZDLENBQUM7UUFFRDs7V0FFRztRQUNJLFFBQVE7WUFDYixPQUFPLFdBQVcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsZ0JBQWdCLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLGFBQWEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM3SCxDQUFDO0tBQ0Y7SUE1RFksYUFBRyxNQTREZixDQUFBO0FBQ0gsQ0FBQyxFQW5FUyxTQUFTLEtBQVQsU0FBUyxRQW1FbEI7QUNuRUQsSUFBVSxTQUFTLENBME5sQjtBQTFORCxXQUFVLFNBQVM7SUFPakI7O09BRUc7SUFDSCxNQUFzQixNQUFPLFNBQVEsVUFBQSxXQUFXO1FBVTlDLCtFQUErRTtRQUUvRSxpQkFBaUI7UUFDakI7Ozs7V0FJRztRQUNJLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBYSxFQUFFLFdBQWlDLEVBQUUsRUFBRSxZQUF1QixVQUFBLFNBQVMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxlQUFvQyxJQUFJO1lBQzdKLElBQUksVUFBVSxHQUFZLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxDQUFDO1lBQ2pELElBQUksVUFBVSxFQUFFO2dCQUNkLFlBQVksR0FBRyxFQUFFLENBQUM7Z0JBQ2xCLE1BQU0sQ0FBQyxlQUFlLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUMzQyxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUMzQixNQUFNLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUMxQixNQUFNLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUM1QixNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUM5QixNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO2dCQUNoRCxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksS0FBSyxpREFBNEIsQ0FBQyxDQUFDO2FBQzlEO1lBRUQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRO2dCQUNuQixPQUFPLENBQUMsZ0RBQWdEO1lBRTFELE9BQU8sQ0FBQyxjQUFjLEdBQUcsQ0FBQyxDQUFDO1lBQzNCLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBRW5CLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxJQUFJLEtBQUssc0NBQXNCLENBQUMsQ0FBQztZQUNuRSxPQUFPLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQyxlQUFlLENBQUM7WUFFakQsSUFBSSxPQUFPLENBQUMsWUFBWSxJQUFJLE9BQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFO2dCQUN6RCxJQUFJLGNBQWMsR0FBYyxVQUFBLFNBQVMsQ0FBQyxjQUFjLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ25HLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO2dCQUNyQyxVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUM7YUFDaEM7O2dCQUNDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsa0RBQWtEO1lBR3JGLElBQUksWUFBWSxHQUF1QixPQUFPLENBQUMsWUFBWSxDQUFDLFVBQUEsa0JBQWtCLENBQUMsQ0FBQztZQUNoRixJQUFJLFlBQVksSUFBSSxZQUFZLENBQUMsUUFBUSxFQUFFLEVBQUUseUNBQXlDO2dCQUNwRixNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGdDQUFnQztnQkFDbkUsSUFBSSxDQUFDLFFBQVEsRUFBRSxhQUFhO29CQUMxQixJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO2FBQ2xEO1lBR0QsSUFBSSxPQUFPLEdBQWtCLE9BQU8sQ0FBQyxZQUFZLENBQUMsVUFBQSxhQUFhLENBQUMsQ0FBQztZQUNqRSxJQUFJLE9BQU8sSUFBSSxPQUFPLENBQUMsUUFBUSxFQUFFO2dCQUMvQixNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGtDQUFrQzthQUN4RTtZQUdELElBQUksU0FBUyxHQUFxQixPQUFPLENBQUMsYUFBYSxDQUFDLFVBQUEsY0FBYyxDQUFDLENBQUM7WUFDeEUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUU1QixJQUFJLE9BQU8sR0FBa0IsT0FBTyxDQUFDLFlBQVksQ0FBQyxVQUFBLGFBQWEsQ0FBQyxDQUFDO1lBQ2pFLElBQUksV0FBVyxHQUFzQixPQUFPLENBQUMsWUFBWSxDQUFDLFVBQUEsaUJBQWlCLENBQUMsQ0FBQztZQUU3RSxJQUFJLE9BQU8sSUFBSSxPQUFPLENBQUMsUUFBUSxJQUFJLFdBQVcsSUFBSSxXQUFXLENBQUMsUUFBUSxFQUFFO2dCQUN0RSxJQUFJLFlBQVksR0FBYyxVQUFBLFNBQVMsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzNGLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUNuQyxVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxxRUFBcUU7Z0JBQ25HLElBQUksTUFBTSxHQUFvQixXQUFXLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxDQUFDO2dCQUMvRCxJQUFJLGlCQUFpQixHQUE0QixPQUFPLENBQUMsWUFBWSxDQUFDLFVBQUEsdUJBQXVCLENBQUMsQ0FBQztnQkFDL0YsSUFBSSxpQkFBaUIsSUFBSSxpQkFBaUIsQ0FBQyxRQUFRLElBQUksaUJBQWlCLENBQUMsY0FBYyxJQUFJLElBQUk7b0JBQzdGLE1BQU0sR0FBRyxpQkFBaUIsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNsRSxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQztvQkFDbEMsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDNUIsT0FBTyxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO2dCQUNoQyxJQUFJLFdBQVcsQ0FBQyxZQUFZO29CQUMxQixNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLCtCQUErQjs7b0JBRWhFLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsK0JBQStCO2FBQ3BFO1lBRUQsS0FBSyxJQUFJLEtBQUssSUFBSSxPQUFPLENBQUMsV0FBVyxFQUFFLEVBQUU7Z0JBQ3ZDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxDQUFDO2dCQUVoRSxPQUFPLENBQUMsY0FBYyxJQUFJLEtBQUssQ0FBQyxjQUFjLENBQUM7Z0JBQy9DLElBQUksWUFBWSxHQUFrQixLQUFLLENBQUMsWUFBWSxDQUFDLFVBQUEsYUFBYSxDQUFDLENBQUM7Z0JBQ3BFLElBQUksUUFBUSxHQUFZLFlBQVksQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDO2dCQUN0RyxRQUFRLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQztnQkFDMUIsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDN0csVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQzFCO1lBRUQsSUFBSSxVQUFVLEVBQUU7Z0JBQ2QsT0FBTyxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssNkNBQTBCLENBQUMsQ0FBQztnQkFDM0QsTUFBTSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7YUFDckM7UUFDSCxDQUFDO1FBRU0sTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUE0QjtZQUNsRCxLQUFLLElBQUksUUFBUSxJQUFJLFVBQVUsRUFBRTtnQkFDL0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRO29CQUNwQixTQUFTO2dCQUVYLElBQUksSUFBSSxHQUFnQixRQUFRLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUNqRCxJQUFJLFlBQVksR0FBbUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzNFLElBQUksQ0FBQyxZQUFZLEVBQUU7b0JBQ2pCLFlBQVksR0FBRyxJQUFJLFVBQUEsY0FBYyxFQUFrQixDQUFDO29CQUNwRCxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUM7aUJBQ3ZDO2dCQUNELFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDN0I7UUFDSCxDQUFDO1FBQ0QsWUFBWTtRQUVaLGlCQUFpQjtRQUNqQjs7O1dBR0c7UUFDSSxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQWMsRUFBRSxVQUEyQjtZQUNsRSxNQUFNLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztZQUNwQixJQUFJLElBQUksR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDdkQsTUFBTSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxZQUFZLENBQUMsVUFBQSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFbEMsS0FBSyxJQUFJLElBQUksSUFBSSxNQUFNLEVBQUU7Z0JBQ3ZCLElBQUksT0FBTyxHQUFrQixJQUFJLENBQUMsWUFBWSxDQUFDLFVBQUEsYUFBYSxDQUFDLENBQUM7Z0JBQzlELElBQUksV0FBVyxHQUFzQixJQUFJLENBQUMsWUFBWSxDQUFDLFVBQUEsaUJBQWlCLENBQUMsQ0FBQztnQkFDMUUsSUFBSSxPQUFPLElBQUksT0FBTyxDQUFDLFFBQVEsSUFBSSxXQUFXLElBQUksV0FBVyxDQUFDLFFBQVEsRUFBRTtvQkFDdEUsd0dBQXdHO29CQUN4RyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO29CQUM3QyxtQ0FBbUM7b0JBQ25DLGlDQUFpQztpQkFDbEM7YUFDRjtZQUVELE1BQU0sQ0FBQyxZQUFZLENBQUMsVUFBQSxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUM7WUFFdkMsSUFBSSxLQUFLLEdBQVcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDMUIsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO1FBQ0QsWUFBWTtRQUVaLGlCQUFpQjtRQUNWLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBMkI7WUFDNUMsVUFBVSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDOUIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzlDLE1BQU0sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDbkMsQ0FBQztRQUdPLE1BQU0sQ0FBQyxhQUFhLENBQUMsVUFBMkI7WUFDdEQsU0FBUyxJQUFJLENBQUMsRUFBUSxFQUFFLEVBQVE7Z0JBQzlCLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzVFLENBQUM7WUFDRCxLQUFLLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxVQUFVO2dCQUNoQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsVUFBVSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBQSxhQUFhLENBQUMsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFckgsSUFBSSxNQUFNLEdBQVcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdkQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDdEMsQ0FBQztRQUVPLE1BQU0sQ0FBQyxRQUFRLENBQUMsVUFBMkIsRUFBRSxLQUF5QztZQUM1RixLQUFLLElBQUksSUFBSSxJQUFJLEtBQUssRUFBRTtnQkFDdEIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLENBQUM7YUFDbkM7UUFDSCxDQUFDO1FBRUQsaUJBQWlCO1FBQ1QsTUFBTSxDQUFDLGtCQUFrQixDQUFDLEtBQVcsRUFBRSxhQUFpQztZQUM5RSxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsRUFBRSxrQ0FBa0M7Z0JBQ2xFLGFBQWEsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUU3QixJQUFJLENBQUMsVUFBQSxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUMsTUFBTTtnQkFDL0IsT0FBTztZQUVULElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO2dCQUNuQixNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsaUVBQWlFLENBQUMsQ0FBQyxDQUFDO2FBQ3RGO1lBRUQsYUFBYSxDQUFDLG9CQUFvQixFQUFFLENBQUM7WUFFckMsSUFBSSxhQUFhLENBQUMsUUFBUSxJQUFJLFVBQUEsU0FBUyxDQUFDLFNBQVMsSUFBSSxVQUFBLE9BQU8sQ0FBQyxJQUFJLElBQUksVUFBQSxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsNkJBQTZCO2dCQUMvRyxJQUFJLGFBQWEsR0FBYyxVQUFBLFNBQVMsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxhQUFhLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztnQkFDeEcsYUFBYSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBQ3JELGFBQWEsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUNsRCxVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUM7Z0JBQzlCLE9BQU87YUFDUjtZQUVELElBQUksUUFBUSxHQUFjLFVBQUEsU0FBUyxDQUFDLFlBQVksQ0FDOUMsRUFBRSxXQUFXLEVBQUUsYUFBYSxDQUFDLFdBQVcsRUFBRSxFQUFFLFFBQVEsRUFBRSxhQUFhLENBQUMsV0FBVyxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUNuRyxDQUFDO1lBQ0YsUUFBUSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDakQsS0FBSyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQztZQUNsRCxLQUFLLENBQUMsUUFBUSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDO1lBQzVDLElBQUksUUFBUSxHQUFjLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBQSxTQUFTLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDO1lBQzlILEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzdCLFVBQUEsUUFBUSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6QixVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDM0IsQ0FBQzs7SUE1TWEsZUFBUSxHQUFjLElBQUksVUFBQSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWxELG1CQUFZLEdBQXlCLElBQUksVUFBQSxjQUFjLEVBQUUsQ0FBQztJQUMxRCxxQkFBYyxHQUFrQyxJQUFJLFVBQUEsY0FBYyxFQUFFLENBQUM7SUFDckUsYUFBTSxHQUE0QixJQUFJLEdBQUcsRUFBRSxDQUFDO0lBQzNDLGtCQUFXLEdBQXlCLElBQUksVUFBQSxjQUFjLEVBQUUsQ0FBQztJQUN6RCxpQkFBVSxHQUF5QixJQUFJLFVBQUEsY0FBYyxFQUFFLENBQUM7SUFQbkQsZ0JBQU0sU0ErTTNCLENBQUE7QUFDSCxDQUFDLEVBMU5TLFNBQVMsS0FBVCxTQUFTLFFBME5sQjtBQzFORCxJQUFVLFNBQVMsQ0FzTmxCO0FBdE5ELFdBQVUsU0FBUztJQWVqQixNQUFhLFVBQVU7UUE2QnJCLFlBQVksS0FBVztZQTVCaEIsV0FBTSxHQUFrQixJQUFJLENBQUM7WUFDN0IsU0FBSSxHQUFrQixJQUFJLENBQUM7WUE0QmhDLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLENBQUM7UUFFRCxJQUFXLE1BQU07WUFDZixPQUFPLElBQUksQ0FBQyxPQUFPLElBQUksRUFBRSxzQkFBc0I7WUFDN0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDaEUsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBZSxFQUFFLE1BQWMsRUFBRSxFQUFFO29CQUM1RSxNQUFNLEtBQUssR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQ3ZELE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQzFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDUCxTQUFTLENBQ1YsQ0FBQztRQUNKLENBQUM7UUFFRCxJQUFXLE9BQU87WUFDaEIsT0FBTyxJQUFJLENBQUMsUUFBUSxJQUFJLEVBQUUsc0JBQXNCO1lBQzlDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ2pFLElBQUksWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQWUsRUFBRSxNQUFjLEVBQUUsRUFBRTtvQkFDOUUsTUFBTSxLQUFLLEdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO29CQUN2RCxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUM5RyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ1AsU0FBUyxDQUNWLENBQUM7UUFDSixDQUFDO1FBRUQsSUFBVyxRQUFRO1lBQ2pCLE9BQU8sSUFBSSxDQUFDLFNBQVMsSUFBSSxFQUFFLHNCQUFzQjtZQUMvQyxpRUFBaUU7WUFDakUsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFlLEVBQUUsTUFBYyxFQUFFLEVBQUU7Z0JBQy9GLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQ3hELENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNULENBQUM7UUFFRCxJQUFXLE9BQU87WUFDaEIsT0FBTyxJQUFJLENBQUMsUUFBUSxJQUFJLEVBQUUsc0JBQXNCO1lBQzlDLDREQUE0RDtZQUM1RCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUMzRixDQUFDLENBQUM7UUFDUCxDQUFDO1FBRUQsSUFBVyxhQUFhO1lBQ3RCLElBQUksSUFBSSxDQUFDLGNBQWMsSUFBSSxJQUFJLEVBQUU7Z0JBQy9CLGtFQUFrRTtnQkFDbEUsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNuRSxLQUFLLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztvQkFDOUIsS0FBSyxJQUFJLEtBQUssSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO3dCQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztxQkFDM0Q7Z0JBQ0gseUJBQXlCO2dCQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7b0JBQ25DLDJEQUEyRDtvQkFDM0QsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLGdCQUFnQixHQUFHLENBQUM7d0JBQ3JDLE9BQU8sQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7Z0JBQy9CLENBQUMsQ0FBQyxDQUFDO2dCQUVILDJHQUEyRztnQkFFM0csSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFlLEVBQUUsTUFBYyxFQUFFLEVBQUU7b0JBQ3BHLE9BQU8sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO2dCQUN0RCxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ0w7WUFFRCxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDN0IsQ0FBQztRQUVELElBQVcsVUFBVTtZQUNuQixPQUFPLElBQUksQ0FBQyxXQUFXLElBQUksRUFBRSxzQkFBc0I7WUFDakQsd0RBQXdEO1lBQ3hELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRO2lCQUNuRCxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO2lCQUM3QixPQUFPLENBQUMsQ0FBQyxPQUFlLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FDckQsQ0FBQyxDQUFDO1FBQ1AsQ0FBQztRQUdELElBQVcsWUFBWTtZQUNyQixPQUFPLElBQUksQ0FBQyxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUM7UUFDaEYsQ0FBQztRQUVELElBQVcsV0FBVztZQUNwQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDM0IsQ0FBQztRQUVELElBQVcsV0FBVztZQUNwQixPQUFPLElBQUksQ0FBQyxZQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7UUFDN0UsQ0FBQztRQUVELElBQVcsY0FBYztZQUN2QixPQUFPLElBQUksQ0FBQyxlQUFlLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLENBQUM7UUFDdEYsQ0FBQztRQUVELElBQVcsVUFBVTtZQUNuQixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDMUIsQ0FBQztRQUVELElBQVcsV0FBVztZQUNwQixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDM0IsQ0FBQztRQUdNLEtBQUs7WUFDVixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNuQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztZQUNqQiw2QkFBNkI7WUFDN0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7WUFDM0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUM7WUFDMUIsSUFBSSxDQUFDLFdBQVcsR0FBRyxTQUFTLENBQUM7WUFDN0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxTQUFTLENBQUM7WUFFaEMsbUNBQW1DO1lBQ25DLElBQUksQ0FBQyxZQUFZLEdBQUcsU0FBUyxDQUFDO1lBQzlCLElBQUksQ0FBQyxhQUFhLEdBQUcsU0FBUyxDQUFDO1lBQy9CLElBQUksQ0FBQyxZQUFZLEdBQUcsU0FBUyxDQUFDO1lBQzlCLElBQUksQ0FBQyxlQUFlLEdBQUcsU0FBUyxDQUFDO1lBRWpDLElBQUksQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1FBQzVCLENBQUM7UUFFUyxrQkFBa0I7WUFDMUIsSUFBSSxTQUFTLEdBQWMsRUFBRSxDQUFDO1lBQzlCLElBQUksS0FBSyxHQUFhLEVBQUUsQ0FBQztZQUN6QixJQUFJLE9BQU8sR0FBYSxFQUFFLENBQUM7WUFDM0IsSUFBSSxDQUFDLEdBQVcsQ0FBQyxDQUFDO1lBQ2xCLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLO2dCQUM5QixLQUFLLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7b0JBQzlCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztvQkFDbEIsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDbkQsSUFBSSxJQUFJLEdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNuRCxJQUFJLElBQUk7d0JBQ04sS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztpQkFDcEI7WUFFSCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRTdDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxVQUFVLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQWMsRUFBRSxFQUFFO2dCQUNqRSxPQUFPLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDL0MsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVKLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxZQUFZLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQWMsRUFBRSxFQUFFO2dCQUNwRSxPQUFPLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDaEQsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVKLE9BQU8sSUFBSSxZQUFZLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEUsQ0FBQztRQUVTLGlCQUFpQjtZQUN6QixJQUFJLE9BQU8sR0FBYyxFQUFFLENBQUM7WUFDNUIsSUFBSSxJQUFJLEdBQVksVUFBQSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDbkMsS0FBSyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtnQkFDaEMsNERBQTREO2dCQUM1RCxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNuQixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNuQixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUMzQjtZQUNELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0UsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQzNCLENBQUM7UUFFUyxvQkFBb0I7WUFDNUIsSUFBSSxFQUFFLEdBQWEsRUFBRSxDQUFDO1lBQ3RCLDREQUE0RDtZQUM1RCxLQUFLLElBQUksQ0FBQyxHQUFXLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ3BELElBQUksS0FBSyxHQUFXLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN4QyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUM3RDtZQUNELE9BQU8sSUFBSSxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDOUIsQ0FBQztLQUNGO0lBdE1ZLG9CQUFVLGFBc010QixDQUFBO0FBQ0gsQ0FBQyxFQXROUyxTQUFTLEtBQVQsU0FBUyxRQXNObEI7QUN0TkQsSUFBVSxTQUFTLENBeVZsQjtBQXpWRCxXQUFVLFNBQVM7SUFDakI7Ozs7Ozs7T0FPRztJQUNILE1BQWEsUUFBUyxTQUFRLFVBQUEsa0JBQWtCO1FBQWhEOztZQUdTLFNBQUksR0FBVyxVQUFVLENBQUMsQ0FBQyxxQ0FBcUM7WUFDaEUsV0FBTSxHQUFvQixJQUFJLENBQUMsQ0FBQyxvRUFBb0U7WUFJM0csZ0dBQWdHO1lBQ2hHLG9FQUFvRTtZQUNwRSw2REFBNkQ7WUFDdEQsd0JBQW1CLEdBQWtCLElBQUksVUFBQSxhQUFhLEVBQUUsQ0FBQztZQUN6RCw2QkFBd0IsR0FBbUIsSUFBSSxVQUFBLGNBQWMsRUFBRSxDQUFDO1lBQ2hFLDZCQUF3QixHQUFrQixJQUFJLFVBQUEsYUFBYSxFQUFFLENBQUM7WUFDOUQsd0JBQW1CLEdBQWtCLElBQUksVUFBQSxhQUFhLEVBQUUsQ0FBQztZQUV6RCxvQkFBZSxHQUFZLElBQUksQ0FBQztZQUNoQyxvQkFBZSxHQUFZLElBQUksQ0FBQztZQUNoQyxxQkFBZ0IsR0FBc0IsVUFBQSxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7WUFFN0QsbUJBQWMsR0FBa0MsSUFBSSxVQUFBLGNBQWMsRUFBRSxDQUFDO1lBRTVFLFlBQU8sR0FBUyxJQUFJLENBQUMsQ0FBQywwQ0FBMEM7WUFDaEUsVUFBSyxHQUE2QixJQUFJLENBQUM7WUFDdkMsWUFBTyxHQUFzQixJQUFJLENBQUM7UUF1VHBDLENBQUM7UUF6VEMsT0FBTyxDQUFjLENBQUMsMENBQTBDO1FBQ2hFLEtBQUssQ0FBa0M7UUFDdkMsT0FBTyxDQUEyQjtRQUNsQyxZQUFZO1FBRVosOEVBQThFO1FBQzlFOztXQUVHO1FBQ0gsSUFBVyxRQUFRO1lBQ2pCLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDO1FBQ2xDLENBQUM7UUFFRDs7V0FFRztRQUNILElBQVcsTUFBTTtZQUNmLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN0QixDQUFDO1FBQ0Q7O1dBRUc7UUFDSCxJQUFXLE9BQU87WUFDaEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7UUFFRDs7V0FFRztRQUNJLFVBQVUsQ0FBQyxLQUFhLEVBQUUsT0FBYSxFQUFFLE9BQXdCLEVBQUUsT0FBMEI7WUFDbEcsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7WUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7WUFDdkIsSUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLDRDQUE0QztZQUV2RSxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQUEsTUFBTSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3pDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFFakQsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMxQixDQUFDO1FBQ0Q7O1dBRUc7UUFDSSxrQkFBa0I7WUFDdkIsT0FBTyxVQUFBLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3RFLENBQUM7UUFDRDs7V0FFRztRQUNJLGtCQUFrQjtZQUN2QixrRkFBa0Y7WUFDbEYsMEhBQTBIO1lBQzFILE9BQU8sVUFBQSxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNsRixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxTQUFTLENBQUMsT0FBYTtZQUM1QixJQUFJLE9BQU87Z0JBQ1QsT0FBTyxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssb0NBQXFCLENBQUMsQ0FBQztZQUN4RCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN6QixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxTQUFTO1lBQ2QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7UUFFRCxrQkFBa0I7UUFDbEI7OztXQUdHO1FBQ0ksSUFBSSxDQUFDLHVCQUFnQyxJQUFJO1lBQzlDLElBQUksQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUMxQyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsSUFBSSxVQUFBLGlCQUFpQixDQUFDLG1CQUFtQjtnQkFDaEUsVUFBQSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMzQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsSUFBSSxVQUFBLGlCQUFpQixDQUFDLElBQUksRUFBRTtnQkFDbkQsVUFBQSxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7YUFDbEQ7WUFFRCxJQUFJLENBQUMsS0FBSyxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQztZQUN6QyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FDbEIsVUFBQSxNQUFNLENBQUMsU0FBUyxFQUFFLEVBQ2xCLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUNuRixJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FDeEcsQ0FBQztRQUNKLENBQUM7UUFDRDs7VUFFRTtRQUNLLGNBQWMsQ0FBQyx1QkFBZ0MsSUFBSTtZQUN4RCxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU87Z0JBQ2YsT0FBTztZQUNULFVBQUEsTUFBTSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUTtnQkFDdkIsT0FBTztZQUNULElBQUksSUFBSSxDQUFDLGVBQWU7Z0JBQ3RCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUN0QixJQUFJLElBQUksQ0FBQyxlQUFlO2dCQUN0QixJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFFdEIsSUFBSSxvQkFBb0I7Z0JBQ3RCLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBRTdCLFVBQUEsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzFDLENBQUM7UUFDRDs7V0FFRztRQUNJLG1CQUFtQjtZQUN4QixJQUFJLE9BQU8sR0FBYyxVQUFBLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUM5QyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFO2dCQUMxQixPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQyxRQUFRLENBQUM7WUFDOUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssaURBQTRCLENBQUMsQ0FBQztZQUMxRCxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDcEIsVUFBQSxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQzVDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxLQUFLLDZDQUEwQixDQUFDLENBQUM7WUFDeEQsSUFBSSxDQUFDLGNBQWMsR0FBRyxVQUFBLE1BQU0sQ0FBQyxjQUFjLENBQUM7UUFDOUMsQ0FBQztRQUVEOzs7Ozs7V0FNRztRQUNJLG9CQUFvQixDQUFDLE1BQW9CO1lBQzlDLElBQUksU0FBUyxHQUFZLElBQUksVUFBQSxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckUsSUFBSSxHQUFHLEdBQVEsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ2hELCtHQUErRztZQUMvRyxJQUFJLFdBQVcsR0FBVyxFQUFFLENBQUM7WUFDN0IsSUFBSSxVQUFVLEdBQW9CLEVBQUUsQ0FBQztZQUNyQyxLQUFLLElBQUksT0FBTyxJQUFJLElBQUksQ0FBQyxjQUFjO2dCQUNyQyxPQUFPLENBQUMsSUFBSSxJQUFJLFVBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFMUYsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFO2dCQUN0QixJQUFJLEtBQUssR0FBVyxVQUFBLE1BQU0sQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLHVCQUF1QixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pHLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSyxFQUFFO29CQUN0QixPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2lCQUNqQzthQUNGO1lBRUQsS0FBSyxJQUFJLE9BQU8sSUFBSSxVQUFVLEVBQUU7Z0JBQzlCLE9BQU8sQ0FBQyxlQUFlLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2FBQ3RDO1FBQ0gsQ0FBQztRQUVEOztXQUVHO1FBQ0ksWUFBWTtZQUNqQixtRUFBbUU7WUFDbkUsSUFBSSxVQUFVLEdBQWMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7WUFDdEQsMEVBQTBFO1lBQzFFLElBQUksVUFBVSxHQUFjLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDekUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQztZQUN0QyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDO1lBRXhDLElBQUksUUFBbUIsQ0FBQztZQUN4QixrR0FBa0c7WUFDbEcsUUFBUSxHQUFHLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDN0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEMsVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3pCLGtHQUFrRztZQUNsRyxRQUFRLEdBQUcsSUFBSSxDQUFDLHdCQUF3QixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDdkUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDL0IsVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRXpCLHFJQUFxSTtZQUNySSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDMUMsNkpBQTZKO1lBQzdKLElBQUksVUFBVSxHQUFjLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzlFLFVBQUEsTUFBTSxDQUFDLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3RDLHFHQUFxRztZQUNyRyxVQUFBLE1BQU0sQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFMUQsVUFBQSxRQUFRLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQzNCLFVBQUEsUUFBUSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUMzQixVQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDN0IsQ0FBQztRQUVEOztXQUVHO1FBQ0ksWUFBWTtZQUNqQixJQUFJLElBQUksR0FBYyxVQUFBLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQ2xELDhEQUE4RDtZQUM5RCw2R0FBNkc7WUFDN0csT0FBTztZQUNQLElBQUksQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUN4QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FDaEksQ0FBQztRQUNKLENBQUM7UUFDRCxhQUFhO1FBRWIsZ0JBQWdCO1FBQ2hCOztXQUVHO1FBQ0ksZ0JBQWdCLENBQUMsTUFBZTtZQUNyQyxJQUFJLGFBQWEsR0FBWSxJQUFJLENBQUMsdUJBQXVCLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDbEUsSUFBSSxHQUFHLEdBQVEsSUFBSSxVQUFBLEdBQUcsQ0FBQyxJQUFJLFVBQUEsT0FBTyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsRUFBRSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFMUUsd0NBQXdDO1lBQ3hDLEdBQUcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDM0MsR0FBRyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7WUFDckQsSUFBSSxVQUFVLEdBQVMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDeEMsSUFBSSxVQUFVLEVBQUU7Z0JBQ2QsR0FBRyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUMxQyxHQUFHLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO2FBQ3JEO1lBQ0QsT0FBTyxHQUFHLENBQUM7UUFDYixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxrQkFBa0IsQ0FBQyxTQUFrQjtZQUMxQyxJQUFJLFVBQVUsR0FBWSxJQUFJLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ2xFLElBQUksU0FBUyxHQUFZLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztZQUN4RSxPQUFPLFNBQVMsQ0FBQztRQUNuQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxtQkFBbUIsQ0FBQyxPQUFnQjtZQUN6QyxJQUFJLE1BQU0sR0FBWSxJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO1lBQzVGLE1BQU0sR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO1lBQ25GLE1BQU0sR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDekUsZ0ZBQWdGO1lBQ2hGLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUM7UUFFRDs7V0FFRztRQUNJLG1CQUFtQixDQUFDLE9BQWdCO1lBQ3pDLElBQUksbUJBQW1CLEdBQWMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1lBQzFFLElBQUksS0FBSyxHQUFZLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLG1CQUFtQixDQUFDLENBQUM7WUFDckYsK0NBQStDO1lBQy9DLE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUVEOztXQUVHO1FBQ0ksbUJBQW1CLENBQUMsT0FBZ0I7WUFDekMsSUFBSSxLQUFLLEdBQVksSUFBSSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3ZELEtBQUssR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDeEMsd0VBQXdFO1lBQ3hFLE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUVEOzs7O1dBSUc7UUFDSSx1QkFBdUIsQ0FBQyxPQUFnQjtZQUM3QyxJQUFJLFNBQVMsR0FBWSxJQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDM0QsSUFBSSxVQUFVLEdBQWMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDOUUsSUFBSSxjQUFjLEdBQWMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1lBRXJFLElBQUksYUFBYSxHQUFZLElBQUksVUFBQSxPQUFPLENBQ3RDLGNBQWMsQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsS0FBSyxFQUNyRCxjQUFjLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FDeEQsQ0FBQztZQUVGLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxVQUFBLE9BQU8sQ0FBQyxjQUFjLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDekYsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUV0QixPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksaUJBQWlCLENBQUMsT0FBZ0I7WUFDdkMseURBQXlEO1lBQ3pELDBDQUEwQztZQUMxQyxrREFBa0Q7WUFDbEQsbURBQW1EO1lBQ25ELG1DQUFtQztZQUNuQyxtR0FBbUc7WUFDbkcsSUFBSSxXQUFXLEdBQVksVUFBQSxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1lBQ3RGLE9BQU8sV0FBVyxDQUFDO1FBQ3JCLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxpQkFBaUIsQ0FBQyxPQUFnQjtZQUN2QyxJQUFJLFdBQVcsR0FBWSxVQUFBLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO1lBQzNGLE9BQU8sV0FBVyxDQUFDO1FBQ3JCLENBQUM7UUFFRDs7V0FFRztRQUNJLG1CQUFtQixDQUFDLE9BQWdCO1lBQ3pDLElBQUksTUFBTSxHQUFZLElBQUksVUFBQSxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0csT0FBTyxNQUFNLENBQUM7UUFDaEIsQ0FBQztLQUNGO0lBL1VZLGtCQUFRLFdBK1VwQixDQUFBO0FBQ0gsQ0FBQyxFQXpWUyxTQUFTLEtBQVQsU0FBUyxRQXlWbEI7QUN6VkQsSUFBVSxTQUFTLENBcUxsQjtBQXJMRCxXQUFVLFNBQVM7SUFDakI7OztPQUdHO0lBQ0gsSUFBWSxlQUlYO0lBSkQsV0FBWSxlQUFlO1FBQ3pCLGdEQUE2QixDQUFBO1FBQzdCLGdDQUFnQztRQUNoQyxtQkFBbUI7SUFDckIsQ0FBQyxFQUpXLGVBQWUsR0FBZix5QkFBZSxLQUFmLHlCQUFlLFFBSTFCO0lBRUQ7OztPQUdHO0lBQ0gsSUFBWSxrQkFNWDtJQU5ELFdBQVksa0JBQWtCO1FBQzVCLHVDQUFpQixDQUFBO1FBQ2pCLHFDQUFlLENBQUE7UUFDZiwrQkFBK0I7UUFDL0IsbUNBQW1DO1FBQ25DLDBCQUEwQjtJQUM1QixDQUFDLEVBTlcsa0JBQWtCLEdBQWxCLDRCQUFrQixLQUFsQiw0QkFBa0IsUUFNN0I7SUFFRDs7T0FFRztJQUNILE1BQWEsVUFBVyxTQUFRLFVBQUEsUUFBUTtRQVF0QyxnREFBZ0Q7UUFDaEQ7WUFDRSxLQUFLLEVBQUUsQ0FBQztZQVJILGFBQVEsR0FBc0IsSUFBSSxDQUFDO1lBQ25DLFlBQU8sR0FBYyxJQUFJLENBQUM7WUFDMUIsbUJBQWMsR0FBcUIsSUFBSSxDQUFDO1lBQ3ZDLG9CQUFlLEdBQVksS0FBSyxDQUFDO1lBQ2pDLFNBQUksR0FBMkIsSUFBSSxDQUFDO1lBSzFDLFVBQVUsQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7WUFDckMsSUFBSSxDQUFDLElBQUksR0FBRyxVQUFBLFdBQVcsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQ2hELENBQUM7UUFFRDs7V0FFRztRQUNJLE1BQU0sS0FBSyxPQUFPO1lBQ3ZCLE9BQU8sSUFBSSxDQUFDLGtCQUFrQixDQUFDO1FBQ2pDLENBQUM7UUFFRDs7WUFFSTtRQUNHLFVBQVUsQ0FBQyxLQUFhLEVBQUUsT0FBYSxFQUFFLFNBQTRCLENBQUMsd0JBQXdCLEVBQUUsT0FBMEI7WUFDL0gsS0FBSyxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUNyRCxJQUFJLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQztRQUMxQixDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksS0FBSyxDQUFDLFlBQVksQ0FBQyxpQkFBa0MsZUFBZSxDQUFDLFlBQVksRUFBRSx3QkFBNEMsa0JBQWtCLENBQUMsS0FBSyxFQUNwSSxnQkFBeUIsS0FBSztZQUN0RCxJQUFJLE9BQU8sR0FBYyxNQUFNLFNBQVMsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQzNFLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxPQUFPLENBQUMscUJBQXFCLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUNqRixNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUNuQyxJQUFJLGlCQUFpQixHQUFXLFlBQVksQ0FBQywrQkFBK0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUN0RixrRUFBa0U7WUFDbEUsTUFBTSxPQUFPLENBQUMsaUJBQWlCLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxZQUFZLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRSxzQkFBc0IsRUFBRSxpQkFBaUIsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRXBJLElBQUksQ0FBQyxRQUFRLEdBQXNCLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDL0MsSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7WUFFaEMsSUFBSSxDQUFDLGVBQWUsR0FBRyxhQUFhLENBQUM7WUFDckMsSUFBSSxhQUFhLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFlBQVksR0FBRyxJQUFJLFVBQUEsa0JBQWtCLEVBQUUsQ0FBQztnQkFDakUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsWUFBWSxHQUFHLElBQUksVUFBQSxrQkFBa0IsRUFBRSxDQUFDO2FBQ2pFO1lBRUQsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7WUFFdkIsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDN0IsQ0FBQztRQUVEOztXQUVHO1FBQ0ksS0FBSyxDQUFDLFlBQVksQ0FBQyxpQkFBa0MsSUFBSSxFQUFFLHdCQUE0QyxJQUFJO1lBQ2hILFVBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDO1FBQzlELENBQUM7UUFFRDs7OztXQUlHO1FBQ0ksSUFBSSxDQUFDLHVCQUFnQyxJQUFJLEVBQUUsV0FBb0IsSUFBSTtZQUN4RSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtnQkFDakIsS0FBSyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO2dCQUNqQyxPQUFPO2FBQ1I7WUFFRCxJQUFJLElBQUksR0FBaUIsUUFBUSxFQUFFLGFBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDdEUsSUFBSSxDQUFDLElBQUk7Z0JBQ1AsT0FBTztZQUVULElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2xELEtBQUssQ0FBQyxjQUFjLENBQUMsb0JBQW9CLENBQUMsQ0FBQztZQUUzQyxJQUFJLE9BQU8sR0FBaUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDO1lBQy9ELFVBQUEsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM3QyxVQUFBLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUN4QyxLQUFLLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQzNCLElBQUksUUFBUSxHQUEwQixPQUFPLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNoRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBRTVFLElBQUksSUFBSSxDQUFDLGVBQWU7b0JBQ3RCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDdEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO2dCQUNyRCxJQUFJLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFHaEUsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLElBQUksVUFBQSxpQkFBaUIsQ0FBQyxtQkFBbUI7b0JBQ2hFLFVBQUEsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzNCLElBQUksSUFBSSxDQUFDLGdCQUFnQixJQUFJLFVBQUEsaUJBQWlCLENBQUMsSUFBSSxFQUFFO29CQUNuRCxVQUFBLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztpQkFDbEQ7YUFDRjtZQUNELFVBQUEsTUFBTSxDQUFDLGtCQUFrQixDQUFDLFVBQUEsTUFBTSxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQztRQUN6RCxDQUFDO1FBRUQ7O1dBRUc7UUFDSyx3QkFBd0I7WUFDOUIsSUFBSSxRQUFRLEdBQWMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDO1lBQ3ZELElBQUksQ0FBQyxRQUFRO2dCQUNYLE9BQU87WUFFVCxRQUFRLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQztZQUMxQixRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsc0VBQXNFO1lBQzdGLElBQUksY0FBYyxHQUFjLFFBQVEsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLG9EQUFvRDtZQUN4RyxJQUFJLGNBQWMsR0FBZSxJQUFJLFVBQUEsVUFBVSxFQUFFLENBQUM7WUFDbEQsY0FBYyxDQUFDLFdBQVcsR0FBRyxjQUFjLENBQUMsUUFBUSxDQUFDO1lBQ3JELFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxHQUFHLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLHVCQUF1QixDQUFDLElBQUksZ0JBQWdCLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDO1FBQ2xLLENBQUM7UUFFRCxxREFBcUQ7UUFDN0Msb0JBQW9CLENBQUMsUUFBaUI7WUFDNUMsSUFBSSxRQUFRLEVBQUU7Z0JBQ1osSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtvQkFDdEQsVUFBVSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRTt3QkFDNUQsSUFBSTs0QkFDRixRQUFRLFdBQVcsQ0FBQyxVQUFVLEVBQUU7Z0NBQzlCLEtBQUssQ0FBQyxPQUFPLENBQUM7b0NBQ1osSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsY0FBYyxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO29DQUNySixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsT0FBTzt3Q0FDbkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUM7eUNBQ3BEO3dDQUNILElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzt3Q0FDbkUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO3FDQUNwRTtvQ0FDRCxNQUFNO2dDQUNSLEtBQUssQ0FBQyxNQUFNLENBQUM7b0NBQ1gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsY0FBYyxFQUFFLFVBQVUsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO29DQUVwSixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsT0FBTzt3Q0FDbEMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUM7eUNBQ25EO3dDQUNILElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzt3Q0FDbEUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO3FDQUNuRTtvQ0FDRCxNQUFNOzZCQUNUO3lCQUNGO3dCQUFDLE9BQU8sQ0FBVSxFQUFFOzRCQUNuQixVQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsdUJBQXVCLEdBQUcsQ0FBQyxDQUFDLENBQUM7eUJBQ3pDO29CQUNILENBQUMsQ0FBQyxDQUFDO2lCQUNKO2FBQ0Y7UUFDSCxDQUFDOztJQXhKYyw2QkFBa0IsR0FBZSxJQUFJLENBQUM7SUFEMUMsb0JBQVUsYUEwSnRCLENBQUE7QUFDSCxDQUFDLEVBckxTLFNBQVMsS0FBVCxTQUFTLFFBcUxsQjtBQ3JMRCxJQUFVLFNBQVMsQ0FrRmxCO0FBbEZELFdBQVUsU0FBUztJQUlqQjs7O09BR0c7SUFDSCxNQUFhLGtCQUFtQixTQUFRLFVBQUEsaUJBQWlCO1FBRXZELDhGQUE4RjtRQUN2RixNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFxQixLQUFLO1lBQ2pELGtCQUFrQixDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzlELGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDO1lBQzFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDO1lBQ2pELGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDO1lBQzFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUM1RixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUV2RCxPQUFPLElBQUksT0FBTyxDQUF1QixRQUFRLENBQUMsRUFBRTtnQkFDbEQsU0FBUyxTQUFTLENBQUMsTUFBYTtvQkFDOUIsa0JBQWtCLENBQUMsbUJBQW1CLGlDQUFvQixTQUFTLENBQUMsQ0FBQztvQkFDckUsUUFBUSxDQUFlLE1BQU8sQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQztnQkFDOUQsQ0FBQztnQkFFRCxrQkFBa0IsQ0FBQyxnQkFBZ0IsaUNBQW9CLFNBQVMsQ0FBQyxDQUFDO2dCQUNsRSxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDdEMsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBRUQsOEZBQThGO1FBQ3ZGLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBNkIsRUFBRSxRQUFnQixZQUFZO1lBQzVFLEtBQUssSUFBSSxRQUFRLElBQUksT0FBTyxFQUFFO2dCQUM1QixJQUFJLE9BQU8sR0FBVyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ3hDLElBQUksSUFBSSxHQUFTLElBQUksSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztnQkFDdEQsSUFBSSxHQUFHLEdBQVcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ25ELHNDQUFzQztnQkFDdEMsSUFBSSxVQUE2QixDQUFDO2dCQUNsQyxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDekMsVUFBVSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7Z0JBQ3JDLFVBQVUsQ0FBQyxZQUFZLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDO2dCQUM5QyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDdEMsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNuQixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDdEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDakM7WUFFRCxPQUFPLElBQUksT0FBTyxDQUF1QixRQUFRLENBQUMsRUFBRTtnQkFDbEQsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNsQiwyQ0FBMkM7Z0JBQzNDLHdFQUF3RTtnQkFDeEUsNENBQTRDO2dCQUM1QyxJQUFJO2dCQUVKLG1FQUFtRTtnQkFDbkUsNkdBQTZHO2dCQUM3Ryx3REFBd0Q7WUFDMUQsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBRU0sTUFBTSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFhO1lBQ2hELFVBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxtREFBbUQsQ0FBQyxDQUFDO1lBQ2pFLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZELElBQUksUUFBUSxHQUFnQyxNQUFNLENBQUMsTUFBTyxDQUFDLEtBQUssQ0FBQztZQUNqRSxVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN2QyxJQUFJLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQztnQkFDdEIsT0FBTztZQUVULElBQUksTUFBTSxHQUF5QixFQUFFLENBQUM7WUFDdEMsTUFBTSxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRXJELElBQUksS0FBSyxHQUFnQixJQUFJLFdBQVcsaUNBQW9CLEVBQUUsTUFBTSxFQUFFLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBQzFHLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkQsQ0FBQztRQUVNLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFNBQW1CLEVBQUUsT0FBNkI7WUFDOUUsS0FBSyxJQUFJLElBQUksSUFBSSxTQUFTLEVBQUU7Z0JBQzFCLE1BQU0sT0FBTyxHQUFXLE1BQU0sSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ3hELE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDO2FBQzlCO1FBQ0gsQ0FBQztLQUNGO0lBekVZLDRCQUFrQixxQkF5RTlCLENBQUE7QUFDSCxDQUFDLEVBbEZTLFNBQVMsS0FBVCxTQUFTLFFBa0ZsQjtBQ2xGRCxJQUFVLFNBQVMsQ0E4RGxCO0FBOURELFdBQVUsU0FBUztJQUNqQjs7O09BR0c7SUFDSCxNQUFhLFlBQWdDLFNBQVEsS0FBUTtRQUczRCxZQUFtQixLQUFrQixFQUFFLEdBQUcsS0FBVTtZQUNsRCxLQUFLLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztZQUNoQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNyQixDQUFDO1FBTEQsS0FBSyxDQUFjO1FBT25CLElBQVcsSUFBSTtZQUNiLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNwQixDQUFDO1FBRU0sU0FBUyxDQUFDLFNBQW1CO1lBQ2xDLElBQUksTUFBTSxHQUFXLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDakMsS0FBSyxJQUFJLEtBQUssSUFBSSxTQUFTLEVBQUU7Z0JBQzNCLElBQUksUUFBUSxHQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDOUIsMkNBQTJDO2dCQUMzQyxZQUFZO2dCQUNaLElBQUksSUFBSSxHQUFNLElBQUksUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUN6QyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO2dCQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQ2pCO1lBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDekIsQ0FBQztRQUNNLHdCQUF3QixDQUFDLFFBQWlCO1lBQy9DLElBQUksS0FBSyxHQUEwQixFQUFFLENBQUM7WUFDdEMsS0FBSyxJQUFJLEtBQUssSUFBSSxJQUFJO2dCQUNwQixLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUM7WUFFOUMsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO1FBQ00sVUFBVTtZQUNmLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUM7UUFDbkQsQ0FBQztRQUNNLDBCQUEwQjtZQUMvQixPQUFPLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUMzQixDQUFDO1FBQ00sS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFpQjtZQUNuQyxLQUFLLElBQUksS0FBSyxJQUFJLElBQUk7Z0JBQ3BCLE1BQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxhQUFhLENBQUMsUUFBaUI7WUFDcEMsS0FBSyxJQUFJLEtBQUssSUFBSSxJQUFJLEVBQUU7Z0JBQ3RCLElBQUksWUFBWSxHQUFXLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDM0MsSUFBSSxDQUFDLFlBQVk7b0JBQ2YsU0FBUztnQkFDWCxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxVQUFBLE9BQU87b0JBQ2hDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7O29CQUUzQyxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ2pDO1FBQ0gsQ0FBQztLQUNGO0lBeERZLHNCQUFZLGVBd0R4QixDQUFBO0FBQ0gsQ0FBQyxFQTlEUyxTQUFTLEtBQVQsU0FBUyxRQThEbEI7QUM5REQsSUFBVSxTQUFTLENBMFJsQjtBQTFSRCxXQUFVLFNBQVM7SUFDakIsSUFBWSxJQUVYO0lBRkQsV0FBWSxJQUFJO1FBQ2QsbUNBQU0sQ0FBQTtRQUFFLHFDQUFPLENBQUE7SUFDakIsQ0FBQyxFQUZXLElBQUksR0FBSixjQUFJLEtBQUosY0FBSSxRQUVmO0lBNEJEOzs7O09BSUc7SUFDSCxNQUFzQixPQUFRLFNBQVEsVUFBQSxpQkFBaUI7UUFRckQ7Ozs7V0FJRztRQUNJLE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBK0IsRUFBRSxXQUFvQjtZQUMxRSxJQUFJLFNBQVMsQ0FBQyxVQUFVO2dCQUN0QixJQUFJLFNBQVMsQ0FBQyxVQUFVLElBQUksV0FBVztvQkFDckMsT0FBTzs7b0JBRVAsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMvQixTQUFTLENBQUMsVUFBVSxHQUFHLFdBQVcsSUFBSSxPQUFPLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3BFLE9BQU8sQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxHQUFHLFNBQVMsQ0FBQztRQUN0RCxDQUFDO1FBRU0sTUFBTSxDQUFDLFVBQVUsQ0FBQyxTQUErQjtZQUN0RCxPQUFPLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUNqRCxPQUFPLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztRQUN2RCxDQUFDO1FBRU0sTUFBTSxDQUFDLEtBQUs7WUFDakIsT0FBTyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7WUFDdkIsT0FBTyxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7WUFDM0IsT0FBTyxDQUFDLHFCQUFxQixFQUFFLENBQUM7WUFDaEMsaUNBQWlDO1FBQ25DLENBQUM7UUFFRCxvREFBb0Q7UUFDcEQsK0RBQStEO1FBQy9ELElBQUk7UUFFRyxNQUFNLENBQUMsa0JBQWtCLENBQUksS0FBZ0M7WUFDbEUsSUFBSSxLQUFLLEdBQTJCLEVBQUUsQ0FBQztZQUN2QyxLQUFLLElBQUksVUFBVSxJQUFJLE9BQU8sQ0FBQyxTQUFTLEVBQUU7Z0JBQ3hDLElBQUksUUFBUSxHQUF5QixPQUFPLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUNuRSxJQUFJLFFBQVEsWUFBWSxLQUFLO29CQUMzQixLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2FBQ3hCO1lBQ0QsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO1FBRU0sTUFBTSxDQUFDLGtCQUFrQixDQUFDLEtBQWE7WUFDNUMsSUFBSSxLQUFLLEdBQTJCLEVBQUUsQ0FBQztZQUN2QyxLQUFLLElBQUksVUFBVSxJQUFJLE9BQU8sQ0FBQyxTQUFTLEVBQUU7Z0JBQ3hDLElBQUksUUFBUSxHQUF5QixPQUFPLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUNuRSxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksS0FBSztvQkFDeEIsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzthQUN4QjtZQUNELE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUdEOzs7V0FHRztRQUNJLE1BQU0sQ0FBQyxVQUFVLENBQUMsU0FBK0I7WUFDdEQsaUVBQWlFO1lBQ2pFLElBQUksVUFBa0IsQ0FBQztZQUN2QjtnQkFDRSxVQUFVLEdBQUcsU0FBUyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzttQkFDdEgsT0FBTyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRTtZQUN0QyxPQUFPLFVBQVUsQ0FBQztRQUNwQixDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFxQjtZQUM1QyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxXQUFtQjtZQUNqRCxJQUFJLFFBQVEsR0FBeUIsT0FBTyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNwRSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUNiLElBQUksYUFBYSxHQUFrQixPQUFPLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUN0RSxJQUFJLENBQUMsYUFBYSxFQUFFO29CQUNsQixVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsb0JBQW9CLEVBQUUsV0FBVyxDQUFDLENBQUM7b0JBQy9DLE9BQU8sSUFBSSxDQUFDO2lCQUNiO2dCQUNELFFBQVEsR0FBRyxNQUFNLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxhQUFhLENBQUMsQ0FBQzthQUM3RDtZQUNELE9BQU8sUUFBUSxDQUFDO1FBQ2xCLENBQUM7UUFFRDs7OztXQUlHO1FBQ0ksTUFBTSxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsS0FBVyxFQUFFLHVCQUFnQyxJQUFJO1lBQ25GLElBQUksYUFBYSxHQUFrQixLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDckQsSUFBSSxLQUFLLEdBQVUsSUFBSSxVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekMsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3ZDLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFeEIsSUFBSSxvQkFBb0IsSUFBSSxLQUFLLENBQUMsU0FBUyxFQUFFLEVBQUU7Z0JBQzdDLElBQUksUUFBUSxHQUFrQixNQUFNLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDdkUsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7YUFDakQ7WUFFRCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxNQUFNLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLE1BQWE7WUFDbkQsSUFBSSxRQUFRLEdBQWtCLElBQUksVUFBQSxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQywwQ0FBMEM7WUFDbkcsTUFBTSxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7WUFDaEMsT0FBTyxRQUFRLENBQUM7UUFDbEIsQ0FBQztRQUVNLE1BQU0sQ0FBQyw4QkFBOEIsQ0FBQyxTQUF3QjtZQUNuRSxJQUFJLFNBQVMsR0FBb0IsT0FBTyxDQUFDLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDMUYsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMxQixPQUFPLENBQUMsc0JBQXNCLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxHQUFHLFNBQVMsQ0FBQztRQUNqRSxDQUFDO1FBRU0sTUFBTSxDQUFDLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxNQUFhO1lBQ3BELElBQUksU0FBUyxHQUFvQixPQUFPLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ25GLElBQUksQ0FBQyxTQUFTO2dCQUNaLE9BQU87WUFDVCxLQUFLLElBQUksUUFBUSxJQUFJLFNBQVM7Z0JBQzVCLE1BQU0sUUFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ2xDLE9BQU8sQ0FBQyxPQUFPLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDN0QsQ0FBQztRQUVNLE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQyxVQUFrQjtZQUN0RCxJQUFJLElBQUksR0FBVyxVQUFBLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM1RCxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQztnQkFDakMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxHQUFHLFVBQVUsQ0FBQztRQUNoRCxDQUFDO1FBRU0sTUFBTSxDQUFDLHFCQUFxQjtZQUNqQyxLQUFLLElBQUksSUFBSSxJQUFJLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDekMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO2dCQUNyQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEdBQUcsU0FBUyxDQUFDO2dCQUMzQyxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUN2QztRQUNILENBQUM7UUFFTSxNQUFNLENBQUMsbUJBQW1CO1lBQy9CLElBQUksVUFBVSxHQUFxQixFQUFFLENBQUM7WUFDdEMsS0FBSyxJQUFJLFNBQVMsSUFBSSxPQUFPLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQzlDLFVBQVUsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQzNCLEtBQUssSUFBSSxJQUFJLElBQUksT0FBTyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxFQUFFO29CQUNwRCxJQUFJLE1BQU0sR0FBb0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQ3JGLG1KQUFtSjtvQkFFbkosSUFBSTt3QkFDRixJQUFJLENBQUMsR0FBWSxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3dCQUN2QyxJQUFJLENBQUMsQ0FBQyxTQUFTLFlBQVksVUFBQSxlQUFlOzRCQUN4QyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUN0QztvQkFBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRTtpQkFDdkI7YUFDRjtZQUNELE9BQU8sVUFBVSxDQUFDO1FBQ3BCLENBQUM7UUFFTSxNQUFNLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFpQjtZQUM5QyxJQUFJLE1BQU0sR0FBc0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNqRSxNQUFNLENBQUMsSUFBSSxHQUFHLGlCQUFpQixDQUFDO1lBQ2hDLDBCQUEwQjtZQUMxQixNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNyQixzREFBc0Q7WUFDdEQsSUFBSSxJQUFJLEdBQW9CLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDMUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN6QixVQUFBLEtBQUssQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBRTdCLE9BQU8sSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7Z0JBQ3JDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztnQkFDakQsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUU7b0JBQ3BDLFVBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQztvQkFDcEMsTUFBTSxFQUFFLENBQUM7Z0JBQ1gsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsTUFBTSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDL0IsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBRU0sTUFBTSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBaUI7WUFDakQsTUFBTSxRQUFRLEdBQWEsTUFBTSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDN0MsTUFBTSxtQkFBbUIsR0FBVyxNQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUUxRCxJQUFJLGFBQWEsR0FBa0IsVUFBQSxVQUFVLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7WUFDekUsSUFBSSxjQUFjLEdBQWMsTUFBTSxPQUFPLENBQUMsV0FBVyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3pFLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxXQUFXLDJDQUF5QixFQUFFLE1BQU0sRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLGNBQWMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3JILE9BQU8sY0FBYyxDQUFDO1FBQ3hCLENBQUM7UUFFTSxNQUFNLENBQUMsS0FBSyxDQUFDLHFCQUFxQjtZQUN2QyxNQUFNLElBQUksR0FBb0IsUUFBUSxDQUFDLElBQUksQ0FBQztZQUM1QyxJQUFJLEtBQUssR0FBZ0MsSUFBSSxDQUFDLGdCQUFnQixDQUFDLHNCQUFzQixDQUFDLENBQUM7WUFDdkYsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLEVBQUU7Z0JBQ3RCLElBQUksR0FBRyxHQUFnQixJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNoRCxNQUFNLE9BQU8sQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDbEM7UUFDSCxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsU0FBUztZQUNyQixJQUFJLGFBQWEsR0FBNkIsRUFBRSxDQUFDO1lBQ2pELEtBQUssSUFBSSxVQUFVLElBQUksT0FBTyxDQUFDLFNBQVMsRUFBRTtnQkFDeEMsSUFBSSxRQUFRLEdBQXlCLE9BQU8sQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQ25FLElBQUksVUFBVSxJQUFJLFFBQVEsQ0FBQyxVQUFVO29CQUNuQyxVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsc0JBQXNCLEVBQUUsUUFBUSxDQUFDLENBQUM7Z0JBQ2hELGFBQWEsQ0FBQyxVQUFVLENBQUMsR0FBRyxVQUFBLFVBQVUsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDNUQ7WUFDRCxPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksTUFBTSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBd0M7WUFDdEUsT0FBTyxDQUFDLGFBQWEsR0FBRyxjQUFjLENBQUM7WUFDdkMsT0FBTyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7WUFDdkIsS0FBSyxJQUFJLFVBQVUsSUFBSSxjQUFjLEVBQUU7Z0JBQ3JDLElBQUksYUFBYSxHQUFrQixjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQzlELElBQUksUUFBUSxHQUF5QixNQUFNLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxhQUFhLENBQUMsQ0FBQztnQkFDdEYsSUFBSSxRQUFRO29CQUNWLE9BQU8sQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEdBQUcsUUFBUSxDQUFDO2FBQzVDO1lBQ0QsT0FBTyxPQUFPLENBQUMsU0FBUyxDQUFDO1FBQzNCLENBQUM7UUFFTyxNQUFNLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLGNBQTZCO1lBQ3BFLE9BQXNDLFVBQUEsVUFBVSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUMvRSxDQUFDOztJQW5QYSxpQkFBUyxHQUFjLEVBQUUsQ0FBQztJQUMxQixxQkFBYSxHQUE2QixFQUFFLENBQUM7SUFDN0Msd0JBQWdCLEdBQXFCLEVBQUUsQ0FBQztJQUN4QyxlQUFPLEdBQVEsSUFBSSxHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7SUFDNUMsWUFBSSxHQUFTLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDMUIsOEJBQXNCLEdBQTJCLEVBQUUsQ0FBQztJQU45QyxpQkFBTyxVQXFQNUIsQ0FBQTtBQUNILENBQUMsRUExUlMsU0FBUyxLQUFULFNBQVMsUUEwUmxCO0FDMVJELElBQVUsU0FBUyxDQTJFbEI7QUEzRUQsV0FBVSxTQUFTO0lBQUMsSUFBQSxHQUFHLENBMkV0QjtJQTNFbUIsV0FBQSxHQUFHO1FBQ3JCOzs7OztXQUtHO1FBQ0gsTUFBYSxZQUFZO1lBSXZCLFlBQW1CLE9BQW9CO2dCQUNyQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUNsQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztZQUNsQixDQUFDO1lBRU0sT0FBTyxDQUFDLFVBQWtCLElBQUksQ0FBQyxNQUFNO2dCQUMxQyxPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3JELENBQUM7WUFFTSxPQUFPLENBQUMsVUFBa0IsSUFBSSxDQUFDLE1BQU07Z0JBQzFDLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDckMsQ0FBQztZQUVNLFFBQVEsQ0FBQyxVQUFrQixJQUFJLENBQUMsTUFBTTtnQkFDM0MsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dCQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3JDLENBQUM7WUFFTSxTQUFTLENBQUMsVUFBa0IsSUFBSSxDQUFDLE1BQU07Z0JBQzVDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQztnQkFDMUIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDNUMsQ0FBQztZQUVNLFNBQVMsQ0FBQyxVQUFrQixJQUFJLENBQUMsTUFBTTtnQkFDNUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dCQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztZQUMvQyxDQUFDO1lBRU0sUUFBUSxDQUFDLFVBQWtCLElBQUksQ0FBQyxNQUFNO2dCQUMzQyxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sR0FBRyxDQUFDLENBQUM7Z0JBQzFCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQzNDLENBQUM7WUFFTSxRQUFRLENBQUMsVUFBa0IsSUFBSSxDQUFDLE1BQU07Z0JBQzNDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQztnQkFDMUIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDM0MsQ0FBQztZQUVNLFFBQVEsQ0FBQyxVQUFrQixJQUFJLENBQUMsTUFBTTtnQkFDM0MsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLEdBQUcsQ0FBQyxDQUFDO2dCQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztZQUM5QyxDQUFDO1lBRU0sVUFBVSxDQUFDLFVBQWtCLElBQUksQ0FBQyxNQUFNO2dCQUM3QyxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sR0FBRyxDQUFDLENBQUM7Z0JBQzFCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQzdDLENBQUM7WUFFTSxVQUFVLENBQUMsVUFBa0IsSUFBSSxDQUFDLE1BQU07Z0JBQzdDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxHQUFHLENBQUMsQ0FBQztnQkFDMUIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDN0MsQ0FBQztZQUVNLFNBQVMsQ0FBQyxPQUFlLEVBQUUsVUFBa0IsSUFBSSxDQUFDLE1BQU07Z0JBQzdELE9BQU8sTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNuRixDQUFDO1lBRU0sQ0FBQyxXQUFXLENBQTRCLE9BQWdCLEVBQUUsT0FBZSxFQUFFLFVBQWtCLElBQUksQ0FBQyxNQUFNO2dCQUM3RyxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQztnQkFDdEIsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDeEMsTUFBTSxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUMxQjtZQUNILENBQUM7U0FDRjtRQW5FWSxnQkFBWSxlQW1FeEIsQ0FBQTtJQUNILENBQUMsRUEzRW1CLEdBQUcsR0FBSCxhQUFHLEtBQUgsYUFBRyxRQTJFdEI7QUFBRCxDQUFDLEVBM0VTLFNBQVMsS0FBVCxTQUFTLFFBMkVsQjtBQzNFRCxJQUFVLFNBQVMsQ0F5TWxCO0FBek1ELFdBQVUsU0FBUztJQUFDLElBQUEsR0FBRyxDQXlNdEI7SUF6TW1CLFdBQUEsR0FBRztRQTJLckIsSUFBWSxzQkFFWDtRQUZELFdBQVksc0JBQXNCO1lBQ2hDLDJFQUFRLENBQUE7WUFBRSw2RUFBUyxDQUFBO1lBQUUseUZBQWUsQ0FBQTtZQUFFLHVFQUFNLENBQUE7WUFBRSx5RUFBTyxDQUFBO1FBQ3ZELENBQUMsRUFGVyxzQkFBc0IsR0FBdEIsMEJBQXNCLEtBQXRCLDBCQUFzQixRQUVqQztRQUVELElBQVksd0JBRVg7UUFGRCxXQUFZLHdCQUF3QjtZQUNsQywyRUFBTSxDQUFBO1lBQUUseUZBQWEsQ0FBQTtRQUN2QixDQUFDLEVBRlcsd0JBQXdCLEdBQXhCLDRCQUF3QixLQUF4Qiw0QkFBd0IsUUFFbkM7SUF3QkgsQ0FBQyxFQXpNbUIsR0FBRyxHQUFILGFBQUcsS0FBSCxhQUFHLFFBeU10QjtBQUFELENBQUMsRUF6TVMsU0FBUyxLQUFULFNBQVMsUUF5TWxCO0FDek1ELElBQVUsU0FBUyxDQTZlbEI7QUE3ZUQsV0FBVSxTQUFTO0lBQ2pCOzs7T0FHRztJQUNILE1BQWEsU0FBUztRQW1CcEIsWUFBbUIsT0FBb0IsRUFBRSxJQUFZO1lBTHJELG1CQUFjLEdBQWUsRUFBRSxDQUFDO1lBTTlCLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDO1lBQ2hCLElBQUksQ0FBQyxLQUFLLEdBQUcsVUFBQSxHQUFHLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDL0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDeEIsSUFBSSxDQUFDLEdBQUcsR0FBRyxVQUFBLEdBQUcsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3hCLENBQUM7UUF0QkQsTUFBTSxDQUFDLGdCQUFnQixDQUFXO1FBQ2xDLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBVztRQU10QyxPQUFPLENBQVU7UUFDakIsTUFBTSxDQUFTO1FBQ2YsT0FBTyxDQUFlO1FBQ3RCLFVBQVUsQ0FBYTtRQUN2QixjQUFjLENBQWtCO1FBQ2hDLFNBQVMsQ0FBWTtRQUNyQixVQUFVLENBQWE7UUFDdkIsV0FBVyxDQUFjO1FBVWxCLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQVk7WUFDbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO2dCQUNmLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUN2QixNQUFNLFFBQVEsR0FBYSxNQUFNLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDN0MsTUFBTSxNQUFNLEdBQWdCLE1BQU0sUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDO2dCQUN6RCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksU0FBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQzthQUNsRDtZQUNELE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixDQUFDO1FBRU8sTUFBTSxLQUFLLGVBQWU7WUFDaEMsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCO2dCQUNwRCxJQUFJLFVBQUEsUUFBUSxDQUFDLG9CQUFvQixFQUFFLFVBQUEsYUFBYSxFQUFFLElBQUksVUFBQSxhQUFhLENBQUMsVUFBQSxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FDekYsQ0FBQztRQUNKLENBQUM7UUFFTyxNQUFNLEtBQUssbUJBQW1CO1lBQ3BDLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFvQjtnQkFDNUQsSUFBSSxVQUFBLFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxVQUFBLGlCQUFpQixFQUFFLElBQUksVUFBQSxhQUFhLENBQUMsVUFBQSxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FDakcsQ0FBQztRQUNKLENBQUM7UUFFTSxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQWlCLENBQUM7WUFDdEMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO2dCQUNmLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUN6QixNQUFNLFdBQVcsR0FBaUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ3BFLE1BQU0sS0FBSyxHQUFVLElBQUksVUFBQSxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNqRCxLQUFLLE1BQU0sUUFBUSxJQUFJLFdBQVcsQ0FBQyxRQUFRLEVBQUU7b0JBQzNDLElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxPQUFPLEVBQUU7d0JBQzVCLElBQUksUUFBUSxDQUFDLE9BQU8sSUFBSSxVQUFVOzRCQUNoQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sVUFBQSxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7NEJBRWhGLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztxQkFDeEY7aUJBQ0Y7Z0JBQ0QsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7b0JBQ3pFLE1BQU0sU0FBUyxHQUFjLE1BQU0sSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsbUJBQW1CLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUMvRixJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLElBQUksSUFBSSxXQUFXLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQy9HLEtBQUssTUFBTSxLQUFLLElBQUksS0FBSyxFQUFFO3dCQUN6QixJQUFJLEtBQUssQ0FBQyxJQUFJLElBQUksV0FBVzs0QkFDM0IsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLFVBQUEsaUJBQWlCLENBQ2xELFNBQVMsRUFBRSxVQUFBLGtCQUFrQixDQUFDLElBQUksRUFBRSxVQUFBLHNCQUFzQixDQUFDLFNBQVMsQ0FDckUsQ0FBQyxDQUFDO3FCQUNOO2lCQUNGO2dCQUNELFVBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDeEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxLQUFLLENBQUM7YUFDOUI7WUFDRCxPQUFPLE1BQU0sVUFBQSxPQUFPLENBQUMsbUJBQW1CLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLENBQUM7UUFFTSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQWMsRUFBRSxLQUFZO1lBQy9DLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTTtnQkFDZCxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDeEIsNkJBQTZCO2dCQUM3QixNQUFNLFFBQVEsR0FBYyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ25FLE1BQU0sSUFBSSxHQUFTLElBQUksVUFBQSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUMzQyxNQUFNLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQzdDLG9FQUFvRTtnQkFDcEUsaUZBQWlGO2dCQUNqRiwyRUFBMkU7Z0JBQzNFLHVFQUF1RTtnQkFDdkUsUUFBUTtnQkFDUiw0QkFBNEI7Z0JBQzVCLDRFQUE0RTtnQkFDNUUsNkJBQTZCO2dCQUM3Qix1RUFBdUU7Z0JBQ3ZFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDO2dCQUUzQixpQ0FBaUM7Z0JBQ2pDLElBQUksUUFBUSxDQUFDLFFBQVE7b0JBQUUsS0FBSyxNQUFNLFFBQVEsSUFBSSxRQUFRLENBQUMsUUFBUSxFQUFFO3dCQUMvRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLElBQUksT0FBTyxFQUFFOzRCQUM1QixJQUFJLEtBQUssSUFBSSxRQUFRLENBQUMsT0FBTyxJQUFJLFVBQVUsRUFBRTtnQ0FDM0MsTUFBTSxRQUFRLEdBQWEsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dDQUM1RCxJQUFJLGdCQUFrQyxDQUFDO2dDQUN2QyxLQUFLLE1BQU0sS0FBSyxJQUFJLEtBQUssRUFBRTtvQ0FDekIsSUFBSSxLQUFLLFlBQVksVUFBQSxnQkFBZ0IsSUFBSSxLQUFLLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxVQUFVO3dDQUM1RSxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7aUNBQzVCO2dDQUNELElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLElBQUksTUFBTSxVQUFBLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDOzZCQUM1RTs7Z0NBQ0MsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7eUJBQ2hGOzZCQUFNLElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxVQUFVLEVBQUU7NEJBQ3RDLE1BQU0sSUFBSSxHQUFlLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7NEJBQzNGLE1BQU0sT0FBTyxHQUFrQixJQUFJLFVBQUEsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDOzRCQUN2RCxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksVUFBQSxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQzs0QkFDcEUsSUFBSSxJQUFJLFlBQVksVUFBQSxRQUFRLEVBQUU7Z0NBQzVCLE1BQU0sUUFBUSxHQUFhLE1BQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHNDQUFzQztnQ0FDdkksT0FBTyxDQUFDLFFBQVEsR0FBRyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFxQixJQUFJLE1BQU0sVUFBQSxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztnQ0FDdkcsS0FBSyxNQUFNLGNBQWMsSUFBSSxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQTZCLEVBQUU7b0NBQy9FLE1BQU0sSUFBSSxHQUFTLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7b0NBQzNFLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQUMsQ0FBQztvQ0FDaEQsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO3dDQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsZUFBZSxDQUFDLENBQUM7aUNBQzVEO2dDQUNELElBQUksQ0FBQyxZQUFZLENBQUMsVUFBQSxpQkFBaUIsQ0FBQyxDQUFDLFFBQVEsR0FBRyxTQUFTLENBQUMsbUJBQW1CLENBQUM7NkJBQy9FOzRCQUNELElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7eUJBQzVCOzZCQUFNLElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxVQUFVLEVBQUU7NEJBQ3RDLG1HQUFtRzs0QkFDbkcsTUFBTSxTQUFTLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs0QkFDdkUsTUFBTSxRQUFRLEdBQWEsTUFBTSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDOzRCQUM3RCxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQUEsaUJBQWlCLENBQUMsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFBLGFBQWEsQ0FBQyxDQUFDLElBQUksWUFBWSxVQUFBLFFBQVEsQ0FBQyxDQUFDO2dDQUN6RyxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLFVBQUEsUUFBUSxDQUM5RSxRQUFRLENBQUMsSUFBSSxFQUNiLFFBQVEsQ0FBQyxTQUFTLEVBQUUsSUFBSSxVQUFBLFdBQVcsQ0FBQyxDQUFDO29DQUNuQyxVQUFBLGVBQWUsQ0FBQyxDQUFDO29DQUNqQixVQUFBLHVCQUF1QixFQUN6QixRQUFRLENBQUMsSUFBSSxDQUNkLENBQUMsQ0FBQyxDQUFDO2dDQUNKLFFBQVEsQ0FBQzt5QkFDWjtxQkFDRjthQUNGO1lBQ0QsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdCLENBQUM7UUFFTSxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQWM7WUFDakMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO2dCQUNmLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztnQkFDdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQzNCLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksVUFBVSxDQUFDLENBQUM7b0JBQ3BFLElBQUksVUFBQSxRQUFRLEVBQUUsQ0FBQyxDQUFDO29CQUNoQixJQUFJLFVBQUEsVUFBVSxFQUFFLENBQ25CLENBQUMsSUFBSSxDQUFDLFVBQUEsYUFBYSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDdkUsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlCLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLE1BQWM7WUFDckMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVO2dCQUNsQixJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztZQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDNUIsTUFBTSxXQUFXLEdBQWlCLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDNUUsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLFlBQVksWUFBWSxVQUFBLE9BQU8sQ0FBQztvQkFDaEQsV0FBVyxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQy9DLHlHQUF5RztnQkFDekcsd0dBQXdHO2dCQUN4RywySEFBMkg7Z0JBQzNILElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxVQUFBLFFBQVEsQ0FDcEMsV0FBVyxDQUFDLElBQUksRUFDaEIsV0FBVyxDQUFDLFlBQVksSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLFlBQVksWUFBWSxVQUFBLE9BQU8sQ0FBQyxDQUFDLENBQUM7b0JBQzFFLFVBQUEsbUJBQW1CLENBQUMsQ0FBQztvQkFDckIsVUFBQSxXQUFXLEVBQ2IsV0FBVyxDQUFDLFlBQVksSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLFlBQVksWUFBWSxVQUFBLE9BQU8sQ0FBQyxDQUFDLENBQUM7b0JBQzFFLElBQUksVUFBQSxxQkFBcUIsQ0FDdkIsSUFBSSxVQUFBLEtBQUssQ0FBQyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsRUFDdkMsTUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQ2xGLFdBQVcsQ0FBQyxhQUFhLElBQUksQ0FBQyxFQUM5QixXQUFXLENBQUMsY0FBYyxJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUN4RSxDQUFDLENBQUM7b0JBQ0gsSUFBSSxVQUFBLGFBQWEsQ0FDZixJQUFJLFVBQUEsS0FBSyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsWUFBdUIsSUFBSSxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsRUFDaEYsV0FBVyxDQUFDLGFBQWEsSUFBSSxDQUFDLEVBQzlCLFdBQVcsQ0FBQyxjQUFjLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQ3hFLENBQ0osQ0FBQzthQUNIO1lBQ0QsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRS9CLFNBQVMsT0FBTyxDQUFDLE1BQW9CO2dCQUNuQyxJQUFJLE1BQU07b0JBQ1IsT0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7O29CQUV0RCxPQUFPLFNBQVMsQ0FBQztZQUNyQixDQUFDO1FBQ0gsQ0FBQztRQUVNLEtBQUssQ0FBQyxVQUFVLENBQUMsTUFBYztZQUNwQyxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO2dCQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVM7b0JBQ2pCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO2dCQUN0QixJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDO29CQUN4QixPQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBRXpDLE1BQU0sUUFBUSxHQUFjLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzFFLE1BQU0sT0FBTyxHQUFpQixJQUFJLFVBQUEsWUFBWSxFQUFFLENBQUM7Z0JBQ2pELE9BQU8sQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztnQkFDNUIsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUM5QyxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7Z0JBQy9CLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUM3RixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQztnQkFDakMsMkNBQTJDO1lBQzdDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQztRQUVELHVHQUF1RztRQUN2Ryx3Q0FBd0M7UUFDeEM7O1dBRUc7UUFDSSxLQUFLLENBQUMsV0FBVyxDQUFDLFlBQXVCO1lBQzlDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVTtnQkFDbEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7WUFDdkIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLElBQUksU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLE1BQU0sQ0FBQyxLQUFLLElBQUcsRUFBRTtnQkFDakcsTUFBTSxRQUFRLEdBQWEsSUFBSSxVQUFBLFFBQVEsQ0FBQyxXQUFXLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDN0UsSUFBSSxRQUFRLEdBQWMsWUFBWSxDQUFDO2dCQUN2QyxPQUFPLFFBQVEsQ0FBQyxPQUFPLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsT0FBTyxJQUFJLFVBQVUsQ0FBQztvQkFDdEYsUUFBUSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sSUFBSSxVQUFVLENBQUMsQ0FBQztnQkFDN0UsTUFBTSxTQUFTLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNwRyxRQUFRLENBQUMsUUFBUSxDQUFDLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO2dCQUNqRCxLQUFLLE1BQU0sSUFBSSxJQUFJLFFBQVEsRUFBRTtvQkFDM0IsSUFBSSxJQUFJLElBQUksUUFBUSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLE9BQU8sSUFBSSxVQUFVO3dCQUM5RixRQUFRLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO2lCQUMvQjtnQkFDRCxRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7Z0JBQzFCLFVBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDM0IsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQy9CLE9BQU8sUUFBUSxDQUFDO1lBQ2xCLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDUCxDQUFDO1FBRU0sS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFjO1lBQ3RDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVztnQkFDbkIsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7WUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQzdCLE1BQU0sU0FBUyxHQUFlLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDbEUsTUFBTSxZQUFZLEdBQXdCLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO2dCQUN6RSxNQUFNLGFBQWEsR0FRZixFQUFFLFFBQVEsRUFBRSxFQUFFLFdBQVcsRUFBRSxFQUFFLGFBQWEsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7Z0JBQ3pELEtBQUssTUFBTSxXQUFXLElBQUksWUFBWSxFQUFFO29CQUN0QyxJQUFJLE9BQU8sV0FBVyxDQUFDLEVBQUUsSUFBSSxRQUFRLElBQUksT0FBTyxXQUFXLENBQUMsRUFBRSxJQUFJLFFBQVEsSUFBSSxPQUFPLFdBQVcsQ0FBQyxFQUFFLElBQUksUUFBUTt3QkFDN0csU0FBUztvQkFDWCxNQUFNLE1BQU0sR0FBYyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksV0FBVyxDQUFDLENBQUM7b0JBQzNGLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7d0JBQzFELENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO3dCQUNwRSxDQUFDLEVBQUUsYUFBYTt3QkFDaEIsQ0FBQyxFQUFFLFVBQVU7d0JBQ2IsQ0FBQyxFQUFFLE9BQU87cUJBQ1gsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2lCQUN0RTtnQkFDRCxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksVUFBQSxTQUFTLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxhQUFhLENBQUMsQ0FBQzthQUN6RTtZQUNELE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRUQ7Ozs7V0FJRztRQUNLLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxTQUFvQixFQUFFLEtBQVc7WUFDL0QsTUFBTSxXQUFXLEdBQVcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQztZQUN4SCxNQUFNLE1BQU0sR0FBUyxXQUFXLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztZQUVwRixNQUFNLGdCQUFnQixHQUFjLFNBQVMsQ0FBQyxXQUFXLElBQUksU0FBUyxDQUFDLFdBQVcsSUFBSSxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQzVHLFVBQUEsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUM7Z0JBQ3RCLFNBQVMsQ0FBQztZQUNaLElBQUksU0FBUyxDQUFDLFdBQVcsRUFBRTtnQkFDekIsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDO2FBQzVFO1lBQ0QsSUFBSSxTQUFTLENBQUMsV0FBVyxFQUFFO2dCQUN6QixnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxVQUFBLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDO2FBQ25IO1lBQ0QsSUFBSSxTQUFTLENBQUMsWUFBWSxFQUFFO2dCQUMxQixJQUFJLHNCQUFzQixHQUFjLFVBQUEsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxZQUFZLEVBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDaEgsc0JBQXNCLEdBQUcsVUFBQSxTQUFTLENBQUMsU0FBUyxDQUFDLHNCQUFzQixDQUFDLENBQUM7Z0JBQ3JFLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO2FBQ25EO1lBRUQsTUFBTSxlQUFlLEdBQWMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUN2RCxVQUFBLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsVUFBQSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMvRSxTQUFTLENBQUM7WUFFWixNQUFNLHNCQUFzQixHQUFjLE1BQU0sQ0FBQyxDQUFDLENBQUMsVUFBQSxTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztZQUU1RyxNQUFNLG1CQUFtQixHQUFjLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUU7Z0JBQ3BELE1BQU0sbUJBQW1CLEdBQWMsVUFBQSxTQUFTLENBQUMsU0FBUyxDQUFDLHNCQUFzQixDQUFDLENBQUM7Z0JBQ25GLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxVQUFBLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM5RSxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUM5QyxPQUFPLG1CQUFtQixDQUFDO1lBQzdCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztZQUVqQixNQUFNLHFCQUFxQixHQUFjLE1BQU0sSUFBSSxnQkFBZ0IsSUFBSSxlQUFlLENBQUMsQ0FBQyxDQUFDLFVBQUEsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7WUFDMUgsSUFBSSxNQUFNLElBQUksZ0JBQWdCLElBQUksZUFBZSxFQUFFO2dCQUNqRCxNQUFNLFdBQVcsR0FBVyxTQUFTLENBQUMsV0FBVyxJQUFJLENBQUMsQ0FBQztnQkFDdkQsSUFBSSxXQUFXLElBQUksQ0FBQyxFQUFFO29CQUNwQixJQUFJLE1BQU07d0JBQ1IscUJBQXFCLENBQUMsUUFBUSxDQUFDLHNCQUFzQixDQUFDLENBQUM7b0JBQ3pELElBQUksZ0JBQWdCO3dCQUNsQixxQkFBcUIsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztvQkFDbkQsSUFBSSxNQUFNO3dCQUNSLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO29CQUN0RCxJQUFJLGVBQWU7d0JBQ2pCLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQztpQkFDbkQ7cUJBQU0sSUFBSSxXQUFXLElBQUksQ0FBQyxFQUFFO29CQUMzQixJQUFJLE1BQU0sRUFBRTt3QkFDVixxQkFBcUIsQ0FBQyxRQUFRLENBQUMsc0JBQXNCLENBQUMsQ0FBQzt3QkFDdkQscUJBQXFCLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLENBQUM7cUJBQ3JEO29CQUNELElBQUksZ0JBQWdCO3dCQUNsQixxQkFBcUIsQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztvQkFDbkQsSUFBSSxlQUFlO3dCQUNqQixxQkFBcUIsQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUM7aUJBQ25EO3FCQUFNO29CQUNMLElBQUksTUFBTTt3QkFDUixxQkFBcUIsQ0FBQyxRQUFRLENBQUMsc0JBQXNCLENBQUMsQ0FBQztvQkFDekQsSUFBSSxnQkFBZ0I7d0JBQ2xCLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO29CQUNuRCxJQUFJLE1BQU0sRUFBRTt3QkFDVixxQkFBcUIsQ0FBQyxRQUFRLENBQUMsbUJBQW1CLENBQUMsQ0FBQzt3QkFDcEQsSUFBSSw0QkFBNEIsR0FBYyxVQUFBLFNBQVMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQzt3QkFDekYsNEJBQTRCLEdBQUcsVUFBQSxTQUFTLENBQUMsU0FBUyxDQUFDLDRCQUE0QixDQUFDLENBQUM7d0JBQ2pGLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO3FCQUM5RDtvQkFDRCxJQUFJLGVBQWU7d0JBQ2pCLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsQ0FBQztpQkFDbkQ7YUFDRjtZQUVELHVDQUF1QztZQUN2QyxJQUFJLFdBQW9CLENBQUM7WUFDekIsV0FBVyxHQUFHLFVBQUEsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1lBQzdCLElBQUksU0FBUyxDQUFDLGNBQWM7Z0JBQzFCLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxjQUFjLEVBQUUsVUFBQSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuRixJQUFJLFNBQVMsQ0FBQyxjQUFjO2dCQUMxQixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUM1QyxJQUFJLFNBQVMsQ0FBQyxhQUFhO2dCQUN6QixXQUFXLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUUzQyxNQUFNLFlBQVksR0FBYyxVQUFBLFNBQVMsQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDbkUsSUFBSSxnQkFBZ0I7Z0JBQ2xCLFlBQVksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUUxQyxXQUFXLEdBQUcsVUFBQSxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDN0IsSUFBSSxTQUFTLENBQUMsYUFBYTtnQkFDekIsV0FBVyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDaEQsSUFBSSxTQUFTLENBQUMsYUFBYTtnQkFDekIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDM0MsSUFBSSxTQUFTLENBQUMsWUFBWTtnQkFDeEIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7WUFDMUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUVwQyxJQUFJLGVBQWU7Z0JBQ2pCLFlBQVksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDekMsSUFBSSxTQUFTLENBQUMsWUFBWTtnQkFDeEIsWUFBWSxDQUFDLFNBQVMsQ0FBQyxVQUFBLE9BQU8sQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFcEUsTUFBTSxtQkFBbUIsR0FBYyxNQUFNLENBQUMsQ0FBQztnQkFDN0MsVUFBQSxTQUFTLENBQUMsV0FBVyxDQUFDLFVBQUEsU0FBUyxDQUFDLGNBQWMsQ0FDNUMsTUFBTSxDQUFDLFFBQVEsRUFDZixVQUFBLFNBQVMsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUNoRCxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hCLFVBQUEsU0FBUyxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUM7WUFFbEQsWUFBWSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1lBQ3RDLFlBQVksQ0FBQyxRQUFRLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUM3QyxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUVqQyxJQUFJLE1BQU07Z0JBQ1IsWUFBWSxDQUFDLFFBQVEsQ0FBQyxVQUFBLFNBQVMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ3BFLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxVQUFBLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFDM0QsQ0FBQztRQUVPLGtCQUFrQixDQUFDLE9BQW9DLEVBQUUsUUFBdUI7WUFDdEYsT0FBTyxDQUNMLE9BQU8sSUFBSSxTQUFTLENBQUMsQ0FBQztnQkFDcEIsUUFBUSxFQUFFLENBQUMsQ0FBQztnQkFDWixPQUFPLFlBQVksVUFBQSxPQUFPLENBQUMsQ0FBQztvQkFDMUIsT0FBTyxDQUFDLENBQUM7b0JBQ1QsSUFBSSxVQUFBLE9BQU8sQ0FDVCxPQUFPLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxRQUFRLENBQUMsQ0FBQzt3QkFDaEQsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUNYLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFvQixDQUFDLE9BQU8sRUFDOUMsT0FBTyxPQUFPLENBQUMsRUFBRSxJQUFJLFFBQVEsQ0FBQyxDQUFDO3dCQUM3QixPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7d0JBQ1gsT0FBTyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQW9CLENBQUMsT0FBTyxFQUM5QyxPQUFPLE9BQU8sQ0FBQyxFQUFFLElBQUksUUFBUSxDQUFDLENBQUM7d0JBQzdCLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQzt3QkFDWCxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksRUFBb0IsQ0FBQyxPQUFPLENBQy9DLENBQ04sQ0FBQztRQUNKLENBQUM7UUFFTyxtQkFBbUIsQ0FBQyxTQUE0QixFQUFFLE9BQWtCO1lBQzFFLE1BQU0sY0FBYyxHQUE4QixFQUFFLENBQUM7WUFDckQsS0FBSyxNQUFNLFNBQVMsSUFBSSxTQUFTO2dCQUFFLElBQUksU0FBUyxJQUFJLElBQUksSUFBSSxTQUFTLElBQUksSUFBSSxJQUFJLFNBQVMsSUFBSSxJQUFJLEVBQUU7b0JBQ2xHLE1BQU0sS0FBSyxHQUEyQixTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7b0JBQzNELElBQUksT0FBTyxLQUFLLElBQUksUUFBUSxFQUFFO3dCQUM1QixNQUFNLFFBQVEsR0FBc0IsSUFBSSxVQUFBLGlCQUFpQixFQUFFLENBQUM7d0JBQzVELEtBQUssSUFBSSxDQUFDLEdBQVcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRTs0QkFDckQsaUdBQWlHOzRCQUNqRywwSEFBMEg7NEJBQzFILFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxVQUFBLFlBQVksQ0FDOUIsTUFBTSxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsRUFDM0csS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FDdkIsQ0FBQyxDQUFDO3lCQUNKO3dCQUNELGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUM7cUJBQ3ZEO2lCQUNGO1lBRUQsSUFBSSxTQUFTLENBQUMsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLElBQUksT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFO2dCQUMxRSxJQUFJLGFBQXdCLENBQUM7Z0JBQzdCLElBQUksT0FBTyxDQUFDLFdBQVc7b0JBQ3JCLGFBQWEsR0FBRyxVQUFBLFNBQVMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUMxRCxJQUFJLFlBQXVCLENBQUM7Z0JBQzVCLElBQUksT0FBTyxDQUFDLFlBQVk7b0JBQ3RCLFlBQVksR0FBRyxVQUFBLFNBQVMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUUxRCxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDO3FCQUNuRCxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLENBQUM7cUJBQ2hDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUM7cUJBQ3ZCLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsQ0FBQyxhQUFhO3FCQUN2RCxNQUFNLENBQUMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsS0FBSyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxvQkFBb0I7cUJBQ25GLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRTtvQkFDWCxPQUFPLEVBQUUsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztvQkFDcEcsU0FBUyxPQUFPLENBQUMsU0FBNEI7d0JBQzNDLE9BQU8sU0FBUyxFQUFFLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLENBQUM7b0JBQy9ELENBQUM7Z0JBQ0gsQ0FBQyxDQUFDO3FCQUNELE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtvQkFDaEIsSUFBSSxjQUFjLEdBQVksVUFBQSxRQUFRLENBQUMsR0FBRyxDQUFDLFVBQUEsT0FBTyxDQUFDLENBQUM7b0JBQ3BELGNBQWMsQ0FBQyxHQUFHLENBQ2hCLE1BQU0sQ0FBQyxDQUFDLEVBQUUsS0FBSyxJQUFJLENBQUMsRUFDcEIsTUFBTSxDQUFDLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUNwQixNQUFNLENBQUMsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLENBQ3JCLENBQUM7b0JBQ0YsTUFBTSxXQUFXLEdBQWMsVUFBQSxTQUFTLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDO29CQUNsRSxJQUFJLGFBQWE7d0JBQ2YsV0FBVyxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQzVDLElBQUksWUFBWTt3QkFDZCxXQUFXLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO29CQUNyQyxjQUFjLEdBQUcsV0FBVyxDQUFDLGNBQWMsRUFBRSxDQUFDO29CQUM5QyxJQUFJLE1BQU0sQ0FBQyxDQUFDO3dCQUNWLE1BQU0sQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLGNBQWMsQ0FBQyxDQUFDLENBQUM7b0JBQ3BDLElBQUksTUFBTSxDQUFDLENBQUM7d0JBQ1YsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQztvQkFDcEMsSUFBSSxNQUFNLENBQUMsQ0FBQzt3QkFDVixNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDO2dCQUN0QyxDQUFDLENBQUMsQ0FBQzthQUNOO1lBRUQsT0FBTyxjQUFjLENBQUM7UUFDeEIsQ0FBQztRQUVPLFVBQVUsQ0FBQyxTQUFrQixFQUFFLFNBQW9CO1lBQ3pELElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVTtnQkFDdkIsT0FBTyxTQUFTLENBQUM7WUFFbkIsTUFBTSxJQUFJLEdBQWlCLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUMzQyxNQUFNLE1BQU0sR0FBWSxVQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQSxPQUFPLENBQUMsQ0FBQztZQUM5QyxNQUFNLENBQUMsR0FBRyxDQUNSLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUN2QyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFDdkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQ3hDLENBQUM7WUFDRixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO0tBRUY7SUF2ZVksbUJBQVMsWUF1ZXJCLENBQUE7QUFDSCxDQUFDLEVBN2VTLFNBQVMsS0FBVCxTQUFTLFFBNmVsQjtBQzdlRCxJQUFVLFNBQVMsQ0FxQ2xCO0FBckNELFdBQVUsU0FBUztJQUFDLElBQUEsR0FBRyxDQXFDdEI7SUFyQ21CLFdBQUEsR0FBRztRQUNyQjs7OztXQUlHO1FBQ0gsTUFBYSxJQUFJO1lBUWYsWUFBbUIsS0FBYSxFQUFFLGVBQXFDLEVBQUUsYUFBMkI7Z0JBQ2xHLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO2dCQUNsQixJQUFJLENBQUMsY0FBYyxHQUFHLGVBQWUsQ0FBQztnQkFDdEMsSUFBSSxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUM7WUFDcEMsQ0FBQztZQVRELFNBQVMsQ0FBUztZQUNsQixXQUFXLENBQWlCO1lBVTVCLElBQVcsVUFBVTtnQkFDbkIsT0FBTyxJQUFJLENBQUMsV0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQztZQUN4RSxDQUFDO1lBRUQsSUFBVyxRQUFRO2dCQUNqQixPQUFPLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDO1lBQ2xFLENBQUM7U0FDRjtRQXJCWSxRQUFJLE9BcUJoQixDQUFBO1FBTUQsSUFBWSxhQUVYO1FBRkQsV0FBWSxhQUFhO1lBQ3ZCLGlFQUFZLENBQUE7WUFBRSw2REFBVSxDQUFBO1FBQzFCLENBQUMsRUFGVyxhQUFhLEdBQWIsaUJBQWEsS0FBYixpQkFBYSxRQUV4QjtJQUVILENBQUMsRUFyQ21CLEdBQUcsR0FBSCxhQUFHLEtBQUgsYUFBRyxRQXFDdEI7QUFBRCxDQUFDLEVBckNTLFNBQVMsS0FBVCxTQUFTLFFBcUNsQjtBQ3JDRCxJQUFVLFNBQVMsQ0FzTGxCO0FBdExELFdBQVUsU0FBUztJQUFDLElBQUEsR0FBRyxDQXNMdEI7SUF0TG1CLFdBQUEsR0FBRztRQUNyQjs7O1dBR0c7UUFDSCxTQUFnQixhQUFhLENBQUMsTUFBYztZQUMxQyxNQUFNLEdBQUcsR0FBUTtnQkFDZixTQUFTLEVBQUUsU0FBUztnQkFDcEIsT0FBTyxFQUFFO29CQUNQLEdBQUcsRUFBRSxTQUFTO29CQUNkLE1BQU0sRUFBRSxFQUFFO29CQUNWLFVBQVUsRUFBRSxFQUFFO29CQUNkLFNBQVMsRUFBRSxFQUFFO29CQUNiLEtBQUssRUFBRSxFQUFFO29CQUNULFFBQVEsRUFBRSxFQUFFO29CQUNaLFVBQVUsRUFBRSxFQUFFO2lCQUNmO2dCQUNELFdBQVcsRUFBRSxTQUFTO2FBQ3ZCLENBQUM7WUFFRixLQUFLLE1BQU0sSUFBSSxJQUFJLE1BQU0sRUFBRTtnQkFDekIsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLFdBQVc7b0JBQzFCLEdBQUcsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFFBQVE7eUJBQzFCLE1BQU0sQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLElBQUksVUFBVSxDQUFDO3lCQUN6RCxHQUFHLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztxQkFDakQsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLFNBQVM7b0JBQzdCLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO3FCQUM3RSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksYUFBYTtvQkFDakMsR0FBRyxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO2dCQUN6RixJQUFJLEdBQUcsQ0FBQyxTQUFTLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLFdBQVc7b0JBQ3JELE1BQU07YUFDVDtZQUVELFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNsQixnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUVsRSxPQUFPLEdBQUcsQ0FBQztRQUNiLENBQUM7UUFoQ2UsaUJBQWEsZ0JBZ0M1QixDQUFBO1FBRUQsU0FBUyxXQUFXLENBQUMsS0FBVztZQUM5QixNQUFNLFFBQVEsR0FBVztnQkFDdkIsR0FBRyxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFXO2dCQUNsQyxJQUFJLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQVc7Z0JBQ25DLE1BQU0sRUFBRSxLQUFLO2dCQUNiLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDO2FBQ2xELENBQUM7WUFDRixPQUFPLFFBQVEsQ0FBQztRQUNsQixDQUFDO1FBRUQsU0FBUyxTQUFTLENBQUMsS0FBVyxFQUFFLElBQVM7WUFDdkMsTUFBTSxXQUFXLEdBQWMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDMUUsTUFBTSxNQUFNLEdBQVc7Z0JBQ3JCLEdBQUcsRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBVztnQkFDbEMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3BCLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUNwQixPQUFPLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQVc7Z0JBQ3RDLE1BQU0sRUFBRSxLQUFLO2dCQUNiLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDO2FBQ2hELENBQUM7WUFDRixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDO1FBRUQsU0FBUyxZQUFZLENBQUMsSUFBUztZQUM3QixLQUFLLE1BQU0sTUFBTSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFO2dCQUNyQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksT0FBTztvQkFDeEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUM5QixJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksVUFBVTtvQkFDaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUNsQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksVUFBVTtvQkFDaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUNqQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksTUFBTTtvQkFDNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUM3QixJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksU0FBUztvQkFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO3FCQUNoQyxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksV0FBVztvQkFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2FBQ3hDO1FBQ0gsQ0FBQztRQUVELFNBQVMsYUFBYSxDQUFDLEtBQVc7WUFDaEMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRTtnQkFDakUsT0FBTyxDQUFDLElBQUksQ0FBQyxtQkFBbUIsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsQ0FBQztnQkFDeEUsT0FBTyxJQUFJLENBQUM7YUFDYjtZQUNELE9BQU87Z0JBQ0wsUUFBUSxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFXO2dCQUN2QyxTQUFTLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQVc7Z0JBQ3hDLFlBQVksRUFBRSxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQVcsQ0FBQyxDQUFDLENBQUMsSUFBSTthQUNqRixDQUFDO1FBQ0osQ0FBQztRQUVELFNBQVMsZ0JBQWdCLENBQUMsWUFBMEIsRUFBRSxVQUFzQixFQUFFLFFBQWtCO1lBQzlGLEtBQUssTUFBTSxVQUFVLElBQUksWUFBWSxFQUFFO2dCQUNyQyxJQUFJLE1BQU0sR0FBVyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLFFBQVEsSUFBSSxVQUFVLENBQUMsU0FBUyxDQUFXLENBQUM7Z0JBQy9HLElBQUksS0FBYSxDQUFDO2dCQUNsQixLQUFLLE1BQU0sTUFBTSxJQUFJLFFBQVEsRUFBRTtvQkFDN0IsSUFBSSxNQUFNLElBQUksU0FBUyxJQUFJLE1BQU0sQ0FBQyxHQUFHLElBQUksVUFBVSxDQUFDLFNBQVM7d0JBQzNELE1BQU0sR0FBRyxNQUFNLENBQUM7b0JBQ2xCLElBQUksS0FBSyxJQUFJLFNBQVMsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLFVBQVUsQ0FBQyxRQUFRO3dCQUN6RCxLQUFLLEdBQUcsTUFBTSxDQUFDO29CQUNqQixJQUFJLE1BQU0sSUFBSSxTQUFTLElBQUksS0FBSyxJQUFJLFNBQVM7d0JBQzNDLE1BQU07aUJBQ1Q7Z0JBQ0QsSUFBSSxLQUFLO29CQUNQLENBQUMsS0FBSyxDQUFDLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ3ZELElBQUksVUFBVSxDQUFDLFlBQVksSUFBSSxJQUFJO29CQUNqQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDOztvQkFFdkQsTUFBaUIsQ0FBQyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7YUFDM0U7UUFDSCxDQUFDO1FBRUQsU0FBUyxvQkFBb0IsQ0FBQyxLQUFXLEVBQUUsT0FBZTtZQUN4RCxJQUFJLE9BQU8sQ0FBQyxNQUFNO2dCQUNoQixPQUFPLE9BQU8sQ0FBQztZQUNqQixLQUFLLE1BQU0sS0FBSyxJQUFJLEtBQUssQ0FBQyxRQUFRLEVBQUU7Z0JBQ2xDLElBQUksS0FBSyxDQUFDLElBQUksSUFBSSxjQUFjO29CQUM5QixLQUFLLE1BQU0sVUFBVSxJQUFJLEtBQUssQ0FBQyxRQUFRLEVBQUU7d0JBQ3ZDLE1BQU0sSUFBSSxHQUFXLGtCQUFrQixDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFXLENBQUMsQ0FBQzt3QkFDNUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7NEJBQ2hCLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxVQUFVLENBQUMsQ0FBQztxQkFDbEQ7cUJBQ0U7b0JBQ0gsTUFBTSxJQUFJLEdBQVcsa0JBQWtCLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUNwRCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQzt3QkFDaEIsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUMzQzthQUNGO1lBQ0QsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDdEIsT0FBTyxPQUFPLENBQUM7UUFDakIsQ0FBQztRQUVELFNBQVMsZ0JBQWdCLENBQUMsS0FBVztZQUNuQyxPQUFPLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUM7Z0JBQ2hDLENBQUMsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FDckIsQ0FBQyxjQUFjLEVBQUUsWUFBWSxFQUFFLEVBQUU7b0JBQy9CLE1BQU0sSUFBSSxHQUFXLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDM0QsSUFBSSxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksU0FBUzt3QkFDbkMsY0FBYyxDQUFDLElBQUksQ0FBQyxHQUFHLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxDQUFDO3lCQUNuRDt3QkFDSCxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFlBQVksS0FBSyxDQUFDOzRCQUMxQyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFXLENBQUMsQ0FBQzt3QkFDekQsY0FBYyxDQUFDLElBQUksQ0FBYyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxZQUFZLENBQVcsQ0FBQyxDQUFDO3FCQUNuRjtvQkFDRCxPQUFPLGNBQWMsQ0FBQztnQkFDeEIsQ0FBQyxFQUNELEVBQVksQ0FDYjtnQkFDRCxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QixDQUFDO1FBRUQsU0FBUyxrQkFBa0IsQ0FBQyxLQUFXO1lBQ3JDLFFBQVEsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQVcsRUFBRTtnQkFDckMsS0FBSyxNQUFNO29CQUNULE9BQU8sS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQVksQ0FBQztnQkFFeEMsS0FBSyxLQUFLLENBQUM7Z0JBQ1gsS0FBSyxNQUFNLENBQUM7Z0JBQ1osS0FBSyxXQUFXLENBQUM7Z0JBQ2pCLEtBQUssUUFBUSxDQUFDO2dCQUNkLEtBQUssUUFBUSxDQUFDO2dCQUNkLEtBQUssYUFBYTtvQkFDaEIsT0FBTyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBVyxDQUFDO2dCQUV2QyxLQUFLLE9BQU8sQ0FBQztnQkFDYixLQUFLLFVBQVUsQ0FBQztnQkFDaEIsS0FBSyxVQUFVLENBQUM7Z0JBQ2hCLEtBQUssaUJBQWlCLENBQUM7Z0JBQ3ZCLEtBQUssY0FBYyxDQUFDO2dCQUNwQixLQUFLLGFBQWE7b0JBQ2hCLE9BQU8sSUFBSSxVQUFBLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQWEsQ0FBQyxDQUFDO2dCQUVsRSxLQUFLLFNBQVMsQ0FBQztnQkFDZjtvQkFDRSxPQUFPLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFXLENBQUM7YUFDeEM7UUFDSCxDQUFDO1FBRUQsU0FBUyxrQkFBa0IsQ0FBQyxLQUFhO1lBQ3ZDLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDeEMsQ0FBQztJQUVILENBQUMsRUF0TG1CLEdBQUcsR0FBSCxhQUFHLEtBQUgsYUFBRyxRQXNMdEI7QUFBRCxDQUFDLEVBdExTLFNBQVMsS0FBVCxTQUFTLFFBc0xsQjtBQ3RMRCxJQUFVLFNBQVMsQ0E4SGxCO0FBOUhELFdBQVUsU0FBUztJQUFDLElBQUEsR0FBRyxDQThIdEI7SUE5SG1CLFdBQUEsR0FBRztRQUNyQjs7OztXQUlHO1FBQ0gsU0FBZ0Isb0JBQW9CLENBQUMsT0FBb0I7WUFDdkQsSUFBSSxPQUFPLENBQUMsVUFBVSxHQUFHLGdCQUFnQixDQUFDLE1BQU07Z0JBQzlDLE1BQU0sdUJBQXVCLENBQUM7WUFFaEMsTUFBTSxJQUFJLEdBQWlCLElBQUksSUFBQSxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDckQsTUFBTSxVQUFVLEdBQWUsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDeEcsTUFBTSwwQkFBMEIsR0FDNUIsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUcsRUFBRSxDQUFDLE1BQU0sSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzlFLElBQUksQ0FBQywwQkFBMEI7Z0JBQzdCLE1BQU0sdUJBQXVCLENBQUM7WUFFaEMsTUFBTSxPQUFPLEdBQVcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3pDLE1BQU0sc0JBQXNCLEdBQVksT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLGlCQUFpQjtZQUMxRSxNQUFNLEtBQUssR0FBVyxFQUFFLENBQUM7WUFFekIsT0FBTyxJQUFJLEVBQUU7Z0JBQ1gsTUFBTSxJQUFJLEdBQVMsUUFBUSxDQUFDLElBQUksRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO2dCQUMxRCxJQUFJLElBQUksSUFBSSxJQUFJO29CQUFFLE1BQU07Z0JBQ3hCLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDbEI7WUFFRCxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUF0QmUsd0JBQW9CLHVCQXNCbkMsQ0FBQTtRQUVELFNBQVMsUUFBUSxDQUFDLEtBQW1CLEVBQUUsbUJBQTRCO1lBQ2pFLE1BQU0sU0FBUyxHQUFXLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUM5RixJQUFJLFNBQVMsSUFBSSxDQUFDO2dCQUNoQixPQUFPLElBQUksQ0FBQztZQUVkLE1BQU0sZ0JBQWdCLEdBQVcsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3JHLE1BQU0sb0JBQW9CLEdBQVcsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3pHLE1BQU0sVUFBVSxHQUFXLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUM1QyxNQUFNLElBQUksR0FBVyxLQUFLLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2pELE1BQU0sZ0JBQWdCLEdBQVcsS0FBSyxDQUFDLE1BQU0sQ0FBQztZQUM5QyxNQUFNLGNBQWMsR0FBVyxnQkFBZ0IsR0FBRyxvQkFBb0IsQ0FBQztZQUV2RSxNQUFNLElBQUksR0FBUyxJQUFJLElBQUEsSUFBSSxDQUN6QixJQUFJLEVBQ0osR0FBRyxFQUFFO2dCQUNILEtBQUssQ0FBQyxNQUFNLEdBQUcsZ0JBQWdCLENBQUM7Z0JBQ2hDLE1BQU0sVUFBVSxHQUFtQixFQUFFLENBQUM7Z0JBQ3RDLEtBQUssSUFBSSxTQUFTLEdBQVcsQ0FBQyxFQUFFLFNBQVMsR0FBRyxnQkFBZ0IsRUFBRSxTQUFTLEVBQUUsRUFBRTtvQkFDekUsVUFBVSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztpQkFDdEM7Z0JBQ0QsT0FBTyxVQUFVLENBQUM7WUFDcEIsQ0FBQyxFQUNELEdBQUcsRUFBRTtnQkFDSCxLQUFLLENBQUMsTUFBTSxHQUFHLGNBQWMsQ0FBQztnQkFDOUIsTUFBTSxRQUFRLEdBQVcsRUFBRSxDQUFDO2dCQUM1QixPQUFPLFNBQVMsR0FBRyxLQUFLLENBQUMsTUFBTSxHQUFHLGtCQUFrQixFQUFFO29CQUNwRCxNQUFNLEtBQUssR0FBYSxRQUFRLENBQUMsS0FBSyxFQUFFLG1CQUFtQixDQUFDLENBQUM7b0JBQzdELElBQUksS0FBSzt3QkFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUNqQztnQkFDRCxPQUFPLFFBQVEsQ0FBQztZQUNsQixDQUFDLENBQ0YsQ0FBQztZQUVGLEtBQUssQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDO1lBRXpCLE9BQU8sSUFBSSxDQUFDO1FBQ2QsQ0FBQztRQUVELFNBQVMsWUFBWSxDQUFDLEtBQW1CO1lBQ3ZDLE1BQU0sUUFBUSxHQUFXLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUV6QyxNQUFNLEtBQUssR0FBcUI7Z0JBQzlCLENBQUMsRUFBRSxLQUFLLENBQUMsT0FBTztnQkFDaEIsQ0FBQyxFQUFFLEtBQUssQ0FBQyxRQUFRO2dCQUNqQixDQUFDLEVBQUUsS0FBSyxDQUFDLFFBQVE7Z0JBQ2pCLENBQUMsRUFBRSxLQUFLLENBQUMsUUFBUTtnQkFDakIsQ0FBQyxFQUFFLEtBQUssQ0FBQyxVQUFVO2dCQUNuQixDQUFDLEVBQUUsS0FBSyxDQUFDLFVBQVU7Z0JBQ25CLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDO2dCQUNyRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQztnQkFDckUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN2RCxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxVQUFVLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ3pELENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDekQsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN6RCxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxhQUFhLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzVELENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLFlBQVksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDN0QsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksWUFBWSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO2FBQzlELENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBRXpCLElBQUksS0FBSyxJQUFJLElBQUk7Z0JBQ2YsVUFBQSxLQUFLLENBQUMsSUFBSSxDQUFDLHlCQUF5QixRQUFRLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUVoRSxPQUFPLEtBQUssQ0FBQztRQUNmLENBQUM7UUFFRCxTQUFTLFNBQVMsQ0FBNEIsS0FBbUIsRUFBRSxPQUFnQjtZQUNqRixNQUFNLE1BQU0sR0FBVyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDekMsTUFBTSxRQUFRLEdBQXNCLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUN0RCxNQUFNLFVBQVUsR0FBVyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDN0MsTUFBTSxTQUFTLEdBQVcsS0FBSyxDQUFDLE1BQU0sR0FBRyxVQUFVLENBQUM7WUFFcEQsTUFBTSxRQUFRLEdBQWlCLFFBQVEsSUFBSSxHQUFHLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUN2RSxDQUFDLEdBQUcsRUFBRTtvQkFDSixNQUFNLFNBQVMsR0FBZSxJQUFJLFVBQVUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO29CQUMxRixNQUFNLFlBQVksR0FBZSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7b0JBQ2xILE9BQU8sSUFBSSxJQUFBLFlBQVksQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztnQkFDNUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNOLEtBQUssQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRXJDLEtBQUssQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDO1lBRXpCLE9BQU8sUUFBUSxDQUFDO1FBQ2xCLENBQUM7UUFFRCxTQUFTLE9BQU8sQ0FBNEIsS0FBbUIsRUFBRSxPQUFnQjtZQUMvRSxnRUFBZ0U7WUFDaEUseUVBQXlFO1lBQ3pFLE1BQU0sTUFBTSxHQUFXLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUN6QyxPQUFPLEtBQUssQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQUEsQ0FBQztRQUM3QyxDQUFDO1FBRUQsTUFBTSxnQkFBZ0IsR0FDbEIsVUFBVSxDQUFDLElBQUksQ0FBQyx3Q0FBd0MsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVoRyxNQUFNLGtCQUFrQixHQUFXLEVBQUUsQ0FBQztJQUV4QyxDQUFDLEVBOUhtQixHQUFHLEdBQUgsYUFBRyxLQUFILGFBQUcsUUE4SHRCO0FBQUQsQ0FBQyxFQTlIUyxTQUFTLEtBQVQsU0FBUyxRQThIbEI7QUU5SEQsSUFBVSxTQUFTLENBMmdCbEI7QUEzZ0JELFdBQVUsU0FBUztJQUNqQjs7O09BR0c7SUFDSCxNQUFhLFVBQVU7UUFtQnJCLFlBQW9CLEtBQWdCLEVBQUUsSUFBWTtZQUNoRCxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNsQixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztRQUNsQixDQUFDO1FBYkQsT0FBTyxDQUFVO1FBQ2pCLE1BQU0sQ0FBUztRQUNmLFFBQVEsQ0FBb0I7UUFDNUIsV0FBVyxDQUFjO1FBQ3pCLE9BQU8sQ0FBZTtRQUN0QixVQUFVLENBQWE7UUFDdkIsU0FBUyxDQUFZO1FBQ3JCLFVBQVUsQ0FBYTtRQUN2QixRQUFRLENBQWdCO1FBT2pCLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQVk7WUFDbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPO2dCQUNmLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUN2QixNQUFNLFFBQVEsR0FBYSxNQUFNLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDN0MsTUFBTSxJQUFJLEdBQWMsTUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQzlDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsd0JBQXdCO2lCQUM1RCxLQUFLLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQzNFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQ2pEO1lBQ0QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVCLENBQUM7UUFFTSxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQWM7WUFDbEMsTUFBTSxNQUFNLEdBQVcsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUM1RyxJQUFJLE1BQU0sSUFBSSxDQUFDLENBQUM7Z0JBQ2QsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsS0FBSyxrQkFBa0IsQ0FBQyxDQUFDO1lBQ2pFLE9BQU8sTUFBTSxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzVDLENBQUM7UUFFTSxLQUFLLENBQUMsZUFBZSxDQUFDLFVBQWtCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztZQUM1RCxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU87Z0JBQ2YsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUU7Z0JBQzFCLE1BQU0sU0FBUyxHQUFlLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2dCQUN4RCxNQUFNLEtBQUssR0FBVSxJQUFJLFVBQUEsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDL0MsS0FBSyxNQUFNLEtBQUssSUFBSSxTQUFTLENBQUMsS0FBSztvQkFDakMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDbkQsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxNQUFNLEdBQUcsQ0FBQztvQkFDbEMsS0FBSyxDQUFDLFlBQVksQ0FBQyxJQUFJLFVBQUEsaUJBQWlCLENBQUMsTUFBTSxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMvRSxVQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7Z0JBQ3hCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEdBQUcsS0FBSyxDQUFDO2FBQy9CO1lBQ0QsT0FBTyxNQUFNLFVBQUEsT0FBTyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNsRSxDQUFDO1FBRU0sS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFhO1lBQ2hDLE1BQU0sS0FBSyxHQUFXLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLENBQUM7WUFDOUUsSUFBSSxLQUFLLElBQUksQ0FBQyxDQUFDO2dCQUNiLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLEtBQUssaUJBQWlCLENBQUMsQ0FBQztZQUNoRSxPQUFPLE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQyxDQUFDO1FBRU0sS0FBSyxDQUFDLGNBQWMsQ0FBQyxNQUFjO1lBQ3hDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTTtnQkFDZCxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDeEIsTUFBTSxRQUFRLEdBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ3BELElBQUksU0FBUyxHQUFXLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUM7Z0JBQ3ZGLE1BQU0sSUFBSSxHQUFTLFNBQVMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksVUFBQSxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFVBQUEsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFFMUYscUJBQXFCO2dCQUNyQixJQUFJLFFBQVEsQ0FBQyxRQUFRO29CQUNuQixLQUFLLE1BQU0sS0FBSyxJQUFJLFFBQVEsQ0FBQyxRQUFRO3dCQUNuQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUVwRCwyQkFBMkI7Z0JBQzNCLElBQUksUUFBUSxDQUFDLE1BQU0sSUFBSSxRQUFRLENBQUMsUUFBUSxJQUFJLFFBQVEsQ0FBQyxLQUFLLElBQUksUUFBUSxDQUFDLFdBQVcsRUFBRTtvQkFDbEYsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBQSxrQkFBa0IsQ0FBQzt3QkFDeEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLFVBQUEsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDO29CQUM5QyxJQUFJLFFBQVEsQ0FBQyxNQUFNLEVBQUU7d0JBQ25CLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7cUJBQ3ZEO3lCQUFNO3dCQUNMLElBQUksUUFBUSxDQUFDLFdBQVc7NEJBQ3RCLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksVUFBQSxPQUFPLENBQUMsR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQzt3QkFDaEUsSUFBSSxRQUFRLENBQUMsUUFBUSxFQUFFOzRCQUNyQixNQUFNLFFBQVEsR0FBZSxJQUFJLFVBQUEsVUFBVSxFQUFFLENBQUM7NEJBQzlDLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDOzRCQUNoQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7eUJBQzVDO3dCQUNELElBQUksUUFBUSxDQUFDLEtBQUs7NEJBQ2hCLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksVUFBQSxPQUFPLENBQUMsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztxQkFDdkQ7aUJBQ0Y7Z0JBRUQsbUJBQW1CO2dCQUNuQixJQUFJLFFBQVEsQ0FBQyxNQUFNLElBQUksU0FBUyxFQUFFO29CQUNoQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2lCQUNqRTtnQkFFRCw4QkFBOEI7Z0JBQzlCLElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxTQUFTLEVBQUU7b0JBQzlCLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxVQUFBLGFBQWEsQ0FBQyxNQUFNLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFFL0UsTUFBTSxRQUFRLEdBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzlELElBQUksUUFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQzt3QkFDaEMsTUFBTSxJQUFJLEtBQUssQ0FBQyxRQUFRLFFBQVEsQ0FBQyxJQUFJLGdIQUFnSCxDQUFDLENBQUM7b0JBRXpKLE1BQU0sU0FBUyxHQUFXLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUM7b0JBQzdELElBQUksU0FBUyxJQUFJLFNBQVMsRUFBRTt3QkFDMUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLFVBQUEsaUJBQWlCLENBQUMsTUFBTSxJQUFJLENBQUMsa0JBQWtCLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBQSxhQUFhLENBQUMsQ0FBQyxJQUFJLFlBQVksVUFBQSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7cUJBQy9JO3lCQUFNO3dCQUNMLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFBLGFBQWEsQ0FBQyxDQUFDLElBQUksWUFBWSxVQUFBLFFBQVEsRUFBRTs0QkFDN0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxtQkFBbUI7Z0NBQ2pDLFVBQVUsQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLFVBQUEsUUFBUSxDQUFDLHlCQUF5QixFQUFFLFVBQUEsaUJBQWlCLEVBQUUsSUFBSSxVQUFBLGFBQWEsQ0FBQyxVQUFBLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDOzRCQUNySSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksVUFBQSxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDO3lCQUMxRTs2QkFBTTs0QkFDTCxJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWU7Z0NBQzdCLFVBQVUsQ0FBQyxlQUFlLEdBQUcsSUFBSSxVQUFBLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxVQUFBLGFBQWEsRUFBRSxJQUFJLFVBQUEsYUFBYSxDQUFDLFVBQUEsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7NEJBQ3pILElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxVQUFBLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO3lCQUN0RTtxQkFDRjtpQkFDRjtnQkFFRCw2QkFBNkI7Z0JBQzdCLElBQUksUUFBUSxDQUFDLElBQUksSUFBSSxTQUFTLEVBQUU7b0JBQzlCLElBQUksU0FBUyxHQUFXLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2pFLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBQSxhQUFhLENBQUMsQ0FBQyxRQUFRLEdBQXFCLE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztpQkFDcEc7Z0JBRUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUM7Z0JBRTNCLDBDQUEwQztnQkFDMUMsSUFBSSxTQUFTLElBQUksQ0FBQyxFQUFFO29CQUNsQixJQUFJLGdCQUFnQixHQUFxQixNQUFNLFVBQUEsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7b0JBQ2pILGtFQUFrRTtvQkFDbEUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDLENBQUM7b0JBQ3BGLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsZ0JBQWdCLENBQUM7aUJBQ3hDO2FBQ0Y7WUFDRCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDN0IsQ0FBQztRQUVNLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBYTtZQUNsQyxNQUFNLE9BQU8sR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLEtBQUssQ0FBQyxDQUFDO1lBQ3RGLElBQUksT0FBTyxJQUFJLENBQUMsQ0FBQztnQkFDZixNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixLQUFLLG1CQUFtQixDQUFDLENBQUM7WUFDbEUsT0FBTyxNQUFNLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QyxDQUFDO1FBRU0sS0FBSyxDQUFDLGdCQUFnQixDQUFDLFFBQWdCO1lBQzVDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtnQkFDaEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7WUFDckIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7Z0JBQzVCLE1BQU0sVUFBVSxHQUFnQixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztnQkFDNUQsTUFBTSxNQUFNLEdBQW9CLElBQUksVUFBQSxlQUFlLEVBQUUsQ0FBQztnQkFFdEQsSUFBSSxVQUFVLENBQUMsV0FBVztvQkFDeEIsTUFBTSxDQUFDLGNBQWMsQ0FDbkIsVUFBVSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQ2xDLFVBQVUsQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLFVBQUEsSUFBSSxDQUFDLE9BQU8sRUFDMUMsSUFBSSxFQUNKLFVBQVUsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUM1QixVQUFVLENBQUMsV0FBVyxDQUFDLElBQUksQ0FDNUIsQ0FBQzs7b0JBRUYsTUFBTSxDQUFDLG1CQUFtQixDQUN4QixDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUM3QixVQUFVLENBQUMsWUFBWSxDQUFDLElBQUksRUFDNUIsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLElBQUksRUFDN0IsVUFBVSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQzdCLENBQUM7Z0JBRUosT0FBTyxNQUFNLENBQUM7YUFDZjtZQUNELE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNqQyxDQUFDO1FBRU0sS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFhO1lBQ3JDLE1BQU0sVUFBVSxHQUFXLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksS0FBSyxDQUFDLENBQUM7WUFDbEcsSUFBSSxVQUFVLElBQUksQ0FBQyxDQUFDO2dCQUNsQixNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixLQUFLLHNCQUFzQixDQUFDLENBQUM7WUFDckUsT0FBTyxNQUFNLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNwRCxDQUFDO1FBRU0sS0FBSyxDQUFDLG1CQUFtQixDQUFDLFdBQW1CO1lBQ2xELElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVztnQkFDbkIsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7WUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLEVBQUU7Z0JBQ2xDLE1BQU0sYUFBYSxHQUFtQixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFFeEUsa0ZBQWtGO2dCQUNsRixNQUFNLHFCQUFxQixHQUE4QixFQUFFLENBQUM7Z0JBQzVELEtBQUssTUFBTSxXQUFXLElBQUksYUFBYSxDQUFDLFFBQVEsRUFBRTtvQkFDaEQsSUFBSSxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxTQUFTO3dCQUN0QyxTQUFTO29CQUNYLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQzt3QkFDakQscUJBQXFCLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7b0JBQ3RELHFCQUFxQixDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO2lCQUNsRTtnQkFFRCxNQUFNLGtCQUFrQixHQUF1QixFQUFFLENBQUM7Z0JBRWxELEtBQUssTUFBTSxLQUFLLElBQUkscUJBQXFCLEVBQUU7b0JBQ3pDLE1BQU0sWUFBWSxHQUE0QixxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDM0UsTUFBTSxRQUFRLEdBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFFekUsTUFBTSxJQUFJLEdBQWEsRUFBRSxDQUFDO29CQUMxQixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ3ZDLElBQUksSUFBSSxHQUFjLFFBQVEsQ0FBQztvQkFDL0IsT0FBTyxJQUFJLENBQUMsTUFBTSxJQUFJLFNBQVMsRUFBRSxFQUFFLGdEQUFnRDt3QkFDakYsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBQ3ZCLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7cUJBQ3JDO29CQUVELElBQUksZ0JBQWdCLEdBQXVCLGtCQUFrQixDQUFDO29CQUM5RCxLQUFLLE1BQU0sU0FBUyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUUsRUFBRTt3QkFDdEMsTUFBTSxRQUFRLEdBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7d0JBRXZELElBQUksZ0JBQWdCLENBQUMsUUFBUSxJQUFJLFNBQVM7NEJBQ3hDLGdCQUFnQixDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7d0JBRWpDLElBQUksZ0JBQWdCLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxTQUFTOzRCQUN2RCxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQzt3QkFDaEQsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQXVCLENBQUM7d0JBRWxGLElBQUksS0FBSyxHQUFXLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksU0FBUyxDQUFDLENBQUM7d0JBQ3RGLElBQUksS0FBSyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7NEJBQ3JGLE1BQU0sWUFBWSxHQUFnQyxFQUFFLENBQUM7NEJBQ3JELEtBQUssTUFBTSxXQUFXLElBQUksWUFBWTtnQ0FDcEMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO29DQUNuQyxNQUFNLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDOzRCQUNqSCxJQUFJLGdCQUFnQixDQUFDLGFBQWEsSUFBSSxTQUFTO2dDQUM3QyxnQkFBZ0IsQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDOzRCQUNyQyxnQkFBZ0IsQ0FBQyxhQUFxRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxZQUFZLENBQUM7NEJBQ3RILE1BQU07eUJBQ1A7d0JBRUQsSUFBSSxRQUFRLElBQUksUUFBUSxFQUFFOzRCQUN4QixNQUFNLFFBQVEsR0FBZ0MsRUFBRSxDQUFDOzRCQUNqRCxLQUFLLE1BQU0sV0FBVyxJQUFJLFlBQVk7Z0NBQ3BDLFFBQVEsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztvQ0FDL0IsTUFBTSxJQUFJLENBQUMsMkJBQTJCLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLEVBQUUsV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQzs0QkFDakgsZ0JBQWdCLENBQUMsVUFBVSxHQUFHO2dDQUM1QixrQkFBa0IsRUFBRTtvQ0FDbEIsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFO2lDQUN2Qjs2QkFDRixDQUFDO3lCQUNIO3FCQUNGO2lCQUNGO2dCQUVELElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLEdBQUcsSUFBSSxVQUFBLFNBQVMsQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLGtCQUFrQixDQUFDLENBQUM7YUFDdkY7WUFDRCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDdkMsQ0FBQztRQUVNLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBYTtZQUNoQyxNQUFNLEtBQUssR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLEtBQUssQ0FBQyxDQUFDO1lBQy9FLElBQUksS0FBSyxJQUFJLENBQUMsQ0FBQztnQkFDYixNQUFNLElBQUksS0FBSyxDQUFDLHNCQUFzQixLQUFLLGtCQUFrQixDQUFDLENBQUM7WUFDakUsT0FBTyxNQUFNLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUMsQ0FBQztRQUVNLEtBQUssQ0FBQyxjQUFjLENBQUMsTUFBYztZQUN4QyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU87Z0JBQ2YsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7WUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUU7Z0JBQ3pCLE1BQU0sUUFBUSxHQUFjLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNyRCxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FDM0IsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsUUFBUSxJQUFJLFNBQVMsQ0FBQyxDQUFDO29CQUN2RCxJQUFJLFVBQUEsUUFBUSxFQUFFLENBQUMsQ0FBQztvQkFDaEIsSUFBSSxVQUFBLFVBQVUsRUFBRSxDQUNuQixDQUFDLElBQUksQ0FBQyxVQUFBLGNBQWMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDO2FBQzVDO1lBQ0QsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlCLENBQUM7UUFFTSxLQUFLLENBQUMsa0JBQWtCLENBQUMsVUFBa0IsRUFBRSxRQUFpQixLQUFLO1lBQ3hFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVTtnQkFDbEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7WUFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLEVBQUU7Z0JBQ2hDLE1BQU0sWUFBWSxHQUFrQixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztnQkFDcEUseUZBQXlGO2dCQUN6RixNQUFNLG9CQUFvQixHQUFxQixZQUFZLENBQUMsb0JBQW9CLEVBQUUsZ0JBQWdCLENBQUM7Z0JBQ25HLE1BQU0sUUFBUSxHQUFhLElBQUksVUFBQSxRQUFRLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO29CQUMvRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsVUFBQSx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsVUFBQSxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7b0JBQ3pELENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxVQUFBLGVBQWUsQ0FBQyxDQUFDLENBQUMsVUFBQSxXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUMzQyxJQUFJLG9CQUFvQixFQUFFO29CQUN4QixNQUFNLE9BQU8sR0FBWSxNQUFNLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDbEYsUUFBUSxDQUFDLElBQUksR0FBRyxJQUFJLFVBQUEscUJBQXFCLENBQ3ZDLElBQUksVUFBQSxLQUFLLENBQUMsR0FBRyxZQUFZLENBQUMsb0JBQW9CLENBQUMsZUFBZSxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxxRkFBcUY7b0JBQ3RLLE9BQU8sRUFDUCxDQUFDLEVBQ0QsQ0FBQyxDQUNGLENBQUM7aUJBQ0g7Z0JBQ0QsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsR0FBRyxRQUFRLENBQUM7YUFDeEM7WUFFRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDckMsQ0FBQztRQUVNLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxTQUFpQjtZQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVM7Z0JBQ2pCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUFFO2dCQUM5QixNQUFNLFdBQVcsR0FBaUIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ2hFLE1BQU0sV0FBVyxHQUFpQixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDNUUsTUFBTSxTQUFTLEdBQWUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUVuRSxJQUFJLFdBQVcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLElBQUksU0FBUyxJQUFJLFdBQVcsQ0FBQyxLQUFLLElBQUksU0FBUyxDQUFDO29CQUNuRixPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsVUFBVSxDQUFDLElBQUksYUFBYSxTQUFTLFFBQVEsSUFBSSxDQUFDLEdBQUcsK0JBQStCLHFCQUFxQixDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsVUFBVSxxQkFBcUIsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLGdFQUFnRSxxQkFBcUIsQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBRTFULElBQUksR0FBRyxHQUFXLFNBQVMsQ0FBQyxHQUFHLENBQUM7Z0JBQ2hDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLFNBQVMsQ0FBQyxVQUFVLEVBQUU7b0JBQzFDLGdIQUFnSDtvQkFDaEgsTUFBTSxjQUFjLEdBQW9CLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztvQkFFcEYsTUFBTSxNQUFNLEdBQWdCLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7b0JBQ3hFLE1BQU0sVUFBVSxHQUFXLGNBQWMsQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDO29CQUMxRCxNQUFNLFVBQVUsR0FBVyxjQUFjLENBQUMsVUFBVSxJQUFJLENBQUMsQ0FBQztvQkFFMUQsR0FBRyxHQUFHLEdBQUcsQ0FBQyxlQUFlLENBQUMsSUFBSSxJQUFJLENBQ2hDLENBQUMsSUFBSSxVQUFVLENBQUMsTUFBTSxFQUFFLFVBQVUsRUFBRSxVQUFVLEdBQUcsVUFBVSxDQUFDLGlCQUFpQixDQUFDLENBQUMsRUFDL0UsRUFBRSxJQUFJLEVBQUUsU0FBUyxDQUFDLFFBQVEsRUFBRSxDQUM3QixDQUFDLENBQUM7aUJBQ0o7Z0JBRUQsTUFBTSxPQUFPLEdBQWlCLElBQUksVUFBQSxZQUFZLEVBQUUsQ0FBQztnQkFDakQsTUFBTSxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUN4QixJQUFJLFdBQVcsSUFBSSxXQUFXLENBQUMsU0FBUyxJQUFJLHNCQUFzQixDQUFDLE9BQU8sSUFBSSxXQUFXLENBQUMsU0FBUyxJQUFJLHNCQUFzQixDQUFDLE9BQU87b0JBQ25JLE9BQU8sQ0FBQyxNQUFNLEdBQUcsVUFBQSxNQUFNLENBQUMsS0FBSyxDQUFDO3FCQUMzQixJQUFJLFdBQVcsSUFBSSxXQUFXLENBQUMsU0FBUyxJQUFJLHNCQUFzQixDQUFDLE9BQU8sSUFBSSxXQUFXLENBQUMsU0FBUyxJQUFJLHNCQUFzQixDQUFDLHFCQUFxQjtvQkFDdEosT0FBTyxDQUFDLE1BQU0sR0FBRyxVQUFBLE1BQU0sQ0FBQyxNQUFNLENBQUM7cUJBQzVCLElBQUksV0FBVyxJQUFJLFdBQVcsQ0FBQyxTQUFTLElBQUksc0JBQXNCLENBQUMsTUFBTSxJQUFJLFdBQVcsQ0FBQyxTQUFTLElBQUksc0JBQXNCLENBQUMsb0JBQW9CO29CQUNwSixPQUFPLENBQUMsTUFBTSxHQUFHLFVBQUEsTUFBTSxDQUFDLE1BQU0sQ0FBQztxQkFDNUIsSUFBSSxXQUFXLElBQUksV0FBVyxDQUFDLFNBQVMsSUFBSSxTQUFTLElBQUksV0FBVyxDQUFDLFNBQVMsSUFBSSxTQUFTO29CQUM5RixNQUFNLElBQUksS0FBSyxDQUFDLEdBQUcsVUFBVSxDQUFDLElBQUksYUFBYSxTQUFTLFFBQVEsSUFBSSxDQUFDLEdBQUcsdUNBQXVDLHFCQUFxQixDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsVUFBVSxxQkFBcUIsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLDRKQUE0SixDQUFDLENBQUM7Z0JBRWpYLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEdBQUcsT0FBTyxDQUFDO2FBQ3JDO1lBRUQsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ25DLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLEtBQWE7WUFDcEMsTUFBTSxTQUFTLEdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksSUFBSSxLQUFLLENBQUMsQ0FBQztZQUMxRixJQUFJLFNBQVMsSUFBSSxDQUFDLENBQUM7Z0JBQ2pCLE1BQU0sSUFBSSxLQUFLLENBQUMsc0JBQXNCLEtBQUssaUJBQWlCLENBQUMsQ0FBQztZQUNoRSxPQUFPLE1BQU0sSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2xELENBQUM7UUFFTSxLQUFLLENBQUMsa0JBQWtCLENBQUMsVUFBa0I7WUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVO2dCQUNsQixJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztZQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsRUFBRTtnQkFDaEMsTUFBTSxZQUFZLEdBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7Z0JBQzVELE1BQU0sUUFBUSxHQUFhLE1BQU0sSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFhLENBQUM7Z0JBRXpGLDhEQUE4RDtnQkFDOUQsTUFBTSxVQUFVLEdBQWlCLE1BQU0sSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsbUJBQW1CLENBQUMsQ0FBQztnQkFDOUYsTUFBTSxJQUFJLEdBQVcsRUFBRSxDQUFDO2dCQUN4QixLQUFLLElBQUksTUFBTSxHQUFXLENBQUMsRUFBRSxLQUFLLEdBQVcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLE1BQU0sSUFBSSxJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUU7b0JBQ25HLE1BQU0sY0FBYyxHQUFjLElBQUksVUFBQSxTQUFTLEVBQUUsQ0FBQztvQkFDbEQsY0FBYyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztvQkFDL0QsUUFBUSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQztpQkFDaEY7Z0JBQ0QsVUFBQSxPQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUMzQixJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxHQUFHLFFBQVEsQ0FBQzthQUN4QztZQUVELE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNyQyxDQUFDO1FBRU0sS0FBSyxDQUFDLGFBQWEsQ0FBQyxVQUFrQjtZQUMzQyxNQUFNLEtBQUssR0FBZSxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDL0QsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxhQUFhLElBQUksY0FBYyxDQUFDLGFBQWE7Z0JBQ2hGLE9BQU8sS0FBbUIsQ0FBQztpQkFDeEI7Z0JBQ0gsT0FBTyxDQUFDLElBQUksQ0FBQyxpREFBaUQsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDakksT0FBTyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQy9CO1FBQ0gsQ0FBQztRQUVNLEtBQUssQ0FBQyxjQUFjLENBQUMsVUFBa0I7WUFDNUMsTUFBTSxLQUFLLEdBQWUsTUFBTSxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQy9ELElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEVBQUUsYUFBYSxJQUFJLGNBQWMsQ0FBQyxjQUFjO2dCQUNqRixPQUFPLEtBQW9CLENBQUM7aUJBQ3pCO2dCQUNILE9BQU8sQ0FBQyxJQUFJLENBQUMsa0RBQWtELGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ2xJLE9BQU8sV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUNoQztRQUNILENBQUM7UUFFTSxLQUFLLENBQUMsY0FBYyxDQUFDLFVBQWtCO1lBQzVDLE1BQU0sS0FBSyxHQUFlLE1BQU0sSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUMvRCxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxFQUFFLGFBQWEsSUFBSSxjQUFjLENBQUMsWUFBWTtnQkFDL0UsT0FBTyxLQUFvQixDQUFDO2lCQUN6QjtnQkFDSCxPQUFPLENBQUMsSUFBSSxDQUFDLGdEQUFnRCxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEVBQUUsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNoSSxPQUFPLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDaEM7UUFDSCxDQUFDO1FBRU0sS0FBSyxDQUFDLGVBQWUsQ0FBQyxVQUFrQjtZQUM3QyxNQUFNLEtBQUssR0FBZSxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDL0QsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxhQUFhLElBQUksY0FBYyxDQUFDLEtBQUs7Z0JBQ3hFLE9BQU8sS0FBcUIsQ0FBQztpQkFDMUI7Z0JBQ0gsT0FBTyxDQUFDLElBQUksQ0FBQyx5Q0FBeUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxFQUFFLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDekgsT0FBTyxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO2FBQ2pDO1FBQ0gsQ0FBQztRQUVPLEtBQUssQ0FBQyxhQUFhLENBQUMsVUFBa0I7WUFDNUMsTUFBTSxZQUFZLEdBQWtCLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3BFLElBQUksQ0FBQyxZQUFZO2dCQUNmLE1BQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQztZQUU1QyxNQUFNLGNBQWMsR0FBb0IsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3ZGLElBQUksQ0FBQyxjQUFjO2dCQUNqQixNQUFNLElBQUksS0FBSyxDQUFDLDJCQUEyQixDQUFDLENBQUM7WUFFL0MsTUFBTSxNQUFNLEdBQWdCLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7WUFBQSxDQUFDO1lBQ3pFLE1BQU0sVUFBVSxHQUFXLGNBQWMsQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDO1lBQzFELE1BQU0sVUFBVSxHQUFXLGNBQWMsQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDO1lBRTFELFFBQVEsWUFBWSxDQUFDLGFBQWEsRUFBRTtnQkFDbEMsS0FBSyxjQUFjLENBQUMsYUFBYTtvQkFDL0IsT0FBTyxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFVBQVUsR0FBRyxVQUFVLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFFdkYsS0FBSyxjQUFjLENBQUMsSUFBSTtvQkFDdEIsT0FBTyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFVBQVUsR0FBRyxTQUFTLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFFckYsS0FBSyxjQUFjLENBQUMsY0FBYztvQkFDaEMsT0FBTyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFVBQVUsR0FBRyxXQUFXLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFFekYsS0FBSyxjQUFjLENBQUMsS0FBSztvQkFDdkIsT0FBTyxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFVBQVUsR0FBRyxVQUFVLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFFdkYsS0FBSyxjQUFjLENBQUMsWUFBWTtvQkFDOUIsT0FBTyxJQUFJLFdBQVcsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFVBQVUsR0FBRyxXQUFXLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFFekYsS0FBSyxjQUFjLENBQUMsR0FBRztvQkFDckIsT0FBTyxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFVBQVUsR0FBRyxVQUFVLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFFdkYsS0FBSyxjQUFjLENBQUMsS0FBSztvQkFDdkIsT0FBTyxJQUFJLFlBQVksQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFVBQVUsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFFM0Y7b0JBQ0UsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsWUFBWSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUM7YUFDakY7UUFDSCxDQUFDO1FBRU8sS0FBSyxDQUFDLFNBQVMsQ0FBQyxRQUFnQjtZQUN0QyxNQUFNLFVBQVUsR0FBZ0IsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDNUQsSUFBSSxDQUFDLFVBQVU7Z0JBQ2IsTUFBTSxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1lBRTFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUTtnQkFDaEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7WUFDckIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7Z0JBQzVCLE1BQU0sUUFBUSxHQUFhLE1BQU0sS0FBSyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDdkQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsR0FBRyxNQUFNLFFBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQzthQUN4RDtZQUVELE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNqQyxDQUFDO1FBRU8sS0FBSyxDQUFDLDJCQUEyQixDQUFDLFFBQStCLEVBQUUsbUJBQXdEO1lBQ2pJLE1BQU0sS0FBSyxHQUFpQixNQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3ZFLE1BQU0sTUFBTSxHQUFpQixNQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3pFLE1BQU0sZUFBZSxHQUFXLElBQUksQ0FBQztZQUNyQyxNQUFNLFVBQVUsR0FBWSxtQkFBbUIsSUFBSSxVQUFVLENBQUM7WUFFOUQsTUFBTSxTQUFTLEdBQTBELEVBQUUsQ0FBQztZQUM1RSxTQUFTLENBQUMsQ0FBQyxHQUFHLElBQUksVUFBQSxpQkFBaUIsRUFBRSxDQUFDO1lBQ3RDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxVQUFBLGlCQUFpQixFQUFFLENBQUM7WUFDdEMsU0FBUyxDQUFDLENBQUMsR0FBRyxJQUFJLFVBQUEsaUJBQWlCLEVBQUUsQ0FBQztZQUN0QyxJQUFJLFVBQVU7Z0JBQ1osU0FBUyxDQUFDLENBQUMsR0FBRyxJQUFJLFVBQUEsaUJBQWlCLEVBQUUsQ0FBQztZQUV4QyxLQUFLLElBQUksTUFBTSxHQUFXLENBQUMsRUFBRSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLE1BQU0sRUFBRTtnQkFDNUQsSUFBSSxPQUFPLEdBQVcsTUFBTSxHQUFHLENBQUMsbUJBQW1CLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsK0RBQStEO2dCQUMzSSxJQUFJLElBQUksR0FBVyxlQUFlLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNuRCxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLFVBQUEsWUFBWSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDaEUsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxVQUFBLFlBQVksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hFLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksVUFBQSxZQUFZLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNoRSxJQUFJLFVBQVU7b0JBQ2dCLFNBQVUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksVUFBQSxZQUFZLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ2hHO1lBRUQsT0FBTyxTQUFTLENBQUM7UUFDbkIsQ0FBQztLQUNGO0lBbmZZLG9CQUFVLGFBbWZ0QixDQUFBO0lBRUQsU0FBUyxxQkFBcUIsQ0FBQyxNQUFjO1FBQzNDLE9BQU8sTUFBTSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0JBQXNCLEVBQUUsSUFBSSxDQUFDLElBQUksTUFBTSxDQUFDLENBQUM7SUFDL0csQ0FBQztJQUVELElBQUssY0FRSjtJQVJELFdBQUssY0FBYztRQUNqQixzREFBVyxDQUFBO1FBQ1gsd0VBQW9CLENBQUE7UUFDcEIsd0RBQVksQ0FBQTtRQUNaLDBFQUFxQixDQUFBO1FBQ3JCLG9EQUFVLENBQUE7UUFDVixzRUFBbUIsQ0FBQTtRQUNuQix3REFBWSxDQUFBO0lBQ2QsQ0FBQyxFQVJJLGNBQWMsS0FBZCxjQUFjLFFBUWxCO0lBSUQsa0VBQWtFO0FBQ3BFLENBQUMsRUEzZ0JTLFNBQVMsS0FBVCxTQUFTLFFBMmdCbEI7QUMzZ0JELElBQVUsU0FBUyxDQThmbEI7QUE5ZkQsV0FBVSxTQUFTO0lBQ04sdUJBQWEsR0FBK0IsRUFBRSxDQUFDO0lBQzFELFVBQUEsYUFBYSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsUUFBUSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUF5RzdDLENBQUM7SUFDRCxVQUFBLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLFFBQVEsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQXNCNUMsQ0FBQztJQUNELFVBQUEsYUFBYSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsUUFBUSxDQUFDOzs7Ozs7Ozs7O0VBVTVDLENBQUM7SUFDRCxVQUFBLGFBQWEsQ0FBQyx5QkFBeUIsQ0FBQyxHQUFHLFFBQVEsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUEwQnBELENBQUM7SUFDRCxVQUFBLGFBQWEsQ0FBQyx5QkFBeUIsQ0FBQyxHQUFHLFFBQVEsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0VBZXBELENBQUM7SUFDRCxVQUFBLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLFFBQVEsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQThDakQsQ0FBQztJQUNELFVBQUEsYUFBYSxDQUFDLHNCQUFzQixDQUFDLEdBQUcsUUFBUSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFvUmpELENBQUM7QUFFSCxDQUFDLEVBOWZTLFNBQVMsS0FBVCxTQUFTLFFBOGZsQjtBQzlmRCx3Q0FBd0M7QUFDeEMsSUFBVSxTQUFTLENBNERsQjtBQTdERCx3Q0FBd0M7QUFDeEMsV0FBVSxTQUFTOztJQWFqQjs7O09BR0c7SUFFSCxrRkFBa0Y7SUFFbEYsSUFBc0IsTUFBTSxjQUE1QixNQUFzQixNQUFNO1FBYzFCLDhFQUE4RTtRQUN2RSxNQUFNLENBQUMsT0FBTyxLQUFrQixPQUFPLFVBQUEsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUNyRCxNQUFNLENBQUMscUJBQXFCO1lBQ2pDLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFBLGFBQWEsQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNoRixDQUFDO1FBQ00sTUFBTSxDQUFDLHVCQUF1QjtZQUNuQyxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBQSxhQUFhLENBQUMsc0JBQXNCLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDaEYsQ0FBQztRQUNNLE1BQU0sQ0FBQyxhQUFhLEtBQXlELENBQUM7UUFDOUUsTUFBTSxDQUFDLFVBQVUsS0FBeUQsQ0FBQztRQUMzRSxNQUFNLENBQUMsYUFBYSxLQUF5RCxDQUFDO1FBRTNFLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxTQUF3QixJQUFZLE9BQU8sUUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVySCxvRkFBb0Y7UUFDMUUsTUFBTSxDQUFDLGFBQWEsQ0FBQyxPQUFlLEVBQUUsUUFBa0I7WUFDaEUsSUFBSSxDQUFDLFFBQVE7Z0JBQ1gsT0FBTyxPQUFPLENBQUM7WUFFakIsSUFBSSxJQUFJLEdBQVcsbUJBQW1CLENBQUM7WUFDdkMsS0FBSyxJQUFJLE1BQU0sSUFBSSxRQUFRO2dCQUN6QixJQUFJLElBQUksV0FBVyxNQUFNLElBQUksQ0FBQztZQUVoQyxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDbEQsQ0FBQztLQUNGLENBQUE7SUF0Q0Msa0dBQWtHO0lBQzNFLGdCQUFTLEdBQWtCLFFBQU8sQ0FBQTtJQUN6RCxxRkFBcUY7SUFDOUQsaUJBQVUsR0FBb0IsRUFBRyxDQUFBO0lBSnBDLE1BQU07UUFEM0IsVUFBQSxvQkFBb0IsQ0FBQyxRQUFRO09BQ1IsTUFBTSxDQXVDM0I7SUF2Q3FCLGdCQUFNLFNBdUMzQixDQUFBO0FBQ0gsQ0FBQyxFQTVEUyxTQUFTLEtBQVQsU0FBUyxRQTREbEI7QUM3REQsSUFBVSxTQUFTLENBWWxCO0FBWkQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLFVBQVcsU0FBUSxVQUFBLE1BQU07UUFTdEMsTUFBTSxDQUFDLE9BQU8sS0FBa0IsT0FBTyxVQUFBLGFBQWEsQ0FBQyxDQUFDLENBQUM7O0lBUnZDLG9CQUFTLEdBQVcsVUFBQSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFakUsaUJBQU0sR0FBYTtRQUMvQixPQUFPO1FBQ1AsTUFBTTtRQUNOLFFBQVE7S0FDVCxDQUFDO0lBUGtCLG9CQUFVLGFBVS9CLENBQUE7QUFDSCxDQUFDLEVBWlMsU0FBUyxLQUFULFNBQVMsUUFZbEI7QUNaRCxJQUFVLFNBQVMsQ0FhbEI7QUFiRCxXQUFVLFNBQVM7SUFDakIsTUFBc0IsY0FBZSxTQUFRLFVBQUEsTUFBTTtRQVUxQyxNQUFNLENBQUMsT0FBTyxLQUFrQixPQUFPLFVBQUEsYUFBYSxDQUFDLENBQUMsQ0FBQzs7SUFUdkMsd0JBQVMsR0FBVyxVQUFBLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUVyRSxxQkFBTSxHQUFhO1FBQy9CLE9BQU87UUFDUCxNQUFNO1FBQ04sTUFBTTtRQUNOLFFBQVE7S0FDVCxDQUFDO0lBUmtCLHdCQUFjLGlCQVduQyxDQUFBO0FBQ0gsQ0FBQyxFQWJTLFNBQVMsS0FBVCxTQUFTLFFBYWxCO0FDYkQsSUFBVSxTQUFTLENBYWxCO0FBYkQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLGtCQUFtQixTQUFRLFVBQUEsTUFBTTtRQVU5QyxNQUFNLENBQUMsT0FBTyxLQUFrQixPQUFPLFVBQUEscUJBQXFCLENBQUMsQ0FBQyxDQUFDOztJQVQvQyw0QkFBUyxHQUFXLFVBQUEsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFekUseUJBQU0sR0FBYTtRQUMvQixPQUFPO1FBQ1AsTUFBTTtRQUNOLFNBQVM7UUFDVCxRQUFRO0tBQ1QsQ0FBQztJQVJrQiw0QkFBa0IscUJBV3ZDLENBQUE7QUFDSCxDQUFDLEVBYlMsU0FBUyxLQUFULFNBQVMsUUFhbEI7QUNiRCxJQUFVLFNBQVMsQ0FjbEI7QUFkRCxXQUFVLFNBQVM7SUFDakIsTUFBc0Isc0JBQXVCLFNBQVEsVUFBQSxNQUFNO1FBV2xELE1BQU0sQ0FBQyxPQUFPLEtBQWtCLE9BQU8sVUFBQSxxQkFBcUIsQ0FBQyxDQUFDLENBQUM7O0lBVi9DLGdDQUFTLEdBQVcsVUFBQSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUU3RSw2QkFBTSxHQUFhO1FBQy9CLE9BQU87UUFDUCxNQUFNO1FBQ04sU0FBUztRQUNULFFBQVE7UUFDUixNQUFNO0tBQ1AsQ0FBQztJQVRrQixnQ0FBc0IseUJBWTNDLENBQUE7QUFDSCxDQUFDLEVBZFMsU0FBUyxLQUFULFNBQVMsUUFjbEI7QUNkRCxJQUFVLFNBQVMsQ0FXbEI7QUFYRCxXQUFVLFNBQVM7SUFDakIsTUFBc0IsYUFBYyxTQUFRLFVBQUEsTUFBTTtRQVF6QyxNQUFNLENBQUMsT0FBTyxLQUFrQixPQUFPLFVBQUEsYUFBYSxDQUFDLENBQUMsQ0FBQzs7SUFQdkMsdUJBQVMsR0FBVyxVQUFBLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUVwRSxvQkFBTSxHQUFhO1FBQy9CLE9BQU87UUFDUCxRQUFRO0tBQ1QsQ0FBQztJQU5rQix1QkFBYSxnQkFTbEMsQ0FBQTtBQUNILENBQUMsRUFYUyxTQUFTLEtBQVQsU0FBUyxRQVdsQjtBQ1hELElBQVUsU0FBUyxDQVlsQjtBQVpELFdBQVUsU0FBUztJQUNqQixNQUFzQixpQkFBa0IsU0FBUSxVQUFBLE1BQU07UUFTN0MsTUFBTSxDQUFDLE9BQU8sS0FBa0IsT0FBTyxVQUFBLGFBQWEsQ0FBQyxDQUFDLENBQUM7O0lBUnZDLDJCQUFTLEdBQVcsVUFBQSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUV4RSx3QkFBTSxHQUFhO1FBQy9CLE9BQU87UUFDUCxNQUFNO1FBQ04sUUFBUTtLQUNULENBQUM7SUFQa0IsMkJBQWlCLG9CQVV0QyxDQUFBO0FBQ0gsQ0FBQyxFQVpTLFNBQVMsS0FBVCxTQUFTLFFBWWxCO0FDWkQsSUFBVSxTQUFTLENBWWxCO0FBWkQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLHFCQUFzQixTQUFRLFVBQUEsTUFBTTtRQVNqRCxNQUFNLENBQUMsT0FBTyxLQUFrQixPQUFPLFVBQUEscUJBQXFCLENBQUMsQ0FBQyxDQUFDOztJQVIvQywrQkFBUyxHQUFXLFVBQUEsTUFBTSxDQUFDLGdCQUFnQixDQUFDLHFCQUFxQixDQUFDLENBQUM7SUFFNUUsNEJBQU0sR0FBYTtRQUMvQixPQUFPO1FBQ1AsU0FBUztRQUNULFFBQVE7S0FDVCxDQUFDO0lBUGtCLCtCQUFxQix3QkFVMUMsQ0FBQTtBQUNILENBQUMsRUFaUyxTQUFTLEtBQVQsU0FBUyxRQVlsQjtBQ1pELElBQVUsU0FBUyxDQWFsQjtBQWJELFdBQVUsU0FBUztJQUNqQixNQUFzQix5QkFBMEIsU0FBUSxVQUFBLE1BQU07UUFVckQsTUFBTSxDQUFDLE9BQU8sS0FBa0IsT0FBTyxVQUFBLHFCQUFxQixDQUFDLENBQUMsQ0FBQzs7SUFUL0MsbUNBQVMsR0FBVyxVQUFBLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0lBRWhGLGdDQUFNLEdBQWE7UUFDL0IsT0FBTztRQUNQLFNBQVM7UUFDVCxRQUFRO1FBQ1IsTUFBTTtLQUNQLENBQUM7SUFSa0IsbUNBQXlCLDRCQVc5QyxDQUFBO0FBQ0gsQ0FBQyxFQWJTLFNBQVMsS0FBVCxTQUFTLFFBYWxCO0FDYkQsSUFBVSxTQUFTLENBS2xCO0FBTEQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLFNBQVUsU0FBUSxVQUFBLE1BQU07O0lBQ3JCLG1CQUFTLEdBQVcsVUFBQSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDaEUsZ0JBQU0sR0FBYSxFQUFFLENBQUM7SUFGaEIsbUJBQVMsWUFHOUIsQ0FBQTtBQUNILENBQUMsRUFMUyxTQUFTLEtBQVQsU0FBUyxRQUtsQjtBQ0xELElBQVUsU0FBUyxDQU9sQjtBQVBELFdBQVUsU0FBUztJQUNqQixNQUFzQixhQUFjLFNBQVEsVUFBQSxNQUFNOztJQUN6Qix1QkFBUyxHQUFXLFVBQUEsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3BFLG9CQUFNLEdBQWE7UUFDL0IsTUFBTTtLQUNQLENBQUM7SUFKa0IsdUJBQWEsZ0JBS2xDLENBQUE7QUFDSCxDQUFDLEVBUFMsU0FBUyxLQUFULFNBQVMsUUFPbEI7QUNQRCxJQUFVLFNBQVMsQ0FVbEI7QUFWRCxXQUFVLFNBQVM7SUFDakIsTUFBc0IsaUJBQWtCLFNBQVEsVUFBQSxNQUFNO1FBTzdDLE1BQU0sQ0FBQyxPQUFPLEtBQWtCLE9BQU8sVUFBQSxZQUFZLENBQUMsQ0FBQyxDQUFDOztJQU50QywyQkFBUyxHQUFXLFVBQUEsTUFBTSxDQUFDLGdCQUFnQixDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFFeEUsd0JBQU0sR0FBYTtRQUMvQixTQUFTO0tBQ1YsQ0FBQztJQUxrQiwyQkFBaUIsb0JBUXRDLENBQUE7QUFDSCxDQUFDLEVBVlMsU0FBUyxLQUFULFNBQVMsUUFVbEI7QUNWRCxJQUFVLFNBQVMsQ0FXbEI7QUFYRCxXQUFVLFNBQVM7SUFDakIsTUFBc0IscUJBQXNCLFNBQVEsVUFBQSxNQUFNO1FBUWpELE1BQU0sQ0FBQyxPQUFPLEtBQWtCLE9BQU8sVUFBQSxZQUFZLENBQUMsQ0FBQyxDQUFDOztJQVB0QywrQkFBUyxHQUFXLFVBQUEsTUFBTSxDQUFDLGdCQUFnQixDQUFDLHFCQUFxQixDQUFDLENBQUM7SUFFNUUsNEJBQU0sR0FBYTtRQUMvQixTQUFTO1FBQ1QsTUFBTTtLQUNQLENBQUM7SUFOa0IsK0JBQXFCLHdCQVMxQyxDQUFBO0FBQ0gsQ0FBQyxFQVhTLFNBQVMsS0FBVCxTQUFTLFFBV2xCO0FDWEQsSUFBVSxTQUFTLENBV2xCO0FBWEQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLFlBQWEsU0FBUSxVQUFBLE1BQU07UUFReEMsTUFBTSxDQUFDLE9BQU8sS0FBa0IsT0FBTyxVQUFBLFlBQVksQ0FBQyxDQUFDLENBQUM7O0lBUHRDLHNCQUFTLEdBQVcsVUFBQSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxDQUFDLENBQUM7SUFFbkUsbUJBQU0sR0FBYTtRQUMvQixRQUFRO1FBQ1IsUUFBUTtLQUNULENBQUM7SUFOa0Isc0JBQVksZUFTakMsQ0FBQTtBQUNILENBQUMsRUFYUyxTQUFTLEtBQVQsU0FBUyxRQVdsQjtBQ1hELElBQVUsU0FBUyxDQWdCbEI7QUFoQkQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLFdBQVksU0FBUSxVQUFBLE1BQU07UUFTdkMsTUFBTSxDQUFDLE9BQU8sS0FBa0IsT0FBTyxVQUFBLGFBQWEsQ0FBQyxDQUFDLENBQUM7UUFFdkQsTUFBTSxDQUFDLHVCQUF1QjtZQUNuQyxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBQSxhQUFhLENBQUMsa0JBQWtCLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUUsQ0FBQzs7SUFac0IscUJBQVMsR0FBVyxVQUFBLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUVsRSxrQkFBTSxHQUFhO1FBQy9CLE9BQU87UUFDUCxRQUFRO1FBQ1IsT0FBTztLQUNSLENBQUM7SUFQa0IscUJBQVcsY0FjaEMsQ0FBQTtBQUNILENBQUMsRUFoQlMsU0FBUyxLQUFULFNBQVMsUUFnQmxCO0FDaEJELElBQVUsU0FBUyxDQWlCbEI7QUFqQkQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLGVBQWdCLFNBQVEsVUFBQSxNQUFNO1FBVTNDLE1BQU0sQ0FBQyxPQUFPLEtBQWtCLE9BQU8sVUFBQSxhQUFhLENBQUMsQ0FBQyxDQUFDO1FBRXZELE1BQU0sQ0FBQyx1QkFBdUI7WUFDbkMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQUEsYUFBYSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzVFLENBQUM7O0lBYnNCLHlCQUFTLEdBQVcsVUFBQSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLENBQUM7SUFFdEUsc0JBQU0sR0FBYTtRQUMvQixPQUFPO1FBQ1AsUUFBUTtRQUNSLE9BQU87UUFDUCxNQUFNO0tBQ1AsQ0FBQztJQVJrQix5QkFBZSxrQkFlcEMsQ0FBQTtBQUNILENBQUMsRUFqQlMsU0FBUyxLQUFULFNBQVMsUUFpQmxCO0FDakJELElBQVUsU0FBUyxDQWlCbEI7QUFqQkQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLG1CQUFvQixTQUFRLFVBQUEsTUFBTTtRQVUvQyxNQUFNLENBQUMsT0FBTyxLQUFrQixPQUFPLFVBQUEscUJBQXFCLENBQUMsQ0FBQyxDQUFDO1FBRS9ELE1BQU0sQ0FBQyx1QkFBdUI7WUFDbkMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQUEsYUFBYSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzVFLENBQUM7O0lBYnNCLDZCQUFTLEdBQVcsVUFBQSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUUxRSwwQkFBTSxHQUFhO1FBQy9CLE9BQU87UUFDUCxRQUFRO1FBQ1IsT0FBTztRQUNQLFNBQVM7S0FDVixDQUFDO0lBUmtCLDZCQUFtQixzQkFleEMsQ0FBQTtBQUNILENBQUMsRUFqQlMsU0FBUyxLQUFULFNBQVMsUUFpQmxCO0FDakJELElBQVUsU0FBUyxDQWtCbEI7QUFsQkQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLHVCQUF3QixTQUFRLFVBQUEsTUFBTTtRQVduRCxNQUFNLENBQUMsT0FBTyxLQUFrQixPQUFPLFVBQUEscUJBQXFCLENBQUMsQ0FBQyxDQUFDO1FBRS9ELE1BQU0sQ0FBQyx1QkFBdUI7WUFDbkMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQUEsYUFBYSxDQUFDLGtCQUFrQixDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzVFLENBQUM7O0lBZHNCLGlDQUFTLEdBQVcsVUFBQSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUU5RSw4QkFBTSxHQUFhO1FBQy9CLE9BQU87UUFDUCxRQUFRO1FBQ1IsT0FBTztRQUNQLFNBQVM7UUFDVCxNQUFNO0tBQ1AsQ0FBQztJQVRrQixpQ0FBdUIsMEJBZ0I1QyxDQUFBO0FBQ0gsQ0FBQyxFQWxCUyxTQUFTLEtBQVQsU0FBUyxRQWtCbEI7QUNsQkQsSUFBVSxTQUFTLENBWWxCO0FBWkQsV0FBVSxTQUFTO0lBQ2pCLE1BQXNCLFVBQVcsU0FBUSxVQUFBLE1BQU07UUFHdEMsTUFBTSxDQUFDLHFCQUFxQjtZQUNqQyxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBQSxhQUFhLENBQUMsaUJBQWlCLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDM0UsQ0FBQztRQUVNLE1BQU0sQ0FBQyx1QkFBdUI7WUFDbkMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQUEsYUFBYSxDQUFDLGlCQUFpQixDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNFLENBQUM7O0lBUmEsaUJBQU0sR0FBYSxFQUFFLENBQUM7SUFEaEIsb0JBQVUsYUFVL0IsQ0FBQTtBQUNILENBQUMsRUFaUyxTQUFTLEtBQVQsU0FBUyxRQVlsQjtBQ1pELElBQVUsU0FBUyxDQVlsQjtBQVpELFdBQVUsU0FBUztJQUNqQixNQUFzQixrQkFBbUIsU0FBUSxVQUFBLE1BQU07UUFHOUMsTUFBTSxDQUFDLHFCQUFxQjtZQUNqQyxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBQSxhQUFhLENBQUMseUJBQXlCLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbkYsQ0FBQztRQUVNLE1BQU0sQ0FBQyx1QkFBdUI7WUFDbkMsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQUEsYUFBYSxDQUFDLHlCQUF5QixDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ25GLENBQUM7O0lBUmEseUJBQU0sR0FBYSxFQUFFLENBQUM7SUFEaEIsNEJBQWtCLHFCQVV2QyxDQUFBO0FBQ0gsQ0FBQyxFQVpTLFNBQVMsS0FBVCxTQUFTLFFBWWxCO0FDWkQsSUFBVSxTQUFTLENBMkhsQjtBQTNIRCxXQUFVLFNBQVM7SUFnQmpCOzs7T0FHRztJQUNILE1BQWEsUUFBUyxTQUFRLFVBQUEsS0FBSztRQUlqQzs7V0FFRztRQUNILFlBQW1CLFFBQWdCLFVBQVU7WUFDM0MsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBUEMsVUFBSyxHQUFhLEVBQUUsQ0FBQztZQUNyQixvQkFBZSxHQUFtQixFQUFFLENBQUM7WUF5RnJEOztlQUVHO1lBQ0ssbUJBQWMsR0FBRyxDQUFDLE1BQWEsRUFBUSxFQUFFO2dCQUMvQyxJQUFJLE1BQU0sQ0FBQyxhQUFhLElBQUksSUFBSTtvQkFBRSxPQUFPO2dCQUN6QyxLQUFLLE1BQU0sSUFBSSxJQUFJLE1BQU0sQ0FBQyxNQUFjO29CQUFFLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7d0JBQ25FLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7d0JBQzdCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7cUJBQ3hDO1lBQ0gsQ0FBQyxDQUFDO1lBM0ZBLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEIsSUFBSSxDQUFDLGdCQUFnQixtQ0FBcUIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2pFLENBQUM7UUFFRDs7OztXQUlHO1FBQ0ksT0FBTyxDQUFDLEtBQVcsRUFBRSxXQUFtQixFQUFFLFFBQW9CO1lBQ25FLElBQUksV0FBVztnQkFDYixJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQzs7Z0JBRXhDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZO2dCQUNyQixLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksVUFBQSxrQkFBa0IsRUFBRSxDQUFDLENBQUM7WUFDL0MsSUFBSSxRQUFRO2dCQUNWLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQy9CLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM5QixJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzNCLENBQUM7UUFFRDs7OztXQUlHO1FBQ0ksWUFBWSxDQUFDLEtBQVcsRUFBRSxrQkFBNkIsS0FBSyxDQUFDLGVBQWU7WUFDakYsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDO1lBQy9CLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLGVBQWUsQ0FBQztRQUNyRCxDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksY0FBYztZQUNuQixLQUFLLE1BQU0sSUFBSSxJQUFJLElBQUksRUFBRTtnQkFDdkIsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDO29CQUN0QyxTQUFTO2dCQUNYLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDN0IsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQzthQUN4RDtRQUNILENBQUM7UUFFTSxXQUFXLENBQUMsU0FBaUI7WUFDbEMsSUFBSSxLQUFLLEdBQVcsQ0FBQyxDQUFDO1lBQ3RCLEtBQUssTUFBTSxRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtnQkFDakMsSUFBSSxTQUFTLElBQUksUUFBUTtvQkFDdkIsT0FBTyxLQUFLLENBQUM7Z0JBQ2YsS0FBSyxFQUFFLENBQUM7YUFDVDtZQUNELE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDWixDQUFDO1FBRU0sU0FBUztZQUNkLE1BQU0sYUFBYSxHQUFrQixLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDdkQsYUFBYSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7WUFDbkMsS0FBSyxNQUFNLFFBQVEsSUFBSSxJQUFJLENBQUMsZUFBZTtnQkFDekMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3ZGLE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUM7UUFFTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQTZCO1lBQ3BELE1BQU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUN4QyxLQUFLLE1BQU0sSUFBSSxJQUFJLElBQUk7Z0JBQUUsSUFBSSxjQUFjLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7b0JBQ3BFLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLE1BQU0sSUFBSSxVQUFBLFNBQVMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBYyxDQUFDLENBQUM7WUFDckgsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDO1FBRUQ7O1dBRUc7UUFDSyxpQkFBaUIsQ0FBQyxLQUFXO1lBQ25DLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUNoQixLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ2xCLFVBQUEsU0FBUyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUN0RSxLQUFLLENBQUMsU0FBUyxFQUFFLENBQUMsUUFBUSxDQUM3QixDQUFDO1lBQ0YsS0FBSyxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsVUFBQSxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ2pFLENBQUM7S0FhRjtJQXRHWSxrQkFBUSxXQXNHcEIsQ0FBQTtBQUNILENBQUMsRUEzSFMsU0FBUyxLQUFULFNBQVMsUUEySGxCO0FDM0hELElBQVUsU0FBUyxDQWtIbEI7QUFsSEQsV0FBVSxTQUFTO0lBRWpCOzs7O09BSUc7SUFDSCxNQUFhLGdCQUFpQixTQUFRLFVBQUEsYUFBYTtRQUlqRCxNQUFNLENBQVc7UUFDakIsY0FBYyxDQUFpQjtRQUMvQixTQUFTLENBQWM7UUFDdkIsZ0JBQWdCLENBQVM7UUFFbEIsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBbUI7WUFDNUMsTUFBTSxRQUFRLEdBQXFCLElBQUksZ0JBQWdCLEVBQUUsQ0FBQztZQUMxRCxNQUFNLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDOUIsT0FBTyxRQUFRLENBQUM7UUFDbEIsQ0FBQztRQUVELElBQVcsS0FBSztZQUNkLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNyQixDQUFDO1FBRUQsSUFBVyxhQUFhO1lBQ3RCLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQztRQUM3QixDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFXLFFBQVE7WUFDakIsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtnQkFDakQsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7Z0JBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDO2FBQzlDO1lBQ0QsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3hCLENBQUM7UUFFRDs7V0FFRztRQUNJLEtBQUssQ0FBQyxHQUFHLENBQUMsU0FBbUI7WUFDbEMsTUFBTSxLQUFLLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzNCLElBQUksQ0FBQyxjQUFjLEdBQUcsU0FBUyxDQUFDO1lBQ2hDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN2QixDQUFDO1FBRU0sU0FBUztZQUNkLE1BQU0sYUFBYSxHQUFrQixLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDdkQsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO2dCQUNqQixhQUFhLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztnQkFDNUIsS0FBSyxNQUFNLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUTtvQkFDbEMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO2FBQzFFO1lBQ0QsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQztRQUVNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBNkI7WUFDcEQsTUFBTSxLQUFLLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1lBQ3hDLElBQUksQ0FBQyxjQUFjLEdBQUcsVUFBQSxPQUFPLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxRQUFRLElBQUksY0FBYyxDQUFDLFVBQVUsQ0FBYSxDQUFDO1lBQzFHLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUNyQixJQUFJLGNBQWMsQ0FBQyxRQUFRLEVBQUU7Z0JBQzNCLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO2dCQUNuQixLQUFLLE1BQU0sUUFBUSxJQUFJLGNBQWMsQ0FBQyxRQUFRO29CQUM1QyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLE1BQU0sSUFBSSxVQUFBLFNBQVMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFjLENBQUM7YUFDL0c7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFRDs7V0FFRztRQUNJLFNBQVM7WUFDZCxLQUFLLE1BQU0sUUFBUSxJQUFJLElBQUksQ0FBQyxLQUFLO2dCQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsVUFBQSxTQUFTLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxRyxDQUFDO1FBRU0sY0FBYyxDQUFDLFFBQWlCO1lBQ3JDLEtBQUssQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDL0IsSUFBSSxRQUFRLENBQUMsYUFBYTtnQkFDeEIsS0FBSyxNQUFNLFFBQVEsSUFBSSxRQUFRLENBQUMsYUFBYSxFQUFFLHlFQUF5RTtvQkFDdEgsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQzNFLElBQUksUUFBUSxDQUFDLEtBQUs7Z0JBQ2hCLEtBQUssTUFBTSxRQUFRLElBQUksUUFBUSxDQUFDLEtBQUs7b0JBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsY0FBYyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUNyRSxDQUFDO1FBRU8saUJBQWlCO1lBQ3ZCLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBQ3BCLEtBQUssTUFBTSxRQUFRLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtnQkFDakMsOENBQThDO2dCQUM5QyxNQUFNLE9BQU8sR0FBYyxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUUsZUFBZSxDQUFDLEtBQUssSUFBSSxVQUFBLFNBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztnQkFDM0Ysc0RBQXNEO2dCQUN0RCxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ2hELE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztnQkFDaEUsMkVBQTJFO2dCQUUzRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUM5QjtRQUNILENBQUM7UUFFTyxhQUFhO1lBQ25CLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1lBQ2pCLElBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO1lBQ3pCLEtBQUssTUFBTSxJQUFJLElBQUksSUFBSTtnQkFBRSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRTtvQkFDM0UsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO29CQUM3QixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO2lCQUMvQztRQUNILENBQUM7S0FFRjtJQTFHWSwwQkFBZ0IsbUJBMEc1QixDQUFBO0FBQ0gsQ0FBQyxFQWxIUyxTQUFTLEtBQVQsU0FBUyxRQWtIbEI7QUNsSEQsSUFBVSxTQUFTLENBNktsQjtBQTdLRCxXQUFVLFNBQVM7SUFDakIsSUFBWSxNQUVYO0lBRkQsV0FBWSxNQUFNO1FBQ2hCLHFDQUFLLENBQUE7UUFBRSx1Q0FBTSxDQUFBO1FBQUUsdUNBQU0sQ0FBQTtJQUN2QixDQUFDLEVBRlcsTUFBTSxHQUFOLGdCQUFNLEtBQU4sZ0JBQU0sUUFFakI7SUFDRDs7O09BR0c7SUFFSCxJQUFzQixPQUFPLEdBQTdCLE1BQXNCLE9BQVEsU0FBUSxVQUFBLE9BQU87UUFNM0MsWUFBWSxRQUFnQixTQUFTO1lBQ25DLEtBQUssRUFBRSxDQUFDO1lBTEgsZUFBVSxHQUFXLFNBQVMsQ0FBQztZQUMvQixXQUFNLEdBQVcsTUFBTSxDQUFDLEtBQUssQ0FBQztZQUtuQyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztRQUNwQixDQUFDO1FBR00sYUFBYSxLQUEwQyxDQUFDO1FBRXhELE9BQU87WUFDWixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN6QixDQUFDO1FBRUQsa0JBQWtCO1FBQ1gsU0FBUztZQUNkLElBQUksYUFBYSxHQUFrQjtnQkFDakMsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVO2dCQUMzQixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7Z0JBQ2YsTUFBTSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO2FBQzVCLENBQUM7WUFDRixPQUFPLGFBQWEsQ0FBQztRQUN2QixDQUFDO1FBQ00sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxVQUFBLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNsRCxJQUFJLENBQUMsSUFBSSxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUM7WUFDaEMsSUFBSSxDQUFDLE1BQU0sR0FBb0IsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM3RCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTSx3QkFBd0IsQ0FBQyxRQUFpQjtZQUMvQyxJQUFJLEtBQUssR0FBMEIsS0FBSyxDQUFDLHdCQUF3QixDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzVFLElBQUksS0FBSyxDQUFDLE1BQU07Z0JBQ2QsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFDeEIsT0FBTyxLQUFLLENBQUM7UUFDZixDQUFDO1FBRVMsYUFBYSxDQUFDLFFBQWlCO1lBQ3ZDLE9BQU8sUUFBUSxDQUFDLFVBQVUsQ0FBQztRQUM3QixDQUFDO0tBQ0YsQ0FBQTtJQTVDcUIsT0FBTztRQUQ1QixVQUFBLHFCQUFxQixDQUFDLFFBQVE7T0FDVCxPQUFPLENBNEM1QjtJQTVDcUIsaUJBQU8sVUE0QzVCLENBQUE7SUFFRDs7T0FFRztJQUNILE1BQWEsWUFBYSxTQUFRLE9BQU87UUFJdkMsWUFBWSxJQUFrQjtZQUM1QixLQUFLLEVBQUUsQ0FBQztZQUpILFVBQUssR0FBcUIsSUFBSSxDQUFDO1lBS3BDLElBQUksSUFBSSxFQUFFO2dCQUNSLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2hCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQzthQUM5QztZQUVELFVBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRUQsSUFBVyxjQUFjO1lBQ3ZCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNwQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQWlCO1lBQ2pDLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDO1lBQ2hCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztZQUN6QiwyREFBMkQ7WUFDM0QsNENBQTRDO1lBQzVDLHFEQUFxRDtZQUNyRCw4QkFBOEI7WUFFOUIsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtnQkFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO29CQUN2QyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxDQUFDLHdDQUF3QztvQkFDaEUsT0FBTyxFQUFFLENBQUM7Z0JBQ1osQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDckQsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsRUFBRSxVQUFBLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUM1RSxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFFRCxrQkFBa0I7UUFDWCxTQUFTO1lBQ2QsT0FBTztnQkFDTCxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7Z0JBQ2IsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2dCQUNmLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsU0FBUyxFQUFFO2FBQzVDLENBQUM7UUFDSixDQUFDO1FBQ00sS0FBSyxDQUFDLFdBQVcsQ0FBQyxjQUE2QjtZQUNwRCxNQUFNLEtBQUssQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNoRSxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3BDLHNFQUFzRTtZQUN0RSxPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7UUFFTSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQWlCO1lBQ25DLElBQUksUUFBUSxDQUFDLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRTtnQkFDckMsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNoQyxpREFBaUQ7WUFDakQsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN0QixLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ3ZCLHVFQUF1RTtZQUN2RSw0QkFBNEI7UUFDOUIsQ0FBQztLQUVGO0lBaEVZLHNCQUFZLGVBZ0V4QixDQUFBO0lBRUQ7O09BRUc7SUFDSCxNQUFhLGFBQWMsU0FBUSxPQUFPO1FBR3hDLFlBQVksS0FBYSxFQUFFLE9BQWUsRUFBRSxVQUFrQixNQUFNLENBQUMsS0FBSztZQUN4RSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7WUFIUixVQUFLLEdBQXFCLElBQUksS0FBSyxFQUFFLENBQUM7WUFJM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDO1FBQ3hCLENBQUM7UUFDRCxJQUFXLGNBQWM7WUFDdkIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7S0FDRjtJQVhZLHVCQUFhLGdCQVd6QixDQUFBO0lBUUQsTUFBYSxhQUFjLFNBQVEsT0FBTztRQUd4QyxZQUFZLEtBQWEsRUFBRSxLQUFtRTtZQUM1RixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDYixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztRQUNwQixDQUFDO1FBQ0QsSUFBVyxjQUFjO1lBQ3ZCLE9BQXdCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQzNDLENBQUM7S0FDRjtJQVZZLHVCQUFhLGdCQVV6QixDQUFBO0lBQ0Q7O09BRUc7SUFDSCxNQUFhLGFBQWMsU0FBUSxhQUFhO1FBQzlDLElBQVcsY0FBYztZQUN2QixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7S0FDRjtJQUpZLHVCQUFhLGdCQUl6QixDQUFBO0lBQ0Q7O09BRUc7SUFDSCxNQUFhLFdBQVksU0FBUSxhQUFhO1FBQzVDLElBQVcsY0FBYztZQUN2QixPQUFPLElBQUksQ0FBQztRQUNkLENBQUM7S0FDRjtJQUpZLHFCQUFXLGNBSXZCLENBQUE7QUFDSCxDQUFDLEVBN0tTLFNBQVMsS0FBVCxTQUFTLFFBNktsQjtBQzdLRCxJQUFVLFNBQVMsQ0FPbEI7QUFQRCxXQUFVLFNBQVM7SUFDakIsTUFBYSxjQUFlLFNBQVEsVUFBQSxhQUFhO1FBRXZDLE1BQU0sQ0FBQyxHQUFHO1lBQ2hCLE9BQU8sNGdrQkFBNGdrQixDQUFDO1FBQ3Roa0IsQ0FBQzs7SUFIYSxzQkFBTyxHQUFrQixJQUFJLGNBQWMsQ0FBQyxnQkFBZ0IsRUFBRSxjQUFjLENBQUMsR0FBRyxFQUFFLEVBQUUsVUFBQSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFEdEcsd0JBQWMsaUJBSzFCLENBQUE7QUFDSCxDQUFDLEVBUFMsU0FBUyxLQUFULFNBQVMsUUFPbEI7QUNQRCx5Q0FBeUM7QUFDekMsdUNBQXVDO0FBQ3ZDLElBQVUsU0FBUyxDQWlMbEI7QUFuTEQseUNBQXlDO0FBQ3pDLHVDQUF1QztBQUN2QyxXQUFVLFNBQVM7SUFDakI7O09BRUc7SUFDSCxJQUFZLFNBU1g7SUFURCxXQUFZLFNBQVM7UUFDbkIsNkRBQTZEO1FBQzdELDJDQUE4QixDQUFBO1FBQzlCLGdFQUFnRTtRQUNoRSxnREFBbUMsQ0FBQTtRQUNuQyxnRUFBZ0U7UUFDaEUsbUNBQXNCLENBQUE7UUFDdEIseUZBQXlGO1FBQ3pGLG1DQUFzQixDQUFBO0lBQ3hCLENBQUMsRUFUVyxTQUFTLEdBQVQsbUJBQVMsS0FBVCxtQkFBUyxRQVNwQjtJQUVEOzs7OztPQUtHO0lBQ0gsTUFBYSxJQUFLLFNBQVEsVUFBQSxpQkFBaUI7UUFrQnpDLG1FQUFtRTtRQUM1RCxNQUFNLEtBQUssYUFBYSxLQUFhLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFDekUsbUVBQW1FO1FBQzVELE1BQU0sS0FBSyxhQUFhLEtBQWEsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztRQUN6RSxxREFBcUQ7UUFDOUMsTUFBTSxLQUFLLGFBQWEsS0FBYSxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1FBQ3pFLHFEQUFxRDtRQUM5QyxNQUFNLEtBQUssYUFBYSxLQUFhLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFDekUsOENBQThDO1FBQ3ZDLE1BQU0sS0FBSyxrQkFBa0IsS0FBYSxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7UUFDbkYsOENBQThDO1FBQ3ZDLE1BQU0sS0FBSyxrQkFBa0IsS0FBYSxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7UUFDbkYsMERBQTBEO1FBQ25ELE1BQU0sS0FBSyxjQUFjLEtBQWEsT0FBTyxJQUFJLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQztRQUN4RiwwREFBMEQ7UUFDbkQsTUFBTSxLQUFLLGNBQWMsS0FBYSxPQUFPLElBQUksR0FBRyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDO1FBQ3hGLDRDQUE0QztRQUNyQyxNQUFNLEtBQUssTUFBTSxLQUFhLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFFM0Q7Ozs7O1dBS0c7UUFDSSxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQW1CLFNBQVMsQ0FBQyxhQUFhLEVBQUUsT0FBZSxFQUFFLEVBQUUsMEJBQW1DLEtBQUs7WUFDekgsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBRVosSUFBSSxDQUFDLGNBQWMsR0FBRyxVQUFBLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDdEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDeEMsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7WUFDL0MsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7WUFDL0MsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLEtBQUssSUFBSSxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ2pFLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQztZQUN2QyxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO1lBQ2pGLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxzQkFBc0IsR0FBRyx1QkFBdUIsQ0FBQztZQUV0RCxJQUFJLEdBQUcsR0FBVyx5QkFBeUIsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3ZELElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxTQUFTLENBQUMsYUFBYTtnQkFDdEMsR0FBRyxJQUFJLG1CQUFtQixJQUFJLE1BQU0sQ0FBQztZQUN2QyxVQUFBLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFakIsUUFBUSxLQUFLLEVBQUU7Z0JBQ2IsS0FBSyxTQUFTLENBQUMsYUFBYTtvQkFDMUIsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO29CQUNqQixNQUFNO2dCQUNSLEtBQUssU0FBUyxDQUFDLGdCQUFnQjtvQkFDN0IsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO29CQUNuQixNQUFNO2dCQUNSLEtBQUssU0FBUyxDQUFDLFNBQVM7b0JBQ3RCLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7b0JBQzdFLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztvQkFDaEIsTUFBTTtnQkFDUixLQUFLLFNBQVMsQ0FBQyxTQUFTO29CQUN0QixJQUFJLENBQUMsV0FBVyxHQUFHLFVBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDaEYsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO29CQUNoQixNQUFNO2dCQUNSO29CQUNFLE1BQU07YUFDVDtZQUVELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLENBQUM7UUFFRDs7V0FFRztRQUNJLE1BQU0sQ0FBQyxJQUFJO1lBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTztnQkFDZixPQUFPO1lBRVQsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNqQixLQUFLLFNBQVMsQ0FBQyxhQUFhO29CQUMxQixNQUFNLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO29CQUM1QyxNQUFNO2dCQUNSLEtBQUssU0FBUyxDQUFDLGdCQUFnQjtvQkFDN0IsVUFBQSxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7b0JBQ2hFLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO29CQUNsQyxNQUFNO2dCQUNSLEtBQUssU0FBUyxDQUFDLFNBQVM7b0JBQ3RCLE1BQU0sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO29CQUN2QyxNQUFNLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO29CQUM1QyxNQUFNO2dCQUNSLEtBQUssU0FBUyxDQUFDLFNBQVM7b0JBQ3RCLFVBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO29CQUN4QyxNQUFNLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO29CQUM1QyxNQUFNO2dCQUNSO29CQUNFLE1BQU07YUFDVDtZQUVELElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1lBQ3JCLFVBQUEsS0FBSyxDQUFDLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUMvQixDQUFDO1FBRU0sTUFBTSxDQUFDLFFBQVE7WUFDcEIsSUFBSSxJQUFJLENBQUMsT0FBTztnQkFDZCxPQUFPO1lBRVQsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUM7UUFDdEUsQ0FBQztRQUVPLE1BQU0sQ0FBQyxJQUFJO1lBQ2pCLElBQUksSUFBWSxDQUFDO1lBQ2pCLElBQUksR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDekIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1lBQ3RELElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUM7WUFFaEMsSUFBSSxHQUFHLFVBQUEsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN2QixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDdEQsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQztZQUVoQyxJQUFJLENBQUMscUJBQXFCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDO1lBQ3BJLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUM7WUFFcEksZ0ZBQWdGO1lBQ2hGLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUNmLElBQUksS0FBSyxHQUFVLElBQUksS0FBSyw4QkFBa0IsQ0FBQztZQUMvQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBRU8sTUFBTSxDQUFDLFNBQVM7WUFDdEIsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ1osSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2hFLENBQUM7UUFDTyxNQUFNLENBQUMsV0FBVyxDQUFDLFFBQWdCLElBQUksRUFBRSxXQUFvQixJQUFJO1lBQ3ZFLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNaLFVBQUEsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBQ3hDLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBQSxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDdEYsQ0FBQztRQUNPLE1BQU0sQ0FBQyxRQUFRO1lBQ3JCLElBQUksSUFBSSxDQUFDLHNCQUFzQjtnQkFDN0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDOztnQkFFekQsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2hCLENBQUM7O0lBekpjLG1CQUFjLEdBQVcsQ0FBQyxDQUFDO0lBQzNCLG1CQUFjLEdBQVcsQ0FBQyxDQUFDO0lBQzNCLG1CQUFjLEdBQVcsQ0FBQyxDQUFDO0lBQzNCLG1CQUFjLEdBQVcsQ0FBQyxDQUFDO0lBQzNCLHdCQUFtQixHQUFXLENBQUMsQ0FBQztJQUNoQyx3QkFBbUIsR0FBVyxDQUFDLENBQUM7SUFDaEMsMEJBQXFCLEdBQVcsQ0FBQyxDQUFDO0lBQ2xDLDBCQUFxQixHQUFXLENBQUMsQ0FBQztJQUNsQyxZQUFPLEdBQVcsQ0FBQyxDQUFDO0lBQ3BCLFlBQU8sR0FBWSxLQUFLLENBQUM7SUFDekIsU0FBSSxHQUFjLFNBQVMsQ0FBQyxhQUFhLENBQUM7SUFDMUMsZ0JBQVcsR0FBVyxDQUFDLENBQUM7SUFDeEIsY0FBUyxHQUFXLENBQUMsQ0FBQztJQUN0QixlQUFVLEdBQVcsRUFBRSxDQUFDO0lBQ3hCLG9CQUFlLEdBQVcsRUFBRSxDQUFDO0lBQzdCLDJCQUFzQixHQUFZLEtBQUssQ0FBQztJQWhCNUMsY0FBSSxPQTJKaEIsQ0FBQTtBQUNILENBQUMsRUFqTFMsU0FBUyxLQUFULFNBQVMsUUFpTGxCO0FDbkxELElBQVUsU0FBUyxDQThPbEI7QUE5T0QsV0FBVSxTQUFTO0lBa0JqQjs7Ozs7O09BTUc7SUFDSCxNQUFhLElBQUssU0FBUSxVQUFBLGtCQUFrQjtRQVUxQztZQUNFLEtBQUssRUFBRSxDQUFDO1lBSkYsV0FBTSxHQUFXLEVBQUUsQ0FBQztZQUNwQixxQkFBZ0IsR0FBVyxDQUFDLENBQUM7WUFJbkMsSUFBSSxDQUFDLEtBQUssR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDL0IsSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUM7WUFDakIsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7WUFDbEIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLEdBQUcsQ0FBQztRQUMvQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQXFCO1lBQzFDLElBQUksS0FBSyxHQUFjLEVBQUUsQ0FBQztZQUUxQixLQUFLLENBQUMsU0FBUyxHQUFHLGFBQWEsR0FBRyxJQUFJLENBQUM7WUFDdkMsS0FBSyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztZQUN2QyxLQUFLLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBRXJDLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDeEMsS0FBSyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDakQsS0FBSyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUM7WUFFakQsS0FBSyxDQUFDLFFBQVEsR0FBRyxhQUFhLEdBQUcsSUFBSSxDQUFDO1lBQ3RDLEtBQUssQ0FBQyxTQUFTLEdBQUcsYUFBYSxHQUFHLEVBQUUsQ0FBQztZQUNyQyxLQUFLLENBQUMsUUFBUSxHQUFHLGFBQWEsR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQztZQUN2RCxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDO1lBRWpFLE9BQU8sS0FBSyxDQUFDO1FBQ2YsQ0FBQztRQUVELGtDQUFrQztRQUNsQzs7V0FFRztRQUNJLEdBQUc7WUFDUixPQUFPLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDckUsQ0FBQztRQUVEOztXQUVHO1FBQ0ksWUFBWSxDQUFDLEdBQVc7WUFDN0IsT0FBTyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzFCLENBQUM7UUFFRDs7O1dBR0c7UUFDSSxHQUFHLENBQUMsUUFBZ0IsQ0FBQztZQUMxQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUNwQixJQUFJLENBQUMsS0FBSyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUMvQixJQUFJLENBQUMsMkJBQTJCLEVBQUUsQ0FBQztRQUNyQyxDQUFDO1FBRUQ7OztXQUdHO1FBQ0ksUUFBUSxDQUFDLFNBQWlCLEdBQUc7WUFDbEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztZQUNyQixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztZQUNwQixxQkFBcUI7WUFDckIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDeEIsSUFBSSxDQUFDLDJCQUEyQixFQUFFLENBQUM7WUFDbkMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLEtBQUssZ0NBQW1CLENBQUMsQ0FBQztRQUNuRCxDQUFDO1FBRUQ7O1dBRUc7UUFDSSxRQUFRO1lBQ2IsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7UUFFRDs7V0FFRztRQUNJLFNBQVM7WUFDZCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDckIsQ0FBQztRQUVEOzs7V0FHRztRQUNJLDJCQUEyQjtZQUNoQyxJQUFJLE9BQU8sR0FBVyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDakMsSUFBSSxPQUFPLEdBQVcsT0FBTyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztZQUN2RCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsT0FBTyxDQUFDO1lBQ2pDLE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUM7UUFDRCxZQUFZO1FBR1osZ0JBQWdCO1FBQ2hCOztXQUVHO1FBQ0ksS0FBSyxDQUFDLE1BQWM7WUFDekIsT0FBTyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDN0UsQ0FBQztRQUVELCtEQUErRDtRQUMvRDs7V0FFRztRQUNJLGNBQWM7WUFDbkIsS0FBSyxJQUFJLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUMxQixJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQzlCO1FBQ0gsQ0FBQztRQUVEOzs7V0FHRztRQUNJLDBCQUEwQixDQUFDLEdBQVc7WUFDM0MsS0FBSyxJQUFJLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO2dCQUMxQixJQUFJLEtBQUssR0FBVSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNuQyxJQUFJLEtBQUssQ0FBQyxFQUFFLElBQUksR0FBRyxFQUFFO29CQUNuQixLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7b0JBQ2QsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO29CQUN2Qix1REFBdUQ7aUJBQ3hEO2FBQ0Y7UUFDSCxDQUFDO1FBRUQ7Ozs7OztXQU1HO1FBQ0ksUUFBUSxDQUFDLE1BQWMsRUFBRSxNQUFjLEVBQUUsUUFBc0IsRUFBRSxHQUFHLFVBQW9CO1lBQzdGLGlEQUFpRDtZQUNqRCxJQUFJLFVBQUEsS0FBSyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUN0RCx1QkFBdUI7WUFDdkIsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDL0IsQ0FBQztRQUVEOztXQUVHO1FBQ0ksUUFBUSxDQUFDLE1BQWE7WUFDM0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLE1BQU0sQ0FBQztZQUM5QyxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztRQUMvQixDQUFDO1FBRUQ7O1dBRUc7UUFDSSxXQUFXLENBQUMsR0FBVztZQUM1QixJQUFJLEtBQUssR0FBVSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3BDLElBQUksQ0FBQyxLQUFLO2dCQUNSLE9BQU87WUFDVCxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDZCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDMUIsQ0FBQztRQUVEOztXQUVHO1FBQ0ksUUFBUSxDQUFDLEdBQVc7WUFDekIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFCLENBQUM7UUFFRDs7V0FFRztRQUNJLFNBQVM7WUFDZCxJQUFJLE1BQU0sR0FBVyxFQUFFLENBQUM7WUFDeEIsT0FBTyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUMsQ0FBQztRQUVEOztXQUVHO1FBQ0ksU0FBUztZQUNkLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDL0MsQ0FBQztRQUVEOztXQUVHO1FBQ0ssZ0JBQWdCO1lBQ3RCLEtBQUssSUFBSSxFQUFFLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtnQkFDMUIsSUFBSSxLQUFLLEdBQVUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDbkMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNkLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLO29CQUNiLHNEQUFzRDtvQkFDdEQsU0FBUztnQkFFWCx3QkFBd0I7Z0JBQ3hCLEtBQUssR0FBRyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyx5REFBeUQ7Z0JBQ3RGLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLDRCQUE0QjtnQkFDdkUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyw2Q0FBNkM7YUFDdkU7UUFDSCxDQUFDOztJQWpORCxxRUFBcUU7SUFDOUMsU0FBSSxHQUFTLElBQUksSUFBSSxFQUFFLENBQUM7SUFGcEMsY0FBSSxPQW1OaEIsQ0FBQTtJQUNELFlBQVk7QUFDZCxDQUFDLEVBOU9TLFNBQVMsS0FBVCxTQUFTLFFBOE9sQjtBQzlPRCxJQUFVLFNBQVMsQ0EyR2xCO0FBM0dELFdBQVUsU0FBUztJQU1qQjs7Ozs7O09BTUc7SUFDSCxNQUFhLEtBQUs7UUFVaEI7Ozs7Ozs7OztXQVNHO1FBQ0gsWUFBWSxLQUFXLEVBQUUsT0FBZSxFQUFFLE1BQWMsRUFBRSxRQUFzQixFQUFFLEdBQUcsVUFBb0I7WUFDdkcsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxPQUFPLENBQUM7WUFDdEIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLFVBQUEsVUFBVSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztZQUM5QyxJQUFJLENBQUMsT0FBTyxHQUFHLFFBQVEsQ0FBQztZQUN4QixJQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sQ0FBQztZQUVwQixJQUFJLEtBQUssR0FBVyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1lBRS9DLElBQUksQ0FBQyxLQUFLLEVBQUU7Z0JBQ1YseUNBQXlDO2dCQUN6QyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztnQkFDcEIsT0FBTzthQUNSO1lBRUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUV2QyxJQUFJLFFBQVEsR0FBYSxHQUFTLEVBQUU7Z0JBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTTtvQkFDZCxPQUFPO2dCQUVULElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDeEMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDckIsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO2dCQUU3QixJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQztvQkFDaEIsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQzt3QkFDbkIsS0FBSyxDQUFDLDBCQUEwQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUV0RCxDQUFDLENBQUM7WUFFRixJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUM7WUFDM0UsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7WUFDbkIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QixDQUFDO1FBRUQ7O1dBRUc7UUFDSCxJQUFXLEVBQUU7WUFDWCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDdkIsQ0FBQztRQUVEOztXQUVHO1FBQ0gsSUFBVyxLQUFLO1lBQ2QsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3JCLENBQUM7UUFFRDs7V0FFRztRQUNJLFdBQVc7WUFDaEIsT0FBTyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDM0YsQ0FBQztRQUVEOztXQUVHO1FBQ0ksS0FBSztZQUNWLHlDQUF5QztZQUN6Qyx1QkFBdUI7WUFDdkIsdUVBQXVFO1lBQ3ZFLDJHQUEyRztZQUMzRyxvQ0FBb0M7WUFDcEMsSUFBSTtZQUNKLE9BQU87WUFDUCxrSEFBa0g7WUFDbEgsTUFBTSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDcEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDdEIsQ0FBQztLQUNGO0lBN0ZZLGVBQUssUUE2RmpCLENBQUE7QUFDSCxDQUFDLEVBM0dTLFNBQVMsS0FBVCxTQUFTLFFBMkdsQiIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEJhc2UgY2xhc3MgZm9yIHRoZSBkaWZmZXJlbnQgRGVidWdUYXJnZXRzLCBtYWlubHkgZm9yIHRlY2huaWNhbCBwdXJwb3NlIG9mIGluaGVyaXRhbmNlXHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIERlYnVnVGFyZ2V0IHtcclxuICAgIHB1YmxpYyBkZWxlZ2F0ZXM6IE1hcERlYnVnRmlsdGVyVG9EZWxlZ2F0ZTtcclxuICAgIHB1YmxpYyBzdGF0aWMgbWVyZ2VBcmd1bWVudHMoX21lc3NhZ2U6IE9iamVjdCwgLi4uX2FyZ3M6IE9iamVjdFtdKTogc3RyaW5nIHtcclxuICAgICAgbGV0IG91dDogc3RyaW5nID0gX21lc3NhZ2UudG9TdHJpbmcoKTsgLy9KU09OLnN0cmluZ2lmeShfbWVzc2FnZSk7XHJcbiAgICAgIGZvciAobGV0IGFyZyBvZiBfYXJncylcclxuICAgICAgICBpZiAoYXJnIGluc3RhbmNlb2YgTnVtYmVyKVxyXG4gICAgICAgICAgb3V0ICs9IFwiLCBcIiArIGFyZy50b1ByZWNpc2lvbigyKS50b1N0cmluZygpOyAvL0pTT04uc3RyaW5naWZ5KGFyZywgbnVsbCwgMik7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgb3V0ICs9IFwiLCBcIiArIGFyZy50b1N0cmluZygpOyAvL0pTT04uc3RyaW5naWZ5KGFyZywgbnVsbCwgMik7XHJcbiAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiLy8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWdBbGVydC50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGZpbHRlcnMgY29ycmVzcG9uZGluZyB0byBkZWJ1ZyBhY3Rpdml0aWVzLCBtb3JlIHRvIGNvbWVcclxuICAgKi9cclxuICBleHBvcnQgZW51bSBERUJVR19GSUxURVIge1xyXG4gICAgTk9ORSA9IDB4MDAsXHJcbiAgICBJTkZPID0gMHgwMSxcclxuICAgIExPRyA9IDB4MDIsXHJcbiAgICBXQVJOID0gMHgwNCxcclxuICAgIEVSUk9SID0gMHgwOCxcclxuICAgIEZVREdFID0gMHgxMCxcclxuICAgIENMRUFSID0gMHgxMDAsXHJcbiAgICBHUk9VUCA9IDB4MTAxLFxyXG4gICAgR1JPVVBDT0xMQVBTRUQgPSAweDEwMixcclxuICAgIEdST1VQRU5EID0gMHgxMDQsXHJcbiAgICBTT1VSQ0UgPSAweDIwMCxcclxuICAgIE1FU1NBR0VTID0gSU5GTyB8IExPRyB8IFdBUk4gfCBFUlJPUiB8IEZVREdFLFxyXG4gICAgRk9STUFUID0gQ0xFQVIgfCBHUk9VUCB8IEdST1VQQ09MTEFQU0VEIHwgR1JPVVBFTkQsXHJcbiAgICBBTEwgPSBNRVNTQUdFUyB8IEZPUk1BVFxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGNvbnN0IERFQlVHX1NZTUJPTDogeyBbZmlsdGVyOiBudW1iZXJdOiBzdHJpbmc7IH0gPSB7XHJcbiAgICBbREVCVUdfRklMVEVSLklORk9dOiBcIuKck1wiLFxyXG4gICAgW0RFQlVHX0ZJTFRFUi5MT0ddOiBcIuKcjlwiLFxyXG4gICAgW0RFQlVHX0ZJTFRFUi5XQVJOXTogXCLimqBcIixcclxuICAgIFtERUJVR19GSUxURVIuRVJST1JdOiBcIuKdjFwiLFxyXG4gICAgW0RFQlVHX0ZJTFRFUi5GVURHRV06IFwi8J+OslwiLFxyXG4gICAgW0RFQlVHX0ZJTFRFUi5TT1VSQ0VdOiBcIvCflJdcIlxyXG4gIH07XHJcblxyXG4gIGV4cG9ydCB0eXBlIE1hcERlYnVnVGFyZ2V0VG9EZWxlZ2F0ZSA9IE1hcDxEZWJ1Z1RhcmdldCwgRnVuY3Rpb24+O1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTWFwRGVidWdGaWx0ZXJUb0RlbGVnYXRlIHsgW2ZpbHRlcjogbnVtYmVyXTogRnVuY3Rpb247IH1cclxufSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWdUYXJnZXQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFJvdXRpbmcgdG8gdGhlIHN0YW5kYXJkLWNvbnNvbGVcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRGVidWdDb25zb2xlIGV4dGVuZHMgRGVidWdUYXJnZXQge1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWxlZ2F0ZXM6IE1hcERlYnVnRmlsdGVyVG9EZWxlZ2F0ZSA9IHtcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5JTkZPXTogY29uc29sZS5pbmZvLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkxPR106IGNvbnNvbGUubG9nLFxyXG4gICAgICBbREVCVUdfRklMVEVSLldBUk5dOiBjb25zb2xlLndhcm4sXHJcbiAgICAgIFtERUJVR19GSUxURVIuRVJST1JdOiBjb25zb2xlLmVycm9yLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkZVREdFXTogRGVidWdDb25zb2xlLmZ1ZGdlLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkNMRUFSXTogY29uc29sZS5jbGVhcixcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5HUk9VUF06IGNvbnNvbGUuZ3JvdXAsXHJcbiAgICAgIFtERUJVR19GSUxURVIuR1JPVVBDT0xMQVBTRURdOiBjb25zb2xlLmdyb3VwQ29sbGFwc2VkLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkdST1VQRU5EXTogY29uc29sZS5ncm91cEVuZCxcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5TT1VSQ0VdOiBEZWJ1Z0NvbnNvbGUuc291cmNlXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdWxkIGJlIHVzZWQgdG8gZGlzcGxheSB1bmNyaXRpY2FsIHN0YXRlIGluZm9ybWF0aW9uIG9mIEZVREdFLCBvbmx5IHZpc2libGUgaW4gYnJvd3NlcidzIHZlcmJvc2UgbW9kZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGZ1ZGdlKF9tZXNzYWdlOiBPYmplY3QsIC4uLl9hcmdzOiBPYmplY3RbXSk6IHZvaWQge1xyXG4gICAgICBjb25zb2xlLmRlYnVnKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuRlVER0VdLCBfbWVzc2FnZSwgLi4uX2FyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzcGxheXMgYW4gZXh0cmEgbGluZSB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzb3VyY2Ugb2YgdGhlIGRlYnVnIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzb3VyY2UoX21lc3NhZ2U6IE9iamVjdCwgLi4uX2FyZ3M6IE9iamVjdFtdKTogdm9pZCB7XHJcbiAgICAgIGNvbnNvbGUubG9nKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuU09VUkNFXSwgX21lc3NhZ2UsIC4uLl9hcmdzKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCIvLyAvIDxyZWZlcmVuY2UgcGF0aD1cIkRlYnVnVGFyZ2V0LnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWdJbnRlcmZhY2VzLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWdDb25zb2xlLnRzXCIvPlxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBUaGUgRGVidWctQ2xhc3Mgb2ZmZXJzIGZ1bmN0aW9ucyBrbm93biBmcm9tIHRoZSBjb25zb2xlLW9iamVjdCBhbmQgYWRkaXRpb25zLCBcclxuICAgKiByb3V0aW5nIHRoZSBpbmZvcm1hdGlvbiB0byB2YXJpb3VzIHtAbGluayBEZWJ1Z1RhcmdldH1zIHRoYXQgY2FuIGJlIGVhc2lseSBkZWZpbmVkIGJ5IHRoZSBkZXZlbG9wZXJzIGFuZCByZWdpc3RlcmQgYnkgdXNlcnNcclxuICAgKiBPdmVycmlkZSBmdW5jdGlvbnMgaW4gc3ViY2xhc3NlcyBvZiB7QGxpbmsgRGVidWdUYXJnZXR9IGFuZCByZWdpc3RlciB0aGVtIGFzIHRoZWlyIGRlbGVnYXRlc1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBEZWJ1ZyB7XHJcbiAgICAvKipcclxuICAgICAqIEZvciBlYWNoIHNldCBmaWx0ZXIsIHRoaXMgYXNzb2NpYXRpdmUgYXJyYXkga2VlcHMgcmVmZXJlbmNlcyB0byB0aGUgcmVnaXN0ZXJlZCBkZWxlZ2F0ZSBmdW5jdGlvbnMgb2YgdGhlIGNob3NlbiB7QGxpbmsgRGVidWdUYXJnZXR9c1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBkZWxlZ2F0ZXM6IHsgW2ZpbHRlcjogbnVtYmVyXTogTWFwRGVidWdUYXJnZXRUb0RlbGVnYXRlIH0gPSBEZWJ1Zy5zZXR1cENvbnNvbGUoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERlLSAvIEFjdGl2YXRlIGEgZmlsdGVyIGZvciB0aGUgZ2l2ZW4gRGVidWdUYXJnZXQuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNldEZpbHRlcihfdGFyZ2V0OiBEZWJ1Z1RhcmdldCwgX2ZpbHRlcjogREVCVUdfRklMVEVSKTogdm9pZCB7XHJcbiAgICAgIGZvciAobGV0IGZpbHRlciBpbiBEZWJ1Zy5kZWxlZ2F0ZXMpXHJcbiAgICAgICAgRGVidWcuZGVsZWdhdGVzW2ZpbHRlcl0uZGVsZXRlKF90YXJnZXQpO1xyXG5cclxuICAgICAgZm9yIChsZXQgZmlsdGVyIGluIERFQlVHX0ZJTFRFUikge1xyXG4gICAgICAgIGxldCBwYXJzZWQ6IG51bWJlciA9IHBhcnNlSW50KGZpbHRlcik7XHJcbiAgICAgICAgaWYgKGlzTmFOKHBhcnNlZCkpXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBpZiAoW0RFQlVHX0ZJTFRFUi5NRVNTQUdFUywgREVCVUdfRklMVEVSLkZPUk1BVCwgREVCVUdfRklMVEVSLkFMTF0uaW5kZXhPZihwYXJzZWQpICE9IC0xKVxyXG4gICAgICAgICAgLy8gZG9udCBkZWxlZ2F0ZSBjb21ib3MuLi4gXHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICBpZiAoX2ZpbHRlciAmIHBhcnNlZClcclxuICAgICAgICAgIERlYnVnLmRlbGVnYXRlc1twYXJzZWRdLnNldChfdGFyZ2V0LCBfdGFyZ2V0LmRlbGVnYXRlc1twYXJzZWRdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RmlsdGVyKF90YXJnZXQ6IERlYnVnVGFyZ2V0KTogREVCVUdfRklMVEVSIHtcclxuICAgICAgbGV0IHJlc3VsdDogREVCVUdfRklMVEVSID0gMDtcclxuICAgICAgZm9yIChsZXQgZmlsdGVyIGluIF90YXJnZXQuZGVsZWdhdGVzKVxyXG4gICAgICAgIHJlc3VsdCB8PSBwYXJzZUludChmaWx0ZXIpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkRmlsdGVyKF90YXJnZXQ6IERlYnVnVGFyZ2V0LCBfZmlsdGVyOiBERUJVR19GSUxURVIpOiB2b2lkIHtcclxuICAgICAgbGV0IGN1cnJlbnQ6IERFQlVHX0ZJTFRFUiA9IERlYnVnLmdldEZpbHRlcihfdGFyZ2V0KTtcclxuICAgICAgRGVidWcuc2V0RmlsdGVyKF90YXJnZXQsIGN1cnJlbnQgfCBfZmlsdGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZUZpbHRlcihfdGFyZ2V0OiBEZWJ1Z1RhcmdldCwgX2ZpbHRlcjogREVCVUdfRklMVEVSKTogdm9pZCB7XHJcbiAgICAgIGxldCBjdXJyZW50OiBERUJVR19GSUxURVIgPSBEZWJ1Zy5nZXRGaWx0ZXIoX3RhcmdldCk7XHJcbiAgICAgIERlYnVnLnNldEZpbHRlcihfdGFyZ2V0LCBjdXJyZW50IF4gX2ZpbHRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmZvKC4uLikgZGlzcGxheXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB3aXRoIGxvdyBwcmlvcml0eVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGluZm8oX21lc3NhZ2U6IHVua25vd24sIC4uLl9hcmdzOiB1bmtub3duW10pOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLklORk8sIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXlzIGluZm9ybWF0aW9uIHdpdGggbWVkaXVtIHByaW9yaXR5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgbG9nKF9tZXNzYWdlOiB1bmtub3duLCAuLi5fYXJnczogdW5rbm93bltdKTogdm9pZCB7XHJcbiAgICAgIERlYnVnLmRlbGVnYXRlKERFQlVHX0ZJTFRFUi5MT0csIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXlzIGluZm9ybWF0aW9uIGFib3V0IG5vbi1jb25mb3JtaXRpZXMgaW4gdXNhZ2UsIHdoaWNoIGlzIGVtcGhhc2l6ZWQgZS5nLiBieSBjb2xvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHdhcm4oX21lc3NhZ2U6IHVua25vd24sIC4uLl9hcmdzOiB1bmtub3duW10pOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLldBUk4sIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXlzIGNyaXRpY2FsIGluZm9ybWF0aW9uIGFib3V0IGZhaWx1cmVzLCB3aGljaCBpcyBlbXBoYXNpemVkIGUuZy4gYnkgY29sb3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBlcnJvcihfbWVzc2FnZTogdW5rbm93biwgLi4uX2FyZ3M6IHVua25vd25bXSk6IHZvaWQge1xyXG4gICAgICBEZWJ1Zy5kZWxlZ2F0ZShERUJVR19GSUxURVIuRVJST1IsIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXlzIG1lc3NhZ2VzIGZyb20gRlVER0VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBmdWRnZShfbWVzc2FnZTogdW5rbm93biwgLi4uX2FyZ3M6IHVua25vd25bXSk6IHZvaWQge1xyXG4gICAgICBEZWJ1Zy5kZWxlZ2F0ZShERUJVR19GSUxURVIuRlVER0UsIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENsZWFycyB0aGUgb3V0cHV0IGFuZCByZW1vdmVzIHByZXZpb3VzIG1lc3NhZ2VzIGlmIHBvc3NpYmxlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgIERlYnVnLmRlbGVnYXRlKERFQlVHX0ZJTFRFUi5DTEVBUiwgbnVsbCwgbnVsbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9wZW5zIGEgbmV3IGdyb3VwIGZvciBtZXNzYWdlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdyb3VwKF9uYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLkdST1VQLCBfbmFtZSwgbnVsbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9wZW5zIGEgbmV3IGdyb3VwIGZvciBtZXNzYWdlcyB0aGF0IGlzIGNvbGxhcHNlZCBhdCBmaXJzdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdyb3VwQ29sbGFwc2VkKF9uYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLkdST1VQQ09MTEFQU0VELCBfbmFtZSwgbnVsbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENsb3NlcyB0aGUgeW91bmdlc3QgZ3JvdXBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBncm91cEVuZCgpOiB2b2lkIHtcclxuICAgICAgRGVidWcuZGVsZWdhdGUoREVCVUdfRklMVEVSLkdST1VQRU5ELCBudWxsLCBudWxsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTG9nIGEgYnJhbmNoIG9mIHRoZSBub2RlIGhpZXJhcmNoeVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGJyYW5jaChfYnJhbmNoOiBOb2RlKTogdm9pZCB7XHJcbiAgICAgIGlmIChfYnJhbmNoLm5DaGlsZHJlbiA+IDApXHJcbiAgICAgICAgRGVidWcuZ3JvdXAoX2JyYW5jaC5uYW1lKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIERlYnVnLmZ1ZGdlKF9icmFuY2gubmFtZSk7XHJcblxyXG4gICAgICBmb3IgKGxldCBjaGlsZCBvZiBfYnJhbmNoLmdldENoaWxkcmVuKCkpIERlYnVnLmJyYW5jaChjaGlsZCk7XHJcblxyXG4gICAgICBpZiAoX2JyYW5jaC5uQ2hpbGRyZW4gPiAwKVxyXG4gICAgICAgIERlYnVnLmdyb3VwRW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5cyBtZXNzYWdlcyBhYm91dCB0aGUgc291cmNlIG9mIHRoZSBkZWJ1ZyBjYWxsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc291cmNlKF9tZXNzYWdlOiB1bmtub3duLCAuLi5fYXJnczogdW5rbm93bltdKTogdm9pZCB7XHJcbiAgICAgIERlYnVnLmRlbGVnYXRlKERFQlVHX0ZJTFRFUi5TT1VSQ0UsIF9tZXNzYWdlLCBfYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMb29rdXAgYWxsIGRlbGVnYXRlcyByZWdpc3RlcmVkIHRvIHRoZSBmaWx0ZXIgYW5kIGNhbGwgdGhlbSB1c2luZyB0aGUgZ2l2ZW4gYXJndW1lbnRzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGRlbGVnYXRlKF9maWx0ZXI6IERFQlVHX0ZJTFRFUiwgX21lc3NhZ2U6IHVua25vd24sIF9hcmdzOiB1bmtub3duW10pOiB2b2lkIHtcclxuICAgICAgaWYgKF9maWx0ZXIgPT0gREVCVUdfRklMVEVSLkxPRyB8fCBfZmlsdGVyID09IERFQlVHX0ZJTFRFUi5XQVJOIHx8IF9maWx0ZXIgPT0gREVCVUdfRklMVEVSLkVSUk9SKSB7XHJcbiAgICAgICAgaWYgKERlYnVnLmRlbGVnYXRlc1tERUJVR19GSUxURVIuU09VUkNFXSlcclxuICAgICAgICAgIGZvciAobGV0IGRlbGVnYXRlIG9mIERlYnVnLmRlbGVnYXRlc1tERUJVR19GSUxURVIuU09VUkNFXS52YWx1ZXMoKSlcclxuICAgICAgICAgICAgaWYgKGRlbGVnYXRlKSB7XHJcbiAgICAgICAgICAgICAgbGV0IHRyYWNlOiBzdHJpbmdbXSA9IG5ldyBFcnJvcihcIlRlc3RcIikuc3RhY2suc3BsaXQoXCJcXG5cIik7XHJcbiAgICAgICAgICAgICAgZGVsZWdhdGUodHJhY2VbM10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGRlbGVnYXRlczogTWFwRGVidWdUYXJnZXRUb0RlbGVnYXRlID0gRGVidWcuZGVsZWdhdGVzW19maWx0ZXJdO1xyXG4gICAgICBmb3IgKGxldCBkZWxlZ2F0ZSBvZiBkZWxlZ2F0ZXMudmFsdWVzKCkpXHJcbiAgICAgICAgaWYgKGRlbGVnYXRlKVxyXG4gICAgICAgICAgaWYgKF9hcmdzICYmIF9hcmdzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgICAgIGRlbGVnYXRlKF9tZXNzYWdlLCAuLi5fYXJncyk7XHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIGRlbGVnYXRlKF9tZXNzYWdlKTtcclxuXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIHNldHVwIHJvdXRpbmcgdG8gc3RhbmRhcmQgY29uc29sZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBzZXR1cENvbnNvbGUoKToge30ge1xyXG4gICAgICBsZXQgcmVzdWx0OiB7IFtmaWx0ZXI6IG51bWJlcl06IE1hcERlYnVnVGFyZ2V0VG9EZWxlZ2F0ZSB9ID0ge307XHJcbiAgICAgIGxldCBmaWx0ZXJzOiBERUJVR19GSUxURVJbXSA9IFtcclxuICAgICAgICBERUJVR19GSUxURVIuSU5GTywgREVCVUdfRklMVEVSLkxPRywgREVCVUdfRklMVEVSLldBUk4sIERFQlVHX0ZJTFRFUi5FUlJPUiwgREVCVUdfRklMVEVSLkZVREdFLFxyXG4gICAgICAgIERFQlVHX0ZJTFRFUi5DTEVBUiwgREVCVUdfRklMVEVSLkdST1VQLCBERUJVR19GSUxURVIuR1JPVVBDT0xMQVBTRUQsIERFQlVHX0ZJTFRFUi5HUk9VUEVORCxcclxuICAgICAgICBERUJVR19GSUxURVIuU09VUkNFXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBmb3IgKGxldCBmaWx0ZXIgb2YgZmlsdGVycylcclxuICAgICAgICByZXN1bHRbZmlsdGVyXSA9IG5ldyBNYXAoW1tEZWJ1Z0NvbnNvbGUsIERlYnVnQ29uc29sZS5kZWxlZ2F0ZXNbZmlsdGVyXV1dKTtcclxuXHJcbiAgICAgIHJlc3VsdFtERUJVR19GSUxURVIuU09VUkNFXS5kZWxldGUoRGVidWdDb25zb2xlKTtcclxuXHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGludGVyZmFjZSBNYXBFdmVudFR5cGVUb0xpc3RlbmVyIHtcclxuICAgIFtldmVudFR5cGU6IHN0cmluZ106IEV2ZW50TGlzdGVuZXJVbmlmaWVkW107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUeXBlcyBvZiBldmVudHMgc3BlY2lmaWMgdG8gRlVER0UsIGluIGFkZGl0aW9uIHRvIHRoZSBzdGFuZGFyZCBET00vQnJvd3Nlci1UeXBlcyBhbmQgY3VzdG9tIHN0cmluZ3NcclxuICAgKi9cclxuICBleHBvcnQgY29uc3QgZW51bSBFVkVOVCB7XHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB0YXJnZXRzIHJlZ2lzdGVyZWQgYXQge0BsaW5rIExvb3B9LCB3aGVuIHJlcXVlc3RlZCBhbmltYXRpb24gZnJhbWUgc3RhcnRzICovXHJcbiAgICBMT09QX0ZSQU1FID0gXCJsb29wRnJhbWVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIGEge0BsaW5rIENvbXBvbmVudH0gd2hlbiBpdHMgYmVpbmcgYWRkZWQgdG8gYSB7QGxpbmsgTm9kZX0gKi9cclxuICAgIENPTVBPTkVOVF9BREQgPSBcImNvbXBvbmVudEFkZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8gYSB7QGxpbmsgQ29tcG9uZW50fSB3aGVuIGl0cyBiZWluZyByZW1vdmVkIGZyb20gYSB7QGxpbmsgTm9kZX0gKi9cclxuICAgIENPTVBPTkVOVF9SRU1PVkUgPSBcImNvbXBvbmVudFJlbW92ZVwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8gYSB7QGxpbmsgQ29tcG9uZW50fSB3aGVuIGl0cyBiZWluZyBhY3RpdmF0ZWQgKi9cclxuICAgIENPTVBPTkVOVF9BQ1RJVkFURSA9IFwiY29tcG9uZW50QWN0aXZhdGVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIGEge0BsaW5rIENvbXBvbmVudH0gd2hlbiBpdHMgYmVpbmcgZGVhY3RpdmF0ZWQgKi9cclxuICAgIENPTVBPTkVOVF9ERUFDVElWQVRFID0gXCJjb21wb25lbnREZWFjdGl2YXRlXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byBhIHtAbGluayBOb2RlfSwgaXQncyBzdWNjZXNzb3JzIGFuZCBhbmNlc3RvcnMgd2hlbiBpdHMgYmVpbmcgYWN0aXZhdGVkICovXHJcbiAgICBOT0RFX0FDVElWQVRFID0gXCJub2RlQWN0aXZhdGVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIGEge0BsaW5rIE5vZGV9LCBpdCdzIHN1Y2Nlc3NvcnMgYW5kIGFuY2VzdG9ycyB3aGVuIGl0cyBiZWluZyBkZWFjdGl2YXRlZCAqL1xyXG4gICAgTk9ERV9ERUFDVElWQVRFID0gXCJub2RlRGVhY3RpdmF0ZVwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8gYSBjaGlsZCB7QGxpbmsgTm9kZX0gYW5kIGl0cyBhbmNlc3RvcnMgYWZ0ZXIgaXQgd2FzIGFwcGVuZGVkIHRvIGEgcGFyZW50ICovXHJcbiAgICBDSElMRF9BUFBFTkQgPSBcImNoaWxkQXBwZW5kXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byBhIGNoaWxkIHtAbGluayBOb2RlfSBhbmQgaXRzIGFuY2VzdG9ycyBqdXN0IGJlZm9yZSBpdHMgYmVpbmcgcmVtb3ZlZCBmcm9tIGl0cyBwYXJlbnQgKi9cclxuICAgIENISUxEX1JFTU9WRSA9IFwiY2hpbGRSZW1vdmVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIGEge0BsaW5rIE11dGFibGV9IHdoZW4gaXQgbXV0YXRlcyAqL1xyXG4gICAgTVVUQVRFID0gXCJtdXRhdGVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIGJ5IGEge0BsaW5rIEdyYXBofSB3aGVuIGl0IG11dGF0ZXMsIHtAbGluayBHcmFwaEluc3RhbmNlfXMgY29ubmVjdGVkIHRvIHRoZSBncmFwaCBsaXN0ZW4gKi9cclxuICAgIE1VVEFURV9HUkFQSCA9IFwibXV0YXRlR3JhcGhcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIGJ5IGEge0BsaW5rIEdyYXBoSW5zdGFuY2V9IHdoZW4gaXQgcmVmbGVjdGVkIHRoZSBtdXRhdGlvbiBvZiB0aGUge0BsaW5rIEdyYXBofSBpdCdzIGNvbm5lY3RlZCB0byAqL1xyXG4gICAgTVVUQVRFX0lOU1RBTkNFID0gXCJtdXRhdGVHcmFwaERvbmVcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBWaWV3cG9ydH0gd2hlbiBpdCBnZXRzIHRoZSBmb2N1cyB0byByZWNlaXZlIGtleWJvYXJkIGlucHV0ICovXHJcbiAgICBGT0NVU19JTiA9IFwiZm9jdXNpblwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIFZpZXdwb3J0fSB3aGVuIGl0IGxvc2VzIHRoZSBmb2N1cyB0byByZWNlaXZlIGtleWJvYXJkIGlucHV0ICovXHJcbiAgICBGT0NVU19PVVQgPSBcImZvY3Vzb3V0XCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB7QGxpbmsgTm9kZX0gd2hlbiBpdCdzIGRvbmUgc2VyaWFsaXppbmcgKi9cclxuICAgIE5PREVfU0VSSUFMSVpFRCA9IFwibm9kZVNlcmlhbGl6ZWRcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBOb2RlfSBhbmQgYWxsIGl0cyB7QGxpbmsgQ29tcG9uZW50fXMgd2hlbiBpdCdzIGRvbmUgZGVzZXJpYWxpemluZywgc28gYWxsIGNvbXBvbmVudHMsIGNoaWxkcmVuIGFuZCBhdHRyaWJ1dGVzIGFyZSBhdmFpbGFibGUgKi9cclxuICAgIE5PREVfREVTRVJJQUxJWkVEID0gXCJub2RlRGVzZXJpYWxpemVkXCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB7QGxpbmsgR3JhcGhJbnN0YW5jZX0gd2hlbiBpdCdzIGNvbnRlbnQgaXMgc2V0IGFjY29yZGluZyB0byBhIHNlcmlhbGl6YXRpb24gb2YgYSB7QGxpbmsgR3JhcGh9ICAqL1xyXG4gICAgR1JBUEhfSU5TVEFOVElBVEVEID0gXCJncmFwaEluc3RhbnRpYXRlZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8gYSB7QGxpbmsgR3JhcGh9IHdoZW4gaXQncyBmaW5pc2hlZCBkZXNlcmlhbGl6aW5nICAqL1xyXG4gICAgR1JBUEhfREVTRVJJQUxJWkVEID0gXCJncmFwaERlc2VyaWFsaXplZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIFRpbWV9IHdoZW4gaXQncyBzY2FsaW5nIGNoYW5nZWQgICovXHJcbiAgICBUSU1FX1NDQUxFRCA9IFwidGltZVNjYWxlZFwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIEZpbGVJb0Jyb3dzZXJMb2NhbH0gd2hlbiBhIGxpc3Qgb2YgZmlsZXMgaGFzIGJlZW4gbG9hZGVkICAqL1xyXG4gICAgRklMRV9MT0FERUQgPSBcImZpbGVMb2FkZWRcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBGaWxlSW9Ccm93c2VyTG9jYWx9IHdoZW4gYSBsaXN0IG9mIGZpbGVzIGhhcyBiZWVuIHNhdmVkICovXHJcbiAgICBGSUxFX1NBVkVEID0gXCJmaWxlU2F2ZWRcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBOb2RlfSB3aGVuIHJlY2FsY3VsYXRpbmcgdHJhbnNmb3JtcyBmb3IgcmVuZGVyICovXHJcbiAgICBSRU5ERVJfUFJFUEFSRSA9IFwicmVuZGVyUHJlcGFyZVwiLFxyXG4gICAgLyoqIGRpc3BhdGNoZWQgdG8ge0BsaW5rIFZpZXdwb3J0fSBhbmQge0BsaW5rIE5vZGV9IHdoZW4gcmVjYWxjdWxhdGlvbiBvZiB0aGUgYnJhbmNoIHRvIHJlbmRlciBzdGFydHMuICovXHJcbiAgICBSRU5ERVJfUFJFUEFSRV9TVEFSVCA9IFwicmVuZGVyUHJlcGFyZVN0YXJ0XCIsXHJcbiAgICAvKiogZGlzcGF0Y2hlZCB0byB7QGxpbmsgVmlld3BvcnR9IGFuZCB7QGxpbmsgTm9kZX0gd2hlbiByZWNhbGN1bGF0aW9uIG9mIHRoZSBicmFuY2ggdG8gcmVuZGVyIGVuZHMuIFRoZSBicmFuY2ggZGlzcGF0Y2hlcyBiZWZvcmUgdGhlIGxpZ2h0cyBhcmUgdHJhbnNtaXR0ZWQgdG8gdGhlIHNoYWRlcnMgICovXHJcbiAgICBSRU5ERVJfUFJFUEFSRV9FTkQgPSBcInJlbmRlclByZXBhcmVFbmRcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBKb2ludH0tQ29tcG9uZW50cyBpbiBvcmRlciB0byBkaXNjb25uZWN0ICovXHJcbiAgICBESVNDT05ORUNUX0pPSU5UID0gXCJkaXNjb25uZWN0Sm9pbnRcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBOb2RlfSB3aGVuIGl0IGdldHMgYXR0YWNoZWQgdG8gYSB2aWV3cG9ydCBmb3IgcmVuZGVyaW5nICovXHJcbiAgICBBVFRBQ0hfQlJBTkNIID0gXCJhdHRhY2hCcmFuY2hcIixcclxuICAgIC8qKiBkaXNwYXRjaGVkIHRvIHtAbGluayBQcm9qZWN0fSB3aGVuIGl0J3MgZG9uZSBsb2FkaW5nIHJlc291cmNlcyBmcm9tIGEgdXJsICovXHJcbiAgICBSRVNPVVJDRVNfTE9BREVEID0gXCJyZXNvdXJjZXNMb2FkZWRcIlxyXG4gIH1cclxuXHJcbiAgLyoqIFVuaW9uIHR5cGUgb2Ygb3RoZXIgZXZlbnQgdHlwZXMgc2VydmluZyBhcyBhbm5vdGF0aW9uIGZvciBsaXN0ZW5lcnMgYW5kIGhhbmRsZXJzICovXHJcbiAgZXhwb3J0IHR5cGUgRXZlbnRVbmlmaWVkID0gRXZlbnQgfCBDdXN0b21FdmVudCB8IEV2ZW50UGh5c2ljcztcclxuXHJcbiAgLyoqIFVuaWZpZWQgbGlzdGVuZXIgdHlwZSBleHRlbmRpbmcgRXZlbnRMaXN0ZW5lciBhbmQgRXZlbnRMaXN0ZW5lck9iamVjdCBmb3IgQ3VzdG9tRXZlbnQgYW5kIG90aGVycyAqL1xyXG4gIGV4cG9ydCB0eXBlIEV2ZW50TGlzdGVuZXJVbmlmaWVkID1cclxuICAgICgoX2V2ZW50OiBFdmVudCkgPT4gdm9pZCkgfFxyXG4gICAgKChfZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB2b2lkKSB8XHJcbiAgICAoKF9ldmVudDogRXZlbnRQaHlzaWNzKSA9PiB2b2lkKSB8XHJcbiAgICAoKF9ldmVudDogRXZlbnRUaW1lcikgPT4gdm9pZCkgfFxyXG4gICAgRXZlbnRMaXN0ZW5lciB8XHJcbiAgICBFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0O1xyXG5cclxuICAvKiogRXh0ZW5kcyBFdmVudFRhcmdldCB0byB3b3JrIHdpdGgge0BsaW5rIEV2ZW50TGlzdGVuZXJVbmlmaWVkfSBhbmQge0BsaW5rIEV2ZW50VW5pZmllZH0gKi9cclxuICBleHBvcnQgY2xhc3MgRXZlbnRUYXJnZXRVbmlmaWVkIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xyXG4gICAgYWRkRXZlbnRMaXN0ZW5lcihfdHlwZTogc3RyaW5nLCBfaGFuZGxlcjogRXZlbnRMaXN0ZW5lclVuaWZpZWQsIF9vcHRpb25zPzogYm9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLmFkZEV2ZW50TGlzdGVuZXIoX3R5cGUsIDxFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0Pl9oYW5kbGVyLCBfb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKF90eXBlOiBzdHJpbmcsIF9oYW5kbGVyOiBFdmVudExpc3RlbmVyVW5pZmllZCwgX29wdGlvbnM/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgc3VwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihfdHlwZSwgPEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3Q+X2hhbmRsZXIsIF9vcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwYXRjaEV2ZW50KF9ldmVudDogRXZlbnRVbmlmaWVkKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiBzdXBlci5kaXNwYXRjaEV2ZW50KF9ldmVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCYXNlIGNsYXNzIGZvciBFdmVudFRhcmdldCBzaW5nbGV0b25zLCB3aGljaCBhcmUgZml4ZWQgZW50aXRpZXMgaW4gdGhlIHN0cnVjdHVyZSBvZiBGVURHRSwgc3VjaCBhcyB0aGUgY29yZSBsb29wIFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBFdmVudFRhcmdldFN0YXRpYyBleHRlbmRzIEV2ZW50VGFyZ2V0VW5pZmllZCB7XHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHRhcmdldFN0YXRpYzogRXZlbnRUYXJnZXRTdGF0aWMgPSBuZXcgRXZlbnRUYXJnZXRTdGF0aWMoKTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhZGRFdmVudExpc3RlbmVyKF90eXBlOiBzdHJpbmcsIF9oYW5kbGVyOiBFdmVudExpc3RlbmVyKTogdm9pZCB7XHJcbiAgICAgIEV2ZW50VGFyZ2V0U3RhdGljLnRhcmdldFN0YXRpYy5hZGRFdmVudExpc3RlbmVyKF90eXBlLCBfaGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlbW92ZUV2ZW50TGlzdGVuZXIoX3R5cGU6IHN0cmluZywgX2hhbmRsZXI6IEV2ZW50TGlzdGVuZXIpOiB2b2lkIHtcclxuICAgICAgRXZlbnRUYXJnZXRTdGF0aWMudGFyZ2V0U3RhdGljLnJlbW92ZUV2ZW50TGlzdGVuZXIoX3R5cGUsIF9oYW5kbGVyKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZGlzcGF0Y2hFdmVudChfZXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgIEV2ZW50VGFyZ2V0U3RhdGljLnRhcmdldFN0YXRpYy5kaXNwYXRjaEV2ZW50KF9ldmVudCk7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEludGVyZmFjZSBkZXNjcmliaW5nIHRoZSBkYXRhdHlwZXMgb2YgdGhlIGF0dHJpYnV0ZXMgYSBtdXRhdG9yIGFzIHN0cmluZ3MgXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBNdXRhdG9yQXR0cmlidXRlVHlwZXMge1xyXG4gICAgW2F0dHJpYnV0ZTogc3RyaW5nXTogc3RyaW5nIHwgT2JqZWN0O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBJbnRlcmZhY2UgZGVzY3JpYmluZyBhIG11dGF0b3IsIHdoaWNoIGlzIGFuIGFzc29jaWF0aXZlIGFycmF5IHdpdGggbmFtZXMgb2YgYXR0cmlidXRlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyB2YWx1ZXNcclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIE11dGF0b3Ige1xyXG4gICAgW2F0dHJpYnV0ZTogc3RyaW5nXTogR2VuZXJhbDtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogSW50ZXJmYWNlcyBkZWRpY2F0ZWQgZm9yIGVhY2ggcHVycG9zZS4gRXh0cmEgYXR0cmlidXRlIG5lY2Vzc2FyeSBmb3IgY29tcGlsZXRpbWUgdHlwZSBjaGVja2luZywgbm90IGV4aXN0ZW50IGF0IHJ1bnRpbWVcclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIE11dGF0b3JGb3JBbmltYXRpb24gZXh0ZW5kcyBNdXRhdG9yIHsgcmVhZG9ubHkgZm9yQW5pbWF0aW9uOiBudWxsOyB9XHJcbiAgZXhwb3J0IGludGVyZmFjZSBNdXRhdG9yRm9yVXNlckludGVyZmFjZSBleHRlbmRzIE11dGF0b3IgeyByZWFkb25seSBmb3JVc2VySW50ZXJmYWNlOiBudWxsOyB9XHJcbiAgLy8gZXhwb3J0IGludGVyZmFjZSBNdXRhdG9yRm9yQ29tcG9uZW50IGV4dGVuZHMgTXV0YXRvciB7IHJlYWRvbmx5IGZvclVzZXJDb21wb25lbnQ6IG51bGw7IH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29sbGVjdCBhcHBsaWNhYmxlIGF0dHJpYnV0ZXMgb2YgdGhlIGluc3RhbmNlIGFuZCBjb3BpZXMgb2YgdGhlaXIgdmFsdWVzIGluIGEgTXV0YXRvci1vYmplY3RcclxuICAgKi9cclxuICBleHBvcnQgZnVuY3Rpb24gZ2V0TXV0YXRvck9mQXJiaXRyYXJ5KF9vYmplY3Q6IE9iamVjdCk6IE11dGF0b3Ige1xyXG4gICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7fTtcclxuICAgIGxldCBhdHRyaWJ1dGVzOiAoc3RyaW5nIHwgbnVtYmVyIHwgc3ltYm9sKVtdID0gUmVmbGVjdC5vd25LZXlzKFJlZmxlY3QuZ2V0UHJvdG90eXBlT2YoX29iamVjdCkpO1xyXG4gICAgZm9yIChsZXQgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgbGV0IHZhbHVlOiBPYmplY3QgPSBSZWZsZWN0LmdldChfb2JqZWN0LCBhdHRyaWJ1dGUpO1xyXG4gICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBGdW5jdGlvbilcclxuICAgICAgICBjb250aW51ZTtcclxuICAgICAgLy8gaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0ICYmICEodmFsdWUgaW5zdGFuY2VvZiBNdXRhYmxlKSlcclxuICAgICAgLy8gICBjb250aW51ZTtcclxuICAgICAgbXV0YXRvclthdHRyaWJ1dGUudG9TdHJpbmcoKV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBtdXRhdG9yO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQmFzZSBjbGFzcyBmb3IgYWxsIHR5cGVzIGJlaW5nIG11dGFibGUgdXNpbmcge0BsaW5rIE11dGF0b3J9LW9iamVjdHMsIHRodXMgcHJvdmlkaW5nIGFuZCB1c2luZyBpbnRlcmZhY2VzIGNyZWF0ZWQgYXQgcnVudGltZS4gIFxyXG4gICAqIE11dGFibGVzIHByb3ZpZGUgYSB7QGxpbmsgTXV0YXRvcn0gdGhhdCBpcyBidWlsZCBieSBjb2xsZWN0aW5nIGFsbCBvYmplY3QtcHJvcGVydGllcyB0aGF0IGFyZSBlaXRoZXIgb2YgYSBwcmltaXRpdmUgdHlwZSBvciBhZ2FpbiBNdXRhYmxlLlxyXG4gICAqIFN1YmNsYXNzZXMgY2FuIGVpdGhlciByZWR1Y2UgdGhlIHN0YW5kYXJkIHtAbGluayBNdXRhdG9yfSBidWlsdCBieSB0aGlzIGJhc2UgY2xhc3MgYnkgZGVsZXRpbmcgcHJvcGVydGllcyBvciBpbXBsZW1lbnQgYW4gaW5kaXZpZHVhbCBnZXRNdXRhdG9yLW1ldGhvZC5cclxuICAgKiBUaGUgcHJvdmlkZWQgcHJvcGVydGllcyBvZiB0aGUge0BsaW5rIE11dGF0b3J9IG11c3QgbWF0Y2ggcHVibGljIHByb3BlcnRpZXMgb3IgZ2V0dGVycy9zZXR0ZXJzIG9mIHRoZSBvYmplY3QuXHJcbiAgICogT3RoZXJ3aXNlLCB0aGV5IHdpbGwgYmUgaWdub3JlZCBpZiBub3QgaGFuZGxlZCBieSBhbiBvdmVycmlkZSBvZiB0aGUgbXV0YXRlLW1ldGhvZCBpbiB0aGUgc3ViY2xhc3MgYW5kIHRocm93IGVycm9ycyBpbiBhbiBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCB1c2VyLWludGVyZmFjZSBmb3IgdGhlIG9iamVjdC5cclxuICAgKi9cclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgTXV0YWJsZSBleHRlbmRzIEV2ZW50VGFyZ2V0VW5pZmllZCB7XHJcbiAgICAvKipcclxuICAgICAqIERlY29yYXRvciBhbGxvd3MgdG8gYXR0YWNoIHtAbGluayBNdXRhYmxlfSBmdW5jdGlvbmFsaXR5IHRvIGV4aXN0aW5nIGNsYXNzZXMuIFxyXG4gICAgICovXHJcbiAgICAvLyBwdWJsaWMgc3RhdGljIGRlY29yYXRlKF9jb25zdHJ1Y3RvcjogRnVuY3Rpb24pOiB2b2lkIHtcclxuICAgIC8vICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwidXNlUmVuZGVyRGF0YVwiLCB7XHJcbiAgICAvLyAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE11dGF0b3IodGhpczogTXV0YWJsZUZvclVzZXJJbnRlcmZhY2UpOiBNdXRhdG9yIHtcclxuICAgIC8vICAgICAgIHJldHVybiBnZXRNdXRhdG9yT2ZBcmJpdHJhcnkodGhpcyk7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICB9KTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldE11dGF0b3JGcm9tUGF0aChfbXV0YXRvcjogTXV0YXRvciwgX3BhdGg6IHN0cmluZ1tdKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBrZXk6IHN0cmluZyA9IF9wYXRoWzBdO1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHt9O1xyXG4gICAgICBpZiAoX211dGF0b3Jba2V5XSA9PSB1bmRlZmluZWQpIC8vIGlmIHRoZSBwYXRoIGRldmlhdGVzIGZyb20gbXV0YXRvciBzdHJ1Y3R1cmUsIHJldHVybiB0aGUgbXV0YXRvclxyXG4gICAgICAgIHJldHVybiBfbXV0YXRvcjtcclxuICAgICAgbXV0YXRvcltrZXldID0gX211dGF0b3Jba2V5XTtcclxuICAgICAgaWYgKF9wYXRoLmxlbmd0aCA+IDEpXHJcbiAgICAgICAgbXV0YXRvcltrZXldID0gTXV0YWJsZS5nZXRNdXRhdG9yRnJvbVBhdGgobXV0YXRvcltrZXldLCBfcGF0aC5zbGljZSgxLCBfcGF0aC5sZW5ndGgpKTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIHR5cGUgb2YgdGhpcyBtdXRhYmxlIHN1YmNsYXNzIGFzIHRoZSBuYW1lIG9mIHRoZSBydW50aW1lIGNsYXNzXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgdHlwZSBvZiB0aGUgbXV0YWJsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHR5cGUoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ29sbGVjdCBhcHBsaWNhYmxlIGF0dHJpYnV0ZXMgb2YgdGhlIGluc3RhbmNlIGFuZCBjb3BpZXMgb2YgdGhlaXIgdmFsdWVzIGluIGEgTXV0YXRvci1vYmplY3QuXHJcbiAgICAgKiBCeSBkZWZhdWx0LCBhIG11dGF0b3IgY2Fubm90IGJlIGV4dGVuZGVkLCBzaW5jZSBleHRlbnNpb25zIGFyZSBub3QgYXZhaWxhYmxlIGluIHRoZSBvYmplY3QgdGhlIG11dGF0b3IgYmVsb25ncyB0by5cclxuICAgICAqIEEgbXV0YXRvciBtYXkgYmUgcmVkdWNlZCBieSB0aGUgZGVzY2VuZGFudHMgb2Yge0BsaW5rIE11dGFibGV9IHRvIGNvbnRhaW4gb25seSB0aGUgcHJvcGVydGllcyBuZWVkZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKF9leHRlbmRhYmxlOiBib29sZWFuID0gZmFsc2UpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7fTtcclxuXHJcbiAgICAgIC8vIGNvbGxlY3QgcHJpbWl0aXZlIGFuZCBtdXRhYmxlIGF0dHJpYnV0ZXNcclxuICAgICAgZm9yIChsZXQgYXR0cmlidXRlIGluIHRoaXMpIHtcclxuICAgICAgICBsZXQgdmFsdWU6IE9iamVjdCA9IHRoaXNbYXR0cmlidXRlXTtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBGdW5jdGlvbilcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCAmJiAhKHZhbHVlIGluc3RhbmNlb2YgTXV0YWJsZSkgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIE11dGFibGVBcnJheSkgJiYgISh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShcImlkUmVzb3VyY2VcIikpKVxyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgbXV0YXRvclthdHRyaWJ1dGVdID0gdGhpc1thdHRyaWJ1dGVdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIV9leHRlbmRhYmxlKVxyXG4gICAgICAgIC8vIG11dGF0b3IgY2FuIGJlIHJlZHVjZWQgYnV0IG5vdCBleHRlbmRlZCFcclxuICAgICAgICBPYmplY3QucHJldmVudEV4dGVuc2lvbnMobXV0YXRvcik7XHJcbiAgICAgIC8vIGRlbGV0ZSB1bndhbnRlZCBhdHRyaWJ1dGVzXHJcbiAgICAgIHRoaXMucmVkdWNlTXV0YXRvcihtdXRhdG9yKTtcclxuXHJcbiAgICAgIC8vIHJlcGxhY2UgcmVmZXJlbmNlcyB0byBtdXRhYmxlIG9iamVjdHMgd2l0aCByZWZlcmVuY2VzIHRvIG11dGF0b3JzXHJcbiAgICAgIGZvciAobGV0IGF0dHJpYnV0ZSBpbiBtdXRhdG9yKSB7XHJcbiAgICAgICAgbGV0IHZhbHVlOiBPYmplY3QgPSBtdXRhdG9yW2F0dHJpYnV0ZV07XHJcbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgTXV0YWJsZSlcclxuICAgICAgICAgIG11dGF0b3JbYXR0cmlidXRlXSA9IHZhbHVlLmdldE11dGF0b3IoKTtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBNdXRhYmxlQXJyYXkpXHJcbiAgICAgICAgICBtdXRhdG9yW2F0dHJpYnV0ZV0gPSB2YWx1ZS5tYXAoKF92YWx1ZSkgPT4gX3ZhbHVlLmdldE11dGF0b3IoKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29sbGVjdCB0aGUgYXR0cmlidXRlcyBvZiB0aGUgaW5zdGFuY2UgYW5kIHRoZWlyIHZhbHVlcyBhcHBsaWNhYmxlIGZvciBhbmltYXRpb24uXHJcbiAgICAgKiBCYXNpYyBmdW5jdGlvbmFsaXR5IGlzIGlkZW50aWNhbCB0byB7QGxpbmsgZ2V0TXV0YXRvcn0sIHJldHVybmVkIG11dGF0b3Igc2hvdWxkIHRoZW4gYmUgcmVkdWNlZCBieSB0aGUgc3ViY2xhc3NlZCBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckZvckFuaW1hdGlvbigpOiBNdXRhdG9yRm9yQW5pbWF0aW9uIHtcclxuICAgICAgcmV0dXJuIDxNdXRhdG9yRm9yQW5pbWF0aW9uPnRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDb2xsZWN0IHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBpbnN0YW5jZSBhbmQgdGhlaXIgdmFsdWVzIGFwcGxpY2FibGUgZm9yIHRoZSB1c2VyIGludGVyZmFjZS5cclxuICAgICAqIEJhc2ljIGZ1bmN0aW9uYWxpdHkgaXMgaWRlbnRpY2FsIHRvIHtAbGluayBnZXRNdXRhdG9yfSwgcmV0dXJuZWQgbXV0YXRvciBzaG91bGQgdGhlbiBiZSByZWR1Y2VkIGJ5IHRoZSBzdWJjbGFzc2VkIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yRm9yVXNlckludGVyZmFjZSgpOiBNdXRhdG9yRm9yVXNlckludGVyZmFjZSB7XHJcbiAgICAgIHJldHVybiA8TXV0YXRvckZvclVzZXJJbnRlcmZhY2U+dGhpcy5nZXRNdXRhdG9yKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENvbGxlY3QgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIGluc3RhbmNlIGFuZCB0aGVpciB2YWx1ZXMgYXBwbGljYWJsZSBmb3IgaW5kaXZpdWFsaXphdGlvbiBieSB0aGUgY29tcG9uZW50LlxyXG4gICAgICogQmFzaWMgZnVuY3Rpb25hbGl0eSBpcyBpZGVudGljYWwgdG8ge0BsaW5rIGdldE11dGF0b3J9LCByZXR1cm5lZCBtdXRhdG9yIHNob3VsZCB0aGVuIGJlIHJlZHVjZWQgYnkgdGhlIHN1YmNsYXNzZWQgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgLy8gcHVibGljIGdldE11dGF0b3JGb3JDb21wb25lbnQoKTogTXV0YXRvckZvckNvbXBvbmVudCB7XHJcbiAgICAvLyAgICAgcmV0dXJuIDxNdXRhdG9yRm9yQ29tcG9uZW50PnRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgLy8gfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIGFzc29jaWF0aXZlIGFycmF5IHdpdGggdGhlIHNhbWUgYXR0cmlidXRlcyBhcyB0aGUgZ2l2ZW4gbXV0YXRvciwgYnV0IHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgdHlwZXMgYXMgc3RyaW5nLXZhbHVlc1xyXG4gICAgICogRG9lcyBub3QgcmVjdXJzZSBpbnRvIG9iamVjdHMhXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yQXR0cmlidXRlVHlwZXMoX211dGF0b3I6IE11dGF0b3IpOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMge1xyXG4gICAgICBsZXQgdHlwZXM6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyA9IHt9O1xyXG4gICAgICBmb3IgKGxldCBhdHRyaWJ1dGUgaW4gX211dGF0b3IpIHtcclxuICAgICAgICBsZXQgdHlwZTogc3RyaW5nID0gbnVsbDtcclxuICAgICAgICBsZXQgdmFsdWU6IG51bWJlciB8IGJvb2xlYW4gfCBzdHJpbmcgfCBvYmplY3QgPSBfbXV0YXRvclthdHRyaWJ1dGVdO1xyXG4gICAgICAgIGlmIChfbXV0YXRvclthdHRyaWJ1dGVdICE9IHVuZGVmaW5lZClcclxuICAgICAgICAgIGlmICh0eXBlb2YgKHZhbHVlKSA9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICB0eXBlID0gKDxHZW5lcmFsPnRoaXMpW2F0dHJpYnV0ZV0uY29uc3RydWN0b3IubmFtZTtcclxuICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiAodmFsdWUpID09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICAgICAgdHlwZSA9IHZhbHVlW1wibmFtZVwiXTtcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdHlwZSA9IF9tdXRhdG9yW2F0dHJpYnV0ZV0uY29uc3RydWN0b3IubmFtZTtcclxuICAgICAgICB0eXBlc1thdHRyaWJ1dGVdID0gdHlwZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHlwZXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gbXV0YXRvciBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gX211dGF0b3IgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGVNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGZvciAobGV0IGF0dHJpYnV0ZSBpbiBfbXV0YXRvcikge1xyXG4gICAgICAgIGxldCB2YWx1ZTogT2JqZWN0ID0gX211dGF0b3JbYXR0cmlidXRlXTtcclxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBNdXRhYmxlKVxyXG4gICAgICAgICAgX211dGF0b3JbYXR0cmlidXRlXSA9IHZhbHVlLmdldE11dGF0b3IoKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBfbXV0YXRvclthdHRyaWJ1dGVdID0gKDxHZW5lcmFsPnRoaXMpW2F0dHJpYnV0ZV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgYXR0cmlidXRlIHZhbHVlcyBvZiB0aGUgaW5zdGFuY2UgYWNjb3JkaW5nIHRvIHRoZSBzdGF0ZSBvZiB0aGUgbXV0YXRvci5cclxuICAgICAqIFRoZSBtdXRhdGlvbiBtYXkgYmUgcmVzdHJpY3RlZCB0byBhIHN1YnNldCBvZiB0aGUgbXV0YXRvciBhbmQgdGhlIGV2ZW50IGRpc3BhdGNoaW5nIHN1cHByZXNzZWQuXHJcbiAgICAgKiBVc2VzIG11dGF0ZUJhc2UsIGJ1dCBjYW4gYmUgb3ZlcndyaXR0ZW4gaW4gc3ViY2xhc3Nlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uOiBzdHJpbmdbXSA9IG51bGwsIF9kaXNwYXRjaE11dGF0ZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgYXdhaXQgdGhpcy5tdXRhdGVCYXNlKF9tdXRhdG9yLCBfc2VsZWN0aW9uKTtcclxuICAgICAgaWYgKF9kaXNwYXRjaE11dGF0ZSlcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5ULk1VVEFURSwge2J1YmJsZXM6IHRydWUsIGRldGFpbDoge211dGF0b3I6IF9tdXRhdG9yfX0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJhc2UgbWV0aG9kIGZvciBtdXRhdGlvbiwgYWx3YXlzIGF2YWlsYWJsZSB0byBzdWJjbGFzc2VzLiBEbyBub3Qgb3ZlcndyaXRlIGluIHN1YmNsYXNzZXMhXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBhc3luYyBtdXRhdGVCYXNlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uPzogc3RyaW5nW10pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7fTtcclxuICAgICAgaWYgKCFfc2VsZWN0aW9uKVxyXG4gICAgICAgIG11dGF0b3IgPSBfbXV0YXRvcjtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIGZvciAobGV0IGF0dHJpYnV0ZSBvZiBfc2VsZWN0aW9uKSAvLyByZWR1Y2UgdGhlIG11dGF0b3IgdG8gdGhlIHNlbGVjdGlvblxyXG4gICAgICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3JbYXR0cmlidXRlXSkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgICAgIG11dGF0b3JbYXR0cmlidXRlXSA9IF9tdXRhdG9yW2F0dHJpYnV0ZV07XHJcblxyXG4gICAgICBmb3IgKGxldCBhdHRyaWJ1dGUgaW4gbXV0YXRvcikge1xyXG4gICAgICAgIGlmICghUmVmbGVjdC5oYXModGhpcywgYXR0cmlidXRlKSlcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGxldCBtdXRhbnQ6IE9iamVjdCA9IFJlZmxlY3QuZ2V0KHRoaXMsIGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgbGV0IHZhbHVlOiBNdXRhdG9yID0gPE11dGF0b3I+bXV0YXRvclthdHRyaWJ1dGVdO1xyXG4gICAgICAgIGlmIChtdXRhbnQgaW5zdGFuY2VvZiBNdXRhYmxlQXJyYXkgfHwgbXV0YW50IGluc3RhbmNlb2YgTXV0YWJsZSlcclxuICAgICAgICAgIGF3YWl0IG11dGFudC5tdXRhdGUodmFsdWUsIG51bGwsIGZhbHNlKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBSZWZsZWN0LnNldCh0aGlzLCBhdHRyaWJ1dGUsIHZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWR1Y2VzIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBnZW5lcmFsIG11dGF0b3IgYWNjb3JkaW5nIHRvIGRlc2lyZWQgb3B0aW9ucyBmb3IgbXV0YXRpb24uIFRvIGJlIGltcGxlbWVudGVkIGluIHN1YmNsYXNzZXNcclxuICAgICAqIEBwYXJhbSBfbXV0YXRvciBcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkO1xyXG4gIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLWFueVxyXG4gIGV4cG9ydCB0eXBlIEdlbmVyYWwgPSBhbnk7XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2VyaWFsaXphdGlvbiB7XHJcbiAgICBbdHlwZTogc3RyaW5nXTogR2VuZXJhbDtcclxuICB9XHJcbiAgZXhwb3J0IGludGVyZmFjZSBTZXJpYWxpemFibGUge1xyXG4gICAgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb247XHJcbiAgICBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPjtcclxuICB9XHJcblxyXG4gIGludGVyZmFjZSBOYW1lc3BhY2VSZWdpc3RlciB7XHJcbiAgICBbbmFtZTogc3RyaW5nXTogT2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlcyB0aGUgZXh0ZXJuYWwgc2VyaWFsaXphdGlvbiBhbmQgZGVzZXJpYWxpemF0aW9uIG9mIHtAbGluayBTZXJpYWxpemFibGV9IG9iamVjdHMuIFRoZSBpbnRlcm5hbCBwcm9jZXNzIGlzIGhhbmRsZWQgYnkgdGhlIG9iamVjdHMgdGhlbXNlbHZlcy4gIFxyXG4gICAqIEEge0BsaW5rIFNlcmlhbGl6YXRpb259IG9iamVjdCBjYW4gYmUgY3JlYXRlZCBmcm9tIGEge0BsaW5rIFNlcmlhbGl6YWJsZX0gb2JqZWN0IGFuZCBhIEpTT04tU3RyaW5nIG1heSBiZSBjcmVhdGVkIGZyb20gdGhhdC4gIFxyXG4gICAqIFZpY2UgdmVyc2EsIGEgSlNPTi1TdHJpbmcgY2FuIGJlIHBhcnNlZCB0byBhIHtAbGluayBTZXJpYWxpemF0aW9ufSB3aGljaCBjYW4gYmUgZGVzZXJpYWxpemVkIHRvIGEge0BsaW5rIFNlcmlhbGl6YWJsZX0gb2JqZWN0LlxyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqICBbU2VyaWFsaXphYmxlXSDihpIgKHNlcmlhbGl6ZSkg4oaSIFtTZXJpYWxpemF0aW9uXSDihpIgKHN0cmluZ2lmeSkg4oaSIFtTdHJpbmddIOKGkiAoc2F2ZSBvciBzZW5kKVxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKGkyAgICAgICAgICAgICAgICAgICAgICAgICAgICDihpMgICAgICAgICAgICAgICAgICDihpMgICAgICAgICBcclxuICAgKiAgICAgICAgICAgICAgICBbU2VyaWFsaXphYmxlXSDihpAgKGRlc2VyaWFsaXplKSDihpAgW1NlcmlhbGl6YXRpb25dIOKGkCAocGFyc2UpIOKGkCAobG9hZCkg4oaQIFtNZWRpdW1dXHJcbiAgICogYGBgICAgICAgXHJcbiAgICogV2hpbGUgdGhlIGludGVybmFsIHNlcmlhbGl6ZS9kZXNlcmlhbGl6ZSBtZXRob2QxcyBvZiB0aGUgb2JqZWN0cyBjYXJlIG9mIHRoZSBzZWxlY3Rpb24gb2YgaW5mb3JtYXRpb24gbmVlZGVkIHRvIHJlY3JlYXRlIHRoZSBvYmplY3QgYW5kIGl0cyBzdHJ1Y3R1cmUsICBcclxuICAgKiB0aGUge0BsaW5rIFNlcmlhbGl6ZXJ9IGtlZXBzIHRyYWNrIG9mIHRoZSBuYW1lc3BhY2VzIGFuZCBjbGFzc2VzIGluIG9yZGVyIHRvIHJlY3JlYXRlIHtAbGluayBTZXJpYWxpemFibGV9IG9iamVjdHMuIFRoZSBnZW5lcmFsIHN0cnVjdHVyZSBvZiBhIHtAbGluayBTZXJpYWxpemF0aW9ufSBpcyBhcyBmb2xsb3dzICBcclxuICAgKiBgYGBwbGFpbnRleHRcclxuICAgKiB7XHJcbiAgICogICAgICBuYW1lc3BhY2VOYW1lLmNsYXNzTmFtZToge1xyXG4gICAqICAgICAgICAgIHByb3BlcnR5TmFtZTogcHJvcGVydHlWYWx1ZSxcclxuICAgKiAgICAgICAgICAuLi4sXHJcbiAgICogICAgICAgICAgcHJvcGVydHlOYW1lT2ZSZWZlcmVuY2U6IFNlcmlhbGl6YXRpb25PZlRoZVJlZmVyZW5jZWRPYmplY3QsXHJcbiAgICogICAgICAgICAgLi4uLFxyXG4gICAqICAgICAgICAgIGNvbnN0cnVjdG9yTmFtZU9mU3VwZXJjbGFzczogU2VyaWFsaXphdGlvbk9mU3VwZXJDbGFzc1xyXG4gICAqICAgICAgfVxyXG4gICAqIH1cclxuICAgKiBgYGBcclxuICAgKiBTaW5jZSB0aGUgaW5zdGFuY2Ugb2YgdGhlIHN1cGVyY2xhc3MgaXMgY3JlYXRlZCBhdXRvbWF0aWNhbGx5IHdoZW4gYW4gb2JqZWN0IGlzIGNyZWF0ZWQsIFxyXG4gICAqIHRoZSBTZXJpYWxpemF0aW9uT2ZTdXBlckNsYXNzIG9taXRzIHRoZSB0aGUgbmFtZXNwYWNlTmFtZS5jbGFzc05hbWUga2V5IGFuZCBjb25zaXN0cyBvbmx5IG9mIGl0cyB2YWx1ZS4gXHJcbiAgICogVGhlIGNvbnN0cnVjdG9yTmFtZU9mU3VwZXJjbGFzcyBpcyBnaXZlbiBpbnN0ZWFkIGFzIGEgcHJvcGVydHkgbmFtZSBpbiB0aGUgc2VyaWFsaXphdGlvbiBvZiB0aGUgc3ViY2xhc3MuXHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNlcmlhbGl6ZXIge1xyXG4gICAgLyoqIEluIG9yZGVyIGZvciB0aGUgU2VyaWFsaXplciB0byBjcmVhdGUgY2xhc3MgaW5zdGFuY2VzLCBpdCBuZWVkcyBhY2Nlc3MgdG8gdGhlIGFwcHJvcHJpYXRlIG5hbWVzcGFjZXMgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIG5hbWVzcGFjZXM6IE5hbWVzcGFjZVJlZ2lzdGVyID0geyBcIsaSXCI6IEZ1ZGdlQ29yZSB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJzIGEgbmFtZXNwYWNlIHRvIHRoZSB7QGxpbmsgU2VyaWFsaXplcn0sIHRvIGVuYWJsZSBhdXRvbWF0aWMgaW5zdGFudGlhdGlvbiBvZiBjbGFzc2VzIGRlZmluZWQgd2l0aGluXHJcbiAgICAgKiBAcGFyYW0gX25hbWVzcGFjZSBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWdpc3Rlck5hbWVzcGFjZShfbmFtZXNwYWNlOiBPYmplY3QpOiBzdHJpbmcge1xyXG4gICAgICBmb3IgKGxldCBuYW1lIGluIFNlcmlhbGl6ZXIubmFtZXNwYWNlcylcclxuICAgICAgICBpZiAoU2VyaWFsaXplci5uYW1lc3BhY2VzW25hbWVdID09IF9uYW1lc3BhY2UpXHJcbiAgICAgICAgICByZXR1cm4gbmFtZTtcclxuXHJcbiAgICAgIGxldCBuYW1lOiBzdHJpbmcgPSBTZXJpYWxpemVyLmZpbmROYW1lc3BhY2VJbihfbmFtZXNwYWNlLCB3aW5kb3cpO1xyXG4gICAgICBpZiAoIW5hbWUpXHJcbiAgICAgICAgZm9yIChsZXQgcGFyZW50TmFtZSBpbiBTZXJpYWxpemVyLm5hbWVzcGFjZXMpIHtcclxuICAgICAgICAgIG5hbWUgPSBTZXJpYWxpemVyLmZpbmROYW1lc3BhY2VJbihfbmFtZXNwYWNlLCBTZXJpYWxpemVyLm5hbWVzcGFjZXNbcGFyZW50TmFtZV0pO1xyXG4gICAgICAgICAgaWYgKG5hbWUpIHtcclxuICAgICAgICAgICAgbmFtZSA9IHBhcmVudE5hbWUgKyBcIi5cIiArIG5hbWU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIGlmICghbmFtZSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOYW1lc3BhY2Ugbm90IGZvdW5kLiBNYXliZSBwYXJlbnQgbmFtZXNwYWNlIGhhc24ndCBiZWVuIHJlZ2lzdGVyZWQgYmVmb3JlP1wiKTtcclxuXHJcbiAgICAgIFNlcmlhbGl6ZXIubmFtZXNwYWNlc1tuYW1lXSA9IF9uYW1lc3BhY2U7XHJcbiAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNlcmlhbGl6YWJsZSBGVURHRS1vYmplY3QgZ2l2ZW4sXHJcbiAgICAgKiBpbmNsdWRpbmcgYXR0YWNoZWQgY29tcG9uZW50cywgY2hpbGRyZW4sIHN1cGVyY2xhc3Mtb2JqZWN0cyBhbGwgaW5mb3JtYXRpb24gbmVlZGVkIGZvciByZWNvbnN0cnVjdGlvblxyXG4gICAgICogQHBhcmFtIF9vYmplY3QgQW4gb2JqZWN0IHRvIHNlcmlhbGl6ZSwgaW1wbGVtZW50aW5nIHRoZSB7QGxpbmsgU2VyaWFsaXphYmxlfSBpbnRlcmZhY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXJpYWxpemUoX29iamVjdDogU2VyaWFsaXphYmxlKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge307XHJcbiAgICAgIC8vIFRPRE86IHNhdmUgdGhlIG5hbWVzcGFjZSB3aXRoIHRoZSBjb25zdHJ1Y3RvcnMgbmFtZVxyXG4gICAgICAvLyBzZXJpYWxpemF0aW9uW19vYmplY3QuY29uc3RydWN0b3IubmFtZV0gPSBfb2JqZWN0LnNlcmlhbGl6ZSgpO1xyXG4gICAgICBsZXQgcGF0aDogc3RyaW5nID0gdGhpcy5nZXRGdWxsUGF0aChfb2JqZWN0KTtcclxuICAgICAgaWYgKCFwYXRoKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTmFtZXNwYWNlIG9mIHNlcmlhbGl6YWJsZSBvYmplY3Qgb2YgdHlwZSAke19vYmplY3QuY29uc3RydWN0b3IubmFtZX0gbm90IGZvdW5kLiBNYXliZSB0aGUgbmFtZXNwYWNlIGhhc24ndCBiZWVuIHJlZ2lzdGVyZWQgb3IgdGhlIGNsYXNzIG5vdCBleHBvcnRlZD9gKTtcclxuICAgICAgc2VyaWFsaXphdGlvbltwYXRoXSA9IF9vYmplY3Quc2VyaWFsaXplKCk7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgICAvLyByZXR1cm4gX29iamVjdC5zZXJpYWxpemUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBGVURHRS1vYmplY3QgcmVjb25zdHJ1Y3RlZCBmcm9tIHRoZSBpbmZvcm1hdGlvbiBpbiB0aGUge0BsaW5rIFNlcmlhbGl6YXRpb259IGdpdmVuLFxyXG4gICAgICogaW5jbHVkaW5nIGF0dGFjaGVkIGNvbXBvbmVudHMsIGNoaWxkcmVuLCBzdXBlcmNsYXNzLW9iamVjdHNcclxuICAgICAqIEBwYXJhbSBfc2VyaWFsaXphdGlvbiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGxldCByZWNvbnN0cnVjdDogU2VyaWFsaXphYmxlO1xyXG4gICAgICBsZXQgcGF0aDogc3RyaW5nO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIGxvb3AgY29uc3RydWN0ZWQgc29sZWx5IHRvIGFjY2VzcyB0eXBlLXByb3BlcnR5LiBPbmx5IG9uZSBleHBlY3RlZCFcclxuICAgICAgICBmb3IgKHBhdGggaW4gX3NlcmlhbGl6YXRpb24pIHtcclxuICAgICAgICAgIHJlY29uc3RydWN0ID0gU2VyaWFsaXplci5yZWNvbnN0cnVjdChwYXRoKTtcclxuICAgICAgICAgIHJlY29uc3RydWN0ID0gYXdhaXQgcmVjb25zdHJ1Y3QuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bcGF0aF0pO1xyXG4gICAgICAgICAgcmV0dXJuIHJlY29uc3RydWN0O1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2U6IHN0cmluZyA9IGBEZXNlcmlhbGl6YXRpb24gb2YgJHtwYXRofSwgJHtyZWNvbnN0cnVjdCA/IFJlZmxlY3QuZ2V0KHJlY29uc3RydWN0LCBcImlkUmVzb3VyY2VcIikgOiBcIlwifSBmYWlsZWQ6IGAgKyBfZXJyb3I7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBBcnJheSBvZiBqYXZhc2NyaXB0IG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNlcmlhbGl6YWJsZSBGVURHRS1vYmplY3RzIGdpdmVuIGluIHRoZSBhcnJheSxcclxuICAgICAqIGluY2x1ZGluZyBhdHRhY2hlZCBjb21wb25lbnRzLCBjaGlsZHJlbiwgc3VwZXJjbGFzcy1vYmplY3RzIGFsbCBpbmZvcm1hdGlvbiBuZWVkZWQgZm9yIHJlY29uc3RydWN0aW9uXHJcbiAgICAgKiBAcGFyYW0gX29iamVjdCBBbiBvYmplY3QgdG8gc2VyaWFsaXplLCBpbXBsZW1lbnRpbmcgdGhlIHtAbGluayBTZXJpYWxpemFibGV9IGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNlcmlhbGl6ZUFycmF5PFQgZXh0ZW5kcyBTZXJpYWxpemFibGU+KF90eXBlOiBuZXcgKCkgPT4gVCwgX29iamVjdHM6IFNlcmlhbGl6YWJsZVtdKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uczogU2VyaWFsaXphdGlvbltdID0gW107XHJcbiAgICAgIGxldCBwYXRoOiBzdHJpbmcgPSB0aGlzLmdldEZ1bGxQYXRoKG5ldyBfdHlwZSgpKTtcclxuICAgICAgaWYgKCFwYXRoKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTmFtZXNwYWNlIG9mIHNlcmlhbGl6YWJsZSBvYmplY3Qgb2YgdHlwZSAke190eXBlLm5hbWV9IG5vdCBmb3VuZC4gTWF5YmUgdGhlIG5hbWVzcGFjZSBoYXNuJ3QgYmVlbiByZWdpc3RlcmVkIG9yIHRoZSBjbGFzcyBub3QgZXhwb3J0ZWQ/YCk7XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGxldCBvYmplY3Qgb2YgX29iamVjdHMpXHJcbiAgICAgICAgc2VyaWFsaXphdGlvbnMucHVzaChvYmplY3Quc2VyaWFsaXplKCkpO1xyXG5cclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7fTtcclxuICAgICAgc2VyaWFsaXphdGlvbltwYXRoXSA9IHNlcmlhbGl6YXRpb25zO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYW4gQXJyYXkgb2YgRlVER0Utb2JqZWN0cyByZWNvbnN0cnVjdGVkIGZyb20gdGhlIGluZm9ybWF0aW9uIGluIHRoZSBhcnJheSBvZiB7QGxpbmsgU2VyaWFsaXphdGlvbn1zIGdpdmVuLFxyXG4gICAgICogaW5jbHVkaW5nIGF0dGFjaGVkIGNvbXBvbmVudHMsIGNoaWxkcmVuLCBzdXBlcmNsYXNzLW9iamVjdHNcclxuICAgICAqIEBwYXJhbSBfc2VyaWFsaXphdGlvbnMgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVzZXJpYWxpemVBcnJheShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlW10+IHtcclxuICAgICAgbGV0IHNlcmlhbGl6YWJsZXM6IFNlcmlhbGl6YWJsZVtdID0gW107XHJcbiAgICAgIGxldCBjb25zdHJ1Y3Q6IG5ldyAoKSA9PiBTZXJpYWxpemFibGU7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uczogU2VyaWFsaXphdGlvbltdID0gW107XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gbG9vcCBjb25zdHJ1Y3RlZCBzb2xlbHkgdG8gYWNjZXNzIHR5cGUtcHJvcGVydHkuIE9ubHkgb25lIGV4cGVjdGVkIVxyXG4gICAgICAgIGZvciAobGV0IHBhdGggaW4gX3NlcmlhbGl6YXRpb24pIHtcclxuICAgICAgICAgIGNvbnN0cnVjdCA9IFNlcmlhbGl6ZXIuZ2V0Q29uc3RydWN0b3IocGF0aCk7XHJcbiAgICAgICAgICBzZXJpYWxpemF0aW9ucyA9IF9zZXJpYWxpemF0aW9uW3BhdGhdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZXNlcmlhbGl6YXRpb24gZmFpbGVkOiBcIiArIF9lcnJvcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAobGV0IHNlcmlhbGl6YXRpb24gb2Ygc2VyaWFsaXphdGlvbnMpIHtcclxuICAgICAgICBsZXQgc2VyaWFsaXphYmxlOiBTZXJpYWxpemFibGUgPSBuZXcgY29uc3RydWN0KCk7XHJcbiAgICAgICAgYXdhaXQgc2VyaWFsaXphYmxlLmRlc2VyaWFsaXplKHNlcmlhbGl6YXRpb24pO1xyXG4gICAgICAgIHNlcmlhbGl6YWJsZXMucHVzaChzZXJpYWxpemFibGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gc2VyaWFsaXphYmxlcztcclxuICAgIH1cclxuXHJcbiAgICAvL1RPRE86IGltcGxlbWVudCBwcmV0dGlmaWVyIHRvIG1ha2UgSlNPTi1TdHJpbmdpZmljYXRpb24gb2Ygc2VyaWFsaXphdGlvbnMgbW9yZSByZWFkYWJsZSwgZS5nLiBwbGFjaW5nIHgsIHkgYW5kIHogaW4gb25lIGxpbmVcclxuICAgIHB1YmxpYyBzdGF0aWMgcHJldHRpZnkoX2pzb246IHN0cmluZyk6IHN0cmluZyB7IHJldHVybiBfanNvbjsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGZvcm1hdHRlZCwgaHVtYW4gcmVhZGFibGUgSlNPTi1TdHJpbmcsIHJlcHJlc2VudGluZyB0aGUgZ2l2ZW4ge0BsaW5rIFNlcmlhbGl6YXRpb259IHRoYXQgbWF5IGhhdmUgYmVlbiBjcmVhdGVkIGJ5IHtAbGluayBTZXJpYWxpemVyfS5zZXJpYWxpemVcclxuICAgICAqIEBwYXJhbSBfc2VyaWFsaXphdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHN0cmluZ2lmeShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IHN0cmluZyB7XHJcbiAgICAgIC8vIGFkanVzdG1lbnRzIHRvIHNlcmlhbGl6YXRpb24gY2FuIGJlIG1hZGUgaGVyZSBiZWZvcmUgc3RyaW5naWZpY2F0aW9uLCBpZiBkZXNpcmVkXHJcbiAgICAgIGxldCBqc29uOiBzdHJpbmcgPSBKU09OLnN0cmluZ2lmeShfc2VyaWFsaXphdGlvbiwgbnVsbCwgMik7XHJcbiAgICAgIGxldCBwcmV0dHk6IHN0cmluZyA9IFNlcmlhbGl6ZXIucHJldHRpZnkoanNvbik7XHJcbiAgICAgIHJldHVybiBwcmV0dHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEge0BsaW5rIFNlcmlhbGl6YXRpb259IGNyZWF0ZWQgZnJvbSB0aGUgZ2l2ZW4gSlNPTi1TdHJpbmcuIFJlc3VsdCBtYXkgYmUgcGFzc2VkIHRvIHtAbGluayBTZXJpYWxpemVyLmRlc2VyaWFsaXplfVxyXG4gICAgICogQHBhcmFtIF9qc29uIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHBhcnNlKF9qc29uOiBzdHJpbmcpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoX2pzb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3Qgb2YgdGhlIGNsYXNzIGRlZmluZWQgd2l0aCB0aGUgZnVsbCBwYXRoIGluY2x1ZGluZyB0aGUgbmFtZXNwYWNlTmFtZShzKSBhbmQgdGhlIGNsYXNzTmFtZSBzZXBlcmF0ZWQgYnkgZG90cyguKSBcclxuICAgICAqIEBwYXJhbSBfcGF0aCBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWNvbnN0cnVjdChfcGF0aDogc3RyaW5nKTogU2VyaWFsaXphYmxlIHtcclxuICAgICAgbGV0IGNvbnN0cnVjdG9yOiBuZXcgKCkgPT4gU2VyaWFsaXphYmxlID0gU2VyaWFsaXplci5nZXRDb25zdHJ1Y3RvcihfcGF0aCk7XHJcbiAgICAgIGxldCByZWNvbnN0cnVjdGlvbjogU2VyaWFsaXphYmxlID0gbmV3IGNvbnN0cnVjdG9yKCk7XHJcbiAgICAgIHJldHVybiByZWNvbnN0cnVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgc3RhdGljIGdldENvbnN0cnVjdG9yPFQgZXh0ZW5kcyBTZXJpYWxpemFibGU+KF90eXBlOiBzdHJpbmcsIF9uYW1lc3BhY2U6IE9iamVjdCA9IEZ1ZGdlQ29yZSk6IG5ldyAoKSA9PiBUIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29uc3RydWN0b3I8VCBleHRlbmRzIFNlcmlhbGl6YWJsZT4oX3BhdGg6IHN0cmluZyk6IG5ldyAoKSA9PiBUIHtcclxuICAgICAgbGV0IHR5cGVOYW1lOiBzdHJpbmcgPSBfcGF0aC5zdWJzdHJpbmcoX3BhdGgubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XHJcbiAgICAgIGxldCBuYW1lc3BhY2U6IE9iamVjdCA9IFNlcmlhbGl6ZXIuZ2V0TmFtZXNwYWNlKF9wYXRoKTtcclxuICAgICAgaWYgKCFuYW1lc3BhY2UpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb25zdHJ1Y3RvciBvZiBzZXJpYWxpemFibGUgb2JqZWN0IG9mIHR5cGUgJHtfcGF0aH0gbm90IGZvdW5kLiBNYXliZSB0aGUgbmFtZXNwYWNlIGhhc24ndCBiZWVuIHJlZ2lzdGVyZWQ/YCk7XHJcbiAgICAgIHJldHVybiAoPEdlbmVyYWw+bmFtZXNwYWNlKVt0eXBlTmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmdWxsIHBhdGggdG8gdGhlIGNsYXNzIG9mIHRoZSBvYmplY3QsIGlmIGZvdW5kIGluIHRoZSByZWdpc3RlcmVkIG5hbWVzcGFjZXNcclxuICAgICAqIEBwYXJhbSBfb2JqZWN0IFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRGdWxsUGF0aChfb2JqZWN0OiBTZXJpYWxpemFibGUpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgdHlwZU5hbWU6IHN0cmluZyA9IF9vYmplY3QuY29uc3RydWN0b3IubmFtZTtcclxuICAgICAgLy8gRGVidWcubG9nKFwiU2VhcmNoaW5nIG5hbWVzcGFjZSBvZjogXCIgKyB0eXBlTmFtZSk7XHJcbiAgICAgIGZvciAobGV0IG5hbWVzcGFjZU5hbWUgaW4gU2VyaWFsaXplci5uYW1lc3BhY2VzKSB7XHJcbiAgICAgICAgbGV0IGZvdW5kOiBHZW5lcmFsID0gKDxHZW5lcmFsPlNlcmlhbGl6ZXIubmFtZXNwYWNlcylbbmFtZXNwYWNlTmFtZV1bdHlwZU5hbWVdO1xyXG4gICAgICAgIGlmIChmb3VuZCAmJiBfb2JqZWN0IGluc3RhbmNlb2YgZm91bmQpXHJcbiAgICAgICAgICByZXR1cm4gbmFtZXNwYWNlTmFtZSArIFwiLlwiICsgdHlwZU5hbWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBuYW1lc3BhY2Utb2JqZWN0IGRlZmluZWQgd2l0aGluIHRoZSBmdWxsIHBhdGgsIGlmIHJlZ2lzdGVyZWRcclxuICAgICAqIEBwYXJhbSBfcGF0aFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXROYW1lc3BhY2UoX3BhdGg6IHN0cmluZyk6IE9iamVjdCB7XHJcbiAgICAgIGxldCBuYW1lc3BhY2VOYW1lOiBzdHJpbmcgPSBfcGF0aC5zdWJzdHIoMCwgX3BhdGgubGFzdEluZGV4T2YoXCIuXCIpKTtcclxuICAgICAgcmV0dXJuIFNlcmlhbGl6ZXIubmFtZXNwYWNlc1tuYW1lc3BhY2VOYW1lXSB8fCBGdWRnZUNvcmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyB0aGUgbmFtZXNwYWNlLW9iamVjdCBpbiBwcm9wZXJ0aWVzIG9mIHRoZSBwYXJlbnQtb2JqZWN0IChlLmcuIHdpbmRvdyksIGlmIHByZXNlbnRcclxuICAgICAqIEBwYXJhbSBfbmFtZXNwYWNlIFxyXG4gICAgICogQHBhcmFtIF9wYXJlbnQgXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGZpbmROYW1lc3BhY2VJbihfbmFtZXNwYWNlOiBPYmplY3QsIF9wYXJlbnQ6IE9iamVjdCk6IHN0cmluZyB7XHJcbiAgICAgIGZvciAobGV0IHByb3AgaW4gX3BhcmVudClcclxuICAgICAgICBpZiAoKDxHZW5lcmFsPl9wYXJlbnQpW3Byb3BdID09IF9uYW1lc3BhY2UpXHJcbiAgICAgICAgICByZXR1cm4gcHJvcDtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGludGVyZmFjZSBNYXBDbGFzc1RvQ29tcG9uZW50cyB7XHJcbiAgICBbY2xhc3NOYW1lOiBzdHJpbmddOiBDb21wb25lbnRbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlcHJlc2VudHMgYSBub2RlIGluIHRoZSBzY2VuZXRyZWUuXHJcbiAgICogQGF1dGhvcnMgSmFzY2hhIEthcmFnw7ZsLCBIRlUsIDIwMTkgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9KaXJrYURlbGxPcm8vRlVER0Uvd2lraS9HcmFwaFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBOb2RlIGV4dGVuZHMgRXZlbnRUYXJnZXRVbmlmaWVkIGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7IC8vIFRoZSBuYW1lIHRvIGNhbGwgdGhpcyBub2RlIGJ5LlxyXG4gICAgcHVibGljIHJlYWRvbmx5IG10eFdvcmxkOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuICAgIHB1YmxpYyB0aW1lc3RhbXBVcGRhdGU6IG51bWJlciA9IDA7XHJcbiAgICAvKiogVGhlIG51bWJlciBvZiBub2RlcyBvZiB0aGUgd2hvbGUgYnJhbmNoIGluY2x1ZGluZyB0aGlzIG5vZGUgYW5kIGFsbCBzdWNjZXNzb3JzICovXHJcbiAgICBwdWJsaWMgbk5vZGVzSW5CcmFuY2g6IG51bWJlciA9IDA7XHJcbiAgICAvKiogVGhlIHJhZGl1cyBvZiB0aGUgYm91bmRpbmcgc3BoZXJlIGluIHdvcmxkIGRpbWVuc2lvbnMgZW5jbG9zaW5nIHRoZSBnZW9tZXRyeSBvZiB0aGlzIG5vZGUgYW5kIGFsbCBzdWNjZXNzb3JzIGluIHRoZSBicmFuY2ggKi9cclxuICAgIHB1YmxpYyByYWRpdXM6IG51bWJlciA9IDA7XHJcblxyXG4gICAgI210eFdvcmxkSW52ZXJzZVVwZGF0ZWQ6IG51bWJlcjtcclxuICAgICNtdHhXb3JsZEludmVyc2U6IE1hdHJpeDR4NDtcclxuXHJcbiAgICBwcml2YXRlIHBhcmVudDogTm9kZSB8IG51bGwgPSBudWxsOyAvLyBUaGUgcGFyZW50IG9mIHRoaXMgbm9kZS5cclxuICAgIHByaXZhdGUgY2hpbGRyZW46IE5vZGVbXSA9IFtdOyAvLyBhcnJheSBvZiBjaGlsZCBub2RlcyBhcHBlbmRlZCB0byB0aGlzIG5vZGUuXHJcbiAgICBwcml2YXRlIGNvbXBvbmVudHM6IE1hcENsYXNzVG9Db21wb25lbnRzID0ge307XHJcbiAgICAvLyBwcml2YXRlIHRhZ3M6IHN0cmluZ1tdID0gW107IC8vIE5hbWVzIG9mIHRhZ3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gdGhpcyBub2RlLiAoVE9ETzogQXMgb2YgeWV0IG5vIGZ1bmN0aW9uYWxpdHkpXHJcbiAgICAvLyBwcml2YXRlIGxheWVyczogc3RyaW5nW10gPSBbXTsgLy8gTmFtZXMgb2YgdGhlIGxheWVycyB0aGlzIG5vZGUgaXMgb24uIChUT0RPOiBBcyBvZiB5ZXQgbm8gZnVuY3Rpb25hbGl0eSlcclxuICAgIHByaXZhdGUgbGlzdGVuZXJzOiBNYXBFdmVudFR5cGVUb0xpc3RlbmVyID0ge307XHJcbiAgICBwcml2YXRlIGNhcHR1cmVzOiBNYXBFdmVudFR5cGVUb0xpc3RlbmVyID0ge307XHJcbiAgICBwcml2YXRlIGFjdGl2ZTogYm9vbGVhbiA9IHRydWU7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBub2RlIHdpdGggYSBuYW1lIGFuZCBpbml0aWFsaXplcyBhbGwgYXR0cmlidXRlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZykge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaG9ydGN1dCB0byByZXRyaWV2ZSB0aGlzIG5vZGVzIHtAbGluayBDb21wb25lbnRUcmFuc2Zvcm19XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgY21wVHJhbnNmb3JtKCk6IENvbXBvbmVudFRyYW5zZm9ybSB7XHJcbiAgICAgIHJldHVybiA8Q29tcG9uZW50VHJhbnNmb3JtPnRoaXMuZ2V0Q29tcG9uZW50cyhDb21wb25lbnRUcmFuc2Zvcm0pWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvcnRjdXQgdG8gcmV0cmlldmUgdGhlIGxvY2FsIHtAbGluayBNYXRyaXg0eDR9IGF0dGFjaGVkIHRvIHRoaXMgbm9kZXMge0BsaW5rIENvbXBvbmVudFRyYW5zZm9ybX0gIFxyXG4gICAgICogRmFpbHMgaWYgbm8ge0BsaW5rIENvbXBvbmVudFRyYW5zZm9ybX0gaXMgYXR0YWNoZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtdHhMb2NhbCgpOiBNYXRyaXg0eDQge1xyXG4gICAgICByZXR1cm4gdGhpcy5jbXBUcmFuc2Zvcm0ubXR4TG9jYWw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBtdHhXb3JsZEludmVyc2UoKTogTWF0cml4NHg0IHtcclxuICAgICAgaWYgKHRoaXMuI210eFdvcmxkSW52ZXJzZVVwZGF0ZWQgIT0gdGhpcy50aW1lc3RhbXBVcGRhdGUpXHJcbiAgICAgICAgdGhpcy4jbXR4V29ybGRJbnZlcnNlID0gTWF0cml4NHg0LklOVkVSU0lPTih0aGlzLm10eFdvcmxkKTtcclxuXHJcbiAgICAgIHRoaXMuI210eFdvcmxkSW52ZXJzZVVwZGF0ZWQgPSB0aGlzLnRpbWVzdGFtcFVwZGF0ZTtcclxuICAgICAgcmV0dXJuIHRoaXMuI210eFdvcmxkSW52ZXJzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBjaGlsZHJlbiBhdHRhY2hlZCB0byB0aGlzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbkNoaWxkcmVuKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRvciB5aWVsZGluZyB0aGUgbm9kZSBhbmQgYWxsIGRlY2VuZGFudHMgaW4gdGhlIGdyYXBoIGJlbG93IGZvciBpdGVyYXRpb25cclxuICAgICAqIEluYWN0aXZlIG5vZGVzIGFuZCB0aGVpciBkZXNjZW5kYW50cyBjYW4gYmUgZmlsdGVyZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljICogZ2V0SXRlcmF0b3IoX2FjdGl2ZTogYm9vbGVhbiA9IGZhbHNlKTogSXRlcmFibGVJdGVyYXRvcjxOb2RlPiB7XHJcbiAgICAgIGlmICghX2FjdGl2ZSB8fCB0aGlzLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgeWllbGQgdGhpcztcclxuICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKVxyXG4gICAgICAgICAgeWllbGQqIGNoaWxkLmdldEl0ZXJhdG9yKF9hY3RpdmUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIFtTeW1ib2wuaXRlcmF0b3JdKCk6IEl0ZXJhYmxlSXRlcmF0b3I8Tm9kZT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRJdGVyYXRvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhY3RpdmF0ZShfb246IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgdGhpcy5hY3RpdmUgPSBfb247XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoX29uID8gRVZFTlQuTk9ERV9BQ1RJVkFURSA6IEVWRU5ULk5PREVfREVBQ1RJVkFURSwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgICAgdGhpcy5icm9hZGNhc3RFdmVudChuZXcgRXZlbnQoX29uID8gRVZFTlQuTk9ERV9BQ1RJVkFURSA6IEVWRU5ULk5PREVfREVBQ1RJVkFURSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICNyZWdpb24gU2NlbmV0cmVlXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhpcyBub2RlcyBwYXJlbnQgbm9kZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UGFyZW50KCk6IE5vZGUgfCBudWxsIHtcclxuICAgICAgcmV0dXJuIHRoaXMucGFyZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhY2VzIGJhY2sgdGhlIGFuY2VzdG9ycyBvZiB0aGlzIG5vZGUgYW5kIHJldHVybnMgdGhlIGZpcnN0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRBbmNlc3RvcigpOiBOb2RlIHwgbnVsbCB7XHJcbiAgICAgIGxldCBhbmNlc3RvcjogTm9kZSA9IHRoaXM7XHJcbiAgICAgIHdoaWxlIChhbmNlc3Rvci5nZXRQYXJlbnQoKSlcclxuICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLmdldFBhcmVudCgpO1xyXG4gICAgICByZXR1cm4gYW5jZXN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFjZXMgdGhlIGhpZXJhcmNoeSB1cHdhcmRzIHRvIHRoZSBmaXJzdCBhbmNlc3RvciBhbmQgcmV0dXJucyB0aGUgcGF0aCB0aHJvdWdoIHRoZSBncmFwaCB0byB0aGlzIG5vZGVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFBhdGgoKTogTm9kZVtdIHtcclxuICAgICAgbGV0IGFuY2VzdG9yOiBOb2RlID0gdGhpcztcclxuICAgICAgbGV0IHBhdGg6IE5vZGVbXSA9IFt0aGlzXTtcclxuICAgICAgd2hpbGUgKGFuY2VzdG9yLmdldFBhcmVudCgpKVxyXG4gICAgICAgIHBhdGgudW5zaGlmdChhbmNlc3RvciA9IGFuY2VzdG9yLmdldFBhcmVudCgpKTtcclxuICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBjaGlsZCBhdCB0aGUgZ2l2ZW4gaW5kZXggaW4gdGhlIGxpc3Qgb2YgY2hpbGRyZW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldENoaWxkKF9pbmRleDogbnVtYmVyKTogTm9kZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuW19pbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIGxpc3Qgb2YgY2hpbGRyZW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldENoaWxkcmVuKCk6IE5vZGVbXSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLnNsaWNlKDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiByZWZlcmVuY2VzIHRvIGNoaWxkbm9kZXMgd2l0aCB0aGUgc3VwcGxpZWQgbmFtZS4gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDaGlsZHJlbkJ5TmFtZShfbmFtZTogc3RyaW5nKTogTm9kZVtdIHtcclxuICAgICAgbGV0IGZvdW5kOiBOb2RlW10gPSBbXTtcclxuICAgICAgZm91bmQgPSB0aGlzLmNoaWxkcmVuLmZpbHRlcigoX25vZGU6IE5vZGUpID0+IF9ub2RlLm5hbWUgPT0gX25hbWUpO1xyXG4gICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaW1wbHkgY2FsbHMge0BsaW5rIGFkZENoaWxkfS4gVGhpcyByZWZlcmVuY2UgaXMgaGVyZSBzb2xlbHkgYmVjYXVzZSBhcHBlbmRDaGlsZCBpcyB0aGUgZXF1aXZhbGVudCBtZXRob2QgaW4gRE9NLlxyXG4gICAgICogU2VlIGFuZCBwcmVmZXJhYmx5IHVzZSB7QGxpbmsgYWRkQ2hpbGR9XHJcbiAgICAgKi9cclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbWVtYmVyLW9yZGVyaW5nXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgYXBwZW5kQ2hpbGQ6IChfY2hpbGQ6IE5vZGUpID0+IHZvaWQgPSB0aGlzLmFkZENoaWxkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgZ2l2ZW4gcmVmZXJlbmNlIHRvIGEgbm9kZSB0byB0aGUgbGlzdCBvZiBjaGlsZHJlbiwgaWYgbm90IGFscmVhZHkgaW5cclxuICAgICAqIEB0aHJvd3MgRXJyb3Igd2hlbiB0cnlpbmcgdG8gYWRkIGFuIGFuY2VzdG9yIG9mIHRoaXMgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGRDaGlsZChfY2hpbGQ6IE5vZGUpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuY2hpbGRyZW4uaW5jbHVkZXMoX2NoaWxkKSlcclxuICAgICAgICAvLyBfbm9kZSBpcyBhbHJlYWR5IGEgY2hpbGQgb2YgdGhpc1xyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIGxldCBpbkF1ZGlvR3JhcGg6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgbGV0IGdyYXBoTGlzdGVuZWQ6IE5vZGUgPSBBdWRpb01hbmFnZXIuZGVmYXVsdC5nZXRHcmFwaExpc3RlbmluZ1RvKCk7XHJcbiAgICAgIGxldCBhbmNlc3RvcjogTm9kZSA9IHRoaXM7XHJcbiAgICAgIHdoaWxlIChhbmNlc3Rvcikge1xyXG4gICAgICAgIGFuY2VzdG9yLnRpbWVzdGFtcFVwZGF0ZSA9IDA7XHJcbiAgICAgICAgaW5BdWRpb0dyYXBoID0gaW5BdWRpb0dyYXBoIHx8IChhbmNlc3RvciA9PSBncmFwaExpc3RlbmVkKTtcclxuICAgICAgICBpZiAoYW5jZXN0b3IgPT0gX2NoaWxkKVxyXG4gICAgICAgICAgdGhyb3cgKG5ldyBFcnJvcihcIkN5Y2xpYyByZWZlcmVuY2UgcHJvaGliaXRlZCBpbiBub2RlIGhpZXJhcmNoeSwgYW5jZXN0b3JzIG11c3Qgbm90IGJlIGFkZGVkIGFzIGNoaWxkcmVuXCIpKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHByZXZpb3VzUGFyZW50OiBOb2RlID0gX2NoaWxkLnBhcmVudDtcclxuICAgICAgaWYgKHByZXZpb3VzUGFyZW50KVxyXG4gICAgICAgIHByZXZpb3VzUGFyZW50LnJlbW92ZUNoaWxkKF9jaGlsZCk7XHJcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChfY2hpbGQpO1xyXG4gICAgICBfY2hpbGQucGFyZW50ID0gdGhpcztcclxuICAgICAgX2NoaWxkLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULkNISUxEX0FQUEVORCwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgICAgaWYgKGluQXVkaW9HcmFwaClcclxuICAgICAgICBfY2hpbGQuYnJvYWRjYXN0RXZlbnQobmV3IEV2ZW50KEVWRU5UX0FVRElPLkNISUxEX0FQUEVORCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgcmVmZXJlbmNlIHRvIHRoZSBnaXZlIG5vZGUgZnJvbSB0aGUgbGlzdCBvZiBjaGlsZHJlblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlQ2hpbGQoX2NoaWxkOiBOb2RlKTogdm9pZCB7XHJcbiAgICAgIGxldCBmb3VuZDogbnVtYmVyID0gdGhpcy5maW5kQ2hpbGQoX2NoaWxkKTtcclxuICAgICAgaWYgKGZvdW5kIDwgMClcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBfY2hpbGQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuQ0hJTERfUkVNT1ZFLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xyXG4gICAgICBfY2hpbGQuYnJvYWRjYXN0RXZlbnQobmV3IEV2ZW50KEVWRU5ULk5PREVfREVBQ1RJVkFURSkpO1xyXG4gICAgICBpZiAodGhpcy5pc0Rlc2NlbmRhbnRPZihBdWRpb01hbmFnZXIuZGVmYXVsdC5nZXRHcmFwaExpc3RlbmluZ1RvKCkpKVxyXG4gICAgICAgIF9jaGlsZC5icm9hZGNhc3RFdmVudChuZXcgRXZlbnQoRVZFTlRfQVVESU8uQ0hJTERfUkVNT1ZFKSk7XHJcbiAgICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKGZvdW5kLCAxKTtcclxuICAgICAgX2NoaWxkLnBhcmVudCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFsbCByZWZlcmVuY2VzIGluIHRoZSBsaXN0IG9mIGNoaWxkcmVuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW1vdmVBbGxDaGlsZHJlbigpOiB2b2lkIHtcclxuICAgICAgd2hpbGUgKHRoaXMuY2hpbGRyZW4ubGVuZ3RoKVxyXG4gICAgICAgIHRoaXMucmVtb3ZlQ2hpbGQodGhpcy5jaGlsZHJlblswXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBvZiB0aGUgbm9kZSBpbiB0aGUgbGlzdCBvZiBjaGlsZHJlbiBvciAtMSBpZiBub3QgZm91bmRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGZpbmRDaGlsZChfc2VhcmNoOiBOb2RlKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4uaW5kZXhPZihfc2VhcmNoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlcGxhY2VzIGEgY2hpbGQgbm9kZSB3aXRoIGFub3RoZXIsIHByZXNlcnZpbmcgdGhlIHBvc2l0aW9uIGluIHRoZSBsaXN0IG9mIGNoaWxkcmVuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZXBsYWNlQ2hpbGQoX3JlcGxhY2U6IE5vZGUsIF93aXRoOiBOb2RlKTogYm9vbGVhbiB7XHJcbiAgICAgIGxldCBmb3VuZDogbnVtYmVyID0gdGhpcy5maW5kQ2hpbGQoX3JlcGxhY2UpO1xyXG4gICAgICBpZiAoZm91bmQgPCAwKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgIGxldCBwcmV2aW91c1BhcmVudDogTm9kZSA9IF93aXRoLmdldFBhcmVudCgpO1xyXG4gICAgICBpZiAocHJldmlvdXNQYXJlbnQpXHJcbiAgICAgICAgcHJldmlvdXNQYXJlbnQucmVtb3ZlQ2hpbGQoX3dpdGgpO1xyXG5cclxuICAgICAgX3JlcGxhY2UucGFyZW50ID0gbnVsbDtcclxuICAgICAgdGhpcy5jaGlsZHJlbltmb3VuZF0gPSBfd2l0aDtcclxuICAgICAgX3dpdGgucGFyZW50ID0gdGhpcztcclxuXHJcbiAgICAgIF93aXRoLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULkNISUxEX0FQUEVORCwgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgICAgaWYgKHRoaXMuaXNEZXNjZW5kYW50T2YoQXVkaW9NYW5hZ2VyLmRlZmF1bHQuZ2V0R3JhcGhMaXN0ZW5pbmdUbygpKSlcclxuICAgICAgICBfd2l0aC5icm9hZGNhc3RFdmVudChuZXcgRXZlbnQoRVZFTlRfQVVESU8uQ0hJTERfQVBQRU5EKSk7XHJcblxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIGlzVXBkYXRlZChfdGltZXN0YW1wVXBkYXRlOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuICh0aGlzLnRpbWVzdGFtcFVwZGF0ZSA9PSBfdGltZXN0YW1wVXBkYXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNEZXNjZW5kYW50T2YoX2FuY2VzdG9yOiBOb2RlKTogYm9vbGVhbiB7XHJcbiAgICAgIGxldCBub2RlOiBOb2RlID0gdGhpcztcclxuICAgICAgd2hpbGUgKG5vZGUgJiYgbm9kZSAhPSBfYW5jZXN0b3IpXHJcbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50O1xyXG4gICAgICByZXR1cm4gKG5vZGUgIT0gbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBsaWVzIGEgTXV0YXRvciBmcm9tIHtAbGluayBBbmltYXRpb259IHRvIGFsbCBpdHMgY29tcG9uZW50cyBhbmQgdHJhbnNmZXJzIGl0IHRvIGl0cyBjaGlsZHJlbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFwcGx5QW5pbWF0aW9uKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGlmIChcImNvbXBvbmVudHNcIiBpbiBfbXV0YXRvcikge1xyXG4gICAgICAgIGZvciAoY29uc3QgY29tcG9uZW50VHlwZSBpbiBfbXV0YXRvci5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICBsZXQgY29tcG9uZW50c09mVHlwZTogQ29tcG9uZW50W10gPSB0aGlzLmNvbXBvbmVudHNbY29tcG9uZW50VHlwZV07IC8vIFRPRE86IGFkZCBlcnJvcnMgaWYgbm9kZSBkb2Vzbid0IGNvbnRhaW4gcHJvcGVydHlcclxuICAgICAgICAgIGxldCBtdXRhdG9yc0ZvclR5cGU6IE11dGF0b3JbXSA9IF9tdXRhdG9yLmNvbXBvbmVudHNbY29tcG9uZW50VHlwZV07XHJcbiAgICAgICAgICBpZiAoY29tcG9uZW50c09mVHlwZSAhPSB1bmRlZmluZWQgJiYgbXV0YXRvcnNGb3JUeXBlICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgaW4gbXV0YXRvcnNGb3JUeXBlKSB7XHJcbiAgICAgICAgICAgICAgY29tcG9uZW50c09mVHlwZVtpXS5tdXRhdGUobXV0YXRvcnNGb3JUeXBlW2ldLCBudWxsLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKFwiY2hpbGRyZW5cIiBpbiBfbXV0YXRvcikge1xyXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGROYW1lIGluIF9tdXRhdG9yLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkTm9kZSBvZiB0aGlzLmdldENoaWxkcmVuQnlOYW1lKGNoaWxkTmFtZSkpIHtcclxuICAgICAgICAgICAgY2hpbGROb2RlLmFwcGx5QW5pbWF0aW9uKF9tdXRhdG9yLmNoaWxkcmVuW2NoaWxkTmFtZV0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vICNyZWdpb24gQ29tcG9uZW50c1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhbGwgY29tcG9uZW50cyBhdHRhY2hlZCB0byB0aGlzIG5vZGUsIGluZGVwZW5kZW50IG9mIHR5cGUuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QWxsQ29tcG9uZW50cygpOiBDb21wb25lbnRbXSB7XHJcbiAgICAgIGxldCBhbGw6IENvbXBvbmVudFtdID0gW107XHJcbiAgICAgIGZvciAobGV0IHR5cGUgaW4gdGhpcy5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgYWxsID0gYWxsLmNvbmNhdCh0aGlzLmNvbXBvbmVudHNbdHlwZV0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhbGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgY2xvbmUgb2YgdGhlIGxpc3Qgb2YgY29tcG9uZW50cyBvZiB0aGUgZ2l2ZW4gY2xhc3MgYXR0YWNoZWQgdG8gdGhpcyBub2RlLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldENvbXBvbmVudHM8VCBleHRlbmRzIENvbXBvbmVudD4oX2NsYXNzOiBuZXcgKCkgPT4gVCk6IFRbXSB7XHJcbiAgICAgIHJldHVybiA8VFtdPih0aGlzLmNvbXBvbmVudHNbX2NsYXNzLm5hbWVdIHx8IFtdKS5zbGljZSgwKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3QgY29tcG9udGVudCBmb3VuZCBvZiB0aGUgZ2l2ZW4gY2xhc3MgYXR0YWNoZWQgdGhpcyBub2RlIG9yIG51bGwsIGlmIGxpc3QgaXMgZW1wdHkgb3IgZG9lc24ndCBleGlzdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q29tcG9uZW50PFQgZXh0ZW5kcyBDb21wb25lbnQ+KF9jbGFzczogbmV3ICgpID0+IFQpOiBUIHtcclxuICAgICAgbGV0IGxpc3Q6IFRbXSA9IDxUW10+dGhpcy5jb21wb25lbnRzW19jbGFzcy5uYW1lXTtcclxuICAgICAgaWYgKGxpc3QpXHJcbiAgICAgICAgcmV0dXJuIGxpc3RbMF07XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoIHRoZSBnaXZlbiBjb21wb25lbnQgdG8gdGhpcyBub2RlLiBJZGVudGljYWwgdG8ge0BsaW5rIGFkZENvbXBvbmVudH1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGF0dGFjaChfY29tcG9uZW50OiBDb21wb25lbnQpOiB2b2lkIHtcclxuICAgICAgdGhpcy5hZGRDb21wb25lbnQoX2NvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEF0dGFjaCB0aGUgZ2l2ZW4gY29tcG9uZW50IHRvIHRoaXMgbm9kZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkQ29tcG9uZW50KF9jb21wb25lbnQ6IENvbXBvbmVudCk6IHZvaWQge1xyXG4gICAgICBpZiAoX2NvbXBvbmVudC5ub2RlID09IHRoaXMpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICBsZXQgY21wTGlzdDogQ29tcG9uZW50W10gPSB0aGlzLmNvbXBvbmVudHNbX2NvbXBvbmVudC50eXBlXTtcclxuICAgICAgaWYgKGNtcExpc3QgPT09IHVuZGVmaW5lZClcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHNbX2NvbXBvbmVudC50eXBlXSA9IFtfY29tcG9uZW50XTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIGlmIChjbXBMaXN0Lmxlbmd0aCAmJiBfY29tcG9uZW50LmlzU2luZ2xldG9uKVxyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb21wb25lbnQgJHtfY29tcG9uZW50LnR5cGV9IGlzIG1hcmtlZCBzaW5nbGV0b24gYW5kIGNhbid0IGJlIGF0dGFjaGVkLCBubyBtb3JlIHRoYW4gb25lIGFsbG93ZWRgKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBjbXBMaXN0LnB1c2goX2NvbXBvbmVudCk7XHJcblxyXG4gICAgICBfY29tcG9uZW50LmF0dGFjaFRvTm9kZSh0aGlzKTtcclxuICAgICAgX2NvbXBvbmVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5DT01QT05FTlRfQUREKSk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudFRvVGFyZ2V0T25seShuZXcgQ3VzdG9tRXZlbnQoRVZFTlQuQ09NUE9ORU5UX0FERCwgeyBkZXRhaWw6IF9jb21wb25lbnQgfSkpOyAvLyBUT0RPOiBzZWUgaWYgdGhpcyBpcyBiZSBmZWFzYWJsZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0YWNoIHRoZSBnaXZlbiBjb21wb25lbnQgZnJvbSB0aGlzIG5vZGUuIElkZW50aWNhbCB0byB7QGxpbmsgcmVtb3ZlQ29tcG9uZW50fVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGV0YWNoKF9jb21wb25lbnQ6IENvbXBvbmVudCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnJlbW92ZUNvbXBvbmVudChfY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIC8qKiBcclxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIGNvbXBvbmVudCBmcm9tIHRoZSBub2RlLCBpZiBpdCB3YXMgYXR0YWNoZWQsIGFuZCBzZXRzIGl0cyBwYXJlbnQgdG8gbnVsbC4gXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW1vdmVDb21wb25lbnQoX2NvbXBvbmVudDogQ29tcG9uZW50KTogdm9pZCB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IGNvbXBvbmVudHNPZlR5cGU6IENvbXBvbmVudFtdID0gdGhpcy5jb21wb25lbnRzW19jb21wb25lbnQudHlwZV07XHJcbiAgICAgICAgbGV0IGZvdW5kQXQ6IG51bWJlciA9IGNvbXBvbmVudHNPZlR5cGUuaW5kZXhPZihfY29tcG9uZW50KTtcclxuICAgICAgICBpZiAoZm91bmRBdCA8IDApXHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgX2NvbXBvbmVudC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5DT01QT05FTlRfUkVNT1ZFKSk7XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50VG9UYXJnZXRPbmx5KG5ldyBDdXN0b21FdmVudChFVkVOVC5DT01QT05FTlRfUkVNT1ZFLCB7IGRldGFpbDogX2NvbXBvbmVudCB9KSk7IC8vIFRPRE86IHNlZSBpZiB0aGlzIHdvdWxkIGJlIGZlYXNhYmxlXHJcbiAgICAgICAgY29tcG9uZW50c09mVHlwZS5zcGxpY2UoZm91bmRBdCwgMSk7XHJcbiAgICAgICAgX2NvbXBvbmVudC5hdHRhY2hUb05vZGUobnVsbCk7XHJcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHJlbW92ZSBjb21wb25lbnQgJyR7X2NvbXBvbmVudH0naW4gbm9kZSBuYW1lZCAnJHt0aGlzLm5hbWV9J2ApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyAjZW5kcmVnaW9uXHJcblxyXG4gICAgLy8gI3JlZ2lvbiBTZXJpYWxpemF0aW9uXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgYWN0aXZlOiB0aGlzLmFjdGl2ZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGV0IGNvbXBvbmVudHM6IFNlcmlhbGl6YXRpb24gPSB7fTtcclxuICAgICAgZm9yIChsZXQgdHlwZSBpbiB0aGlzLmNvbXBvbmVudHMpIHtcclxuICAgICAgICBjb21wb25lbnRzW3R5cGVdID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgY29tcG9uZW50IG9mIHRoaXMuY29tcG9uZW50c1t0eXBlXSkge1xyXG4gICAgICAgICAgLy8gY29tcG9uZW50c1t0eXBlXS5wdXNoKGNvbXBvbmVudC5zZXJpYWxpemUoKSk7XHJcbiAgICAgICAgICBjb21wb25lbnRzW3R5cGVdLnB1c2goU2VyaWFsaXplci5zZXJpYWxpemUoY29tcG9uZW50KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bXCJjb21wb25lbnRzXCJdID0gY29tcG9uZW50cztcclxuXHJcbiAgICAgIGxldCBjaGlsZHJlbjogU2VyaWFsaXphdGlvbltdID0gW107XHJcbiAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcclxuICAgICAgICBjaGlsZHJlbi5wdXNoKFNlcmlhbGl6ZXIuc2VyaWFsaXplKGNoaWxkKSk7XHJcbiAgICAgIH1cclxuICAgICAgc2VyaWFsaXphdGlvbltcImNoaWxkcmVuXCJdID0gY2hpbGRyZW47XHJcblxyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULk5PREVfU0VSSUFMSVpFRCkpO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLm5hbWUgPSBfc2VyaWFsaXphdGlvbi5uYW1lO1xyXG4gICAgICAvLyB0aGlzLnBhcmVudCA9IGlzIHNldCB3aGVuIHRoZSBub2RlcyBhcmUgYWRkZWRcclxuXHJcbiAgICAgIC8vIGRlc2VyaWFsaXplIGNvbXBvbmVudHMgZmlyc3Qgc28gc2NyaXB0cyBjYW4gcmVhY3QgdG8gY2hpbGRyZW4gYmVpbmcgYXBwZW5kZWRcclxuICAgICAgZm9yIChsZXQgdHlwZSBpbiBfc2VyaWFsaXphdGlvbi5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgZm9yIChsZXQgc2VyaWFsaXplZENvbXBvbmVudCBvZiBfc2VyaWFsaXphdGlvbi5jb21wb25lbnRzW3R5cGVdKSB7XHJcbiAgICAgICAgICBsZXQgZGVzZXJpYWxpemVkQ29tcG9uZW50OiBDb21wb25lbnQgPSA8Q29tcG9uZW50PmF3YWl0IFNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoc2VyaWFsaXplZENvbXBvbmVudCk7XHJcbiAgICAgICAgICB0aGlzLmFkZENvbXBvbmVudChkZXNlcmlhbGl6ZWRDb21wb25lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKF9zZXJpYWxpemF0aW9uLmNoaWxkcmVuKVxyXG4gICAgICAgIGZvciAobGV0IHNlcmlhbGl6ZWRDaGlsZCBvZiBfc2VyaWFsaXphdGlvbi5jaGlsZHJlbikge1xyXG4gICAgICAgICAgbGV0IGRlc2VyaWFsaXplZENoaWxkOiBOb2RlID0gPE5vZGU+YXdhaXQgU2VyaWFsaXplci5kZXNlcmlhbGl6ZShzZXJpYWxpemVkQ2hpbGQpO1xyXG4gICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChkZXNlcmlhbGl6ZWRDaGlsZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5OT0RFX0RFU0VSSUFMSVpFRCkpO1xyXG4gICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5nZXRBbGxDb21wb25lbnRzKCkpXHJcbiAgICAgICAgY29tcG9uZW50LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULk5PREVfREVTRVJJQUxJWkVEKSk7XHJcblxyXG4gICAgICB0aGlzLmFjdGl2YXRlKF9zZXJpYWxpemF0aW9uLmFjdGl2ZSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8gI2VuZHJlZ2lvblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHN0cmluZyBhcyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG5vZGUgYW5kIGl0cyBkZXNjZW5kYW50c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9IaWVyYXJjaHlTdHJpbmcoX25vZGU6IE5vZGUgPSBudWxsLCBfbGV2ZWw6IG51bWJlciA9IDApOiBzdHJpbmcge1xyXG4gICAgICAvLyBUT0RPOiByZWZhY3RvciBmb3IgYmV0dGVyIHJlYWRhYmlsaXR5XHJcbiAgICAgIGlmICghX25vZGUpXHJcbiAgICAgICAgX25vZGUgPSB0aGlzO1xyXG5cclxuICAgICAgbGV0IHByZWZpeDogc3RyaW5nID0gXCIrXCIucmVwZWF0KF9sZXZlbCk7XHJcblxyXG4gICAgICBsZXQgb3V0cHV0OiBzdHJpbmcgPSBwcmVmaXggKyBcIiBcIiArIF9ub2RlLm5hbWUgKyBcIiB8IFwiO1xyXG4gICAgICBmb3IgKGxldCB0eXBlIGluIF9ub2RlLmNvbXBvbmVudHMpXHJcbiAgICAgICAgb3V0cHV0ICs9IF9ub2RlLmNvbXBvbmVudHNbdHlwZV0ubGVuZ3RoICsgXCIgXCIgKyB0eXBlLnNwbGl0KFwiQ29tcG9uZW50XCIpLnBvcCgpICsgXCIsIFwiO1xyXG4gICAgICBvdXRwdXQgPSBvdXRwdXQuc2xpY2UoMCwgLTIpICsgXCI8L2JyPlwiO1xyXG4gICAgICBmb3IgKGxldCBjaGlsZCBvZiBfbm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgIG91dHB1dCArPSB0aGlzLnRvSGllcmFyY2h5U3RyaW5nKGNoaWxkLCBfbGV2ZWwgKyAxKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vICNyZWdpb24gRXZlbnRzXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgdG8gdGhlIG5vZGUuIFRoZSBnaXZlbiBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIHdoZW4gYSBtYXRjaGluZyBldmVudCBpcyBwYXNzZWQgdG8gdGhlIG5vZGUuXHJcbiAgICAgKiBEZXZpYXRpbmcgZnJvbSB0aGUgc3RhbmRhcmQgRXZlbnRUYXJnZXQsIGhlcmUgdGhlIF9oYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbiBhbmQgX2NhcHR1cmUgaXMgdGhlIG9ubHkgb3B0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lcihfdHlwZTogRVZFTlQgfCBzdHJpbmcsIF9oYW5kbGVyOiBFdmVudExpc3RlbmVyVW5pZmllZCwgX2NhcHR1cmU6IGJvb2xlYW4gLyp8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zKi8gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICBsZXQgbGlzdExpc3RlbmVyczogTWFwRXZlbnRUeXBlVG9MaXN0ZW5lciA9IF9jYXB0dXJlID8gdGhpcy5jYXB0dXJlcyA6IHRoaXMubGlzdGVuZXJzO1xyXG4gICAgICBpZiAoIWxpc3RMaXN0ZW5lcnNbX3R5cGVdKVxyXG4gICAgICAgIGxpc3RMaXN0ZW5lcnNbX3R5cGVdID0gW107XHJcbiAgICAgIGxpc3RMaXN0ZW5lcnNbX3R5cGVdLnB1c2goX2hhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIGFuIGV2ZW50IGxpc3RlbmVyIGZyb20gdGhlIG5vZGUuIFRoZSBzaWduYXR1cmUgbXVzdCBtYXRjaCB0aGUgb25lIHVzZWQgd2l0aCBhZGRFdmVudExpc3RlbmVyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZW1vdmVFdmVudExpc3RlbmVyKF90eXBlOiBFVkVOVCB8IHN0cmluZywgX2hhbmRsZXI6IEV2ZW50TGlzdGVuZXJVbmlmaWVkLCBfY2FwdHVyZTogYm9vbGVhbiAvKnwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMqLyA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICAgIGxldCBsaXN0ZW5lcnNGb3JUeXBlOiBFdmVudExpc3RlbmVyVW5pZmllZFtdID0gX2NhcHR1cmUgPyB0aGlzLmNhcHR1cmVzW190eXBlXSA6IHRoaXMubGlzdGVuZXJzW190eXBlXTtcclxuICAgICAgaWYgKGxpc3RlbmVyc0ZvclR5cGUpXHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gbGlzdGVuZXJzRm9yVHlwZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgIGlmIChsaXN0ZW5lcnNGb3JUeXBlW2ldID09IF9oYW5kbGVyKVxyXG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlLnNwbGljZShpLCAxKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRGlzcGF0Y2hlcyBhIHN5bnRoZXRpYyBldmVudCB0byB0YXJnZXQuIFRoaXMgaW1wbGVtZW50YXRpb24gYWx3YXlzIHJldHVybnMgdHJ1ZSAoc3RhbmRhcmQ6IHJldHVybiB0cnVlIG9ubHkgaWYgZWl0aGVyIGV2ZW50J3MgY2FuY2VsYWJsZSBhdHRyaWJ1dGUgdmFsdWUgaXMgZmFsc2Ugb3IgaXRzIHByZXZlbnREZWZhdWx0KCkgbWV0aG9kIHdhcyBub3QgaW52b2tlZClcclxuICAgICAqIFRoZSBldmVudCB0cmF2ZWxzIGludG8gdGhlIGhpZXJhcmNoeSB0byB0aGlzIG5vZGUgZGlzcGF0Y2hpbmcgdGhlIGV2ZW50LCBpbnZva2luZyBtYXRjaGluZyBoYW5kbGVycyBvZiB0aGUgbm9kZXMgYW5jZXN0b3JzIGxpc3RlbmluZyB0byB0aGUgY2FwdHVyZSBwaGFzZSwgXHJcbiAgICAgKiB0aGFuIHRoZSBtYXRjaGluZyBoYW5kbGVyIG9mIHRoZSB0YXJnZXQgbm9kZSBpbiB0aGUgdGFyZ2V0IHBoYXNlLCBhbmQgYmFjayBvdXQgb2YgdGhlIGhpZXJhcmNoeSBpbiB0aGUgYnViYmxpbmcgcGhhc2UsIGludm9raW5nIGFwcHJvcHJpYXRlIGhhbmRsZXJzIG9mIHRoZSBhbnZlc3RvcnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRpc3BhdGNoRXZlbnQoX2V2ZW50OiBFdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICBsZXQgYW5jZXN0b3JzOiBOb2RlW10gPSBbXTtcclxuICAgICAgbGV0IHVwY29taW5nOiBOb2RlID0gdGhpcztcclxuICAgICAgLy8gb3ZlcndyaXRlIGV2ZW50IHRhcmdldFxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2V2ZW50LCBcInRhcmdldFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogdGhpcyB9KTtcclxuICAgICAgLy8gVE9ETzogY29uc2lkZXIgdXNpbmcgUmVmbGVjdCBpbnN0ZWFkIG9mIE9iamVjdCB0aHJvdWdob3V0LiBTZWUgYWxzbyBSZW5kZXIgYW5kIE11dGFibGUuLi5cclxuICAgICAgd2hpbGUgKHVwY29taW5nLnBhcmVudClcclxuICAgICAgICBhbmNlc3RvcnMucHVzaCh1cGNvbWluZyA9IHVwY29taW5nLnBhcmVudCk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwicGF0aFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogbmV3IEFycmF5PE5vZGU+KHRoaXMsIC4uLmFuY2VzdG9ycykgfSk7XHJcblxyXG4gICAgICAvLyBjYXB0dXJlIHBoYXNlXHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiZXZlbnRQaGFzZVwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogRXZlbnQuQ0FQVFVSSU5HX1BIQVNFIH0pO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSBhbmNlc3RvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICBsZXQgYW5jZXN0b3I6IE5vZGUgPSBhbmNlc3RvcnNbaV07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9ldmVudCwgXCJjdXJyZW50VGFyZ2V0XCIsIHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiBhbmNlc3RvciB9KTtcclxuICAgICAgICB0aGlzLmNhbGxMaXN0ZW5lcnMoYW5jZXN0b3IuY2FwdHVyZXNbX2V2ZW50LnR5cGVdLCBfZXZlbnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyB0YXJnZXQgcGhhc2VcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9ldmVudCwgXCJldmVudFBoYXNlXCIsIHsgd3JpdGFibGU6IHRydWUsIHZhbHVlOiBFdmVudC5BVF9UQVJHRVQgfSk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiY3VycmVudFRhcmdldFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogdGhpcyB9KTtcclxuICAgICAgdGhpcy5jYWxsTGlzdGVuZXJzKHRoaXMuY2FwdHVyZXNbX2V2ZW50LnR5cGVdLCBfZXZlbnQpO1xyXG4gICAgICB0aGlzLmNhbGxMaXN0ZW5lcnModGhpcy5saXN0ZW5lcnNbX2V2ZW50LnR5cGVdLCBfZXZlbnQpO1xyXG5cclxuICAgICAgaWYgKCFfZXZlbnQuYnViYmxlcylcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgIC8vIGJ1YmJsZSBwaGFzZVxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2V2ZW50LCBcImV2ZW50UGhhc2VcIiwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IEV2ZW50LkJVQkJMSU5HX1BIQVNFIH0pO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgYW5jZXN0b3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGFuY2VzdG9yOiBOb2RlID0gYW5jZXN0b3JzW2ldO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiY3VycmVudFRhcmdldFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogYW5jZXN0b3IgfSk7XHJcbiAgICAgICAgdGhpcy5jYWxsTGlzdGVuZXJzKGFuY2VzdG9yLmxpc3RlbmVyc1tfZXZlbnQudHlwZV0sIF9ldmVudCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7IC8vVE9ETzogcmV0dXJuIGEgbWVhbmluZ2Z1bCB2YWx1ZSwgc2VlIGRvY3VtZW50YXRpb24gb2YgZGlzcGF0Y2ggZXZlbnRcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRGlzcGF0Y2hlcyBhIHN5bnRoZXRpYyBldmVudCB0byB0YXJnZXQgd2l0aG91dCB0cmF2ZWxsaW5nIHRocm91Z2ggdGhlIGdyYXBoIGhpZXJhcmNoeSBuZWl0aGVyIGR1cmluZyBjYXB0dXJlIG5vciBidWJibGluZyBwaGFzZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGlzcGF0Y2hFdmVudFRvVGFyZ2V0T25seShfZXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiZXZlbnRQaGFzZVwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogRXZlbnQuQVRfVEFSR0VUIH0pO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2V2ZW50LCBcImN1cnJlbnRUYXJnZXRcIiwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHRoaXMgfSk7XHJcbiAgICAgIHRoaXMuY2FsbExpc3RlbmVycyh0aGlzLmxpc3RlbmVyc1tfZXZlbnQudHlwZV0sIF9ldmVudCk7IC8vIFRPRE86IGV4YW1pbmUgaWYgdGhpcyBzaG91bGQgZ28gdG8gdGhlIGNhcHR1cmVzIGluc3RlYWQgb2YgdGhlIGxpc3RlbmVyc1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQnJvYWRjYXN0cyBhIHN5bnRoZXRpYyBldmVudCB0byB0aGlzIG5vZGUgYW5kIGZyb20gdGhlcmUgdG8gYWxsIG5vZGVzIGRlZXBlciBpbiB0aGUgaGllcmFyY2h5LFxyXG4gICAgICogaW52b2tpbmcgbWF0Y2hpbmcgaGFuZGxlcnMgb2YgdGhlIG5vZGVzIGxpc3RlbmluZyB0byB0aGUgY2FwdHVyZSBwaGFzZS4gV2F0Y2ggcGVyZm9ybWFuY2Ugd2hlbiB0aGVyZSBhcmUgbWFueSBub2RlcyBpbnZvbHZlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYnJvYWRjYXN0RXZlbnQoX2V2ZW50OiBFdmVudCk6IHZvaWQge1xyXG4gICAgICAvLyBvdmVyd3JpdGUgZXZlbnQgdGFyZ2V0IGFuZCBwaGFzZVxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2V2ZW50LCBcImV2ZW50UGhhc2VcIiwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IEV2ZW50LkNBUFRVUklOR19QSEFTRSB9KTtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9ldmVudCwgXCJ0YXJnZXRcIiwgeyB3cml0YWJsZTogdHJ1ZSwgdmFsdWU6IHRoaXMgfSk7XHJcbiAgICAgIHRoaXMuYnJvYWRjYXN0RXZlbnRSZWN1cnNpdmUoX2V2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJyb2FkY2FzdEV2ZW50UmVjdXJzaXZlKF9ldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgLy8gY2FwdHVyZSBwaGFzZSBvbmx5XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfZXZlbnQsIFwiY3VycmVudFRhcmdldFwiLCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZTogdGhpcyB9KTtcclxuICAgICAgbGV0IGNhcHR1cmVzOiBFdmVudExpc3RlbmVyVW5pZmllZFtdID0gdGhpcy5jYXB0dXJlc1tfZXZlbnQudHlwZV0gfHwgW107XHJcbiAgICAgIGZvciAobGV0IGhhbmRsZXIgb2YgY2FwdHVyZXMpXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGhhbmRsZXIoX2V2ZW50KTtcclxuICAgICAgLy8gYXBwZWFycyB0byBiZSBzbG93ZXIsIGFzdG9uaXNoaW5nbHkuLi5cclxuICAgICAgLy8gY2FwdHVyZXMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcjogRnVuY3Rpb24pOiB2b2lkIHtcclxuICAgICAgLy8gICAgIGhhbmRsZXIoX2V2ZW50KTtcclxuICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAvLyBzYW1lIGZvciBjaGlsZHJlblxyXG4gICAgICBmb3IgKGxldCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgY2hpbGQuYnJvYWRjYXN0RXZlbnRSZWN1cnNpdmUoX2V2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FsbExpc3RlbmVycyhfbGlzdGVuZXJzOiBFdmVudExpc3RlbmVyVW5pZmllZFtdLCBfZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICAgIGlmIChfbGlzdGVuZXJzPy5sZW5ndGggPiAwKVxyXG4gICAgICAgIGZvciAobGV0IGhhbmRsZXIgb2YgX2xpc3RlbmVycylcclxuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgIGhhbmRsZXIoX2V2ZW50KTtcclxuICAgIH1cclxuICAgIC8vICNlbmRyZWdpb25cclxuICB9XHJcbn0iLCIvLyAvIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1RyYW5zZmVyL1NlcmlhbGl6ZXIudHNcIi8+XHJcbi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVHJhbnNmZXIvTXV0YWJsZS50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqIFxyXG4gICAqIFN1cGVyY2xhc3MgZm9yIGFsbCB7QGxpbmsgQ29tcG9uZW50fXMgdGhhdCBjYW4gYmUgYXR0YWNoZWQgdG8ge0BsaW5rIE5vZGV9cy5cclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMCB8IEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5ICBcclxuICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vSmlya2FEZWxsT3JvL0ZVREdFL3dpa2kvQ29tcG9uZW50XHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbXBvbmVudCBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xyXG4gICAgLyoqIHN1YmNsYXNzZXMgZ2V0IGEgaVN1YmNsYXNzIG51bWJlciBmb3IgaWRlbnRpZmljYXRpb24gKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXI7XHJcbiAgICAvKiogcmVmZXJzIGJhY2sgdG8gdGhpcyBjbGFzcyBmcm9tIGFueSBzdWJjbGFzcyBlLmcuIGluIG9yZGVyIHRvIGZpbmQgY29tcGF0aWJsZSBvdGhlciByZXNvdXJjZXMqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBiYXNlQ2xhc3M6IHR5cGVvZiBDb21wb25lbnQgPSBDb21wb25lbnQ7XHJcbiAgICAvKiogbGlzdCBvZiBhbGwgdGhlIHN1YmNsYXNzZXMgZGVyaXZlZCBmcm9tIHRoaXMgY2xhc3MsIGlmIHRoZXkgcmVnaXN0ZXJlZCBwcm9wZXJseSovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHN1YmNsYXNzZXM6IHR5cGVvZiBDb21wb25lbnRbXSA9IFtdO1xyXG5cclxuICAgICNub2RlOiBOb2RlIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcm90ZWN0ZWQgc2luZ2xldG9uOiBib29sZWFuID0gdHJ1ZTtcclxuICAgIHByb3RlY3RlZCBhY3RpdmU6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk1VVEFURSwgKF9ldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgICAgICBpZiAodGhpcy4jbm9kZSkge1xyXG4gICAgICAgICAgLy8gVE9ETzogZmluZCB0aGUgbnVtYmVyIG9mIHRoZSBjb21wb25lbnQgaW4gdGhlIGFycmF5IGlmIG5vdCBzaW5nbGV0b25cclxuICAgICAgICAgIF9ldmVudC5kZXRhaWwuY29tcG9uZW50ID0gdGhpcztcclxuICAgICAgICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgICAgICAgX2V2ZW50LmRldGFpbC5jb21wb25lbnRJbmRleCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnRzKHRoaXMuY29uc3RydWN0b3IpLmluZGV4T2YodGhpcyk7XHJcbiAgICAgICAgICB0aGlzLiNub2RlLmRpc3BhdGNoRXZlbnQoX2V2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVnaXN0ZXJTdWJjbGFzcyhfc3ViY2xhc3M6IHR5cGVvZiBDb21wb25lbnQpOiBudW1iZXIgeyByZXR1cm4gQ29tcG9uZW50LnN1YmNsYXNzZXMucHVzaChfc3ViY2xhc3MpIC0gMTsgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJcyB0cnVlLCB3aGVuIG9ubHkgb25lIGluc3RhbmNlIG9mIHRoZSBjb21wb25lbnQgY2xhc3MgY2FuIGJlIGF0dGFjaGVkIHRvIGEgbm9kZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGlzU2luZ2xldG9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5zaW5nbGV0b247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIG5vZGUsIHRoaXMgY29tcG9uZW50IGlzIGN1cnJlbnRseSBhdHRhY2hlZCB0b1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG5vZGUoKTogTm9kZSB8IG51bGwge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbm9kZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWN0aXZhdGUoX29uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuYWN0aXZlID0gX29uO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KF9vbiA/IEVWRU5ULkNPTVBPTkVOVF9BQ1RJVkFURSA6IEVWRU5ULkNPTVBPTkVOVF9ERUFDVElWQVRFKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmllcyB0byBhdHRhY2ggdGhlIGNvbXBvbmVudCB0byB0aGUgZ2l2ZW4gbm9kZSwgcmVtb3ZpbmcgaXQgZnJvbSB0aGUgbm9kZSBpdCB3YXMgYXR0YWNoZWQgdG8gaWYgYXBwbGljYWJsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXR0YWNoVG9Ob2RlKF9jb250YWluZXI6IE5vZGUgfCBudWxsKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLiNub2RlID09IF9jb250YWluZXIpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICBsZXQgcHJldmlvdXNDb250YWluZXI6IE5vZGUgPSB0aGlzLiNub2RlO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGlmIChwcmV2aW91c0NvbnRhaW5lcilcclxuICAgICAgICAgIHByZXZpb3VzQ29udGFpbmVyLnJlbW92ZUNvbXBvbmVudCh0aGlzKTtcclxuICAgICAgICB0aGlzLiNub2RlID0gX2NvbnRhaW5lcjtcclxuICAgICAgICBpZiAodGhpcy4jbm9kZSlcclxuICAgICAgICAgIHRoaXMuI25vZGUuYWRkQ29tcG9uZW50KHRoaXMpO1xyXG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgICB0aGlzLiNub2RlID0gcHJldmlvdXNDb250YWluZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIGFjdGl2ZTogdGhpcy5hY3RpdmVcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLmFjdGl2YXRlKF9zZXJpYWxpemF0aW9uLmFjdGl2ZSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IsIF9zZWxlY3Rpb246IHN0cmluZ1tdID0gbnVsbCwgX2Rpc3BhdGNoTXV0YXRlOiBib29sZWFuID0gdHJ1ZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5tdXRhdGUoX211dGF0b3IsIF9zZWxlY3Rpb24sIF9kaXNwYXRjaE11dGF0ZSk7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLmFjdGl2ZSkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy5hY3RpdmF0ZShfbXV0YXRvci5hY3RpdmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5zaW5nbGV0b247XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5tdHhXb3JsZDtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFdyYXBzIGEgcmVndWxhciBKYXZhc2NyaXB0IEFycmF5IGFuZCBvZmZlcnMgdmVyeSBsaW1pdGVkIGZ1bmN0aW9uYWxpdHkgZ2VhcmVkIHNvbGVseSB0b3dhcmRzIGF2b2lkaW5nIGdhcmJhZ2UgY29sbGV0aW9uLlxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vSmlya2FEZWxsT3JvL0ZVREdFL3dpa2kvUmVjeWNsZXJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUmVjeWNhYmxlQXJyYXk8VD4ge1xyXG4gICAgI2xlbmd0aDogbnVtYmVyID0gMDtcclxuICAgICNhcnJheTogQXJyYXk8VD4gPSBuZXcgQXJyYXk8VD4oKTtcclxuICAgIC8vICN0eXBlOiBuZXcgKCkgPT4gVDtcclxuXHJcbiAgICAvLyAvL3RzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1hbnlcclxuICAgIC8vIGNvbnN0cnVjdG9yKF90eXBlOiBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUKSB7XHJcbiAgICAvLyAgIHRoaXMuI3R5cGUgPSBfdHlwZTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgdmlydHVhbCBsZW5ndGggb2YgdGhlIGFycmF5IHRvIHplcm8gYnV0IGtlZXBzIHRoZSBlbnRyaWVzIGJleW9uZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNsZW5ndGggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWN5Y2xlKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHB1c2goX2VudHJ5OiBUKTogbnVtYmVyIHtcclxuICAgICAgdGhpcy4jYXJyYXlbdGhpcy4jbGVuZ3RoXSA9IF9lbnRyeTtcclxuICAgICAgdGhpcy4jbGVuZ3RoKys7XHJcbiAgICAgIHJldHVybiB0aGlzLiNsZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBvcCgpOiBUIHtcclxuICAgICAgdGhpcy4jbGVuZ3RoLS07XHJcbiAgICAgIHJldHVybiB0aGlzLiNhcnJheVt0aGlzLiNsZW5ndGhdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjeWNsZXMgdGhlIG9iamVjdCBmb2xsb3dpbmcgdGhlIGxhc3QgaW4gdGhlIGFycmF5IGFuZCBpbmNyZWFzZXMgdGhlIGFycmF5IGxlbmd0aFxyXG4gICAgICogSXQgbXVzdCBiZSBhc3N1cmVkLCB0aGF0IG5vbmUgb2YgdGhlIG9iamVjdHMgaW4gdGhlIGFycmF5IGlzIHN0aWxsIGluIGFueSB1c2Ugb2YgYW55IGtpbmQhXHJcbiAgICAgKi9cclxuICAgIC8vIHB1YmxpYyByZWN5Y2xlKCk6IFQge1xyXG4gICAgLy8gICBpZiAodGhpcy4jbGVuZ3RoIDwgdGhpcy4jYXJyYXkubGVuZ3RoKSB7XHJcbiAgICAvLyAgICAgdGhpcy4jbGVuZ3RoKys7XHJcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMuI2FycmF5W3RoaXMuI2xlbmd0aCsrXTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICB0aGlzLiNhcnJheS5wdXNoKFJlY3ljbGVyLmdldCh0aGlzLiN0eXBlKSk7XHJcbiAgICAvLyAgIHJldHVybiB0aGlzLiNhcnJheVt0aGlzLiNsZW5ndGgrK107XHJcbiAgICAvLyB9XHJcblxyXG4gICAgcHVibGljICpbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFQ+IHtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMuI2xlbmd0aDsgaSsrKVxyXG4gICAgICAgIHlpZWxkIHRoaXMuI2FycmF5W2ldO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTb3J0ZWQoX3NvcnQ6IChhOiBULCBiOiBUKSA9PiBudW1iZXIpOiBUW10ge1xyXG4gICAgICBsZXQgc29ydGVkOiBUW10gPSB0aGlzLiNhcnJheS5zbGljZSgwLCB0aGlzLiNsZW5ndGgpO1xyXG4gICAgICBzb3J0ZWQuc29ydChfc29ydCk7XHJcbiAgICAgIHJldHVybiBzb3J0ZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLy9CYXNlY2xhc3MgZm9yIHtAbGluayBSZW5kZXJJbmplY3RvckNvYXR9IGFuZCB7QGxpbmsgUmVuZGVySW5qZWN0b3JUZXh0dXJlXV1cclxuICBleHBvcnQgY2xhc3MgUmVuZGVySW5qZWN0b3Ige1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgaW5qZWN0KF9jb25zdHJ1Y3RvcjogRnVuY3Rpb24sIF9pbmplY3RvcjogdHlwZW9mIFJlbmRlckluamVjdG9yKTogdm9pZCB7XHJcbiAgICAgIGxldCBpbmplY3Rpb246IEZ1bmN0aW9uID0gUmVmbGVjdC5nZXQoX2luamVjdG9yLCBcImluamVjdFwiICsgX2NvbnN0cnVjdG9yLm5hbWUpO1xyXG4gICAgICBpZiAoIWluamVjdGlvbikge1xyXG4gICAgICAgIERlYnVnLmVycm9yKFwiTm8gaW5qZWN0aW9uIGRlY29yYXRvciBkZWZpbmVkIGZvciBcIiArIF9jb25zdHJ1Y3Rvci5uYW1lKTtcclxuICAgICAgfVxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJ1c2VSZW5kZXJEYXRhXCIsIHtcclxuICAgICAgICB2YWx1ZTogaW5qZWN0aW9uXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8vZ2l2ZXMgV2ViR0wgQnVmZmVyIHRoZSBkYXRhIGZyb20gdGhlIHtAbGluayBTaGFkZXJ9XHJcbiAgZXhwb3J0IGNsYXNzIFJlbmRlckluamVjdG9yU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVjb3JhdGUoX2NvbnN0cnVjdG9yOiBGdW5jdGlvbik6IHZvaWQge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLCBcInVzZVByb2dyYW1cIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvclNoYWRlci51c2VQcm9ncmFtXHJcbiAgICAgIH0pO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLCBcImRlbGV0ZVByb2dyYW1cIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvclNoYWRlci5kZWxldGVQcm9ncmFtXHJcbiAgICAgIH0pO1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLCBcImNyZWF0ZVByb2dyYW1cIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvclNoYWRlci5jcmVhdGVQcm9ncmFtXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgdXNlUHJvZ3JhbSh0aGlzOiB0eXBlb2YgU2hhZGVyKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5wcm9ncmFtKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlUHJvZ3JhbSgpO1xyXG5cclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIGNyYzMudXNlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVsZXRlUHJvZ3JhbSh0aGlzOiB0eXBlb2YgU2hhZGVyKTogdm9pZCB7XHJcbiAgICAgIGxldCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICBpZiAodGhpcy5wcm9ncmFtKSB7XHJcbiAgICAgICAgY3JjMy5kZWxldGVQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMuYXR0cmlidXRlcztcclxuICAgICAgICBkZWxldGUgdGhpcy51bmlmb3JtcztcclxuICAgICAgICBkZWxldGUgdGhpcy5wcm9ncmFtO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBjcmVhdGVQcm9ncmFtKHRoaXM6IHR5cGVvZiBTaGFkZXIpOiB2b2lkIHtcclxuICAgICAgRGVidWcuZnVkZ2UoXCJDcmVhdGUgc2hhZGVyIHByb2dyYW1cIiwgdGhpcy5uYW1lKTtcclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIGxldCBwcm9ncmFtOiBXZWJHTFByb2dyYW0gPSBjcmMzLmNyZWF0ZVByb2dyYW0oKTtcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IHNoZFZlcnRleDogV2ViR0xTaGFkZXIgPSBjb21waWxlU2hhZGVyKHRoaXMuZ2V0VmVydGV4U2hhZGVyU291cmNlKCksIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVkVSVEVYX1NIQURFUik7XHJcbiAgICAgICAgbGV0IHNoZEZyYWdtZW50OiBXZWJHTFNoYWRlciA9IGNvbXBpbGVTaGFkZXIodGhpcy5nZXRGcmFnbWVudFNoYWRlclNvdXJjZSgpLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZSQUdNRU5UX1NIQURFUik7XHJcblxyXG4gICAgICAgIGNyYzMuYXR0YWNoU2hhZGVyKHByb2dyYW0sIFJlbmRlcldlYkdMLmFzc2VydDxXZWJHTFNoYWRlcj4oc2hkVmVydGV4KSk7XHJcbiAgICAgICAgY3JjMy5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgUmVuZGVyV2ViR0wuYXNzZXJ0PFdlYkdMU2hhZGVyPihzaGRGcmFnbWVudCkpO1xyXG4gICAgICAgIGNyYzMubGlua1Byb2dyYW0ocHJvZ3JhbSk7XHJcblxyXG4gICAgICAgIGxldCBlcnJvcjogc3RyaW5nID0gUmVuZGVyV2ViR0wuYXNzZXJ0PHN0cmluZz4oY3JjMy5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKSk7XHJcbiAgICAgICAgaWYgKGVycm9yICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBsaW5raW5nIFNoYWRlcjogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGRldGVjdEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICB0aGlzLnVuaWZvcm1zID0gZGV0ZWN0VW5pZm9ybXMoKTtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLmRlZmluZS5pbmNsdWRlcyhcIkxJR0hUXCIpKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAoIVJlbmRlcldlYkdMLnVib0xpZ2h0cylcclxuICAgICAgICAgIFJlbmRlcldlYkdMLnVib0xpZ2h0cyA9IGNyZWF0ZVVCT0xpZ2h0cygpO1xyXG4gICAgICAgIGlmICghUmVuZGVyV2ViR0wudWJvTGlnaHRzVmFyaWFibGVPZmZzZXRzKVxyXG4gICAgICAgICAgUmVuZGVyV2ViR0wudWJvTGlnaHRzVmFyaWFibGVPZmZzZXRzID0gZGV0ZWN0VUJPTGlnaHRzVmFyaWFibGVPZmZzZXRzKCk7XHJcblxyXG4gICAgICAgIC8vIGJpbmQgbGlnaHRzIFVCTyB0byBzaGFkZXIgcHJvZ3JhbVxyXG4gICAgICAgIGNvbnN0IGJsb2NrSW5kZXg6IG51bWJlciA9IGNyYzMuZ2V0VW5pZm9ybUJsb2NrSW5kZXgocHJvZ3JhbSwgVU5JRk9STV9CTE9DS1MuTElHSFRTLk5BTUUpO1xyXG4gICAgICAgIGNyYzMudW5pZm9ybUJsb2NrQmluZGluZyhwcm9ncmFtLCBibG9ja0luZGV4LCBVTklGT1JNX0JMT0NLUy5MSUdIVFMuQklORElORyk7XHJcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgICAgIERlYnVnLmVycm9yKF9lcnJvcik7XHJcbiAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNvbXBpbGVTaGFkZXIoX3NoYWRlckNvZGU6IHN0cmluZywgX3NoYWRlclR5cGU6IEdMZW51bSk6IFdlYkdMU2hhZGVyIHwgbnVsbCB7XHJcbiAgICAgICAgbGV0IHdlYkdMU2hhZGVyOiBXZWJHTFNoYWRlciA9IGNyYzMuY3JlYXRlU2hhZGVyKF9zaGFkZXJUeXBlKTtcclxuICAgICAgICBjcmMzLnNoYWRlclNvdXJjZSh3ZWJHTFNoYWRlciwgX3NoYWRlckNvZGUpO1xyXG4gICAgICAgIGNyYzMuY29tcGlsZVNoYWRlcih3ZWJHTFNoYWRlcik7XHJcbiAgICAgICAgbGV0IGVycm9yOiBzdHJpbmcgPSBSZW5kZXJXZWJHTC5hc3NlcnQ8c3RyaW5nPihjcmMzLmdldFNoYWRlckluZm9Mb2cod2ViR0xTaGFkZXIpKTtcclxuICAgICAgICBpZiAoZXJyb3IgIT09IFwiXCIpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKF9zaGFkZXJDb2RlKTtcclxuXHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBjb21waWxpbmcgc2hhZGVyOiBcIiArIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGFueSBjb21waWxhdGlvbiBlcnJvcnMuXHJcbiAgICAgICAgaWYgKCFjcmMzLmdldFNoYWRlclBhcmFtZXRlcih3ZWJHTFNoYWRlciwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DT01QSUxFX1NUQVRVUykpIHtcclxuICAgICAgICAgIGFsZXJ0KGNyYzMuZ2V0U2hhZGVySW5mb0xvZyh3ZWJHTFNoYWRlcikpO1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB3ZWJHTFNoYWRlcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZGV0ZWN0QXR0cmlidXRlcygpOiB7IFtuYW1lOiBzdHJpbmddOiBudW1iZXIgfSB7XHJcbiAgICAgICAgbGV0IGRldGVjdGVkQXR0cmlidXRlczogeyBbbmFtZTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcclxuICAgICAgICBsZXQgYXR0cmlidXRlQ291bnQ6IG51bWJlciA9IGNyYzMuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkFDVElWRV9BVFRSSUJVVEVTKTtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgYXR0cmlidXRlQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgbGV0IGF0dHJpYnV0ZUluZm86IFdlYkdMQWN0aXZlSW5mbyA9IFJlbmRlcldlYkdMLmFzc2VydDxXZWJHTEFjdGl2ZUluZm8+KGNyYzMuZ2V0QWN0aXZlQXR0cmliKHByb2dyYW0sIGkpKTtcclxuICAgICAgICAgIGlmICghYXR0cmlidXRlSW5mbykge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBkZXRlY3RlZEF0dHJpYnV0ZXNbYXR0cmlidXRlSW5mby5uYW1lXSA9IGNyYzMuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgYXR0cmlidXRlSW5mby5uYW1lKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZXRlY3RlZEF0dHJpYnV0ZXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGRldGVjdFVuaWZvcm1zKCk6IHsgW25hbWU6IHN0cmluZ106IFdlYkdMVW5pZm9ybUxvY2F0aW9uIH0ge1xyXG4gICAgICAgIGxldCBkZXRlY3RlZFVuaWZvcm1zOiB7IFtuYW1lOiBzdHJpbmddOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiB9ID0ge307XHJcbiAgICAgICAgbGV0IHVuaWZvcm1Db3VudDogbnVtYmVyID0gY3JjMy5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQUNUSVZFX1VOSUZPUk1TKTtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdW5pZm9ybUNvdW50OyBpKyspIHtcclxuICAgICAgICAgIGxldCBpbmZvOiBXZWJHTEFjdGl2ZUluZm8gPSBSZW5kZXJXZWJHTC5hc3NlcnQ8V2ViR0xBY3RpdmVJbmZvPihjcmMzLmdldEFjdGl2ZVVuaWZvcm0ocHJvZ3JhbSwgaSkpO1xyXG4gICAgICAgICAgaWYgKCFpbmZvKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgbGV0IGxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IGNyYzMuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIGluZm8ubmFtZSk7XHJcbiAgICAgICAgICBpZiAobG9jYXRpb24pXHJcbiAgICAgICAgICAgIGRldGVjdGVkVW5pZm9ybXNbaW5mby5uYW1lXSA9IFJlbmRlcldlYkdMLmFzc2VydDxXZWJHTFVuaWZvcm1Mb2NhdGlvbj4obG9jYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGV0ZWN0ZWRVbmlmb3JtcztcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gY3JlYXRlVUJPTGlnaHRzKCk6IFdlYkdMQnVmZmVyIHtcclxuICAgICAgICBjb25zdCBibG9ja0luZGV4OiBudW1iZXIgPSBjcmMzLmdldFVuaWZvcm1CbG9ja0luZGV4KHByb2dyYW0sIFVOSUZPUk1fQkxPQ0tTLkxJR0hUUy5OQU1FKTtcclxuICAgICAgICBjb25zdCBibG9ja1NpemU6IG51bWJlciA9IGNyYzMuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKFxyXG4gICAgICAgICAgcHJvZ3JhbSxcclxuICAgICAgICAgIGJsb2NrSW5kZXgsXHJcbiAgICAgICAgICBjcmMzLlVOSUZPUk1fQkxPQ0tfREFUQV9TSVpFXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCB1Ym86IFdlYkdMQnVmZmVyID0gY3JjMy5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICBjcmMzLmJpbmRCdWZmZXIoY3JjMy5VTklGT1JNX0JVRkZFUiwgdWJvKTtcclxuICAgICAgICBjcmMzLmJ1ZmZlckRhdGEoY3JjMy5VTklGT1JNX0JVRkZFUiwgYmxvY2tTaXplLCBjcmMzLkRZTkFNSUNfRFJBVyk7XHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyKGNyYzMuVU5JRk9STV9CVUZGRVIsIG51bGwpO1xyXG4gICAgICAgIGNyYzMuYmluZEJ1ZmZlckJhc2UoY3JjMy5VTklGT1JNX0JVRkZFUiwgVU5JRk9STV9CTE9DS1MuTElHSFRTLkJJTkRJTkcsIHVibyk7XHJcblxyXG4gICAgICAgIHJldHVybiB1Ym87XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGRldGVjdFVCT0xpZ2h0c1ZhcmlhYmxlT2Zmc2V0cygpOiB0eXBlb2YgUmVuZGVyV2ViR0wudWJvTGlnaHRzVmFyaWFibGVPZmZzZXRzIHtcclxuICAgICAgICBjb25zdCB1Ym9WYXJpYWJsZU5hbWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgIFwidV9uTGlnaHRzRGlyZWN0aW9uYWxcIixcclxuICAgICAgICAgIFwidV9uTGlnaHRzUG9pbnRcIixcclxuICAgICAgICAgIFwidV9uTGlnaHRzU3BvdFwiLFxyXG4gICAgICAgICAgXCJ1X2FtYmllbnQudmN0Q29sb3JcIixcclxuICAgICAgICAgIFwidV9kaXJlY3Rpb25hbFswXS52Y3RDb2xvclwiLFxyXG4gICAgICAgICAgXCJ1X3BvaW50WzBdLnZjdENvbG9yXCIsXHJcbiAgICAgICAgICBcInVfc3BvdFswXS52Y3RDb2xvclwiXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgY29uc3QgdWJvVmFyaWFibGVJbmRpY2VzOiBudW1iZXJbXSA9IDxudW1iZXJbXT5jcmMzLmdldFVuaWZvcm1JbmRpY2VzKFxyXG4gICAgICAgICAgcHJvZ3JhbSxcclxuICAgICAgICAgIHVib1ZhcmlhYmxlTmFtZXNcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCB1Ym9WYXJpYWJsZU9mZnNldHM6IG51bWJlcltdID0gY3JjMy5nZXRBY3RpdmVVbmlmb3JtcyhcclxuICAgICAgICAgIHByb2dyYW0sXHJcbiAgICAgICAgICB1Ym9WYXJpYWJsZUluZGljZXMsXHJcbiAgICAgICAgICBjcmMzLlVOSUZPUk1fT0ZGU0VUXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgdWJvVmFyaWFibGVOYW1lVG9PZmZzZXQ6IHR5cGVvZiBSZW5kZXJXZWJHTC51Ym9MaWdodHNWYXJpYWJsZU9mZnNldHMgPSB7fTtcclxuICAgICAgICB1Ym9WYXJpYWJsZU5hbWVzLmZvckVhY2goKF9uYW1lLCBfaW5kZXgpID0+IHVib1ZhcmlhYmxlTmFtZVRvT2Zmc2V0W19uYW1lXSA9IHVib1ZhcmlhYmxlT2Zmc2V0c1tfaW5kZXhdKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHVib1ZhcmlhYmxlTmFtZVRvT2Zmc2V0O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8vZ2l2ZXMgV2ViR0wgQnVmZmVyIHRoZSBkYXRhIGZyb20gdGhlIHtAbGluayBDb2F0fVxyXG4gIGV4cG9ydCBjbGFzcyBSZW5kZXJJbmplY3RvckNvYXQgZXh0ZW5kcyBSZW5kZXJJbmplY3RvciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlY29yYXRlKF9jb25zdHJ1Y3RvcjogRnVuY3Rpb24pOiB2b2lkIHtcclxuICAgICAgUmVuZGVySW5qZWN0b3IuaW5qZWN0KF9jb25zdHJ1Y3RvciwgUmVuZGVySW5qZWN0b3JDb2F0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGluamVjdENvYXRDb2xvcmVkKHRoaXM6IENvYXRDb2xvcmVkLCBfc2hhZGVyOiB0eXBlb2YgU2hhZGVyLCBfY21wTWF0ZXJpYWw6IENvbXBvbmVudE1hdGVyaWFsKTogdm9pZCB7XHJcbiAgICAgIGxldCB1bmlmb3JtOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IF9zaGFkZXIudW5pZm9ybXNbXCJ1X3ZjdENvbG9yXCJdO1xyXG4gICAgICBsZXQgY29sb3I6IENvbG9yID0gQ29sb3IuTVVMVElQTFkodGhpcy5jb2xvciwgX2NtcE1hdGVyaWFsLmNsclByaW1hcnkpO1xyXG4gICAgICBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCkudW5pZm9ybTRmdih1bmlmb3JtLCBjb2xvci5nZXRBcnJheSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGluamVjdENvYXRSZW1pc3NpdmUodGhpczogQ29hdFJlbWlzc2l2ZSwgX3NoYWRlcjogdHlwZW9mIFNoYWRlciwgX2NtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCk6IHZvaWQge1xyXG4gICAgICBSZW5kZXJJbmplY3RvckNvYXQuaW5qZWN0Q29hdENvbG9yZWQuY2FsbCh0aGlzLCBfc2hhZGVyLCBfY21wTWF0ZXJpYWwpO1xyXG4gICAgICBsZXQgdW5pZm9ybTogV2ViR0xVbmlmb3JtTG9jYXRpb247XHJcbiAgICAgIHVuaWZvcm0gPSBfc2hhZGVyLnVuaWZvcm1zW1widV9mU3BlY3VsYXJcIl07XHJcbiAgICAgIFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKS51bmlmb3JtMWYodW5pZm9ybSwgdGhpcy5zcGVjdWxhcik7XHJcbiAgICAgIHVuaWZvcm0gPSBfc2hhZGVyLnVuaWZvcm1zW1widV9mRGlmZnVzZVwiXTtcclxuICAgICAgUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpLnVuaWZvcm0xZih1bmlmb3JtLCB0aGlzLmRpZmZ1c2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgaW5qZWN0Q29hdFRleHR1cmVkKHRoaXM6IENvYXRUZXh0dXJlZCwgX3NoYWRlcjogdHlwZW9mIFNoYWRlciwgX2NtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCk6IHZvaWQge1xyXG4gICAgICBSZW5kZXJJbmplY3RvckNvYXQuaW5qZWN0Q29hdENvbG9yZWQuY2FsbCh0aGlzLCBfc2hhZGVyLCBfY21wTWF0ZXJpYWwpO1xyXG5cclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIHRoaXMudGV4dHVyZS51c2VSZW5kZXJEYXRhKCk7XHJcbiAgICAgIGNyYzMudW5pZm9ybTFpKF9zaGFkZXIudW5pZm9ybXNbXCJ1X3RleHR1cmVcIl0sIDApO1xyXG4gICAgICBjcmMzLnVuaWZvcm1NYXRyaXgzZnYoX3NoYWRlci51bmlmb3Jtc1tcInVfbXR4UGl2b3RcIl0sIGZhbHNlLCBfY21wTWF0ZXJpYWwubXR4UGl2b3QuZ2V0KCkpO1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBpbmplY3RDb2F0UmVtaXNzaXZlVGV4dHVyZWQodGhpczogQ29hdFJlbWlzc2l2ZVRleHR1cmVkLCBfc2hhZGVyOiB0eXBlb2YgU2hhZGVyLCBfY21wTWF0ZXJpYWw6IENvbXBvbmVudE1hdGVyaWFsKTogdm9pZCB7XHJcbiAgICAgIFJlbmRlckluamVjdG9yQ29hdC5pbmplY3RDb2F0UmVtaXNzaXZlLmNhbGwodGhpcywgX3NoYWRlciwgX2NtcE1hdGVyaWFsKTtcclxuXHJcbiAgICAgIGxldCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICB0aGlzLnRleHR1cmUudXNlUmVuZGVyRGF0YSgpO1xyXG4gICAgICBjcmMzLnVuaWZvcm0xaShfc2hhZGVyLnVuaWZvcm1zW1widV90ZXh0dXJlXCJdLCAwKTtcclxuICAgICAgY3JjMy51bmlmb3JtTWF0cml4M2Z2KF9zaGFkZXIudW5pZm9ybXNbXCJ1X210eFBpdm90XCJdLCBmYWxzZSwgX2NtcE1hdGVyaWFsLm10eFBpdm90LmdldCgpKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgY2xhc3MgUmVuZGVySW5qZWN0b3JNZXNoIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVjb3JhdGUoX2NvbnN0cnVjdG9yOiBGdW5jdGlvbik6IHZvaWQge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2NvbnN0cnVjdG9yLnByb3RvdHlwZSwgXCJ1c2VSZW5kZXJCdWZmZXJzXCIsIHtcclxuICAgICAgICB2YWx1ZTogUmVuZGVySW5qZWN0b3JNZXNoLnVzZVJlbmRlckJ1ZmZlcnNcclxuICAgICAgfSk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfY29uc3RydWN0b3IucHJvdG90eXBlLCBcImdldFJlbmRlckJ1ZmZlcnNcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3Rvck1lc2guZ2V0UmVuZGVyQnVmZmVyc1xyXG4gICAgICB9KTtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiZGVsZXRlUmVuZGVyQnVmZmVyc1wiLCB7XHJcbiAgICAgICAgdmFsdWU6IFJlbmRlckluamVjdG9yTWVzaC5kZWxldGVSZW5kZXJCdWZmZXJzXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgZ2V0UmVuZGVyQnVmZmVycyh0aGlzOiBNZXNoLCBfc2hhZGVyOiB0eXBlb2YgU2hhZGVyKTogUmVuZGVyQnVmZmVycyB7XHJcbiAgICAgIGxldCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG5cclxuICAgICAgdGhpcy5yZW5kZXJNZXNoID0gdGhpcy5yZW5kZXJNZXNoIHx8IG5ldyBSZW5kZXJNZXNoKHRoaXMpO1xyXG4gICAgICBpZiAoX3NoYWRlci5kZWZpbmUuaW5jbHVkZXMoXCJGTEFUXCIpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyTWVzaC5mbGF0ID09IG51bGwpXHJcbiAgICAgICAgICB0aGlzLnJlbmRlck1lc2guZmxhdCA9IHtcclxuICAgICAgICAgICAgdmVydGljZXM6IGNyZWF0ZUJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkFSUkFZX0JVRkZFUiwgdGhpcy5yZW5kZXJNZXNoLnZlcnRpY2VzRmxhdCksXHJcbiAgICAgICAgICAgIGluZGljZXM6IGNyZWF0ZUJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLnJlbmRlck1lc2guaW5kaWNlc0ZsYXQpLFxyXG4gICAgICAgICAgICBub3JtYWxzOiBjcmVhdGVCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIHRoaXMucmVuZGVyTWVzaC5ub3JtYWxzRmxhdCksXHJcbiAgICAgICAgICAgIHRleHR1cmVVVnM6IGNyZWF0ZUJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkFSUkFZX0JVRkZFUiwgdGhpcy5yZW5kZXJNZXNoLnRleHR1cmVVVnNGbGF0KSxcclxuICAgICAgICAgICAgbkluZGljZXM6IHRoaXMucmVuZGVyTWVzaC5pbmRpY2VzRmxhdC5sZW5ndGhcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTWVzaC5mbGF0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlck1lc2guc21vb3RoID09IG51bGwpXHJcbiAgICAgICAgICB0aGlzLnJlbmRlck1lc2guc21vb3RoID0ge1xyXG4gICAgICAgICAgICB2ZXJ0aWNlczogY3JlYXRlQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCB0aGlzLnJlbmRlck1lc2gudmVydGljZXMpLFxyXG4gICAgICAgICAgICBpbmRpY2VzOiBjcmVhdGVCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5yZW5kZXJNZXNoLmluZGljZXMpLFxyXG4gICAgICAgICAgICBub3JtYWxzOiBjcmVhdGVCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIHRoaXMucmVuZGVyTWVzaC5ub3JtYWxzVmVydGV4KSxcclxuICAgICAgICAgICAgdGV4dHVyZVVWczogY3JlYXRlQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCB0aGlzLnJlbmRlck1lc2gudGV4dHVyZVVWcyksXHJcbiAgICAgICAgICAgIG5JbmRpY2VzOiB0aGlzLnJlbmRlck1lc2guaW5kaWNlcy5sZW5ndGhcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTWVzaC5zbW9vdGg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlcihfdHlwZTogR0xlbnVtLCBfYXJyYXk6IEZsb2F0MzJBcnJheSB8IFVpbnQxNkFycmF5KTogV2ViR0xCdWZmZXIge1xyXG4gICAgICAgIGxldCBidWZmZXI6IFdlYkdMQnVmZmVyID0gUmVuZGVyV2ViR0wuYXNzZXJ0PFdlYkdMQnVmZmVyPihjcmMzLmNyZWF0ZUJ1ZmZlcigpKTtcclxuICAgICAgICBjcmMzLmJpbmRCdWZmZXIoX3R5cGUsIGJ1ZmZlcik7XHJcbiAgICAgICAgY3JjMy5idWZmZXJEYXRhKF90eXBlLCBfYXJyYXksIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuU1RBVElDX0RSQVcpO1xyXG4gICAgICAgIHJldHVybiBidWZmZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHVzZVJlbmRlckJ1ZmZlcnModGhpczogTWVzaCwgX3NoYWRlcjogdHlwZW9mIFNoYWRlciwgX210eE1lc2hUb1dvcmxkOiBNYXRyaXg0eDQsIF9tdHhNZXNoVG9WaWV3OiBNYXRyaXg0eDQsIF9pZD86IG51bWJlcik6IFJlbmRlckJ1ZmZlcnMge1xyXG4gICAgICBsZXQgcmVuZGVyQnVmZmVyczogUmVuZGVyQnVmZmVycyA9IHRoaXMuZ2V0UmVuZGVyQnVmZmVycyhfc2hhZGVyKTtcclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBzZXRCdWZmZXIoX25hbWU6IHN0cmluZywgX2J1ZmZlcjogV2ViR0xCdWZmZXIpOiB2b2lkIHtcclxuICAgICAgICBsZXQgYXR0cmlidXRlOiBudW1iZXIgPSBfc2hhZGVyLmF0dHJpYnV0ZXNbX25hbWVdO1xyXG4gICAgICAgIGlmIChhdHRyaWJ1dGUgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNyYzMuYmluZEJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkFSUkFZX0JVRkZFUiwgX2J1ZmZlcik7XHJcbiAgICAgICAgY3JjMy5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRyaWJ1dGUpO1xyXG4gICAgICAgIFJlbmRlcldlYkdMLnNldEF0dHJpYnV0ZVN0cnVjdHVyZShcclxuICAgICAgICAgIGF0dHJpYnV0ZSxcclxuICAgICAgICAgIHsgc2l6ZTogMywgZGF0YVR5cGU6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRkxPQVQsIG5vcm1hbGl6ZTogZmFsc2UsIHN0cmlkZTogMCwgb2Zmc2V0OiAwIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgdW5pZm9ybTogV2ViR0xVbmlmb3JtTG9jYXRpb247XHJcblxyXG4gICAgICB1bmlmb3JtID0gX3NoYWRlci51bmlmb3Jtc1tcInVfbXR4TWVzaFRvVmlld1wiXTtcclxuICAgICAgY3JjMy51bmlmb3JtTWF0cml4NGZ2KHVuaWZvcm0sIGZhbHNlLCBfbXR4TWVzaFRvVmlldy5nZXQoKSk7XHJcblxyXG4gICAgICB1bmlmb3JtID0gX3NoYWRlci51bmlmb3Jtc1tcInVfbXR4TWVzaFRvV29ybGRcIl07XHJcbiAgICAgIGlmICh1bmlmb3JtKVxyXG4gICAgICAgIGNyYzMudW5pZm9ybU1hdHJpeDRmdih1bmlmb3JtLCBmYWxzZSwgX210eE1lc2hUb1dvcmxkLmdldCgpKTtcclxuXHJcbiAgICAgIHVuaWZvcm0gPSBfc2hhZGVyLnVuaWZvcm1zW1widV9tdHhOb3JtYWxNZXNoVG9Xb3JsZFwiXTtcclxuICAgICAgaWYgKHVuaWZvcm0pIHtcclxuICAgICAgICBsZXQgbm9ybWFsTWF0cml4OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuVFJBTlNQT1NFKE1hdHJpeDR4NC5JTlZFUlNJT04oX210eE1lc2hUb1dvcmxkKSk7XHJcbiAgICAgICAgY3JjMy51bmlmb3JtTWF0cml4NGZ2KHVuaWZvcm0sIGZhbHNlLCBub3JtYWxNYXRyaXguZ2V0KCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRCdWZmZXIoXCJhX3ZjdFBvc2l0aW9uXCIsIHJlbmRlckJ1ZmZlcnMudmVydGljZXMpO1xyXG4gICAgICBzZXRCdWZmZXIoXCJhX3ZjdE5vcm1hbFwiLCByZW5kZXJCdWZmZXJzLm5vcm1hbHMpO1xyXG5cclxuXHJcbiAgICAgIC8vIGZlZWQgaW4gdGV4dHVyZSBjb29yZGluYXRlcyBpZiBzaGFkZXIgYWNjZXB0cyBhX3ZjdFRleHR1cmVcclxuICAgICAgbGV0IGF0dHJpYnV0ZTogbnVtYmVyID0gX3NoYWRlci5hdHRyaWJ1dGVzW1wiYV92Y3RUZXh0dXJlXCJdO1xyXG4gICAgICBpZiAoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCByZW5kZXJCdWZmZXJzLnRleHR1cmVVVnMpO1xyXG4gICAgICAgIGNyYzMuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYXR0cmlidXRlKTsgLy8gZW5hYmxlIHRoZSBidWZmZXJcclxuICAgICAgICBjcmMzLnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0cmlidXRlLCAyLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZMT0FULCBmYWxzZSwgMCwgMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGZlZWQgaW4gYW4gaWQgb2YgdGhlIG5vZGUgaWYgc2hhZGVyIGFjY2VwdHMgdV9pZC4gVXNlZCBmb3IgcGlja2luZ1xyXG4gICAgICB1bmlmb3JtID0gX3NoYWRlci51bmlmb3Jtc1tcInVfaWRcIl07XHJcbiAgICAgIGlmICh1bmlmb3JtKVxyXG4gICAgICAgIFJlbmRlcldlYkdMLmdldFJlbmRlcmluZ0NvbnRleHQoKS51bmlmb3JtMWkodW5pZm9ybSwgX2lkKTtcclxuXHJcbiAgICAgIGNyYzMuYmluZEJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkVMRU1FTlRfQVJSQVlfQlVGRkVSLCByZW5kZXJCdWZmZXJzLmluZGljZXMpO1xyXG4gICAgICByZXR1cm4gcmVuZGVyQnVmZmVycztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGRlbGV0ZVJlbmRlckJ1ZmZlcnMoX3JlbmRlckJ1ZmZlcnM6IFJlbmRlckJ1ZmZlcnMpOiB2b2lkIHtcclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIGlmIChfcmVuZGVyQnVmZmVycykge1xyXG4gICAgICAgIC8vIFRPRE86IGNsZWFudXAgYWxsIGJ1ZmZlcnMsIGZsYXQvbm9ybWFscyBpcyBtaXNzaW5nLi4uXHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgICAgICBjcmMzLmRlbGV0ZUJ1ZmZlcihfcmVuZGVyQnVmZmVycy52ZXJ0aWNlcyk7XHJcbiAgICAgICAgY3JjMy5kZWxldGVCdWZmZXIoX3JlbmRlckJ1ZmZlcnMudGV4dHVyZVVWcyk7XHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG51bGwpO1xyXG4gICAgICAgIGNyYzMuZGVsZXRlQnVmZmVyKF9yZW5kZXJCdWZmZXJzLmluZGljZXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IG5hbWVzcGFjZSBQYXJ0aWNsZURhdGEge1xyXG4gICAgZXhwb3J0IGVudW0gRlVOQ1RJT04ge1xyXG4gICAgICAvLyBWQUxVRSA9IFwidmFsdWVcIixcclxuICAgICAgQURESVRJT04gPSBcImFkZGl0aW9uXCIsXHJcbiAgICAgIFNVQlRSQUNUSU9OID0gXCJzdWJ0cmFjdGlvblwiLFxyXG4gICAgICBNVUxUSVBMSUNBVElPTiA9IFwibXVsdGlwbGljYXRpb25cIixcclxuICAgICAgRElWSVNJT04gPSBcImRpdmlzaW9uXCIsXHJcbiAgICAgIE1PRFVMTyA9IFwibW9kdWxvXCIsXHJcbiAgICAgIFBPV0VSID0gXCJwb3dlclwiLFxyXG4gICAgICBQT0xZTk9NSUFMMyA9IFwicG9seW5vbWlhbDNcIixcclxuICAgICAgU1FVQVJFX1JPT1QgPSBcInNxdWFyZVJvb3RcIixcclxuICAgICAgUkFORE9NID0gXCJyYW5kb21cIixcclxuICAgICAgUkFORE9NX1JBTkdFID0gXCJyYW5kb21SYW5nZVwiXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNvbnN0IEZVTkNUSU9OX01JTklNVU1fUEFSQU1FVEVSUzogeyBba2V5IGluIFBhcnRpY2xlRGF0YS5GVU5DVElPTl06IG51bWJlciB9ID0ge1xyXG4gICAgICAvLyBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlZBTFVFXTogMSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5BRERJVElPTl06IDIsXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uU1VCVFJBQ1RJT05dOiAyLFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLk1VTFRJUExJQ0FUSU9OXTogMixcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5ESVZJU0lPTl06IDIsXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uTU9EVUxPXTogMixcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5QT1dFUl06IDIsXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uUE9MWU5PTUlBTDNdOiA1LFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlNRVUFSRV9ST09UXTogMSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5SQU5ET01dOiAxLFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlJBTkRPTV9SQU5HRV06IDNcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0IGNvbnN0IFBSRURFRklORURfVkFSSUFCTEVTOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xyXG4gICAgICBzeXN0ZW1EdXJhdGlvbjogXCJ1X2ZQYXJ0aWNsZVN5c3RlbUR1cmF0aW9uXCIsXHJcbiAgICAgIHN5c3RlbVNpemU6IFwidV9mUGFydGljbGVTeXN0ZW1TaXplXCIsXHJcbiAgICAgIHN5c3RlbVRpbWU6IFwidV9mUGFydGljbGVTeXN0ZW1UaW1lXCIsXHJcbiAgICAgIHBhcnRpY2xlSWQ6IFwiZlBhcnRpY2xlSWRcIlxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENvbXBpbGVzIHBhcnRpY2xlIHN5c3RlbSBzaGFkZXJzIGZyb20gc2hhZGVyIHVuaXZlcnNhbCBkZXJpdmF0ZXMgZm9yIFdlYkdMXHJcbiAgICogQGF1dGhvcnMgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0gZXh0ZW5kcyBSZW5kZXJJbmplY3RvclNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEZVTkNUSU9OUzogeyBba2V5IGluIFBhcnRpY2xlRGF0YS5GVU5DVElPTl06IEZ1bmN0aW9uIH0gPSB7XHJcbiAgICAgIC8vIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uVkFMVUVdOiAoX3BhcmFtZXRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgIC8vICAgcmV0dXJuIGAoJHtfcGFyYW1ldGVyc1swXX0pYDtcclxuICAgICAgLy8gfSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5BRERJVElPTl06IChfcGFyYW1ldGVyczogc3RyaW5nW10pID0+IHtcclxuICAgICAgICByZXR1cm4gYCgke19wYXJhbWV0ZXJzLnJlZHVjZSgoX2FjY3VtdWxhdG9yOiBzdHJpbmcsIF92YWx1ZTogc3RyaW5nKSA9PiBgJHtfYWNjdW11bGF0b3J9ICsgJHtfdmFsdWV9YCl9KWA7XHJcbiAgICAgIH0sXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uU1VCVFJBQ1RJT05dOiAoX3BhcmFtZXRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGAoJHtfcGFyYW1ldGVycy5yZWR1Y2UoKF9hY2N1bXVsYXRvcjogc3RyaW5nLCBfdmFsdWU6IHN0cmluZykgPT4gYCR7X2FjY3VtdWxhdG9yfSAtICR7X3ZhbHVlfWApfSlgO1xyXG4gICAgICB9LFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLk1VTFRJUExJQ0FUSU9OXTogKF9wYXJhbWV0ZXJzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBgKCR7X3BhcmFtZXRlcnMucmVkdWNlKChfYWNjdW11bGF0b3I6IHN0cmluZywgX3ZhbHVlOiBzdHJpbmcpID0+IGAke19hY2N1bXVsYXRvcn0gKiAke192YWx1ZX1gKX0pYDtcclxuICAgICAgfSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5ESVZJU0lPTl06IChfcGFyYW1ldGVyczogc3RyaW5nW10pID0+IHtcclxuICAgICAgICByZXR1cm4gYCgke19wYXJhbWV0ZXJzWzBdfSAvICR7X3BhcmFtZXRlcnNbMV19KWA7XHJcbiAgICAgIH0sXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uTU9EVUxPXTogKF9wYXJhbWV0ZXJzOiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBgKCR7X3BhcmFtZXRlcnMucmVkdWNlKChfYWNjdW11bGF0b3I6IHN0cmluZywgX3ZhbHVlOiBzdHJpbmcpID0+IGBtb2QoJHtfYWNjdW11bGF0b3J9LCAke192YWx1ZX0pYCl9KWA7XHJcbiAgICAgIH0sXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uUE9XRVJdOiAoX3BhcmFtZXRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGBwb3coJHtfcGFyYW1ldGVyc1swXX0sICR7X3BhcmFtZXRlcnNbMV19KWA7XHJcbiAgICAgIH0sXHJcbiAgICAgIFtQYXJ0aWNsZURhdGEuRlVOQ1RJT04uUE9MWU5PTUlBTDNdOiAoX3BhcmFtZXRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgbGV0IHg6IHN0cmluZyA9IF9wYXJhbWV0ZXJzWzBdO1xyXG4gICAgICAgIGxldCBhOiBzdHJpbmcgPSBfcGFyYW1ldGVyc1sxXTtcclxuICAgICAgICBsZXQgYjogc3RyaW5nID0gX3BhcmFtZXRlcnNbMl07XHJcbiAgICAgICAgbGV0IGM6IHN0cmluZyA9IF9wYXJhbWV0ZXJzWzNdO1xyXG4gICAgICAgIGxldCBkOiBzdHJpbmcgPSBfcGFyYW1ldGVyc1s0XTtcclxuICAgICAgICByZXR1cm4gYCgke2F9ICogcG93KCR7eH0sIDMuMCkgKyAke2J9ICogcG93KCR7eH0sIDIuMCkgKyAke2N9ICogJHt4fSArICR7ZH0pYDtcclxuICAgICAgfSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5TUVVBUkVfUk9PVF06IChfcGFyYW1ldGVyczogc3RyaW5nW10pID0+IHtcclxuICAgICAgICBsZXQgeDogc3RyaW5nID0gX3BhcmFtZXRlcnNbMF07XHJcbiAgICAgICAgcmV0dXJuIGBzcXJ0KCR7eH0pYDtcclxuICAgICAgfSxcclxuICAgICAgW1BhcnRpY2xlRGF0YS5GVU5DVElPTi5SQU5ET01dOiAoX3BhcmFtZXRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGBmZXRjaFJhbmRvbU51bWJlcihpbnQoJHtfcGFyYW1ldGVyc1swXX0pLCBpUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzU2l6ZSwgaVBhcnRpY2xlU3lzdGVtUmFuZG9tTnVtYmVyc0xlbmd0aClgO1xyXG4gICAgICB9LFxyXG4gICAgICBbUGFydGljbGVEYXRhLkZVTkNUSU9OLlJBTkRPTV9SQU5HRV06IChfcGFyYW1ldGVyczogc3RyaW5nW10pID0+IHtcclxuICAgICAgICByZXR1cm4gYCgke1JlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0uRlVOQ1RJT05TW1wicmFuZG9tXCJdKF9wYXJhbWV0ZXJzKX0gKiAoJHtfcGFyYW1ldGVyc1syXX0gLSAke19wYXJhbWV0ZXJzWzFdfSkgKyAke19wYXJhbWV0ZXJzWzFdfSlgO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgb3ZlcnJpZGUgZGVjb3JhdGUoX2NvbnN0cnVjdG9yOiBGdW5jdGlvbik6IHZvaWQge1xyXG4gICAgICBzdXBlci5kZWNvcmF0ZShfY29uc3RydWN0b3IucHJvdG90eXBlKTtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiZ2V0VmVydGV4U2hhZGVyU291cmNlXCIsIHtcclxuICAgICAgICB2YWx1ZTogUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZXRWZXJ0ZXhTaGFkZXJTb3VyY2VcclxuICAgICAgfSk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfY29uc3RydWN0b3IucHJvdG90eXBlLCBcImdldEZyYWdtZW50U2hhZGVyU291cmNlXCIsIHtcclxuICAgICAgICB2YWx1ZTogUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZXRGcmFnbWVudFNoYWRlclNvdXJjZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFZlcnRleFNoYWRlclNvdXJjZSh0aGlzOiBTaGFkZXJQYXJ0aWNsZVN5c3RlbSk6IHN0cmluZyB7XHJcbiAgICAgIGxldCBkYXRhOiBQYXJ0aWNsZURhdGEuU3lzdGVtID0gdGhpcy5kYXRhO1xyXG4gICAgICBsZXQgbXR4TG9jYWw6IFBhcnRpY2xlRGF0YS5UcmFuc2Zvcm1hdGlvbltdID0gZGF0YT8ubXR4TG9jYWw7XHJcbiAgICAgIGxldCBtdHhXb3JsZDogUGFydGljbGVEYXRhLlRyYW5zZm9ybWF0aW9uW10gPSBkYXRhPy5tdHhXb3JsZDtcclxuXHJcbiAgICAgIGxldCBzb3VyY2U6IHN0cmluZyA9IHRoaXMudmVydGV4U2hhZGVyU291cmNlXHJcbiAgICAgICAgLnJlcGxhY2UoXCIjdmVyc2lvbiAzMDAgZXNcIiwgYCN2ZXJzaW9uIDMwMCBlc1xcbiNkZWZpbmUgJHt0aGlzLmRlZmluZVswXX0ke2RhdGEuY29sb3IgPyBcIlxcbiNkZWZpbmUgUEFSVElDTEVfQ09MT1JcIiA6IFwiXCJ9YClcclxuICAgICAgICAucmVwbGFjZShcIi8qJHZhcmlhYmxlcyovXCIsIFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0uZ2VuZXJhdGVWYXJpYWJsZXMoZGF0YT8udmFyaWFibGVzLCBkYXRhPy52YXJpYWJsZU5hbWVzKSlcclxuICAgICAgICAucmVwbGFjZShcIi8qJG10eExvY2FsKi9cIiwgUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZW5lcmF0ZVRyYW5zZm9ybWF0aW9ucyhtdHhMb2NhbCwgXCJMb2NhbFwiKSlcclxuICAgICAgICAucmVwbGFjZShcIi8qJG10eExvY2FsKi9cIiwgbXR4TG9jYWwgJiYgbXR4TG9jYWwubGVuZ3RoID4gMCA/IFwiKiBtdHhMb2NhbFwiIDogXCJcIilcclxuICAgICAgICAucmVwbGFjZShcIi8qJG10eFdvcmxkKi9cIiwgUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZW5lcmF0ZVRyYW5zZm9ybWF0aW9ucyhtdHhXb3JsZCwgXCJXb3JsZFwiKSlcclxuICAgICAgICAucmVwbGFjZShcIi8qJG10eFdvcmxkKi9cIiwgbXR4V29ybGQgJiYgbXR4V29ybGQubGVuZ3RoID4gMCA/IFwibXR4V29ybGQgKlwiIDogXCJcIilcclxuICAgICAgICAucmVwbGFjZUFsbChcIi8qJGNvbG9yKi9cIiwgUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZW5lcmF0ZUNvbG9yKGRhdGE/LmNvbG9yKSk7XHJcbiAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRGcmFnbWVudFNoYWRlclNvdXJjZSh0aGlzOiBTaGFkZXJQYXJ0aWNsZVN5c3RlbSk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZyYWdtZW50U2hhZGVyU291cmNlLnJlcGxhY2UoXCIjdmVyc2lvbiAzMDAgZXNcIiwgYCN2ZXJzaW9uIDMwMCBlcyR7dGhpcy5kYXRhLmNvbG9yID8gXCJcXG4jZGVmaW5lIFBBUlRJQ0xFX0NPTE9SXCIgOiBcIlwifWApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBjb2RlIGdlbmVyYXRpb25cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZVZhcmlhYmxlcyhfdmFyaWFibGVzOiBQYXJ0aWNsZURhdGEuU3lzdGVtW1widmFyaWFibGVzXCJdLCBfdmFyaWFibGVOYW1lczogUGFydGljbGVEYXRhLlN5c3RlbVtcInZhcmlhYmxlTmFtZXNcIl0pOiBzdHJpbmcge1xyXG4gICAgICBpZiAoIV92YXJpYWJsZXMpIHJldHVybiBcIlwiO1xyXG5cclxuICAgICAgcmV0dXJuIF92YXJpYWJsZXNcclxuICAgICAgICAubWFwKChfdmFyaWFibGUsIF9pbmRleCkgPT4gKHsgbmFtZTogXCJmUGFydGljbGVTeXN0ZW1WYXJpYWJsZV9cIiArIF92YXJpYWJsZU5hbWVzW19pbmRleF0sIHZhbHVlOiBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLmdlbmVyYXRlRXhwcmVzc2lvbihfdmFyaWFibGUpIH0pKVxyXG4gICAgICAgIC5tYXAoX3ZhcmlhYmxlID0+IGBmbG9hdCAke192YXJpYWJsZS5uYW1lfSA9ICR7X3ZhcmlhYmxlLnZhbHVlfTtgKVxyXG4gICAgICAgIC5yZWR1Y2UoKF9hY2N1bXVsYXRvcjogc3RyaW5nLCBfY29kZTogc3RyaW5nKSA9PiBgJHtfYWNjdW11bGF0b3J9XFxuJHtfY29kZX1gLCBcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZVRyYW5zZm9ybWF0aW9ucyhfdHJhbnNmb3JtYXRpb25zOiBQYXJ0aWNsZURhdGEuU3lzdGVtW1wibXR4TG9jYWxcIl0sIF9sb2NhbE9yV29ybGQ6IFwiTG9jYWxcIiB8IFwiV29ybGRcIik6IHN0cmluZyB7XHJcbiAgICAgIGlmICghX3RyYW5zZm9ybWF0aW9ucyB8fCBfdHJhbnNmb3JtYXRpb25zLmxlbmd0aCA9PSAwKSByZXR1cm4gXCJcIjtcclxuXHJcbiAgICAgIGxldCB0cmFuc2Zvcm1hdGlvbnM6IFtQYXJ0aWNsZURhdGEuVHJhbnNmb3JtYXRpb25bXCJ0cmFuc2Zvcm1hdGlvblwiXSwgc3RyaW5nLCBzdHJpbmcsIHN0cmluZ11bXSA9IF90cmFuc2Zvcm1hdGlvbnNcclxuICAgICAgICAubWFwKF9kYXRhID0+IHtcclxuICAgICAgICAgIGxldCBpc1NjYWxlOiBib29sZWFuID0gX2RhdGEudHJhbnNmb3JtYXRpb24gPT09IFwic2NhbGVcIjtcclxuICAgICAgICAgIGxldCBbeCwgeSwgel0gPSBbX2RhdGEucGFyYW1ldGVyc1swXSwgX2RhdGEucGFyYW1ldGVyc1sxXSwgX2RhdGEucGFyYW1ldGVyc1syXV1cclxuICAgICAgICAgICAgLm1hcCgoX3ZhbHVlKSA9PiBfdmFsdWUgPyBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLmdlbmVyYXRlRXhwcmVzc2lvbihfdmFsdWUpIDogKGlzU2NhbGUgPyBcIjEuMFwiIDogXCIwLjBcIikpIGFzIFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXTtcclxuXHJcbiAgICAgICAgICByZXR1cm4gW19kYXRhLnRyYW5zZm9ybWF0aW9uLCB4LCB5LCB6XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIGxldCBjb2RlOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgICBjb2RlICs9IHRyYW5zZm9ybWF0aW9uc1xyXG4gICAgICAgIC5tYXAoKFtfdHJhbnNmb3JtYXRpb24sIF94LCBfeSwgX3pdLCBfaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgbGV0IHJvdGF0ZUlkOiBzdHJpbmcgPSBfaW5kZXggKyBfbG9jYWxPcldvcmxkO1xyXG4gICAgICAgICAgaWYgKF90cmFuc2Zvcm1hdGlvbiA9PSBcInJvdGF0ZVwiKSB7XHJcbiAgICAgICAgICAgIGxldCB0b1JhZGlhbnM6IChfdmFsdWU6IHN0cmluZykgPT4gc3RyaW5nID0gKF92YWx1ZTogc3RyaW5nKSA9PiBgJHtfdmFsdWV9ICogJHtDYWxjLmRlZzJyYWR9YDtcclxuICAgICAgICAgICAgcmV0dXJuIGBmbG9hdCBmWFJhZGlhbnMke3JvdGF0ZUlkfSA9ICR7dG9SYWRpYW5zKF94KX07XHJcbiAgICAgICAgICAgICAgZmxvYXQgZllSYWRpYW5zJHtyb3RhdGVJZH0gPSAke3RvUmFkaWFucyhfeSl9O1xyXG4gICAgICAgICAgICAgIGZsb2F0IGZaUmFkaWFucyR7cm90YXRlSWR9ID0gJHt0b1JhZGlhbnMoX3opfTtcclxuICAgICAgICAgICAgICBmbG9hdCBmU2luWCR7cm90YXRlSWR9ID0gc2luKGZYUmFkaWFucyR7cm90YXRlSWR9KTtcclxuICAgICAgICAgICAgICBmbG9hdCBmQ29zWCR7cm90YXRlSWR9ID0gY29zKGZYUmFkaWFucyR7cm90YXRlSWR9KTsgXHJcbiAgICAgICAgICAgICAgZmxvYXQgZlNpblkke3JvdGF0ZUlkfSA9IHNpbihmWVJhZGlhbnMke3JvdGF0ZUlkfSk7XHJcbiAgICAgICAgICAgICAgZmxvYXQgZkNvc1kke3JvdGF0ZUlkfSA9IGNvcyhmWVJhZGlhbnMke3JvdGF0ZUlkfSk7XHJcbiAgICAgICAgICAgICAgZmxvYXQgZlNpbloke3JvdGF0ZUlkfSA9IHNpbihmWlJhZGlhbnMke3JvdGF0ZUlkfSk7XHJcbiAgICAgICAgICAgICAgZmxvYXQgZkNvc1oke3JvdGF0ZUlkfSA9IGNvcyhmWlJhZGlhbnMke3JvdGF0ZUlkfSk7XFxuYDtcclxuICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5maWx0ZXIoKF90cmFuc2Zvcm1hdGlvbjogc3RyaW5nKSA9PiBfdHJhbnNmb3JtYXRpb24gIT0gXCJcIilcclxuICAgICAgICAucmVkdWNlKChfYWNjdW11bGF0b3I6IHN0cmluZywgX2NvZGU6IHN0cmluZykgPT4gYCR7X2FjY3VtdWxhdG9yfVxcbiR7X2NvZGV9YCwgXCJcIik7XHJcbiAgICAgIGNvZGUgKz0gXCJcXG5cIjtcclxuXHJcbiAgICAgIGNvZGUgKz0gYG1hdDQgbXR4JHtfbG9jYWxPcldvcmxkfSA9IGA7XHJcbiAgICAgIGNvZGUgKz0gdHJhbnNmb3JtYXRpb25zXHJcbiAgICAgICAgLm1hcCgoW190cmFuc2Zvcm1hdGlvbiwgX3gsIF95LCBfel0sIF9pbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICBsZXQgcm90YXRlSWQ6IHN0cmluZyA9IF9pbmRleCArIF9sb2NhbE9yV29ybGQ7XHJcbiAgICAgICAgICBzd2l0Y2ggKF90cmFuc2Zvcm1hdGlvbikge1xyXG4gICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRlXCI6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGBtYXQ0KFxyXG4gICAgICAgICAgICAgIDEuMCwgMC4wLCAwLjAsIDAuMCxcclxuICAgICAgICAgICAgICAwLjAsIDEuMCwgMC4wLCAwLjAsXHJcbiAgICAgICAgICAgICAgMC4wLCAwLjAsIDEuMCwgMC4wLFxyXG4gICAgICAgICAgICAgICR7X3h9LCAke195fSwgJHtfen0sIDEuMClgO1xyXG4gICAgICAgICAgICBjYXNlIFwicm90YXRlXCI6XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGBtYXQ0KFxyXG4gICAgICAgICAgICAgIGZDb3NaJHtyb3RhdGVJZH0gKiBmQ29zWSR7cm90YXRlSWR9LCBmU2luWiR7cm90YXRlSWR9ICogZkNvc1kke3JvdGF0ZUlkfSwgLWZTaW5ZJHtyb3RhdGVJZH0sIDAuMCxcclxuICAgICAgICAgICAgICBmQ29zWiR7cm90YXRlSWR9ICogZlNpblkke3JvdGF0ZUlkfSAqIGZTaW5YJHtyb3RhdGVJZH0gLSBmU2luWiR7cm90YXRlSWR9ICogZkNvc1gke3JvdGF0ZUlkfSwgZlNpbloke3JvdGF0ZUlkfSAqIGZTaW5ZJHtyb3RhdGVJZH0gKiBmU2luWCR7cm90YXRlSWR9ICsgZkNvc1oke3JvdGF0ZUlkfSAqIGZDb3NYJHtyb3RhdGVJZH0sIGZDb3NZJHtyb3RhdGVJZH0gKiBmU2luWCR7cm90YXRlSWR9LCAwLjAsXHJcbiAgICAgICAgICAgICAgZkNvc1oke3JvdGF0ZUlkfSAqIGZTaW5ZJHtyb3RhdGVJZH0gKiBmQ29zWCR7cm90YXRlSWR9ICsgZlNpbloke3JvdGF0ZUlkfSAqIGZTaW5YJHtyb3RhdGVJZH0sIGZTaW5aJHtyb3RhdGVJZH0gKiBmU2luWSR7cm90YXRlSWR9ICogZkNvc1gke3JvdGF0ZUlkfSAtIGZDb3NaJHtyb3RhdGVJZH0gKiBmU2luWCR7cm90YXRlSWR9LCBmQ29zWSR7cm90YXRlSWR9ICogZkNvc1gke3JvdGF0ZUlkfSwgMC4wLFxyXG4gICAgICAgICAgICAgIDAuMCwgMC4wLCAwLjAsIDEuMFxyXG4gICAgICAgICAgICAgIClgO1xyXG4gICAgICAgICAgICBjYXNlIFwic2NhbGVcIjpcclxuICAgICAgICAgICAgICByZXR1cm4gYG1hdDQoXHJcbiAgICAgICAgICAgICAgJHtfeH0sIDAuMCwgMC4wLCAwLjAsXHJcbiAgICAgICAgICAgICAgMC4wLCAke195fSwgMC4wLCAwLjAsXHJcbiAgICAgICAgICAgICAgMC4wLCAwLjAsICR7X3p9LCAwLjAsXHJcbiAgICAgICAgICAgICAgMC4wLCAwLjAsIDAuMCwgMS4wXHJcbiAgICAgICAgICAgICAgKWA7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgdGhyb3cgYEVycm9yIGluICR7UGFydGljbGVTeXN0ZW0ubmFtZX06IFwiJHtfdHJhbnNmb3JtYXRpb259XCIgaXMgbm90IGEgdHJhbnNmb3JtYXRpb25gO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnJlZHVjZSgoX2FjY3VtdWxhdG9yOiBzdHJpbmcsIF9jb2RlOiBzdHJpbmcpID0+IGAke19hY2N1bXVsYXRvcn0gKiBcXG4ke19jb2RlfWApO1xyXG4gICAgICBjb2RlICs9IFwiO1xcblwiO1xyXG5cclxuICAgICAgcmV0dXJuIGNvZGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2VuZXJhdGVDb2xvcihfY29sb3I6IFBhcnRpY2xlRGF0YS5FeHByZXNzaW9uW10pOiBzdHJpbmcge1xyXG4gICAgICBpZiAoIV9jb2xvcikgcmV0dXJuIFwiXCI7XHJcblxyXG4gICAgICBsZXQgcmdiYTogc3RyaW5nID0gW19jb2xvclswXSwgX2NvbG9yWzFdLCBfY29sb3JbMl0sIF9jb2xvclszXV1cclxuICAgICAgICAubWFwKChfdmFsdWUpOiBzdHJpbmcgPT4gX3ZhbHVlID8gUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5nZW5lcmF0ZUV4cHJlc3Npb24oX3ZhbHVlKSA6IFwiMS4wXCIpXHJcbiAgICAgICAgLmpvaW4oXCIsIFwiKTtcclxuXHJcbiAgICAgIHJldHVybiBgdmVjNCgke3JnYmF9KTtgO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlRXhwcmVzc2lvbihfZXhwcmVzc2lvbjogUGFydGljbGVEYXRhLkV4cHJlc3Npb24pOiBzdHJpbmcge1xyXG4gICAgICBpZiAoUGFydGljbGVEYXRhLmlzRnVuY3Rpb24oX2V4cHJlc3Npb24pKSB7XHJcbiAgICAgICAgbGV0IHBhcmFtZXRlcnM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgcGFyYW0gb2YgX2V4cHJlc3Npb24ucGFyYW1ldGVycykge1xyXG4gICAgICAgICAgcGFyYW1ldGVycy5wdXNoKFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0uZ2VuZXJhdGVFeHByZXNzaW9uKHBhcmFtKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBSZW5kZXJJbmplY3RvclNoYWRlclBhcnRpY2xlU3lzdGVtLmdlbmVyYXRlRnVuY3Rpb24oX2V4cHJlc3Npb24uZnVuY3Rpb24sIHBhcmFtZXRlcnMpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoUGFydGljbGVEYXRhLmlzVmFyaWFibGUoX2V4cHJlc3Npb24pKSB7XHJcbiAgICAgICAgcmV0dXJuIFBhcnRpY2xlRGF0YS5QUkVERUZJTkVEX1ZBUklBQkxFU1tfZXhwcmVzc2lvbi52YWx1ZV0gfHwgXCJmUGFydGljbGVTeXN0ZW1WYXJpYWJsZV9cIiArIF9leHByZXNzaW9uLnZhbHVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoUGFydGljbGVEYXRhLmlzQ29uc3RhbnQoX2V4cHJlc3Npb24pKSB7XHJcbiAgICAgICAgbGV0IHZhbHVlOiBzdHJpbmcgPSBfZXhwcmVzc2lvbi52YWx1ZS50b1N0cmluZygpO1xyXG4gICAgICAgIHJldHVybiBgJHt2YWx1ZX0ke3ZhbHVlLmluY2x1ZGVzKFwiLlwiKSA/IFwiXCIgOiBcIi4wXCJ9YDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKFBhcnRpY2xlRGF0YS5pc0NvZGUoX2V4cHJlc3Npb24pKSB7XHJcbiAgICAgICAgbGV0IGNvZGU6IHN0cmluZyA9IF9leHByZXNzaW9uLmNvZGVcclxuICAgICAgICAgIC5yZXBsYWNlQWxsKC9cXGJbYS16QS16XStcXHcqKD8hXFwoKVxcYi9nLCAoX21hdGNoKSA9PiBQYXJ0aWNsZURhdGEuUFJFREVGSU5FRF9WQVJJQUJMRVNbX21hdGNoXSB8fCBcImZQYXJ0aWNsZVN5c3RlbVZhcmlhYmxlX1wiICsgX21hdGNoKVxyXG4gICAgICAgICAgLnJlcGxhY2VBbGwoLyg/PCFcXC4pXFxiXFxkK1xcYig/IVxcLikvZywgKF9tYXRjaCkgPT4gX21hdGNoICsgXCIuMFwiKTtcclxuICAgICAgICBjb2RlID0gUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5yZXBsYWNlRnVuY3Rpb25zKGNvZGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29kZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhyb3cgYEVycm9yIGluICR7UGFydGljbGVTeXN0ZW0ubmFtZX06IGludmFsaWQgbm9kZSBzdHJ1Y3R1cmUgaW4gcGFydGljbGUgc3lzdGVtIHNlcmlhbGl6YXRpb25gO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdlbmVyYXRlRnVuY3Rpb24oX2Z1bmN0aW9uOiBQYXJ0aWNsZURhdGEuRlVOQ1RJT04sIF9wYXJhbWV0ZXJzOiBzdHJpbmdbXSk6IHN0cmluZyB7XHJcbiAgICAgIGlmIChfcGFyYW1ldGVycy5sZW5ndGggPCBQYXJ0aWNsZURhdGEuRlVOQ1RJT05fTUlOSU1VTV9QQVJBTUVURVJTW19mdW5jdGlvbl0pXHJcbiAgICAgICAgdGhyb3cgYEVycm9yIGluICR7UGFydGljbGVTeXN0ZW0ubmFtZX06IFwiJHtfZnVuY3Rpb259XCIgbmVlZHMgYXQgbGVhc3QgJHtQYXJ0aWNsZURhdGEuRlVOQ1RJT05fTUlOSU1VTV9QQVJBTUVURVJTW19mdW5jdGlvbl19IHBhcmFtZXRlcnNgO1xyXG4gICAgICBpZiAoT2JqZWN0LnZhbHVlcyhQYXJ0aWNsZURhdGEuRlVOQ1RJT04pLmluY2x1ZGVzKF9mdW5jdGlvbikpXHJcbiAgICAgICAgcmV0dXJuIFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0uRlVOQ1RJT05TW19mdW5jdGlvbl0oX3BhcmFtZXRlcnMpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhyb3cgYEVycm9yIGluICR7UGFydGljbGVTeXN0ZW0ubmFtZX06IFwiJHtfZnVuY3Rpb259XCIgaXMgbm90IGFuIG9wZXJhdGlvbmA7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVwbGFjZUZ1bmN0aW9ucyhfY29kZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgbGV0IGZ1bmN0aW9uUmVnZXg6IFJlZ0V4cCA9IC9cXGJbYS16QS16X10rXFx3KlxcKC9nO1xyXG4gICAgICBsZXQgbWF0Y2g6IFJlZ0V4cEV4ZWNBcnJheTtcclxuICAgICAgd2hpbGUgKChtYXRjaCA9IGZ1bmN0aW9uUmVnZXguZXhlYyhfY29kZSkpICE9IG51bGwpIHtcclxuICAgICAgICBsZXQgZnVuY3Rpb25HZW5lcmF0b3I6IEZ1bmN0aW9uID0gUmVuZGVySW5qZWN0b3JTaGFkZXJQYXJ0aWNsZVN5c3RlbS5GVU5DVElPTlNbPFBhcnRpY2xlRGF0YS5GVU5DVElPTj5tYXRjaFswXS5zbGljZSgwLCAtMSldO1xyXG4gICAgICAgIGlmICghZnVuY3Rpb25HZW5lcmF0b3IpXHJcbiAgICAgICAgICBjb250aW51ZTtcclxuXHJcbiAgICAgICAgbGV0IGNvbW1hSW5kaWNlczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICBsZXQgb3BlbkJyYWNrZXRzOiBudW1iZXIgPSAxO1xyXG4gICAgICAgIGxldCBhcmd1bWVudHNMYXN0SW5kZXg6IG51bWJlciA9IGZ1bmN0aW9uUmVnZXgubGFzdEluZGV4O1xyXG4gICAgICAgIHdoaWxlIChvcGVuQnJhY2tldHMgPiAwKSB7XHJcbiAgICAgICAgICBzd2l0Y2ggKF9jb2RlW2FyZ3VtZW50c0xhc3RJbmRleF0pIHtcclxuICAgICAgICAgICAgY2FzZSBcIihcIjpcclxuICAgICAgICAgICAgICBvcGVuQnJhY2tldHMrKztcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIilcIjpcclxuICAgICAgICAgICAgICBvcGVuQnJhY2tldHMtLTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIixcIjpcclxuICAgICAgICAgICAgICBpZiAob3BlbkJyYWNrZXRzID09IDEpXHJcbiAgICAgICAgICAgICAgICBjb21tYUluZGljZXMucHVzaChhcmd1bWVudHNMYXN0SW5kZXgpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYXJndW1lbnRzTGFzdEluZGV4Kys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYXJnczogc3RyaW5nW10gPVxyXG4gICAgICAgICAgW2Z1bmN0aW9uUmVnZXgubGFzdEluZGV4IC0gMSwgLi4uY29tbWFJbmRpY2VzLCBhcmd1bWVudHNMYXN0SW5kZXggLSAxXS5yZWR1Y2U8c3RyaW5nW10+KChfYWNjdW11bGF0b3IsIF9wb3NpdGlvbiwgX2luZGV4LCBfcG9zaXRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBfaW5kZXggPT0gX3Bvc2l0aW9ucy5sZW5ndGggLSAxID9cclxuICAgICAgICAgICAgICBfYWNjdW11bGF0b3IgOlxyXG4gICAgICAgICAgICAgIF9hY2N1bXVsYXRvci5jb25jYXQoX2NvZGUuc2xpY2UoX3Bvc2l0aW9uICsgMSwgX3Bvc2l0aW9uc1tfaW5kZXggKyAxXSkudHJpbSgpKTtcclxuICAgICAgICAgIH0sIFtdKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb25SZWdleC5sYXN0SW5kZXggPSBtYXRjaC5pbmRleDtcclxuICAgICAgICBfY29kZSA9IGAke19jb2RlLnNsaWNlKDAsIG1hdGNoLmluZGV4KX0oJHtmdW5jdGlvbkdlbmVyYXRvcihhcmdzKX0pJHtfY29kZS5zbGljZShhcmd1bWVudHNMYXN0SW5kZXgpfWA7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIF9jb2RlO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIGJ1ZmZlcnMgdGhlIHJhbmRvbSBudW1iZXIgZGF0YSBmb3IgdGhlIHBhcnRpY2xlIHN5c3RlbSBpbnRvIFdlYkdMXHJcbiAgICogQGF1dGhvcnMgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFJlbmRlckluamVjdG9yQ29tcG9uZW50UGFydGljbGVTeXN0ZW0ge1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWNvcmF0ZShfY29uc3RydWN0b3I6IEZ1bmN0aW9uKTogdm9pZCB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfY29uc3RydWN0b3IucHJvdG90eXBlLCBcInVzZVJlbmRlckRhdGFcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvckNvbXBvbmVudFBhcnRpY2xlU3lzdGVtLnVzZVJlbmRlckRhdGFcclxuICAgICAgfSk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfY29uc3RydWN0b3IucHJvdG90eXBlLCBcImRlbGV0ZVJlbmRlckRhdGFcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3RvckNvbXBvbmVudFBhcnRpY2xlU3lzdGVtLmRlbGV0ZVJlbmRlckRhdGFcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyB1c2VSZW5kZXJEYXRhKHRoaXM6IENvbXBvbmVudFBhcnRpY2xlU3lzdGVtKTogdm9pZCB7XHJcbiAgICAgIGxldCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG4gICAgICBpZiAodGhpcy5yZW5kZXJEYXRhKSB7XHJcbiAgICAgICAgLy8gYnVmZmVycyBleGlzdFxyXG4gICAgICAgIGNyYzMuYWN0aXZlVGV4dHVyZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkUxKTsgLy8gQVRURU5USU9OITogY2hhbmdpbmcgdGhpcyBpZCByZXF1aXJlcyBjaGFuZ2luZyBvZiBjb3JyZXNwb25kaW5nIGlkIGluIHBhcnRpY2xlIHJlbmRlciBtZXRob2QsIHVzZSBjdHJsICsgc2hpZnQgKyBmIHNlYXJjaCFcclxuICAgICAgICBjcmMzLmJpbmRUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgdGhpcy5yZW5kZXJEYXRhKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnJlbmRlckRhdGEgPSB7fTtcclxuICAgICAgICBjb25zdCB0ZXh0dXJlOiBXZWJHTFRleHR1cmUgPSBSZW5kZXIuYXNzZXJ0PFdlYkdMVGV4dHVyZT4oY3JjMy5jcmVhdGVUZXh0dXJlKCkpO1xyXG4gICAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcclxuXHJcbiAgICAgICAgbGV0IHRleHR1cmVTaXplOiBudW1iZXIgPSBNYXRoLmNlaWwoTWF0aC5zcXJ0KHRoaXMuc2l6ZSkpO1xyXG4gICAgICAgIHRleHR1cmVTaXplID0gTWF0aC5taW4odGV4dHVyZVNpemUsIGNyYzMuZ2V0UGFyYW1ldGVyKGNyYzMuTUFYX1RFWFRVUkVfU0laRSkpO1xyXG5cclxuICAgICAgICBsZXQgcmFuZG9tTnVtYmVyczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGV4dHVyZVNpemUgKiB0ZXh0dXJlU2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICByYW5kb21OdW1iZXJzLnB1c2goTWF0aC5yYW5kb20oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjcmMzLnRleEltYWdlMkQoXHJcbiAgICAgICAgICAgIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgMCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5SMzJGLCB0ZXh0dXJlU2l6ZSwgdGV4dHVyZVNpemUsIDAsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkVELCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZMT0FULFxyXG4gICAgICAgICAgICBGbG9hdDMyQXJyYXkuZnJvbShyYW5kb21OdW1iZXJzKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgICAgIERlYnVnLmVycm9yKF9lcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoY3JjMy5URVhUVVJFXzJELCBjcmMzLlRFWFRVUkVfTUlOX0ZJTFRFUiwgY3JjMy5ORUFSRVNUKTtcclxuICAgICAgICBjcmMzLnRleFBhcmFtZXRlcmkoY3JjMy5URVhUVVJFXzJELCBjcmMzLlRFWFRVUkVfTUFHX0ZJTFRFUiwgY3JjMy5ORUFSRVNUKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJEYXRhID0gdGV4dHVyZTtcclxuXHJcbiAgICAgICAgY3JjMy5iaW5kVGV4dHVyZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIG51bGwpO1xyXG5cclxuICAgICAgICB0aGlzLnVzZVJlbmRlckRhdGEoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgZGVsZXRlUmVuZGVyRGF0YSh0aGlzOiBDb21wb25lbnRQYXJ0aWNsZVN5c3RlbSk6IHZvaWQge1xyXG4gICAgICBpZiAoIXRoaXMucmVuZGVyRGF0YSkgcmV0dXJuO1xyXG4gICAgICBcclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCBudWxsKTtcclxuICAgICAgY3JjMy5kZWxldGVUZXh0dXJlKHRoaXMucmVuZGVyRGF0YSk7XHJcbiAgICAgIGRlbGV0ZSB0aGlzLnJlbmRlckRhdGE7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGludGVyZmFjZSBSZWN5Y2FibGUge1xyXG4gICAgcmVjeWNsZSgpOiB2b2lkO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBLZWVwcyBhIGRlcG90IG9mIG9iamVjdHMgdGhhdCBoYXZlIGJlZW4gbWFya2VkIGZvciByZXVzZSwgc29ydGVkIGJ5IHR5cGUuICBcclxuICAgKiBVc2luZyB7QGxpbmsgUmVjeWNsZXJ9IHJlZHVjZXMgbG9hZCBvbiB0aGUgY2FyYmFnZSBjb2xsZWN0b3IgYW5kIHRodXMgc3VwcG9ydHMgc21vb3RoIHBlcmZvcm1hbmNlLlxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vSmlya2FEZWxsT3JvL0ZVREdFL3dpa2kvUmVjeWNsZXJcclxuICAgKi9cclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVjeWNsZXIge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZGVwb3Q6IHsgW3R5cGU6IHN0cmluZ106IE9iamVjdFtdIH0gPSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZldGNoZXMgYW4gb2JqZWN0IG9mIHRoZSByZXF1ZXN0ZWQgdHlwZSBmcm9tIHRoZSBkZXBvdCwgY2FsbHMgaXRzIHJlY3ljbGUtbWV0aG9kIGFuZCByZXR1cm5zIGl0LlxyXG4gICAgICogSWYgdGhlIGRlcG90IGZvciB0aGF0IHR5cGUgaXMgZW1wdHkgaXQgcmV0dXJucyBhIG5ldyBvYmplY3Qgb2YgdGhlIHJlcXVlc3RlZCB0eXBlXHJcbiAgICAgKiBAcGFyYW0gX1QgVGhlIGNsYXNzIGlkZW50aWZpZXIgb2YgdGhlIGRlc2lyZWQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0PFQgZXh0ZW5kcyBSZWN5Y2FibGUgfCBSZWN5Y2FibGVBcnJheTxUPj4oX1Q6IG5ldyAoKSA9PiBUKTogVCB7XHJcbiAgICAgIGxldCBrZXk6IHN0cmluZyA9IF9ULm5hbWU7XHJcbiAgICAgIGxldCBpbnN0YW5jZXM6IE9iamVjdFtdID0gUmVjeWNsZXIuZGVwb3Rba2V5XTtcclxuICAgICAgaWYgKGluc3RhbmNlcyAmJiBpbnN0YW5jZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZTogVCA9IDxUPmluc3RhbmNlcy5wb3AoKTtcclxuICAgICAgICBpbnN0YW5jZS5yZWN5Y2xlKCk7XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gbmV3IF9UKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGFuIG9iamVjdCBvZiB0aGUgcmVxdWVzdGVkIHR5cGUgaW4gdGhlIGRlcG90LCBidXQgZG9lcyBub3QgcmVtb3ZlIGl0IHRoZXJlLiBcclxuICAgICAqIElmIG5vIG9iamVjdCBvZiB0aGUgcmVxdWVzdGVkIHR5cGUgd2FzIGluIHRoZSBkZXBvdCwgb25lIGlzIGNyZWF0ZWQsIHN0b3JlZCBhbmQgYm9ycm93ZWQuXHJcbiAgICAgKiBGb3Igc2hvcnQgdGVybSB1c2FnZSBvZiBvYmplY3RzIGluIGEgbG9jYWwgc2NvcGUsIHdoZW4gdGhlcmUgd2lsbCBiZSBubyBvdGhlciBjYWxsIHRvIFJlY3ljbGVyLmdldCBvciAuYm9ycm93IVxyXG4gICAgICogQHBhcmFtIF9UIFRoZSBjbGFzcyBpZGVudGlmaWVyIG9mIHRoZSBkZXNpcmVkIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGJvcnJvdzxUIGV4dGVuZHMgUmVjeWNhYmxlPihfVDogbmV3ICgpID0+IFQpOiBUIHtcclxuICAgICAgbGV0IHQ6IFQ7XHJcbiAgICAgIGxldCBrZXk6IHN0cmluZyA9IF9ULm5hbWU7XHJcbiAgICAgIGxldCBpbnN0YW5jZXM6IE9iamVjdFtdID0gUmVjeWNsZXIuZGVwb3Rba2V5XTtcclxuICAgICAgaWYgKCFpbnN0YW5jZXMgfHwgaW5zdGFuY2VzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgdCA9IG5ldyBfVCgpO1xyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKHQpO1xyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBpbnN0YW5jZTogVCA9IDxUPmluc3RhbmNlc1swXTtcclxuICAgICAgaW5zdGFuY2UucmVjeWNsZSgpO1xyXG4gICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9yZXMgdGhlIG9iamVjdCBpbiB0aGUgZGVwb3QgZm9yIGxhdGVyIHJlY3ljbGluZy4gVXNlcnMgYXJlIHJlc3BvbnNpYmxlIGZvciB0aHJvd2luZyBpbiBvYmplY3RzIHRoYXQgYXJlIGFib3V0IHRvIGxvb3NlIHNjb3BlIGFuZCBhcmUgbm90IHJlZmVyZW5jZWQgYnkgYW55IG90aGVyXHJcbiAgICAgKiBAcGFyYW0gX2luc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc3RvcmUoX2luc3RhbmNlOiBPYmplY3QpOiB2b2lkIHtcclxuICAgICAgbGV0IGtleTogc3RyaW5nID0gX2luc3RhbmNlLmNvbnN0cnVjdG9yLm5hbWU7XHJcbiAgICAgIC8vRGVidWcubG9nKGtleSk7XHJcbiAgICAgIGxldCBpbnN0YW5jZXM6IE9iamVjdFtdID0gUmVjeWNsZXIuZGVwb3Rba2V5XSB8fCBbXTtcclxuICAgICAgaW5zdGFuY2VzLnB1c2goX2luc3RhbmNlKTtcclxuICAgICAgUmVjeWNsZXIuZGVwb3Rba2V5XSA9IGluc3RhbmNlcztcclxuICAgICAgLy8gRGVidWcubG9nKGBPYmplY3RNYW5hZ2VyLmRlcG90WyR7a2V5fV06ICR7T2JqZWN0TWFuYWdlci5kZXBvdFtrZXldLmxlbmd0aH1gKTtcclxuICAgICAgLy9EZWJ1Zy5sb2codGhpcy5kZXBvdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbXB0eXMgdGhlIGRlcG90IG9mIGEgZ2l2ZW4gdHlwZSwgbGVhdmluZyB0aGUgb2JqZWN0cyBmb3IgdGhlIGdhcmJhZ2UgY29sbGVjdG9yLiBNYXkgcmVzdWx0IGluIGEgc2hvcnQgc3RhbGwgd2hlbiBtYW55IG9iamVjdHMgd2VyZSBpblxyXG4gICAgICogQHBhcmFtIF9UXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZHVtcDxUPihfVDogbmV3ICgpID0+IFQpOiB2b2lkIHtcclxuICAgICAgbGV0IGtleTogc3RyaW5nID0gX1QubmFtZTtcclxuICAgICAgUmVjeWNsZXIuZGVwb3Rba2V5XSA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW1wdHlzIGFsbCBkZXBvdHMsIGxlYXZpbmcgYWxsIG9iamVjdHMgdG8gdGhlIGdhcmJhZ2UgY29sbGVjdG9yLiBNYXkgcmVzdWx0IGluIGEgc2hvcnQgc3RhbGwgd2hlbiBtYW55IG9iamVjdHMgd2VyZSBpblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGR1bXBBbGwoKTogdm9pZCB7XHJcbiAgICAgIFJlY3ljbGVyLmRlcG90ID0ge307XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogU3RvcmVzIGFuZCBtYW5pcHVsYXRlcyBhIHR3b2RpbWVuc2lvbmFsIHZlY3RvciBjb21wcmlzZWQgb2YgdGhlIGNvbXBvbmVudHMgeCBhbmQgeVxyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqICAgICAgICAgICAgK3lcclxuICAgKiAgICAgICAgICAgICB8X18gK3hcclxuICAgKiBgYGBcclxuICAgKiBAYXV0aG9ycyBMdWthcyBTY2hldWVybGUsIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFZlY3RvcjIgZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgUmVjeWNhYmxlIHtcclxuICAgIHByaXZhdGUgZGF0YTogRmxvYXQzMkFycmF5O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfeDogbnVtYmVyID0gMCwgX3k6IG51bWJlciA9IDApIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5kYXRhID0gbmV3IEZsb2F0MzJBcnJheShbX3gsIF95XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFN0YXRpY1xyXG4gICAgLyoqIFxyXG4gICAgICogQSBzaG9ydGhhbmQgZm9yIHdyaXRpbmcgYG5ldyBWZWN0b3IyKDAsIDApYC5cclxuICAgICAqIEByZXR1cm5zIEEgbmV3IHZlY3RvciB3aXRoIHRoZSB2YWx1ZXMgKDAsIDApXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgWkVSTygpOiBWZWN0b3IyIHtcclxuICAgICAgY29uc3QgdmVjdG9yOiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KDAsIDApO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIEEgc2hvcnRoYW5kIGZvciB3cml0aW5nIGBuZXcgVmVjdG9yMihfc2NhbGUsIF9zY2FsZSlgLlxyXG4gICAgICogQHBhcmFtIF9zY2FsZSB0aGUgc2NhbGUgb2YgdGhlIHZlY3Rvci4gRGVmYXVsdDogMVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIE9ORShfc2NhbGU6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcclxuICAgICAgY29uc3QgdmVjdG9yOiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9zY2FsZSwgX3NjYWxlKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBBIHNob3J0aGFuZCBmb3Igd3JpdGluZyBgbmV3IFZlY3RvcjIoMCwgeSlgLlxyXG4gICAgICogQHBhcmFtIF9zY2FsZSBUaGUgbnVtYmVyIHRvIHdyaXRlIGluIHRoZSB5IGNvb3JkaW5hdGUuIERlZmF1bHQ6IDFcclxuICAgICAqIEByZXR1cm5zIEEgbmV3IHZlY3RvciB3aXRoIHRoZSB2YWx1ZXMgKDAsIF9zY2FsZSlcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBZKF9zY2FsZTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xyXG4gICAgICBjb25zdCB2ZWN0b3I6IFZlY3RvcjIgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMik7XHJcbiAgICAgIHZlY3Rvci5zZXQoMCwgX3NjYWxlKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBBIHNob3J0aGFuZCBmb3Igd3JpdGluZyBgbmV3IFZlY3RvcjIoeCwgMClgLlxyXG4gICAgICogQHBhcmFtIF9zY2FsZSBUaGUgbnVtYmVyIHRvIHdyaXRlIGluIHRoZSB4IGNvb3JkaW5hdGUuIERlZmF1bHQ6IDFcclxuICAgICAqIEByZXR1cm5zIEEgbmV3IHZlY3RvciB3aXRoIHRoZSB2YWx1ZXMgKF9zY2FsZSwgMClcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBYKF9zY2FsZTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xyXG4gICAgICBjb25zdCB2ZWN0b3I6IFZlY3RvcjIgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMik7XHJcbiAgICAgIHZlY3Rvci5zZXQoX3NjYWxlLCAwKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIFRSQU5TRk9STUFUSU9OKF92ZWN0b3I6IFZlY3RvcjIsIF9tdHhUcmFuc2Zvcm06IE1hdHJpeDN4MywgX2luY2x1ZGVUcmFuc2xhdGlvbjogYm9vbGVhbiA9IHRydWUpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMiA9IFJlY3ljbGVyLmdldChWZWN0b3IyKTtcclxuICAgICAgbGV0IG06IEZsb2F0MzJBcnJheSA9IF9tdHhUcmFuc2Zvcm0uZ2V0KCk7XHJcbiAgICAgIGxldCBbeCwgeV0gPSBfdmVjdG9yLmdldCgpO1xyXG4gICAgICByZXN1bHQueCA9IG1bMF0gKiB4ICsgbVszXSAqIHk7XHJcbiAgICAgIHJlc3VsdC55ID0gbVsxXSAqIHggKyBtWzRdICogeTtcclxuXHJcbiAgICAgIGlmIChfaW5jbHVkZVRyYW5zbGF0aW9uKSB7XHJcbiAgICAgICAgcmVzdWx0LmFkZChfbXR4VHJhbnNmb3JtLnRyYW5zbGF0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vcm1hbGl6ZXMgYSBnaXZlbiB2ZWN0b3IgdG8gdGhlIGdpdmVuIGxlbmd0aCB3aXRob3V0IGVkaXRpbmcgdGhlIG9yaWdpbmFsIHZlY3Rvci5cclxuICAgICAqIEBwYXJhbSBfdmVjdG9yIHRoZSB2ZWN0b3IgdG8gbm9ybWFsaXplXHJcbiAgICAgKiBAcGFyYW0gX2xlbmd0aCB0aGUgbGVuZ3RoIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yLiBkZWZhdWx0cyB0byAxXHJcbiAgICAgKiBAcmV0dXJucyBhIG5ldyB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBub3JtYWxpc2VkIHZlY3RvciBzY2FsZWQgYnkgdGhlIGdpdmVuIGxlbmd0aFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIE5PUk1BTElaQVRJT04oX3ZlY3RvcjogVmVjdG9yMiwgX2xlbmd0aDogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IyID0gVmVjdG9yMi5aRVJPKCk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IFt4LCB5XSA9IF92ZWN0b3IuZGF0YTtcclxuICAgICAgICBsZXQgZmFjdG9yOiBudW1iZXIgPSBfbGVuZ3RoIC8gTWF0aC5oeXBvdCh4LCB5KTtcclxuICAgICAgICB2ZWN0b3Iuc2V0KF92ZWN0b3IueCAqIGZhY3RvciwgX3ZlY3Rvci55ICogZmFjdG9yKTtcclxuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICAgICAgRGVidWcud2FybihfZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHZlY3RvciByZXByZXNlbnRpbmcgdGhlIGdpdmVuIHZlY3RvciBzY2FsZWQgYnkgdGhlIGdpdmVuIHNjYWxpbmcgZmFjdG9yXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgU0NBTEUoX3ZlY3RvcjogVmVjdG9yMiwgX3NjYWxlOiBudW1iZXIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMiA9IFJlY3ljbGVyLmdldChWZWN0b3IyKTtcclxuICAgICAgdmVjdG9yLnNldChfdmVjdG9yLnggKiBfc2NhbGUsIF92ZWN0b3IueSAqIF9zY2FsZSk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHRpbmcgdmVjdG9yIGF0dGFpbmVkIGJ5IGFkZGl0aW9uIG9mIGFsbCBnaXZlbiB2ZWN0b3JzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFNVTSguLi5fdmVjdG9yczogVmVjdG9yMltdKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMik7XHJcbiAgICAgIGZvciAobGV0IHZlY3RvciBvZiBfdmVjdG9ycylcclxuICAgICAgICByZXN1bHQuc2V0KHJlc3VsdC54ICsgdmVjdG9yLngsIHJlc3VsdC55ICsgdmVjdG9yLnkpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSBzdWJ0cmFjdGlvbiBvZiB0d28gdmVjdG9ycy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBESUZGRVJFTkNFKF9taW51ZW5kOiBWZWN0b3IyLCBfc3VidHJhaGVuZDogVmVjdG9yMik6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9taW51ZW5kLnggLSBfc3VidHJhaGVuZC54LCBfbWludWVuZC55IC0gX3N1YnRyYWhlbmQueSk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyB0aGUgZG90cHJvZHVjdCBvZiAyIHZlY3RvcnMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgRE9UKF9hOiBWZWN0b3IyLCBfYjogVmVjdG9yMik6IG51bWJlciB7XHJcbiAgICAgIGxldCBzY2FsYXJQcm9kdWN0OiBudW1iZXIgPSBfYS54ICogX2IueCArIF9hLnkgKiBfYi55O1xyXG4gICAgICByZXR1cm4gc2NhbGFyUHJvZHVjdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZXMgdGhlIGNyb3NzIHByb2R1Y3Qgb2YgdHdvIFZlY3RvcnMuIER1ZSB0byB0aGVtIGJlaW5nIG9ubHkgMiBEaW1lbnNpb25hbCwgdGhlIHJlc3VsdCBpcyBhIHNpbmdsZSBudW1iZXIsXHJcbiAgICAgKiB3aGljaCBpbXBsaWNpdGx5IGlzIG9uIHRoZSBaIGF4aXMuIEl0IGlzIGFsc28gdGhlIHNpZ25lZCBtYWduaXR1ZGUgb2YgdGhlIHJlc3VsdC5cclxuICAgICAqIEBwYXJhbSBfYSBWZWN0b3IgdG8gY29tcHV0ZSB0aGUgY3Jvc3MgcHJvZHVjdCBvblxyXG4gICAgICogQHBhcmFtIF9iIFZlY3RvciB0byBjb21wdXRlIHRoZSBjcm9zcyBwcm9kdWN0IHdpdGhcclxuICAgICAqIEByZXR1cm5zIEEgbnVtYmVyIHJlcHJlc2VudGluZyByZXN1bHQgb2YgdGhlIGNyb3NzIHByb2R1Y3QuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgQ1JPU1MoX2E6IFZlY3RvcjIsIF9iOiBWZWN0b3IyKTogbnVtYmVyIHtcclxuICAgICAgbGV0IGNyb3NzUHJvZHVjdDogbnVtYmVyID0gX2EueCAqIF9iLnkgLSBfYS55ICogX2IueDtcclxuICAgICAgcmV0dXJuIGNyb3NzUHJvZHVjdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZXMgdGhlIG9ydGhvZ29uYWwgdmVjdG9yIHRvIHRoZSBnaXZlbiB2ZWN0b3IuIFJvdGF0ZXMgY291bnRlcmNsb2Nrd2lzZSBieSBkZWZhdWx0LlxyXG4gICAgICogYGBgcGxhaW50ZXh0XHJcbiAgICAgKiDihpEgPT4g4oaQID0+IOKGkyA9PiDihpIgPT4g4oaRXHJcbiAgICAgKiBgYGBcclxuICAgICAqIEBwYXJhbSBfdmVjdG9yIFZlY3RvciB0byBnZXQgdGhlIG9ydGhvZ29uYWwgZXF1aXZhbGVudCBvZlxyXG4gICAgICogQHBhcmFtIF9jbG9ja3dpc2UgU2hvdWxkIHRoZSByb3RhdGlvbiBiZSBjbG9ja3dpc2UgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBjb3VudGVyY2xvY2t3aXNlPyBkZWZhdWx0OiBmYWxzZVxyXG4gICAgICogQHJldHVybnMgQSBWZWN0b3IgdGhhdCBpcyBvcnRob2dvbmFsIHRvIGFuZCBoYXMgdGhlIHNhbWUgbWFnbml0dWRlIGFzIHRoZSBnaXZlbiBWZWN0b3IuICBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBPUlRIT0dPTkFMKF92ZWN0b3I6IFZlY3RvcjIsIF9jbG9ja3dpc2U6IGJvb2xlYW4gPSBmYWxzZSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgcmVzdWx0OiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG4gICAgICBpZiAoX2Nsb2Nrd2lzZSlcclxuICAgICAgICByZXN1bHQuc2V0KF92ZWN0b3IueSwgLV92ZWN0b3IueCk7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByZXN1bHQuc2V0KC1fdmVjdG9yLnksIF92ZWN0b3IueCk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY2FydGVzaWFuIHZlY3RvciBmcm9tIHBvbGFyIGNvb3JkaW5hdGVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgR0VPKF9hbmdsZTogbnVtYmVyID0gMCwgX21hZ25pdHVkZTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG4gICAgICBsZXQgZ2VvOiBHZW8yID0gUmVjeWNsZXIuZ2V0KEdlbzIpO1xyXG4gICAgICBnZW8uc2V0KF9hbmdsZSwgX21hZ25pdHVkZSk7XHJcbiAgICAgIHZlY3Rvci5nZW8gPSBnZW87XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGdlbyk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gQWNjZXNzb3JzXHJcbiAgICBnZXQgeCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5kYXRhWzBdO1xyXG4gICAgfVxyXG4gICAgZ2V0IHkoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZGF0YVsxXTtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgeChfeDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuZGF0YVswXSA9IF94O1xyXG4gICAgfVxyXG4gICAgc2V0IHkoX3k6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmRhdGFbMV0gPSBfeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgdmVjdG9yXHJcbiAgICAgKi9cclxuICAgIGdldCBtYWduaXR1ZGUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE1hdGguaHlwb3QoLi4udGhpcy5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgbWFnbml0dWRlIG9mIHRoZSB2ZWN0b3Igd2l0aG91dCBjYWxjdWxhdGluZyBhIHNxdWFyZSByb290LiBGYXN0ZXIgZm9yIHNpbXBsZSBwcm94aW1pdHkgZXZhbHVhdGlvbi5cclxuICAgICAqL1xyXG4gICAgZ2V0IG1hZ25pdHVkZVNxdWFyZWQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIFZlY3RvcjIuRE9UKHRoaXMsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGNsb25lIG9mIHRoaXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjbG9uZSgpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IGNsb25lOiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG4gICAgICBjbG9uZS5kYXRhLnNldCh0aGlzLmRhdGEpO1xyXG4gICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcG9sYXIgcmVwcmVzZW50YXRpb24gb2YgdGhpcyB2ZWN0b3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBnZW8oKTogR2VvMiB7XHJcbiAgICAgIGxldCBnZW86IEdlbzIgPSBSZWN5Y2xlci5nZXQoR2VvMik7XHJcbiAgICAgIGdlby5tYWduaXR1ZGUgPSB0aGlzLm1hZ25pdHVkZTtcclxuXHJcbiAgICAgIGlmIChnZW8ubWFnbml0dWRlID09PSAwKVxyXG4gICAgICAgIHJldHVybiBnZW87XHJcblxyXG4gICAgICBnZW8uYW5nbGUgPSAxODAgKiBNYXRoLmF0YW4yKHRoaXMueSAvIGdlby5tYWduaXR1ZGUsIHRoaXMueCAvIGdlby5tYWduaXR1ZGUpIC8gTWF0aC5QSTtcclxuICAgICAgcmV0dXJuIGdlbztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkanVzdCB0aGUgY2FydGVzaWFuIHZhbHVlcyBvZiB0aGlzIHZlY3RvciB0byByZXByZXNlbnQgdGhlIGdpdmVuIGFzIHBvbGFyIGNvb3JkaW5hdGVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQgZ2VvKF9nZW86IEdlbzIpIHtcclxuICAgICAgdGhpcy5zZXQoX2dlby5tYWduaXR1ZGUsIDApO1xyXG4gICAgICB0aGlzLnRyYW5zZm9ybShNYXRyaXgzeDMuUk9UQVRJT04oX2dlby5hbmdsZSkpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoWzAsIDBdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvcGllcyB0aGUgdmFsdWVzIG9mIHRoZSBnaXZlbiB2ZWN0b3IgaW50byB0aGlzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb3B5KF9vcmlnaW5hbDogVmVjdG9yMik6IHZvaWQge1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KF9vcmlnaW5hbC5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY29vcmRpbmF0ZXMgb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHZlY3RvciBhcmUgdG8gYmUgY29uc2lkZXJlZCBpZGVudGljYWwgd2l0aGluIHRoZSBnaXZlbiB0b2xlcmFuY2VcclxuICAgICAqIFRPRE86IGV4YW1pbmUsIGlmIHRvbGVyYW5jZSBhcyBjcml0ZXJpdW0gZm9yIHRoZSBkaWZmZXJlbmNlIGlzIGFwcHJvcHJpYXRlIHdpdGggdmVyeSBsYXJnZSBjb29yZGluYXRlIHZhbHVlcyBvciBpZiBfdG9sZXJhbmNlIHNob3VsZCBiZSBtdWx0aXBsaWVkIGJ5IGNvb3JkaW5hdGUgdmFsdWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGVxdWFscyhfY29tcGFyZTogVmVjdG9yMiwgX3RvbGVyYW5jZTogbnVtYmVyID0gTnVtYmVyLkVQU0lMT04pOiBib29sZWFuIHtcclxuICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCAtIF9jb21wYXJlLngpID4gX3RvbGVyYW5jZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAoTWF0aC5hYnModGhpcy55IC0gX2NvbXBhcmUueSkgPiBfdG9sZXJhbmNlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyB0aGUgZ2l2ZW4gdmVjdG9yIHRvIHRoZSBleGVjdXRpbmcgdmVjdG9yLCBjaGFuZ2luZyB0aGUgZXhlY3V0b3IuXHJcbiAgICAgKiBAcGFyYW0gX2FkZGVuZCBUaGUgdmVjdG9yIHRvIGFkZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZChfYWRkZW5kOiBWZWN0b3IyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoW19hZGRlbmQueCArIHRoaXMueCwgX2FkZGVuZC55ICsgdGhpcy55XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJ0cmFjdHMgdGhlIGdpdmVuIHZlY3RvciBmcm9tIHRoZSBleGVjdXRpbmcgdmVjdG9yLCBjaGFuZ2luZyB0aGUgZXhlY3V0b3IuXHJcbiAgICAgKiBAcGFyYW0gX3N1YnRyYWhlbmQgVGhlIHZlY3RvciB0byBzdWJ0cmFjdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN1YnRyYWN0KF9zdWJ0cmFoZW5kOiBWZWN0b3IyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoW3RoaXMueCAtIF9zdWJ0cmFoZW5kLngsIHRoaXMueSAtIF9zdWJ0cmFoZW5kLnldKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNjYWxlcyB0aGUgVmVjdG9yIGJ5IHRoZSBnaXZlbiBfc2NhbGFyLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGUoX3NjYWxhcjogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoW19zY2FsYXIgKiB0aGlzLngsIF9zY2FsYXIgKiB0aGlzLnldKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vcm1hbGl6ZXMgdGhpcyB0byB0aGUgZ2l2ZW4gbGVuZ3RoLCAxIGJ5IGRlZmF1bHRcclxuICAgICAqL1xyXG4gICAgcHVibGljIG5vcm1hbGl6ZShfbGVuZ3RoOiBudW1iZXIgPSAxKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YSA9IFZlY3RvcjIuTk9STUFMSVpBVElPTih0aGlzLCBfbGVuZ3RoKS5kYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVmaW5lcyB0aGUgY29tcG9uZW50cyBvZiB0aGlzIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBudW1iZXJzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQoX3g6IG51bWJlciA9IDAsIF95OiBudW1iZXIgPSAwKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YVswXSA9IF94O1xyXG4gICAgICB0aGlzLmRhdGFbMV0gPSBfeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHRoZSBkYXRhIG9mIHRoZSB2ZWN0b3JcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCgpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheSh0aGlzLmRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0cmFuc2Zvcm0oX210eFRyYW5zZm9ybTogTWF0cml4M3gzLCBfaW5jbHVkZVRyYW5zbGF0aW9uOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgICB0aGlzLmRhdGEgPSBWZWN0b3IyLlRSQU5TRk9STUFUSU9OKHRoaXMsIF9tdHhUcmFuc2Zvcm0sIF9pbmNsdWRlVHJhbnNsYXRpb24pLmRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgZWFjaCBkaW1lbnNpb24sIG1vdmVzIHRoZSBjb21wb25lbnQgdG8gdGhlIG1pbmltdW0gb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHZlY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbWluKF9jb21wYXJlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMueCA9IE1hdGgubWluKHRoaXMueCwgX2NvbXBhcmUueCk7XHJcbiAgICAgIHRoaXMueSA9IE1hdGgubWluKHRoaXMueSwgX2NvbXBhcmUueSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEZvciBlYWNoIGRpbWVuc2lvbiwgbW92ZXMgdGhlIGNvbXBvbmVudCB0byB0aGUgbWF4aW11bSBvZiB0aGlzIGFuZCB0aGUgZ2l2ZW4gdmVjdG9yXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtYXgoX2NvbXBhcmU6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy54ID0gTWF0aC5tYXgodGhpcy54LCBfY29tcGFyZS54KTtcclxuICAgICAgdGhpcy55ID0gTWF0aC5tYXgodGhpcy55LCBfY29tcGFyZS55KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSB6LWNvbXBvbmVudCBvZiB0aGUgZ2l2ZW4gbWFnbml0dWRlIChkZWZhdWx0PTApIHRvIHRoZSB2ZWN0b3IgYW5kIHJldHVybnMgYSBuZXcgVmVjdG9yM1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9WZWN0b3IzKF96OiBudW1iZXIgPSAwKTogVmVjdG9yMyB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMyh0aGlzLngsIHRoaXMueSwgX3opO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgcmVzdWx0OiBzdHJpbmcgPSBgKCR7dGhpcy54LnRvUHJlY2lzaW9uKDUpfSwgJHt0aGlzLnkudG9QcmVjaXNpb24oNSl9KWA7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZXMgdGhlIHN0YW5kYXJkIGFycmF5Lm1hcCBmdW5jdGlvbmFsaXR5IHRvIHBlcmZvcm0gdGhlIGdpdmVuIGZ1bmN0aW9uIG9uIGFsbCBjb21wb25lbnRzIG9mIHRoaXMgdmVjdG9yXHJcbiAgICAgKiBhbmQgcmV0dXJuIGEgbmV3IHZlY3RvciB3aXRoIHRoZSByZXN1bHRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtYXAoX2Z1bmN0aW9uOiAodmFsdWU6IG51bWJlciwgaW5kZXg6IG51bWJlciwgYXJyYXk6IEZsb2F0MzJBcnJheSkgPT4gbnVtYmVyKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCBjb3B5OiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG4gICAgICBjb3B5LmRhdGEgPSB0aGlzLmRhdGEubWFwKF9mdW5jdGlvbik7XHJcbiAgICAgIHJldHVybiBjb3B5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgICAgLy8gc2VyaWFsaXphdGlvbi50b0pTT04gPSAoKSA9PiB7IHJldHVybiBgeyBcInJcIjogJHt0aGlzLnJ9LCBcImdcIjogJHt0aGlzLmd9LCBcImJcIjogJHt0aGlzLmJ9LCBcImFcIjogJHt0aGlzLmF9fWA7IH07XHJcbiAgICAgIHNlcmlhbGl6YXRpb24udG9KU09OID0gKCkgPT4geyByZXR1cm4gYFske3RoaXMueH0sICR7dGhpcy55fV1gOyB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFZlY3RvcjI+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX3NlcmlhbGl6YXRpb24pID09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBbdGhpcy54LCB0aGlzLnldID0gSlNPTi5wYXJzZSg8c3RyaW5nPjx1bmtub3duPl9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5tdXRhdGUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7XHJcbiAgICAgICAgeDogdGhpcy5kYXRhWzBdLCB5OiB0aGlzLmRhdGFbMV1cclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgey8qKiAqLyB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9SZWN5Y2xlL1JlY3ljbGVyLnRzXCIvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJWZWN0b3IyLnRzXCIvPlxyXG5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyB0aGUgb3JpZ2luIG9mIGEgcmVjdGFuZ2xlXHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gT1JJR0lOMkQge1xyXG4gICAgVE9QTEVGVCA9IDB4MDAsXHJcbiAgICBUT1BDRU5URVIgPSAweDAxLFxyXG4gICAgVE9QUklHSFQgPSAweDAyLFxyXG4gICAgQ0VOVEVSTEVGVCA9IDB4MTAsXHJcbiAgICBDRU5URVIgPSAweDExLFxyXG4gICAgQ0VOVEVSUklHSFQgPSAweDEyLFxyXG4gICAgQk9UVE9NTEVGVCA9IDB4MjAsXHJcbiAgICBCT1RUT01DRU5URVIgPSAweDIxLFxyXG4gICAgQk9UVE9NUklHSFQgPSAweDIyXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWZpbmVzIGEgcmVjdGFuZ2xlIHdpdGggcG9zaXRpb24gYW5kIHNpemUgYW5kIGFkZCBjb21mb3J0YWJsZSBtZXRob2RzIHRvIGl0XHJcbiAgICogQGF1dGhvciBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBSZWN0YW5nbGUgZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgUmVjeWNhYmxlIHtcclxuICAgIHB1YmxpYyBwb3NpdGlvbjogVmVjdG9yMiA9IFJlY3ljbGVyLmdldChWZWN0b3IyKTtcclxuICAgIHB1YmxpYyBzaXplOiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF94OiBudW1iZXIgPSAwLCBfeTogbnVtYmVyID0gMCwgX3dpZHRoOiBudW1iZXIgPSAxLCBfaGVpZ2h0OiBudW1iZXIgPSAxLCBfb3JpZ2luOiBPUklHSU4yRCA9IE9SSUdJTjJELlRPUExFRlQpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5zZXRQb3NpdGlvbkFuZFNpemUoX3gsIF95LCBfd2lkdGgsIF9oZWlnaHQsIF9vcmlnaW4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG5ldyByZWN0YW5nbGUgY3JlYXRlZCB3aXRoIHRoZSBnaXZlbiBwYXJhbWV0ZXJzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgR0VUKF94OiBudW1iZXIgPSAwLCBfeTogbnVtYmVyID0gMCwgX3dpZHRoOiBudW1iZXIgPSAxLCBfaGVpZ2h0OiBudW1iZXIgPSAxLCBfb3JpZ2luOiBPUklHSU4yRCA9IE9SSUdJTjJELlRPUExFRlQpOiBSZWN0YW5nbGUge1xyXG4gICAgICBsZXQgcmVjdDogUmVjdGFuZ2xlID0gUmVjeWNsZXIuZ2V0KFJlY3RhbmdsZSk7XHJcbiAgICAgIHJlY3Quc2V0UG9zaXRpb25BbmRTaXplKF94LCBfeSwgX3dpZHRoLCBfaGVpZ2h0KTtcclxuICAgICAgcmV0dXJuIHJlY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24ueDtcclxuICAgIH1cclxuICAgIGdldCB5KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnk7XHJcbiAgICB9XHJcbiAgICBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2l6ZS54O1xyXG4gICAgfVxyXG4gICAgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5zaXplLnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGxlZnRtb3N0IGV4cGFuc2lvbiwgcmVzcGVjdGluZyBhbHNvIG5lZ2F0aXZlIHZhbHVlcyBvZiB3aWR0aFxyXG4gICAgICovXHJcbiAgICBnZXQgbGVmdCgpOiBudW1iZXIge1xyXG4gICAgICBpZiAodGhpcy5zaXplLnggPiAwKVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLng7XHJcbiAgICAgIHJldHVybiAodGhpcy5wb3NpdGlvbi54ICsgdGhpcy5zaXplLngpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIHRvcG1vc3QgZXhwYW5zaW9uLCByZXNwZWN0aW5nIGFsc28gbmVnYXRpdmUgdmFsdWVzIG9mIGhlaWdodFxyXG4gICAgICovXHJcbiAgICBnZXQgdG9wKCk6IG51bWJlciB7XHJcbiAgICAgIGlmICh0aGlzLnNpemUueSA+IDApXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24ueTtcclxuICAgICAgcmV0dXJuICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLnNpemUueSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiB0aGUgcmlnaHRtb3N0IGV4cGFuc2lvbiwgcmVzcGVjdGluZyBhbHNvIG5lZ2F0aXZlIHZhbHVlcyBvZiB3aWR0aFxyXG4gICAgICovXHJcbiAgICBnZXQgcmlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgaWYgKHRoaXMuc2l6ZS54ID4gMClcclxuICAgICAgICByZXR1cm4gKHRoaXMucG9zaXRpb24ueCArIHRoaXMuc2l6ZS54KTtcclxuICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24ueDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRoZSBsb3dlc3QgZXhwYW5zaW9uLCByZXNwZWN0aW5nIGFsc28gbmVnYXRpdmUgdmFsdWVzIG9mIGhlaWdodFxyXG4gICAgICovXHJcbiAgICBnZXQgYm90dG9tKCk6IG51bWJlciB7XHJcbiAgICAgIGlmICh0aGlzLnNpemUueSA+IDApXHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLnNpemUueSk7XHJcbiAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHgoX3g6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnBvc2l0aW9uLnggPSBfeDtcclxuICAgIH1cclxuICAgIHNldCB5KF95OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5wb3NpdGlvbi55ID0gX3k7XHJcbiAgICB9XHJcbiAgICBzZXQgd2lkdGgoX3dpZHRoOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5zaXplLnggPSBfd2lkdGg7XHJcbiAgICB9XHJcbiAgICBzZXQgaGVpZ2h0KF9oZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnNpemUueSA9IF9oZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBzZXQgbGVmdChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnNpemUueCA9IHRoaXMucmlnaHQgLSBfdmFsdWU7XHJcbiAgICAgIHRoaXMucG9zaXRpb24ueCA9IF92YWx1ZTtcclxuICAgIH1cclxuICAgIHNldCB0b3AoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5zaXplLnkgPSB0aGlzLmJvdHRvbSAtIF92YWx1ZTtcclxuICAgICAgdGhpcy5wb3NpdGlvbi55ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IHJpZ2h0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuc2l6ZS54ID0gdGhpcy5wb3NpdGlvbi54ICsgX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IGJvdHRvbShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLnNpemUueSA9IHRoaXMucG9zaXRpb24ueSArIF92YWx1ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGdldCBjbG9uZSgpOiBSZWN0YW5nbGUge1xyXG4gICAgICByZXR1cm4gUmVjdGFuZ2xlLkdFVCh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWN5Y2xlKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNldFBvc2l0aW9uQW5kU2l6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb3B5KF9yZWN0OiBSZWN0YW5nbGUpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZXRQb3NpdGlvbkFuZFNpemUoX3JlY3QueCwgX3JlY3QueSwgX3JlY3Qud2lkdGgsIF9yZWN0LmhlaWdodCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBwb3NpdGlvbiBhbmQgc2l6ZSBvZiB0aGUgcmVjdGFuZ2xlIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gcGFyYW1ldGVyc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0UG9zaXRpb25BbmRTaXplKF94OiBudW1iZXIgPSAwLCBfeTogbnVtYmVyID0gMCwgX3dpZHRoOiBudW1iZXIgPSAxLCBfaGVpZ2h0OiBudW1iZXIgPSAxLCBfb3JpZ2luOiBPUklHSU4yRCA9IE9SSUdJTjJELlRPUExFRlQpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zaXplLnNldChfd2lkdGgsIF9oZWlnaHQpO1xyXG4gICAgICBzd2l0Y2ggKF9vcmlnaW4gJiAweDAzKSB7XHJcbiAgICAgICAgY2FzZSAweDAwOiB0aGlzLnBvc2l0aW9uLnggPSBfeDsgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAweDAxOiB0aGlzLnBvc2l0aW9uLnggPSBfeCAtIF93aWR0aCAvIDI7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMHgwMjogdGhpcy5wb3NpdGlvbi54ID0gX3ggLSBfd2lkdGg7IGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHN3aXRjaCAoX29yaWdpbiAmIDB4MzApIHtcclxuICAgICAgICBjYXNlIDB4MDA6IHRoaXMucG9zaXRpb24ueSA9IF95OyBicmVhaztcclxuICAgICAgICBjYXNlIDB4MTA6IHRoaXMucG9zaXRpb24ueSA9IF95IC0gX2hlaWdodCAvIDI7IGJyZWFrO1xyXG4gICAgICAgIGNhc2UgMHgyMDogdGhpcy5wb3NpdGlvbi55ID0gX3kgLSBfaGVpZ2h0OyBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwb2ludFRvUmVjdChfcG9pbnQ6IFZlY3RvcjIsIF90YXJnZXQ6IFJlY3RhbmdsZSk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgcmVzdWx0OiBWZWN0b3IyID0gX3BvaW50LmNsb25lO1xyXG4gICAgICByZXN1bHQuc3VidHJhY3QodGhpcy5wb3NpdGlvbik7XHJcbiAgICAgIHJlc3VsdC54ICo9IF90YXJnZXQud2lkdGggLyB0aGlzLndpZHRoO1xyXG4gICAgICByZXN1bHQueSAqPSBfdGFyZ2V0LmhlaWdodCAvIHRoaXMuaGVpZ2h0O1xyXG4gICAgICByZXN1bHQuYWRkKF90YXJnZXQucG9zaXRpb24pO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBwb2ludCBpcyBpbnNpZGUgb2YgdGhpcyByZWN0YW5nbGUgb3Igb24gdGhlIGJvcmRlclxyXG4gICAgICogQHBhcmFtIF9wb2ludFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNJbnNpZGUoX3BvaW50OiBWZWN0b3IyKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiAoX3BvaW50LnggPj0gdGhpcy5sZWZ0ICYmIF9wb2ludC54IDw9IHRoaXMucmlnaHQgJiYgX3BvaW50LnkgPj0gdGhpcy50b3AgJiYgX3BvaW50LnkgPD0gdGhpcy5ib3R0b20pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgcmVjdGFuZ2xlIGNvbGxpZGVzIHdpdGggdGhlIHJlY3RhbmdsZSBnaXZlblxyXG4gICAgICogQHBhcmFtIF9yZWN0IFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29sbGlkZXMoX3JlY3Q6IFJlY3RhbmdsZSk6IGJvb2xlYW4ge1xyXG4gICAgICBpZiAodGhpcy5sZWZ0ID4gX3JlY3QucmlnaHQpIHJldHVybiBmYWxzZTtcclxuICAgICAgaWYgKHRoaXMucmlnaHQgPCBfcmVjdC5sZWZ0KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLnRvcCA+IF9yZWN0LmJvdHRvbSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAodGhpcy5ib3R0b20gPCBfcmVjdC50b3ApIHJldHVybiBmYWxzZTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSByZWN0YW5nbGUgY3JlYXRlZCBieSB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoaXMgYW5kIHRoZSBnaXZlbiByZWN0YW5nbGUgb3IgbnVsbCwgaWYgdGhleSBkb24ndCBjb2xsaWRlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRJbnRlcnNlY3Rpb24oX3JlY3Q6IFJlY3RhbmdsZSk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIGlmICghdGhpcy5jb2xsaWRlcyhfcmVjdCkpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICBsZXQgaW50ZXJzZWN0aW9uOiBSZWN0YW5nbGUgPSBuZXcgUmVjdGFuZ2xlKCk7XHJcbiAgICAgIGludGVyc2VjdGlvbi54ID0gTWF0aC5tYXgodGhpcy5sZWZ0LCBfcmVjdC5sZWZ0KTtcclxuICAgICAgaW50ZXJzZWN0aW9uLnkgPSBNYXRoLm1heCh0aGlzLnRvcCwgX3JlY3QudG9wKTtcclxuICAgICAgaW50ZXJzZWN0aW9uLndpZHRoID0gTWF0aC5taW4odGhpcy5yaWdodCwgX3JlY3QucmlnaHQpIC0gaW50ZXJzZWN0aW9uLng7XHJcbiAgICAgIGludGVyc2VjdGlvbi5oZWlnaHQgPSBNYXRoLm1pbih0aGlzLmJvdHRvbSwgX3JlY3QuYm90dG9tKSAtIGludGVyc2VjdGlvbi55O1xyXG5cclxuICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICogUmV0dXJucyB0aGUgcmVjdGFuZ2xlIGNyZWF0ZWQgYnkgdGhlIGludGVyc2VjdGlvbiBvZiB0aGlzIGFuZCB0aGUgZ2l2ZW4gcmVjdGFuZ2xlIG9yIG51bGwsIGlmIHRoZXkgZG9uJ3QgY29sbGlkZVxyXG4gKi9cclxuICAgIHB1YmxpYyBjb3ZlcnMoX3JlY3Q6IFJlY3RhbmdsZSk6IGJvb2xlYW4ge1xyXG4gICAgICBpZiAodGhpcy5sZWZ0ID4gX3JlY3QubGVmdCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAodGhpcy5yaWdodCA8IF9yZWN0LnJpZ2h0KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmICh0aGlzLnRvcCA+IF9yZWN0LnRvcCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAodGhpcy5ib3R0b20gPCBfcmVjdC5ib3R0b20pIHJldHVybiBmYWxzZTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcmVjdGFuZ2xlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgcmVzdWx0OiBzdHJpbmcgPSBgxpIuUmVjdGFuZ2xlKHBvc2l0aW9uOiR7dGhpcy5wb3NpdGlvbi50b1N0cmluZygpfSwgc2l6ZToke3RoaXMuc2l6ZS50b1N0cmluZygpfWA7XHJcbiAgICAgIHJlc3VsdCArPSBgLCBsZWZ0OiR7dGhpcy5sZWZ0LnRvUHJlY2lzaW9uKDUpfSwgdG9wOiR7dGhpcy50b3AudG9QcmVjaXNpb24oNSl9LCByaWdodDoke3RoaXMucmlnaHQudG9QcmVjaXNpb24oNSl9LCBib3R0b206JHt0aGlzLmJvdHRvbS50b1ByZWNpc2lvbig1KX1gO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7LyogKi8gfVxyXG4gIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIlJlbmRlckluamVjdG9yLnRzXCIvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJSZW5kZXJJbmplY3RvclNoYWRlci50c1wiLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiUmVuZGVySW5qZWN0b3JDb2F0LnRzXCIvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJSZW5kZXJJbmplY3Rvck1lc2gudHNcIi8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIlJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0udHNcIi8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIlJlbmRlckluamVjdG9yQ29tcG9uZW50UGFydGljbGVTeXN0ZW0udHNcIi8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL01hdGgvUmVjdGFuZ2xlLnRzXCIvPlxyXG5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLy8gZXhwb3J0IGRlY2xhcmUgbGV0IGZ1ZGdlQ29uZmlnOiBHZW5lcmFsO1xyXG5cclxuICBleHBvcnQgdHlwZSBSZW5kZXJUZXh0dXJlID0gV2ViR0xUZXh0dXJlO1xyXG5cclxuICBleHBvcnQgZW51bSBCTEVORCB7XHJcbiAgICBPUEFRVUUsIFRSQU5TUEFSRU5ULCBBRERJVElWRSwgU1VCVFJBQ1RJVkUsIE1PRFVMQVRFXHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEJ1ZmZlclNwZWNpZmljYXRpb24ge1xyXG4gICAgc2l6ZTogbnVtYmVyOyAgIC8vIFRoZSBzaXplIG9mIHRoZSBkYXRhc2FtcGxlLlxyXG4gICAgZGF0YVR5cGU6IG51bWJlcjsgLy8gVGhlIGRhdGF0eXBlIG9mIHRoZSBzYW1wbGUgKGUuZy4gZ2wuRkxPQVQsIGdsLkJZVEUsIGV0Yy4pXHJcbiAgICBub3JtYWxpemU6IGJvb2xlYW47IC8vIEZsYWcgdG8gbm9ybWFsaXplIHRoZSBkYXRhLlxyXG4gICAgc3RyaWRlOiBudW1iZXI7IC8vIE51bWJlciBvZiBpbmRpY2VzIHRoYXQgd2lsbCBiZSBza2lwcGVkIGVhY2ggaXRlcmF0aW9uLlxyXG4gICAgb2Zmc2V0OiBudW1iZXI7IC8vIEluZGV4IG9mIHRoZSBlbGVtZW50IHRvIGJlZ2luIHdpdGguXHJcbiAgfVxyXG5cclxuICBleHBvcnQgY29uc3QgVU5JRk9STV9CTE9DS1M6IHsgW2Jsb2NrOiBzdHJpbmddOiB7IE5BTUU6IHN0cmluZzsgQklORElORzogbnVtYmVyIH0gfSA9IHtcclxuICAgIExJR0hUUzoge1xyXG4gICAgICBOQU1FOiBcIkxpZ2h0c1wiLFxyXG4gICAgICBCSU5ESU5HOiAwXHJcbiAgICB9LFxyXG4gICAgU0tJTjoge1xyXG4gICAgICBOQU1FOiBcIlNraW5cIixcclxuICAgICAgQklORElORzogMVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEJhc2UgY2xhc3MgZm9yIFJlbmRlck1hbmFnZXIsIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIHRvIHRoZSByZW5kZXJpbmcgc3lzdGVtLCBpbiB0aGlzIGNhc2UgV2ViR0wuXHJcbiAgICogTWV0aG9kcyBhbmQgYXR0cmlidXRlcyBvZiB0aGlzIGNsYXNzIHNob3VsZCBub3QgYmUgY2FsbGVkIGRpcmVjdGx5LCBvbmx5IHRocm91Z2gge0BsaW5rIFJlbmRlcn1cclxuICAgKi9cclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVuZGVyV2ViR0wgZXh0ZW5kcyBFdmVudFRhcmdldFN0YXRpYyB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHVib0xpZ2h0czogV2ViR0xCdWZmZXI7XHJcbiAgICBwdWJsaWMgc3RhdGljIHVib0xpZ2h0c1ZhcmlhYmxlT2Zmc2V0czogeyBbX25hbWU6IHN0cmluZ106IG51bWJlciB9OyAvLyBNYXBzIHRoZSBuYW1lcyBvZiB0aGUgdmFyaWFibGVzIGluc2lkZSB0aGUgTGlnaHRzIHVuaWZvcm0gYmxvY2sgdG8gdGhlaXIgcmVzcGVjdGl2ZSBieXRlIG9mZnNldFxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCA9IFJlbmRlcldlYkdMLmluaXRpYWxpemUoKTtcclxuICAgIHByb3RlY3RlZCBzdGF0aWMgxpJwaWNrZWQ6IFBpY2tbXTtcclxuICAgIHByaXZhdGUgc3RhdGljIHJlY3RSZW5kZXI6IFJlY3RhbmdsZSA9IFJlbmRlcldlYkdMLmdldENhbnZhc1JlY3QoKTtcclxuICAgIHByaXZhdGUgc3RhdGljIHNpemVQaWNrOiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBvZmZzY3JlZW4tY2FudmFzLCByZW5kZXJpbmdjb250ZXh0IGFuZCBoYXJkd2FyZSB2aWV3cG9ydC4gQ2FsbCBvbmNlIGJlZm9yZSBjcmVhdGluZyBhbnkgcmVzb3VyY2VzIGxpa2UgbWVzaGVzIG9yIHNoYWRlcnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBpbml0aWFsaXplKF9hbnRpYWxpYXM/OiBib29sZWFuLCBfYWxwaGE/OiBib29sZWFuKTogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCB7XHJcbiAgICAgIGxldCBmdWRnZUNvbmZpZzogR2VuZXJhbCA9IFJlZmxlY3QuZ2V0KGdsb2JhbFRoaXMsXCJmdWRnZUNvbmZpZ1wiKSB8fCB7fTtcclxuICAgICAgbGV0IGNvbnRleHRBdHRyaWJ1dGVzOiBXZWJHTENvbnRleHRBdHRyaWJ1dGVzID0ge1xyXG4gICAgICAgIGFscGhhOiAoX2FscGhhICE9IHVuZGVmaW5lZCkgPyBfYWxwaGEgOiBmdWRnZUNvbmZpZy5hbHBoYSB8fCBmYWxzZSxcclxuICAgICAgICBhbnRpYWxpYXM6IChfYW50aWFsaWFzICE9IHVuZGVmaW5lZCkgPyBfYW50aWFsaWFzIDogZnVkZ2VDb25maWcuYW50aWFsaWFzIHx8IGZhbHNlLFxyXG4gICAgICAgIHByZW11bHRpcGxpZWRBbHBoYTogZmFsc2VcclxuICAgICAgfTtcclxuICAgICAgRGVidWcuZnVkZ2UoXCJJbml0aWFsaXplIFJlbmRlcldlYkdMXCIsIGNvbnRleHRBdHRyaWJ1dGVzKTtcclxuICAgICAgbGV0IGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICBsZXQgY3JjMzogV2ViR0wyUmVuZGVyaW5nQ29udGV4dDtcclxuICAgICAgY3JjMyA9IFJlbmRlcldlYkdMLmFzc2VydDxXZWJHTDJSZW5kZXJpbmdDb250ZXh0PihcclxuICAgICAgICBjYW52YXMuZ2V0Q29udGV4dChcIndlYmdsMlwiLCBjb250ZXh0QXR0cmlidXRlcyksXHJcbiAgICAgICAgXCJXZWJHTC1jb250ZXh0IGNvdWxkbid0IGJlIGNyZWF0ZWRcIlxyXG4gICAgICApO1xyXG4gICAgICBSZW5kZXJXZWJHTC5jcmMzID0gY3JjMztcclxuICAgICAgLy8gRW5hYmxlIGJhY2tmYWNlLSBhbmQgekJ1ZmZlci1jdWxsaW5nLlxyXG4gICAgICBjcmMzLmVuYWJsZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkNVTExfRkFDRSk7XHJcbiAgICAgIGNyYzMuZW5hYmxlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuREVQVEhfVEVTVCk7XHJcbiAgICAgIGNyYzMuZW5hYmxlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQkxFTkQpO1xyXG4gICAgICBjcmMzLmJsZW5kRXF1YXRpb24oV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GVU5DX0FERCk7XHJcbiAgICAgIFJlbmRlcldlYkdMLnNldEJsZW5kTW9kZShCTEVORC5UUkFOU1BBUkVOVCk7XHJcbiAgICAgIC8vIFJlbmRlck9wZXJhdG9yLmNyYzMucGl4ZWxTdG9yZWkoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTlBBQ0tfRkxJUF9ZX1dFQkdMLCB0cnVlKTtcclxuICAgICAgUmVuZGVyV2ViR0wucmVjdFJlbmRlciA9IFJlbmRlcldlYkdMLmdldENhbnZhc1JlY3QoKTtcclxuXHJcbiAgICAgIHJldHVybiBjcmMzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIFdyYXBwZXIgZnVuY3Rpb24gdG8gdXRpbGl6ZSB0aGUgYnVmZmVyU3BlY2lmaWNhdGlvbiBpbnRlcmZhY2Ugd2hlbiBwYXNzaW5nIGRhdGEgdG8gdGhlIHNoYWRlciB2aWEgYSBidWZmZXIuXHJcbiAgICAgKiBAcGFyYW0gX2F0dHJpYnV0ZUxvY2F0aW9uICBUaGUgbG9jYXRpb24gb2YgdGhlIGF0dHJpYnV0ZSBvbiB0aGUgc2hhZGVyLCB0byB3aGljaCB0aGV5IGRhdGEgd2lsbCBiZSBwYXNzZWQuXHJcbiAgICAgKiBAcGFyYW0gX2J1ZmZlclNwZWNpZmljYXRpb24gIEludGVyZmFjZSBwYXNzaW5nIGRhdGFwdWxsc3BlY2lmaWNhdGlvbnMgdG8gdGhlIGJ1ZmZlci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRBdHRyaWJ1dGVTdHJ1Y3R1cmUoX2F0dHJpYnV0ZUxvY2F0aW9uOiBudW1iZXIsIF9idWZmZXJTcGVjaWZpY2F0aW9uOiBCdWZmZXJTcGVjaWZpY2F0aW9uKTogdm9pZCB7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMudmVydGV4QXR0cmliUG9pbnRlcihfYXR0cmlidXRlTG9jYXRpb24sIF9idWZmZXJTcGVjaWZpY2F0aW9uLnNpemUsIF9idWZmZXJTcGVjaWZpY2F0aW9uLmRhdGFUeXBlLCBfYnVmZmVyU3BlY2lmaWNhdGlvbi5ub3JtYWxpemUsIF9idWZmZXJTcGVjaWZpY2F0aW9uLnN0cmlkZSwgX2J1ZmZlclNwZWNpZmljYXRpb24ub2Zmc2V0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQ2hlY2tzIHRoZSBmaXJzdCBwYXJhbWV0ZXIgYW5kIHRocm93cyBhbiBleGNlcHRpb24gd2l0aCB0aGUgV2ViR0wtZXJyb3Jjb2RlIGlmIHRoZSB2YWx1ZSBpcyBudWxsXHJcbiAgICAqIEBwYXJhbSBfdmFsdWUgIHZhbHVlIHRvIGNoZWNrIGFnYWluc3QgbnVsbFxyXG4gICAgKiBAcGFyYW0gX21lc3NhZ2UgIG9wdGlvbmFsLCBhZGRpdGlvbmFsIG1lc3NhZ2UgZm9yIHRoZSBleGNlcHRpb25cclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzc2VydDxUPihfdmFsdWU6IFQgfCBudWxsLCBfbWVzc2FnZTogc3RyaW5nID0gXCJcIik6IFQge1xyXG4gICAgICBpZiAoX3ZhbHVlID09PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXNzZXJ0aW9uIGZhaWxlZC4gJHtfbWVzc2FnZX0sIFdlYkdMLUVycm9yOiAke1JlbmRlcldlYkdMLmNyYzMgPyBSZW5kZXJXZWJHTC5jcmMzLmdldEVycm9yKCkgOiBcIlwifWApO1xyXG4gICAgICByZXR1cm4gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSBvZmZzY3JlZW4tY2FudmFzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q2FudmFzKCk6IEhUTUxDYW52YXNFbGVtZW50IHtcclxuICAgICAgcmV0dXJuIDxIVE1MQ2FudmFzRWxlbWVudD5SZW5kZXJXZWJHTC5jcmMzLmNhbnZhczsgLy8gVE9ETzogZW5hYmxlIE9mZnNjcmVlbkNhbnZhc1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSByZW5kZXJpbmcgY29udGV4dFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFJlbmRlcmluZ0NvbnRleHQoKTogV2ViR0wyUmVuZGVyaW5nQ29udGV4dCB7XHJcbiAgICAgIHJldHVybiBSZW5kZXJXZWJHTC5jcmMzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgcmVjdGFuZ2xlIGRlc2NyaWJpbmcgdGhlIHNpemUgb2YgdGhlIG9mZnNjcmVlbi1jYW52YXMuIHgseSBhcmUgMCBhdCBhbGwgdGltZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q2FudmFzUmVjdCgpOiBSZWN0YW5nbGUge1xyXG4gICAgICBsZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IDxIVE1MQ2FudmFzRWxlbWVudD5SZW5kZXJXZWJHTC5jcmMzLmNhbnZhcztcclxuICAgICAgcmV0dXJuIFJlY3RhbmdsZS5HRVQoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgc2l6ZSBvZiB0aGUgb2Zmc2NyZWVuLWNhbnZhcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRDYW52YXNTaXplKF93aWR0aDogbnVtYmVyLCBfaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy5jYW52YXMud2lkdGggPSBfd2lkdGg7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMuY2FudmFzLmhlaWdodCA9IF9oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGFyZWEgb24gdGhlIG9mZnNjcmVlbi1jYW52YXMgdG8gcmVuZGVyIHRoZSBjYW1lcmEgaW1hZ2UgdG8uXHJcbiAgICAgKiBAcGFyYW0gX3JlY3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzZXRSZW5kZXJSZWN0YW5nbGUoX3JlY3Q6IFJlY3RhbmdsZSk6IHZvaWQge1xyXG4gICAgICBSZW5kZXJXZWJHTC5yZWN0UmVuZGVyLnNldFBvc2l0aW9uQW5kU2l6ZShfcmVjdC54LCBfcmVjdC55LCBfcmVjdC53aWR0aCwgX3JlY3QuaGVpZ2h0KTtcclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy52aWV3cG9ydChfcmVjdC54LCBfcmVjdC55LCBfcmVjdC53aWR0aCwgX3JlY3QuaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsZWFyIHRoZSBvZmZzY3JlZW4gcmVuZGVyYnVmZmVyIHdpdGggdGhlIGdpdmVuIHtAbGluayBDb2xvcn1cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGVhcihfY29sb3I6IENvbG9yID0gbnVsbCk6IHZvaWQge1xyXG4gICAgICBSZW5kZXJXZWJHTC5jcmMzLmNsZWFyQ29sb3IoX2NvbG9yLnIsIF9jb2xvci5nLCBfY29sb3IuYiwgX2NvbG9yLmEpO1xyXG4gICAgICBSZW5kZXJXZWJHTC5jcmMzLmNsZWFyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQ09MT1JfQlVGRkVSX0JJVCB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuREVQVEhfQlVGRkVSX0JJVCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldCB0aGUgb2Zmc2NyZWVuIGZyYW1lYnVmZmVyIHRvIHRoZSBvcmlnaW5hbCBSZW5kZXJpbmdDb250ZXh0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVzZXRGcmFtZUJ1ZmZlcihfZnJhbWVCdWZmZXI6IFdlYkdMRnJhbWVidWZmZXIgPSBudWxsKTogdm9pZCB7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmluZEZyYW1lYnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIF9mcmFtZUJ1ZmZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgYXJlYSBvbiB0aGUgb2Zmc2NyZWVuLWNhbnZhcyB0aGUgY2FtZXJhIGltYWdlIGdldHMgcmVuZGVyZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UmVuZGVyUmVjdGFuZ2xlKCk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIHJldHVybiBSZW5kZXJXZWJHTC5yZWN0UmVuZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0RGVwdGhUZXN0KF90ZXN0OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIGlmIChfdGVzdClcclxuICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLmVuYWJsZShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkRFUFRIX1RFU1QpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5kaXNhYmxlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuREVQVEhfVEVTVCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBzZXRCbGVuZE1vZGUoX21vZGU6IEJMRU5EKTogdm9pZCB7XHJcbiAgICAgIHN3aXRjaCAoX21vZGUpIHtcclxuICAgICAgICBjYXNlIEJMRU5ELk9QQVFVRTpcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRFcXVhdGlvbihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZVTkNfQUREKTtcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRGdW5jKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuT05FLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlpFUk8pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCTEVORC5UUkFOU1BBUkVOVDpcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRFcXVhdGlvbihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZVTkNfQUREKTtcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRGdW5jKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuU1JDX0FMUEhBLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk9ORV9NSU5VU19TUkNfQUxQSEEpO1xyXG4gICAgICAgICAgLy8gUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEZ1bmMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5EU1RfQUxQSEEsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuT05FX01JTlVTX0RTVF9BTFBIQSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJMRU5ELkFERElUSVZFOlxyXG4gICAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEVxdWF0aW9uKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlVOQ19BREQpO1xyXG4gICAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEZ1bmMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5TUkNfQUxQSEEsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRFNUX0FMUEhBKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQkxFTkQuU1VCVFJBQ1RJVkU6XHJcbiAgICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLmJsZW5kRXF1YXRpb24oV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GVU5DX1JFVkVSU0VfU1VCVFJBQ1QpO1xyXG4gICAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5ibGVuZEZ1bmMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5TUkNfQUxQSEEsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRFNUX0FMUEhBKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQkxFTkQuTU9EVUxBVEU6IC8vIGNvbG9yIGdldHMgbXVsdGlwbGllZCwgdHJpZWQgdG8gY29weSB1bml0eXMgXCJQYXJ0aWNsZSBTaGFkZXI6IEJsZW5kaW5nIE9wdGlvbjogUmVuZGVyaW5nIE1vZGU6IE1vZHVsYXRlXCJcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRFcXVhdGlvbihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkZVTkNfQUREKTtcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYmxlbmRGdW5jKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRFNUX0NPTE9SLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk9ORV9NSU5VU19TUkNfQUxQSEEpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBQaWNraW5nXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB0ZXh0dXJlIGJ1ZmZlciB0byBiZSB1c2VkIGFzIHBpY2stYnVmZmVyXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgY3JlYXRlUGlja1RleHR1cmUoX3NpemU6IG51bWJlcik6IFJlbmRlclRleHR1cmUge1xyXG4gICAgICAvLyBjcmVhdGUgdG8gcmVuZGVyIHRvXHJcbiAgICAgIGNvbnN0IHRhcmdldFRleHR1cmU6IFJlbmRlclRleHR1cmUgPSBSZW5kZXIuY3JjMy5jcmVhdGVUZXh0dXJlKCk7XHJcbiAgICAgIFJlbmRlci5jcmMzLmJpbmRUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgdGFyZ2V0VGV4dHVyZSk7XHJcblxyXG4gICAgICB7XHJcbiAgICAgICAgY29uc3QgaW50ZXJuYWxGb3JtYXQ6IG51bWJlciA9IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkdCQTMySTtcclxuICAgICAgICBjb25zdCBmb3JtYXQ6IG51bWJlciA9IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkdCQV9JTlRFR0VSO1xyXG4gICAgICAgIGNvbnN0IHR5cGU6IG51bWJlciA9IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuSU5UO1xyXG4gICAgICAgIFJlbmRlci5waWNrQnVmZmVyID0gbmV3IEludDMyQXJyYXkoX3NpemUgKiBfc2l6ZSAqIDQpO1xyXG4gICAgICAgIFJlbmRlci5jcmMzLnRleEltYWdlMkQoXHJcbiAgICAgICAgICBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIDAsIGludGVybmFsRm9ybWF0LCBfc2l6ZSwgX3NpemUsIDAsIGZvcm1hdCwgdHlwZSwgUmVuZGVyLnBpY2tCdWZmZXJcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBzZXQgdGhlIGZpbHRlcmluZyBzbyB3ZSBkb24ndCBuZWVkIG1pcHNcclxuICAgICAgICBSZW5kZXIuY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX01JTl9GSUxURVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTElORUFSKTtcclxuICAgICAgICBSZW5kZXIuY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX1dSQVBfUywgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DTEFNUF9UT19FREdFKTtcclxuICAgICAgICBSZW5kZXIuY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX1dSQVBfVCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5DTEFNUF9UT19FREdFKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZnJhbWVidWZmZXI6IFdlYkdMRnJhbWVidWZmZXIgPSBSZW5kZXIuY3JjMy5jcmVhdGVGcmFtZWJ1ZmZlcigpO1xyXG4gICAgICBSZW5kZXIuY3JjMy5iaW5kRnJhbWVidWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GUkFNRUJVRkZFUiwgZnJhbWVidWZmZXIpO1xyXG4gICAgICBjb25zdCBhdHRhY2htZW50UG9pbnQ6IG51bWJlciA9IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQ09MT1JfQVRUQUNITUVOVDA7XHJcbiAgICAgIFJlbmRlci5jcmMzLmZyYW1lYnVmZmVyVGV4dHVyZTJEKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuRlJBTUVCVUZGRVIsIGF0dGFjaG1lbnRQb2ludCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCB0YXJnZXRUZXh0dXJlLCAwKTtcclxuXHJcbiAgICAgIFJlbmRlcldlYkdMLnNpemVQaWNrID0gX3NpemU7XHJcbiAgICAgIHJldHVybiB0YXJnZXRUZXh0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgZ2V0UGlja3MoX3NpemU6IG51bWJlciwgX2NtcENhbWVyYTogQ29tcG9uZW50Q2FtZXJhKTogUGlja1tdIHtcclxuICAgICAgLy8gZXZhbHVhdGUgdGV4dHVyZSBieSByZWFkaW5nIHBpeGVscyBhbmQgZXh0cmFjdCwgY29udmVydCBhbmQgc3RvcmUgdGhlIGluZm9ybWF0aW9uIGFib3V0IGVhY2ggbWVzaCBoaXRcclxuICAgICAgbGV0IGRhdGE6IEludDMyQXJyYXkgPSBuZXcgSW50MzJBcnJheShfc2l6ZSAqIF9zaXplICogNCk7XHJcbiAgICAgIFJlbmRlci5jcmMzLnJlYWRQaXhlbHMoMCwgMCwgX3NpemUsIF9zaXplLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlJHQkFfSU5URUdFUiwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5JTlQsIGRhdGEpO1xyXG5cclxuICAgICAgbGV0IG10eFZpZXdUb1dvcmxkOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSU5WRVJTSU9OKF9jbXBDYW1lcmEubXR4V29ybGRUb1ZpZXcpO1xyXG4gICAgICBsZXQgcGlja2VkOiBQaWNrW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IFJlbmRlci7GknBpY2tlZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCB6QnVmZmVyOiBudW1iZXIgPSBkYXRhWzQgKiBpICsgMF0gKyBkYXRhWzQgKiBpICsgMV0gLyAyNTY7XHJcbiAgICAgICAgaWYgKHpCdWZmZXIgPT0gMCkgLy8gZGlzY2FyZCBtaXNzZXMgXHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICBsZXQgcGljazogUGljayA9IFJlbmRlci7GknBpY2tlZFtpXTtcclxuICAgICAgICBwaWNrLnpCdWZmZXIgPSBjb252ZXJ0SW50MzJ0b0Zsb2F0MzIoZGF0YSwgNCAqIGkgKyAwKSAqIDIgLSAxO1xyXG4gICAgICAgIHBpY2suY29sb3IgPSBjb252ZXJ0SW50MzJ0b0NvbG9yKGRhdGEsIDQgKiBpICsgMSk7XHJcbiAgICAgICAgcGljay50ZXh0dXJlVVYgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMik7XHJcbiAgICAgICAgcGljay50ZXh0dXJlVVYuc2V0KGNvbnZlcnRJbnQzMnRvRmxvYXQzMihkYXRhLCA0ICogaSArIDIpLCBjb252ZXJ0SW50MzJ0b0Zsb2F0MzIoZGF0YSwgNCAqIGkgKyAzKSk7XHJcbiAgICAgICAgcGljay5tdHhWaWV3VG9Xb3JsZCA9IG10eFZpZXdUb1dvcmxkO1xyXG5cclxuICAgICAgICBwaWNrZWQucHVzaChwaWNrKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHBpY2tlZDtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNvbnZlcnRJbnQzMnRvRmxvYXQzMihfaW50MzJBcnJheTogSW50MzJBcnJheSwgX2luZGV4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBidWZmZXI6IEFycmF5QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDQpO1xyXG4gICAgICAgIGxldCB2aWV3OiBEYXRhVmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xyXG4gICAgICAgIHZpZXcuc2V0SW50MzIoMCwgX2ludDMyQXJyYXlbX2luZGV4XSk7XHJcbiAgICAgICAgcmV0dXJuIHZpZXcuZ2V0RmxvYXQzMigwKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gY29udmVydEludDMydG9Db2xvcihfaW50MzJBcnJheTogSW50MzJBcnJheSwgX2luZGV4OiBudW1iZXIpOiBDb2xvciB7XHJcbiAgICAgICAgbGV0IGJ1ZmZlcjogQXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNCk7XHJcbiAgICAgICAgbGV0IHZpZXc6IERhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XHJcbiAgICAgICAgdmlldy5zZXRJbnQzMigwLCBfaW50MzJBcnJheVtfaW5kZXhdKTtcclxuICAgICAgICBsZXQgY29sb3I6IENvbG9yID0gQ29sb3IuQ1NTKGByZ2IoJHt2aWV3LmdldFVpbnQ4KDApfSwgJHt2aWV3LmdldFVpbnQ4KDEpfSwgJHt2aWV3LmdldFVpbnQ4KDIpfSlgLCB2aWV3LmdldFVpbnQ4KDMpIC8gMjU1KTtcclxuICAgICAgICByZXR1cm4gY29sb3I7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogVGhlIHJlbmRlciBmdW5jdGlvbiBmb3IgcGlja2luZyBhIHNpbmdsZSBub2RlLiBcclxuICAgICogQSBjYW1lcmFwcm9qZWN0aW9uIHdpdGggZXh0cmVtZWx5IG5hcnJvdyBmb2N1cyBpcyB1c2VkLCBzbyBlYWNoIHBpeGVsIG9mIHRoZSBidWZmZXIgd291bGQgaG9sZCB0aGUgc2FtZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBub2RlLCAgXHJcbiAgICAqIGJ1dCB0aGUgZnJhZ21lbnQgc2hhZGVyIHJlbmRlcnMgb25seSAxIHBpeGVsIGZvciBlYWNoIG5vZGUgaW50byB0aGUgcmVuZGVyIGJ1ZmZlciwgMXN0IG5vZGUgdG8gMXN0IHBpeGVsLCAybmQgbm9kZSB0byBzZWNvbmQgcGl4ZWwgZXRjLlxyXG4gICAgKi9cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcGljayhfbm9kZTogTm9kZSwgX210eE1lc2hUb1dvcmxkOiBNYXRyaXg0eDQsIF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSk6IHZvaWQgeyAvLyBjcmVhdGUgVGV4dHVyZSB0byByZW5kZXIgdG8sIGludC1yZ2JhXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IGNtcE1lc2g6IENvbXBvbmVudE1lc2ggPSBfbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk7XHJcbiAgICAgICAgbGV0IGNtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCA9IF9ub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNYXRlcmlhbCk7XHJcbiAgICAgICAgbGV0IGNvYXQ6IENvYXQgPSBjbXBNYXRlcmlhbC5tYXRlcmlhbC5jb2F0O1xyXG4gICAgICAgIGxldCBzaGFkZXI6IFNoYWRlckludGVyZmFjZSA9IGNvYXQgaW5zdGFuY2VvZiBDb2F0VGV4dHVyZWQgPyBTaGFkZXJQaWNrVGV4dHVyZWQgOiBTaGFkZXJQaWNrO1xyXG5cclxuICAgICAgICBzaGFkZXIudXNlUHJvZ3JhbSgpO1xyXG4gICAgICAgIGNvYXQudXNlUmVuZGVyRGF0YShzaGFkZXIsIGNtcE1hdGVyaWFsKTtcclxuICAgICAgICBsZXQgbXR4TWVzaFRvVmlldzogTWF0cml4NHg0ID0gdGhpcy5jYWxjTWVzaFRvVmlldyhfbm9kZSwgY21wTWVzaCwgX2NtcENhbWVyYS5tdHhXb3JsZFRvVmlldywgX2NtcENhbWVyYS5tdHhXb3JsZC50cmFuc2xhdGlvbik7XHJcblxyXG4gICAgICAgIGxldCBzaXplVW5pZm9ybUxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IHNoYWRlci51bmlmb3Jtc1tcInVfdmN0U2l6ZVwiXTtcclxuICAgICAgICBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCkudW5pZm9ybTJmdihzaXplVW5pZm9ybUxvY2F0aW9uLCBbUmVuZGVyV2ViR0wuc2l6ZVBpY2ssIFJlbmRlcldlYkdMLnNpemVQaWNrXSk7XHJcblxyXG4gICAgICAgIGxldCBtZXNoOiBNZXNoID0gY21wTWVzaC5tZXNoO1xyXG4gICAgICAgIGxldCByZW5kZXJCdWZmZXJzOiBSZW5kZXJCdWZmZXJzID0gbWVzaC51c2VSZW5kZXJCdWZmZXJzKHNoYWRlciwgX210eE1lc2hUb1dvcmxkLCBtdHhNZXNoVG9WaWV3LCBSZW5kZXIuxpJwaWNrZWQubGVuZ3RoKTtcclxuICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLmRyYXdFbGVtZW50cyhXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRSSUFOR0xFUywgcmVuZGVyQnVmZmVycy5uSW5kaWNlcywgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTlNJR05FRF9TSE9SVCwgMCk7XHJcblxyXG4gICAgICAgIGxldCBwaWNrOiBQaWNrID0gbmV3IFBpY2soX25vZGUpO1xyXG4gICAgICAgIFJlbmRlci7GknBpY2tlZC5wdXNoKHBpY2spO1xyXG4gICAgICB9IGNhdGNoIChfZXJyb3IpIHtcclxuICAgICAgICAvL1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gTGlnaHRzXHJcbiAgICAvKipcclxuICAgICAqIEJ1ZmZlciB0aGUgZGF0YSBmcm9tIHRoZSBsaWdodHMgaW4gdGhlIHNjZW5lZ3JhcGggaW50byB0aGUgbGlnaHRzIHVib1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGZpbGxMaWdodHNVQk8oX2xpZ2h0czogTWFwTGlnaHRUeXBlVG9MaWdodExpc3QpOiB2b2lkIHtcclxuICAgICAgaWYgKCFSZW5kZXJXZWJHTC51Ym9MaWdodHMpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5JRk9STV9CVUZGRVIsIFJlbmRlcldlYkdMLnVib0xpZ2h0cyk7XHJcblxyXG4gICAgICAvLyBmaWxsIHRoZSBidWZmZXIgd2l0aCB0aGUgYW1iaWVudCBsaWdodCBjb2xvclxyXG4gICAgICBsZXQgY21wTGlnaHRzOiBSZWN5Y2FibGVBcnJheTxDb21wb25lbnRMaWdodD4gPSBfbGlnaHRzLmdldChMaWdodEFtYmllbnQpO1xyXG4gICAgICBpZiAoY21wTGlnaHRzKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDogQ29sb3IgPSBuZXcgQ29sb3IoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgZm9yIChsZXQgY21wTGlnaHQgb2YgY21wTGlnaHRzKVxyXG4gICAgICAgICAgcmVzdWx0LmFkZChjbXBMaWdodC5saWdodC5jb2xvcik7XHJcblxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYnVmZmVyU3ViRGF0YShcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuVU5JRk9STV9CVUZGRVIsXHJcbiAgICAgICAgICBSZW5kZXJXZWJHTC51Ym9MaWdodHNWYXJpYWJsZU9mZnNldHNbXCJ1X2FtYmllbnQudmN0Q29sb3JcIl0sIC8vIGJ5dGUgb2Zmc2V0IG9mIHRoZSBzdHJ1Y3QgTGlnaHQgXCJ1X2FtYmllbnRcIiBpbnNpZGUgdGhlIHVib1xyXG4gICAgICAgICAgbmV3IEZsb2F0MzJBcnJheShyZXN1bHQuZ2V0QXJyYXkoKSlcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBmaWxsIHRoZSBidWZmZXIgd2l0aCB0aGUgbGlnaHQgZGF0YSBmb3IgZWFjaCBsaWdodCB0eXBlXHJcbiAgICAgIC8vIHdlIGFyZSBjdXJyZW50bHkgZG9pbmcgYSBtYXhpbXVtIG9mIDQgY3JjMy5idWZmZXJTdWJEYXRhKCkgY2FsbHMsIGJ1dCB3ZSBjb3VsZCBkbyB0aGlzIGluIG9uZSBjYWxsXHJcbiAgICAgIGZpbGxMaWdodHMoTGlnaHREaXJlY3Rpb25hbCwgXCJ1X25MaWdodHNEaXJlY3Rpb25hbFwiLCBcInVfZGlyZWN0aW9uYWxcIik7XHJcbiAgICAgIGZpbGxMaWdodHMoTGlnaHRQb2ludCwgXCJ1X25MaWdodHNQb2ludFwiLCBcInVfcG9pbnRcIik7XHJcbiAgICAgIGZpbGxMaWdodHMoTGlnaHRTcG90LCBcInVfbkxpZ2h0c1Nwb3RcIiwgXCJ1X3Nwb3RcIik7XHJcblxyXG4gICAgICBSZW5kZXJXZWJHTC5jcmMzLmJpbmRCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5VTklGT1JNX0JVRkZFUiwgbnVsbCk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBmaWxsTGlnaHRzKF90eXBlOiBUeXBlT2ZMaWdodCwgX3VuaU5hbWU6IHN0cmluZywgX3VuaVN0cnVjdDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY21wTGlnaHRzOiBSZWN5Y2FibGVBcnJheTxDb21wb25lbnRMaWdodD4gPSBfbGlnaHRzLmdldChfdHlwZSk7XHJcblxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMuYnVmZmVyU3ViRGF0YShcclxuICAgICAgICAgIFJlbmRlcldlYkdMLmNyYzMuVU5JRk9STV9CVUZGRVIsXHJcbiAgICAgICAgICBSZW5kZXJXZWJHTC51Ym9MaWdodHNWYXJpYWJsZU9mZnNldHNbX3VuaU5hbWVdLCAvLyBieXRlIG9mZnNldCBvZiB0aGUgdWludCBcInVfbkxpZ2h0c0RpcmVjdGlvbmFsXCIgaW5zaWRlIHRoZSB1Ym9cclxuICAgICAgICAgIG5ldyBVaW50OEFycmF5KFtjbXBMaWdodHM/Lmxlbmd0aCA/PyAwXSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBpZiAoIWNtcExpZ2h0cylcclxuICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgbGlnaHREYXRhU2l6ZTogbnVtYmVyID0gNCArIDE2ICsgMTY7IC8vIHZjdENvbG9yICsgbXR4U2hhcGUgKyBtdHhTaGFwZUludmVyc2UsIGFzIGZsb2F0MzJzXHJcbiAgICAgICAgY29uc3QgbGlnaHRzRGF0YTogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShjbXBMaWdodHMubGVuZ3RoICogbGlnaHREYXRhU2l6ZSk7XHJcblxyXG4gICAgICAgIGxldCBpTGlnaHQ6IG51bWJlciA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgY21wTGlnaHQgb2YgY21wTGlnaHRzKSB7XHJcbiAgICAgICAgICBjb25zdCBsaWdodERhdGFPZmZzZXQ6IG51bWJlciA9IGlMaWdodCAqIGxpZ2h0RGF0YVNpemU7XHJcblxyXG4gICAgICAgICAgLy8gc2V0IHZjdENvbG9yXHJcbiAgICAgICAgICBsaWdodHNEYXRhLnNldChjbXBMaWdodC5saWdodC5jb2xvci5nZXRBcnJheSgpLCBsaWdodERhdGFPZmZzZXQgKyAwKTtcclxuXHJcbiAgICAgICAgICAvLyBzZXQgbXR4U2hhcGVcclxuICAgICAgICAgIGxldCBtdHhUb3RhbDogTWF0cml4NHg0ID0gTWF0cml4NHg0Lk1VTFRJUExJQ0FUSU9OKGNtcExpZ2h0Lm5vZGUubXR4V29ybGQsIGNtcExpZ2h0Lm10eFBpdm90KTtcclxuICAgICAgICAgIGxpZ2h0c0RhdGEuc2V0KG10eFRvdGFsLmdldCgpLCBsaWdodERhdGFPZmZzZXQgKyA0KTsgLy8gb2Zmc2V0ICsgdmN0Q29sb3JcclxuXHJcbiAgICAgICAgICAvLyBzZXQgbXR4U2hhcGVJbnZlcnNlXHJcbiAgICAgICAgICBpZiAoX3R5cGUgIT0gTGlnaHREaXJlY3Rpb25hbCkge1xyXG4gICAgICAgICAgICBsZXQgbXR4SW52ZXJzZTogTWF0cml4NHg0ID0gbXR4VG90YWwuaW52ZXJzZSgpO1xyXG4gICAgICAgICAgICBsaWdodHNEYXRhLnNldChtdHhJbnZlcnNlLmdldCgpLCBsaWdodERhdGFPZmZzZXQgKyA0ICsgMTYpOyAvLyBvZmZzZXQgKyB2Y3RDb2xvciArIG10eFNoYXBlXHJcbiAgICAgICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eEludmVyc2UpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFRvdGFsKTtcclxuICAgICAgICAgIGlMaWdodCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5idWZmZXJTdWJEYXRhKFxyXG4gICAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5VTklGT1JNX0JVRkZFUixcclxuICAgICAgICAgIFJlbmRlcldlYkdMLnVib0xpZ2h0c1ZhcmlhYmxlT2Zmc2V0c1tgJHtfdW5pU3RydWN0fVswXS52Y3RDb2xvcmBdLCAvLyBieXRlIG9mZnNldCBvZiB0aGUgc3RydWN0IExpZ2h0IGFycmF5IGluc2lkZSB0aGUgdWJvXHJcbiAgICAgICAgICBsaWdodHNEYXRhXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3IGEgbWVzaCBidWZmZXIgdXNpbmcgdGhlIGdpdmVuIGluZm9zIGFuZCB0aGUgY29tcGxldGUgcHJvamVjdGlvbiBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBkcmF3Tm9kZShfbm9kZTogTm9kZSwgX2NtcENhbWVyYTogQ29tcG9uZW50Q2FtZXJhKTogdm9pZCB7XHJcbiAgICAgIGxldCBjbXBNZXNoOiBDb21wb25lbnRNZXNoID0gX25vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1lc2gpO1xyXG4gICAgICBsZXQgY21wTWF0ZXJpYWw6IENvbXBvbmVudE1hdGVyaWFsID0gX25vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1hdGVyaWFsKTtcclxuICAgICAgbGV0IGNvYXQ6IENvYXQgPSBjbXBNYXRlcmlhbC5tYXRlcmlhbC5jb2F0O1xyXG4gICAgICBsZXQgY21wUGFydGljbGVTeXN0ZW06IENvbXBvbmVudFBhcnRpY2xlU3lzdGVtID0gX25vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudFBhcnRpY2xlU3lzdGVtKTtcclxuICAgICAgbGV0IGRyYXdQYXJ0aWNsZXM6IGJvb2xlYW4gPSBjbXBQYXJ0aWNsZVN5c3RlbSAmJiBjbXBQYXJ0aWNsZVN5c3RlbS5pc0FjdGl2ZTtcclxuICAgICAgbGV0IHNoYWRlcjogU2hhZGVySW50ZXJmYWNlID0gY21wTWF0ZXJpYWwubWF0ZXJpYWwuZ2V0U2hhZGVyKCk7XHJcbiAgICAgIGlmIChkcmF3UGFydGljbGVzKSBzaGFkZXIgPSBjbXBQYXJ0aWNsZVN5c3RlbS5wYXJ0aWNsZVN5c3RlbS5nZXRTaGFkZXJGcm9tKHNoYWRlcik7XHJcblxyXG4gICAgICBzaGFkZXIudXNlUHJvZ3JhbSgpO1xyXG4gICAgICBjb2F0LnVzZVJlbmRlckRhdGEoc2hhZGVyLCBjbXBNYXRlcmlhbCk7XHJcblxyXG4gICAgICBsZXQgbXR4TWVzaFRvVmlldzogTWF0cml4NHg0ID0gdGhpcy5jYWxjTWVzaFRvVmlldyhfbm9kZSwgY21wTWVzaCwgX2NtcENhbWVyYS5tdHhXb3JsZFRvVmlldywgX2NtcENhbWVyYS5tdHhXb3JsZC50cmFuc2xhdGlvbik7XHJcbiAgICAgIGxldCByZW5kZXJCdWZmZXJzOiBSZW5kZXJCdWZmZXJzID0gdGhpcy5nZXRSZW5kZXJCdWZmZXJzKGNtcE1lc2gsIHNoYWRlciwgbXR4TWVzaFRvVmlldyk7XHJcblxyXG4gICAgICBsZXQgdW5pZm9ybTogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSBzaGFkZXIudW5pZm9ybXNbXCJ1X3ZjdENhbWVyYVwiXTtcclxuICAgICAgaWYgKHVuaWZvcm0pXHJcbiAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy51bmlmb3JtM2Z2KHVuaWZvcm0sIF9jbXBDYW1lcmEubXR4V29ybGQudHJhbnNsYXRpb24uZ2V0KCkpO1xyXG5cclxuICAgICAgdW5pZm9ybSA9IHNoYWRlci51bmlmb3Jtc1tcInVfbXR4V29ybGRUb1ZpZXdcIl07XHJcbiAgICAgIGlmICh1bmlmb3JtKVxyXG4gICAgICAgIFJlbmRlcldlYkdMLmNyYzMudW5pZm9ybU1hdHJpeDRmdih1bmlmb3JtLCBmYWxzZSwgX2NtcENhbWVyYS5tdHhXb3JsZFRvVmlldy5nZXQoKSk7XHJcblxyXG4gICAgICB1bmlmb3JtID0gc2hhZGVyLnVuaWZvcm1zW1widV9tdHhXb3JsZFRvQ2FtZXJhXCJdO1xyXG4gICAgICBpZiAodW5pZm9ybSkge1xyXG4gICAgICAgIC8vIGxldCBtdHhXb3JsZFRvQ2FtZXJhOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSU5WRVJTSU9OKF9jbXBDYW1lcmEubXR4V29ybGQpOyAvLyB0b2RvOiBvcHRpbWl6ZS9zdG9yZSBpbiBjYW1lcmFcclxuICAgICAgICBSZW5kZXJXZWJHTC5jcmMzLnVuaWZvcm1NYXRyaXg0ZnYodW5pZm9ybSwgZmFsc2UsIF9jbXBDYW1lcmEubXR4Q2FtZXJhSW52ZXJzZS5nZXQoKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkcmF3UGFydGljbGVzKSB7XHJcbiAgICAgICAgUmVuZGVyV2ViR0wuZHJhd1BhcnRpY2xlcyhjbXBQYXJ0aWNsZVN5c3RlbSwgc2hhZGVyLCByZW5kZXJCdWZmZXJzLCBfbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50RmFjZUNhbWVyYSksIGNtcE1hdGVyaWFsLnNvcnRGb3JBbHBoYSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgUmVuZGVyV2ViR0wuY3JjMy5kcmF3RWxlbWVudHMoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5UUklBTkdMRVMsIHJlbmRlckJ1ZmZlcnMubkluZGljZXMsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5TSUdORURfU0hPUlQsIDApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBkcmF3UGFydGljbGVzKF9jbXBQYXJ0aWNsZVN5c3RlbTogQ29tcG9uZW50UGFydGljbGVTeXN0ZW0sIF9zaGFkZXI6IFNoYWRlckludGVyZmFjZSwgX3JlbmRlckJ1ZmZlcnM6IFJlbmRlckJ1ZmZlcnMsIF9jbXBGYWNlQ2FtZXJhOiBDb21wb25lbnRGYWNlQ2FtZXJhLCBfc29ydEZvckFscGhhOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMuZGVwdGhNYXNrKF9jbXBQYXJ0aWNsZVN5c3RlbS5kZXB0aE1hc2spO1xyXG4gICAgICBSZW5kZXJXZWJHTC5zZXRCbGVuZE1vZGUoX2NtcFBhcnRpY2xlU3lzdGVtLmJsZW5kTW9kZSk7XHJcbiAgICAgIF9jbXBQYXJ0aWNsZVN5c3RlbS51c2VSZW5kZXJEYXRhKCk7XHJcblxyXG4gICAgICBSZW5kZXJXZWJHTC5jcmMzLnVuaWZvcm0xZihfc2hhZGVyLnVuaWZvcm1zW1widV9mUGFydGljbGVTeXN0ZW1EdXJhdGlvblwiXSwgX2NtcFBhcnRpY2xlU3lzdGVtLmR1cmF0aW9uKTtcclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy51bmlmb3JtMWYoX3NoYWRlci51bmlmb3Jtc1tcInVfZlBhcnRpY2xlU3lzdGVtU2l6ZVwiXSwgX2NtcFBhcnRpY2xlU3lzdGVtLnNpemUpO1xyXG4gICAgICBSZW5kZXJXZWJHTC5jcmMzLnVuaWZvcm0xZihfc2hhZGVyLnVuaWZvcm1zW1widV9mUGFydGljbGVTeXN0ZW1UaW1lXCJdLCBfY21wUGFydGljbGVTeXN0ZW0udGltZSk7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMudW5pZm9ybTFpKF9zaGFkZXIudW5pZm9ybXNbXCJ1X2ZQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNcIl0sIDEpOyAvLyBBVFRFTlRJT04hOiBjaGFuZ2luZyB0aGlzIGlkICh0aGUgc2Vjb25kIGFyZ3VtZW50KSByZXF1aXJlcyBjaGFuZ2luZyBvZiBjb3JyZXNwb25kaW5nIHRleHR1cmUgaWQgaW4gY29tcG9uZW50IHBhcnRpY2xlIHN5c3RlbSByZW5kZXIgaW5qZWN0b3JcclxuXHJcbiAgICAgIGxldCBmYWNlQ2FtZXJhOiBib29sZWFuID0gX2NtcEZhY2VDYW1lcmEgJiYgX2NtcEZhY2VDYW1lcmEuaXNBY3RpdmU7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMudW5pZm9ybTFpKF9zaGFkZXIudW5pZm9ybXNbXCJ1X2JQYXJ0aWNsZVN5c3RlbUZhY2VDYW1lcmFcIl0sIGZhY2VDYW1lcmEgPyAxIDogMCk7XHJcbiAgICAgIFJlbmRlcldlYkdMLmNyYzMudW5pZm9ybTFpKF9zaGFkZXIudW5pZm9ybXNbXCJ1X2JQYXJ0aWNsZVN5c3RlbVJlc3RyaWN0XCJdLCBmYWNlQ2FtZXJhICYmIF9jbXBGYWNlQ2FtZXJhLnJlc3RyaWN0ID8gMSA6IDApO1xyXG5cclxuICAgICAgUmVuZGVyV2ViR0wuY3JjMy5kcmF3RWxlbWVudHNJbnN0YW5jZWQoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5UUklBTkdMRVMsIF9yZW5kZXJCdWZmZXJzLm5JbmRpY2VzLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOU0lHTkVEX1NIT1JULCAwLCBfY21wUGFydGljbGVTeXN0ZW0uc2l6ZSk7XHJcblxyXG4gICAgICBSZW5kZXJXZWJHTC5zZXRCbGVuZE1vZGUoQkxFTkQuVFJBTlNQQVJFTlQpO1xyXG4gICAgICBSZW5kZXJXZWJHTC5jcmMzLmRlcHRoTWFzayh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjYWxjTWVzaFRvVmlldyhfbm9kZTogTm9kZSwgX2NtcE1lc2g6IENvbXBvbmVudE1lc2gsIF9tdHhXb3JsZFRvVmlldzogTWF0cml4NHg0LCBfdGFyZ2V0PzogVmVjdG9yMyk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCBjbXBGYWNlQ2FtZXJhOiBDb21wb25lbnRGYWNlQ2FtZXJhID0gX25vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudEZhY2VDYW1lcmEpO1xyXG4gICAgICBpZiAoY21wRmFjZUNhbWVyYSAmJiBjbXBGYWNlQ2FtZXJhLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgbGV0IG10eE1lc2hUb1ZpZXc6IE1hdHJpeDR4NDtcclxuICAgICAgICBtdHhNZXNoVG9WaWV3ID0gX2NtcE1lc2gubXR4V29ybGQuY2xvbmU7XHJcbiAgICAgICAgbXR4TWVzaFRvVmlldy5sb29rQXQoX3RhcmdldCwgY21wRmFjZUNhbWVyYS51cExvY2FsID8gbnVsbCA6IGNtcEZhY2VDYW1lcmEudXAsIGNtcEZhY2VDYW1lcmEucmVzdHJpY3QpO1xyXG4gICAgICAgIHJldHVybiBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04oX210eFdvcmxkVG9WaWV3LCBtdHhNZXNoVG9WaWV3KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIE1hdHJpeDR4NC5NVUxUSVBMSUNBVElPTihfbXR4V29ybGRUb1ZpZXcsIF9jbXBNZXNoLm10eFdvcmxkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRSZW5kZXJCdWZmZXJzKF9jbXBNZXNoOiBDb21wb25lbnRNZXNoLCBfc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2UsIF9tdHhNZXNoVG9WaWV3OiBNYXRyaXg0eDQpOiBSZW5kZXJCdWZmZXJzIHtcclxuICAgICAgaWYgKF9jbXBNZXNoLm1lc2ggaW5zdGFuY2VvZiBNZXNoU2tpbiAmJiAoX3NoYWRlci5kZWZpbmUuaW5jbHVkZXMoXCJTS0lOXCIpKSlcclxuICAgICAgICAvLyBUT0RPOiBtYWtlIG1lc2ggc2tpbiBwaWNrYWJsZVxyXG4gICAgICAgIHJldHVybiBfY21wTWVzaC5tZXNoLnVzZVJlbmRlckJ1ZmZlcnMoX3NoYWRlciwgX2NtcE1lc2gubXR4V29ybGQsIF9tdHhNZXNoVG9WaWV3LCBudWxsLCBfY21wTWVzaC5za2VsZXRvbj8ubXR4Qm9uZXMpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIF9jbXBNZXNoLm1lc2gudXNlUmVuZGVyQnVmZmVycyhfc2hhZGVyLCBfY21wTWVzaC5tdHhXb3JsZCwgX210eE1lc2hUb1ZpZXcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgIC8vZ2l2ZXMgV2ViR0wgQnVmZmVyIHRoZSBkYXRhIGZyb20gdGhlIHtAbGluayBUZXh0dXJlXV1cclxuICBleHBvcnQgY2xhc3MgUmVuZGVySW5qZWN0b3JUZXh0dXJlIGV4dGVuZHMgUmVuZGVySW5qZWN0b3Ige1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWNvcmF0ZShfY29uc3RydWN0b3I6IEZ1bmN0aW9uKTogdm9pZCB7XHJcbiAgICAgIFJlbmRlckluamVjdG9yLmluamVjdChfY29uc3RydWN0b3IsIFJlbmRlckluamVjdG9yVGV4dHVyZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBpbmplY3RUZXh0dXJlKHRoaXM6IFRleHR1cmUpOiB2b2lkIHtcclxuICAgICAgbGV0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICAgIGlmICh0aGlzLnJlbmRlckRhdGEpIHtcclxuICAgICAgICAvLyBidWZmZXJzIGV4aXN0XHJcbiAgICAgICAgY3JjMy5hY3RpdmVUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRTApO1xyXG4gICAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCB0aGlzLnJlbmRlckRhdGFbXCJ0ZXh0dXJlMFwiXSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJEYXRhID0ge307XHJcbiAgICAgICAgLy8gVE9ETzogY2hlY2sgaWYgYWxsIFdlYkdMLUNyZWF0aW9ucyBhcmUgYXNzZXJ0ZWRcclxuICAgICAgICBjb25zdCB0ZXh0dXJlOiBXZWJHTFRleHR1cmUgPSBSZW5kZXIuYXNzZXJ0PFdlYkdMVGV4dHVyZT4oY3JjMy5jcmVhdGVUZXh0dXJlKCkpO1xyXG4gICAgICAgIGNyYzMuYmluZFRleHR1cmUoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFXzJELCB0ZXh0dXJlKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNyYzMudGV4SW1hZ2UyRChjcmMzLlRFWFRVUkVfMkQsIDAsIGNyYzMuUkdCQSwgY3JjMy5SR0JBLCBjcmMzLlVOU0lHTkVEX0JZVEUsIHRoaXMudGV4SW1hZ2VTb3VyY2UpO1xyXG4gICAgICAgICAgY3JjMy50ZXhJbWFnZTJEKFxyXG4gICAgICAgICAgICBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIDAsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkdCQSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5SR0JBLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlVOU0lHTkVEX0JZVEUsXHJcbiAgICAgICAgICAgIHRoaXMudGV4SW1hZ2VTb3VyY2VcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICAgICAgICBEZWJ1Zy5lcnJvcihfZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHRoaXMubWlwbWFwKSB7XHJcbiAgICAgICAgICBjYXNlIE1JUE1BUC5DUklTUDpcclxuICAgICAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX01BR19GSUxURVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVCk7XHJcbiAgICAgICAgICAgIGNyYzMudGV4UGFyYW1ldGVyaShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV9NSU5fRklMVEVSLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk5FQVJFU1QpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgTUlQTUFQLk1FRElVTTpcclxuICAgICAgICAgICAgY3JjMy50ZXhQYXJhbWV0ZXJpKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5URVhUVVJFX01BR19GSUxURVIsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVCk7XHJcbiAgICAgICAgICAgIGNyYzMudGV4UGFyYW1ldGVyaShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV9NSU5fRklMVEVSLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk5FQVJFU1RfTUlQTUFQX0xJTkVBUik7XHJcbiAgICAgICAgICAgIGNyYzMuZ2VuZXJhdGVNaXBtYXAoY3JjMy5URVhUVVJFXzJEKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIE1JUE1BUC5CTFVSUlk6XHJcbiAgICAgICAgICAgIGNyYzMudGV4UGFyYW1ldGVyaShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV9NQUdfRklMVEVSLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkxJTkVBUik7XHJcbiAgICAgICAgICAgIGNyYzMudGV4UGFyYW1ldGVyaShXZWJHTDJSZW5kZXJpbmdDb250ZXh0LlRFWFRVUkVfMkQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV9NSU5fRklMVEVSLCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkxJTkVBUl9NSVBNQVBfTElORUFSKTtcclxuICAgICAgICAgICAgY3JjMy5nZW5lcmF0ZU1pcG1hcChjcmMzLlRFWFRVUkVfMkQpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJEYXRhW1widGV4dHVyZTBcIl0gPSB0ZXh0dXJlO1xyXG5cclxuICAgICAgICBjcmMzLmJpbmRUZXh0dXJlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVEVYVFVSRV8yRCwgbnVsbCk7XHJcblxyXG4gICAgICAgIHRoaXMudXNlUmVuZGVyRGF0YSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgICBleHBvcnQgY29uc3QgZW51bSBFVkVOVF9QSFlTSUNTIHtcclxuICAgICAgICBUUklHR0VSX0VOVEVSID0gXCJUcmlnZ2VyRW50ZXJlZENvbGxpc2lvblwiLFxyXG4gICAgICAgIFRSSUdHRVJfRVhJVCA9IFwiVHJpZ2dlckxlZnRDb2xsaXNpb25cIixcclxuICAgICAgICBDT0xMSVNJT05fRU5URVIgPSBcIkNvbGxpZGVyRW50ZXJlZENvbGxpc2lvblwiLFxyXG4gICAgICAgIENPTExJU0lPTl9FWElUID0gXCJDb2xsaWRlckxlZnRDb2xsaXNpb25cIlxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBFdmVudFBoeXNpY3MgZXh0ZW5kcyBFdmVudCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29tcG9uZW50UmlnaWRib2R5IHRoYXQgY29sbGlkZWQgd2l0aCB0aGlzIENvbXBvbmVudFJpZ2lkYm9keVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjbXBSaWdpZGJvZHk6IENvbXBvbmVudFJpZ2lkYm9keTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbm9ybWFsIGltcHVsc2UgYmV0d2VlbiB0aGUgdHdvIGNvbGxpZGluZyBvYmplY3RzLiBOb3JtYWwgcmVwcmVzZW50cyB0aGUgZGVmYXVsdCBpbXB1bHNlLlxyXG4gICAgICAgICAqIEltcHVsc2UgaXMgb25seSBoYXBwZW5pbmcgb24gQ09MTElTSU9OX0VOVEVSLCBzbyB0aGVyZSBpcyBubyBpbXB1bHNlIG9uIGV4aXQgbm9yIG9uIHRyaWdnZXJzLlxyXG4gICAgICAgICAqIFVzZSB0aGUgdmVsb2NpdHkgb2YgdGhlIGNtcFJpZ2lkYm9keSB0byBkZXRlcm1pbmUgdGhlIGludGVuc2l0eSBvZiB0aGUgRVZFTlQgaW5zdGVhZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgbm9ybWFsSW1wdWxzZTogbnVtYmVyO1xyXG4gICAgICAgIHB1YmxpYyB0YW5nZW50SW1wdWxzZTogbnVtYmVyO1xyXG4gICAgICAgIHB1YmxpYyBiaW5vbWFsSW1wdWxzZTogbnVtYmVyO1xyXG4gICAgICAgIC8qKiBUaGUgcG9pbnQgd2hlcmUgdGhlIGNvbGxpc2lvbi90cmlnZ2VyaW5nIGluaXRpYWxseSBoYXBwZW5lZC4gVGhlIGNvbGxpc2lvbiBwb2ludCBleGlzdHMgb25seSBvbiBDT0xMSVNJT05fRU5URVIgLyBUUklHR0VSX0VOVEVSLiAqL1xyXG4gICAgICAgIHB1YmxpYyBjb2xsaXNpb25Qb2ludDogVmVjdG9yMztcclxuICAgICAgICAvKiogVGhlIG5vcm1hbCB2ZWN0b3Igb2YgdGhlIGNvbGxpc2lvbi4gT25seSBleGlzdGluZyBvbiBDT0xMSVNJT05fRU5URVIgKi9cclxuICAgICAgICBwdWJsaWMgY29sbGlzaW9uTm9ybWFsOiBWZWN0b3IzO1xyXG5cclxuICAgICAgICAvKiogQ3JlYXRlcyBhIG5ldyBldmVudCBjdXN0b21pemVkIGZvciBwaHlzaWNzLiBIb2xkaW5nIGluZm9ybWF0aW9ucyBhYm91dCBpbXB1bHNlcy4gQ29sbGlzaW9uIHBvaW50IGFuZCB0aGUgYm9keSB0aGF0IGlzIGNvbGxpZGluZyAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKF90eXBlOiBFVkVOVF9QSFlTSUNTLCBfaGl0UmlnaWRib2R5OiBDb21wb25lbnRSaWdpZGJvZHksIF9ub3JtYWxJbXB1bHNlOiBudW1iZXIsIF90YW5nZW50SW1wdWxzZTogbnVtYmVyLCBfYmlub3JtYWxJbXB1bHNlOiBudW1iZXIsIF9jb2xsaXNpb25Qb2ludDogVmVjdG9yMyA9IG51bGwsIF9jb2xsaXNpb25Ob3JtYWw6IFZlY3RvcjMgPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKF90eXBlKTtcclxuICAgICAgICAgICAgdGhpcy5jbXBSaWdpZGJvZHkgPSBfaGl0UmlnaWRib2R5O1xyXG4gICAgICAgICAgICB0aGlzLm5vcm1hbEltcHVsc2UgPSBfbm9ybWFsSW1wdWxzZTtcclxuICAgICAgICAgICAgdGhpcy50YW5nZW50SW1wdWxzZSA9IF90YW5nZW50SW1wdWxzZTtcclxuICAgICAgICAgICAgdGhpcy5iaW5vbWFsSW1wdWxzZSA9IF9iaW5vcm1hbEltcHVsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uUG9pbnQgPSBfY29sbGlzaW9uUG9pbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGlzaW9uTm9ybWFsID0gX2NvbGxpc2lvbk5vcm1hbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEdyb3VwcyB0byBwbGFjZSBhIG5vZGUgaW4sIG5vdCBldmVyeSBncm91cCBzaG91bGQgY29sbGlkZSB3aXRoIGV2ZXJ5IGdyb3VwLiBVc2UgYSBNYXNrIGluIHRvIGV4Y2x1ZGUgY29sbGlzaW9uc1xyXG4gICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIENPTExJU0lPTl9HUk9VUCB7IC8vVE9ETyBHaXZlIGEgcG9zc2libGl0aHkgdG8gc2V0IHdoaWNoIGxheWVyIGNvbGxpZGVzIHdpdGggd2hpY2gsIENvbGxpc2lvbk1hdHJpeD9cclxuICAgICAgICBERUZBVUxUID0gMSxcclxuICAgICAgICBHUk9VUF8xID0gMixcclxuICAgICAgICBHUk9VUF8yID0gNCxcclxuICAgICAgICBHUk9VUF8zID0gOCxcclxuICAgICAgICBHUk9VUF80ID0gMTYsXHJcbiAgICAgICAgR1JPVVBfNSA9IDMyXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIERlZmluZXMgdGhlIHR5cGUgb2YgdGhlIHJpZ2lkYm9keSB3aGljaCBkZXRlcm1pbmVzIHRoZSB3YXkgaXQgaW50ZXJhY3RzIHdpdGggdGhlIHBoeXNpY2FsIGFuZCB0aGUgdmlzdWFsIHdvcmxkXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGVudW0gQk9EWV9UWVBFIHtcclxuICAgICAgICAvKiogVGhlIGJvZHkgaWdub3JlcyB0aGUgaGllcmFyY2h5IG9mIHRoZSByZW5kZXIgZ3JhcGgsIGlzIGNvbXBsZXRlbHkgY29udHJvbGxlZCAgYnkgcGh5c2ljcyBhbmQgdGFrZXMgaXRzIG5vZGUgd2l0aCBpdCAgKi9cclxuICAgICAgICBEWU5BTUlDLCAvLyA9IE9JTU8uUmlnaWRCb2R5VHlwZS5EWU5BTUlDLFxyXG4gICAgICAgIC8qKiBUaGUgYm9keSBpZ25vcmVzIHRoZSBoaWVyYXJjaHkgb2YgdGhlIHJlbmRlciBncmFwaCwgaXMgY29tcGxldGVseSBpbW1vdmVibGUgYW5kIGtlZXBzIGl0cyBub2RlIGZyb20gbW92aW5nICAqL1xyXG4gICAgICAgIFNUQVRJQywgLy8gPSBPSU1PLlJpZ2lkQm9keVR5cGUuU1RBVElDLFxyXG4gICAgICAgIC8qKiBUaGUgYm9keSBpcyBjb250cm9sbGVkIGJ5IGl0cyBub2RlIGFuZCBtb3ZlcyB3aXRoIGl0LCB3aGlsZSBpdCBpbXBhY3RzIHRoZSBwaHlzaWNhbCB3b3JsZCBlLmcuIGJ5IGNvbGxpc2lvbnMgKi9cclxuICAgICAgICBLSU5FTUFUSUMgLy8gPSBPSU1PLlJpZ2lkQm9keVR5cGUuS0lORU1BVElDXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIERpZmZlcmVudCB0eXBlcyBvZiBjb2xsaWRlciBzaGFwZXMsIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgaW4gc2NhbGluZyBCT1ggPSBWZWN0b3IzKGxlbmd0aCwgaGVpZ2h0LCBkZXB0aCksXHJcbiAgICAqIFNQSEVSRSA9IFZlY3RvcjMoZGlhbWV0ZXIsIHgsIHgpLCBDQVBTVUxFID0gVmVjdG9yMyhkaWFtZXRlciwgaGVpZ2h0LCB4KSwgQ1lMSU5ERVIgPSBWZWN0b3IzKGRpYW1ldGVyLCBoZWlnaHQsIHgpLFxyXG4gICAgKiBDT05FID0gVmVjdG9yKGRpYW1ldGVyLCBoZWlnaHQsIHgpLCBQWVJBTUlEID0gVmVjdG9yMyhsZW5ndGgsIGhlaWdodCwgZGVwdGgpOyB4ID09IHVudXNlZC5cclxuICAgICogQ09OVkVYID0gQ29tcG9uZW50TWVzaCBuZWVkcyB0byBiZSBhdmFpbGFibGUgaW4gdGhlIFJCIFByb3BlcnR5IGNvbnZleE1lc2gsIHRoZSBwb2ludHMgb2YgdGhhdCBjb21wb25lbnQgYXJlIHVzZWQgdG8gY3JlYXRlIGEgY29sbGlkZXIgdGhhdCBtYXRjaGVzLFxyXG4gICAgKiB0aGUgY2xvc2VzdCBwb3NzaWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGF0IGZvcm0sIGluIGZvcm0gb2YgYSBodWxsLiBDb252ZXggaXMgZXhwZXJpbWVudGFsIGFuZCBjYW4gcHJvZHVjZSB1bmV4cGVjdGVkIGJlaGF2aW91ciB3aGVuIHZlcnRpY2VzXHJcbiAgICAqIGFyZSB0b28gY2xvc2UgdG8gb25lIGFub3RoZXIgYW5kIHRoZSBnaXZlbiB2ZXJ0aWNlcyBkbyBub3QgZm9ybSBhIGluIGl0c2VsZiBjbG9zZWQgc2hhcGUgYW5kIGhhdmluZyBhIGdlbnVzIG9mIDAgKG5vIGhvbGVzKS4gVmVydGljZXMgaW4gdGhlIENvbXBvbmVudE1lc2ggY2FuIGJlIHNjYWxlZCBkaWZmZXJlbnRseSBcclxuICAgICogZm9yIHRleHR1cmluZy9ub3JtYWwgb3Igb3RoZXIgcmVhc29ucywgc28gdGhlIGNvbGxpZGVyIG1pZ2h0IGJlIG9mZiBjb21wYXJlZCB0byB0aGUgdmlzdWFsIHNoYXBlLCB0aGlzIGNhbiBiZSBjb3JyZWN0ZWQgYnkgY2hhbmdpbmcgdGhlIHBpdm90IHNjYWxlIG9mIHRoZSBDb21wb25lbnRSaWdpZGJvZHkuICBcclxuICAgICovXHJcbiAgICBleHBvcnQgZW51bSBDT0xMSURFUl9UWVBFIHtcclxuICAgICAgICBDVUJFLFxyXG4gICAgICAgIFNQSEVSRSxcclxuICAgICAgICBDQVBTVUxFLFxyXG4gICAgICAgIENZTElOREVSLFxyXG4gICAgICAgIENPTkUsXHJcbiAgICAgICAgUFlSQU1JRCxcclxuICAgICAgICBDT05WRVhcclxuICAgIH1cclxuXHJcbiAgICAvKiogRGlzcGxheWluZyBkaWZmZXJlbnQgdHlwZXMgb2YgZGVidWcgaW5mb3JtYXRpb24gYWJvdXQgZGlmZmVyZW50IHBoeXNpYyBmZWF0dXJlcy4gRGVmYXVsdCA9IEpPSU5UU19BTkRfQ09MTElERVIuICovXHJcbiAgICBleHBvcnQgZW51bSBQSFlTSUNTX0RFQlVHTU9ERSB7XHJcbiAgICAgICAgTk9ORSxcclxuICAgICAgICBDT0xMSURFUlMsXHJcbiAgICAgICAgSk9JTlRTX0FORF9DT0xMSURFUixcclxuICAgICAgICBCT1VORElOR19CT1hFUyxcclxuICAgICAgICBDT05UQUNUUyxcclxuICAgICAgICBQSFlTSUNfT0JKRUNUU19PTkxZXHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEluZm8gYWJvdXQgUmF5Y2FzdHMgc2hvdCBmcm9tIHRoZSBwaHlzaWNzIHN5c3RlbS4gKi9cclxuICAgIGV4cG9ydCBjbGFzcyBSYXlIaXRJbmZvIHtcclxuICAgICAgICBwdWJsaWMgaGl0OiBib29sZWFuO1xyXG4gICAgICAgIHB1YmxpYyBoaXREaXN0YW5jZTogbnVtYmVyO1xyXG4gICAgICAgIHB1YmxpYyBoaXRQb2ludDogVmVjdG9yMyA9IFZlY3RvcjMuWkVSTygpO1xyXG4gICAgICAgIHB1YmxpYyByaWdpZGJvZHlDb21wb25lbnQ6IENvbXBvbmVudFJpZ2lkYm9keTtcclxuICAgICAgICBwdWJsaWMgaGl0Tm9ybWFsOiBWZWN0b3IzID0gVmVjdG9yMy5aRVJPKCk7XHJcbiAgICAgICAgcHVibGljIHJheUVuZDogVmVjdG9yMyA9IFZlY3RvcjMuWkVSTygpO1xyXG4gICAgICAgIHB1YmxpYyByYXlPcmlnaW46IFZlY3RvcjMgPSBWZWN0b3IzLlpFUk8oKTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVjeWNsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuaGl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuaGl0RGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmhpdFBvaW50LnJlY3ljbGUoKTtcclxuICAgICAgICAgICAgdGhpcy5yaWdpZGJvZHlDb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmhpdE5vcm1hbC5yZWN5Y2xlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmF5T3JpZ2luLnJlY3ljbGUoKTtcclxuICAgICAgICAgICAgdGhpcy5yYXlFbmQucmVjeWNsZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiogR2VuZXJhbCBzZXR0aW5ncyBmb3IgdGhlIHBoeXNpYyBzaW11bGF0aW9uIGFuZCB0aGUgZGVidWcgb2YgaXQuICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGh5c2ljc1NldHRpbmdzIHtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoX2RlZmF1bHRDb2xsaXNpb25Hcm91cDogbnVtYmVyLCBfZGVmYXVsdENvbGxpc2lvbk1hc2s6IG51bWJlcikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIE9JTU8gPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0Q29sbGlzaW9uR3JvdXAgPSBfZGVmYXVsdENvbGxpc2lvbkdyb3VwO1xyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRDb2xsaXNpb25NYXNrID0gX2RlZmF1bHRDb2xsaXNpb25NYXNrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqIENoYW5nZSBpZiByaWdpZGJvZGllcyBhcmUgYWJsZSB0byBzbGVlcCAoZG9uJ3QgYmUgY29uc2lkZXJlZCBpbiBwaHlzaWNhbCBjYWxjdWxhdGlvbnMpIHdoZW4gdGhlaXIgbW92ZW1lbnQgaXMgYmVsb3cgYSB0aHJlc2hvbGQuIERlYWN0aXZhdGlvbiBpcyBkZWNyZWFzaW5nIHBlcmZvcm1hbmNlIGZvciBtaW5vciBhZHZhbnRhZ2UgaW4gcHJlY2lzaW9uLiAqL1xyXG4gICAgICAgIGdldCBkaXNhYmxlU2xlZXBpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiBPSU1PLlNldHRpbmcuZGlzYWJsZVNsZWVwaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXQgZGlzYWJsZVNsZWVwaW5nKF92YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgICAgICBPSU1PLlNldHRpbmcuZGlzYWJsZVNsZWVwaW5nID0gX3ZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvKiogU2xlZXBpbmcgVGhyZXNob2xkIGZvciBNb3ZlbWVudCBWZWxvY3RpeS4gKi9cclxuICAgICAgICBnZXQgc2xlZXBpbmdWZWxvY2l0eVRocmVzaG9sZCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gT0lNTy5TZXR0aW5nLnNsZWVwaW5nVmVsb2NpdHlUaHJlc2hvbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldCBzbGVlcGluZ1ZlbG9jaXR5VGhyZXNob2xkKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIE9JTU8uU2V0dGluZy5zbGVlcGluZ1ZlbG9jaXR5VGhyZXNob2xkID0gX3ZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqIFNsZWVwaW5nIFRocmVzaG9sZCBmb3IgUm90YXRpb24gVmVsb2NpdHkuICovXHJcbiAgICAgICAgZ2V0IHNsZWVwaW5nQW5ndWxhclZlbG9jaXR5VGhyZXNob2xkKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiBPSU1PLlNldHRpbmcuc2xlZXBpbmdBbmd1bGFyVmVsb2NpdHlUaHJlc2hvbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldCBzbGVlcGluZ0FuZ3VsYXJWZWxvY2l0eVRocmVzaG9sZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICAgICAgICBPSU1PLlNldHRpbmcuc2xlZXBpbmdBbmd1bGFyVmVsb2NpdHlUaHJlc2hvbGQgPSBfdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiogVGhyZXNob2xkIGhvdyBsb25nIHRoZSBSaWdpZGJvZHkgbXVzdCBiZSBiZWxvdy9hYm92ZSB0aGUgdGhyZXNob2xkIHRvIGNvdW50IGFzIHNsZWVwaW5nLiAqL1xyXG4gICAgICAgIGdldCBzbGVlcGluZ1RpbWVUaHJlc2hvbGQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIE9JTU8uU2V0dGluZy5zbGVlcGluZ1RpbWVUaHJlc2hvbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldCBzbGVlcGluZ1RpbWVUaHJlc2hvbGQoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICAgICAgT0lNTy5TZXR0aW5nLnNsZWVwaW5nVGltZVRocmVzaG9sZCA9IF92YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKiBFcnJvciB0aHJlc2hvbGQuIERlZmF1bHQgaXMgMC4wNS4gVGhlIGhpZ2hlciB0aGUgbW9yZSBsaWtlbHkgY29sbGlzaW9ucyBnZXQgZGV0ZWN0ZWQgYmVmb3JlIGFjdHVhbCBpbXBhY3QgYXQgaGlnaCBzcGVlZHMgYnV0IGl0J3MgdmlzdWFsbHkgbGVzcyBhY2N1cmF0ZS4gKi9cclxuICAgICAgICBnZXQgZGVmYXVsdENvbGxpc2lvbk1hcmdpbigpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gT0lNTy5TZXR0aW5nLmRlZmF1bHRHSktNYXJnaW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldCBkZWZhdWx0Q29sbGlzaW9uTWFyZ2luKF90aGlja25lc3M6IG51bWJlcikge1xyXG4gICAgICAgICAgICBPSU1PLlNldHRpbmcuZGVmYXVsdEdKS01hcmdpbiA9IF90aGlja25lc3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiogVGhlIGRlZmF1bHQgYXBwbGllZCBmcmljdGlvbiBiZXR3ZWVuIHR3byByaWdpZGJvZGllcyB3aXRoIHRoZSBkZWZhdWx0IHZhbHVlLiBIb3cgbXVjaCB2ZWxvY2l0eSBpcyBzbG93ZWQgZG93biB3aGVuIG1vdmluZyBhY2Nyb3NzIHRoaXMgc3VyZmFjZS4gKi9cclxuICAgICAgICBnZXQgZGVmYXVsdEZyaWN0aW9uKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiBPSU1PLlNldHRpbmcuZGVmYXVsdEZyaWN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXQgZGVmYXVsdEZyaWN0aW9uKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIE9JTU8uU2V0dGluZy5kZWZhdWx0RnJpY3Rpb24gPSBfdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiogQm91bmNpbmVzcyBvZiByaWdpZGJvZGllcy4gSG93IG11Y2ggb2YgdGhlIGltcGFjdCBpcyByZXN0aXR1dGVkLiAqL1xyXG4gICAgICAgIGdldCBkZWZhdWx0UmVzdGl0dXRpb24oKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIE9JTU8uU2V0dGluZy5kZWZhdWx0UmVzdGl0dXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldCBkZWZhdWx0UmVzdGl0dXRpb24oX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICAgICAgT0lNTy5TZXR0aW5nLmRlZmF1bHRSZXN0aXR1dGlvbiA9IF92YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKiBHcm91cHMgdGhlIGRlZmF1bHQgcmlnaWRib2R5IHdpbGwgY29sbGlkZSB3aXRoLiBTZXQgaXQgbGlrZTogKFBIWVNJQ1NfR1JPVVAuREVGQVVMVCB8IFBIWVNJQ1NfR1JPVVAuR1JPVVBfMSB8IFBIWVNJQ1NfR1JPVVAuR1JPVVBfMiB8IFBIWVNJQ1NfR1JPVVAuR1JPVVBfMykgXHJcbiAgICAgICAgICogdG8gY29sbGlkZSB3aXRoIG11bHRpcGxlIGdyb3Vwcy4gRGVmYXVsdCBpcyBjb2xsaXNpb24gd2l0aCBldmVyeXRoaW5nIGJ1dCB0cmlnZ2Vycy5cclxuICAgICAgICAqL1xyXG4gICAgICAgIGdldCBkZWZhdWx0Q29sbGlzaW9uTWFzaygpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gT0lNTy5TZXR0aW5nLmRlZmF1bHRDb2xsaXNpb25NYXNrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXQgZGVmYXVsdENvbGxpc2lvbk1hc2soX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICAgICAgT0lNTy5TZXR0aW5nLmRlZmF1bHRDb2xsaXNpb25NYXNrID0gX3ZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqIFRoZSBncm91cCB0aGF0IHRoaXMgcmlnaWRib2R5IGJlbG9uZ3MgdG8uIERlZmF1bHQgaXMgdGhlIERFRkFVTFQgR3JvdXAgd2hpY2ggbWVhbnMgaXRzIGp1c3QgYSBub3JtYWwgUmlnaWRib2R5IG5vdCBhIHRyaWdnZXIgbm9yIGFueXRoaW5nIHNwZWNpYWwuICovXHJcbiAgICAgICAgZ2V0IGRlZmF1bHRDb2xsaXNpb25Hcm91cCgpOiBDT0xMSVNJT05fR1JPVVAge1xyXG4gICAgICAgICAgICByZXR1cm4gPENPTExJU0lPTl9HUk9VUD5PSU1PLlNldHRpbmcuZGVmYXVsdENvbGxpc2lvbkdyb3VwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXQgZGVmYXVsdENvbGxpc2lvbkdyb3VwKF92YWx1ZTogQ09MTElTSU9OX0dST1VQKSB7XHJcbiAgICAgICAgICAgIE9JTU8uU2V0dGluZy5kZWZhdWx0Q29sbGlzaW9uR3JvdXAgPSBfdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiogQ2hhbmdlIHRoZSB0eXBlIG9mIGpvaW50IHNvbHZlciBhbGdvcml0aG0uIERlZmF1bHQgSXRlcmF0aXZlID09IDAsIGlzIGZhc3RlciBidXQgbGVzcyBzdGFibGUuIERpcmVjdCA9PSAxLCBzbG93IGJ1dCBtb3JlIHN0YWJsZSwgcmVjb21tZW5kZWQgZm9yIGNvbXBsZXggam9pbnQgd29yay4gQ2hhbmdlIHRoaXMgc2V0dGluZyBvbmx5IGF0IHRoZSBzdGFydCBvZiB5b3VyIGdhbWUuICovXHJcbiAgICAgICAgZ2V0IGRlZmF1bHRDb25zdHJhaW50U29sdmVyVHlwZSgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gT0lNTy5TZXR0aW5nLmRlZmF1bHRKb2ludENvbnN0cmFpbnRTb2x2ZXJUeXBlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXQgZGVmYXVsdENvbnN0cmFpbnRTb2x2ZXJUeXBlKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIE9JTU8uU2V0dGluZy5kZWZhdWx0Sm9pbnRDb25zdHJhaW50U29sdmVyVHlwZSA9IF92YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKiBUaGUgY29ycmVjdGlvbiBhbGdvcml0aG0gdXNlZCB0byBjb3JyZWN0IHBoeXNpY3MgY2FsY3VsYXRpb25zLiBDaGFuZ2UgdGhpcyBvbmx5IGF0IHRoZSBiZWdpbm5pbmcgb2YgeW91ciBnYW1lLiBFYWNoIGhhcyBkaWZmZXJlbnQgYXBwcm9hY2hlcywgc28gaWYgeW91IGhhdmUgcHJvYmxlbXMgdGVzdCBhbm90aGVyXHJcbiAgICAgICAgICogIERlZmF1bHQgMCA9IEJhdW1nYXJ0ZSAoZmFzdCBidXQgbGVzcyBjb3JyZWN0IGluZHVjZXMgc29tZSBlbmVyZ3kgZXJyb3JzKSwgMSA9IFNwbGl0LUltcHVsc2UgKGZhc3QgYW5kIG5vIGVuZ2VyeSBlcnJvcnMsIGJ1dCBtb3JlIGluYWNjdXJhdGUgZm9yIGpvaW50cyksIDIgPSBOb24tbGluZWFyIEdhdXNzIFNlaWRlbCAoc2xvd2VzdCBidXQgbW9zdCBhY2N1cmF0ZSkqL1xyXG4gICAgICAgIGdldCBkZWZhdWx0Q29ycmVjdGlvbkFsZ29yaXRobSgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gT0lNTy5TZXR0aW5nLmRlZmF1bHRKb2ludFBvc2l0aW9uQ29ycmVjdGlvbkFsZ29yaXRobTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0IGRlZmF1bHRDb3JyZWN0aW9uQWxnb3JpdGhtKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIE9JTU8uU2V0dGluZy5kZWZhdWx0Sm9pbnRQb3NpdGlvbkNvcnJlY3Rpb25BbGdvcml0aG0gPSBfdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiogVGhlIHByZWNpc2lvbiBvZiB0aGUgc2ltdWxhdGlvbiBpbiBmb3JtIG9mIG51bWJlciBvZiBpdGVyYXRpb25zIHRoZSBzaW11bGF0aW9ucyBydW5zIHRocm91Z2ggdW50aWwgaXQgYWNjZXB0cyB0aGUgcmVzdWx0LlxyXG4gICAgICAgICAqICAxMCBEZWZhdWx0IC0gSGlnaGVyIG1lYW5zIG1vcmUgcHJlY2lzaW9uIGJ1dCByZXN1bHRzIGluIGEgcGVyZm9ybWFuY2UgZGVjcmVhc2UuIFRoaXMgaGVscHMgZXNwZWNpYWxseSB3aXRoIGpvaW50cyxcclxuICAgICAgICAgKiBidXQgYWxzbyB0aGUgZ2VuZXJhbCBzdGFiaWxpdHkgb2YgdGhlIHNpbXVsYXRpb24gZHVlIHRvIHNpbXVsYXRpb24gc3RlcHMgYmVpbmcgcmVjaGVja2VkIG11bHRpcGxlIHRpbWVzIGJlZm9yZSBiZWluZyBzZXQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0IHNvbHZlckl0ZXJhdGlvbnMoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBoeXNpY3MuYWN0aXZlSW5zdGFuY2UuZ2V0T2ltb1dvcmxkKCkuZ2V0TnVtUG9zaXRpb25JdGVyYXRpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldCBzb2x2ZXJJdGVyYXRpb25zKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIFBoeXNpY3MuYWN0aXZlSW5zdGFuY2UuZ2V0T2ltb1dvcmxkKCkuc2V0TnVtUG9zaXRpb25JdGVyYXRpb25zKF92YWx1ZSk7XHJcbiAgICAgICAgICAgIFBoeXNpY3MuYWN0aXZlSW5zdGFuY2UuZ2V0T2ltb1dvcmxkKCkuc2V0TnVtVmVsb2NpdHlJdGVyYXRpb25zKF92YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICAgKiBBY3RzIGFzIHRoZSBwaHlzaWNhbCByZXByZXNlbnRhdGlvbiBvZiBhIGNvbm5lY3Rpb24gYmV0d2VlbiB0d28ge0BsaW5rIE5vZGV9J3MuXHJcbiAgICAgKiBUaGUgdHlwZSBvZiBjb25uY2V0aW9uIGlzIGRlZmluZWQgYnkgdGhlIHN1YmNsYXNzZXMgbGlrZSBwcmlzbWF0aWMgam9pbnQsIGN5bGluZGVyIGpvaW50IGV0Yy5cclxuICAgICAqIEEgUmlnaWRib2R5IG9uIHRoZSB7QGxpbmsgTm9kZX0gdGhhdCB0aGlzIGNvbXBvbmVudCBpcyBhZGRlZCB0byBpcyBuZWVkZWQuIFNldHRpbmcgdGhlIGNvbm5lY3RlZFJpZ2lkYm9keSBhbmRcclxuICAgICAqIGluaXRpYWxpemluZyB0aGUgY29ubmVjdGlvbiBjcmVhdGVzIGEgcGh5c2ljYWwgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZW0uIFRoaXMgZGlmZmVycyBmcm9tIGEgY29ubmVjdGlvbiB0aHJvdWdoIGhpZXJhcmNoeVxyXG4gICAgICogaW4gdGhlIG5vZGUgc3RydWN0dXJlIG9mIGZ1ZGdlLiBKb2ludHMgY2FuIGhhdmUgZGlmZmVyZW50IERPRidzIChEZWdyZWVzIE9mIEZyZWVkb20pLCAxIEF4aXMgdGhhdCBjYW4gZWl0aGVyIHR3aXN0IG9yIHN3aW5nIGlzIGEgZGVncmVlIG9mIGZyZWVkb20uXHJcbiAgICAgKiBBIGpvaW50IHR5cGljYWxseSBjb25zaXN0cyBvZiBhIG1vdG9yIHRoYXQgbGltaXRzIG1vdmVtZW50L3JvdGF0aW9uIG9yIGlzIGFjdGl2bHkgdHJ5aW5nIHRvIG1vdmUgdG8gYSBsaW1pdC4gQW5kIGEgc3ByaW5nIHdoaWNoIGRlZmluZXMgdGhlIHJpZ2lkaXR5LlxyXG4gICAgICogQGF1dGhvciBNYXJrbyBGZWhyZW5iYWNoLCBIRlUgMjAyMFxyXG4gICAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIEpvaW50IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIC8qKiByZWZlcnMgYmFjayB0byB0aGlzIGNsYXNzIGZyb20gYW55IHN1YmNsYXNzIGUuZy4gaW4gb3JkZXIgdG8gZmluZCBjb21wYXRpYmxlIG90aGVyIHJlc291cmNlcyovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGJhc2VDbGFzczogdHlwZW9mIEpvaW50ID0gSm9pbnQ7XHJcbiAgICAvKiogbGlzdCBvZiBhbGwgdGhlIHN1YmNsYXNzZXMgZGVyaXZlZCBmcm9tIHRoaXMgY2xhc3MsIGlmIHRoZXkgcmVnaXN0ZXJlZCBwcm9wZXJseSovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHN1YmNsYXNzZXM6IHR5cGVvZiBKb2ludFtdID0gW107XHJcblxyXG4gICAgI2lkQm9keUFuY2hvcjogbnVtYmVyID0gMDtcclxuICAgICNpZEJvZHlUaWVkOiBudW1iZXIgPSAwO1xyXG4gICAgI2JvZHlBbmNob3I6IENvbXBvbmVudFJpZ2lkYm9keTtcclxuICAgICNib2R5VGllZDogQ29tcG9uZW50UmlnaWRib2R5O1xyXG5cclxuICAgICNjb25uZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICNhbmNob3I6IE9JTU8uVmVjMztcclxuICAgICNpbnRlcm5hbENvbGxpc2lvbjogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgICNicmVha0ZvcmNlOiBudW1iZXIgPSAwO1xyXG4gICAgI2JyZWFrVG9ycXVlOiBudW1iZXIgPSAwO1xyXG5cclxuICAgICNuYW1lQ2hpbGRUb0Nvbm5lY3Q6IHN0cmluZztcclxuXHJcblxyXG4gICAgLy8gcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudEpvaW50KTtcclxuICAgIHByb3RlY3RlZCBzaW5nbGV0b246IGJvb2xlYW4gPSBmYWxzZTsgLy9NdWx0aXBsZSBqb2ludHMgY2FuIGJlIGF0dGFjaGVkIHRvIG9uZSBOb2RlXHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgam9pbnQ6IE9JTU8uSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgY29uZmlnOiBPSU1PLkpvaW50Q29uZmlnO1xyXG5cclxuXHJcbiAgICAvKiogQ3JlYXRlIGEgam9pbnQgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSB0d28gZ2l2ZW4gUmlnaWRib2R5Q29tcG9uZW50cy4gKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfYm9keUFuY2hvcjogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2JvZHlUaWVkOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuYm9keUFuY2hvciA9IF9ib2R5QW5jaG9yO1xyXG4gICAgICB0aGlzLmJvZHlUaWVkID0gX2JvZHlUaWVkO1xyXG5cclxuICAgICAgLypcclxuICAgICAgICBUZWxsIHRoZSBwaHlzaWNzIHRoYXQgdGhlcmUgaXMgYSBuZXcgam9pbnQgYW5kIG9uIHRoZSBwaHlzaWNzIHN0YXJ0IHRoZSBhY3R1YWwgam9pbnQgaXMgZmlyc3QgY3JlYXRlZC4gVmFsdWVzIGNhbiBiZSBzZXQgYnV0IHRoZVxyXG4gICAgICAgIGFjdHVhbCBjb25zdHJhaW50IGFpbid0IGV4aXN0ZW50IHVudGlsIHRoZSBnYW1lIHN0YXJ0c1xyXG4gICAgICAqL1xyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX0FERCwgdGhpcy5obmRFdmVudCk7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfUkVNT1ZFLCB0aGlzLmhuZEV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlZ2lzdGVyU3ViY2xhc3MoX3N1YmNsYXNzOiB0eXBlb2YgSm9pbnQpOiBudW1iZXIgeyByZXR1cm4gSm9pbnQuc3ViY2xhc3Nlcy5wdXNoKF9zdWJjbGFzcykgLSAxOyB9XHJcblxyXG4gICAgLyoqIEdldC9TZXQgdGhlIGZpcnN0IENvbXBvbmVudFJpZ2lkYm9keSBvZiB0aGlzIGNvbm5lY3Rpb24uIEl0IHNob3VsZCBhbHdheXMgYmUgdGhlIG9uZSB0aGF0IHRoaXMgY29tcG9uZW50IGlzIGF0dGFjaGVkIHRvbyBpbiB0aGUgc2NlbmVUcmVlLiAqL1xyXG4gICAgcHVibGljIGdldCBib2R5QW5jaG9yKCk6IENvbXBvbmVudFJpZ2lkYm9keSB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNib2R5QW5jaG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgYm9keUFuY2hvcihfY21wUkI6IENvbXBvbmVudFJpZ2lkYm9keSkge1xyXG4gICAgICB0aGlzLiNpZEJvZHlBbmNob3IgPSBfY21wUkIgIT0gbnVsbCA/IF9jbXBSQi5pZCA6IC0xO1xyXG4gICAgICB0aGlzLiNib2R5QW5jaG9yID0gX2NtcFJCO1xyXG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5kaXJ0eVN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBHZXQvU2V0IHRoZSBzZWNvbmQgQ29tcG9uZW50UmlnaWRib2R5IG9mIHRoaXMgY29ubmVjdGlvbi4gKi9cclxuICAgIHB1YmxpYyBnZXQgYm9keVRpZWQoKTogQ29tcG9uZW50UmlnaWRib2R5IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2JvZHlUaWVkO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBib2R5VGllZChfY21wUkI6IENvbXBvbmVudFJpZ2lkYm9keSkge1xyXG4gICAgICB0aGlzLiNpZEJvZHlUaWVkID0gX2NtcFJCICE9IG51bGwgPyBfY21wUkIuaWQgOiAtMTtcclxuICAgICAgdGhpcy4jYm9keVRpZWQgPSBfY21wUkI7XHJcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgICB0aGlzLmRpcnR5U3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZXhhY3QgcG9zaXRpb24gd2hlcmUgdGhlIHR3byB7QGxpbmsgTm9kZX1zIGFyZSBjb25uZWN0ZWQuIFdoZW4gY2hhbmdlZCBhZnRlciBpbml0aWFsaXphdGlvbiB0aGUgam9pbnQgbmVlZHMgdG8gYmUgcmVjb25uZWN0ZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgYW5jaG9yKCk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjModGhpcy4jYW5jaG9yLngsIHRoaXMuI2FuY2hvci55LCB0aGlzLiNhbmNob3Iueik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGFuY2hvcihfdmFsdWU6IFZlY3RvcjMpIHtcclxuICAgICAgdGhpcy4jYW5jaG9yID0gbmV3IE9JTU8uVmVjMyhfdmFsdWUueCwgX3ZhbHVlLnksIF92YWx1ZS56KTtcclxuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICAgIHRoaXMuZGlydHlTdGF0dXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbW91bnQgb2YgZm9yY2UgbmVlZGVkIHRvIGJyZWFrIHRoZSBKT0lOVCwgd2hpbGUgcm90YXRpbmcsIGluIE5ld3Rvbi4gMCBlcXVhbHMgdW5icmVha2FibGUgKGRlZmF1bHQpIFxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXQgYnJlYWtUb3JxdWUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2JyZWFrVG9ycXVlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBicmVha1RvcnF1ZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNicmVha1RvcnF1ZSA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5zZXRCcmVha1RvcnF1ZSh0aGlzLiNicmVha1RvcnF1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYW1vdW50IG9mIGZvcmNlIG5lZWRlZCB0byBicmVhayB0aGUgSk9JTlQsIGluIE5ld3Rvbi4gMCBlcXVhbHMgdW5icmVha2FibGUgKGRlZmF1bHQpIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGJyZWFrRm9yY2UoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2JyZWFrRm9yY2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGJyZWFrRm9yY2UoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jYnJlYWtGb3JjZSA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5zZXRCcmVha0ZvcmNlKHRoaXMuI2JyZWFrRm9yY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIElmIHRoZSB0d28gY29ubmVjdGVkIFJpZ2lkQm9kaWVzIGNvbGxpZGUgd2l0aCBlYXRoIG90aGVyLiAoRGVmYXVsdCA9IGZhbHNlKVxyXG4gICAgICAqIE9uIGEgd2VsZGluZyBqb2ludCB0aGUgY29ubmVjdGVkIGJvZGllcyBzaG91bGQgbm90IGJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIsXHJcbiAgICAgICogZm9yIGJlc3QgcmVzdWx0c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGludGVybmFsQ29sbGlzaW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy4jaW50ZXJuYWxDb2xsaXNpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGludGVybmFsQ29sbGlzaW9uKF92YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICB0aGlzLiNpbnRlcm5hbENvbGxpc2lvbiA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5zZXRBbGxvd0NvbGxpc2lvbih0aGlzLiNpbnRlcm5hbENvbGxpc2lvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbm5lY3RDaGlsZChfbmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI25hbWVDaGlsZFRvQ29ubmVjdCA9IF9uYW1lO1xyXG4gICAgICBpZiAoIXRoaXMubm9kZSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBsZXQgY2hpbGRyZW46IE5vZGVbXSA9IHRoaXMubm9kZS5nZXRDaGlsZHJlbkJ5TmFtZShfbmFtZSk7XHJcbiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPT0gMSlcclxuICAgICAgICB0aGlzLmNvbm5lY3ROb2RlKGNoaWxkcmVuLnBvcCgpKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIERlYnVnLndhcm4oYCR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfSBhdCAke3RoaXMubm9kZS5uYW1lfSBmYWlscyB0byBjb25uZWN0IGNoaWxkIHdpdGggbm9uIGV4aXN0ZW50IG9yIGFtYmlnb3VzIG5hbWUgJHtfbmFtZX1gKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29ubmVjdE5vZGUoX25vZGU6IE5vZGUpOiB2b2lkIHtcclxuICAgICAgaWYgKCFfbm9kZSB8fCAhdGhpcy5ub2RlKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIERlYnVnLmZ1ZGdlKGAke3RoaXMuY29uc3RydWN0b3IubmFtZX0gY29ubmVjdGVkICR7dGhpcy5ub2RlLm5hbWV9IGFuZCAke19ub2RlLm5hbWV9YCk7XHJcblxyXG4gICAgICBsZXQgY29ubmVjdEJvZHk6IENvbXBvbmVudFJpZ2lkYm9keSA9IF9ub2RlLmdldENvbXBvbmVudChDb21wb25lbnRSaWdpZGJvZHkpO1xyXG4gICAgICBsZXQgdGhpc0JvZHk6IENvbXBvbmVudFJpZ2lkYm9keSA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50UmlnaWRib2R5KTtcclxuXHJcbiAgICAgIGlmICghY29ubmVjdEJvZHkgfHwgIXRoaXNCb2R5KSB7XHJcbiAgICAgICAgRGVidWcud2FybihgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9IGF0ICR7dGhpcy5ub2RlLm5hbWV9IGZhaWxzIGR1ZSB0byBtaXNzaW5nIHJpZ2lkYm9kaWVzIG9uICR7dGhpcy5ub2RlLm5hbWV9IG9yICR7X25vZGUubmFtZX1gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuYm9keUFuY2hvciA9IHRoaXNCb2R5O1xyXG4gICAgICB0aGlzLmJvZHlUaWVkID0gY29ubmVjdEJvZHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIENoZWNrIGlmIGNvbm5lY3Rpb24gaXMgZGlydHksIHNvIHdoZW4gZWl0aGVyIHJiIGlzIGNoYW5nZWQgZGlzY29ubmVjdCBhbmQgcmVjb25uZWN0LiBJbnRlcm5hbGx5IHVzZWQgbm8gdXNlciBpbnRlcmFjdGlvbiBuZWVkZWQuICovXHJcbiAgICBwdWJsaWMgaXNDb25uZWN0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjb25uZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXppbmcgYW5kIGNvbm5lY3RpbmcgdGhlIHR3byByaWdpZGJvZGllcyB3aXRoIHRoZSBjb25maWd1cmVkIGpvaW50IHByb3BlcnRpZXNcclxuICAgICAqIGlzIGF1dG9tYXRpY2FsbHkgY2FsbGVkIGJ5IHRoZSBwaHlzaWNzIHN5c3RlbS4gTm8gdXNlciBpbnRlcmFjdGlvbiBuZWVkZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25uZWN0KCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy4jY29ubmVjdGVkID09IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuI2lkQm9keUFuY2hvciA9PSAtMSB8fCB0aGlzLiNpZEJvZHlUaWVkID09IC0xKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy4jbmFtZUNoaWxkVG9Db25uZWN0KVxyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RDaGlsZCh0aGlzLiNuYW1lQ2hpbGRUb0Nvbm5lY3QpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RKb2ludCgpO1xyXG4gICAgICAgIHRoaXMuI2Nvbm5lY3RlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5hZGRKb2ludCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNjb25uZWN0aW5nIHRoZSB0d28gcmlnaWRib2RpZXMgYW5kIHJlbW92aW5nIHRoZW0gZnJvbSB0aGUgcGh5c2ljcyBzeXN0ZW0sXHJcbiAgICAgKiBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCBieSB0aGUgcGh5c2ljcyBzeXN0ZW0uIE5vIHVzZXIgaW50ZXJhY3Rpb24gbmVlZGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGlzY29ubmVjdCgpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuI2Nvbm5lY3RlZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVKb2ludCgpO1xyXG4gICAgICAgIHRoaXMuI2Nvbm5lY3RlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBvcmlnaW5hbCBKb2ludCB1c2VkIGJ5IHRoZSBwaHlzaWNzIGVuZ2luZS4gVXNlZCBpbnRlcm5hbGx5IG5vIHVzZXIgaW50ZXJhY3Rpb24gbmVlZGVkLlxyXG4gICAgICogT25seSB0byBiZSB1c2VkIHdoZW4gZnVuY3Rpb25hbGl0eSB0aGF0IGlzIG5vdCBhZGRlZCB3aXRoaW4gRlVER0UgaXMgbmVlZGVkLlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXRPaW1vSm9pbnQoKTogT0lNTy5Kb2ludCB7XHJcbiAgICAgIHJldHVybiB0aGlzLmpvaW50O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gdGhpcy4jZ2V0TXV0YXRvcigpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmFuY2hvciA9IHRoaXMuYW5jaG9yLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMuYW5jaG9yID0gYXdhaXQgbmV3IFZlY3RvcjMoKS5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5hbmNob3IpO1xyXG4gICAgICB0aGlzLiNtdXRhdGUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIHRoaXMuY29ubmVjdENoaWxkKF9zZXJpYWxpemF0aW9uLm5hbWVDaGlsZFRvQ29ubmVjdCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IodHJ1ZSk7XHJcbiAgICAgIE9iamVjdC5hc3NpZ24obXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgbXV0YXRvci5hbmNob3IgPSB0aGlzLmFuY2hvci5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3IuYW5jaG9yKSAhPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICB0aGlzLmFuY2hvciA9IG5ldyBWZWN0b3IzKC4uLjxudW1iZXJbXT4oT2JqZWN0LnZhbHVlcyhfbXV0YXRvci5hbmNob3IpKSk7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5hbmNob3I7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLm5hbWVDaGlsZFRvQ29ubmVjdCkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy5jb25uZWN0Q2hpbGQoX211dGF0b3IubmFtZUNoaWxkVG9Db25uZWN0KTtcclxuICAgICAgdGhpcy4jbXV0YXRlKF9tdXRhdG9yKTtcclxuICAgICAgdGhpcy5kZWxldGVGcm9tTXV0YXRvcihfbXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICAjZ2V0TXV0YXRvciA9ICgpOiBNdXRhdG9yID0+IHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7XHJcbiAgICAgICAgbmFtZUNoaWxkVG9Db25uZWN0OiB0aGlzLiNuYW1lQ2hpbGRUb0Nvbm5lY3QsXHJcbiAgICAgICAgaW50ZXJuYWxDb2xsaXNpb246IHRoaXMuI2ludGVybmFsQ29sbGlzaW9uLFxyXG4gICAgICAgIGJyZWFrRm9yY2U6IHRoaXMuI2JyZWFrRm9yY2UsXHJcbiAgICAgICAgYnJlYWtUb3JxdWU6IHRoaXMuI2JyZWFrVG9ycXVlXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgICNtdXRhdGUgPSAoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkID0+IHtcclxuICAgICAgdGhpcy5tdXRhdGVCYXNlKF9tdXRhdG9yLCBbXCJpbnRlcm5hbENvbGxpc2lvblwiLCBcImJyZWFrRm9yY2VcIiwgXCJicmVha1RvcnF1ZVwiXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnNwcmluZ0RhbXBlcjtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLmpvaW50O1xyXG4gICAgICBkZWxldGUgX211dGF0b3IubW90b3I7XHJcbiAgICAgIHN1cGVyLnJlZHVjZU11dGF0b3IoX211dGF0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUZWxsIHRoZSBGdWRnZVBoeXNpY3Mgc3lzdGVtIHRoYXQgdGhpcyBqb2ludCBuZWVkcyB0byBiZSBoYW5kbGVkIGluIHRoZSBuZXh0IGZyYW1lLiAqL1xyXG4gICAgcHJvdGVjdGVkIGRpcnR5U3RhdHVzKCk6IHZvaWQge1xyXG4gICAgICBQaHlzaWNzLmNoYW5nZUpvaW50U3RhdHVzKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBhZGRKb2ludCgpOiB2b2lkIHtcclxuICAgICAgUGh5c2ljcy5hZGRKb2ludCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVtb3ZlSm9pbnQoKTogdm9pZCB7XHJcbiAgICAgIFBoeXNpY3MucmVtb3ZlSm9pbnQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KC4uLl9jb25maWdQYXJhbXM6IE9iamVjdFtdKTogdm9pZCB7XHJcbiAgICAgIGxldCBwb3NCb2R5QW5jaG9yOiBWZWN0b3IzID0gdGhpcy5ib2R5QW5jaG9yLm5vZGUubXR4V29ybGQudHJhbnNsYXRpb247IC8vU2V0dGluZyB0aGUgYW5jaG9yIHBvc2l0aW9uIGxvY2FsbHkgZnJvbSB0aGUgZmlyc3QgcmlnaWRib2R5XHJcbiAgICAgIGxldCB3b3JsZEFuY2hvcjogT0lNTy5WZWMzID0gbmV3IE9JTU8uVmVjMyhwb3NCb2R5QW5jaG9yLnggKyB0aGlzLiNhbmNob3IueCwgcG9zQm9keUFuY2hvci55ICsgdGhpcy4jYW5jaG9yLnksIHBvc0JvZHlBbmNob3IueiArIHRoaXMuI2FuY2hvci56KTtcclxuXHJcbiAgICAgIC8vIEB0cy1pZ25vcmUgICAgLy8gdW5mb3J0dW5hdGVseSwgbWV0aG9kIGluaXQgaXMgbm90IGEgbWVtYmVyIG9mIHRoZSBiYXNlIGNsYXNzIE9JTU8uSm9pbnRDb25maWdcclxuICAgICAgdGhpcy5jb25maWcuaW5pdCh0aGlzLiNib2R5QW5jaG9yLmdldE9pbW9SaWdpZGJvZHkoKSwgdGhpcy4jYm9keVRpZWQuZ2V0T2ltb1JpZ2lkYm9keSgpLCB3b3JsZEFuY2hvciwgLi4uX2NvbmZpZ1BhcmFtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbmZpZ3VyZUpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmpvaW50LnNldEJyZWFrRm9yY2UodGhpcy5icmVha0ZvcmNlKTtcclxuICAgICAgdGhpcy5qb2ludC5zZXRCcmVha1RvcnF1ZSh0aGlzLmJyZWFrVG9ycXVlKTtcclxuICAgICAgdGhpcy5qb2ludC5zZXRBbGxvd0NvbGxpc2lvbih0aGlzLiNpbnRlcm5hbENvbGxpc2lvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGRlbGV0ZUZyb21NdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yLCBfZGVsZXRlOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGZvciAobGV0IGtleSBpbiBfZGVsZXRlKVxyXG4gICAgICAgIGRlbGV0ZSBfbXV0YXRvcltrZXldO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaG5kRXZlbnQgPSAoX2V2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICBzd2l0Y2ggKF9ldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBFVkVOVC5DT01QT05FTlRfQUREOlxyXG4gICAgICAgICAgdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuRElTQ09OTkVDVF9KT0lOVCwgKCkgPT4geyB0aGlzLmRpc2Nvbm5lY3QoKTsgdGhpcy5kaXJ0eVN0YXR1cygpOyB9LCB0cnVlKTtcclxuICAgICAgICAgIHRoaXMuZGlydHlTdGF0dXMoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRVZFTlQuQ09NUE9ORU5UX1JFTU9WRTpcclxuICAgICAgICAgIHRoaXMubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULkRJU0NPTk5FQ1RfSk9JTlQsICgpID0+IHsgdGhpcy5kaXNjb25uZWN0KCk7IHRoaXMuZGlydHlTdGF0dXMoKTsgfSwgdHJ1ZSk7XHJcbiAgICAgICAgICB0aGlzLnJlbW92ZUpvaW50KCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAgICogQmFzZSBjbGFzcyBmb3Igam9pbnRzIG9wZXJhdGluZyB3aXRoIGV4YWN0bHkgb25lIGF4aXNcclxuICAgICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgKi9cclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgSm9pbnRBeGlhbCBleHRlbmRzIEpvaW50IHtcclxuXHJcbiAgICAvL0ludGVybmFsIFZhcmlhYmxlc1xyXG5cclxuICAgICNtYXhNb3RvcjogbnVtYmVyID0gMTA7XHJcbiAgICAjbWluTW90b3I6IG51bWJlciA9IC0xMDtcclxuICAgICNtb3RvclNwZWVkOiBudW1iZXIgPSAwO1xyXG4gICAgI2F4aXM6IE9JTU8uVmVjMztcclxuICAgICNzcHJpbmdGcmVxdWVuY3k6IG51bWJlciA9IDA7XHJcbiAgICAjc3ByaW5nRGFtcGluZzogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc3ByaW5nRGFtcGVyOiBPSU1PLlNwcmluZ0RhbXBlcjtcclxuXHJcblxyXG4gICAgLyoqIENyZWF0aW5nIGEgY3lsaW5kcmljYWwgam9pbnQgYmV0d2VlbiB0d28gQ29tcG9uZW50UmlnaWRib2RpZXMgbW92aW5nIG9uIG9uZSBheGlzIGFuZCByb3RhdGluZyBhcm91bmQgYW5vdGhlciBib3VuZCBvbiBhIGxvY2FsIGFuY2hvcnBvaW50LiAqL1xyXG4gICAgY29uc3RydWN0b3IoX2JvZHlBbmNob3I6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwsIF9ib2R5VGllZDogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2F4aXM6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAxLCAwKSwgX2xvY2FsQW5jaG9yOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoMCwgMCwgMCkpIHtcclxuICAgICAgc3VwZXIoX2JvZHlBbmNob3IsIF9ib2R5VGllZCk7XHJcbiAgICAgIHRoaXMuYXhpcyA9IF9heGlzO1xyXG4gICAgICB0aGlzLmFuY2hvciA9IF9sb2NhbEFuY2hvcjtcclxuICAgICAgdGhpcy5taW5Nb3RvciA9IC0xMDtcclxuICAgICAgdGhpcy5tYXhNb3RvciA9IDEwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBHZXQvU2V0IHRyYW5zZm9yIG9mIGZ1ZGdlIHByb3BlcnRpZXMgdG8gdGhlIHBoeXNpY3MgZW5naW5lXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBheGlzIGNvbm5lY3RpbmcgdGhlIHRoZSB0d28ge0BsaW5rIE5vZGV9cyBlLmcuIFZlY3RvcjMoMCwxLDApIHRvIGhhdmUgYSB1cHdhcmQgY29ubmVjdGlvbi5cclxuICAgICAqICBXaGVuIGNoYW5nZWQgYWZ0ZXIgaW5pdGlhbGl6YXRpb24gdGhlIGpvaW50IG5lZWRzIHRvIGJlIHJlY29ubmVjdGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGF4aXMoKTogVmVjdG9yMyB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMyh0aGlzLiNheGlzLngsIHRoaXMuI2F4aXMueSwgdGhpcy4jYXhpcy56KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgYXhpcyhfdmFsdWU6IFZlY3RvcjMpIHtcclxuICAgICAgdGhpcy4jYXhpcyA9IG5ldyBPSU1PLlZlYzMoX3ZhbHVlLngsIF92YWx1ZS55LCBfdmFsdWUueik7XHJcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgICB0aGlzLmRpcnR5U3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIFVwcGVyIExpbWl0IG9mIG1vdmVtZW50IGFsb25nIHRoZSBheGlzIG9mIHRoaXMgam9pbnQuIFRoZSBsaW1pdGVyIGlzIGRpc2FibGUgaWYgbG93ZXJMaW1pdCA+IHVwcGVyTGltaXQuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG1heE1vdG9yKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtYXhNb3RvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IG1heE1vdG9yKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21heE1vdG9yID0gX3ZhbHVlO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgICg8T0lNTy5QcmlzbWF0aWNKb2ludD48dW5rbm93bj50aGlzLmpvaW50KS5nZXRMaW1pdE1vdG9yKCkudXBwZXJMaW1pdCA9IF92YWx1ZTtcclxuICAgICAgfSBjYXRjaCAoX2U6IHVua25vd24pIHsgLyogKi8gfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBMb3dlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG1pbk1vdG9yKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtaW5Nb3RvcjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgbWluTW90b3IoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jbWluTW90b3IgPSBfdmFsdWU7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgKDxPSU1PLlByaXNtYXRpY0pvaW50Pjx1bmtub3duPnRoaXMuam9pbnQpLmdldExpbWl0TW90b3IoKS5sb3dlckxpbWl0ID0gX3ZhbHVlO1xyXG4gICAgICB9IGNhdGNoIChfZTogdW5rbm93bikgeyAvKiAqLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGFtcGluZyBvZiB0aGUgc3ByaW5nLiAxIGVxdWFscyBjb21wbGV0bHkgZGFtcGVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHNwcmluZ0RhbXBpbmcoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0RhbXBpbmc7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHNwcmluZ0RhbXBpbmcoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jc3ByaW5nRGFtcGluZyA9IF92YWx1ZTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAoPE9JTU8uUHJpc21hdGljSm9pbnQ+PHVua25vd24+dGhpcy5qb2ludCkuZ2V0U3ByaW5nRGFtcGVyKCkuZGFtcGluZ1JhdGlvID0gX3ZhbHVlO1xyXG4gICAgICB9IGNhdGNoIChfZTogdW5rbm93bikgeyAvKiAqLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIHRhcmdldCBzcGVlZCBvZiB0aGUgbW90b3IgaW4gbS9zLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG1vdG9yU3BlZWQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21vdG9yU3BlZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBtb3RvclNwZWVkKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21vdG9yU3BlZWQgPSBfdmFsdWU7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgKDxPSU1PLlByaXNtYXRpY0pvaW50PnRoaXMuam9pbnQpLmdldExpbWl0TW90b3IoKS5tb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgICB9IGNhdGNoIChfZTogdW5rbm93bikgeyAvKiAqLyB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnJlcXVlbmN5IG9mIHRoZSBzcHJpbmcgaW4gSHouIEF0IDAgdGhlIHNwcmluZyBpcyByaWdpZCwgZXF1YWxzIG5vIHNwcmluZy4gVGhlIHNtYWxsZXIgdGhlIHZhbHVlIHRoZSBsZXNzIHJlc3RyaWN0aXZlIGlzIHRoZSBzcHJpbmcuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGdldCBzcHJpbmdGcmVxdWVuY3koKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc3ByaW5nRnJlcXVlbmN5KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeSA9IF92YWx1ZTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICAoPE9JTU8uUHJpc21hdGljSm9pbnQ+dGhpcy5qb2ludCkuZ2V0U3ByaW5nRGFtcGVyKCkuZnJlcXVlbmN5ID0gX3ZhbHVlO1xyXG4gICAgICB9IGNhdGNoIChfZTogdW5rbm93bikgeyAvKiAqLyB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2F2aW5nL0xvYWRpbmdcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gdGhpcy4jZ2V0TXV0YXRvcigpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmF4aXMgPSB0aGlzLmF4aXMuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5heGlzID0gYXdhaXQgbmV3IFZlY3RvcjMoKS5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5heGlzKTtcclxuICAgICAgdGhpcy4jbXV0YXRlKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLmF4aXMpICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHRoaXMuYXhpcyA9IG5ldyBWZWN0b3IzKC4uLjxudW1iZXJbXT4oT2JqZWN0LnZhbHVlcyhfbXV0YXRvci5heGlzKSkpO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IuYXhpcztcclxuICAgICAgdGhpcy4jbXV0YXRlKF9tdXRhdG9yKTtcclxuICAgICAgdGhpcy5kZWxldGVGcm9tTXV0YXRvcihfbXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIG11dGF0b3IuYXhpcyA9IHRoaXMuYXhpcy5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIE9iamVjdC5hc3NpZ24obXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgI2dldE11dGF0b3IgPSAoKTogTXV0YXRvciA9PiB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0ge1xyXG4gICAgICAgIHNwcmluZ0RhbXBpbmc6IHRoaXMuI3NwcmluZ0RhbXBpbmcsXHJcbiAgICAgICAgc3ByaW5nRnJlcXVlbmN5OiB0aGlzLiNzcHJpbmdGcmVxdWVuY3ksXHJcbiAgICAgICAgbWF4TW90b3I6IHRoaXMuI21heE1vdG9yLFxyXG4gICAgICAgIG1pbk1vdG9yOiB0aGlzLiNtaW5Nb3RvcixcclxuICAgICAgICBtb3RvclNwZWVkOiB0aGlzLiNtb3RvclNwZWVkXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG4gICAgI211dGF0ZSA9IChfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgPT4ge1xyXG4gICAgICB0aGlzLm11dGF0ZUJhc2UoX211dGF0b3IsIFtcInNwcmluZ0RhbXBpbmdcIiwgXCJzcHJpbmdGcmVxdWVuY3lcIiwgXCJtYXhNb3RvclwiLCBcIm1pbk1vdG9yXCIsIFwibW90b3JTcGVlZFwiXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNwcmluZ0RhbXBlciA9IG5ldyBPSU1PLlNwcmluZ0RhbXBlcigpLnNldFNwcmluZyh0aGlzLiNzcHJpbmdGcmVxdWVuY3ksIHRoaXMuI3NwcmluZ0RhbXBpbmcpO1xyXG4gICAgICBzdXBlci5jb25zdHJ1Y3RKb2ludCh0aGlzLiNheGlzKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWcvRGVidWdUYXJnZXQudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJEZWJ1Zy9EZWJ1Zy50c1wiLz5cclxuLy8gLyA8cmVmZXJlbmNlIHBhdGg9XCJUaW1lL1RpbWUudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJFdmVudC9FdmVudC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNlcmlhbGl6YXRpb24vTXV0YWJsZS50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNlcmlhbGl6YXRpb24vU2VyaWFsaXplci50c1wiLz4gXHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJHcmFwaC9Ob2RlLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tcG9uZW50L0NvbXBvbmVudC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlJlY3ljbGUvUmVjeWNhYmxlQXJyYXkudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJSZW5kZXIvUmVuZGVyV2ViR0wudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJSZW5kZXIvUmVuZGVySW5qZWN0b3JUZXh0dXJlLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiUGh5c2ljcy9IZWxwZXJzUGh5c2ljcy50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlBoeXNpY3MvSm9pbnQudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJQaHlzaWNzL0pvaW50QXhpYWwudHNcIi8+XHJcblxyXG5cclxuLy9nbG9iYWwgZnVuY3Rpb25zXHJcbmZ1bmN0aW9uIGlmTnVtYmVyKF9jaGVjazogbnVtYmVyLCBfZGVmYXVsdDogbnVtYmVyKTogbnVtYmVyIHtcclxuICByZXR1cm4gdHlwZW9mIF9jaGVjayA9PSBcInVuZGVmaW5lZFwiID8gX2RlZmF1bHQgOiBfY2hlY2s7XHJcbn0iLCIvLyAvIDxyZWZlcmVuY2UgcGF0aD1cIi4uL1RyYW5zZmVyL011dGFibGUudHNcIi8+XHJcblxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgQW5pbWF0aW9uU3RydWN0dXJlIHRoYXQgdGhlIEFuaW1hdGlvbiB1c2VzIHRvIG1hcCB0aGUgU2VxdWVuY2VzIHRvIHRoZSBBdHRyaWJ1dGVzLlxyXG4gICAqIEJ1aWx0IG91dCBvZiBhIHtAbGluayBOb2RlfSdzIHNlcmlhbHNhdGlvbiwgaXQgc3dhcHMgdGhlIHZhbHVlcyB3aXRoIHtAbGluayBBbmltYXRpb25TZXF1ZW5jZX1zLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uU3RydWN0dXJlIHtcclxuICAgIGNoaWxkcmVuPzogQW5pbWF0aW9uU3RydWN0dXJlLFxyXG4gICAgW2F0dHJpYnV0ZTogc3RyaW5nXTogQW5pbWF0aW9uU3RydWN0dXJlW10gfCBBbmltYXRpb25TdHJ1Y3R1cmUgfCBBbmltYXRpb25TZXF1ZW5jZTtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uU3RydWN0dXJlVmVjdG9yMyBleHRlbmRzIEFuaW1hdGlvblN0cnVjdHVyZSB7XHJcbiAgICB4PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgICB5PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgICB6PzogQW5pbWF0aW9uU2VxdWVuY2U7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEFuaW1hdGlvblN0cnVjdHVyZVZlY3RvcjQgZXh0ZW5kcyBBbmltYXRpb25TdHJ1Y3R1cmUge1xyXG4gICAgeD86IEFuaW1hdGlvblNlcXVlbmNlO1xyXG4gICAgeT86IEFuaW1hdGlvblNlcXVlbmNlO1xyXG4gICAgej86IEFuaW1hdGlvblNlcXVlbmNlO1xyXG4gICAgdz86IEFuaW1hdGlvblNlcXVlbmNlO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBBbmltYXRpb25TdHJ1Y3R1cmVNYXRyaXg0eDQgZXh0ZW5kcyBBbmltYXRpb25TdHJ1Y3R1cmUge1xyXG4gICAgcm90YXRpb24/OiBBbmltYXRpb25TdHJ1Y3R1cmVWZWN0b3IzIHwgQW5pbWF0aW9uU3RydWN0dXJlVmVjdG9yNDtcclxuICAgIHNjYWxlPzogQW5pbWF0aW9uU3RydWN0dXJlVmVjdG9yMztcclxuICAgIHRyYW5zbGF0aW9uPzogQW5pbWF0aW9uU3RydWN0dXJlVmVjdG9yMztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogQW4gYXNzb2NpYXRpdmUgYXJyYXkgbWFwcGluZyBuYW1lcyBvZiBsYWJsZXMgdG8gdGltZXN0YW1wcy5cclxuICAqIExhYmVscyBuZWVkIHRvIGJlIHVuaXF1ZSBwZXIgQW5pbWF0aW9uLlxyXG4gICogQGF1dGhvciBMdWthcyBTY2hldWVybGUsIEhGVSwgMjAxOVxyXG4gICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBBbmltYXRpb25MYWJlbCB7XHJcbiAgICBbbmFtZTogc3RyaW5nXTogbnVtYmVyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCBBbmltYXRpb24gRXZlbnQgVHJpZ2dlcnNcclxuICAqIEBhdXRob3IgTHVrYXMgU2NoZXVlcmxlLCBIRlUsIDIwMTlcclxuICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uRXZlbnRUcmlnZ2VyIHtcclxuICAgIFtuYW1lOiBzdHJpbmddOiBudW1iZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnRlcm5hbGx5IHVzZWQgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIHRoZSB2YXJpb3VzIGdlbmVyYXRlZCBzdHJ1Y3R1cmVzIGFuZCBldmVudHMuXHJcbiAgICogQGF1dGhvciBMdWthcyBTY2hldWVybGUsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGVudW0gQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFIHtcclxuICAgIC8qKkRlZmF1bHQ6IGZvcndhcmQsIGNvbnRpbm91cyAqL1xyXG4gICAgTk9STUFMLFxyXG4gICAgLyoqYmFja3dhcmQsIGNvbnRpbm91cyAqL1xyXG4gICAgUkVWRVJTRSxcclxuICAgIC8qKmZvcndhcmQsIHJhc3RlcmVkICovXHJcbiAgICBSQVNURVJFRCxcclxuICAgIC8qKmJhY2t3YXJkLCByYXN0ZXJlZCAqL1xyXG4gICAgUkFTVEVSRURSRVZFUlNFXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIb2xkcyBkaWZmZXJlbnQgcGxheW1vZGVzIHRoZSBhbmltYXRpb24gdXNlcyB0byBwbGF5IGJhY2sgaXRzIGFuaW1hdGlvbi5cclxuICAgKiBAYXV0aG9yIEx1a2FzIFNjaGV1ZXJsZSwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gQU5JTUFUSU9OX1BMQVlNT0RFIHtcclxuICAgIC8qKlBsYXlzIGFuaW1hdGlvbiBpbiBhIGxvb3A6IGl0IHJlc3RhcnRzIG9uY2UgaXQgaGl0IHRoZSBlbmQuKi9cclxuICAgIExPT1AgPSBcImxvb3BcIixcclxuICAgIC8qKlBsYXlzIGFuaW1hdGlvbiBvbmNlIGFuZCBzdG9wcyBhdCB0aGUgbGFzdCBrZXkvZnJhbWUqL1xyXG4gICAgUExBWV9PTkNFID0gXCJwbGF5T25jZVwiLFxyXG4gICAgLyoqUGxheXMgYW5pbWF0aW9uIG9uY2UgYW5kIHN0b3BzIG9uIHRoZSBmaXJzdCBrZXkvZnJhbWUgKi9cclxuICAgIFBMQVlfT05DRV9SRVNFVCA9IFwicGxheU9uY2VSZXNldFwiLFxyXG4gICAgLyoqUGxheXMgYW5pbWF0aW9uIGxpa2UgTE9PUCwgYnV0IGJhY2t3YXJkcy4qL1xyXG4gICAgUkVWRVJTRV9MT09QID0gXCJyZXZlcnNlTG9vcFwiLFxyXG4gICAgLyoqQ2F1c2VzIHRoZSBhbmltYXRpb24gbm90IHRvIHBsYXkgYXQgYWxsLiBVc2VmdWwgZm9yIGp1bXBpbmcgdG8gdmFyaW91cyBwb3NpdGlvbnMgaW4gdGhlIGFuaW1hdGlvbiB3aXRob3V0IHByb2NlZWRpbmcgaW4gdGhlIGFuaW1hdGlvbi4qL1xyXG4gICAgU1RPUCA9IFwic3RvcFwiXHJcbiAgICAvL1RPRE86IGFkZCBhbiBJTkhFUklUIGFuZCBhIFBJTkdQT05HIG1vZGVcclxuICB9XHJcblxyXG4gIGV4cG9ydCBlbnVtIEFOSU1BVElPTl9RVUFOVElaQVRJT04ge1xyXG4gICAgLy9UT0RPOiBhZGQgYW4gaW4tZGVwdGggZGVzY3JpcHRpb24gb2Ygd2hhdCBoYXBwZW5zIHRvIHRoZSBhbmltYXRpb24gKGFuZCBldmVudHMpIGRlcGVuZGluZyBvbiB0aGUgcXVhbnRpemF0aW9uLiBVc2UgR3JhcGhzIHRvIGV4cGxhaW4uXHJcbiAgICAvKipDYWxjdWxhdGVzIHRoZSBzdGF0ZSBvZiB0aGUgYW5pbWF0aW9uIGF0IHRoZSBleGFjdCBwb3NpdGlvbiBvZiB0aW1lLiBJZ25vcmVzIEZQUyB2YWx1ZSBvZiBhbmltYXRpb24uKi9cclxuICAgIENPTlRJTk9VUyA9IFwiY29udGlub3VzXCIsXHJcbiAgICAvKipMaW1pdHMgdGhlIGNhbGN1bGF0aW9uIG9mIHRoZSBzdGF0ZSBvZiB0aGUgYW5pbWF0aW9uIHRvIHRoZSBGUFMgdmFsdWUgb2YgdGhlIGFuaW1hdGlvbi4gU2tpcHMgZnJhbWVzIGlmIG5lZWRlZC4qL1xyXG4gICAgRElTQ1JFVEUgPSBcImRpc2NyZXRlXCIsXHJcbiAgICAvKiogQWR2YW5jZXMgdGhlIHRpbWUgZWFjaCBmcmFtZSBhY2NvcmRpbmcgdG8gdGhlIEZQUyB2YWx1ZSBvZiB0aGUgYW5pbWF0aW9uLCBpZ25vcmluZyB0aGUgYWN0dWFsIGR1cmF0aW9uIG9mIHRoZSBmcmFtZXMuIERvZXNuJ3Qgc2tpcCBhbnkgZnJhbWVzLiovXHJcbiAgICBGUkFNRVMgPSBcImZyYW1lc1wiXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgYW5kIGNvbnRyb2xzIGFuZCBhbmltYXRpb24gYnkgeWllbGRpbmcgbXV0YXRvcnMgXHJcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBzdG9yZWQge0BsaW5rIEFuaW1hdGlvblN0cnVjdHVyZX0gYW5kIHtAbGluayBBbmltYXRpb25TZXF1ZW5jZX1zXHJcbiAgICogQXBwbGllZCB0byBhIHtAbGluayBOb2RlfSBkaXJlY3RseSB2aWEgc2NyaXB0IG9yIHtAbGluayBDb21wb25lbnRBbmltYXRvcn0uXHJcbiAgICogQGF1dGhvciBMdWthcyBTY2hldWVybGUsIEhGVSwgMjEwMTkgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMS0yMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEFuaW1hdGlvbiBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGVSZXNvdXJjZSB7XHJcbiAgICAvLyAvKiogcmVmZXJzIGJhY2sgdG8gdGhpcyBjbGFzcyBmcm9tIGFueSBzdWJjbGFzcyBlLmcuIGluIG9yZGVyIHRvIGZpbmQgY29tcGF0aWJsZSBvdGhlciByZXNvdXJjZXMqL1xyXG4gICAgLy8gcHVibGljIHN0YXRpYyByZWFkb25seSBiYXNlQ2xhc3M6IHR5cGVvZiBBbmltYXRpb24gPSBBbmltYXRpb247XHJcbiAgICAvLyAvKiogbGlzdCBvZiBhbGwgdGhlIHN1YmNsYXNzZXMgZGVyaXZlZCBmcm9tIHRoaXMgY2xhc3MsIGlmIHRoZXkgcmVnaXN0ZXJlZCBwcm9wZXJseSovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IHN1YmNsYXNzZXM6IHR5cGVvZiBBbmltYXRpb25bXSA9IFtdO1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IEFuaW1hdGlvbi5yZWdpc3RlclN1YmNsYXNzKEFuaW1hdGlvbik7XHJcbiAgICBwdWJsaWMgaWRSZXNvdXJjZTogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyB0b3RhbFRpbWU6IG51bWJlciA9IDA7XHJcbiAgICBwdWJsaWMgbGFiZWxzOiBBbmltYXRpb25MYWJlbCA9IHt9OyAvLyBhIGxhYmVsIG1hcmtzIGEgc3BlY2lmaWMgdGltZSB0byBjb252ZW5pZW50bHkganVtcCB0byB1c2luZyBhIHRleHQgaWRlbnRpZmllclxyXG4gICAgLy8gc3RlcHNQZXJTZWNvbmQ6IG51bWJlciA9IDEwO1xyXG4gICAgcHVibGljIGFuaW1hdGlvblN0cnVjdHVyZTogQW5pbWF0aW9uU3RydWN0dXJlO1xyXG4gICAgcHVibGljIGV2ZW50czogQW5pbWF0aW9uRXZlbnRUcmlnZ2VyID0ge307XHJcbiAgICBwcm90ZWN0ZWQgZnJhbWVzUGVyU2Vjb25kOiBudW1iZXIgPSA2MDsgLy8gVE9ETzogY2hhbmdlIHRoaXMgYW5kIGl0cyBhY2Nlc3NvcnMgdG8gI2ZyYW1lc1BlclNlY29uZD9cclxuXHJcbiAgICAvLyBwcm9jZXNzZWQgZXZlbnRsaXN0IGFuZCBhbmltYXRpb24gc3RydWN1dHJlcyBmb3IgcGxheWJhY2suXHJcbiAgICBwcml2YXRlIGV2ZW50c1Byb2Nlc3NlZDogTWFwPEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRSwgQW5pbWF0aW9uRXZlbnRUcmlnZ2VyPiA9IG5ldyBNYXA8QU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLCBBbmltYXRpb25FdmVudFRyaWdnZXI+KCk7XHJcbiAgICAjYW5pbWF0aW9uU3RydWN0dXJlc1Byb2Nlc3NlZDogTWFwPEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRSwgQW5pbWF0aW9uU3RydWN0dXJlPiA9IG5ldyBNYXA8QU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLCBBbmltYXRpb25TdHJ1Y3R1cmU+KCk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcgPSBBbmltYXRpb24ubmFtZSwgX2FuaW1TdHJ1Y3R1cmU6IEFuaW1hdGlvblN0cnVjdHVyZSA9IHt9LCBfZnBzOiBudW1iZXIgPSA2MCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgICAgdGhpcy5hbmltYXRpb25TdHJ1Y3R1cmUgPSBfYW5pbVN0cnVjdHVyZTtcclxuICAgICAgdGhpcy4jYW5pbWF0aW9uU3RydWN0dXJlc1Byb2Nlc3NlZC5zZXQoQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLk5PUk1BTCwgX2FuaW1TdHJ1Y3R1cmUpO1xyXG4gICAgICB0aGlzLmZyYW1lc1BlclNlY29uZCA9IF9mcHM7XHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxUaW1lKCk7XHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyByZWdpc3RlclN1YmNsYXNzKF9zdWJDbGFzczogdHlwZW9mIEFuaW1hdGlvbik6IG51bWJlciB7IHJldHVybiBBbmltYXRpb24uc3ViY2xhc3Nlcy5wdXNoKF9zdWJDbGFzcykgLSAxOyB9XHJcblxyXG4gICAgcHVibGljIGdldCBnZXRMYWJlbHMoKTogRW51bWVyYXRvciB7XHJcbiAgICAgIC8vVE9ETzogdGhpcyBhY3R1YWxseSBuZWVkcyB0ZXN0aW5nXHJcbiAgICAgIGxldCBlbjogRW51bWVyYXRvciA9IG5ldyBFbnVtZXJhdG9yKHRoaXMubGFiZWxzKTtcclxuICAgICAgcmV0dXJuIGVuO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZnBzKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZyYW1lc1BlclNlY29uZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGZwcyhfZnBzOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5mcmFtZXNQZXJTZWNvbmQgPSBfZnBzO1xyXG4gICAgICB0aGlzLmV2ZW50c1Byb2Nlc3NlZC5jbGVhcigpO1xyXG4gICAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGNsZWFyQ2FjaGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI2FuaW1hdGlvblN0cnVjdHVyZXNQcm9jZXNzZWQuY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhIHtAbGluayBNdXRhdG9yfSB3aXRoIHRoZSBpbmZvcm1hdGlvbiB0byBhcHBseSB0byB0aGUge0BsaW5rIE5vZGV9IHRvIGFuaW1hdGVcclxuICAgICAqIGluIHRoZSBzdGF0ZSB0aGUgYW5pbWF0aW9uIGlzIGluIGF0IHRoZSBnaXZlbiB0aW1lLCBkaXJlY3Rpb24gYW5kIHF1YW50aXphdGlvblxyXG4gICAgICovXHJcbiAgICBnZXRTdGF0ZShfdGltZTogbnVtYmVyLCBfZGlyZWN0aW9uOiBudW1iZXIsIF9xdWFudGl6YXRpb246IEFOSU1BVElPTl9RVUFOVElaQVRJT04pOiBNdXRhdG9yIHsgXHJcbiAgICAgIGxldCBtOiBNdXRhdG9yID0ge307XHJcbiAgICAgIGxldCBhbmltYXRpb25TdHJ1Y3R1cmU6IEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRTtcclxuXHJcbiAgICAgIGlmIChfcXVhbnRpemF0aW9uID09IEFOSU1BVElPTl9RVUFOVElaQVRJT04uQ09OVElOT1VTKVxyXG4gICAgICAgIGFuaW1hdGlvblN0cnVjdHVyZSA9IF9kaXJlY3Rpb24gPCAwID8gQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLlJFVkVSU0UgOiBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuTk9STUFMO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgYW5pbWF0aW9uU3RydWN0dXJlID0gX2RpcmVjdGlvbiA8IDAgPyBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkFTVEVSRURSRVZFUlNFIDogQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLlJBU1RFUkVEO1xyXG5cclxuICAgICAgICBtID0gdGhpcy50cmF2ZXJzZVN0cnVjdHVyZUZvck11dGF0b3IodGhpcy5nZXRQcm9jZXNzZWRBbmltYXRpb25TdHJ1Y3R1cmUoYW5pbWF0aW9uU3RydWN0dXJlKSwgX3RpbWUpO1xyXG4gICAgICByZXR1cm4gbTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIHRoZSBuYW1lcyBvZiB0aGUgZXZlbnRzIHRoZSB7QGxpbmsgQ29tcG9uZW50QW5pbWF0b3J9IG5lZWRzIHRvIGZpcmUgYmV0d2VlbiBfbWluIGFuZCBfbWF4IGlucHV0IHZhbHVlcy5cclxuICAgICAqIEBwYXJhbSBfZGlyZWN0aW9uIFRoZSBkaXJlY3Rpb24gdGhlIGFuaW1hdGlvbiBpcyBzdXBwb3NlZCB0byBydW4gaW4uID4wID09IGZvcndhcmQsIDAgPT0gc3RvcCwgPDAgPT0gYmFja3dhcmRzXHJcbiAgICAgKiBAcmV0dXJucyBhIGxpc3Qgb2Ygc3RyaW5ncyB3aXRoIHRoZSBuYW1lcyBvZiB0aGUgY3VzdG9tIGV2ZW50cyB0byBmaXJlLlxyXG4gICAgICovXHJcbiAgICBnZXRFdmVudHNUb0ZpcmUoX21pbjogbnVtYmVyLCBfbWF4OiBudW1iZXIsIF9xdWFudGl6YXRpb246IEFOSU1BVElPTl9RVUFOVElaQVRJT04sIF9kaXJlY3Rpb246IG51bWJlcik6IHN0cmluZ1tdIHtcclxuICAgICAgbGV0IGV2ZW50TGlzdDogc3RyaW5nW10gPSBbXTtcclxuICAgICAgbGV0IG1pblNlY3Rpb246IG51bWJlciA9IE1hdGguZmxvb3IoX21pbiAvIHRoaXMudG90YWxUaW1lKTtcclxuICAgICAgbGV0IG1heFNlY3Rpb246IG51bWJlciA9IE1hdGguZmxvb3IoX21heCAvIHRoaXMudG90YWxUaW1lKTtcclxuICAgICAgX21pbiA9IF9taW4gJSB0aGlzLnRvdGFsVGltZTtcclxuICAgICAgX21heCA9IF9tYXggJSB0aGlzLnRvdGFsVGltZTtcclxuXHJcbiAgICAgIHdoaWxlIChtaW5TZWN0aW9uIDw9IG1heFNlY3Rpb24pIHtcclxuICAgICAgICBsZXQgZXZlbnRUcmlnZ2VyczogQW5pbWF0aW9uRXZlbnRUcmlnZ2VyID0gdGhpcy5nZXRDb3JyZWN0RXZlbnRMaXN0KF9kaXJlY3Rpb24sIF9xdWFudGl6YXRpb24pO1xyXG4gICAgICAgIGlmIChtaW5TZWN0aW9uID09IG1heFNlY3Rpb24pIHtcclxuICAgICAgICAgIGV2ZW50TGlzdCA9IGV2ZW50TGlzdC5jb25jYXQodGhpcy5jaGVja0V2ZW50c0JldHdlZW4oZXZlbnRUcmlnZ2VycywgX21pbiwgX21heCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBldmVudExpc3QgPSBldmVudExpc3QuY29uY2F0KHRoaXMuY2hlY2tFdmVudHNCZXR3ZWVuKGV2ZW50VHJpZ2dlcnMsIF9taW4sIHRoaXMudG90YWxUaW1lKSk7XHJcbiAgICAgICAgICBfbWluID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWluU2VjdGlvbisrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZXZlbnRMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhbiBFdmVudCB0byB0aGUgTGlzdCBvZiBldmVudHMuXHJcbiAgICAgKiBAcGFyYW0gX25hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IChuZWVkcyB0byBiZSB1bmlxdWUgcGVyIEFuaW1hdGlvbikuXHJcbiAgICAgKiBAcGFyYW0gX3RpbWUgVGhlIHRpbWVzdGFtcCBvZiB0aGUgZXZlbnQgKGluIG1pbGxpc2Vjb25kcykuXHJcbiAgICAgKi9cclxuICAgIHNldEV2ZW50KF9uYW1lOiBzdHJpbmcsIF90aW1lOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5ldmVudHNbX25hbWVdID0gX3RpbWU7XHJcbiAgICAgIHRoaXMuZXZlbnRzUHJvY2Vzc2VkLmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBldmVudCB3aXRoIHRoZSBnaXZlbiBuYW1lIGZyb20gdGhlIGxpc3Qgb2YgZXZlbnRzLlxyXG4gICAgICogQHBhcmFtIF9uYW1lIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHJlbW92ZS5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlRXZlbnQoX25hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICBkZWxldGUgdGhpcy5ldmVudHNbX25hbWVdO1xyXG4gICAgICB0aGlzLmV2ZW50c1Byb2Nlc3NlZC5jbGVhcigpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIChSZS0pQ2FsY3VsYXRlIHRoZSB0b3RhbCB0aW1lIG9mIHRoZSBBbmltYXRpb24uIENhbGN1bGF0aW9uLWhlYXZ5LCB1c2Ugb25seSBpZiBhY3R1YWxseSBuZWVkZWQuXHJcbiAgICAgKi9cclxuICAgIGNhbGN1bGF0ZVRvdGFsVGltZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy50b3RhbFRpbWUgPSAwO1xyXG4gICAgICB0aGlzLnRyYXZlcnNlU3RydWN0dXJlRm9yVGltZSh0aGlzLmFuaW1hdGlvblN0cnVjdHVyZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB0aW1lIHRvIHVzZSBmb3IgYW5pbWF0aW9uIHNhbXBsaW5nIHdoZW4gYXBwbHlpbmcgYSBwbGF5bW9kZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0TW9kYWxUaW1lKF90aW1lOiBudW1iZXIsIF9wbGF5bW9kZTogQU5JTUFUSU9OX1BMQVlNT0RFLCBfdGltZVN0b3A6IG51bWJlciA9IF90aW1lKTogbnVtYmVyIHtcclxuICAgICAgc3dpdGNoIChfcGxheW1vZGUpIHtcclxuICAgICAgICBjYXNlIEFOSU1BVElPTl9QTEFZTU9ERS5TVE9QOlxyXG4gICAgICAgICAgLy8gcmV0dXJuIHRoaXMubG9jYWxUaW1lLmdldE9mZnNldCgpO1xyXG4gICAgICAgICAgcmV0dXJuIF90aW1lU3RvcDtcclxuICAgICAgICBjYXNlIEFOSU1BVElPTl9QTEFZTU9ERS5QTEFZX09OQ0U6XHJcbiAgICAgICAgICBpZiAoX3RpbWUgPj0gdGhpcy50b3RhbFRpbWUpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvdGFsVGltZSAtIDAuMDE7ICAgICAvL1RPRE86IHRoaXMgbWlnaHQgY2F1c2Ugc29tZSBpc3N1ZXNcclxuICAgICAgICBjYXNlIEFOSU1BVElPTl9QTEFZTU9ERS5QTEFZX09OQ0VfUkVTRVQ6XHJcbiAgICAgICAgICBpZiAoX3RpbWUgPj0gdGhpcy50b3RhbFRpbWUpXHJcbiAgICAgICAgICAgIC8vIFRPRE86IHJldHVybiBfdGltZVN0b3AgaW5zdGVhZD9cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG90YWxUaW1lICsgMC4wMTsgICAgIC8vVE9ETzogdGhpcyBtaWdodCBjYXVzZSBzb21lIGlzc3Vlc1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBfdGltZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZXMgYW5kIHJldHVybnMgdGhlIGRpcmVjdGlvbiB0aGUgYW5pbWF0aW9uIHNob3VsZCBjdXJyZW50bHkgYmUgcGxheWluZyBpbi5cclxuICAgICAqIEBwYXJhbSBfdGltZSB0aGUgdGltZSBhdCB3aGljaCB0byBjYWxjdWxhdGUgdGhlIGRpcmVjdGlvblxyXG4gICAgICogQHJldHVybnMgMSBpZiBmb3J3YXJkLCAwIGlmIHN0b3AsIC0xIGlmIGJhY2t3YXJkc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2FsY3VsYXRlRGlyZWN0aW9uKF90aW1lOiBudW1iZXIsIF9wbGF5bW9kZTogQU5JTUFUSU9OX1BMQVlNT0RFKTogbnVtYmVyIHtcclxuICAgICAgc3dpdGNoIChfcGxheW1vZGUpIHtcclxuICAgICAgICBjYXNlIEFOSU1BVElPTl9QTEFZTU9ERS5TVE9QOlxyXG4gICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgLy8gY2FzZSBBTklNQVRJT05fUExBWU1PREUuUElOR1BPTkc6XHJcbiAgICAgICAgLy8gICBpZiAoTWF0aC5mbG9vcihfdGltZSAvIHRoaXMuYW5pbWF0aW9uLnRvdGFsVGltZSkgJSAyID09IDApXHJcbiAgICAgICAgLy8gICAgIHJldHVybiAxO1xyXG4gICAgICAgIC8vICAgZWxzZVxyXG4gICAgICAgIC8vICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgY2FzZSBBTklNQVRJT05fUExBWU1PREUuUkVWRVJTRV9MT09QOlxyXG4gICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIGNhc2UgQU5JTUFUSU9OX1BMQVlNT0RFLlBMQVlfT05DRTpcclxuICAgICAgICBjYXNlIEFOSU1BVElPTl9QTEFZTU9ERS5QTEFZX09OQ0VfUkVTRVQ6XHJcbiAgICAgICAgICBpZiAoX3RpbWUgPj0gdGhpcy50b3RhbFRpbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIHRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgczogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBpZFJlc291cmNlOiB0aGlzLmlkUmVzb3VyY2UsXHJcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgIGxhYmVsczoge30sXHJcbiAgICAgICAgZXZlbnRzOiB7fSxcclxuICAgICAgICBmcmFtZXNQZXJTZWNvbmQ6IHRoaXMuZnJhbWVzUGVyU2Vjb25kLFxyXG4gICAgICAgIC8vIHNwczogdGhpcy5zdGVwc1BlclNlY29uZFxyXG4gICAgICB9O1xyXG4gICAgICBmb3IgKGxldCBuYW1lIGluIHRoaXMubGFiZWxzKSB7XHJcbiAgICAgICAgcy5sYWJlbHNbbmFtZV0gPSB0aGlzLmxhYmVsc1tuYW1lXTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKGxldCBuYW1lIGluIHRoaXMuZXZlbnRzKSB7XHJcbiAgICAgICAgcy5ldmVudHNbbmFtZV0gPSB0aGlzLmV2ZW50c1tuYW1lXTtcclxuICAgICAgfVxyXG4gICAgICBzLmFuaW1hdGlvblN0cnVjdHVyZSA9IHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JTZXJpYWxpemF0aW9uKHRoaXMuYW5pbWF0aW9uU3RydWN0dXJlKTtcclxuICAgICAgcmV0dXJuIHM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzLCBfc2VyaWFsaXphdGlvbi5pZFJlc291cmNlKTtcclxuICAgICAgdGhpcy5uYW1lID0gX3NlcmlhbGl6YXRpb24ubmFtZTtcclxuICAgICAgdGhpcy5mcmFtZXNQZXJTZWNvbmQgPSBfc2VyaWFsaXphdGlvbi5mcmFtZXNQZXJTZWNvbmQ7XHJcbiAgICAgIC8vIHRoaXMuc3RlcHNQZXJTZWNvbmQgPSBfc2VyaWFsaXphdGlvbi5zcHM7XHJcbiAgICAgIHRoaXMubGFiZWxzID0ge307XHJcbiAgICAgIGZvciAobGV0IG5hbWUgaW4gX3NlcmlhbGl6YXRpb24ubGFiZWxzKSB7XHJcbiAgICAgICAgdGhpcy5sYWJlbHNbbmFtZV0gPSBfc2VyaWFsaXphdGlvbi5sYWJlbHNbbmFtZV07XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgICAgZm9yIChsZXQgbmFtZSBpbiBfc2VyaWFsaXphdGlvbi5ldmVudHMpIHtcclxuICAgICAgICB0aGlzLmV2ZW50c1tuYW1lXSA9IF9zZXJpYWxpemF0aW9uLmV2ZW50c1tuYW1lXTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmV2ZW50c1Byb2Nlc3NlZCA9IG5ldyBNYXA8QU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLCBBbmltYXRpb25FdmVudFRyaWdnZXI+KCk7XHJcblxyXG4gICAgICB0aGlzLmFuaW1hdGlvblN0cnVjdHVyZSA9IGF3YWl0IHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JEZXNlcmlhbGl6YXRpb24oX3NlcmlhbGl6YXRpb24uYW5pbWF0aW9uU3RydWN0dXJlKTtcclxuXHJcbiAgICAgIHRoaXMuI2FuaW1hdGlvblN0cnVjdHVyZXNQcm9jZXNzZWQgPSBuZXcgTWFwPEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRSwgQW5pbWF0aW9uU3RydWN0dXJlPigpO1xyXG5cclxuICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbFRpbWUoKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgLy8gICByZXR1cm4gdGhpcy5zZXJpYWxpemUoKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBkZWxldGUgX211dGF0b3IudG90YWxUaW1lO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmF2ZXJzZXMgYW4gQW5pbWF0aW9uU3RydWN0dXJlIGFuZCByZXR1cm5zIHRoZSBTZXJpYWxpemF0aW9uIG9mIHNhaWQgU3RydWN0dXJlLlxyXG4gICAgICogQHBhcmFtIF9zdHJ1Y3R1cmUgVGhlIEFuaW1hdGlvbiBTdHJ1Y3R1cmUgYXQgdGhlIGN1cnJlbnQgbGV2ZWwgdG8gdHJhbnNmb3JtIGludG8gdGhlIFNlcmlhbGl6YXRpb24uXHJcbiAgICAgKiBAcmV0dXJucyB0aGUgZmlsbGVkIFNlcmlhbGl6YXRpb24uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdHJhdmVyc2VTdHJ1Y3R1cmVGb3JTZXJpYWxpemF0aW9uKF9zdHJ1Y3R1cmU6IE9iamVjdCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHt9O1xyXG4gICAgICBmb3IgKGNvbnN0IHByb3BlcnR5IGluIF9zdHJ1Y3R1cmUpIHtcclxuICAgICAgICBsZXQgc3RydWN0dXJlT3JTZXF1ZW5jZTogT2JqZWN0ID0gKDxHZW5lcmFsPl9zdHJ1Y3R1cmUpW3Byb3BlcnR5XTtcclxuICAgICAgICBpZiAoc3RydWN0dXJlT3JTZXF1ZW5jZSBpbnN0YW5jZW9mIEFuaW1hdGlvblNlcXVlbmNlKSB7XHJcbiAgICAgICAgICBzZXJpYWxpemF0aW9uW3Byb3BlcnR5XSA9IHN0cnVjdHVyZU9yU2VxdWVuY2Uuc2VyaWFsaXplKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChDb21wb25lbnQuc3ViY2xhc3Nlcy5zb21lKHR5cGUgPT4gdHlwZS5uYW1lID09IHByb3BlcnR5KSkge1xyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uW3Byb3BlcnR5XSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgaW4gc3RydWN0dXJlT3JTZXF1ZW5jZSkge1xyXG4gICAgICAgICAgICAgICg8U2VyaWFsaXphdGlvbltdPnNlcmlhbGl6YXRpb25bcHJvcGVydHldKS5wdXNoKHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JTZXJpYWxpemF0aW9uKCg8R2VuZXJhbD5zdHJ1Y3R1cmVPclNlcXVlbmNlKVtpXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZXJpYWxpemF0aW9uW3Byb3BlcnR5XSA9IHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JTZXJpYWxpemF0aW9uKHN0cnVjdHVyZU9yU2VxdWVuY2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVHJhdmVyc2VzIGEgU2VyaWFsaXphdGlvbiB0byBjcmVhdGUgYSBuZXcgQW5pbWF0aW9uU3RydWN0dXJlLlxyXG4gICAgICogQHBhcmFtIF9zZXJpYWxpemF0aW9uIFRoZSBzZXJpYWxpemF0aW9uIHRvIHRyYW5zZmVyIGludG8gYW4gQW5pbWF0aW9uU3RydWN0dXJlXHJcbiAgICAgKiBAcmV0dXJucyB0aGUgbmV3bHkgY3JlYXRlZCBBbmltYXRpb25TdHJ1Y3R1cmUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgdHJhdmVyc2VTdHJ1Y3R1cmVGb3JEZXNlcmlhbGl6YXRpb24oX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPEFuaW1hdGlvblN0cnVjdHVyZT4ge1xyXG4gICAgICBsZXQgc3RydWN0dXJlOiBBbmltYXRpb25TdHJ1Y3R1cmUgPSB7fTtcclxuICAgICAgZm9yIChsZXQgbiBpbiBfc2VyaWFsaXphdGlvbikge1xyXG4gICAgICAgIGlmIChfc2VyaWFsaXphdGlvbltuXS5hbmltYXRpb25TZXF1ZW5jZSkge1xyXG4gICAgICAgICAgbGV0IGFuaW1TZXE6IEFuaW1hdGlvblNlcXVlbmNlID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XHJcbiAgICAgICAgICBzdHJ1Y3R1cmVbbl0gPSA8QW5pbWF0aW9uU2VxdWVuY2U+KGF3YWl0IGFuaW1TZXEuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bbl0pKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc3RydWN0dXJlW25dID0gYXdhaXQgdGhpcy50cmF2ZXJzZVN0cnVjdHVyZUZvckRlc2VyaWFsaXphdGlvbihfc2VyaWFsaXphdGlvbltuXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzdHJ1Y3R1cmU7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpbmRzIGFuZCByZXR1cm5zIHRoZSBsaXN0IG9mIGV2ZW50cyB0byBiZSB1c2VkIHdpdGggdGhlc2Ugc2V0dGluZ3MuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZ2V0Q29ycmVjdEV2ZW50TGlzdChfZGlyZWN0aW9uOiBudW1iZXIsIF9xdWFudGl6YXRpb246IEFOSU1BVElPTl9RVUFOVElaQVRJT04pOiBBbmltYXRpb25FdmVudFRyaWdnZXIge1xyXG4gICAgICBpZiAoX3F1YW50aXphdGlvbiAhPSBBTklNQVRJT05fUVVBTlRJWkFUSU9OLkZSQU1FUykge1xyXG4gICAgICAgIGlmIChfZGlyZWN0aW9uID49IDApIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb2Nlc3NlZEV2ZW50VHJpZ2dlcihBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuTk9STUFMKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvY2Vzc2VkRXZlbnRUcmlnZ2VyKEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5SRVZFUlNFKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKF9kaXJlY3Rpb24gPj0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvY2Vzc2VkRXZlbnRUcmlnZ2VyKEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5SQVNURVJFRCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb2Nlc3NlZEV2ZW50VHJpZ2dlcihBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkFTVEVSRURSRVZFUlNFKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYXZlcnNlcyBhbiB7QGxpbmsgQW5pbWF0aW9uU3RydWN0dXJlfSBhbmQgcmV0dXJucyBhIHtAbGluayBNdXRhdG9yfSBkZXNjcmliaW5nIHRoZSBzdGF0ZSBhdCB0aGUgZ2l2ZW4gdGltZVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHRyYXZlcnNlU3RydWN0dXJlRm9yTXV0YXRvcihfc3RydWN0dXJlOiBBbmltYXRpb25TdHJ1Y3R1cmUsIF90aW1lOiBudW1iZXIpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG5ld011dGF0b3I6IE11dGF0b3IgPSB7fTtcclxuICAgICAgZm9yIChsZXQgbiBpbiBfc3RydWN0dXJlKSB7XHJcbiAgICAgICAgaWYgKF9zdHJ1Y3R1cmVbbl0gaW5zdGFuY2VvZiBBbmltYXRpb25TZXF1ZW5jZSkge1xyXG4gICAgICAgICAgbmV3TXV0YXRvcltuXSA9ICg8QW5pbWF0aW9uU2VxdWVuY2U+X3N0cnVjdHVyZVtuXSkuZXZhbHVhdGUoX3RpbWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBuZXdNdXRhdG9yW25dID0gdGhpcy50cmF2ZXJzZVN0cnVjdHVyZUZvck11dGF0b3IoPEFuaW1hdGlvblN0cnVjdHVyZT5fc3RydWN0dXJlW25dLCBfdGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBuZXdNdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVHJhdmVyc2VzIHRoZSBjdXJyZW50IEFuaW1hdGlvblN0cmN1dHVyZSB0byBmaW5kIHRoZSB0b3RhbFRpbWUgb2YgdGhpcyBhbmltYXRpb24uXHJcbiAgICAgKiBAcGFyYW0gX3N0cnVjdHVyZSBUaGUgc3RydWN0dXJlIHRvIHRyYXZlcnNlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdHJhdmVyc2VTdHJ1Y3R1cmVGb3JUaW1lKF9zdHJ1Y3R1cmU6IEFuaW1hdGlvblN0cnVjdHVyZSk6IHZvaWQge1xyXG4gICAgICBmb3IgKGxldCBuIGluIF9zdHJ1Y3R1cmUpIHtcclxuICAgICAgICBpZiAoX3N0cnVjdHVyZVtuXSBpbnN0YW5jZW9mIEFuaW1hdGlvblNlcXVlbmNlKSB7XHJcbiAgICAgICAgICBsZXQgc2VxdWVuY2U6IEFuaW1hdGlvblNlcXVlbmNlID0gPEFuaW1hdGlvblNlcXVlbmNlPl9zdHJ1Y3R1cmVbbl07XHJcbiAgICAgICAgICBpZiAoc2VxdWVuY2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgc2VxdWVuY2VUaW1lOiBudW1iZXIgPSBzZXF1ZW5jZS5nZXRLZXkoc2VxdWVuY2UubGVuZ3RoIC0gMSkudGltZTtcclxuICAgICAgICAgICAgdGhpcy50b3RhbFRpbWUgPSBNYXRoLm1heChzZXF1ZW5jZVRpbWUsIHRoaXMudG90YWxUaW1lKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy50cmF2ZXJzZVN0cnVjdHVyZUZvclRpbWUoPEFuaW1hdGlvblN0cnVjdHVyZT5fc3RydWN0dXJlW25dKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVuc3VyZXMgdGhlIGV4aXN0YW5jZSBvZiB0aGUgcmVxdWVzdGVkIHtAbGluayBBbmltYXRpb25TdHJjdXR1cmV9IGFuZCByZXR1cm5zIGl0LlxyXG4gICAgICogQHBhcmFtIF90eXBlIHRoZSB0eXBlIG9mIHRoZSBzdHJ1Y3R1cmUgdG8gZ2V0XHJcbiAgICAgKiBAcmV0dXJucyB0aGUgcmVxdWVzdGVkIFtbQGxpbmsgQW5pbWF0aW9uU3RydWN0dXJlXV1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRQcm9jZXNzZWRBbmltYXRpb25TdHJ1Y3R1cmUoX3R5cGU6IEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRSk6IEFuaW1hdGlvblN0cnVjdHVyZSB7XHJcbiAgICAgIGlmICghdGhpcy4jYW5pbWF0aW9uU3RydWN0dXJlc1Byb2Nlc3NlZC5oYXMoX3R5cGUpKSB7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVUb3RhbFRpbWUoKTtcclxuICAgICAgICBsZXQgYWU6IEFuaW1hdGlvblN0cnVjdHVyZSA9IHt9O1xyXG4gICAgICAgIHN3aXRjaCAoX3R5cGUpIHtcclxuICAgICAgICAgIGNhc2UgQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLk5PUk1BTDpcclxuICAgICAgICAgICAgYWUgPSB0aGlzLmFuaW1hdGlvblN0cnVjdHVyZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5SRVZFUlNFOlxyXG4gICAgICAgICAgICBhZSA9IHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JOZXdTdHJ1Y3R1cmUodGhpcy5hbmltYXRpb25TdHJ1Y3R1cmUsIHRoaXMuY2FsY3VsYXRlUmV2ZXJzZVNlcXVlbmNlLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgQU5JTUFUSU9OX1NUUlVDVFVSRV9UWVBFLlJBU1RFUkVEOlxyXG4gICAgICAgICAgICBhZSA9IHRoaXMudHJhdmVyc2VTdHJ1Y3R1cmVGb3JOZXdTdHJ1Y3R1cmUodGhpcy5hbmltYXRpb25TdHJ1Y3R1cmUsIHRoaXMuY2FsY3VsYXRlUmFzdGVyZWRTZXF1ZW5jZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5SQVNURVJFRFJFVkVSU0U6XHJcbiAgICAgICAgICAgIGFlID0gdGhpcy50cmF2ZXJzZVN0cnVjdHVyZUZvck5ld1N0cnVjdHVyZSh0aGlzLmdldFByb2Nlc3NlZEFuaW1hdGlvblN0cnVjdHVyZShBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkVWRVJTRSksIHRoaXMuY2FsY3VsYXRlUmFzdGVyZWRTZXF1ZW5jZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuI2FuaW1hdGlvblN0cnVjdHVyZXNQcm9jZXNzZWQuc2V0KF90eXBlLCBhZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuI2FuaW1hdGlvblN0cnVjdHVyZXNQcm9jZXNzZWQuZ2V0KF90eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVuc3VyZXMgdGhlIGV4aXN0YW5jZSBvZiB0aGUgcmVxdWVzdGVkIHtAbGluayBBbmltYXRpb25FdmVudFRyaWdnZXJ9IGFuZCByZXR1cm5zIGl0LlxyXG4gICAgICogQHBhcmFtIF90eXBlIFRoZSB0eXBlIG9mIEFuaW1hdGlvbkV2ZW50VHJpZ2dlciB0byBnZXRcclxuICAgICAqIEByZXR1cm5zIHRoZSByZXF1ZXN0ZWQge0BsaW5rIEFuaW1hdGlvbkV2ZW50VHJpZ2dlcn1cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZXRQcm9jZXNzZWRFdmVudFRyaWdnZXIoX3R5cGU6IEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRSk6IEFuaW1hdGlvbkV2ZW50VHJpZ2dlciB7XHJcbiAgICAgIGlmICghdGhpcy5ldmVudHNQcm9jZXNzZWQuaGFzKF90eXBlKSkge1xyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxUaW1lKCk7XHJcbiAgICAgICAgbGV0IGV2OiBBbmltYXRpb25FdmVudFRyaWdnZXIgPSB7fTtcclxuICAgICAgICBzd2l0Y2ggKF90eXBlKSB7XHJcbiAgICAgICAgICBjYXNlIEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5OT1JNQUw6XHJcbiAgICAgICAgICAgIGV2ID0gdGhpcy5ldmVudHM7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkVWRVJTRTpcclxuICAgICAgICAgICAgZXYgPSB0aGlzLmNhbGN1bGF0ZVJldmVyc2VFdmVudFRyaWdnZXJzKHRoaXMuZXZlbnRzKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5SQVNURVJFRDpcclxuICAgICAgICAgICAgZXYgPSB0aGlzLmNhbGN1bGF0ZVJhc3RlcmVkRXZlbnRUcmlnZ2Vycyh0aGlzLmV2ZW50cyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBBTklNQVRJT05fU1RSVUNUVVJFX1RZUEUuUkFTVEVSRURSRVZFUlNFOlxyXG4gICAgICAgICAgICBldiA9IHRoaXMuY2FsY3VsYXRlUmFzdGVyZWRFdmVudFRyaWdnZXJzKHRoaXMuZ2V0UHJvY2Vzc2VkRXZlbnRUcmlnZ2VyKEFOSU1BVElPTl9TVFJVQ1RVUkVfVFlQRS5SRVZFUlNFKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmV2ZW50c1Byb2Nlc3NlZC5zZXQoX3R5cGUsIGV2KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5ldmVudHNQcm9jZXNzZWQuZ2V0KF90eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYXZlcnNlcyBhbiBleGlzdGluZyBzdHJ1Y3R1cmUgdG8gYXBwbHkgYSByZWNhbGN1bGF0aW9uIGZ1bmN0aW9uIHRvIHRoZSBBbmltYXRpb25TdHJ1Y3R1cmUgdG8gc3RvcmUgaW4gYSBuZXcgU3RydWN0dXJlLlxyXG4gICAgICogQHBhcmFtIF9vbGRTdHJ1Y3R1cmUgVGhlIG9sZCBzdHJ1Y3R1cmUgdG8gdHJhdmVyc2VcclxuICAgICAqIEBwYXJhbSBfZnVuY3Rpb25Ub1VzZSBUaGUgZnVuY3Rpb24gdG8gdXNlIHRvIHJlY2FsY3VsYXRlZCB0aGUgc3RydWN0dXJlLlxyXG4gICAgICogQHJldHVybnMgQSBuZXcgQW5pbWF0aW9uIFN0cnVjdHVyZSB3aXRoIHRoZSByZWNhbHVsYXRlZCBBbmltYXRpb24gU2VxdWVuY2VzLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHRyYXZlcnNlU3RydWN0dXJlRm9yTmV3U3RydWN0dXJlKF9vbGRTdHJ1Y3R1cmU6IEFuaW1hdGlvblN0cnVjdHVyZSwgX2Z1bmN0aW9uVG9Vc2U6IEZ1bmN0aW9uKTogQW5pbWF0aW9uU3RydWN0dXJlIHtcclxuICAgICAgbGV0IG5ld1N0cnVjdHVyZTogQW5pbWF0aW9uU3RydWN0dXJlID0ge307XHJcbiAgICAgIGZvciAobGV0IG4gaW4gX29sZFN0cnVjdHVyZSkge1xyXG4gICAgICAgIGlmIChfb2xkU3RydWN0dXJlW25dIGluc3RhbmNlb2YgQW5pbWF0aW9uU2VxdWVuY2UpIHtcclxuICAgICAgICAgIG5ld1N0cnVjdHVyZVtuXSA9IF9mdW5jdGlvblRvVXNlKF9vbGRTdHJ1Y3R1cmVbbl0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBuZXdTdHJ1Y3R1cmVbbl0gPSB0aGlzLnRyYXZlcnNlU3RydWN0dXJlRm9yTmV3U3RydWN0dXJlKDxBbmltYXRpb25TdHJ1Y3R1cmU+X29sZFN0cnVjdHVyZVtuXSwgX2Z1bmN0aW9uVG9Vc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbmV3U3RydWN0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHJldmVyc2VkIEFuaW1hdGlvbiBTZXF1ZW5jZSBvdXQgb2YgYSBnaXZlbiBTZXF1ZW5jZS5cclxuICAgICAqIEBwYXJhbSBfc2VxdWVuY2UgVGhlIHNlcXVlbmNlIHRvIGNhbGN1bGF0ZSB0aGUgbmV3IHNlcXVlbmNlIG91dCBvZlxyXG4gICAgICogQHJldHVybnMgVGhlIHJldmVyc2VkIFNlcXVlbmNlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2FsY3VsYXRlUmV2ZXJzZVNlcXVlbmNlKF9zZXF1ZW5jZTogQW5pbWF0aW9uU2VxdWVuY2UpOiBBbmltYXRpb25TZXF1ZW5jZSB7XHJcbiAgICAgIGxldCBzZXE6IEFuaW1hdGlvblNlcXVlbmNlID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBfc2VxdWVuY2UubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgb2xkS2V5OiBBbmltYXRpb25LZXkgPSBfc2VxdWVuY2UuZ2V0S2V5KGkpO1xyXG4gICAgICAgIGxldCBrZXk6IEFuaW1hdGlvbktleSA9IG5ldyBBbmltYXRpb25LZXkodGhpcy50b3RhbFRpbWUgLSBvbGRLZXkudGltZSwgb2xkS2V5LnZhbHVlLCBvbGRLZXkuc2xvcGVPdXQsIG9sZEtleS5zbG9wZUluLCBvbGRLZXkuY29uc3RhbnQpO1xyXG4gICAgICAgIHNlcS5hZGRLZXkoa2V5KTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2VxO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHJhc3RlcmVkIHtAbGluayBBbmltYXRpb25TZXF1ZW5jZX0gb3V0IG9mIGEgZ2l2ZW4gc2VxdWVuY2UuXHJcbiAgICAgKiBAcGFyYW0gX3NlcXVlbmNlIFRoZSBzZXF1ZW5jZSB0byBjYWxjdWxhdGUgdGhlIG5ldyBzZXF1ZW5jZSBvdXQgb2ZcclxuICAgICAqIEByZXR1cm5zIHRoZSByYXN0ZXJlZCBzZXF1ZW5jZS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVSYXN0ZXJlZFNlcXVlbmNlKF9zZXF1ZW5jZTogQW5pbWF0aW9uU2VxdWVuY2UpOiBBbmltYXRpb25TZXF1ZW5jZSB7XHJcbiAgICAgIGxldCBzZXE6IEFuaW1hdGlvblNlcXVlbmNlID0gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XHJcbiAgICAgIGxldCBmcmFtZVRpbWU6IG51bWJlciA9IDEwMDAgLyB0aGlzLmZyYW1lc1BlclNlY29uZDtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMudG90YWxUaW1lOyBpICs9IGZyYW1lVGltZSkge1xyXG4gICAgICAgIGxldCBrZXk6IEFuaW1hdGlvbktleSA9IG5ldyBBbmltYXRpb25LZXkoaSwgX3NlcXVlbmNlLmV2YWx1YXRlKGkpLCAwLCAwLCB0cnVlKTtcclxuICAgICAgICBzZXEuYWRkS2V5KGtleSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlcTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgcmV2ZXJzZWQge0BsaW5rIEFuaW1hdGlvbkV2ZW50VHJpZ2dlcn0gb2JqZWN0IGJhc2VkIG9uIHRoZSBnaXZlbiBvbmUuICBcclxuICAgICAqIEBwYXJhbSBfZXZlbnRzIHRoZSBldmVudCBvYmplY3QgdG8gY2FsY3VsYXRlIHRoZSBuZXcgb25lIG91dCBvZlxyXG4gICAgICogQHJldHVybnMgdGhlIHJldmVyc2VkIGV2ZW50IG9iamVjdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZVJldmVyc2VFdmVudFRyaWdnZXJzKF9ldmVudHM6IEFuaW1hdGlvbkV2ZW50VHJpZ2dlcik6IEFuaW1hdGlvbkV2ZW50VHJpZ2dlciB7XHJcbiAgICAgIGxldCBhZTogQW5pbWF0aW9uRXZlbnRUcmlnZ2VyID0ge307XHJcbiAgICAgIGZvciAobGV0IG5hbWUgaW4gX2V2ZW50cykge1xyXG4gICAgICAgIGFlW25hbWVdID0gdGhpcy50b3RhbFRpbWUgLSBfZXZlbnRzW25hbWVdO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSByYXN0ZXJlZCB7QGxpbmsgQW5pbWF0aW9uRXZlbnRUcmlnZ2VyfSBvYmplY3QgYmFzZWQgb24gdGhlIGdpdmVuIG9uZS4gIFxyXG4gICAgICogQHBhcmFtIF9ldmVudHMgdGhlIGV2ZW50IG9iamVjdCB0byBjYWxjdWxhdGUgdGhlIG5ldyBvbmUgb3V0IG9mXHJcbiAgICAgKiBAcmV0dXJucyB0aGUgcmFzdGVyZWQgZXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY2FsY3VsYXRlUmFzdGVyZWRFdmVudFRyaWdnZXJzKF9ldmVudHM6IEFuaW1hdGlvbkV2ZW50VHJpZ2dlcik6IEFuaW1hdGlvbkV2ZW50VHJpZ2dlciB7XHJcbiAgICAgIGxldCBhZTogQW5pbWF0aW9uRXZlbnRUcmlnZ2VyID0ge307XHJcbiAgICAgIGxldCBmcmFtZVRpbWU6IG51bWJlciA9IDEwMDAgLyB0aGlzLmZyYW1lc1BlclNlY29uZDtcclxuICAgICAgZm9yIChsZXQgbmFtZSBpbiBfZXZlbnRzKSB7XHJcbiAgICAgICAgYWVbbmFtZV0gPSBfZXZlbnRzW25hbWVdIC0gKF9ldmVudHNbbmFtZV0gJSBmcmFtZVRpbWUpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyB3aGljaCBldmVudHMgbGF5IGJldHdlZW4gdHdvIGdpdmVuIHRpbWVzIGFuZCByZXR1cm5zIHRoZSBuYW1lcyBvZiB0aGUgb25lcyB0aGF0IGRvLlxyXG4gICAgICogQHBhcmFtIF9ldmVudFRyaWdnZXJzIFRoZSBldmVudCBvYmplY3QgdG8gY2hlY2sgdGhlIGV2ZW50cyBpbnNpZGUgb2ZcclxuICAgICAqIEBwYXJhbSBfbWluIHRoZSBtaW5pbXVtIG9mIHRoZSByYW5nZSB0byBjaGVjayBiZXR3ZWVuIChpbmNsdXNpdmUpXHJcbiAgICAgKiBAcGFyYW0gX21heCB0aGUgbWF4aW11bSBvZiB0aGUgcmFuZ2UgdG8gY2hlY2sgYmV0d2VlbiAoZXhjbHVzaXZlKVxyXG4gICAgICogQHJldHVybnMgYW4gYXJyYXkgb2YgdGhlIG5hbWVzIG9mIHRoZSBldmVudHMgaW4gdGhlIGdpdmVuIHJhbmdlLiBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjaGVja0V2ZW50c0JldHdlZW4oX2V2ZW50VHJpZ2dlcnM6IEFuaW1hdGlvbkV2ZW50VHJpZ2dlciwgX21pbjogbnVtYmVyLCBfbWF4OiBudW1iZXIpOiBzdHJpbmdbXSB7XHJcbiAgICAgIGxldCBldmVudHNUb1RyaWdnZXI6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIGZvciAobGV0IG5hbWUgaW4gX2V2ZW50VHJpZ2dlcnMpIHtcclxuICAgICAgICBpZiAoX21pbiA8PSBfZXZlbnRUcmlnZ2Vyc1tuYW1lXSAmJiBfZXZlbnRUcmlnZ2Vyc1tuYW1lXSA8IF9tYXgpIHtcclxuICAgICAgICAgIGV2ZW50c1RvVHJpZ2dlci5wdXNoKG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZXZlbnRzVG9UcmlnZ2VyO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVHJhbnNmZXIvU2VyaWFsaXplci50c1wiLz5cclxuLy8gLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9UcmFuc2Zlci9NdXRhYmxlLnRzXCIvPlxyXG5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQ2FsY3VsYXRlcyB0aGUgdmFsdWVzIGJldHdlZW4ge0BsaW5rIEFuaW1hdGlvbktleX1zLlxyXG4gICAqIFJlcHJlc2VudGVkIGludGVybmFsbHkgYnkgYSBjdWJpYyBmdW5jdGlvbiAoYGYoeCkgPSBheMKzICsgYnjCsiArIGN4ICsgZGApLiBcclxuICAgKiBPbmx5IG5lZWRzIHRvIGJlIHJlY2FsY3VsYXRlZCB3aGVuIHRoZSBrZXlzIGNoYW5nZSwgc28gYXQgcnVudGltZSBpdCBzaG91bGQgb25seSBiZSBjYWxjdWxhdGVkIG9uY2UuXHJcbiAgICogQGF1dGhvciBMdWthcyBTY2hldWVybGUsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBBbmltYXRpb25GdW5jdGlvbiB7XHJcbiAgICBwcml2YXRlIGE6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGI6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGM6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGQ6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGtleUluOiBBbmltYXRpb25LZXk7XHJcbiAgICBwcml2YXRlIGtleU91dDogQW5pbWF0aW9uS2V5O1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihfa2V5SW46IEFuaW1hdGlvbktleSwgX2tleU91dDogQW5pbWF0aW9uS2V5ID0gbnVsbCkge1xyXG4gICAgICB0aGlzLmtleUluID0gX2tleUluO1xyXG4gICAgICB0aGlzLmtleU91dCA9IF9rZXlPdXQ7XHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHNldEtleUluKF9rZXlJbjogQW5pbWF0aW9uS2V5KSB7XHJcbiAgICAgIHRoaXMua2V5SW4gPSBfa2V5SW47XHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHNldEtleU91dChfa2V5T3V0OiBBbmltYXRpb25LZXkpIHtcclxuICAgICAgdGhpcy5rZXlPdXQgPSBfa2V5T3V0O1xyXG4gICAgICB0aGlzLmNhbGN1bGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQYXJhbWV0ZXJzKCk6IHthOiBudW1iZXIsIGI6IG51bWJlciwgYzogbnVtYmVyICwgZDogbnVtYmVyfSAge1xyXG4gICAgICByZXR1cm4ge2E6IHRoaXMuYSwgYjogdGhpcy5iLCBjOiB0aGlzLmMsIGQ6IHRoaXMuZH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSB2YWx1ZSBvZiB0aGUgZnVuY3Rpb24gYXQgdGhlIGdpdmVuIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gX3RpbWUgdGhlIHBvaW50IGluIHRpbWUgYXQgd2hpY2ggdG8gZXZhbHVhdGUgdGhlIGZ1bmN0aW9uIGluIG1pbGxpc2Vjb25kcy4gV2lsbCBiZSBjb3JyZWN0ZWQgZm9yIG9mZnNldCBpbnRlcm5hbGx5LlxyXG4gICAgICogQHJldHVybnMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiB0aW1lXHJcbiAgICAgKi9cclxuICAgIGV2YWx1YXRlKF90aW1lOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICBfdGltZSAtPSB0aGlzLmtleUluLnRpbWU7XHJcbiAgICAgIGxldCB0aW1lMjogbnVtYmVyID0gX3RpbWUgKiBfdGltZTtcclxuICAgICAgbGV0IHRpbWUzOiBudW1iZXIgPSB0aW1lMiAqIF90aW1lO1xyXG4gICAgICByZXR1cm4gdGhpcy5hICogdGltZTMgKyB0aGlzLmIgKiB0aW1lMiArIHRoaXMuYyAqIF90aW1lICsgdGhpcy5kO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogKFJlLSlDYWxjdWxhdGVzIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBjdWJpYyBmdW5jdGlvbi5cclxuICAgICAqIFNlZSBodHRwczovL21hdGguc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzMxNzM0NjkvY2FsY3VsYXRlLWN1YmljLWVxdWF0aW9uLWZyb20tdHdvLXBvaW50cy1hbmQtdHdvLXNsb3Blcy12YXJpYWJseVxyXG4gICAgICogYW5kIGh0dHBzOi8vamlya2FkZWxsb3JvLmdpdGh1Yi5pby9GVURHRS9Eb2N1bWVudGF0aW9uL0xvZ3MvMTkwNDEwX05vdGl6ZW5fTFNcclxuICAgICAqL1xyXG4gICAgY2FsY3VsYXRlKCk6IHZvaWQge1xyXG4gICAgICBpZiAoIXRoaXMua2V5SW4pIHtcclxuICAgICAgICB0aGlzLmQgPSB0aGlzLmMgPSB0aGlzLmIgPSB0aGlzLmEgPSAwO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIXRoaXMua2V5T3V0IHx8IHRoaXMua2V5SW4uY29uc3RhbnQpIHtcclxuICAgICAgICB0aGlzLmQgPSB0aGlzLmtleUluLnZhbHVlO1xyXG4gICAgICAgIHRoaXMuYyA9IHRoaXMuYiA9IHRoaXMuYSA9IDA7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgeDE6IG51bWJlciA9IHRoaXMua2V5T3V0LnRpbWUgLSB0aGlzLmtleUluLnRpbWU7XHJcblxyXG4gICAgICB0aGlzLmQgPSB0aGlzLmtleUluLnZhbHVlO1xyXG4gICAgICB0aGlzLmMgPSB0aGlzLmtleUluLnNsb3BlT3V0O1xyXG5cclxuICAgICAgdGhpcy5hID0gKC14MSAqICh0aGlzLmtleUluLnNsb3BlT3V0ICsgdGhpcy5rZXlPdXQuc2xvcGVJbikgLSAyICogdGhpcy5rZXlJbi52YWx1ZSArIDIgKiB0aGlzLmtleU91dC52YWx1ZSkgLyAtTWF0aC5wb3coeDEsIDMpO1xyXG4gICAgICB0aGlzLmIgPSAodGhpcy5rZXlPdXQuc2xvcGVJbiAtIHRoaXMua2V5SW4uc2xvcGVPdXQgLSAzICogdGhpcy5hICogTWF0aC5wb3coeDEsIDIpKSAvICgyICogeDEpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfVxyXG5cclxufSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVHJhbnNmZXIvU2VyaWFsaXplci50c1wiLz5cclxuLy8gLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9UcmFuc2Zlci9NdXRhYmxlLnRzXCIvPlxyXG5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogSG9sZHMgaW5mb3JtYXRpb24gYWJvdXQgY29udGlub3VzIHBvaW50cyBpbiB0aW1lIHRoZWlyIGFjY29tcGFueWluZyB2YWx1ZXMgYXMgd2VsbCBhcyB0aGVpciBzbG9wZXMuIFxyXG4gICAqIEFsc28gaG9sZHMgYSByZWZlcmVuY2UgdG8gdGhlIHtAbGluayBBbmltYXRpb25GdW5jdGlvbn1zIHRoYXQgY29tZSBpbiBhbmQgb3V0IG9mIHRoZSBzaWRlcy4gXHJcbiAgICogVGhlIHtAbGluayBBbmltYXRpb25GdW5jdGlvbn1zIGFyZSBoYW5kbGVkIGJ5IHRoZSB7QGxpbmsgQW5pbWF0aW9uU2VxdWVuY2V9cy5cclxuICAgKiBJZiB0aGUgcHJvcGVydHkgY29uc3RhbnQgaXMgdHJ1ZSwgdGhlIHZhbHVlIGRvZXMgbm90IGNoYW5nZSBhbmQgd2lsIG5vdCBiZSBpbnRlcnBvbGF0ZWQgYmV0d2VlbiB0aGlzIGFuZCB0aGUgbmV4dCBrZXkgaW4gYSBzZXF1ZW5jZVxyXG4gICAqIEBhdXRob3IgTHVrYXMgU2NoZXVlcmxlLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQW5pbWF0aW9uS2V5IGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XHJcbiAgICAvLyBUT0RPOiBjaGVjayBpZiBmdW5jdGlvbkluIGNhbiBiZSByZW1vdmVkXHJcbiAgICAvKipEb24ndCBtb2RpZnkgdGhpcyB1bmxlc3MgeW91IGtub3cgd2hhdCB5b3UncmUgZG9pbmcuKi9cclxuICAgIGZ1bmN0aW9uSW46IEFuaW1hdGlvbkZ1bmN0aW9uO1xyXG4gICAgLyoqRG9uJ3QgbW9kaWZ5IHRoaXMgdW5sZXNzIHlvdSBrbm93IHdoYXQgeW91J3JlIGRvaW5nLiovXHJcbiAgICBmdW5jdGlvbk91dDogQW5pbWF0aW9uRnVuY3Rpb247XHJcbiAgICBcclxuICAgIGJyb2tlbjogYm9vbGVhbjtcclxuXHJcbiAgICAjdGltZTogbnVtYmVyO1xyXG4gICAgI3ZhbHVlOiBudW1iZXI7XHJcbiAgICAjY29uc3RhbnQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAjc2xvcGVJbjogbnVtYmVyID0gMDtcclxuICAgICNzbG9wZU91dDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfdGltZTogbnVtYmVyID0gMCwgX3ZhbHVlOiBudW1iZXIgPSAwLCBfc2xvcGVJbjogbnVtYmVyID0gMCwgX3Nsb3BlT3V0OiBudW1iZXIgPSAwLCBfY29uc3RhbnQ6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLiN0aW1lID0gX3RpbWU7XHJcbiAgICAgIHRoaXMuI3ZhbHVlID0gX3ZhbHVlO1xyXG4gICAgICB0aGlzLiNzbG9wZUluID0gX3Nsb3BlSW47XHJcbiAgICAgIHRoaXMuI3Nsb3BlT3V0ID0gX3Nsb3BlT3V0O1xyXG4gICAgICB0aGlzLiNjb25zdGFudCA9IF9jb25zdGFudDtcclxuXHJcbiAgICAgIHRoaXMuYnJva2VuID0gdGhpcy5zbG9wZUluICE9IC10aGlzLnNsb3BlT3V0O1xyXG4gICAgICB0aGlzLmZ1bmN0aW9uT3V0ID0gbmV3IEFuaW1hdGlvbkZ1bmN0aW9uKHRoaXMsIG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIGNvbXBhcmF0aW9uIGZ1bmN0aW9uIHRvIHVzZSBpbiBhbiBhcnJheSBzb3J0IGZ1bmN0aW9uIHRvIHNvcnQgdGhlIGtleXMgYnkgdGhlaXIgdGltZS5cclxuICAgICAqIEBwYXJhbSBfYSB0aGUgYW5pbWF0aW9uIGtleSB0byBjaGVja1xyXG4gICAgICogQHBhcmFtIF9iIHRoZSBhbmltYXRpb24ga2V5IHRvIGNoZWNrIGFnYWluc3RcclxuICAgICAqIEByZXR1cm5zID4wIGlmIGE+YiwgMCBpZiBhPWIsIDwwIGlmIGE8YlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNvbXBhcmUoX2E6IEFuaW1hdGlvbktleSwgX2I6IEFuaW1hdGlvbktleSk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBfYS50aW1lIC0gX2IudGltZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGltZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jdGltZTsgXHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHRpbWUoX3RpbWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiN0aW1lID0gX3RpbWU7XHJcbiAgICAgIHRoaXMuZnVuY3Rpb25Jbi5jYWxjdWxhdGUoKTtcclxuICAgICAgdGhpcy5mdW5jdGlvbk91dC5jYWxjdWxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdmFsdWUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB2YWx1ZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiN2YWx1ZSA9IF92YWx1ZTtcclxuICAgICAgdGhpcy5mdW5jdGlvbkluLmNhbGN1bGF0ZSgpO1xyXG4gICAgICB0aGlzLmZ1bmN0aW9uT3V0LmNhbGN1bGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgY29uc3RhbnQoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjb25zdGFudDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgY29uc3RhbnQoX2NvbnN0YW50OiBib29sZWFuKSB7XHJcbiAgICAgIHRoaXMuI2NvbnN0YW50ID0gX2NvbnN0YW50O1xyXG4gICAgICB0aGlzLmZ1bmN0aW9uSW4uY2FsY3VsYXRlKCk7XHJcbiAgICAgIHRoaXMuZnVuY3Rpb25PdXQuY2FsY3VsYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNsb3BlSW4oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3Nsb3BlSW47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldCBzbG9wZUluKF9zbG9wZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3Nsb3BlSW4gPSBfc2xvcGU7XHJcbiAgICAgIHRoaXMuZnVuY3Rpb25Jbi5jYWxjdWxhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2xvcGVPdXQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3Nsb3BlT3V0O1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzbG9wZU91dChfc2xvcGU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzbG9wZU91dCA9IF9zbG9wZTtcclxuICAgICAgdGhpcy5mdW5jdGlvbk91dC5jYWxjdWxhdGUoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8jcmVnaW9uIHRyYW5zZmVyXHJcbiAgICBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge307XHJcbiAgICAgIHNlcmlhbGl6YXRpb24udGltZSA9IHRoaXMuI3RpbWU7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24udmFsdWUgPSB0aGlzLiN2YWx1ZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5zbG9wZUluID0gdGhpcy4jc2xvcGVJbjtcclxuICAgICAgc2VyaWFsaXphdGlvbi5zbG9wZU91dCA9IHRoaXMuI3Nsb3BlT3V0O1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmNvbnN0YW50ID0gdGhpcy4jY29uc3RhbnQ7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMuI3RpbWUgPSBfc2VyaWFsaXphdGlvbi50aW1lO1xyXG4gICAgICB0aGlzLiN2YWx1ZSA9IF9zZXJpYWxpemF0aW9uLnZhbHVlO1xyXG4gICAgICB0aGlzLiNzbG9wZUluID0gX3NlcmlhbGl6YXRpb24uc2xvcGVJbjtcclxuICAgICAgdGhpcy4jc2xvcGVPdXQgPSBfc2VyaWFsaXphdGlvbi5zbG9wZU91dDtcclxuICAgICAgdGhpcy4jY29uc3RhbnQgPSBfc2VyaWFsaXphdGlvbi5jb25zdGFudDtcclxuXHJcbiAgICAgIHRoaXMuYnJva2VuID0gdGhpcy5zbG9wZUluICE9IC10aGlzLnNsb3BlT3V0O1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc2VyaWFsaXplKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgLy9cclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICB9XHJcblxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQSBzZXF1ZW5jZSBvZiB7QGxpbmsgQW5pbWF0aW9uS2V5fXMgdGhhdCBpcyBtYXBwZWQgdG8gYW4gYXR0cmlidXRlIG9mIGEge0BsaW5rIE5vZGV9IG9yIGl0cyB7QGxpbmsgQ29tcG9uZW50fXMgaW5zaWRlIHRoZSB7QGxpbmsgQW5pbWF0aW9ufS5cclxuICAgKiBQcm92aWRlcyBmdW5jdGlvbnMgdG8gbW9kaWZ5IHNhaWQga2V5c1xyXG4gICAqIEBhdXRob3JzIEx1a2FzIFNjaGV1ZXJsZSwgSEZVLCAyMDE5IHwgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEFuaW1hdGlvblNlcXVlbmNlIGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XHJcbiAgICBwcml2YXRlIGtleXM6IEFuaW1hdGlvbktleVtdID0gW107XHJcblxyXG4gICAgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5rZXlzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2YWx1YXRlcyB0aGUgc2VxdWVuY2UgYXQgdGhlIGdpdmVuIHBvaW50IGluIHRpbWUuXHJcbiAgICAgKiBAcGFyYW0gX3RpbWUgdGhlIHBvaW50IGluIHRpbWUgYXQgd2hpY2ggdG8gZXZhbHVhdGUgdGhlIHNlcXVlbmNlIGluIG1pbGxpc2Vjb25kcy5cclxuICAgICAqIEByZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgc2VxdWVuY2UgYXQgdGhlIGdpdmVuIHRpbWUuIHVuZGVmaW5lZCBpZiB0aGVyZSBhcmUgbm8ga2V5cy5cclxuICAgICAqL1xyXG4gICAgZXZhbHVhdGUoX3RpbWU6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIGlmICh0aGlzLmtleXMubGVuZ3RoID09IDApXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsgLy9UT0RPOiBzaG91bGRuJ3QgcmV0dXJuIDAgYnV0IHNvbWV0aGluZyBpbmRpY2F0aW5nIG5vIGNoYW5nZSwgbGlrZSBudWxsLiBwcm9iYWJseSBuZWVkcyB0byBiZSBjaGFuZ2VkIGluIE5vZGUgYXMgd2VsbCB0byBpZ25vcmUgbm9uLW51bWVyaWMgdmFsdWVzIGluIHRoZSBhcHBseUFuaW1hdGlvbiBmdW5jdGlvblxyXG4gICAgICBpZiAodGhpcy5rZXlzLmxlbmd0aCA9PSAxIHx8IHRoaXMua2V5c1swXS50aW1lID49IF90aW1lKVxyXG4gICAgICAgIHJldHVybiB0aGlzLmtleXNbMF0udmFsdWU7XHJcblxyXG5cclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMua2V5cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICBpZiAodGhpcy5rZXlzW2ldLnRpbWUgPD0gX3RpbWUgJiYgdGhpcy5rZXlzW2kgKyAxXS50aW1lID4gX3RpbWUpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmtleXNbaV0uZnVuY3Rpb25PdXQuZXZhbHVhdGUoX3RpbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy5rZXlzW3RoaXMua2V5cy5sZW5ndGggLSAxXS52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBuZXcga2V5IHRvIHRoZSBzZXF1ZW5jZS5cclxuICAgICAqIEBwYXJhbSBfa2V5IHRoZSBrZXkgdG8gYWRkXHJcbiAgICAgKi9cclxuICAgIGFkZEtleShfa2V5OiBBbmltYXRpb25LZXkpOiB2b2lkIHtcclxuICAgICAgdGhpcy5rZXlzLnB1c2goX2tleSk7XHJcbiAgICAgIHRoaXMua2V5cy5zb3J0KEFuaW1hdGlvbktleS5jb21wYXJlKTtcclxuICAgICAgdGhpcy5yZWdlbmVyYXRlRnVuY3Rpb25zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNb2RpZnlzIGEgZ2l2ZW4ga2V5IGluIHRoZSBzZXF1ZW5jZS5cclxuICAgICAqIEBwYXJhbSBfa2V5IHRoZSBrZXkgdG8gYWRkXHJcbiAgICAgKi9cclxuICAgIG1vZGlmeUtleShfa2V5OiBBbmltYXRpb25LZXksIF90aW1lPzogbnVtYmVyLCBfdmFsdWU/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgaWYgKF90aW1lICE9IG51bGwpXHJcbiAgICAgICAgX2tleS50aW1lID0gX3RpbWU7XHJcbiAgICAgIGlmIChfdmFsdWUgIT0gbnVsbClcclxuICAgICAgICBfa2V5LnZhbHVlID0gX3ZhbHVlO1xyXG4gICAgICB0aGlzLmtleXMuc29ydChBbmltYXRpb25LZXkuY29tcGFyZSk7XHJcbiAgICAgIHRoaXMucmVnZW5lcmF0ZUZ1bmN0aW9ucygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhIGdpdmVuIGtleSBmcm9tIHRoZSBzZXF1ZW5jZS5cclxuICAgICAqIEBwYXJhbSBfa2V5IHRoZSBrZXkgdG8gcmVtb3ZlXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUtleShfa2V5OiBBbmltYXRpb25LZXkpOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMua2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICh0aGlzLmtleXNbaV0gPT0gX2tleSkge1xyXG4gICAgICAgICAgdGhpcy5rZXlzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgIHRoaXMucmVnZW5lcmF0ZUZ1bmN0aW9ucygpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmluZCBhIGtleSBpbiB0aGUgc2VxdWVuY2UgZXhhY3RseSBtYXRjaGluZyB0aGUgZ2l2ZW4gdGltZS5cclxuICAgICAqL1xyXG4gICAgZmluZEtleShfdGltZTogbnVtYmVyKTogQW5pbWF0aW9uS2V5IHtcclxuICAgICAgZm9yIChsZXQga2V5IG9mIHRoaXMua2V5cylcclxuICAgICAgICBpZiAoa2V5LnRpbWUgPT0gX3RpbWUpXHJcbiAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIEFuaW1hdGlvbiBLZXkgYXQgdGhlIGdpdmVuIGluZGV4IGZyb20gdGhlIGtleXMuXHJcbiAgICAgKiBAcGFyYW0gX2luZGV4IHRoZSB6ZXJvLWJhc2VkIGluZGV4IGF0IHdoaWNoIHRvIHJlbW92ZSB0aGUga2V5XHJcbiAgICAgKiBAcmV0dXJucyB0aGUgcmVtb3ZlZCBBbmltYXRpb25LZXkgaWYgc3VjY2Vzc2Z1bCwgbnVsbCBvdGhlcndpc2UuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZUtleUF0SW5kZXgoX2luZGV4OiBudW1iZXIpOiBBbmltYXRpb25LZXkge1xyXG4gICAgICBpZiAoX2luZGV4IDwgMCB8fCBfaW5kZXggPj0gdGhpcy5rZXlzLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBhazogQW5pbWF0aW9uS2V5ID0gdGhpcy5rZXlzW19pbmRleF07XHJcbiAgICAgIHRoaXMua2V5cy5zcGxpY2UoX2luZGV4LCAxKTtcclxuICAgICAgdGhpcy5yZWdlbmVyYXRlRnVuY3Rpb25zKCk7XHJcbiAgICAgIHJldHVybiBhaztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgYSBrZXkgZnJvbSB0aGUgc2VxdWVuY2UgYXQgdGhlIGRlc2lyZWQgaW5kZXguXHJcbiAgICAgKiBAcGFyYW0gX2luZGV4IHRoZSB6ZXJvLWJhc2VkIGluZGV4IGF0IHdoaWNoIHRvIGdldCB0aGUga2V5XHJcbiAgICAgKiBAcmV0dXJucyB0aGUgQW5pbWF0aW9uS2V5IGF0IHRoZSBpbmRleCBpZiBpdCBleGlzdHMsIG51bGwgb3RoZXJ3aXNlLlxyXG4gICAgICovXHJcbiAgICBnZXRLZXkoX2luZGV4OiBudW1iZXIpOiBBbmltYXRpb25LZXkge1xyXG4gICAgICBpZiAoX2luZGV4IDwgMCB8fCBfaW5kZXggPj0gdGhpcy5rZXlzLmxlbmd0aClcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgcmV0dXJuIHRoaXMua2V5c1tfaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEtleXMoKTogQW5pbWF0aW9uS2V5W10ge1xyXG4gICAgICByZXR1cm4gdGhpcy5rZXlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiB0cmFuc2ZlclxyXG4gICAgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgczogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBrZXlzOiBbXSxcclxuICAgICAgICBhbmltYXRpb25TZXF1ZW5jZTogdHJ1ZVxyXG4gICAgICB9O1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcy5rZXlzW2ldID0gdGhpcy5rZXlzW2ldLnNlcmlhbGl6ZSgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBfc2VyaWFsaXphdGlvbi5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgLy8gdGhpcy5rZXlzLnB1c2goPEFuaW1hdGlvbktleT5TZXJpYWxpemVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmtleXNbaV0pKTtcclxuICAgICAgICBsZXQgazogQW5pbWF0aW9uS2V5ID0gbmV3IEFuaW1hdGlvbktleSgpO1xyXG4gICAgICAgIGF3YWl0IGsuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24ua2V5c1tpXSk7XHJcbiAgICAgICAgdGhpcy5rZXlzW2ldID0gaztcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5yZWdlbmVyYXRlRnVuY3Rpb25zKCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgLy9cclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXRpbGl0eSBmdW5jdGlvbiB0aGF0IChyZS0pZ2VuZXJhdGVzIGFsbCBmdW5jdGlvbnMgaW4gdGhlIHNlcXVlbmNlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlZ2VuZXJhdGVGdW5jdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLmtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgZjogQW5pbWF0aW9uRnVuY3Rpb24gPSBuZXcgQW5pbWF0aW9uRnVuY3Rpb24odGhpcy5rZXlzW2ldKTtcclxuICAgICAgICB0aGlzLmtleXNbaV0uZnVuY3Rpb25PdXQgPSBmO1xyXG4gICAgICAgIGlmIChpID09IHRoaXMua2V5cy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAvL1RPRE86IGNoZWNrIGlmIHRoaXMgaXMgZXZlbiB1c2VmdWwuIE1heWJlIHVwZGF0ZSB0aGUgcnVuY29uZGl0aW9uIHRvIGxlbmd0aCAtIDEgaW5zdGVhZC4gTWlnaHQgYmUgcmVkdW5kYW50IGlmIGZ1bmN0aW9uSW4gaXMgcmVtb3ZlZCwgc2VlIFRPRE8gaW4gQW5pbWF0aW9uS2V5LlxyXG4gICAgICAgICAgZi5zZXRLZXlPdXQgPSB0aGlzLmtleXNbMF07XHJcbiAgICAgICAgICB0aGlzLmtleXNbMF0uZnVuY3Rpb25JbiA9IGY7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZi5zZXRLZXlPdXQgPSB0aGlzLmtleXNbaSArIDFdO1xyXG4gICAgICAgIHRoaXMua2V5c1tpICsgMV0uZnVuY3Rpb25JbiA9IGY7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgY2xhc3MgQW5pbWF0aW9uU3ByaXRlIGV4dGVuZHMgQW5pbWF0aW9uIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBBbmltYXRpb24ucmVnaXN0ZXJTdWJjbGFzcyhBbmltYXRpb25TcHJpdGUpO1xyXG4gICAgcHVibGljIHRleHR1cmU6IFRleHR1cmUgPSBUZXh0dXJlRGVmYXVsdC50ZXh0dXJlO1xyXG4gICAgcHJpdmF0ZSBpZFRleHR1cmU6IHN0cmluZztcclxuICAgIHByaXZhdGUgZnJhbWVzOiBudW1iZXIgPSAyNTtcclxuICAgIHByaXZhdGUgd3JhcEFmdGVyOiBudW1iZXIgPSA1O1xyXG4gICAgcHJpdmF0ZSBzdGFydDogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDAsIDApO1xyXG4gICAgcHJpdmF0ZSBzaXplOiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoODAsIDgwKTtcclxuICAgIHByaXZhdGUgbmV4dDogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDgwLCAwKTtcclxuICAgIHByaXZhdGUgd3JhcDogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDAsIDgwKTtcclxuXHJcbiAgICAvLyBUT0RPOiBmcHMgc2hvdWxkIGJlIGEgcGFyYW1ldGVyIHRvb1xyXG4gICAgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiQW5pbWF0aW9uU3ByaXRlXCIpIHsgLy99LCBfZnBzOiBudW1iZXIgPSAxNSkge1xyXG4gICAgICBzdXBlcihfbmFtZSwge30sIDEpO1xyXG4gICAgICB0aGlzLmZyYW1lc1BlclNlY29uZCA9IHRoaXMuZnJhbWVzO1xyXG4gICAgICB0aGlzLmNyZWF0ZSh0aGlzLnRleHR1cmUsIHRoaXMuZnJhbWVzLCB0aGlzLndyYXBBZnRlciwgdGhpcy5zdGFydCwgdGhpcy5zaXplLCB0aGlzLm5leHQsIHRoaXMud3JhcCwgdGhpcy5mcmFtZXNQZXJTZWNvbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRUZXh0dXJlKF90ZXh0dXJlOiBUZXh0dXJlKTogdm9pZCB7XHJcbiAgICAgIHRoaXMudGV4dHVyZSA9IF90ZXh0dXJlO1xyXG4gICAgICB0aGlzLmlkVGV4dHVyZSA9IF90ZXh0dXJlLmlkUmVzb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZShfdGV4dHVyZTogVGV4dHVyZSwgX2ZyYW1lczogbnVtYmVyLCBfd3JhcEFmdGVyOiBudW1iZXIsIF9zdGFydDogVmVjdG9yMiwgX3NpemU6IFZlY3RvcjIsIF9uZXh0OiBWZWN0b3IyLCBfd3JhcDogVmVjdG9yMiwgX2ZyYW1lc1BlclNlY29uZDogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuc2V0VGV4dHVyZShfdGV4dHVyZSk7XHJcbiAgICAgIHRoaXMuZnJhbWVzID0gX2ZyYW1lcztcclxuICAgICAgdGhpcy53cmFwQWZ0ZXIgPSBfd3JhcEFmdGVyO1xyXG4gICAgICB0aGlzLnN0YXJ0ID0gX3N0YXJ0O1xyXG4gICAgICB0aGlzLnNpemUgPSBfc2l6ZTtcclxuICAgICAgdGhpcy5uZXh0ID0gX25leHQ7XHJcbiAgICAgIHRoaXMud3JhcCA9IF93cmFwO1xyXG4gICAgICB0aGlzLmZyYW1lc1BlclNlY29uZCA9IF9mcmFtZXNQZXJTZWNvbmQ7XHJcblxyXG4gICAgICBsZXQgc2NhbGU6IFZlY3RvcjIgPSB0aGlzLmdldFNjYWxlKCk7XHJcbiAgICAgIGxldCBwb3NpdGlvbnM6IFZlY3RvcjJbXSA9IHRoaXMuZ2V0UG9zaXRpb25zKCk7XHJcblxyXG4gICAgICBsZXQgeFRyYW5zbGF0aW9uOiBBbmltYXRpb25TZXF1ZW5jZSA9IG5ldyBBbmltYXRpb25TZXF1ZW5jZSgpO1xyXG4gICAgICBsZXQgeVRyYW5zbGF0aW9uOiBBbmltYXRpb25TZXF1ZW5jZSA9IG5ldyBBbmltYXRpb25TZXF1ZW5jZSgpO1xyXG4gICAgICBsZXQgeFNjYWxlOiBBbmltYXRpb25TZXF1ZW5jZSA9IG5ldyBBbmltYXRpb25TZXF1ZW5jZSgpO1xyXG4gICAgICBsZXQgeVNjYWxlOiBBbmltYXRpb25TZXF1ZW5jZSA9IG5ldyBBbmltYXRpb25TZXF1ZW5jZSgpO1xyXG4gICAgICB4U2NhbGUuYWRkS2V5KG5ldyBBbmltYXRpb25LZXkoMCwgc2NhbGUueCkpO1xyXG4gICAgICB5U2NhbGUuYWRkS2V5KG5ldyBBbmltYXRpb25LZXkoMCwgc2NhbGUueSkpO1xyXG5cclxuICAgICAgZm9yIChsZXQgZnJhbWU6IG51bWJlciA9IDA7IGZyYW1lIDw9IHRoaXMuZnJhbWVzOyBmcmFtZSsrKSB7XHJcbiAgICAgICAgbGV0IHRpbWU6IG51bWJlciA9IDEwMDAgKiBmcmFtZSAvIHRoaXMuZnJhbWVzUGVyU2Vjb25kO1xyXG4gICAgICAgIGxldCBwb3NpdGlvbjogVmVjdG9yMiA9IHBvc2l0aW9uc1tNYXRoLm1pbihmcmFtZSwgdGhpcy5mcmFtZXMgLSAxKV07IC8vcmVwZWF0IHRoZSBsYXN0IGtleSB0byBnaXZlIHRoZSBsYXN0IGZyYW1lIHNvbWUgdGltZVxyXG4gICAgICAgIHhUcmFuc2xhdGlvbi5hZGRLZXkobmV3IEFuaW1hdGlvbktleSh0aW1lLCBwb3NpdGlvbi54IC8gdGhpcy50ZXh0dXJlLnRleEltYWdlU291cmNlLndpZHRoKSk7Ly8sIDAsIDAsIHRydWUpKVxyXG4gICAgICAgIHlUcmFuc2xhdGlvbi5hZGRLZXkobmV3IEFuaW1hdGlvbktleSh0aW1lLCBwb3NpdGlvbi55IC8gdGhpcy50ZXh0dXJlLnRleEltYWdlU291cmNlLmhlaWdodCkpOy8vLCAwLCAwLCB0cnVlKSlcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5hbmltYXRpb25TdHJ1Y3R1cmUgPSB7XHJcbiAgICAgICAgXCJjb21wb25lbnRzXCI6IHtcclxuICAgICAgICAgIFwiQ29tcG9uZW50TWF0ZXJpYWxcIjogW3tcclxuICAgICAgICAgICAgXCJtdHhQaXZvdFwiOiB7XHJcbiAgICAgICAgICAgICAgXCJ0cmFuc2xhdGlvblwiOiB7XHJcbiAgICAgICAgICAgICAgICB4OiB4VHJhbnNsYXRpb24sXHJcbiAgICAgICAgICAgICAgICB5OiB5VHJhbnNsYXRpb24sXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBcInNjYWxpbmdcIjoge1xyXG4gICAgICAgICAgICAgICAgeDogeFNjYWxlLFxyXG4gICAgICAgICAgICAgICAgeTogeVNjYWxlLFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfV1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlVG90YWxUaW1lKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFNjYWxlKCk6IFZlY3RvcjIge1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgdGhpcy5zaXplLnggLyB0aGlzLnRleHR1cmUudGV4SW1hZ2VTb3VyY2Uud2lkdGgsXHJcbiAgICAgICAgdGhpcy5zaXplLnkgLyB0aGlzLnRleHR1cmUudGV4SW1hZ2VTb3VyY2UuaGVpZ2h0XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBvc2l0aW9ucygpOiBWZWN0b3IyW10ge1xyXG4gICAgICBsZXQgaU5leHQ6IG51bWJlciA9IDA7XHJcbiAgICAgIGxldCBpV3JhcDogbnVtYmVyID0gMDtcclxuICAgICAgbGV0IHBvc2l0aW9uczogVmVjdG9yMltdID0gW107XHJcbiAgICAgIGZvciAobGV0IGZyYW1lOiBudW1iZXIgPSAwOyBmcmFtZSA8IHRoaXMuZnJhbWVzOyBmcmFtZSsrKSB7XHJcbiAgICAgICAgcG9zaXRpb25zLnB1c2gobmV3IFZlY3RvcjIoXHJcbiAgICAgICAgICB0aGlzLnN0YXJ0LnggKyBpTmV4dCAqIHRoaXMubmV4dC54ICsgaVdyYXAgKiB0aGlzLndyYXAueCxcclxuICAgICAgICAgIHRoaXMuc3RhcnQueSArIGlOZXh0ICogdGhpcy5uZXh0LnkgKyBpV3JhcCAqIHRoaXMud3JhcC55XHJcbiAgICAgICAgKSk7XHJcblxyXG4gICAgICAgIGlOZXh0KytcclxuICAgICAgICBpZiAoaU5leHQgPj0gdGhpcy53cmFwQWZ0ZXIpIHtcclxuICAgICAgICAgIGlOZXh0ID0gMDtcclxuICAgICAgICAgIGlXcmFwKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBwb3NpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIHRyYW5zZmVyXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yLCBfc2VsZWN0aW9uPzogc3RyaW5nW10sIF9kaXNwYXRjaE11dGF0ZT86IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yKTtcclxuICAgICAgdGhpcy5jcmVhdGUodGhpcy50ZXh0dXJlLCB0aGlzLmZyYW1lcywgdGhpcy53cmFwQWZ0ZXIsIHRoaXMuc3RhcnQsIHRoaXMuc2l6ZSwgdGhpcy5uZXh0LCB0aGlzLndyYXAsIHRoaXMuZnJhbWVzUGVyU2Vjb25kKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHt9O1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmlkUmVzb3VyY2UgPSB0aGlzLmlkUmVzb3VyY2U7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaWRUZXh0dXJlID0gdGhpcy5pZFRleHR1cmU7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uZnJhbWVzID0gdGhpcy5mcmFtZXM7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ud3JhcEFmdGVyID0gdGhpcy53cmFwQWZ0ZXI7XHJcbiAgICAgIGZvciAobGV0IG5hbWUgb2YgW1wic3RhcnRcIiwgXCJzaXplXCIsIFwibmV4dFwiLCBcIndyYXBcIl0pXHJcbiAgICAgICAgc2VyaWFsaXphdGlvbltuYW1lXSA9ICg8VmVjdG9yMj5SZWZsZWN0LmdldCh0aGlzLCBuYW1lKSkuc2VyaWFsaXplKCk7XHJcblxyXG4gICAgICBsZXQgYW5pbWF0aW9uc1N0cnVjdHVyZTogQW5pbWF0aW9uU3RydWN0dXJlID0gdGhpcy5hbmltYXRpb25TdHJ1Y3R1cmU7XHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uU3RydWN0dXJlID0ge307IC8vIG5vIG5lZWQgdG8gc2VyaWFsaXplIHN0cnVjdHVyZVxyXG4gICAgICAvLyBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uU3RydWN0dXJlID0gYW5pbWF0aW9uc1N0cnVjdHVyZTsgLy8gcmVzdG9yZSBleGlzdGVudCBzdHJ1Y3R1cmVcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3Nbc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICBpZiAoX3MuaWRUZXh0dXJlKVxyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IDxUZXh0dXJlPmF3YWl0IFByb2plY3QuZ2V0UmVzb3VyY2UoX3MuaWRUZXh0dXJlKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IFRleHR1cmVEZWZhdWx0LnRleHR1cmU7XHJcblxyXG4gICAgICBmb3IgKGxldCBuYW1lIG9mIFtcInN0YXJ0XCIsIFwic2l6ZVwiLCBcIm5leHRcIiwgXCJ3cmFwXCJdKVxyXG4gICAgICAgICg8VmVjdG9yMj5SZWZsZWN0LmdldCh0aGlzLCBuYW1lKSkuZGVzZXJpYWxpemUoX3NbbmFtZV0pO1xyXG4gICAgICB0aGlzLmNyZWF0ZSh0aGlzLnRleHR1cmUsIF9zLmZyYW1lcywgX3Mud3JhcEFmdGVyLCB0aGlzLnN0YXJ0LCB0aGlzLnNpemUsIHRoaXMubmV4dCwgdGhpcy53cmFwLCB0aGlzLmZyYW1lc1BlclNlY29uZCk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHVibGljIGNvbnZlcnRUb0FuaW1hdGlvbigpOiBBbmltYXRpb24ge1xyXG4gICAgICBsZXQgYW5pbWF0aW9uOiBBbmltYXRpb24gPSBuZXcgQW5pbWF0aW9uKHRoaXMubmFtZSwgdGhpcy5hbmltYXRpb25TdHJ1Y3R1cmUsIHRoaXMuZnJhbWVzUGVyU2Vjb25kKTtcclxuICAgICAgcmV0dXJuIGFuaW1hdGlvbjtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBFeHRlbnNpb24gb2YgQXVkaW9CdWZmZXIgd2l0aCBhIGxvYWQgbWV0aG9kIHRoYXQgY3JlYXRlcyBhIGJ1ZmZlciBpbiB0aGUge0BsaW5rIEF1ZGlvTWFuYWdlcn0uZGVmYXVsdCB0byBiZSB1c2VkIHdpdGgge0BsaW5rIENvbXBvbmVudEF1ZGlvfVxyXG4gICAqIEBhdXRob3JzIFRob21hcyBEb3JuZXIsIEhGVSwgMjAxOSB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIwXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEF1ZGlvIGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZVJlc291cmNlIHtcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcgPSBcIkF1ZGlvXCI7XHJcbiAgICBwdWJsaWMgaWRSZXNvdXJjZTogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgcHVibGljIGJ1ZmZlcjogQXVkaW9CdWZmZXIgPSB1bmRlZmluZWQ7XHJcbiAgICBwdWJsaWMgcGF0aDogVVJMID0gdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSB1cmw6IFJlcXVlc3RJbmZvID0gdW5kZWZpbmVkO1xyXG4gICAgcHJpdmF0ZSByZWFkeTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF91cmw/OiBSZXF1ZXN0SW5mbykge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICBpZiAoX3VybCkge1xyXG4gICAgICAgIHRoaXMubG9hZChfdXJsKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBfdXJsLnRvU3RyaW5nKCkuc3BsaXQoXCIvXCIpLnBvcCgpO1xyXG4gICAgICB9XHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlzUmVhZHkoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLnJlYWR5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXN5bmNocm9ub3VzbHkgbG9hZHMgdGhlIGF1ZGlvIChtcDMpIGZyb20gdGhlIGdpdmVuIHVybFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZChfdXJsOiBSZXF1ZXN0SW5mbyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBEZWJ1Zy5mdWRnZShcIkF1ZGlvTG9hZFwiLCBfdXJsKTtcclxuICAgICAgdGhpcy51cmwgPSBfdXJsO1xyXG4gICAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XHJcbiAgICAgIHRoaXMucGF0aCA9IG5ldyBVUkwodGhpcy51cmwudG9TdHJpbmcoKSwgUHJvamVjdC5iYXNlVVJMKTtcclxuICAgICAgY29uc3QgcmVzcG9uc2U6IFJlc3BvbnNlID0gYXdhaXQgd2luZG93LmZldGNoKHRoaXMucGF0aC50b1N0cmluZygpKTtcclxuICAgICAgY29uc3QgYXJyYXlCdWZmZXI6IEFycmF5QnVmZmVyID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcclxuICAgICAgbGV0IGJ1ZmZlcjogQXVkaW9CdWZmZXIgPSBhd2FpdCBBdWRpb01hbmFnZXIuZGVmYXVsdC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlCdWZmZXIpO1xyXG4gICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcclxuICAgICAgdGhpcy5yZWFkeSA9IHRydWU7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlRfQVVESU8uUkVBRFkpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgdXJsOiB0aGlzLnVybCxcclxuICAgICAgICBpZFJlc291cmNlOiB0aGlzLmlkUmVzb3VyY2UsXHJcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzLCBfc2VyaWFsaXphdGlvbi5pZFJlc291cmNlKTtcclxuICAgICAgYXdhaXQgdGhpcy5sb2FkKF9zZXJpYWxpemF0aW9uLnVybCk7XHJcbiAgICAgIHRoaXMubmFtZSA9IF9zZXJpYWxpemF0aW9uLm5hbWU7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IHVybDogc3RyaW5nID0gX211dGF0b3IudXJsOyAvLyBzYXZlIHVybCBmb3IgcmVjb25zdHJ1Y3Rpb24gYWZ0ZXIgZXhjbHVzaW9uXHJcbiAgICAgIGlmIChfbXV0YXRvci51cmwgIT0gdGhpcy51cmwudG9TdHJpbmcoKSlcclxuICAgICAgICB0aGlzLmxvYWQoX211dGF0b3IudXJsKTtcclxuICAgICAgLy8gZXhjZXB0IHVybCBmcm9tIG11dGF0b3IgZm9yIGZ1cnRoZXIgcHJvY2Vzc2luZ1xyXG4gICAgICBkZWxldGUgKF9tdXRhdG9yLnVybCk7XHJcbiAgICAgIHN1cGVyLm11dGF0ZShfbXV0YXRvcik7XHJcbiAgICAgIC8vIHJlY29uc3RydWN0LCBmb3IgbXV0YXRvciBtYXkgYmUga2VwdCBieSBjYWxsZXJcclxuICAgICAgUmVmbGVjdC5zZXQoX211dGF0b3IsIFwidXJsXCIsIHVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgLy8gZGVsZXRlIF9tdXRhdG9yLmlkUmVzb3VyY2U7IFxyXG4gICAgICBkZWxldGUgX211dGF0b3IucmVhZHk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgY29uc3QgZW51bSBFVkVOVF9BVURJTyB7XHJcbiAgICAvKiogYnJvYWRjYXN0IHRvIGEge0BsaW5rIE5vZGV9IGFuZCBhbGwgaXRzIGRlc2NlbmRhbnRzIGluIHRoZSBncmFwaCBhZnRlciBpdCB3YXMgYXBwZW5kZWQgdG8gYSBwYXJlbnQgKi9cclxuICAgIENISUxEX0FQUEVORCA9IFwiY2hpbGRBcHBlbmRUb0F1ZGlvR3JhcGhcIixcclxuICAgIC8qKiBicm9hZGNhc3QgdG8gYSB7QGxpbmsgTm9kZX0gYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMgaW4gdGhlIGdyYXBoIGp1c3QgYmVmb3JlIGl0cyBiZWluZyByZW1vdmVkIGZyb20gaXRzIHBhcmVudCAqL1xyXG4gICAgQ0hJTERfUkVNT1ZFID0gXCJjaGlsZFJlbW92ZUZyb21BdWRpb0dyYXBoXCIsXHJcbiAgICAvKiogYnJvYWRjYXN0IHRvIGEge0BsaW5rIE5vZGV9IGFuZCBhbGwgaXRzIGRlc2NlbmRhbnRzIGluIHRoZSBncmFwaCB0byB1cGRhdGUgdGhlIHBhbm5lcnMgaW4gQXVkaW9Db21wb25lbnRzICovXHJcbiAgICBVUERBVEUgPSBcInVwZGF0ZUF1ZGlvR3JhcGhcIixcclxuICAgIC8qKiBmaXJlZCB3aGVuIHRoZSBhdWRpbyBmaWxlIHdhcyBsb2FkZWQgYW5kIGlzIHJlYWR5IGZvciBwbGF5aW5nICovXHJcbiAgICBSRUFEWSA9IFwicmVhZHlcIixcclxuICAgIC8qKiBmaXJlZCB3aGVuIHRoZSBlbmQgb2YgdGhlIGF1ZGlvIGlzIHJlYWNoZWQgd2hpbGUgcGxheWluZyAqL1xyXG4gICAgRU5ERUQgPSBcImVuZGVkXCJcclxuICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9FdmVudC9FdmVudEF1ZGlvLnRzXCIvPlxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBFeHRlbmRzIHRoZSBzdGFuZGFyZCBBdWRpb0NvbnRleHQgZm9yIGludGVncmF0aW9uIHdpdGggRlVER0UtZ3JhcGhzLlxyXG4gICAqIENyZWF0ZXMgYSBkZWZhdWx0IG9iamVjdCBhdCBzdGFydHVwIHRvIGJlIGFkZHJlc3NlZCBhcyBBdWRpb01hbmFnZXIgZGVmYXVsdC5cclxuICAgKiBPdGhlciBvYmplY3RzIG9mIHRoaXMgY2xhc3MgbWF5IGJlIGNyZWF0ZSBmb3Igc3BlY2lhbCBwdXJwb3Nlcy5cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQXVkaW9NYW5hZ2VyIGV4dGVuZHMgQXVkaW9Db250ZXh0IHtcclxuICAgIC8qKiBUaGUgZGVmYXVsdCBjb250ZXh0IHRoYXQgbWF5IGJlIHVzZWQgdGhyb3VnaG91dCB0aGUgcHJvamVjdCB3aXRob3V0IHRoZSBuZWVkIHRvIGNyZWF0ZSBvdGhlcnMgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgZGVmYXVsdDogQXVkaW9NYW5hZ2VyID0gbmV3IEF1ZGlvTWFuYWdlcih7IGxhdGVuY3lIaW50OiBcImludGVyYWN0aXZlXCIsIHNhbXBsZVJhdGU6IDQ0MTAwIH0pO1xyXG4gICAgLyoqIFRoZSBtYXN0ZXIgdm9sdW1lIGFsbCBBdWRpb05vZGVzIGluIHRoZSBjb250ZXh0IHNob3VsZCBhdHRhY2ggdG8gKi9cclxuICAgIHB1YmxpYyByZWFkb25seSBnYWluOiBHYWluTm9kZTtcclxuICAgIHByaXZhdGUgZ3JhcGg6IE5vZGUgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSBjbXBMaXN0ZW5lcjogQ29tcG9uZW50QXVkaW9MaXN0ZW5lciA9IG51bGw7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBldmVudFVwZGF0ZTogRXZlbnQgPSBuZXcgRXZlbnQoRVZFTlRfQVVESU8uVVBEQVRFKTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0T3B0aW9ucz86IEF1ZGlvQ29udGV4dE9wdGlvbnMpIHtcclxuICAgICAgc3VwZXIoY29udGV4dE9wdGlvbnMpO1xyXG4gICAgICB0aGlzLmdhaW4gPSB0aGlzLmNyZWF0ZUdhaW4oKTtcclxuICAgICAgdGhpcy5nYWluLmNvbm5lY3QodGhpcy5kZXN0aW5hdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIG1hc3RlciB2b2x1bWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCB2b2x1bWUoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5nYWluLmdhaW4udmFsdWUgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIG1hc3RlciB2b2x1bWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCB2b2x1bWUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2Fpbi5nYWluLnZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyBGVURHRS1ncmFwaCB0byBsaXN0ZW4gdG8uIEVhY2gge0BsaW5rIENvbXBvbmVudEF1ZGlvfSBpbiB0aGUgZ3JhcGggd2lsbCBjb25uZWN0IHRvIHRoaXMgY29udGV4dHMgbWFzdGVyIGdhaW4sIGFsbCBvdGhlcnMgZGlzY29ubmVjdC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGxpc3RlblRvID0gKF9ncmFwaDogTm9kZSB8IG51bGwpOiB2b2lkID0+IHtcclxuICAgICAgaWYgKHRoaXMuZ3JhcGgpXHJcbiAgICAgICAgdGhpcy5ncmFwaC5icm9hZGNhc3RFdmVudChuZXcgRXZlbnQoRVZFTlRfQVVESU8uQ0hJTERfUkVNT1ZFKSk7XHJcbiAgICAgIGlmICghX2dyYXBoKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgdGhpcy5ncmFwaCA9IF9ncmFwaDtcclxuICAgICAgdGhpcy5ncmFwaC5icm9hZGNhc3RFdmVudChuZXcgRXZlbnQoRVZFTlRfQVVESU8uQ0hJTERfQVBQRU5EKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgRlVER0UtZ3JhcGggY3VycmVudGx5IGxpc3RlbmluZyB0b1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0R3JhcGhMaXN0ZW5pbmdUbyA9ICgpOiBOb2RlID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ3JhcGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIHtAbGluayBDb21wb25lbnRBdWRpb0xpc3RlbmVyfSB0aGF0IHNlcnZlcyB0aGUgc3BhdGlhbCBsb2NhdGlvbiBhbmQgb3JpZW50YXRpb24gZm9yIHRoaXMgY29udGV4dHMgbGlzdGVuZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIGxpc3RlbldpdGggPSAoX2NtcExpc3RlbmVyOiBDb21wb25lbnRBdWRpb0xpc3RlbmVyIHwgbnVsbCk6IHZvaWQgPT4ge1xyXG4gICAgICB0aGlzLmNtcExpc3RlbmVyID0gX2NtcExpc3RlbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgc3BhdGlhbCBzZXR0aW5ncyBvZiB0aGUgQXVkaW9Ob2RlcyBlZmZlY3RlZCBpbiB0aGUgY3VycmVudCBGVURHRS1ncmFwaFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAvLyB0aGlzLmdyYXBoLmJyb2FkY2FzdEV2ZW50KG5ldyBFdmVudChFVkVOVF9BVURJTy5VUERBVEUpKTtcclxuICAgICAgdGhpcy5ncmFwaC5icm9hZGNhc3RFdmVudChBdWRpb01hbmFnZXIuZXZlbnRVcGRhdGUpO1xyXG4gICAgICBpZiAodGhpcy5jbXBMaXN0ZW5lcilcclxuICAgICAgICB0aGlzLmNtcExpc3RlbmVyLnVwZGF0ZSh0aGlzLmxpc3RlbmVyKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCIvLyBuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAgIFxyXG4vLyAgICAgLyoqXHJcbi8vICAgICAgKiBFbnVtZXJhdG9yIGZvciBhbGwgcG9zc2libGUgT3NjaWxsYXRvciBUeXBlc1xyXG4vLyAgICAgICovXHJcbi8vICAgICB0eXBlIE9TQ0lMTEFUT1JfVFlQRSA9IFwic2luZVwiIHwgXCJzcXVhcmVcIiB8IFwic2F3dG9vdGhcIiB8IFwidHJpYW5nbGVcIiB8IFwiY3VzdG9tXCI7XHJcblxyXG4vLyAgICAgLyoqXHJcbi8vICAgICAgKiBJbnRlcmZhY2UgdG8gY3JlYXRlIEN1c3RvbSBPc2NpbGxhdG9yIFR5cGVzLlxyXG4vLyAgICAgICogU3RhcnQtL0VuZHBvaW50IG9mIGEgY3VzdHVtIGN1cnZlIGUuZy4gc2luZSBjdXJ2ZS5cclxuLy8gICAgICAqIEJvdGggcGFyYW1ldGVycyBuZWVkIHRvIGJlIGluYmV0d2VlbiAtMSBhbmQgMS5cclxuLy8gICAgICAqIEBwYXJhbSBzdGFydHBvaW50IHN0YXJ0cG9pbnQgb2YgYSBjdXJ2ZSBcclxuLy8gICAgICAqIEBwYXJhbSBlbmRwb2ludCBFbmRwb2ludCBvZiBhIGN1cnZlIFxyXG4vLyAgICAgICovXHJcbi8vICAgICBpbnRlcmZhY2UgT3NjaWxsYXRvcldhdmUge1xyXG4vLyAgICAgICAgIHN0YXJ0cG9pbnQ6IG51bWJlcjtcclxuLy8gICAgICAgICBlbmRwb2ludDogbnVtYmVyO1xyXG4vLyAgICAgfVxyXG4vLyAgICAgLyoqXHJcbi8vICAgICAgKiBBZGQgYW4ge0BsaW5rIEF1ZGlvRmlsdGVyfSB0byBhbiB7QGxpbmsgQXVkaW9dXVxyXG4vLyAgICAgICogQGF1dGhvcnMgVGhvbWFzIERvcm5lciwgSEZVLCAyMDE5XHJcbi8vICAgICAgKi9cclxuLy8gICAgIGV4cG9ydCBjbGFzcyBBdWRpb09zY2lsbGF0b3Ige1xyXG5cclxuLy8gICAgICAgICBwdWJsaWMgYXVkaW9Pc2NpbGxhdG9yOiBPc2NpbGxhdG9yTm9kZTsgXHJcblxyXG4vLyAgICAgICAgIHByaXZhdGUgZnJlcXVlbmN5OiBudW1iZXI7XHJcbi8vICAgICAgICAgcHJpdmF0ZSBvc2NpbGxhdG9yVHlwZTogT1NDSUxMQVRPUl9UWVBFO1xyXG4vLyAgICAgICAgIHByaXZhdGUgb3NjaWxsYXRvcldhdmU6IFBlcmlvZGljV2F2ZTtcclxuXHJcbi8vICAgICAgICAgcHJpdmF0ZSBsb2NhbEdhaW46IEdhaW5Ob2RlO1xyXG4vLyAgICAgICAgIHByaXZhdGUgbG9jYWxHYWluVmFsdWU6IG51bWJlcjtcclxuXHJcbi8vICAgICAgICAgY29uc3RydWN0b3IoX2F1ZGlvU2V0dGluZ3M6IEF1ZGlvU2V0dGluZ3MsIF9vc2NpbGxhdG9yVHlwZT86IE9TQ0lMTEFUT1JfVFlQRSkge1xyXG4vLyAgICAgICAgICAgICB0aGlzLmF1ZGlvT3NjaWxsYXRvciA9IF9hdWRpb1NldHRpbmdzLmdldEF1ZGlvQ29udGV4dCgpLmNyZWF0ZU9zY2lsbGF0b3IoKTtcclxuLy8gICAgICAgICAgICAgdGhpcy5sb2NhbEdhaW4gPSBfYXVkaW9TZXR0aW5ncy5nZXRBdWRpb0NvbnRleHQoKS5jcmVhdGVHYWluKCk7XHJcbi8vICAgICAgICAgICAgIHRoaXMub3NjaWxsYXRvclR5cGUgPSBfb3NjaWxsYXRvclR5cGU7XHJcbi8vICAgICAgICAgICAgIGlmICh0aGlzLm9zY2lsbGF0b3JUeXBlICE9IFwiY3VzdG9tXCIpIHtcclxuLy8gICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9Pc2NpbGxhdG9yLnR5cGUgPSB0aGlzLm9zY2lsbGF0b3JUeXBlO1xyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIGVsc2Uge1xyXG4vLyAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9zY2lsbGF0b3JXYXZlKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgdGhpcy5hdWRpb09zY2lsbGF0b3Iuc2V0UGVyaW9kaWNXYXZlKHRoaXMub3NjaWxsYXRvcldhdmUpO1xyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDcmVhdGUgYSBDdXN0b20gUGVyaW9kaWMgV2F2ZSBmaXJzdCB0byB1c2UgQ3VzdG9tIFR5cGVcIik7XHJcbi8vICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIHB1YmxpYyBzZXRPc2NpbGxhdG9yVHlwZShfb3NjaWxsYXRvclR5cGU6IE9TQ0lMTEFUT1JfVFlQRSk6IHZvaWQge1xyXG4vLyAgICAgICAgICAgICBpZiAodGhpcy5vc2NpbGxhdG9yVHlwZSAhPSBcImN1c3RvbVwiKSB7XHJcbi8vICAgICAgICAgICAgICAgICB0aGlzLmF1ZGlvT3NjaWxsYXRvci50eXBlID0gdGhpcy5vc2NpbGxhdG9yVHlwZTtcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICBlbHNlIHtcclxuLy8gICAgICAgICAgICAgICAgIGlmICghdGhpcy5vc2NpbGxhdG9yV2F2ZSkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXVkaW9Pc2NpbGxhdG9yLnNldFBlcmlvZGljV2F2ZSh0aGlzLm9zY2lsbGF0b3JXYXZlKTtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgcHVibGljIGdldE9zY2lsbGF0b3JUeXBlKCk6IE9TQ0lMTEFUT1JfVFlQRSB7XHJcbi8vICAgICAgICAgICAgIHJldHVybiB0aGlzLm9zY2lsbGF0b3JUeXBlO1xyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgcHVibGljIGNyZWF0ZVBlcmlvZGljV2F2ZShfYXVkaW9TZXR0aW5nczogQXVkaW9TZXR0aW5ncywgX3JlYWw6IE9zY2lsbGF0b3JXYXZlLCBfaW1hZzogT3NjaWxsYXRvcldhdmUpOiB2b2lkIHtcclxuLy8gICAgICAgICAgICAgbGV0IHdhdmVSZWFsOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDIpO1xyXG4vLyAgICAgICAgICAgICB3YXZlUmVhbFswXSA9IF9yZWFsLnN0YXJ0cG9pbnQ7XHJcbi8vICAgICAgICAgICAgIHdhdmVSZWFsWzFdID0gX3JlYWwuZW5kcG9pbnQ7XHJcblxyXG4vLyAgICAgICAgICAgICBsZXQgd2F2ZUltYWc6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMik7XHJcbi8vICAgICAgICAgICAgIHdhdmVJbWFnWzBdID0gX2ltYWcuc3RhcnRwb2ludDtcclxuLy8gICAgICAgICAgICAgd2F2ZUltYWdbMV0gPSBfaW1hZy5lbmRwb2ludDtcclxuXHJcbi8vICAgICAgICAgICAgIHRoaXMub3NjaWxsYXRvcldhdmUgPSBfYXVkaW9TZXR0aW5ncy5nZXRBdWRpb0NvbnRleHQoKS5jcmVhdGVQZXJpb2RpY1dhdmUod2F2ZVJlYWwsIHdhdmVJbWFnKTtcclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIHB1YmxpYyBzZXRMb2NhbEdhaW4oX2xvY2FsR2FpbjogR2Fpbk5vZGUpOiB2b2lkIHtcclxuLy8gICAgICAgICAgICAgdGhpcy5sb2NhbEdhaW4gPSBfbG9jYWxHYWluO1xyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgcHVibGljIGdldExvY2FsR2FpbigpOiBHYWluTm9kZSB7XHJcbi8vICAgICAgICAgICAgIHJldHVybiB0aGlzLmxvY2FsR2FpbjtcclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIHB1YmxpYyBzZXRMb2NhbEdhaW5WYWx1ZShfbG9jYWxHYWluVmFsdWU6IG51bWJlcik6IHZvaWQge1xyXG4vLyAgICAgICAgICAgICB0aGlzLmxvY2FsR2FpblZhbHVlID0gX2xvY2FsR2FpblZhbHVlO1xyXG4vLyAgICAgICAgICAgICB0aGlzLmxvY2FsR2Fpbi5nYWluLnZhbHVlID0gdGhpcy5sb2NhbEdhaW5WYWx1ZTtcclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIHB1YmxpYyBnZXRMb2NhbEdhaW5WYWx1ZSgpOiBudW1iZXIge1xyXG4vLyAgICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbEdhaW5WYWx1ZTtcclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIHB1YmxpYyBzZXRGcmVxdWVuY3koX2F1ZGlvU2V0dGluZ3M6IEF1ZGlvU2V0dGluZ3MsIF9mcmVxdWVuY3k6IG51bWJlcik6IHZvaWQge1xyXG4vLyAgICAgICAgICAgICB0aGlzLmZyZXF1ZW5jeSA9IF9mcmVxdWVuY3k7XHJcbi8vICAgICAgICAgICAgIHRoaXMuYXVkaW9Pc2NpbGxhdG9yLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSh0aGlzLmZyZXF1ZW5jeSwgX2F1ZGlvU2V0dGluZ3MuZ2V0QXVkaW9Db250ZXh0KCkuY3VycmVudFRpbWUpO1xyXG4vLyAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgcHVibGljIGdldEZyZXF1ZW5jeSgpOiBudW1iZXIge1xyXG4vLyAgICAgICAgICAgICByZXR1cm4gdGhpcy5mcmVxdWVuY3k7XHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBwdWJsaWMgY3JlYXRlU25hcmUoX2F1ZGlvU2V0dGluZ3M6IEF1ZGlvU2V0dGluZ3MpOiB2b2lkIHtcclxuLy8gICAgICAgICAgICAgdGhpcy5zZXRPc2NpbGxhdG9yVHlwZShcInRyaWFuZ2xlXCIpO1xyXG4vLyAgICAgICAgICAgICB0aGlzLnNldEZyZXF1ZW5jeShfYXVkaW9TZXR0aW5ncywgMTAwKTtcclxuLy8gICAgICAgICAgICAgdGhpcy5zZXRMb2NhbEdhaW5WYWx1ZSgwKTtcclxuLy8gICAgICAgICAgICAgdGhpcy5sb2NhbEdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLCBfYXVkaW9TZXR0aW5ncy5nZXRBdWRpb0NvbnRleHQoKS5jdXJyZW50VGltZSk7XHJcbi8vICAgICAgICAgICAgIHRoaXMubG9jYWxHYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAxLCBfYXVkaW9TZXR0aW5ncy5nZXRBdWRpb0NvbnRleHQoKS5jdXJyZW50VGltZSArIC4xKTtcclxuXHJcbi8vICAgICAgICAgICAgIHRoaXMuYXVkaW9Pc2NpbGxhdG9yLmNvbm5lY3QodGhpcy5sb2NhbEdhaW4pO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gfSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vVGltZS9Mb29wLnRzXCIvPlxyXG4vLyAvIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0FuaW1hdGlvbi9BbmltYXRpb24udHNcIi8+XHJcblxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogSG9sZHMgYSByZWZlcmVuY2UgdG8gYW4ge0BsaW5rIEFuaW1hdGlvbn0gYW5kIGNvbnRyb2xzIGl0LiBDb250cm9scyBxdWFudGl6YXRpb24gYW5kIHBsYXltb2RlIGFzIHdlbGwgYXMgc3BlZWQuXHJcbiAgICogQGF1dGhvcnMgTHVrYXMgU2NoZXVlcmxlLCBIRlUsIDIwMTkgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMSB8IEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyMlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRBbmltYXRvciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50QW5pbWF0b3IpO1xyXG4gICAgLy9UT0RPOiBhZGQgZnVuY3Rpb25hbGl0eSB0byBibGVuZCBmcm9tIG9uZSBhbmltYXRpb24gdG8gYW5vdGhlci5cclxuICAgIHB1YmxpYyBhbmltYXRpb246IEFuaW1hdGlvbjtcclxuICAgIHB1YmxpYyBwbGF5bW9kZTogQU5JTUFUSU9OX1BMQVlNT0RFO1xyXG4gICAgcHVibGljIHF1YW50aXphdGlvbjogQU5JTUFUSU9OX1FVQU5USVpBVElPTjtcclxuICAgIHB1YmxpYyBzY2FsZVdpdGhHYW1lVGltZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwdWJsaWMgYW5pbWF0ZUluRWRpdG9yOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgI3NjYWxlOiBudW1iZXIgPSAxO1xyXG4gICAgI3RpbWVMb2NhbDogVGltZTtcclxuICAgICNwcmV2aW91czogbnVtYmVyID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfYW5pbWF0aW9uPzogQW5pbWF0aW9uLCBfcGxheW1vZGU6IEFOSU1BVElPTl9QTEFZTU9ERSA9IEFOSU1BVElPTl9QTEFZTU9ERS5MT09QLCBfcXVhbnRpemF0aW9uOiBBTklNQVRJT05fUVVBTlRJWkFUSU9OID0gQU5JTUFUSU9OX1FVQU5USVpBVElPTi5DT05USU5PVVMpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5wbGF5bW9kZSA9IF9wbGF5bW9kZTtcclxuICAgICAgdGhpcy5xdWFudGl6YXRpb24gPSBfcXVhbnRpemF0aW9uO1xyXG4gICAgICB0aGlzLmFuaW1hdGlvbiA9IF9hbmltYXRpb247XHJcblxyXG4gICAgICB0aGlzLiN0aW1lTG9jYWwgPSBuZXcgVGltZSgpO1xyXG5cclxuICAgICAgLy9UT0RPOiB1cGRhdGUgYW5pbWF0aW9uIHRvdGFsIHRpbWUgd2hlbiBsb2FkaW5nIGEgZGlmZmVyZW50IGFuaW1hdGlvbj9cclxuICAgICAgdGhpcy5hbmltYXRpb24/LmNhbGN1bGF0ZVRvdGFsVGltZSgpO1xyXG5cclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9SRU1PVkUsICgpID0+IHRoaXMuYWN0aXZhdGUoZmFsc2UpKTtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9BREQsICgpID0+IHtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DSElMRF9SRU1PVkUsICgpID0+IHRoaXMuYWN0aXZhdGUoZmFsc2UpKTtcclxuICAgICAgICB0aGlzLmFjdGl2YXRlKHRydWUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHNjYWxlKF9zY2FsZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NjYWxlID0gX3NjYWxlO1xyXG4gICAgICB0aGlzLnVwZGF0ZVNjYWxlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzY2FsZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHNhbXBsZSB0aW1lIG9mIHRoZSBhbmltYXRpb25cclxuICAgICAqL1xyXG4gICAgIHB1YmxpYyBnZXQgdGltZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jdGltZUxvY2FsLmdldCgpICUgdGhpcy5hbmltYXRpb24udG90YWxUaW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhY3RpdmF0ZShfb246IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgc3VwZXIuYWN0aXZhdGUoX29uKTtcclxuICAgICAgaWYgKCF0aGlzLm5vZGUpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgdGhpcy5hY3RpdmF0ZUxpc3RlbmVycyhfb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSnVtcHMgdG8gYSBjZXJ0YWluIHRpbWUgaW4gdGhlIGFuaW1hdGlvbiB0byBwbGF5IGZyb20gdGhlcmUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBqdW1wVG8oX3RpbWU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLiN0aW1lTG9jYWwuc2V0KF90aW1lKTtcclxuICAgICAgdGhpcy4jcHJldmlvdXMgPSBfdGltZTtcclxuICAgICAgX3RpbWUgPSBfdGltZSAlIHRoaXMuYW5pbWF0aW9uLnRvdGFsVGltZTtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB0aGlzLmFuaW1hdGlvbi5nZXRTdGF0ZShfdGltZSwgdGhpcy5hbmltYXRpb24uY2FsY3VsYXRlRGlyZWN0aW9uKF90aW1lLCB0aGlzLnBsYXltb2RlKSwgdGhpcy5xdWFudGl6YXRpb24pO1xyXG4gICAgICB0aGlzLm5vZGUuYXBwbHlBbmltYXRpb24obXV0YXRvcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBKdW1wcyB0byBhIGNlcnRhaW4gbGFiZWwgaW4gdGhlIGFuaW1hdGlvbiBpZiBkZWZpbmVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBqdW1wVG9MYWJlbChfbGFiZWw6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICBsZXQgdGltZTogbnVtYmVyID0gdGhpcy5hbmltYXRpb24ubGFiZWxzW19sYWJlbF07XHJcbiAgICAgIGlmICh0aW1lKVxyXG4gICAgICAgIHRoaXMuanVtcFRvKHRpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9yY2VzIGFuIHVwZGF0ZSBvZiB0aGUgYW5pbWF0aW9uIGZyb20gb3V0c2lkZS4gVXNlZCBpbiB0aGUgVmlld0FuaW1hdGlvbi4gU2hvdWxkbid0IGJlIHVzZWQgZHVyaW5nIHRoZSBnYW1lLlxyXG4gICAgICogQHBhcmFtIF90aW1lIHRoZSAodW5zY2FsZWQpIHRpbWUgdG8gdXBkYXRlIHRoZSBhbmltYXRpb24gd2l0aC5cclxuICAgICAqIEByZXR1cm5zIHRoZSBNdXRhdG9yIGZvciBBbmltYXRpb24uIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXBkYXRlQW5pbWF0aW9uKF90aW1lOiBudW1iZXIpOiBNdXRhdG9yIHtcclxuICAgICAgdGhpcy4jcHJldmlvdXMgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUFuaW1hdGlvbkxvb3AobnVsbCwgX3RpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiB0cmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7fTtcclxuICAgICAgc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmlkQW5pbWF0aW9uID0gdGhpcy5hbmltYXRpb24uaWRSZXNvdXJjZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5wbGF5bW9kZSA9IHRoaXMucGxheW1vZGU7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ucXVhbnRpemF0aW9uID0gdGhpcy5xdWFudGl6YXRpb247XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uc2NhbGUgPSB0aGlzLnNjYWxlO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnNjYWxlV2l0aEdhbWVUaW1lID0gdGhpcy5zY2FsZVdpdGhHYW1lVGltZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5hbmltYXRlSW5FZGl0b3IgPSB0aGlzLmFuaW1hdGVJbkVkaXRvcjtcclxuXHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgdGhpcy5hbmltYXRpb24gPSA8QW5pbWF0aW9uPmF3YWl0IFByb2plY3QuZ2V0UmVzb3VyY2UoX3NlcmlhbGl6YXRpb24uaWRBbmltYXRpb24pO1xyXG4gICAgICB0aGlzLnBsYXltb2RlID0gX3NlcmlhbGl6YXRpb24ucGxheW1vZGU7XHJcbiAgICAgIHRoaXMucXVhbnRpemF0aW9uID0gX3NlcmlhbGl6YXRpb24ucXVhbnRpemF0aW9uO1xyXG4gICAgICB0aGlzLnNjYWxlID0gX3NlcmlhbGl6YXRpb24uc2NhbGU7XHJcbiAgICAgIHRoaXMuc2NhbGVXaXRoR2FtZVRpbWUgPSBfc2VyaWFsaXphdGlvbi5zY2FsZVdpdGhHYW1lVGltZTtcclxuICAgICAgdGhpcy5hbmltYXRlSW5FZGl0b3IgPSBfc2VyaWFsaXphdGlvbi5hbmltYXRlSW5FZGl0b3I7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvcik7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLmFuaW1hdGVJbkVkaXRvcikgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbigwKTtcclxuICAgICAgICB0aGlzLmFjdGl2YXRlTGlzdGVuZXJzKHRoaXMuYWN0aXZlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yQXR0cmlidXRlVHlwZXMoX211dGF0b3I6IE11dGF0b3IpOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMge1xyXG4gICAgICBsZXQgdHlwZXM6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyA9IHN1cGVyLmdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcik7XHJcbiAgICAgIGlmICh0eXBlcy5wbGF5bW9kZSlcclxuICAgICAgICB0eXBlcy5wbGF5bW9kZSA9IEFOSU1BVElPTl9QTEFZTU9ERTtcclxuICAgICAgaWYgKHR5cGVzLnF1YW50aXphdGlvbilcclxuICAgICAgICB0eXBlcy5xdWFudGl6YXRpb24gPSBBTklNQVRJT05fUVVBTlRJWkFUSU9OO1xyXG4gICAgICByZXR1cm4gdHlwZXM7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcml2YXRlIGFjdGl2YXRlTGlzdGVuZXJzKF9vbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICBpZiAoX29uICYmIChQcm9qZWN0Lm1vZGUgIT0gTU9ERS5FRElUT1IgfHwgUHJvamVjdC5tb2RlID09IE1PREUuRURJVE9SICYmIHRoaXMuYW5pbWF0ZUluRWRpdG9yKSkge1xyXG4gICAgICAgIFRpbWUuZ2FtZS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULlRJTUVfU0NBTEVELCB0aGlzLnVwZGF0ZVNjYWxlKTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5SRU5ERVJfUFJFUEFSRSwgdGhpcy51cGRhdGVBbmltYXRpb25Mb29wKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBUaW1lLmdhbWUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5USU1FX1NDQUxFRCwgdGhpcy51cGRhdGVTY2FsZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuUkVOREVSX1BSRVBBUkUsIHRoaXMudXBkYXRlQW5pbWF0aW9uTG9vcCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gdXBkYXRlQW5pbWF0aW9uXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIEFuaW1hdGlvbi5cclxuICAgICAqIFVzZXMgdGhlIGJ1aWx0LWluIHRpbWUgdW5sZXNzIGEgZGlmZmVyZW50IHRpbWUgaXMgc3BlY2lmaWVkLlxyXG4gICAgICogTWF5IGFsc28gYmUgY2FsbGVkIGZyb20gdXBkYXRlQW5pbWF0aW9uKCkuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgdXBkYXRlQW5pbWF0aW9uTG9vcCA9IChfZTogRXZlbnQsIF90aW1lPzogbnVtYmVyKTogTXV0YXRvciA9PiB7XHJcbiAgICAgIGlmICh0aGlzLmFuaW1hdGlvbi50b3RhbFRpbWUgPT0gMCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICBsZXQgdGltZTogbnVtYmVyID0gX3RpbWUgfHwgX3RpbWUgPT09IDAgPyBfdGltZSA6IHRoaXMuI3RpbWVMb2NhbC5nZXQoKTtcclxuICAgICAgaWYgKHRoaXMucXVhbnRpemF0aW9uID09IEFOSU1BVElPTl9RVUFOVElaQVRJT04uRlJBTUVTKSB7XHJcbiAgICAgICAgdGltZSA9IHRoaXMuI3ByZXZpb3VzICsgKDEwMDAgLyB0aGlzLmFuaW1hdGlvbi5mcHMpO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBkaXJlY3Rpb246IG51bWJlciA9IHRoaXMuYW5pbWF0aW9uLmNhbGN1bGF0ZURpcmVjdGlvbih0aW1lLCB0aGlzLnBsYXltb2RlKTtcclxuICAgICAgdGltZSA9IHRoaXMuYW5pbWF0aW9uLmdldE1vZGFsVGltZSh0aW1lLCB0aGlzLnBsYXltb2RlLCB0aGlzLiN0aW1lTG9jYWwuZ2V0T2Zmc2V0KCkpO1xyXG4gICAgICB0aGlzLmV4ZWN1dGVFdmVudHModGhpcy5hbmltYXRpb24uZ2V0RXZlbnRzVG9GaXJlKHRoaXMuI3ByZXZpb3VzLCB0aW1lLCB0aGlzLnF1YW50aXphdGlvbiwgZGlyZWN0aW9uKSk7XHJcblxyXG4gICAgICBpZiAodGhpcy4jcHJldmlvdXMgIT0gdGltZSkge1xyXG4gICAgICAgIHRoaXMuI3ByZXZpb3VzID0gdGltZTtcclxuICAgICAgICB0aW1lID0gdGltZSAlIHRoaXMuYW5pbWF0aW9uLnRvdGFsVGltZTtcclxuICAgICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHRoaXMuYW5pbWF0aW9uLmdldFN0YXRlKHRpbWUsIGRpcmVjdGlvbiwgdGhpcy5xdWFudGl6YXRpb24pO1xyXG4gICAgICAgIGlmICh0aGlzLm5vZGUpIHtcclxuICAgICAgICAgIHRoaXMubm9kZS5hcHBseUFuaW1hdGlvbihtdXRhdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlcyBhbGwgY3VzdG9tIGV2ZW50cyB0aGUgQW5pbWF0aW9uIHNob3VsZCBoYXZlIGZpcmVkIGJldHdlZW4gdGhlIGxhc3QgZnJhbWUgYW5kIHRoZSBjdXJyZW50IGZyYW1lLlxyXG4gICAgICogQHBhcmFtIGV2ZW50cyBhIGxpc3Qgb2YgbmFtZXMgb2YgY3VzdG9tIGV2ZW50cyB0byBmaXJlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZXhlY3V0ZUV2ZW50cyhldmVudHM6IHN0cmluZ1tdKTogdm9pZCB7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KGV2ZW50c1tpXSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBzY2FsZSBvZiB0aGUgYW5pbWF0aW9uIGlmIHRoZSB1c2VyIGNoYW5nZXMgaXQgb3IgaWYgdGhlIGdsb2JhbCBnYW1lIHRpbWVyIGNoYW5nZWQgaXRzIHNjYWxlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHVwZGF0ZVNjYWxlID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICBsZXQgbmV3U2NhbGU6IG51bWJlciA9IHRoaXMuI3NjYWxlO1xyXG4gICAgICBpZiAodGhpcy5zY2FsZVdpdGhHYW1lVGltZSlcclxuICAgICAgICBuZXdTY2FsZSAqPSBUaW1lLmdhbWUuZ2V0U2NhbGUoKTtcclxuICAgICAgdGhpcy4jdGltZUxvY2FsLnNldFNjYWxlKG5ld1NjYWxlKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBlbnVtIEFVRElPX1BBTk5FUiB7XHJcbiAgICBDT05FX0lOTkVSX0FOR0xFID0gXCJjb25lSW5uZXJBbmdsZVwiLFxyXG4gICAgQ09ORV9PVVRFUl9BTkdMRSA9IFwiY29uZU91dGVyQW5nbGVcIixcclxuICAgIENPTkVfT1VURVJfR0FJTiA9IFwiY29uZU91dGVyR2FpblwiLFxyXG4gICAgRElTVEFOQ0VfTU9ERUwgPSBcImRpc3RhbmNlTW9kZWxcIixcclxuICAgIE1BWF9ESVNUQU5DRSA9IFwibWF4RGlzdGFuY2VcIixcclxuICAgIFBBTk5JTkdfTU9ERUwgPSBcInBhbm5pbmdNb2RlbFwiLFxyXG4gICAgUkVGX0RJU1RBTkNFID0gXCJyZWZEaXN0YW5jZVwiLFxyXG4gICAgUk9MTE9GRl9GQUNUT1IgPSBcInJvbGxvZmZGYWN0b3JcIlxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGVudW0gQVVESU9fTk9ERV9UWVBFIHtcclxuICAgIFNPVVJDRSwgUEFOTkVSLCBHQUlOXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCdWlsZHMgYSBtaW5pbWFsIGF1ZGlvIGdyYXBoIChieSBkZWZhdWx0IGluIHtAbGluayBBdWRpb01hbmFnZXJ9LmRlZmF1bHQpIGFuZCBzeW5jaHJvbml6ZXMgaXQgd2l0aCB0aGUgY29udGFpbmluZyB7QGxpbmsgTm9kZX1cclxuICAgKiBgYGBwbGFpbnRleHRcclxuICAgKiDilIwgQXVkaW9NYW5hZ2VyKC5kZWZhdWx0KSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJBcclxuICAgKiDilIIg4pSMIENvbXBvbmVudEF1ZGlvIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgICAgICAgICDilIJcclxuICAgKiDilIIg4pSCICAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUkCDilIIg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSQIOKUgiAgXHJcbiAgICog4pSCIOKUgiAgICDilIJzb3VyY2XilIIg4oaSIOKUgnBhbm5lcuKUgiDihpIg4pSCIGdhaW4g4pSCIOKGkiDilIIgZ2FpbiDilIIg4pSCXHJcbiAgICog4pSCIOKUgiAgICDilJTilIDilIDilIDilIDilIDilIDilJggICDilJTilIDilIDilIDilIDilIDilIDilJggICDilJTilIDilIDilIDilIDilIDilIDilJgg4pSCIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUmCDilIIgIFxyXG4gICAqIOKUgiDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggICAgICAgICAg4pSCXHJcbiAgICog4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYXHJcbiAgICogYGBgXHJcbiAgICogQGF1dGhvcnMgVGhvbWFzIERvcm5lciwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29tcG9uZW50QXVkaW8gZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudEF1ZGlvKTtcclxuICAgIC8qKiBwbGFjZXMgYW5kIGRpcmVjdHMgdGhlIHBhbm5lciByZWxhdGl2ZSB0byB0aGUgd29ybGQgdHJhbnNmb3JtIG9mIHRoZSB7QGxpbmsgTm9kZX0gICovXHJcbiAgICBwdWJsaWMgbXR4UGl2b3Q6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG5cclxuICAgIHByb3RlY3RlZCBzaW5nbGV0b246IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwcml2YXRlIGF1ZGlvOiBBdWRpbztcclxuICAgIHByaXZhdGUgZ2FpbjogR2Fpbk5vZGU7XHJcbiAgICBwcml2YXRlIHBhbm5lcjogUGFubmVyTm9kZTtcclxuICAgIHByaXZhdGUgc291cmNlOiBBdWRpb0J1ZmZlclNvdXJjZU5vZGU7XHJcbiAgICBwcml2YXRlIGF1ZGlvTWFuYWdlcjogQXVkaW9NYW5hZ2VyO1xyXG4gICAgcHJpdmF0ZSBwbGF5aW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIGxpc3RlbmVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9hdWRpbzogQXVkaW8gPSBudWxsLCBfbG9vcDogYm9vbGVhbiA9IGZhbHNlLCBfc3RhcnQ6IGJvb2xlYW4gPSBmYWxzZSwgX2F1ZGlvTWFuYWdlcjogQXVkaW9NYW5hZ2VyID0gQXVkaW9NYW5hZ2VyLmRlZmF1bHQpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5pbnN0YWxsKF9hdWRpb01hbmFnZXIpO1xyXG4gICAgICB0aGlzLmNyZWF0ZVNvdXJjZShfYXVkaW8sIF9sb29wKTtcclxuXHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfQURELCB0aGlzLmhhbmRsZUF0dGFjaCk7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfUkVNT1ZFLCB0aGlzLmhhbmRsZUF0dGFjaCk7XHJcblxyXG4gICAgICBpZiAoX3N0YXJ0KVxyXG4gICAgICAgIHRoaXMucGxheShfc3RhcnQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgc2V0IHZvbHVtZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmdhaW4uZ2Fpbi52YWx1ZSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHZvbHVtZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5nYWluLmdhaW4udmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBsb29wKF9vbjogYm9vbGVhbikge1xyXG4gICAgICB0aGlzLnNvdXJjZS5sb29wID0gX29uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbG9vcCgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmxvb3A7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBwbGF5YmFja1JhdGUoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcGxheWJhY2tSYXRlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNQbGF5aW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5wbGF5aW5nO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBpc0F0dGFjaGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5ub2RlICE9IG51bGw7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IGlzTGlzdGVuZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRBdWRpbyhfYXVkaW86IEF1ZGlvKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuY3JlYXRlU291cmNlKF9hdWRpbywgdGhpcy5zb3VyY2UubG9vcCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0QXVkaW8oKTogQXVkaW8ge1xyXG4gICAgICByZXR1cm4gdGhpcy5hdWRpbztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgcHJvcGVydHkgb2YgdGhlIHBhbm5lciB0byB0aGUgZ2l2ZW4gdmFsdWUuIFVzZSB0byBtYW5pcHVsYXRlIHJhbmdlIGFuZCByb2xsb2ZmIGV0Yy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFBhbm5lcihfcHJvcGVydHk6IEFVRElPX1BBTk5FUiwgX3ZhbHVlOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgUmVmbGVjdC5zZXQodGhpcy5wYW5uZXIsIF9wcm9wZXJ0eSwgX3ZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiBtYXkgYmUgdXNlZCBmb3Igc2VyaWFsaXphdGlvbiBvZiBBdWRpb05vZGVzXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvck9mTm9kZShfdHlwZTogQVVESU9fTk9ERV9UWVBFKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBub2RlOiBBdWRpb05vZGUgPSB0aGlzLmdldEF1ZGlvTm9kZShfdHlwZSk7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gZ2V0TXV0YXRvck9mQXJiaXRyYXJ5KG5vZGUpO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNwZWNpZmllZCBBdWRpb05vZGUgb2YgdGhlIHN0YW5kYXJkIGdyYXBoIGZvciBmdXJ0aGVyIG1hbmlwdWxhdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QXVkaW9Ob2RlKF90eXBlOiBBVURJT19OT0RFX1RZUEUpOiBBdWRpb05vZGUge1xyXG4gICAgICBzd2l0Y2ggKF90eXBlKSB7XHJcbiAgICAgICAgY2FzZSBBVURJT19OT0RFX1RZUEUuU09VUkNFOiByZXR1cm4gdGhpcy5zb3VyY2U7XHJcbiAgICAgICAgY2FzZSBBVURJT19OT0RFX1RZUEUuUEFOTkVSOiByZXR1cm4gdGhpcy5wYW5uZXI7XHJcbiAgICAgICAgY2FzZSBBVURJT19OT0RFX1RZUEUuR0FJTjogcmV0dXJuIHRoaXMuZ2FpbjtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgb3Igc3RvcCBwbGF5aW5nIHRoZSBhdWRpb1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcGxheShfb246IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgaWYgKF9vbikge1xyXG4gICAgICAgIGlmICh0aGlzLmF1ZGlvLmlzUmVhZHkpIHtcclxuICAgICAgICAgIHRoaXMuY3JlYXRlU291cmNlKHRoaXMuYXVkaW8sIHRoaXMuc291cmNlLmxvb3ApO1xyXG4gICAgICAgICAgdGhpcy5zb3VyY2Uuc3RhcnQoMCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5hdWRpby5hZGRFdmVudExpc3RlbmVyKEVWRU5UX0FVRElPLlJFQURZLCB0aGlzLmhuZEF1ZGlvUmVhZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNvdXJjZS5hZGRFdmVudExpc3RlbmVyKEVWRU5UX0FVRElPLkVOREVELCB0aGlzLmhuZEF1ZGlvRW5kZWQpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdGhpcy5zb3VyY2Uuc3RvcCgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcjogdW5rbm93bikgeyAvKiBjYXRjaCBleGNlcHRpb24gd2hlbiBzb3VyY2UgaGFzbid0IGJlZW4gc3RhcnRlZC4uLiAqLyB9XHJcbiAgICAgIHRoaXMucGxheWluZyA9IF9vbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluc2VydHMgQXVkaW9Ob2RlcyBiZXR3ZWVuIHRoZSBwYW5uZXIgYW5kIHRoZSBsb2NhbCBnYWluIG9mIHRoaXMge0BsaW5rIENvbXBvbmVudEF1ZGlvfVxyXG4gICAgICogX2lucHV0IGFuZCBfb3V0cHV0IG1heSBiZSB0aGUgc2FtZSBBdWRpb05vZGUsIGlmIHRoZXJlIGlzIG9ubHkgb25lIHRvIGluc2VydCxcclxuICAgICAqIG9yIG1heSBoYXZlIG11bHRpcGxlIEF1ZGlvTm9kZSBiZXR3ZWVuIHRoZW0gdG8gY3JlYXRlIGFuIGVmZmVjdC1ncmFwaC5cXFxyXG4gICAgICogTm90ZSB0aGF0IHtAbGluayBDb21wb25lbnRBdWRpb30gZG9lcyBub3Qga2VlcCB0cmFjayBvZiBpbnNlcnRlZCBBdWRpb05vZGVzIVxyXG4gICAgICogYGBgcGxhaW50ZXh0XHJcbiAgICAgKiDilIwgQXVkaW9NYW5hZ2VyKC5kZWZhdWx0KSDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJBcclxuICAgICAqIOKUgiDilIwgQ29tcG9uZW50QXVkaW8g4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQICAgICAgICAgIOKUglxyXG4gICAgICog4pSCIOKUgiAgICDilIzilIDilIDilIDilIDilIDilIDilJAgICDilIzilIDilIDilIDilIDilIDilIDilJAgICDilIzilIDilIDilIDilIDilIDilIDilJAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSQIOKUgiDilIzilIDilIDilIDilIDilIDilIDilJAg4pSCICBcclxuICAgICAqIOKUgiDilIIgICAg4pSCc291cmNl4pSCIOKGkiDilIJwYW5uZXLilIIg4oaSIOKUgl9pbnB1dOKUgiDihpIgLi4uICDihpIg4pSCX291dHB1dOKUgiDihpIg4pSCIGdhaW4g4pSCIOKGkiDilIIgZ2FpbiDilIIg4pSCXHJcbiAgICAgKiDilIIg4pSCICAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgICAgICAgICDilJTilIDilIDilIDilIDilIDilIDilIDilJggICDilJTilIDilIDilIDilIDilIDilIDilJgg4pSCIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUmCDilIIgIFxyXG4gICAgICog4pSCIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgICAgICAgICDilIJcclxuICAgICAqIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnNlcnRBdWRpb05vZGVzKF9pbnB1dDogQXVkaW9Ob2RlLCBfb3V0cHV0OiBBdWRpb05vZGUpOiB2b2lkIHtcclxuICAgICAgdGhpcy5wYW5uZXIuZGlzY29ubmVjdCgwKTtcclxuICAgICAgaWYgKCFfaW5wdXQgJiYgIV9vdXRwdXQpIHtcclxuICAgICAgICB0aGlzLnBhbm5lci5jb25uZWN0KHRoaXMuZ2Fpbik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucGFubmVyLmNvbm5lY3QoX2lucHV0KTtcclxuICAgICAgX291dHB1dC5jb25uZWN0KHRoaXMuZ2Fpbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3RpdmF0ZSBvdmVycmlkZS4gQ29ubmVjdHMgb3IgZGlzY29ubmVjdHMgQXVkaW9Ob2Rlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWN0aXZhdGUoX29uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLmFjdGl2YXRlKF9vbik7XHJcbiAgICAgIHRoaXMudXBkYXRlQ29ubmVjdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29ubmVjdHMgdGhpcyBjb21wb25lbnRzIGdhaW4tbm9kZSB0byB0aGUgZ2FpbiBub2RlIG9mIHRoZSBBdWRpb01hbmFnZXIgdGhpcyBjb21wb25lbnQgcnVucyBvbi5cclxuICAgICAqIE9ubHkgY2FsbCB0aGlzIG1ldGhvZCBpZiB0aGUgY29tcG9uZW50IGlzIG5vdCBhdHRhY2hlZCB0byBhIHtAbGluayBOb2RlfSBidXQgbmVlZHMgdG8gYmUgaGVhcmQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25uZWN0KF9vbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICBpZiAoX29uKVxyXG4gICAgICAgIHRoaXMuZ2Fpbi5jb25uZWN0KHRoaXMuYXVkaW9NYW5hZ2VyLmdhaW4pO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5nYWluLmRpc2Nvbm5lY3QodGhpcy5hdWRpb01hbmFnZXIuZ2Fpbik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmlkUmVzb3VyY2UgPSB0aGlzLmF1ZGlvLmlkUmVzb3VyY2U7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ucGxheWluZyA9IHRoaXMucGxheWluZztcclxuICAgICAgc2VyaWFsaXphdGlvbi5sb29wID0gdGhpcy5sb29wO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnZvbHVtZSA9IHRoaXMudm9sdW1lO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmdldE11dGF0b3JPZk5vZGUoQVVESU9fTk9ERV9UWVBFLlBBTk5FUikpO1xyXG4gICAgICAvLyBUT0RPOiBzZXJpYWxpemUgcGFubmVyIHBhcmFtZXRlcnNcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGxldCBhdWRpbzogQXVkaW8gPSA8QXVkaW8+YXdhaXQgUHJvamVjdC5nZXRSZXNvdXJjZShfc2VyaWFsaXphdGlvbi5pZFJlc291cmNlKTtcclxuICAgICAgdGhpcy5jcmVhdGVTb3VyY2UoYXVkaW8sIF9zZXJpYWxpemF0aW9uLmxvb3ApO1xyXG4gICAgICB0aGlzLnZvbHVtZSA9IF9zZXJpYWxpemF0aW9uLnZvbHVtZTtcclxuICAgICAgdGhpcy5wbGF5KF9zZXJpYWxpemF0aW9uLnBsYXlpbmcpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKHRydWUpO1xyXG4gICAgICBsZXQgYXVkaW86IE11dGF0b3IgPSBtdXRhdG9yLmF1ZGlvO1xyXG4gICAgICBkZWxldGUgbXV0YXRvci5hdWRpbzsgLy8ganVzdCB0byByZWFycmFuZ2UgaW4gaW50ZXJmYWNlcy4uLlxyXG4gICAgICBtdXRhdG9yLmxvb3AgPSB0aGlzLmxvb3A7XHJcbiAgICAgIG11dGF0b3Iudm9sdW1lID0gdGhpcy52b2x1bWU7XHJcbiAgICAgIG11dGF0b3IuYXVkaW8gPSBhdWRpbzsgLy8uLi4gc28gYXVkaW8gY29tZXMgbGFzdFxyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyAgIGF3YWl0IHN1cGVyLm11dGF0ZShfbXV0YXRvcik7XHJcbiAgICAvLyAgIC8vIHRoaXMudm9sdW1lID0gX211dGF0b3Iudm9sdW1lO1xyXG4gICAgLy8gICAvLyB0aGlzLmxvb3AgPSBfbXV0YXRvci5sb29wO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLnJlZHVjZU11dGF0b3IoX211dGF0b3IpO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IubGlzdGVuZWQ7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBobmRBdWRpb1JlYWR5OiBFdmVudExpc3RlbmVyID0gKF9ldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgRGVidWcuZnVkZ2UoXCJBdWRpbyBzdGFydFwiLCBSZWZsZWN0LmdldChfZXZlbnQudGFyZ2V0LCBcInVybFwiKSk7XHJcbiAgICAgIGlmICh0aGlzLnBsYXlpbmcpXHJcbiAgICAgICAgdGhpcy5wbGF5KHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaG5kQXVkaW9FbmRlZDogRXZlbnRMaXN0ZW5lciA9IChfZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgIC8vIERlYnVnLmZ1ZGdlKFwiQXVkaW8gZW5kZWRcIiwgUmVmbGVjdC5nZXQoX2V2ZW50LnRhcmdldCwgXCJ1cmxcIikpO1xyXG4gICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluc3RhbGwoX2F1ZGlvTWFuYWdlcjogQXVkaW9NYW5hZ2VyID0gQXVkaW9NYW5hZ2VyLmRlZmF1bHQpOiB2b2lkIHtcclxuICAgICAgbGV0IGFjdGl2ZTogYm9vbGVhbiA9IHRoaXMuaXNBY3RpdmU7XHJcbiAgICAgIHRoaXMuYWN0aXZhdGUoZmFsc2UpO1xyXG4gICAgICB0aGlzLmF1ZGlvTWFuYWdlciA9IF9hdWRpb01hbmFnZXI7XHJcbiAgICAgIHRoaXMucGFubmVyID0gX2F1ZGlvTWFuYWdlci5jcmVhdGVQYW5uZXIoKTtcclxuICAgICAgdGhpcy5nYWluID0gX2F1ZGlvTWFuYWdlci5jcmVhdGVHYWluKCk7XHJcbiAgICAgIHRoaXMucGFubmVyLmNvbm5lY3QodGhpcy5nYWluKTtcclxuICAgICAgdGhpcy5nYWluLmNvbm5lY3QoX2F1ZGlvTWFuYWdlci5nYWluKTtcclxuICAgICAgdGhpcy5hY3RpdmF0ZShhY3RpdmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlU291cmNlKF9hdWRpbzogQXVkaW8sIF9sb29wOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgIGlmICh0aGlzLnNvdXJjZSkge1xyXG4gICAgICAgIHRoaXMuc291cmNlLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICB0aGlzLnNvdXJjZS5idWZmZXIgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc291cmNlID0gdGhpcy5hdWRpb01hbmFnZXIuY3JlYXRlQnVmZmVyU291cmNlKCk7XHJcbiAgICAgIHRoaXMuc291cmNlLmNvbm5lY3QodGhpcy5wYW5uZXIpO1xyXG5cclxuICAgICAgaWYgKF9hdWRpbykge1xyXG4gICAgICAgIHRoaXMuYXVkaW8gPSBfYXVkaW87XHJcbiAgICAgICAgdGhpcy5zb3VyY2UuYnVmZmVyID0gX2F1ZGlvLmJ1ZmZlcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zb3VyY2UubG9vcCA9IF9sb29wO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ29ubmVjdGlvbigpOiB2b2lkIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB0aGlzLmNvbm5lY3QodGhpcy5pc0FjdGl2ZSAmJiB0aGlzLmlzQXR0YWNoZWQgJiYgdGhpcy5saXN0ZW5lZCk7XHJcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgICAgIC8vIG5vcFxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogQXV0b21hdGljYWxseSBjb25uZWN0cy9kaXNjb25uZWN0cyBBdWRpb05vZGVzIHdoZW4gYWRkaW5nL3JlbW92aW5nIHRoaXMgY29tcG9uZW50IHRvL2Zyb20gYSBub2RlLiBcclxuICAgICAqIFRoZXJlZm9yZSB1bnVzZWQgQXVkaW9Ob2RlcyBtYXkgYmUgZ2FyYmFnZSBjb2xsZWN0ZWQgd2hlbiBhbiB1bnVzZWQgY29tcG9uZW50IGlzIGNvbGxlY3RlZFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZUF0dGFjaCA9IChfZXZlbnQ6IEV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgIC8vIERlYnVnLmxvZyhfZXZlbnQpO1xyXG4gICAgICBpZiAoX2V2ZW50LnR5cGUgPT0gRVZFTlQuQ09NUE9ORU5UX0FERCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKEVWRU5UX0FVRElPLkNISUxEX0FQUEVORCwgdGhpcy5oYW5kbGVHcmFwaCwgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfQVVESU8uQ0hJTERfUkVNT1ZFLCB0aGlzLmhhbmRsZUdyYXBoLCB0cnVlKTtcclxuICAgICAgICB0aGlzLm5vZGUuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVF9BVURJTy5VUERBVEUsIHRoaXMudXBkYXRlLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVkID0gdGhpcy5ub2RlLmlzRGVzY2VuZGFudE9mKEF1ZGlvTWFuYWdlci5kZWZhdWx0LmdldEdyYXBoTGlzdGVuaW5nVG8oKSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlRfQVVESU8uQ0hJTERfQVBQRU5ELCB0aGlzLmhhbmRsZUdyYXBoLCB0cnVlKTtcclxuICAgICAgICB0aGlzLm5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVF9BVURJTy5DSElMRF9SRU1PVkUsIHRoaXMuaGFuZGxlR3JhcGgsIHRydWUpO1xyXG4gICAgICAgIHRoaXMubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5UX0FVRElPLlVQREFURSwgdGhpcy51cGRhdGUsIHRydWUpO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZWQgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnVwZGF0ZUNvbm5lY3Rpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBBdXRvbWF0aWNhbGx5IGNvbm5lY3RzL2Rpc2Nvbm5lY3RzIEF1ZGlvTm9kZXMgd2hlbiBhcHBlbmRpbmcvcmVtb3ZpbmcgdGhlIEZVREdFLWdyYXBoIHRoZSBjb21wb25lbnQgaXMgaW4uIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGhhbmRsZUdyYXBoID0gKF9ldmVudDogRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgLy8gRGVidWcubG9nKF9ldmVudCk7XHJcbiAgICAgIHRoaXMubGlzdGVuZWQgPSAoX2V2ZW50LnR5cGUgPT0gRVZFTlRfQVVESU8uQ0hJTERfQVBQRU5EKTtcclxuICAgICAgdGhpcy51cGRhdGVDb25uZWN0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogVXBkYXRlcyB0aGUgcGFubmVyIG5vZGUsIGl0cyBwb3NpdGlvbiBhbmQgZGlyZWN0aW9uLCB1c2luZyB0aGUgd29ybGRtYXRyaXggb2YgdGhlIGNvbnRhaW5lciBhbmQgdGhlIHBpdm90IG9mIHRoaXMgY29tcG9uZW50LiBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB1cGRhdGUgPSAoX2V2ZW50OiBFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICBsZXQgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSB0aGlzLm10eFBpdm90O1xyXG4gICAgICBpZiAodGhpcy5ub2RlKVxyXG4gICAgICAgIG10eFJlc3VsdCA9IE1hdHJpeDR4NC5NVUxUSVBMSUNBVElPTih0aGlzLm5vZGUubXR4V29ybGQsIHRoaXMubXR4UGl2b3QpO1xyXG5cclxuICAgICAgLy8gRGVidWcubG9nKG10eFJlc3VsdC50b1N0cmluZygpKTtcclxuICAgICAgbGV0IHBvc2l0aW9uOiBWZWN0b3IzID0gbXR4UmVzdWx0LnRyYW5zbGF0aW9uO1xyXG4gICAgICBsZXQgZm9yd2FyZDogVmVjdG9yMyA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oVmVjdG9yMy5aKDEpLCBtdHhSZXN1bHQsIGZhbHNlKTtcclxuXHJcbiAgICAgIHRoaXMucGFubmVyLnBvc2l0aW9uWC52YWx1ZSA9IHBvc2l0aW9uLng7XHJcbiAgICAgIHRoaXMucGFubmVyLnBvc2l0aW9uWS52YWx1ZSA9IHBvc2l0aW9uLnk7XHJcbiAgICAgIHRoaXMucGFubmVyLnBvc2l0aW9uWi52YWx1ZSA9IHBvc2l0aW9uLno7XHJcblxyXG4gICAgICB0aGlzLnBhbm5lci5vcmllbnRhdGlvblgudmFsdWUgPSBmb3J3YXJkLng7XHJcbiAgICAgIHRoaXMucGFubmVyLm9yaWVudGF0aW9uWS52YWx1ZSA9IGZvcndhcmQueTtcclxuICAgICAgdGhpcy5wYW5uZXIub3JpZW50YXRpb25aLnZhbHVlID0gZm9yd2FyZC56O1xyXG5cclxuICAgICAgUmVjeWNsZXIuc3RvcmUoZm9yd2FyZCk7XHJcbiAgICAgIC8vIFRPRE86IGV4YW1pbmUgd2h5IHRoZSBmb2xsb3dpbmcgcHJvZHVjZXMgZXJyb25lb3VzIHJlc3VsdHMsIHNlZSB0ZXN0IFwiU3BhdGlhbCBBdWRpb1wiXHJcbiAgICAgIGlmICh0aGlzLm5vZGUpXHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUobXR4UmVzdWx0KTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBTZXJ2ZXMgdG8gc2V0IHRoZSBzcGF0aWFsIGxvY2F0aW9uIGFuZCBvcmllbnRhdGlvbiBvZiBBdWRpb0xpc3RlbmVycyByZWxhdGl2ZSB0byB0aGVcclxuICAgKiB3b3JsZCB0cmFuc2Zvcm0gb2YgdGhlIHtAbGluayBOb2RlfSBpdCBpcyBhdHRhY2hlZCB0by5cclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRBdWRpb0xpc3RlbmVyIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRBdWRpb0xpc3RlbmVyKTtcclxuICAgIHB1YmxpYyBtdHhQaXZvdDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBwb3NpdGlvbiBhbmQgb3JpZW50YXRpb24gb2YgdGhlIGdpdmVuIEF1ZGlvTGlzdGVuZXJcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZShfbGlzdGVuZXI6IEF1ZGlvTGlzdGVuZXIpOiB2b2lkIHtcclxuICAgICAgbGV0IG10eFJlc3VsdDogTWF0cml4NHg0ID0gdGhpcy5tdHhQaXZvdDtcclxuICAgICAgaWYgKHRoaXMubm9kZSlcclxuICAgICAgICBtdHhSZXN1bHQgPSBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04odGhpcy5ub2RlLm10eFdvcmxkLCB0aGlzLm10eFBpdm90KTtcclxuXHJcbiAgICAgIC8vIERlYnVnLmxvZyhtdHhSZXN1bHQudG9TdHJpbmcoKSk7XHJcbiAgICAgIGxldCBwb3NpdGlvbjogVmVjdG9yMyA9IG10eFJlc3VsdC50cmFuc2xhdGlvbjtcclxuICAgICAgbGV0IGZvcndhcmQ6IFZlY3RvcjMgPSBWZWN0b3IzLlRSQU5TRk9STUFUSU9OKFZlY3RvcjMuWigxKSwgbXR4UmVzdWx0LCBmYWxzZSk7XHJcbiAgICAgIGxldCB1cDogVmVjdG9yMyA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oVmVjdG9yMy5ZKCksIG10eFJlc3VsdCwgZmFsc2UpO1xyXG4gICAgICBpZiAoX2xpc3RlbmVyLnBvc2l0aW9uWCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBfbGlzdGVuZXIucG9zaXRpb25YLnZhbHVlID0gcG9zaXRpb24ueDtcclxuICAgICAgICBfbGlzdGVuZXIucG9zaXRpb25ZLnZhbHVlID0gcG9zaXRpb24ueTtcclxuICAgICAgICBfbGlzdGVuZXIucG9zaXRpb25aLnZhbHVlID0gcG9zaXRpb24uejtcclxuXHJcbiAgICAgICAgX2xpc3RlbmVyLmZvcndhcmRYLnZhbHVlID0gZm9yd2FyZC54O1xyXG4gICAgICAgIF9saXN0ZW5lci5mb3J3YXJkWS52YWx1ZSA9IGZvcndhcmQueTtcclxuICAgICAgICBfbGlzdGVuZXIuZm9yd2FyZFoudmFsdWUgPSBmb3J3YXJkLno7XHJcblxyXG4gICAgICAgIF9saXN0ZW5lci51cFgudmFsdWUgPSB1cC54O1xyXG4gICAgICAgIF9saXN0ZW5lci51cFkudmFsdWUgPSB1cC55O1xyXG4gICAgICAgIF9saXN0ZW5lci51cFoudmFsdWUgPSB1cC56O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEZpcmVmb3ggc3RpbGwgdXNlcyBkZXByZWNhdGVkIG1ldGhvZHMuIFRPRE86IGRlbGV0ZSBhcyBzb29uIGFzIHBvc3NpYmxlIVxyXG4gICAgICAgIF9saXN0ZW5lci5zZXRQb3NpdGlvbihwb3NpdGlvbi54LCBwb3NpdGlvbi55LCBwb3NpdGlvbi56KTtcclxuICAgICAgICBfbGlzdGVuZXIuc2V0T3JpZW50YXRpb24oZm9yd2FyZC54LCBmb3J3YXJkLnksIGZvcndhcmQueiwgdXAueCwgdXAueSwgdXAueik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGZvcndhcmQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZSh1cCk7XHJcbiAgICAgIGlmICh0aGlzLm5vZGUpXHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUobXR4UmVzdWx0KTtcclxuXHJcbiAgICAgIC8vIERlYnVnLmxvZyhtdHhSZXN1bHQudHJhbnNsYXRpb24udG9TdHJpbmcoKSwgZm9yd2FyZC50b1N0cmluZygpLCB1cC50b1N0cmluZygpKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiLy8gLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21wb25lbnQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBlbnVtIEZJRUxEX09GX1ZJRVcge1xyXG4gICAgSE9SSVpPTlRBTCA9IFwiaG9yaXpvbnRhbFwiLFxyXG4gICAgVkVSVElDQUwgPSBcInZlcnRpY2FsXCIsXHJcbiAgICBESUFHT05BTCA9IFwiZGlhZ29uYWxcIlxyXG4gIH1cclxuICAvKipcclxuICAgKiBEZWZpbmVzIGlkZW50aWZpZXJzIGZvciB0aGUgdmFyaW91cyBwcm9qZWN0aW9ucyBhIGNhbWVyYSBjYW4gcHJvdmlkZS4gIFxyXG4gICAqIFRPRE86IGNoYW5nZSBiYWNrIHRvIG51bWJlciBlbnVtIGlmIHN0cmluZ3Mgbm90IG5lZWRlZFxyXG4gICAqL1xyXG4gIGV4cG9ydCBlbnVtIFBST0pFQ1RJT04ge1xyXG4gICAgQ0VOVFJBTCA9IFwiY2VudHJhbFwiLFxyXG4gICAgT1JUSE9HUkFQSElDID0gXCJvcnRob2dyYXBoaWNcIixcclxuICAgIERJTUVUUklDID0gXCJkaW1ldHJpY1wiLFxyXG4gICAgU1RFUkVPID0gXCJzdGVyZW9cIlxyXG4gIH1cclxuICAvKipcclxuICAgKiBUaGUgY2FtZXJhIGNvbXBvbmVudCBob2xkcyB0aGUgcHJvamVjdGlvbi1tYXRyaXggYW5kIG90aGVyIGRhdGEgbmVlZGVkIHRvIHJlbmRlciBhIHNjZW5lIGZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIHRoZSBub2RlIGl0IGlzIGF0dGFjaGVkIHRvLlxyXG4gICAqIEBhdXRob3JzIEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29tcG9uZW50Q2FtZXJhIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRDYW1lcmEpO1xyXG4gICAgcHVibGljIG10eFBpdm90OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuICAgIHB1YmxpYyBjbHJCYWNrZ3JvdW5kOiBDb2xvciA9IG5ldyBDb2xvcigwLCAwLCAwLCAxKTsgLy8gVGhlIGNvbG9yIG9mIHRoZSBiYWNrZ3JvdW5kIHRoZSBjYW1lcmEgd2lsbCByZW5kZXIuXHJcbiAgICAvL3ByaXZhdGUgb3J0aG9ncmFwaGljOiBib29sZWFuID0gZmFsc2U7IC8vIERldGVybWluZXMgd2hldGhlciB0aGUgaW1hZ2Ugd2lsbCBiZSByZW5kZXJlZCB3aXRoIHBlcnNwZWN0aXZlIG9yIG9ydGhvZ3JhcGhpYyBwcm9qZWN0aW9uLlxyXG4gICAgI210eFdvcmxkVG9WaWV3OiBNYXRyaXg0eDQ7XHJcbiAgICAjbXR4Q2FtZXJhSW52ZXJzZTogTWF0cml4NHg0O1xyXG4gICAgI210eFByb2plY3Rpb246IE1hdHJpeDR4NCA9IG5ldyBNYXRyaXg0eDQ7IC8vIFRoZSBtYXRyaXggdG8gbXVsdGlwbHkgZWFjaCBzY2VuZSBvYmplY3RzIHRyYW5zZm9ybWF0aW9uIGJ5LCB0byBkZXRlcm1pbmUgd2hlcmUgaXQgd2lsbCBiZSBkcmF3bi5cclxuXHJcbiAgICBwcml2YXRlIHByb2plY3Rpb246IFBST0pFQ1RJT04gPSBQUk9KRUNUSU9OLkNFTlRSQUw7XHJcbiAgICBwcml2YXRlIGZpZWxkT2ZWaWV3OiBudW1iZXIgPSA0NTsgLy8gVGhlIGNhbWVyYSdzIHNlbnNvcmFuZ2xlLlxyXG4gICAgcHJpdmF0ZSBhc3BlY3RSYXRpbzogbnVtYmVyID0gMS4wO1xyXG4gICAgcHJpdmF0ZSBkaXJlY3Rpb246IEZJRUxEX09GX1ZJRVcgPSBGSUVMRF9PRl9WSUVXLkRJQUdPTkFMO1xyXG4gICAgcHJpdmF0ZSBuZWFyOiBudW1iZXIgPSAxO1xyXG4gICAgcHJpdmF0ZSBmYXI6IG51bWJlciA9IDIwMDA7XHJcbiAgICBwcml2YXRlIGJhY2tncm91bmRFbmFibGVkOiBib29sZWFuID0gdHJ1ZTsgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0aGUgYmFja2dyb3VuZCBvZiB0aGlzIGNhbWVyYSB3aWxsIGJlIHJlbmRlcmVkLlxyXG4gICAgLy8gVE9ETzogZXhhbWluZSwgaWYgYmFja2dyb3VuZCBzaG91bGQgYmUgYW4gYXR0cmlidXRlIG9mIENhbWVyYSBvciBWaWV3cG9ydFxyXG5cclxuICAgIHB1YmxpYyBnZXQgbXR4V29ybGQoKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IG10eENhbWVyYTogTWF0cml4NHg0ID0gdGhpcy5tdHhQaXZvdC5jbG9uZTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBtdHhDYW1lcmEgPSBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04odGhpcy5ub2RlLm10eFdvcmxkLCB0aGlzLm10eFBpdm90KTtcclxuICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XHJcbiAgICAgICAgLy8gbm8gY29udGFpbmVyIG5vZGUgb3Igbm8gd29ybGQgdHJhbnNmb3JtYXRpb24gZm91bmQgLT4gY29udGludWUgd2l0aCBwaXZvdCBvbmx5XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG10eENhbWVyYTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbXVsdGlwbGljYXRpb24gb2YgdGhlIHdvcmxkdHJhbnNmb3JtYXRpb24gb2YgdGhlIGNhbWVyYSBjb250YWluZXIsIHRoZSBwaXZvdCBvZiB0aGlzIGNhbWVyYSBhbmQgdGhlIGludmVyc2lvbiBvZiB0aGUgcHJvamVjdGlvbiBtYXRyaXhcclxuICAgICAqIHlpZWxkaW5nIHRoZSB3b3JsZHNwYWNlIHRvIHZpZXdzcGFjZSBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBtdHhXb3JsZFRvVmlldygpOiBNYXRyaXg0eDQge1xyXG4gICAgICBpZiAodGhpcy4jbXR4V29ybGRUb1ZpZXcpXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI210eFdvcmxkVG9WaWV3O1xyXG5cclxuICAgICAgLy9UT0RPOiBvcHRpbWl6ZSwgbm8gbmVlZCB0byByZWNhbGN1bGF0ZSBpZiBuZWl0aGVyIG10eFdvcmxkIG5vciBwaXZvdCBoYXZlIGNoYW5nZWRcclxuICAgICAgdGhpcy4jbXR4V29ybGRUb1ZpZXcgPSBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04odGhpcy4jbXR4UHJvamVjdGlvbiwgdGhpcy5tdHhDYW1lcmFJbnZlcnNlKTtcclxuICAgICAgcmV0dXJuIHRoaXMuI210eFdvcmxkVG9WaWV3O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbXR4Q2FtZXJhSW52ZXJzZSgpOiBNYXRyaXg0eDQge1xyXG4gICAgICBpZiAodGhpcy4jbXR4Q2FtZXJhSW52ZXJzZSlcclxuICAgICAgICByZXR1cm4gdGhpcy4jbXR4Q2FtZXJhSW52ZXJzZTtcclxuXHJcbiAgICAgIC8vVE9ETzogb3B0aW1pemUsIG5vIG5lZWQgdG8gcmVjYWxjdWxhdGUgaWYgbmVpdGhlciBtdHhXb3JsZCBub3IgcGl2b3QgaGF2ZSBjaGFuZ2VkXHJcbiAgICAgIHRoaXMuI210eENhbWVyYUludmVyc2UgPSBNYXRyaXg0eDQuSU5WRVJTSU9OKHRoaXMubXR4V29ybGQpO1xyXG4gICAgICByZXR1cm4gdGhpcy4jbXR4Q2FtZXJhSW52ZXJzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgbXR4UHJvamVjdGlvbigpOiBNYXRyaXg0eDQge1xyXG4gICAgICBpZiAodGhpcy4jbXR4UHJvamVjdGlvbilcclxuICAgICAgICByZXR1cm4gdGhpcy4jbXR4UHJvamVjdGlvbjtcclxuXHJcbiAgICAgIC8vVE9ETzogb3B0aW1pemUsIG5vIG5lZWQgdG8gcmVjYWxjdWxhdGUgaWYgbmVpdGhlciBtdHhXb3JsZCBub3IgcGl2b3QgaGF2ZSBjaGFuZ2VkXHJcbiAgICAgIHRoaXMuI210eFByb2plY3Rpb24gPSBuZXcgTWF0cml4NHg0O1xyXG4gICAgICByZXR1cm4gdGhpcy4jbXR4UHJvamVjdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyByZXNldFdvcmxkVG9WaWV3KCk6IHZvaWQge1xyXG4gICAgICBpZiAodGhpcy4jbXR4V29ybGRUb1ZpZXcpIFJlY3ljbGVyLnN0b3JlKHRoaXMuI210eFdvcmxkVG9WaWV3KTtcclxuICAgICAgaWYgKHRoaXMuI210eENhbWVyYUludmVyc2UpIFJlY3ljbGVyLnN0b3JlKHRoaXMuI210eENhbWVyYUludmVyc2UpO1xyXG4gICAgICB0aGlzLiNtdHhXb3JsZFRvVmlldyA9IG51bGw7XHJcbiAgICAgIHRoaXMuI210eENhbWVyYUludmVyc2UgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQcm9qZWN0aW9uKCk6IFBST0pFQ1RJT04ge1xyXG4gICAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRCYWNrZ3JvdW5kRW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZEVuYWJsZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEFzcGVjdCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5hc3BlY3RSYXRpbztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RmllbGRPZlZpZXcoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZmllbGRPZlZpZXc7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldERpcmVjdGlvbigpOiBGSUVMRF9PRl9WSUVXIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXROZWFyKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLm5lYXI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0RmFyKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZhcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgY2FtZXJhIHRvIHBlcnNwZWN0aXZlIHByb2plY3Rpb24uIFRoZSB3b3JsZCBvcmlnaW4gaXMgaW4gdGhlIGNlbnRlciBvZiB0aGUgY2FudmFzZWxlbWVudC5cclxuICAgICAqIEBwYXJhbSBfYXNwZWN0IFRoZSBhc3BlY3QgcmF0aW8gYmV0d2VlbiB3aWR0aCBhbmQgaGVpZ2h0IG9mIHByb2plY3Rpb25zcGFjZS4oRGVmYXVsdCA9IGNhbnZhcy5jbGllbnRXaWR0aCAvIGNhbnZhcy5DbGllbnRIZWlnaHQpXHJcbiAgICAgKiBAcGFyYW0gX2ZpZWxkT2ZWaWV3IFRoZSBmaWVsZCBvZiB2aWV3IGluIERlZ3JlZXMuIChEZWZhdWx0ID0gNDUpXHJcbiAgICAgKiBAcGFyYW0gX2RpcmVjdGlvbiBUaGUgcGxhbmUgb24gd2hpY2ggdGhlIGZpZWxkT2ZWaWV3LUFuZ2xlIGlzIGdpdmVuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHJvamVjdENlbnRyYWwoX2FzcGVjdDogbnVtYmVyID0gdGhpcy5hc3BlY3RSYXRpbywgX2ZpZWxkT2ZWaWV3OiBudW1iZXIgPSB0aGlzLmZpZWxkT2ZWaWV3LCBfZGlyZWN0aW9uOiBGSUVMRF9PRl9WSUVXID0gdGhpcy5kaXJlY3Rpb24sIF9uZWFyOiBudW1iZXIgPSAxLCBfZmFyOiBudW1iZXIgPSAyMDAwKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuYXNwZWN0UmF0aW8gPSBfYXNwZWN0O1xyXG4gICAgICB0aGlzLmZpZWxkT2ZWaWV3ID0gX2ZpZWxkT2ZWaWV3O1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9IF9kaXJlY3Rpb247XHJcbiAgICAgIHRoaXMucHJvamVjdGlvbiA9IFBST0pFQ1RJT04uQ0VOVFJBTDtcclxuICAgICAgdGhpcy5uZWFyID0gX25lYXI7XHJcbiAgICAgIHRoaXMuZmFyID0gX2ZhcjtcclxuICAgICAgdGhpcy4jbXR4UHJvamVjdGlvbiA9IE1hdHJpeDR4NC5QUk9KRUNUSU9OX0NFTlRSQUwoX2FzcGVjdCwgdGhpcy5maWVsZE9mVmlldywgX25lYXIsIF9mYXIsIHRoaXMuZGlyZWN0aW9uKTsgLy8gVE9ETzogcmVtb3ZlIG1hZ2ljIG51bWJlcnNcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBjYW1lcmEgdG8gb3J0aG9ncmFwaGljIHByb2plY3Rpb24uIERlZmF1bHQgdmFsdWVzIGFyZSBkZXJpdmVkIHRoZSBjYW52YXMgY2xpZW50IGRpbWVuc2lvbnNcclxuICAgICAqIEBwYXJhbSBfbGVmdCBUaGUgcG9zaXRpb252YWx1ZSBvZiB0aGUgcHJvamVjdGlvbnNwYWNlJ3MgbGVmdCBib3JkZXIuICAgIFxyXG4gICAgICogQHBhcmFtIF9yaWdodCBUaGUgcG9zaXRpb252YWx1ZSBvZiB0aGUgcHJvamVjdGlvbnNwYWNlJ3MgcmlnaHQgYm9yZGVyLiAgXHJcbiAgICAgKiBAcGFyYW0gX2JvdHRvbSBUaGUgcG9zaXRpb252YWx1ZSBvZiB0aGUgcHJvamVjdGlvbnNwYWNlJ3MgYm90dG9tIGJvcmRlci5cclxuICAgICAqIEBwYXJhbSBfdG9wIFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyB0b3AgYm9yZGVyLiAgICAgIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcHJvamVjdE9ydGhvZ3JhcGhpYyhfbGVmdDogbnVtYmVyID0gLVJlbmRlci5nZXRDYW52YXMoKS5jbGllbnRXaWR0aCAvIDIsIF9yaWdodDogbnVtYmVyID0gUmVuZGVyLmdldENhbnZhcygpLmNsaWVudFdpZHRoIC8gMiwgX2JvdHRvbTogbnVtYmVyID0gUmVuZGVyLmdldENhbnZhcygpLmNsaWVudEhlaWdodCAvIDIsIF90b3A6IG51bWJlciA9IC1SZW5kZXIuZ2V0Q2FudmFzKCkuY2xpZW50SGVpZ2h0IC8gMik6IHZvaWQge1xyXG4gICAgICB0aGlzLnByb2plY3Rpb24gPSBQUk9KRUNUSU9OLk9SVEhPR1JBUEhJQztcclxuICAgICAgdGhpcy4jbXR4UHJvamVjdGlvbiA9IE1hdHJpeDR4NC5QUk9KRUNUSU9OX09SVEhPR1JBUEhJQyhfbGVmdCwgX3JpZ2h0LCBfYm90dG9tLCBfdG9wLCA0MDAsIC00MDApOyAvLyBUT0RPOiBleGFtaW5lIG1hZ2ljIG51bWJlcnMhXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGNhbGN1bGF0ZWQgZGltZW5zaW9uIG9mIGEgcHJvamVjdGlvbiBzdXJmYWNlIGluIHRoZSBoeXBvdGhldGljYWwgZGlzdGFuY2Ugb2YgMSB0byB0aGUgY2FtZXJhXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRQcm9qZWN0aW9uUmVjdGFuZ2xlKCk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIGxldCB0YW5Gb3Y6IG51bWJlciA9IE1hdGgudGFuKE1hdGguUEkgKiB0aGlzLmZpZWxkT2ZWaWV3IC8gMzYwKTsgLy8gSGFsZiBvZiB0aGUgYW5nbGUsIHRvIGNhbGN1bGF0ZSBkaW1lbnNpb24gZnJvbSB0aGUgY2VudGVyIC0+IHJpZ2h0IGFuZ2xlXHJcbiAgICAgIGxldCB0YW5Ib3Jpem9udGFsOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgdGFuVmVydGljYWw6IG51bWJlciA9IDA7XHJcblxyXG4gICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT0gRklFTERfT0ZfVklFVy5ESUFHT05BTCkge1xyXG4gICAgICAgIGxldCBhc3BlY3Q6IG51bWJlciA9IE1hdGguc3FydCh0aGlzLmFzcGVjdFJhdGlvKTtcclxuICAgICAgICB0YW5Ib3Jpem9udGFsID0gdGFuRm92ICogYXNwZWN0O1xyXG4gICAgICAgIHRhblZlcnRpY2FsID0gdGFuRm92IC8gYXNwZWN0O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09IEZJRUxEX09GX1ZJRVcuVkVSVElDQUwpIHtcclxuICAgICAgICB0YW5WZXJ0aWNhbCA9IHRhbkZvdjtcclxuICAgICAgICB0YW5Ib3Jpem9udGFsID0gdGFuVmVydGljYWwgKiB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Ugey8vRk9WX0RJUkVDVElPTi5IT1JJWk9OVEFMXHJcbiAgICAgICAgdGFuSG9yaXpvbnRhbCA9IHRhbkZvdjtcclxuICAgICAgICB0YW5WZXJ0aWNhbCA9IHRhbkhvcml6b250YWwgLyB0aGlzLmFzcGVjdFJhdGlvO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gUmVjdGFuZ2xlLkdFVCgwLCAwLCB0YW5Ib3Jpem9udGFsICogMiwgdGFuVmVydGljYWwgKiAyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcG9pbnRXb3JsZFRvQ2xpcChfcG9pbnRJbldvcmxkU3BhY2U6IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMztcclxuICAgICAgbGV0IG06IEZsb2F0MzJBcnJheSA9IHRoaXMubXR4V29ybGRUb1ZpZXcuZ2V0KCk7XHJcbiAgICAgIGxldCB3OiBudW1iZXIgPSBtWzNdICogX3BvaW50SW5Xb3JsZFNwYWNlLnggKyBtWzddICogX3BvaW50SW5Xb3JsZFNwYWNlLnkgKyBtWzExXSAqIF9wb2ludEluV29ybGRTcGFjZS56ICsgbVsxNV07XHJcblxyXG4gICAgICByZXN1bHQgPSBWZWN0b3IzLlRSQU5TRk9STUFUSU9OKF9wb2ludEluV29ybGRTcGFjZSwgdGhpcy5tdHhXb3JsZFRvVmlldyk7XHJcbiAgICAgIHJlc3VsdC5zY2FsZSgxIC8gdyk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBvaW50Q2xpcFRvV29ybGQoX3BvaW50SW5DbGlwU3BhY2U6IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IG10eFZpZXdUb1dvcmxkOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSU5WRVJTSU9OKHRoaXMubXR4V29ybGRUb1ZpZXcpO1xyXG4gICAgICBsZXQgbTogRmxvYXQzMkFycmF5ID0gbXR4Vmlld1RvV29ybGQuZ2V0KCk7XHJcbiAgICAgIGxldCByYXlXb3JsZDogVmVjdG9yMyA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3BvaW50SW5DbGlwU3BhY2UsIG10eFZpZXdUb1dvcmxkLCB0cnVlKTtcclxuICAgICAgbGV0IHc6IG51bWJlciA9IG1bM10gKiBfcG9pbnRJbkNsaXBTcGFjZS54ICsgbVs3XSAqIF9wb2ludEluQ2xpcFNwYWNlLnkgKyBtWzExXSAqIF9wb2ludEluQ2xpcFNwYWNlLnogKyBtWzE1XTtcclxuICAgICAgcmF5V29ybGQuc2NhbGUoMSAvIHcpO1xyXG5cclxuICAgICAgcmV0dXJuIHJheVdvcmxkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmNsckJhY2tncm91bmQsXHJcbiAgICAgICAgYmFja2dyb3VuZEVuYWJsZWQ6IHRoaXMuYmFja2dyb3VuZEVuYWJsZWQsXHJcbiAgICAgICAgcHJvamVjdGlvbjogdGhpcy5wcm9qZWN0aW9uLFxyXG4gICAgICAgIGZpZWxkT2ZWaWV3OiB0aGlzLmZpZWxkT2ZWaWV3LFxyXG4gICAgICAgIGRpcmVjdGlvbjogdGhpcy5kaXJlY3Rpb24sXHJcbiAgICAgICAgYXNwZWN0OiB0aGlzLmFzcGVjdFJhdGlvLFxyXG4gICAgICAgIHBpdm90OiB0aGlzLm10eFBpdm90LnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5jbHJCYWNrZ3JvdW5kID0gX3NlcmlhbGl6YXRpb24uYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICB0aGlzLmJhY2tncm91bmRFbmFibGVkID0gX3NlcmlhbGl6YXRpb24uYmFja2dyb3VuZEVuYWJsZWQ7XHJcbiAgICAgIHRoaXMucHJvamVjdGlvbiA9IF9zZXJpYWxpemF0aW9uLnByb2plY3Rpb247XHJcbiAgICAgIHRoaXMuZmllbGRPZlZpZXcgPSBfc2VyaWFsaXphdGlvbi5maWVsZE9mVmlldztcclxuICAgICAgdGhpcy5hc3BlY3RSYXRpbyA9IF9zZXJpYWxpemF0aW9uLmFzcGVjdDtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24gPSBfc2VyaWFsaXphdGlvbi5kaXJlY3Rpb247XHJcbiAgICAgIGF3YWl0IHRoaXMubXR4UGl2b3QuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24ucGl2b3QpO1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIHN3aXRjaCAodGhpcy5wcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgY2FzZSBQUk9KRUNUSU9OLk9SVEhPR1JBUEhJQzpcclxuICAgICAgICAgIHRoaXMucHJvamVjdE9ydGhvZ3JhcGhpYygpOyAvLyBUT0RPOiBzZXJpYWxpemUgYW5kIGRlc2VyaWFsaXplIHBhcmFtZXRlcnNcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgUFJPSkVDVElPTi5DRU5UUkFMOlxyXG4gICAgICAgICAgdGhpcy5wcm9qZWN0Q2VudHJhbCgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0gc3VwZXIuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKHR5cGVzLmRpcmVjdGlvbilcclxuICAgICAgICB0eXBlcy5kaXJlY3Rpb24gPSBGSUVMRF9PRl9WSUVXO1xyXG4gICAgICBpZiAodHlwZXMucHJvamVjdGlvbilcclxuICAgICAgICB0eXBlcy5wcm9qZWN0aW9uID0gUFJPSkVDVElPTjtcclxuICAgICAgcmV0dXJuIHR5cGVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yKTtcclxuXHJcbiAgICAgIHN3aXRjaCAodGhpcy5wcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgY2FzZSBQUk9KRUNUSU9OLkNFTlRSQUw6XHJcbiAgICAgICAgICB0aGlzLnByb2plY3RDZW50cmFsKHRoaXMuYXNwZWN0UmF0aW8sIHRoaXMuZmllbGRPZlZpZXcsIHRoaXMuZGlyZWN0aW9uKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnRyYW5zZm9ybTtcclxuICAgICAgc3VwZXIucmVkdWNlTXV0YXRvcihfbXV0YXRvcik7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBNYWtlcyB0aGUgbm9kZSBmYWNlIHRoZSBjYW1lcmEgd2hlbiByZW5kZXJpbmcsIHJlc3BlY3RpbmcgcmVzdHJpY3Rpb25zIGZvciByb3RhdGlvbiBhcm91bmQgc3BlY2lmaWMgYXhpc1xyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIyXHJcbiAgICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0ppcmthRGVsbE9yby9GVURHRS93aWtpL0NvbXBvbmVudFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRGYWNlQ2FtZXJhIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBDb21wb25lbnQucmVnaXN0ZXJTdWJjbGFzcyhDb21wb25lbnRGYWNlQ2FtZXJhKTtcclxuXHJcbiAgICBwdWJsaWMgdXBMb2NhbDogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwdWJsaWMgdXA6IFZlY3RvcjMgPSBWZWN0b3IzLlkoMSk7XHJcbiAgICBwdWJsaWMgcmVzdHJpY3Q6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5zaW5nbGV0b24gPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEZpbHRlcnMgc3luY2hyb25pemF0aW9uIGJldHdlZW4gYSBncmFwaCBpbnN0YW5jZSBhbmQgdGhlIGdyYXBoIGl0IGlzIGNvbm5lY3RlZCB0by4gSWYgYWN0aXZlLCBubyBzeW5jaHJvbml6YXRpb24gb2NjdXJzLlxyXG4gICAqIE1heWJlIG1vcmUgZmluZWdyYWluZWQgaW4gdGhlIGZ1dHVyZS4uLlxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIyXHJcbiAgICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0ppcmthRGVsbE9yby9GVURHRS93aWtpL0NvbXBvbmVudFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRHcmFwaEZpbHRlciBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50R3JhcGhGaWx0ZXIpO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuc2luZ2xldG9uID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRNdXRhdG9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5tdXRhdGUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgdHlwZSBUeXBlT2ZMaWdodCA9IG5ldyAoKSA9PiBMaWdodDtcclxuICAvKipcclxuICAgKiBCYXNlY2xhc3MgZm9yIGRpZmZlcmVudCBraW5kcyBvZiBsaWdodHMuIFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIExpZ2h0IGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XHJcbiAgICBwdWJsaWMgY29sb3I6IENvbG9yO1xyXG4gICAgY29uc3RydWN0b3IoX2NvbG9yOiBDb2xvciA9IG5ldyBDb2xvcigxLCAxLCAxLCAxKSkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLmNvbG9yID0gX2NvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRUeXBlKCk6IFR5cGVPZkxpZ2h0IHtcclxuICAgICAgcmV0dXJuIDxUeXBlT2ZMaWdodD50aGlzLmNvbnN0cnVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yLnNlcmlhbGl6ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHRoaXMuY29sb3IuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uY29sb3IpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcigpOiB2b2lkIHsvKiovIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFtYmllbnQgbGlnaHQsIGNvbWluZyBmcm9tIGFsbCBkaXJlY3Rpb25zLCBpbGx1bWluYXRpbmcgZXZlcnl0aGluZyB3aXRoIGl0cyBjb2xvciBpbmRlcGVuZGVudCBvZiBwb3NpdGlvbiBhbmQgb3JpZW50YXRpb24gKGxpa2UgYSBmb2dneSBkYXkgb3IgaW4gdGhlIHNoYWRlcykgIFxyXG4gICAqIEF0dGFjaGVkIHRvIGEgbm9kZSBieSB7QGxpbmsgQ29tcG9uZW50TGlnaHR9LCB0aGUgcGl2b3QgbWF0cml4IGlzIGlnbm9yZWQuXHJcbiAgICogYGBgcGxhaW50ZXh0XHJcbiAgICogfiB+IH4gIFxyXG4gICAqICB+IH4gfiAgXHJcbiAgICogYGBgXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIExpZ2h0QW1iaWVudCBleHRlbmRzIExpZ2h0IHtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogRGlyZWN0aW9uYWwgbGlnaHQsIGlsbHVtaW5hdGluZyBldmVyeXRoaW5nIGZyb20gYSBzcGVjaWZpZWQgZGlyZWN0aW9uIHdpdGggaXRzIGNvbG9yIChsaWtlIHN0YW5kaW5nIGluIGJyaWdodCBzdW5saWdodCkgIFxyXG4gICAqIEF0dGFjaGVkIHRvIGEgbm9kZSBieSB7QGxpbmsgQ29tcG9uZW50TGlnaHR9LCB0aGUgcGl2b3QgbWF0cml4IHNwZWNpZmllcyB0aGUgZGlyZWN0aW9uIG9mIHRoZSBsaWdodCBvbmx5LlxyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqIC0tLT4gIFxyXG4gICAqIC0tLT4gIFxyXG4gICAqIC0tLT4gIFxyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBMaWdodERpcmVjdGlvbmFsIGV4dGVuZHMgTGlnaHQge1xyXG4gIH1cclxuICAvKipcclxuICAgKiBPbW5pZGlyZWN0aW9uYWwgbGlnaHQgZW1pdHRpbmcgZnJvbSBpdHMgcG9zaXRpb24sIGlsbHVtaW5hdGluZyBvYmplY3RzIGRlcGVuZGluZyBvbiB0aGVpciBwb3NpdGlvbiBhbmQgZGlzdGFuY2Ugd2l0aCBpdHMgY29sb3IgKGxpa2UgYSBjb2xvcmVkIGxpZ2h0IGJ1bGIpICBcclxuICAgKiBBdHRhY2hlZCB0byBhIG5vZGUgYnkge0BsaW5rIENvbXBvbmVudExpZ2h0fSwgdGhlIHBpdm90IG1hdHJpeCBzcGVjaWZpZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaWdodCwgaXQncyBzaGFwZSBhbmQgcm90YXRpb24uIFxyXG4gICAqIFNvIHdpdGggdW5ldmVuIHNjYWxpbmcsIG90aGVyIHNoYXBlcyB0aGFuIGEgcGVyZmVjdCBzcGhlcmUsIHN1Y2ggYXMgYW4gb3ZhbCBvciBhIGRpc2MsIGFyZSBwb3NzaWJsZSwgd2hpY2ggY3JlYXRlcyBhIHZpc2libGUgZWZmZWN0IG9mIHRoZSByb3RhdGlvbiB0b28uIFxyXG4gICAqIFRoZSBpbnRlbnNpdHkgb2YgdGhlIGxpZ2h0IGRyb3BzIGxpbmVhcmx5IGZyb20gMSBpbiB0aGUgY2VudGVyIHRvIDAgYXQgdGhlIHBlcmltZXRlciBvZiB0aGUgc2hhcGUuXHJcbiAgICogYGBgcGxhaW50ZXh0XHJcbiAgICogICAgICAgICAuXFx8Ly5cclxuICAgKiAgICAgICAgLS0gbyAtLVxyXG4gICAqICAgICAgICAgwrQvfFxcYFxyXG4gICAqIGBgYFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBMaWdodFBvaW50IGV4dGVuZHMgTGlnaHQge1xyXG4gIH1cclxuICAvKipcclxuICAgKiBTcG90IGxpZ2h0IGVtaXR0aW5nIHdpdGhpbiBhIHNwZWNpZmllZCBhbmdsZSBmcm9tIGl0cyBwb3NpdGlvbiwgaWxsdW1pbmF0aW5nIG9iamVjdHMgZGVwZW5kaW5nIG9uIHRoZWlyIHBvc2l0aW9uIGFuZCBkaXN0YW5jZSB3aXRoIGl0cyBjb2xvciAgXHJcbiAgICogQXR0YWNoZWQgdG8gYSBub2RlIGJ5IHtAbGluayBDb21wb25lbnRMaWdodH0sIHRoZSBwaXZvdCBtYXRyaXggc3BlY2lmaWVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGlnaHQsIHRoZSBkaXJlY3Rpb24gYW5kIHRoZSBzaXplIGFuZCBhbmdsZXMgb2YgdGhlIGNvbmUuXHJcbiAgICogVGhlIGludGVuc2l0eSBvZiB0aGUgbGlnaHQgZHJvcHMgbGluZWFybHkgZnJvbSAxIGluIHRoZSBjZW50ZXIgdG8gMCBhdCB0aGUgb3V0ZXIgbGltaXRzIG9mIHRoZSBjb25lLlxyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqICAgICAgICAgIG8gIFxyXG4gICAqICAgICAgICAgL3xcXCAgXHJcbiAgICogICAgICAgIC8gfCBcXCBcclxuICAgKiBgYGAgICBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTGlnaHRTcG90IGV4dGVuZHMgTGlnaHQge1xyXG4gIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL0xpZ2h0L0xpZ2h0LnRzXCIvPlxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyBpZGVudGlmaWVycyBmb3IgdGhlIHZhcmlvdXMgdHlwZXMgb2YgbGlnaHQgdGhpcyBjb21wb25lbnQgY2FuIHByb3ZpZGUuICBcclxuICAgKi9cclxuICAvLyBleHBvcnQgbGV0IExJR0hUX1RZUEU6IHsgW3R5cGU6IHN0cmluZ106IHN0cmluZyB9ID0ge1xyXG4gIGV4cG9ydCBlbnVtIExJR0hUX1RZUEUge1xyXG4gICAgQU1CSUVOVCA9IFwiTGlnaHRBbWJpZW50XCIsXHJcbiAgICBESVJFQ1RJT05BTCA9IFwiTGlnaHREaXJlY3Rpb25hbFwiLFxyXG4gICAgUE9JTlQgPSBcIkxpZ2h0UG9pbnRcIixcclxuICAgIFNQT1QgPSBcIkxpZ2h0U3BvdFwiXHJcbiAgfVxyXG4gIC8qKlxyXG4gICAgKiBBdHRhY2hlcyBhIHtAbGluayBMaWdodH0gdG8gdGhlIG5vZGVcclxuICAgICogVGhlIHBpdm90IG1hdHJpeCBoYXMgZGlmZmVyZW50IGVmZmVjdHMgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mIHRoZSB7QGxpbmsgTGlnaHR9LiBTZWUgdGhlcmUgZm9yIGRldGFpbHMuXHJcbiAgICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRMaWdodCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50TGlnaHQpO1xyXG4gICAgLy8gcHJpdmF0ZSBzdGF0aWMgY29uc3RydWN0b3JzOiB7IFt0eXBlOiBzdHJpbmddOiBHZW5lcmFsIH0gPSB7IFtMSUdIVF9UWVBFLkFNQklFTlRdOiBMaWdodEFtYmllbnQsIFtMSUdIVF9UWVBFLkRJUkVDVElPTkFMXTogTGlnaHREaXJlY3Rpb25hbCwgW0xJR0hUX1RZUEUuUE9JTlRdOiBMaWdodFBvaW50LCBbTElHSFRfVFlQRS5TUE9UXTogTGlnaHRTcG90IH07XHJcbiAgICBwdWJsaWMgbXR4UGl2b3Q6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG4gICAgcHVibGljIGxpZ2h0OiBMaWdodCA9IG51bGw7XHJcbiAgICAvL1RPRE86IHNpbmNlIHRoZXJlIGlzIGFsbW9zdCBubyBmdW5jdGlvbmFsaXR5IGxlZnQgaW4gTGlnaHQsIGVsaW1pbmF0ZSBpdCBhbmQgcHV0IGFsbCBpbiB0aGUgY29tcG9uZW50IGFzIHdpdGggdGhlIGNhbWVyYS4uLlxyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9saWdodDogTGlnaHQgPSBuZXcgTGlnaHRBbWJpZW50KCkpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5zaW5nbGV0b24gPSBmYWxzZTtcclxuICAgICAgdGhpcy5saWdodCA9IF9saWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0VHlwZTxUIGV4dGVuZHMgTGlnaHQ+KF9jbGFzczogbmV3ICgpID0+IFQpOiB2b2lkIHtcclxuICAgICAgbGV0IG10ck9sZDogTXV0YXRvciA9IHt9O1xyXG4gICAgICBpZiAodGhpcy5saWdodClcclxuICAgICAgICBtdHJPbGQgPSB0aGlzLmxpZ2h0LmdldE11dGF0b3IoKTtcclxuXHJcbiAgICAgIHRoaXMubGlnaHQgPSBuZXcgX2NsYXNzKCk7XHJcbiAgICAgIHRoaXMubGlnaHQubXV0YXRlKG10ck9sZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgcGl2b3Q6IHRoaXMubXR4UGl2b3Quc2VyaWFsaXplKCksXHJcbiAgICAgICAgbGlnaHQ6IFNlcmlhbGl6ZXIuc2VyaWFsaXplKHRoaXMubGlnaHQpXHJcbiAgICAgIH07XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICBhd2FpdCB0aGlzLm10eFBpdm90LmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLnBpdm90KTtcclxuICAgICAgdGhpcy5saWdodCA9IGF3YWl0IDxQcm9taXNlPExpZ2h0Pj5TZXJpYWxpemVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmxpZ2h0KTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcih0cnVlKTtcclxuICAgICAgbXV0YXRvci50eXBlID0gdGhpcy5saWdodC5nZXRUeXBlKCkubmFtZTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0gc3VwZXIuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKHR5cGVzLnR5cGUpXHJcbiAgICAgICAgdHlwZXMudHlwZSA9IExJR0hUX1RZUEU7XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGxldCB0eXBlOiBzdHJpbmcgPSBfbXV0YXRvci50eXBlO1xyXG4gICAgICBpZiAodHlwZW9mICh0eXBlKSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlICE9IHRoaXMubGlnaHQuY29uc3RydWN0b3IubmFtZSlcclxuICAgICAgICB0aGlzLnNldFR5cGUoU2VyaWFsaXplci5nZXRDb25zdHJ1Y3RvcjxMaWdodD4odHlwZSkpO1xyXG4gICAgICBkZWxldGUgKF9tdXRhdG9yLnR5cGUpOyAvLyBleGNsdWRlIGxpZ2h0IHR5cGUgZnJvbSBmdXJ0aGVyIG11dGF0aW9uXHJcbiAgICAgIHN1cGVyLm11dGF0ZShfbXV0YXRvcik7XHJcbiAgICAgIF9tdXRhdG9yLnR5cGUgPSB0eXBlOyAvLyByZWNvbnN0cnVjdCBtdXRhdG9yXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEF0dGFjaGVzIGEge0BsaW5rIE1hdGVyaWFsfSB0byB0aGUgbm9kZVxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5IC0gMjAyMVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRNYXRlcmlhbCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50TWF0ZXJpYWwpO1xyXG4gICAgcHVibGljIGNsclByaW1hcnk6IENvbG9yID0gQ29sb3IuQ1NTKFwid2hpdGVcIik7XHJcbiAgICBwdWJsaWMgY2xyU2Vjb25kYXJ5OiBDb2xvciA9IENvbG9yLkNTUyhcIndoaXRlXCIpO1xyXG4gICAgcHVibGljIG10eFBpdm90OiBNYXRyaXgzeDMgPSBNYXRyaXgzeDMuSURFTlRJVFkoKTtcclxuICAgIHB1YmxpYyBtYXRlcmlhbDogTWF0ZXJpYWw7XHJcbiAgICAvKiogc3VwcG9ydCBzb3J0aW5nIG9mIG9iamVjdHMgd2l0aCB0cmFuc3BhcmVuY3kgd2hlbiByZW5kZXJpbmcsIHJlbmRlciBvYmplY3RzIGluIHRoZSBiYWNrIGZpcnN0LiBTaG91bGQgYmUgZW5hYmxlZCB3aGVuIHtAbGluayBDb21wb25lbnRQYXJ0aWNsZVN5c3RlbS5wcm90b3R5cGUuZGVwdGhNYXNrfSBpcyBkaXNhYmxlZCAqL1xyXG4gICAgcHVibGljIHNvcnRGb3JBbHBoYTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgLy8gcHVibGljIG11dGF0b3JDb2F0OiBNdXRhdG9yRm9yQ29tcG9uZW50O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbWF0ZXJpYWw6IE1hdGVyaWFsID0gbnVsbCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLm1hdGVyaWFsID0gX21hdGVyaWFsO1xyXG4gICAgICAvLyB0aGlzLm11dGF0b3JDb2F0ID0gX21hdGVyaWFsLmdldENvYXQoKS5nZXRNdXRhdG9yRm9yQ29tcG9uZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBzb3J0Rm9yQWxwaGE6IHRoaXMuc29ydEZvckFscGhhLFxyXG4gICAgICAgIGNsclByaW1hcnk6IHRoaXMuY2xyUHJpbWFyeS5zZXJpYWxpemUoKSxcclxuICAgICAgICBjbHJTZWNvbmRhcnk6IHRoaXMuY2xyU2Vjb25kYXJ5LnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIHBpdm90OiB0aGlzLm10eFBpdm90LnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKCksXHJcbiAgICAgICAgaWRNYXRlcmlhbDogdGhpcy5tYXRlcmlhbC5pZFJlc291cmNlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLm1hdGVyaWFsID0gPE1hdGVyaWFsPmF3YWl0IFByb2plY3QuZ2V0UmVzb3VyY2UoX3NlcmlhbGl6YXRpb24uaWRNYXRlcmlhbCk7XHJcbiAgICAgIGF3YWl0IHRoaXMuY2xyUHJpbWFyeS5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5jbHJQcmltYXJ5KTtcclxuICAgICAgYXdhaXQgdGhpcy5jbHJTZWNvbmRhcnkuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uY2xyU2Vjb25kYXJ5KTtcclxuICAgICAgdGhpcy5zb3J0Rm9yQWxwaGEgPSBfc2VyaWFsaXphdGlvbi5zb3J0Rm9yQWxwaGE7XHJcbiAgICAgIGF3YWl0IHRoaXMubXR4UGl2b3QuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24ucGl2b3QpO1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHB1YmxpYyBnZXRNdXRhdG9yRm9yVXNlckludGVyZmFjZSgpOiBNdXRhdG9yRm9yVXNlckludGVyZmFjZSB7XHJcbiAgICAvLyAgIGxldCBtdXRhdG9yQ29hdDogTXV0YXRvckZvckNvbXBvbmVudCA9IHRoaXMubWF0ZXJpYWwuZ2V0Q29hdCgpLmdldE11dGF0b3JGb3JDb21wb25lbnQoKTtcclxuICAgIC8vICAgcmV0dXJuIDxNdXRhdG9yRm9yVXNlckludGVyZmFjZT48dW5rbm93bj5tdXRhdG9yQ29hdDtcclxuICAgIC8vIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEF0dGFjaGVzIGEge0BsaW5rIE1lc2h9IHRvIHRoZSBub2RlXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29tcG9uZW50TWVzaCBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50TWVzaCk7XHJcbiAgICBwdWJsaWMgbXR4UGl2b3Q6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG10eFdvcmxkOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuICAgIHB1YmxpYyBtZXNoOiBNZXNoO1xyXG4gICAgcHVibGljIHNrZWxldG9uOiBTa2VsZXRvbkluc3RhbmNlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbWVzaD86IE1lc2gsIF9za2VsZXRvbj86IFNrZWxldG9uSW5zdGFuY2UpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5tZXNoID0gX21lc2g7XHJcbiAgICAgIHRoaXMuc2tlbGV0b24gPSBfc2tlbGV0b247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCByYWRpdXMoKTogbnVtYmVyIHtcclxuICAgICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSB0aGlzLm10eFdvcmxkLnNjYWxpbmc7XHJcbiAgICAgIGxldCBzY2FsZTogbnVtYmVyID0gTWF0aC5tYXgoTWF0aC5hYnMoc2NhbGluZy54KSwgTWF0aC5hYnMoc2NhbGluZy55KSwgTWF0aC5hYnMoc2NhbGluZy56KSk7XHJcbiAgICAgIHJldHVybiB0aGlzLm1lc2gucmFkaXVzICogc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLyoqXHJcbiAgICAvLyAgKiBDYWxjdWxhdGVzIHRoZSBwb3NpdGlvbiBvZiBhIHZlcnRleCB0cmFuc2Zvcm1lZCBieSB0aGUgc2tlbGV0b25cclxuICAgIC8vICAqIEBwYXJhbSBfaW5kZXggaW5kZXggb2YgdGhlIHZlcnRleFxyXG4gICAgLy8gICovXHJcbiAgICAvLyBwdWJsaWMgZ2V0VmVydGV4UG9zaXRpb24oX2luZGV4OiBudW1iZXIpOiBWZWN0b3IzIHtcclxuICAgIC8vICAgLy8gZXh0cmFjdCB0aGUgdmVydGV4IGRhdGEgKHZlcnRpY2VzOiAzRCB2ZWN0b3JzLCBib25lIGluZGljZXMgJiB3ZWlnaHRzOiA0RCB2ZWN0b3JzKVxyXG4gICAgLy8gICBjb25zdCBpVmVydGV4OiBudW1iZXIgPSBfaW5kZXggKiAzO1xyXG4gICAgLy8gICBjb25zdCBpQm9uZUluZmx1ZW5jZTogbnVtYmVyID0gX2luZGV4ICogNDtcclxuICAgICAgXHJcbiAgICAvLyAgIGNvbnN0IHZlcnRleDogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKC4uLlJlZmxlY3QuZ2V0KHRoaXMubWVzaCwgXCJyZW5kZXJNZXNoXCIpLnZlcnRpY2VzLnNsaWNlKGlWZXJ0ZXgsIGlWZXJ0ZXggKyAzKSk7XHJcbiAgICAvLyAgIGlmICghKHRoaXMubWVzaCBpbnN0YW5jZW9mIE1lc2hTa2luKSkgcmV0dXJuIHZlcnRleDtcclxuXHJcbiAgICAvLyAgIGNvbnN0IGlCb25lczogVWludDhBcnJheSA9IHRoaXMubWVzaC5pQm9uZXMuc2xpY2UoaUJvbmVJbmZsdWVuY2UsIGlCb25lSW5mbHVlbmNlICsgNCk7XHJcbiAgICAvLyAgIGNvbnN0IHdlaWdodHM6IEZsb2F0MzJBcnJheSA9IHRoaXMubWVzaC53ZWlnaHRzLnNsaWNlKGlCb25lSW5mbHVlbmNlLCBpQm9uZUluZmx1ZW5jZSArIDQpO1xyXG5cclxuICAgIC8vICAgLy8gZ2V0IGJvbmUgbWF0cmljZXNcclxuICAgIC8vICAgY29uc3QgbXR4Qm9uZXM6IEFycmF5PE1hdHJpeDR4ND4gPSB0aGlzLnNrZWxldG9uLm10eEJvbmVzO1xyXG5cclxuICAgIC8vICAgLy8gc2tpbiBtYXRyaXggUyA9IHN1bV9pPTFebXt3X2kgKiBCX2l9XHJcbiAgICAvLyAgIGNvbnN0IHNraW5NYXRyaXg6IE1hdHJpeDR4NCA9IG5ldyBNYXRyaXg0eDQoKTtcclxuICAgIC8vICAgc2tpbk1hdHJpeC5zZXQoQXJyYXlcclxuICAgIC8vICAgICAuZnJvbShpQm9uZXMpXHJcbiAgICAvLyAgICAgLm1hcCgoaUJvbmUsIGlXZWlnaHQpID0+IG10eEJvbmVzW2lCb25lXS5nZXQoKS5tYXAodmFsdWUgPT4gdmFsdWUgKiB3ZWlnaHRzW2lXZWlnaHRdKSkgLy8gYXBwbHkgd2VpZ2h0IG9uIGVhY2ggbWF0cml4XHJcbiAgICAvLyAgICAgLnJlZHVjZSgobXR4U3VtLCBtdHhCb25lKSA9PiBtdHhTdW0ubWFwKCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlICsgbXR4Qm9uZVtpbmRleF0pKSAvLyBzdW0gdXAgdGhlIG1hdHJpY2VzXHJcbiAgICAvLyAgICk7XHJcblxyXG4gICAgLy8gICAvLyB0cmFuc2Zvcm0gdmVydGV4XHJcbiAgICAvLyAgIHZlcnRleC50cmFuc2Zvcm0oc2tpbk1hdHJpeCk7XHJcblxyXG4gICAgLy8gICByZXR1cm4gdmVydGV4O1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIFRPRE86IHJlbW92ZSBvciB0aGluayBpZiB0aGUgdHJhbnNmb3JtZWQgYm91bmRpbmcgYm94IGlzIG9mIHZhbHVlIG9yIGNhbiBiZSBtYWRlIHRvIGJlXHJcbiAgICAvLyBwdWJsaWMgZ2V0IGJvdW5kaW5nQm94KCk6IEJveCB7XHJcbiAgICAvLyAgIGxldCBib3g6IEJveCA9IFJlY3ljbGVyLmdldChCb3gpO1xyXG4gICAgLy8gICBib3guc2V0KFxyXG4gICAgLy8gICAgIFZlY3RvcjMuVFJBTlNGT1JNQVRJT04odGhpcy5tZXNoLmJvdW5kaW5nQm94Lm1pbiwgdGhpcy5tdHhXb3JsZCwgdHJ1ZSksXHJcbiAgICAvLyAgICAgVmVjdG9yMy5UUkFOU0ZPUk1BVElPTih0aGlzLm1lc2guYm91bmRpbmdCb3gubWF4LCB0aGlzLm10eFdvcmxkLCB0cnVlKVxyXG4gICAgLy8gICApO1xyXG4gICAgLy8gICByZXR1cm4gYm94O1xyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb247XHJcbiAgICAgIC8qIGF0IHRoaXMgcG9pbnQgb2YgdGltZSwgc2VyaWFsaXphdGlvbiBhcyByZXNvdXJjZSBhbmQgYXMgaW5saW5lIG9iamVjdCBpcyBwb3NzaWJsZS4gVE9ETzogY2hlY2sgaWYgaW5saW5lIGJlY29tZXMgb2Jzb2xldGUgKi9cclxuICAgICAgbGV0IGlkTWVzaDogc3RyaW5nID0gdGhpcy5tZXNoLmlkUmVzb3VyY2U7XHJcbiAgICAgIGlmIChpZE1lc2gpXHJcbiAgICAgICAgc2VyaWFsaXphdGlvbiA9IHsgaWRNZXNoOiBpZE1lc2ggfTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNlcmlhbGl6YXRpb24gPSB7IG1lc2g6IFNlcmlhbGl6ZXIuc2VyaWFsaXplKHRoaXMubWVzaCkgfTtcclxuXHJcbiAgICAgIGlmICh0aGlzLnNrZWxldG9uKVxyXG4gICAgICAgIHNlcmlhbGl6YXRpb24uc2tlbGV0b24gPSB0aGlzLnNrZWxldG9uLmlkU291cmNlO1xyXG5cclxuICAgICAgc2VyaWFsaXphdGlvbi5waXZvdCA9IHRoaXMubXR4UGl2b3Quc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgbGV0IG1lc2g6IE1lc2g7XHJcbiAgICAgIGlmIChfc2VyaWFsaXphdGlvbi5pZE1lc2gpXHJcbiAgICAgICAgbWVzaCA9IDxNZXNoPmF3YWl0IFByb2plY3QuZ2V0UmVzb3VyY2UoX3NlcmlhbGl6YXRpb24uaWRNZXNoKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIG1lc2ggPSA8TWVzaD5hd2FpdCBTZXJpYWxpemVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLm1lc2gpO1xyXG4gICAgICB0aGlzLm1lc2ggPSBtZXNoO1xyXG5cclxuICAgICAgaWYgKF9zZXJpYWxpemF0aW9uLnNrZWxldG9uKVxyXG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfQURELCAoX2V2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKF9ldmVudC50YXJnZXQgIT0gdGhpcykgcmV0dXJuO1xyXG4gICAgICAgICAgY29uc3QgdHJ5U2V0U2tlbGV0b246ICgpID0+IHZvaWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGZpbmQgcm9vdCBub2RlXHJcbiAgICAgICAgICAgIGxldCByb290OiBOb2RlID0gdGhpcy5ub2RlO1xyXG4gICAgICAgICAgICB3aGlsZSAocm9vdC5nZXRQYXJlbnQoKSkge1xyXG4gICAgICAgICAgICAgIHJvb3QgPSByb290LmdldFBhcmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiByb290KSB7XHJcbiAgICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBTa2VsZXRvbkluc3RhbmNlICYmIG5vZGUuaWRTb3VyY2UgPT0gX3NlcmlhbGl6YXRpb24uc2tlbGV0b24pXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNrZWxldG9uID0gbm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2tlbGV0b24pIHtcclxuICAgICAgICAgICAgICBjb25zdCB0cnlTZXRTa2VsZXRvbk9uQ2hpbGRBcHBlbmQ6IChfZXZlbnQ6IEV2ZW50KSA9PiB2b2lkID0gX2V2ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHJvb3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5DSElMRF9BUFBFTkQsIHRyeVNldFNrZWxldG9uT25DaGlsZEFwcGVuZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2V2ZW50LnRhcmdldCBpbnN0YW5jZW9mIFNrZWxldG9uSW5zdGFuY2UgJiYgX2V2ZW50LnRhcmdldC5pZFNvdXJjZSA9PSBfc2VyaWFsaXphdGlvbi5za2VsZXRvbilcclxuICAgICAgICAgICAgICAgICAgdGhpcy5za2VsZXRvbiA9IF9ldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgdHJ5U2V0U2tlbGV0b24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DSElMRF9BUFBFTkQsIHRyeVNldFNrZWxldG9uT25DaGlsZEFwcGVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB0cnlTZXRTa2VsZXRvbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgdGhpcy5tdHhQaXZvdC5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5waXZvdCk7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JGb3JVc2VySW50ZXJmYWNlKCk6IE11dGF0b3JGb3JVc2VySW50ZXJmYWNlIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3JGb3JVc2VySW50ZXJmYWNlID0gPE11dGF0b3JGb3JVc2VySW50ZXJmYWNlPnRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgICAvLyBpZiAoIXRoaXMubWVzaClcclxuICAgICAgLy8gICBtdXRhdG9yLm1lc2ggPSBNZXNoO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBcclxuICBleHBvcnQgZW51bSBQQVJUSUNMRV9TWVNURU1fUExBWU1PREUge1xyXG4gICAgLyoqUGxheXMgcGFydGljbGUgc3lzdGVtIGluIGEgbG9vcDogaXQgcmVzdGFydHMgb25jZSBpdCBoaXQgdGhlIGVuZC4qL1xyXG4gICAgTE9PUCxcclxuICAgIC8qKlBsYXlzIHBhcnRpY2xlIHN5c3RlbSBvbmNlIGFuZCBzdG9wcyBhdCB0aGUgbGFzdCBwb2ludCBpbiB0aW1lLiovXHJcbiAgICBQTEFZX09OQ0VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEF0dGFjaGVzIGEge0BsaW5rIFBhcnRpY2xlU3lzdGVtfSB0byB0aGUgbm9kZS4gXHJcbiAgICogV29ya3MgaW4gY29uanVuY3Rpb24gd2l0aCB7QGxpbmsgQ29tcG9uZW50TWVzaH0gYW5kIHtAbGluayBDb21wb25lbnRNYXRlcmlhbH0gdG8gY3JlYXRlIGEgc2hhZGVyIHBhcnRpY2xlIHN5c3RlbS5cclxuICAgKiBBZGRpdGlvbmFsbHkgYSB7QGxpbmsgQ29tcG9uZW50RmFjZUNhbWVyYX0gY2FuIGJlIGF0dGFjaGVkIHRvIG1ha2UgdGhlIHBhcnRpY2xlcyBmYWNlIHRoZSBjYW1lcmEuXHJcbiAgICogQGF1dGhvciBKb25hcyBQbG90emt5LCBIRlUsIDIwMjJcclxuICAgKi9cclxuICBAUmVuZGVySW5qZWN0b3JDb21wb25lbnRQYXJ0aWNsZVN5c3RlbS5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRQYXJ0aWNsZVN5c3RlbSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50UGFydGljbGVTeXN0ZW0pO1xyXG4gICAgLyoqIEEgdGV4dHVyZSBmaWxlZCB3aXRoIHJhbmRvbSBudW1iZXJzLiBVc2VkIGJ5IHBhcnRpY2xlIHNoYWRlciAqL1xyXG4gICAgcHVibGljIHJlbmRlckRhdGE6IHVua25vd247XHJcbiAgICBwdWJsaWMgcGFydGljbGVTeXN0ZW06IFBhcnRpY2xlU3lzdGVtO1xyXG4gICAgLyoqIFdoZW4gZGlzYWJsZWQgdHJ5IGVuYWJsaW5nIHtAbGluayBDb21wb25lbnRNYXRlcmlhbC5wcm90b3R5cGUuc29ydEZvckFscGhhfSAqL1xyXG4gICAgcHVibGljIGRlcHRoTWFzazogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBibGVuZE1vZGU6IEJMRU5EO1xyXG4gICAgcHVibGljIHBsYXlNb2RlOiBQQVJUSUNMRV9TWVNURU1fUExBWU1PREU7XHJcbiAgICBwdWJsaWMgZHVyYXRpb246IG51bWJlcjtcclxuICAgIFxyXG4gICAgLyoqIFRoZSBudW1iZXIgb2YgcGFydGljbGVzICovXHJcbiAgICAjc2l6ZTogbnVtYmVyO1xyXG4gICAgI3RpbWVTY2FsZTogbnVtYmVyID0gMTtcclxuICAgIHJlYWRvbmx5ICN0aW1lOiBUaW1lO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfcGFydGljbGVTeXN0ZW06IFBhcnRpY2xlU3lzdGVtID0gbnVsbCkge1xyXG4gICAgICBzdXBlcigpOyAgICAgXHJcbiAgICAgIHRoaXMucGFydGljbGVTeXN0ZW0gPSBfcGFydGljbGVTeXN0ZW07XHJcbiAgICAgIHRoaXMuZGVwdGhNYXNrID0gdHJ1ZTtcclxuICAgICAgdGhpcy5ibGVuZE1vZGUgPSBCTEVORC5BRERJVElWRTtcclxuICAgICAgdGhpcy5wbGF5TW9kZSA9IFBBUlRJQ0xFX1NZU1RFTV9QTEFZTU9ERS5MT09QO1xyXG4gICAgICB0aGlzLmR1cmF0aW9uID0gMTAwMDtcclxuICAgICAgdGhpcy5zaXplID0gMTA7XHJcbiAgICAgIHRoaXMuI3RpbWUgPSBuZXcgVGltZSgpO1xyXG5cclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9BREQsIHRoaXMuaG5kRXZlbnQpO1xyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX1JFTU9WRSwgdGhpcy5obmRFdmVudCk7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5OT0RFX0RFU0VSSUFMSVpFRCwgdGhpcy5obmRFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIG51bWJlciBvZiBwYXJ0aWNsZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBzaXplKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzaXplO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBudW1iZXIgb2YgcGFydGljbGVzLiBDYXV0aW9uOiBTZXR0aW5nIHRoaXMgd2lsbCByZWluaXRpYWxpemUgdGhlIHJhbmRvbSBudW1iZXJzIGFycmF5KHRleHR1cmUpIHVzZWQgaW4gdGhlIHNoYWRlci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBzaXplKF9zaXplOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jc2l6ZSA9IF9zaXplO1xyXG4gICAgICB0aGlzLmRlbGV0ZVJlbmRlckRhdGEoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRpbWUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3RpbWUuZ2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCB0aW1lKF90aW1lOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jdGltZS5zZXQoX3RpbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdGltZVNjYWxlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiN0aW1lU2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCB0aW1lU2NhbGUoX3NjYWxlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jdGltZVNjYWxlID0gX3NjYWxlO1xyXG4gICAgICB0aGlzLnVwZGF0ZVRpbWVTY2FsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1c2VSZW5kZXJEYXRhKCk6IHZvaWQgey8qIGluamVjdGVkIGJ5IFJlbmRlckluamVjdG9yKi8gfVxyXG4gICAgcHVibGljIGRlbGV0ZVJlbmRlckRhdGEoKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcblxyXG4gICAgLy8jcmVnaW9uIHRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBbc3VwZXIuY29uc3RydWN0b3IubmFtZV06IHN1cGVyLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIGlkUGFydGljbGVTeXN0ZW06IHRoaXMucGFydGljbGVTeXN0ZW0/LmlkUmVzb3VyY2UsXHJcbiAgICAgICAgZGVwdGhNYXNrOiB0aGlzLmRlcHRoTWFzayxcclxuICAgICAgICBibGVuZE1vZGU6IHRoaXMuYmxlbmRNb2RlLFxyXG4gICAgICAgIHBsYXlNb2RlOiB0aGlzLnBsYXlNb2RlLFxyXG4gICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uLFxyXG4gICAgICAgIHNpemU6IHRoaXMuc2l6ZVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICBpZiAoX3NlcmlhbGl6YXRpb24uaWRQYXJ0aWNsZVN5c3RlbSkgdGhpcy5wYXJ0aWNsZVN5c3RlbSA9IDxQYXJ0aWNsZVN5c3RlbT5hd2FpdCBQcm9qZWN0LmdldFJlc291cmNlKF9zZXJpYWxpemF0aW9uLmlkUGFydGljbGVTeXN0ZW0pO1xyXG4gICAgICB0aGlzLmRlcHRoTWFzayA9IF9zZXJpYWxpemF0aW9uLmRlcHRoTWFzaztcclxuICAgICAgdGhpcy5ibGVuZE1vZGUgPSBfc2VyaWFsaXphdGlvbi5ibGVuZE1vZGU7XHJcbiAgICAgIHRoaXMucGxheU1vZGUgPSBfc2VyaWFsaXphdGlvbi5wbGF5TW9kZTtcclxuICAgICAgdGhpcy5kdXJhdGlvbiA9IF9zZXJpYWxpemF0aW9uLmR1cmF0aW9uO1xyXG4gICAgICB0aGlzLnNpemUgPSBfc2VyaWFsaXphdGlvbi5zaXplO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoX2V4dGVuZGFibGU/OiBib29sZWFuKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcih0cnVlKTtcclxuICAgICAgbXV0YXRvci5zaXplID0gdGhpcy5zaXplO1xyXG4gICAgICByZXR1cm4gbXV0YXRvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckZvclVzZXJJbnRlcmZhY2UoKTogTXV0YXRvckZvclVzZXJJbnRlcmZhY2Uge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvckZvclVzZXJJbnRlcmZhY2UgPSA8TXV0YXRvckZvclVzZXJJbnRlcmZhY2U+dGhpcy5nZXRNdXRhdG9yKHRydWUpO1xyXG4gICAgICBkZWxldGUgbXV0YXRvci5wYXJ0aWNsZVN5c3RlbTtcclxuICAgICAgbXV0YXRvci5wYXJ0aWNsZVN5c3RlbSA9IHRoaXMucGFydGljbGVTeXN0ZW0/LmdldE11dGF0b3JGb3JVc2VySW50ZXJmYWNlKCk7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yRm9yQW5pbWF0aW9uKCk6IE11dGF0b3JGb3JBbmltYXRpb24ge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvckZvckFuaW1hdGlvbiA9IDxNdXRhdG9yRm9yQW5pbWF0aW9uPnRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgICBkZWxldGUgbXV0YXRvci5wYXJ0aWNsZVN5c3RlbTtcclxuICAgICAgZGVsZXRlIG11dGF0b3Iuc2l6ZTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0gc3VwZXIuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKHR5cGVzLmJsZW5kTW9kZSlcclxuICAgICAgICB0eXBlcy5ibGVuZE1vZGUgPSBCTEVORDtcclxuICAgICAgaWYgKHR5cGVzLnBsYXlNb2RlKVxyXG4gICAgICAgIHR5cGVzLnBsYXlNb2RlID0gUEFSVElDTEVfU1lTVEVNX1BMQVlNT0RFO1xyXG4gICAgICByZXR1cm4gdHlwZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgc3VwZXIucmVkdWNlTXV0YXRvcihfbXV0YXRvcik7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5yYW5kb21OdW1iZXJzUmVuZGVyRGF0YTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnRpbWU7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcml2YXRlIGhuZEV2ZW50ID0gKF9ldmVudDogRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgc3dpdGNoIChfZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgRVZFTlQuTk9ERV9ERVNFUklBTElaRUQ6XHJcbiAgICAgICAgY2FzZSBFVkVOVC5DT01QT05FTlRfQUREOlxyXG4gICAgICAgICAgVGltZS5nYW1lLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuVElNRV9TQ0FMRUQsIHRoaXMudXBkYXRlVGltZVNjYWxlKTtcclxuICAgICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULlJFTkRFUl9QUkVQQVJFLCB0aGlzLnVwZGF0ZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEVWRU5ULkNPTVBPTkVOVF9SRU1PVkU6XHJcbiAgICAgICAgICBUaW1lLmdhbWUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5USU1FX1NDQUxFRCwgdGhpcy51cGRhdGVUaW1lU2NhbGUpO1xyXG4gICAgICAgICAgdGhpcy5ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlQuUkVOREVSX1BSRVBBUkUsIHRoaXMudXBkYXRlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZSA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgaWYgKHRoaXMudGltZSA+IHRoaXMuZHVyYXRpb24pXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnBsYXlNb2RlKSB7XHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgY2FzZSBQQVJUSUNMRV9TWVNURU1fUExBWU1PREUuTE9PUDpcclxuICAgICAgICAgICAgdGhpcy50aW1lID0gMDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFBBUlRJQ0xFX1NZU1RFTV9QTEFZTU9ERS5QTEFZX09OQ0U6XHJcbiAgICAgICAgICAgIHRoaXMudGltZSA9IHRoaXMuZHVyYXRpb247XHJcbiAgICAgICAgICAgIHRoaXMudGltZVNjYWxlID0gMDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVRpbWVTY2FsZSA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgbGV0IHRpbWVTY2FsZTogbnVtYmVyID0gdGhpcy4jdGltZVNjYWxlICogVGltZS5nYW1lLmdldFNjYWxlKCk7XHJcbiAgICAgIHRoaXMuI3RpbWUuc2V0U2NhbGUodGltZVNjYWxlKTtcclxuICAgIH07XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGVudW0gUElDSyB7XHJcbiAgICBSQURJVVMgPSBcInJhZGl1c1wiLFxyXG4gICAgQ0FNRVJBID0gXCJjYW1lcmFcIixcclxuICAgIFBIWVNJQ1MgPSBcInBoeXNpY3NcIlxyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEF0dGFjaGVzIHBpY2tpbmcgZnVuY3Rpb25hbGl0eSB0byB0aGUgbm9kZVxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudFBpY2sgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudFBpY2spO1xyXG4gICAgcHVibGljIHBpY2s6IFBJQ0sgPSBQSUNLLlJBRElVUztcclxuXHJcbiAgICBwdWJsaWMgcGlja0FuZERpc3BhdGNoKF9yYXk6IFJheSwgX2V2ZW50OiBQb2ludGVyRXZlbnQpOiB2b2lkIHtcclxuICAgICAgbGV0IGNtcE1lc2g6IENvbXBvbmVudE1lc2ggPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1lc2gpO1xyXG4gICAgICBsZXQgcG9zaXRpb246IFZlY3RvcjMgPSBjbXBNZXNoID8gY21wTWVzaC5tdHhXb3JsZC50cmFuc2xhdGlvbiA6IHRoaXMubm9kZS5tdHhXb3JsZC50cmFuc2xhdGlvbjtcclxuXHJcbiAgICAgIHN3aXRjaCAodGhpcy5waWNrKSB7XHJcbiAgICAgICAgY2FzZSBQSUNLLlJBRElVUzpcclxuICAgICAgICAgIC8vIFRPRE86IHNob3VsZCBvbmx5IGJlIG5vZGUucmFkaXVzLiBBZGp1c3RtZW50IG5lZWRlZCwgaWYgbWVzaCB3YXMgdHJhbnNmb3JtZWQuLi5cclxuICAgICAgICAgIGlmIChfcmF5LmdldERpc3RhbmNlKHBvc2l0aW9uKS5tYWduaXR1ZGUgPCB0aGlzLm5vZGUucmFkaXVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5kaXNwYXRjaEV2ZW50KF9ldmVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFBJQ0suUEhZU0lDUzpcclxuICAgICAgICAgIGxldCBoaXRJbmZvOiBSYXlIaXRJbmZvID0gUGh5c2ljcy5yYXljYXN0KF9yYXkub3JpZ2luLCBfcmF5LmRpcmVjdGlvbiwgVmVjdG9yMy5ESUZGRVJFTkNFKHBvc2l0aW9uLCBfcmF5Lm9yaWdpbikubWFnbml0dWRlU3F1YXJlZCk7XHJcbiAgICAgICAgICBpZiAoaGl0SW5mby5oaXQpXHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5kaXNwYXRjaEV2ZW50KF9ldmVudCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIC8vVE9ETzogUElDSy5DQU1FUkFcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLm11dGF0ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yQXR0cmlidXRlVHlwZXMoX211dGF0b3I6IE11dGF0b3IpOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMge1xyXG4gICAgICBsZXQgdHlwZXM6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyA9IHN1cGVyLmdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcik7XHJcbiAgICAgIGlmICh0eXBlcy5waWNrKVxyXG4gICAgICAgIHR5cGVzLnBpY2sgPSBQSUNLO1xyXG4gICAgICByZXR1cm4gdHlwZXM7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQmFzZSBjbGFzcyBmb3Igc2NyaXB0cyB0aGUgdXNlciB3cml0ZXNcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9KaXJrYURlbGxPcm8vRlVER0Uvd2lraS9Db21wb25lbnRcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29tcG9uZW50U2NyaXB0IGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICAgIC8vIHJlZ2lzdGVyaW5nIHRoaXMgZG9lc24ndCBtYWtlIHNlbnNlLCBvbmx5IGl0cyBzdWJjbGFzc2VzLiBPciB0aGlzIGNvbXBvbmVudCBtdXN0IHJlZmVyIHRvIHNjcmlwdHMgdG8gYmUgYXR0YWNoZWQgdG8gdGhpcyBjb21wb25lbnRcclxuICAgIC8vIFRPRE86IHJldGhpbmsgJiByZWZhY3RvclxyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudFNjcmlwdCk7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5zaW5nbGV0b24gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZXRNdXRhdG9yKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5tdXRhdGUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgZXhwb3J0IGVudW0gQkFTRSB7XHJcbiAgICBTRUxGLCBQQVJFTlQsIFdPUkxELCBOT0RFXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBdHRhY2hlcyBhIHRyYW5zZm9ybS17QGxpbmsgTWF0cml4NHg0fSB0byB0aGUgbm9kZSwgbW92aW5nLCBzY2FsaW5nIGFuZCByb3RhdGluZyBpdCBpbiBzcGFjZSByZWxhdGl2ZSB0byBpdHMgcGFyZW50LlxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIENvbXBvbmVudFRyYW5zZm9ybSBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gQ29tcG9uZW50LnJlZ2lzdGVyU3ViY2xhc3MoQ29tcG9uZW50VHJhbnNmb3JtKTtcclxuICAgIHB1YmxpYyBtdHhMb2NhbDogTWF0cml4NHg0O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbXR4SW5pdDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCkpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5tdHhMb2NhbCA9IF9tdHhJbml0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2Zvcm1hdGlvbnMgcmVzcGVjdGluZyB0aGUgaGllcmFyY2h5XHJcbiAgICAvKipcclxuICAgICAqIHJlY2FsY3VsYXRlcyB0aGlzIGxvY2FsIG1hdHJpeCB0byB5aWVsZCB0aGUgaWRlbnRpY2FsIHdvcmxkIG1hdHJpeCBiYXNlZCBvbiB0aGUgZ2l2ZW4gbm9kZS5cclxuICAgICAqIFVzZSByZWJhc2UgYmVmb3JlIGFwcGVuZGluZyB0aGUgY29udGFpbmVyIG9mIHRoaXMgY29tcG9uZW50IHRvIGFub3RoZXIgbm9kZSB3aGlsZSBwcmVzZXJ2aW5nIGl0cyB0cmFuc2Zvcm1hdGlvbiBpbiB0aGUgd29ybGQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWJhc2UoX25vZGU6IE5vZGUgPSBudWxsKTogdm9pZCB7XHJcbiAgICAgIGxldCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IHRoaXMubXR4TG9jYWw7XHJcbiAgICAgIGxldCBjb250YWluZXI6IE5vZGUgPSB0aGlzLm5vZGU7XHJcbiAgICAgIGlmIChjb250YWluZXIpXHJcbiAgICAgICAgbXR4UmVzdWx0ID0gY29udGFpbmVyLm10eFdvcmxkO1xyXG5cclxuICAgICAgaWYgKF9ub2RlKVxyXG4gICAgICAgIG10eFJlc3VsdCA9IE1hdHJpeDR4NC5SRUxBVElWRShtdHhSZXN1bHQsIG51bGwsIF9ub2RlLm10eFdvcmxkSW52ZXJzZSk7XHJcblxyXG4gICAgICB0aGlzLm10eExvY2FsID0gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbGllcyB0aGUgZ2l2ZW4gdHJhbnNmb3JtYXRpb24gcmVsYXRpdmUgdG8gdGhlIHNlbGVjdGVkIGJhc2UgKFNFTEYsIFBBUkVOVCwgV09STEQpIG9yIGEgcGFydGljdWxhciBvdGhlciBub2RlIChOT0RFKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNmb3JtKF9tdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCwgX2Jhc2U6IEJBU0UgPSBCQVNFLlNFTEYsIF9ub2RlOiBOb2RlID0gbnVsbCk6IHZvaWQge1xyXG4gICAgICBzd2l0Y2ggKF9iYXNlKSB7XHJcbiAgICAgICAgY2FzZSBCQVNFLlNFTEY6XHJcbiAgICAgICAgICB0aGlzLm10eExvY2FsLm11bHRpcGx5KF9tdHhUcmFuc2Zvcm0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCQVNFLlBBUkVOVDpcclxuICAgICAgICAgIHRoaXMubXR4TG9jYWwubXVsdGlwbHkoX210eFRyYW5zZm9ybSwgdHJ1ZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJBU0UuTk9ERTpcclxuICAgICAgICAgIGlmICghX25vZGUpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJBU0UuTk9ERSByZXF1aXJlcyBhIG5vZGUgZ2l2ZW4gYXMgYmFzZVwiKTtcclxuICAgICAgICBjYXNlIEJBU0UuV09STEQ6XHJcbiAgICAgICAgICB0aGlzLnJlYmFzZShfbm9kZSk7XHJcbiAgICAgICAgICB0aGlzLm10eExvY2FsLm11bHRpcGx5KF9tdHhUcmFuc2Zvcm0sIHRydWUpO1xyXG5cclxuICAgICAgICAgIGxldCBub2RlOiBOb2RlID0gdGhpcy5ub2RlO1xyXG4gICAgICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICAgICAgbGV0IG10eFRlbXA6IE1hdHJpeDR4NDtcclxuICAgICAgICAgICAgaWYgKF9iYXNlID09IEJBU0UuTk9ERSkge1xyXG4gICAgICAgICAgICAgIC8vIGZpeCBtdHhXb3JsZCBvZiBjb250YWluZXIgZm9yIHN1YnNlcXVlbnQgcmViYXNpbmcgXHJcbiAgICAgICAgICAgICAgbXR4VGVtcCA9IE1hdHJpeDR4NC5NVUxUSVBMSUNBVElPTihfbm9kZS5tdHhXb3JsZCwgbm9kZS5tdHhMb2NhbCk7XHJcbiAgICAgICAgICAgICAgbm9kZS5tdHhXb3JsZC5zZXQobXR4VGVtcCk7XHJcbiAgICAgICAgICAgICAgUmVjeWNsZXIuc3RvcmUobXR4VGVtcCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBwYXJlbnQ6IE5vZGUgPSBub2RlLmdldFBhcmVudCgpO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgLy8gZml4IG10eExvY2FsIGZvciBjdXJyZW50IHBhcmVudFxyXG4gICAgICAgICAgICAgIHRoaXMucmViYXNlKG5vZGUuZ2V0UGFyZW50KCkpO1xyXG4gICAgICAgICAgICAgIG10eFRlbXAgPSBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04obm9kZS5nZXRQYXJlbnQoKS5tdHhXb3JsZCwgbm9kZS5tdHhMb2NhbCk7XHJcbiAgICAgICAgICAgICAgbm9kZS5tdHhXb3JsZC5zZXQobXR4VGVtcCk7XHJcbiAgICAgICAgICAgICAgUmVjeWNsZXIuc3RvcmUobXR4VGVtcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIGxvY2FsOiB0aGlzLm10eExvY2FsLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIGF3YWl0IHRoaXMubXR4TG9jYWwuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24ubG9jYWwpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAvLyAgICAgdGhpcy5sb2NhbC5tdXRhdGUoX211dGF0b3IpO1xyXG4gICAgLy8gfVxyXG4gICAgLy8gcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7IFxyXG4gICAgLy8gICAgIHJldHVybiB0aGlzLmxvY2FsLmdldE11dGF0b3IoKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yOiBNdXRhdG9yKTogTXV0YXRvckF0dHJpYnV0ZVR5cGVzIHtcclxuICAgIC8vICAgICBsZXQgdHlwZXM6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyA9IHRoaXMubG9jYWwuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgIC8vICAgICByZXR1cm4gdHlwZXM7XHJcbiAgICAvLyB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLndvcmxkO1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogRGVzY3JpYmVzIGEgVlIgQ29udHJvbGxlciBhbmQgaXRzIGNhcGFiaWxpdGllcy5cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgVlJDb250cm9sbGVyIHtcclxuICAgIHB1YmxpYyBjbXBUcmFuc2Zvcm06IENvbXBvbmVudFRyYW5zZm9ybSA9IG51bGw7XHJcbiAgICBwdWJsaWMgZ2FtZVBhZDogR2FtZXBhZCA9IG51bGw7XHJcbiAgICBwdWJsaWMgdGh1bWJzdGlja1g6IG51bWJlciA9IG51bGw7XHJcbiAgICBwdWJsaWMgdGh1bWJzdGlja1k6IG51bWJlciA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBWUiBDb21wb25lbnQgQ2xhc3MsIGZvciBTZXNzaW9uIE1hbmFnZW1lbnQsIENvbnRyb2xsZXIgTWFuYWdlbWVudCBhbmQgUmVmZXJlbmNlIFNwYWNlIE1hbmFnZW1lbnQuIFxyXG4gICAqIEBhdXRob3IgVmFsZW50aW4gU2NobWlkYmVyZ2VyLCBIRlUsIDIwMjJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29tcG9uZW50VlJEZXZpY2UgZXh0ZW5kcyBDb21wb25lbnRDYW1lcmEge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudFZSRGV2aWNlKTtcclxuICAgIHB1YmxpYyByaWdodENudHJsOiBWUkNvbnRyb2xsZXIgPSBuZXcgVlJDb250cm9sbGVyKCk7XHJcbiAgICBwdWJsaWMgbGVmdENudHJsOiBWUkNvbnRyb2xsZXIgPSBuZXcgVlJDb250cm9sbGVyKCk7XHJcblxyXG4gICAgI210eExvY2FsOiBNYXRyaXg0eDQ7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX0FERCwgdGhpcy5nZXRNdHhMb2NhbEZyb21DbXBUcmFuc2Zvcm0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgYWN0dWFsIG1hdHJpeCBvZiB0aGUgdnIgLSBkZXZpY2UuXHJcbiAgICAgKiBDcmVhdG9ycyBzaG91bGQgdXNlIHRoaXMgZm9yIHJlYWRvbmx5IHB1cnBvc2VzLiAgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbXR4TG9jYWwoKTogTWF0cml4NHg0IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI210eExvY2FsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBhIFZlY3RvcjMgYXMgUG9zaXRpb24gb2YgdGhlIHJlZmVyZW5jZSBzcGFjZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCB0cmFuc2xhdGlvbihfbmV3UG9zOiBWZWN0b3IzKSB7XHJcbiAgICAgIGxldCBpbnZUcmFuc2xhdGlvbjogVmVjdG9yMyA9IFZlY3RvcjMuU0NBTEUoVmVjdG9yMy5ESUZGRVJFTkNFKF9uZXdQb3MsIHRoaXMuI210eExvY2FsLnRyYW5zbGF0aW9uKSwgLTEpO1xyXG4gICAgICBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UgPSBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UuZ2V0T2Zmc2V0UmVmZXJlbmNlU3BhY2UobmV3IFhSUmlnaWRUcmFuc2Zvcm0oaW52VHJhbnNsYXRpb24pKTtcclxuICAgICAgdGhpcy4jbXR4TG9jYWwudHJhbnNsYXRpb24gPSBfbmV3UG9zO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBWZWN0b3IzIFJvdGF0aW9uIG9mIHRoZSByZWZlcmVuY2Ugc3BhY2UuXHJcbiAgICAgKiBSb3RhdGlvbiBuZWVkcyB0byBiZSBzZXQgaW4gdGhlIE9yaWdpbiAoMCwwLDApLCBvdGhlcndpc2UgdGhlIFhSLVJpZyBnZXRzIHJvdGF0ZWQgYXJvdW5kIHRoZSBvcmlnaW4uIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IHJvdGF0aW9uKF9uZXdSb3Q6IFZlY3RvcjMpIHtcclxuICAgICAgbGV0IG5ld1JvdDogVmVjdG9yMyA9IFZlY3RvcjMuU0NBTEUoVmVjdG9yMy5TQ0FMRShWZWN0b3IzLlNVTShfbmV3Um90LCB0aGlzLiNtdHhMb2NhbC5yb3RhdGlvbiksIC0xKSwgTWF0aC5QSSAvIDE4MCk7XHJcblxyXG4gICAgICBsZXQgb3JpZW50YXRpb246IFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xyXG4gICAgICBvcmllbnRhdGlvbi5ldWxlckFuZ2xlcyA9IG5ld1JvdDtcclxuICAgICAgLy9zZXQgeHIgLSByaWcgYmFjayB0byBvcmlnaW5cclxuICAgICAgWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlID0gWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlLmdldE9mZnNldFJlZmVyZW5jZVNwYWNlKG5ldyBYUlJpZ2lkVHJhbnNmb3JtKFZlY3RvcjMuRElGRkVSRU5DRSh0aGlzLiNtdHhMb2NhbC50cmFuc2xhdGlvbiwgVmVjdG9yMy5aRVJPKCkpKSk7XHJcbiAgICAgIC8vcm90YXRlIHhyIHJpZyBpbiBvcmlnaW5cclxuICAgICAgWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlID0gWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlLmdldE9mZnNldFJlZmVyZW5jZVNwYWNlKG5ldyBYUlJpZ2lkVHJhbnNmb3JtKFZlY3RvcjMuWkVSTygpLCA8RE9NUG9pbnRJbml0Pjx1bmtub3duPm9yaWVudGF0aW9uKSk7XHJcbiAgICAgIC8vc2V0IHhyIC0gcmlnIGJhY2sgdG8gbGFzdCBwb3NpdGlvbiBcclxuICAgICAgWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlID0gWFJWaWV3cG9ydC5kZWZhdWx0LnJlZmVyZW5jZVNwYWNlLmdldE9mZnNldFJlZmVyZW5jZVNwYWNlKG5ldyBYUlJpZ2lkVHJhbnNmb3JtKFZlY3RvcjMuRElGRkVSRU5DRShWZWN0b3IzLlpFUk8oKSwgdGhpcy4jbXR4TG9jYWwudHJhbnNsYXRpb24pKSk7XHJcbiAgICAgIHRoaXMuI210eExvY2FsLnJvdGF0aW9uID0gVmVjdG9yMy5TQ0FMRShfbmV3Um90LCAtMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgVmVjdG9yMyBpbiBQb3NpdGlvbiBvZiB0aGUgcmVmZXJlbmNlIHNwYWNlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNsYXRlKF9ieTogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICBsZXQgaW52VHJhbnNsYXRpb246IFZlY3RvcjMgPSBWZWN0b3IzLlNDQUxFKF9ieSwgLTEpO1xyXG4gICAgICBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UgPSBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UuZ2V0T2Zmc2V0UmVmZXJlbmNlU3BhY2UobmV3IFhSUmlnaWRUcmFuc2Zvcm0oaW52VHJhbnNsYXRpb24pKTtcclxuICAgICAgdGhpcy4jbXR4TG9jYWwudHJhbnNsYXRlKF9ieSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgVmVjdG9yMyBpbiBSb3RhdGlvbiBvZiB0aGUgcmVmZXJlbmNlIHNwYWNlLlxyXG4gICAgICogUm90YXRpb24gbmVlZHMgdG8gYmUgYWRkZWQgaW4gdGhlIE9yaWdpbiAoMCwwLDApLCBvdGhlcndpc2UgdGhlIFhSLVJpZyBnZXRzIHJvdGF0ZWQgYXJvdW5kIHRoZSBvcmlnaW4uIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcm90YXRlKF9ieTogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICBsZXQgcm90QW1vdW50OiBWZWN0b3IzID0gVmVjdG9yMy5TQ0FMRShWZWN0b3IzLlNDQUxFKF9ieSwgLTEpLCBNYXRoLlBJIC8gMTgwKTtcclxuXHJcbiAgICAgIGxldCBvcmllbnRhdGlvbjogUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbiAgICAgIG9yaWVudGF0aW9uLmV1bGVyQW5nbGVzID0gcm90QW1vdW50O1xyXG4gICAgICAvL3NldCB4ciAtIHJpZyBiYWNrIHRvIG9yaWdpblxyXG4gICAgICBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UgPSBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UuZ2V0T2Zmc2V0UmVmZXJlbmNlU3BhY2UobmV3IFhSUmlnaWRUcmFuc2Zvcm0oVmVjdG9yMy5ESUZGRVJFTkNFKHRoaXMuI210eExvY2FsLnRyYW5zbGF0aW9uLCBWZWN0b3IzLlpFUk8oKSkpKTtcclxuICAgICAgLy9yb3RhdGUgeHIgcmlnIGluIG9yaWdpblxyXG4gICAgICBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UgPSBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UuZ2V0T2Zmc2V0UmVmZXJlbmNlU3BhY2UobmV3IFhSUmlnaWRUcmFuc2Zvcm0oVmVjdG9yMy5aRVJPKCksIDxET01Qb2ludEluaXQ+PHVua25vd24+b3JpZW50YXRpb24pKTtcclxuICAgICAgLy9zZXQgeHIgLSByaWcgYmFjayB0byBsYXN0IHBvc2l0aW9uIFxyXG4gICAgICBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UgPSBYUlZpZXdwb3J0LmRlZmF1bHQucmVmZXJlbmNlU3BhY2UuZ2V0T2Zmc2V0UmVmZXJlbmNlU3BhY2UobmV3IFhSUmlnaWRUcmFuc2Zvcm0oVmVjdG9yMy5ESUZGRVJFTkNFKFZlY3RvcjMuWkVSTygpLCB0aGlzLiNtdHhMb2NhbC50cmFuc2xhdGlvbikpKTtcclxuICAgICAgdGhpcy4jbXR4TG9jYWwucm90YXRlKFZlY3RvcjMuU0NBTEUoX2J5LCAtMSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0TXR4TG9jYWxGcm9tQ21wVHJhbnNmb3JtKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNtdHhMb2NhbCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50VHJhbnNmb3JtKS5tdHhMb2NhbDtcclxuXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgY29uc3QgZW51bSBFVkVOVF9DT05UUk9MIHtcclxuICAgIElOUFVUID0gXCJpbnB1dFwiLFxyXG4gICAgT1VUUFVUID0gXCJvdXRwdXRcIlxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGNvbnN0IGVudW0gQ09OVFJPTF9UWVBFIHtcclxuICAgIC8qKiBUaGUgb3V0cHV0IHNpbXBseSBmb2xsb3dzIHRoZSBzY2FsZWQgYW5kIGRlbGF5ZWQgaW5wdXQgKi9cclxuICAgIFBST1BPUlRJT05BTCxcclxuICAgIC8qKiBUaGUgb3V0cHV0IHZhbHVlIGNoYW5nZXMgb3ZlciB0aW1lIHdpdGggYSByYXRlIGdpdmVuIGJ5IHRoZSBzY2FsZWQgYW5kIGRlbGF5ZWQgaW5wdXQgKi9cclxuICAgIElOVEVHUkFMLFxyXG4gICAgLyoqIFRoZSBvdXRwdXQgdmFsdWUgcmVhY3RzIHRvIGNoYW5nZXMgb2YgdGhlIHNjYWxlZCBpbnB1dCBhbmQgZHJvcHMgdG8gMCB3aXRoIGdpdmVuIGRlbGF5LCBpZiBpbnB1dCByZW1haW5zIGNvbnN0YW50ICovXHJcbiAgICBESUZGRVJFTlRJQUxcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb2Nlc3NlcyBpbnB1dCBzaWduYWxzIG9mIHR5cGUgbnVtYmVyIGFuZCBnZW5lcmF0ZXMgYW4gb3V0cHV0IHNpZ25hbCBvZiB0aGUgc2FtZSB0eXBlIHVzaW5nIFxyXG4gICAqIHByb3BvcnRpb25hbCwgaW50ZWdyYWwgb3IgZGlmZmVyZW50aWFsIG1hcHBpbmcsIGFuIGFtcGxpZmljYXRpb24gZmFjdG9yIGFuZCBhIGxpbmVhciBkYW1wZW5pbmcvZGVsYXlcclxuICAgKiBgYGBwbGFpbnRleHRcclxuICAgKiAgICAgICAgICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJBcclxuICAgKiAgICAgICAgICDilIIgICDilIzilIDilIDilIDilIDilIDilIDilIDilJAgICDilIzilIDilIDilIDilIDilIDilJAgICAgICBwYXNzIHRocm91Z2ggKFByb3BvcnRpb25hbCkgICAgICDilIJcclxuICAgKiAgSW5wdXQg4oaSIOKUgiDihpIg4pSCYW1wbGlmeeKUgiDihpIg4pSCZGVsYXnilIIg4oaSIOKanyBzdW0gdXAgb3ZlciB0aW1lIChJbnRlZ3JhbCkg4pqeIOKGkiDilIIg4oaSIE91dHB1dFxyXG4gICAqICAgICAgICAgIOKUgiAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUmCAgICAgIHBhc3MgY2hhbmdlICAoRGlmZmVyZW50aWFsKSAgICAgIOKUglxyXG4gICAqICAgICAgICAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCBcclxuICAgKiBgYGBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29udHJvbCBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcclxuICAgIHB1YmxpYyByZWFkb25seSB0eXBlOiBDT05UUk9MX1RZUEU7XHJcbiAgICBwdWJsaWMgYWN0aXZlOiBib29sZWFuO1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuXHJcbiAgICBwcm90ZWN0ZWQgcmF0ZURpc3BhdGNoT3V0cHV0OiBudW1iZXIgPSAwO1xyXG4gICAgcHJvdGVjdGVkIHZhbHVlUHJldmlvdXM6IG51bWJlciA9IDA7XHJcbiAgICBwcm90ZWN0ZWQgb3V0cHV0QmFzZTogbnVtYmVyID0gMDtcclxuICAgIHByb3RlY3RlZCBvdXRwdXRUYXJnZXQ6IG51bWJlciA9IDA7XHJcbiAgICBwcm90ZWN0ZWQgb3V0cHV0UHJldmlvdXM6IG51bWJlciA9IDA7XHJcbiAgICBwcm90ZWN0ZWQgb3V0cHV0VGFyZ2V0UHJldmlvdXM6IG51bWJlciA9IDA7XHJcbiAgICBwcm90ZWN0ZWQgZmFjdG9yOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHByb3RlY3RlZCB0aW1lOiBUaW1lID0gVGltZS5nYW1lO1xyXG4gICAgcHJvdGVjdGVkIHRpbWVWYWx1ZURlbGF5OiBudW1iZXIgPSAwO1xyXG4gICAgcHJvdGVjdGVkIHRpbWVPdXRwdXRUYXJnZXRTZXQ6IG51bWJlciA9IDA7XHJcbiAgICBwcm90ZWN0ZWQgaWRUaW1lcjogbnVtYmVyID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcsIF9mYWN0b3I6IG51bWJlciA9IDEsIF90eXBlOiBDT05UUk9MX1RZUEUgPSBDT05UUk9MX1RZUEUuUFJPUE9SVElPTkFMLCBfZGVsYXk6IG51bWJlciA9IDApIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5mYWN0b3IgPSBfZmFjdG9yO1xyXG4gICAgICB0aGlzLnR5cGUgPSBfdHlwZTtcclxuICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgICAgdGhpcy5zZXREZWxheShfZGVsYXkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSB0aW1lLW9iamVjdCB0byBiZSB1c2VkIHdoZW4gY2FsY3VsYXRpbmcgdGhlIG91dHB1dCBpbiB7QGxpbmsgQ09OVFJPTF9UWVBFLklOVEVHUkFMfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VGltZWJhc2UoX3RpbWU6IFRpbWUpOiB2b2lkIHtcclxuICAgICAgdGhpcy50aW1lID0gX3RpbWU7XHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlT3V0cHV0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGZWVkIGFuIGlucHV0IHZhbHVlIGludG8gdGhpcyBjb250cm9sIGFuZCBmaXJlIHRoZSBldmVudHMge0BsaW5rIEVWRU5UX0NPTlRST0wuSU5QVVR9IGFuZCB7QGxpbmsgRVZFTlRfQ09OVFJPTC5PVVRQVVR9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRJbnB1dChfaW5wdXQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBpZiAoIXRoaXMuYWN0aXZlKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgdGhpcy5vdXRwdXRCYXNlID0gdGhpcy5jYWxjdWxhdGVPdXRwdXQoKTtcclxuICAgICAgdGhpcy52YWx1ZVByZXZpb3VzID0gdGhpcy5nZXRWYWx1ZURlbGF5ZWQoKTtcclxuICAgICAgdGhpcy5vdXRwdXRUYXJnZXQgPSB0aGlzLmZhY3RvciAqIF9pbnB1dDtcclxuICAgICAgdGhpcy50aW1lT3V0cHV0VGFyZ2V0U2V0ID0gdGhpcy50aW1lLmdldCgpO1xyXG5cclxuICAgICAgaWYgKHRoaXMudHlwZSA9PSBDT05UUk9MX1RZUEUuRElGRkVSRU5USUFMKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZVByZXZpb3VzID0gdGhpcy5vdXRwdXRUYXJnZXQgLSB0aGlzLm91dHB1dFRhcmdldFByZXZpb3VzO1xyXG4gICAgICAgIHRoaXMub3V0cHV0VGFyZ2V0UHJldmlvdXMgPSB0aGlzLm91dHB1dFRhcmdldDtcclxuICAgICAgICB0aGlzLm91dHB1dFRhcmdldCA9IDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlRfQ09OVFJPTC5JTlBVVCkpO1xyXG4gICAgICBpZiAodGhpcy50eXBlID09IENPTlRST0xfVFlQRS5ESUZGRVJFTlRJQUwpXHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaE91dHB1dCh0aGlzLnZhbHVlUHJldmlvdXMpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaE91dHB1dChudWxsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcHVsc2UoX2lucHV0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zZXRJbnB1dChfaW5wdXQpO1xyXG4gICAgICB0aGlzLnNldElucHV0KDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSB0aW1lIHRvIHRha2UgZm9yIHRoZSBpbnRlcm5hbCBsaW5lYXIgZGFtcGVuaW5nIHVudGlsIHRoZSBmaW5hbCBvdXB1dCB2YWx1ZSBpcyByZWFjaGVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXREZWxheShfdGltZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMudGltZVZhbHVlRGVsYXkgPSBNYXRoLm1heCgwLCBfdGltZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIG51bWJlciBvZiBvdXRwdXQtZXZlbnRzIHRvIGRpc3BhdGNoIHBlciBzZWNvbmQuIFxyXG4gICAgICogQXQgdGhlIGRlZmF1bHQgb2YgMCwgdGhlIGNvbnRyb2wgb3V0cHV0IG11c3QgYmUgcG9sbGVkIGFuZCB3aWxsIG9ubHkgYWN0aXZlbHkgZGlzcGF0Y2hlZCBvbmNlIGVhY2ggdGltZSBpbnB1dCBvY2N1cnMgYW5kIHRoZSBvdXRwdXQgY2hhbmdlcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFJhdGVEaXNwYXRjaE91dHB1dChfcmF0ZURpc3BhdGNoT3V0cHV0OiBudW1iZXIgPSAwKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucmF0ZURpc3BhdGNoT3V0cHV0ID0gX3JhdGVEaXNwYXRjaE91dHB1dDtcclxuICAgICAgdGhpcy50aW1lLmRlbGV0ZVRpbWVyKHRoaXMuaWRUaW1lcik7XHJcbiAgICAgIHRoaXMuaWRUaW1lciA9IHVuZGVmaW5lZDtcclxuICAgICAgaWYgKHRoaXMucmF0ZURpc3BhdGNoT3V0cHV0KVxyXG4gICAgICAgIHRoaXMuaWRUaW1lciA9IHRoaXMudGltZS5zZXRUaW1lcigxMDAwIC8gdGhpcy5yYXRlRGlzcGF0Y2hPdXRwdXQsIDAsIHRoaXMuZGlzcGF0Y2hPdXRwdXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBmYWN0b3IgdG8gbXVsdGlwbHkgdGhlIGlucHV0IHZhbHVlIGdpdmVuIHdpdGgge0BsaW5rIHNldElucHV0fSB3aXRoXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRGYWN0b3IoX2ZhY3RvcjogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZmFjdG9yID0gX2ZhY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgdmFsdWUgZnJvbSB0aGUgb3V0cHV0IG9mIHRoaXMgY29udHJvbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0T3V0cHV0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZU91dHB1dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgb3V0cHV0IG9mIHRoaXMgY29udHJvbFxyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgY2FsY3VsYXRlT3V0cHV0KCk6IG51bWJlciB7XHJcbiAgICAgIGxldCBvdXRwdXQ6IG51bWJlciA9IDA7XHJcbiAgICAgIGxldCB2YWx1ZTogbnVtYmVyID0gdGhpcy5nZXRWYWx1ZURlbGF5ZWQoKTtcclxuXHJcbiAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBDT05UUk9MX1RZUEUuSU5URUdSQUw6XHJcbiAgICAgICAgICBsZXQgdGltZUN1cnJlbnQ6IG51bWJlciA9IHRoaXMudGltZS5nZXQoKTtcclxuICAgICAgICAgIGxldCB0aW1lRWxhcHNlZFNpbmNlSW5wdXQ6IG51bWJlciA9IHRpbWVDdXJyZW50IC0gdGhpcy50aW1lT3V0cHV0VGFyZ2V0U2V0O1xyXG4gICAgICAgICAgb3V0cHV0ID0gdGhpcy5vdXRwdXRCYXNlO1xyXG5cclxuICAgICAgICAgIGlmICh0aGlzLnRpbWVWYWx1ZURlbGF5ID4gMCkge1xyXG4gICAgICAgICAgICBpZiAodGltZUVsYXBzZWRTaW5jZUlucHV0IDwgdGhpcy50aW1lVmFsdWVEZWxheSkge1xyXG4gICAgICAgICAgICAgIG91dHB1dCArPSAwLjUgKiAodGhpcy52YWx1ZVByZXZpb3VzICsgdmFsdWUpICogdGltZUVsYXBzZWRTaW5jZUlucHV0O1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIG91dHB1dCArPSAwLjUgKiAodGhpcy52YWx1ZVByZXZpb3VzICsgdmFsdWUpICogdGhpcy50aW1lVmFsdWVEZWxheTtcclxuICAgICAgICAgICAgICB0aW1lRWxhcHNlZFNpbmNlSW5wdXQgLT0gdGhpcy50aW1lVmFsdWVEZWxheTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgb3V0cHV0ICs9IHZhbHVlICogdGltZUVsYXBzZWRTaW5jZUlucHV0O1xyXG4gICAgICAgICAgLy8gdmFsdWUgKz0gMC41ICogKHRoaXMuaW5wdXRQcmV2aW91cyAtIGlucHV0KSAqIHRoaXMudGltZUlucHV0RGVsYXkgKyBpbnB1dCAqIHRpbWVFbGFwc2VkU2luY2VJbnB1dDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQ09OVFJPTF9UWVBFLkRJRkZFUkVOVElBTDpcclxuICAgICAgICBjYXNlIENPTlRST0xfVFlQRS5QUk9QT1JUSU9OQUw6XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIG91dHB1dCA9IHZhbHVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogY2FsY3VsYXRlcyB0aGUgb3V0cHV0IGNvbnNpZGVyaW5nIHRoZSB0aW1lIG9mIHRoZSBkZWxheVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFZhbHVlRGVsYXllZCgpOiBudW1iZXIge1xyXG4gICAgICBpZiAodGhpcy50aW1lVmFsdWVEZWxheSA+IDApIHtcclxuICAgICAgICBsZXQgdGltZUVsYXBzZWRTaW5jZUlucHV0OiBudW1iZXIgPSB0aGlzLnRpbWUuZ2V0KCkgLSB0aGlzLnRpbWVPdXRwdXRUYXJnZXRTZXQ7XHJcbiAgICAgICAgaWYgKHRpbWVFbGFwc2VkU2luY2VJbnB1dCA8IHRoaXMudGltZVZhbHVlRGVsYXkpXHJcbiAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZVByZXZpb3VzICsgKHRoaXMub3V0cHV0VGFyZ2V0IC0gdGhpcy52YWx1ZVByZXZpb3VzKSAqIHRpbWVFbGFwc2VkU2luY2VJbnB1dCAvIHRoaXMudGltZVZhbHVlRGVsYXk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMub3V0cHV0VGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwcml2YXRlIGRpc3BhdGNoT3V0cHV0ID0gKF9ldmVudE9yVmFsdWU6IEV2ZW50VGltZXIgfCBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgICAgaWYgKCF0aGlzLmFjdGl2ZSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgIGxldCB0aW1lcjogVGltZXIgPSB0aGlzLnRpbWUuZ2V0VGltZXIodGhpcy5pZFRpbWVyKTtcclxuICAgICAgbGV0IG91dHB1dDogbnVtYmVyO1xyXG4gICAgICBpZiAodHlwZW9mIChfZXZlbnRPclZhbHVlKSA9PSBcIm51bWJlclwiKVxyXG4gICAgICAgIG91dHB1dCA9IF9ldmVudE9yVmFsdWU7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICBvdXRwdXQgPSB0aGlzLmNhbGN1bGF0ZU91dHB1dCgpO1xyXG4gICAgICBsZXQgb3V0cHV0Q2hhbmdlZDogYm9vbGVhbiA9IChvdXRwdXQgIT0gdGhpcy5vdXRwdXRQcmV2aW91cyk7XHJcblxyXG4gICAgICBpZiAodGltZXIpIHtcclxuICAgICAgICB0aW1lci5hY3RpdmUgPSBvdXRwdXRDaGFuZ2VkO1xyXG4gICAgICAgIGlmICghb3V0cHV0Q2hhbmdlZClcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5vdXRwdXRQcmV2aW91cyA9IG91dHB1dDtcclxuXHJcbiAgICAgIGxldCBldmVudDogQ3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfQ09OVFJPTC5PVVRQVVQsIHtcclxuICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgIG91dHB1dDogb3V0cHV0XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiQ29udHJvbC50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogSGFuZGxlcyBtdWx0aXBsZSBjb250cm9scyBhcyBpbnB1dHMgYW5kIGNyZWF0ZXMgYW4gb3V0cHV0IGZyb20gdGhhdC5cclxuICAgKiBBcyBhIHN1YmNsYXNzIG9mIHtAbGluayBDb250cm9sfSwgYXhpcyBjYWxjdWxhdGVzIHRoZSBvdXB1dCBzdW1taW5nIHVwIHRoZSBpbnB1dHMgYW5kIHByb2Nlc3NpbmcgdGhlIHJlc3VsdCB1c2luZyBpdHMgb3duIHNldHRpbmdzLiAgXHJcbiAgICogRGlzcGF0Y2hlcyB7QGxpbmsgRVZFTlRfQ09OVFJPTC5PVVRQVVR9IGFuZCB7QGxpbmsgRVZFTlRfQ09OVFJPTC5JTlBVVH0gd2hlbiBvbmUgb2YgdGhlIGNvbnRyb2xzIGRpc3BhdGNoZXMgdGhlbS5cclxuICAgKiBgYGBwbGFpbnRleHRcclxuICAgKiAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAgICogICAgICAgICAgIOKUgiDilIzilIDilIDilIDilIDilIDilIDilIDilJAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgKiAgIElucHV0IOKGkiDilIIg4pSCY29udHJvbOKUglxcICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgKiAgICAgICAgICAg4pSCIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCBcXCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgKiAgICAgICAgICAg4pSCIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgXFzilIzilIDilIDilIDilJAgICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgICDilIJcclxuICAgKiAgIElucHV0IOKGkiDilIIg4pSCY29udHJvbOKUgi0tLeKUgnN1beKUgiDihpIg4pSCaW50ZXJuYWwgY29udHJvbCDilIIg4oaSIOKUgiDihpIgT3V0cHV0XHJcbiAgICogICAgICAgICAgIOKUgiDilJTilIDilIDilIDilIDilIDilIDilIDilJggIC/ilJTilIDilIDilIDilJggICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggICDilIJcclxuICAgKiAgICAgICAgICAg4pSCIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUglxyXG4gICAqICAgSW5wdXQg4oaSIOKUgiDilIJjb250cm9s4pSCLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSCXHJcbiAgICogICAgICAgICAgIOKUgiDilJTilIDilIDilIDilIDilIDilIDilIDilJggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcclxuICAgKiAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYICBcclxuICAgKiBgYGBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQXhpcyBleHRlbmRzIENvbnRyb2wge1xyXG4gICAgcHJpdmF0ZSBjb250cm9sczogTWFwPHN0cmluZywgQ29udHJvbD4gPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHN1bVByZXZpb3VzOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIHRoZSBjb250cm9sIGdpdmVuIHRvIHRoZSBsaXN0IG9mIGNvbnRyb2xzIGZlZWRpbmcgaW50byB0aGlzIGF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkZENvbnRyb2woX2NvbnRyb2w6IENvbnRyb2wpOiB2b2lkIHtcclxuICAgICAgdGhpcy5jb250cm9scy5zZXQoX2NvbnRyb2wubmFtZSwgX2NvbnRyb2wpO1xyXG4gICAgICBfY29udHJvbC5hZGRFdmVudExpc3RlbmVyKEVWRU5UX0NPTlRST0wuSU5QVVQsIHRoaXMuaG5kSW5wdXRFdmVudCk7XHJcbiAgICAgIF9jb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfQ09OVFJPTC5PVVRQVVQsIHRoaXMuaG5kT3V0cHV0RXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY29udHJvbCB3aXRoIHRoZSBnaXZlbiBuYW1lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRDb250cm9sKF9uYW1lOiBzdHJpbmcpOiBDb250cm9sIHtcclxuICAgICAgcmV0dXJuIHRoaXMuY29udHJvbHMuZ2V0KF9uYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZXMgdGhlIGNvbnRyb2wgd2l0aCB0aGUgZ2l2ZW4gbmFtZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVtb3ZlQ29udHJvbChfbmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIGxldCBjb250cm9sOiBDb250cm9sID0gdGhpcy5nZXRDb250cm9sKF9uYW1lKTtcclxuICAgICAgaWYgKGNvbnRyb2wpIHtcclxuICAgICAgICBjb250cm9sLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlRfQ09OVFJPTC5JTlBVVCwgdGhpcy5obmRJbnB1dEV2ZW50KTtcclxuICAgICAgICBjb250cm9sLnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlRfQ09OVFJPTC5PVVRQVVQsIHRoaXMuaG5kT3V0cHV0RXZlbnQpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMuZGVsZXRlKF9uYW1lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhpcyBheGlzIGFmdGVyIHN1bW1pbmcgdXAgYWxsIGlucHV0cyBhbmQgcHJvY2Vzc2luZyB0aGUgc3VtIGFjY29yZGluZyB0byB0aGUgYXhpcycgc2V0dGluZ3NcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldE91dHB1dCgpOiBudW1iZXIge1xyXG4gICAgICBsZXQgc3VtSW5wdXQ6IG51bWJlciA9IDA7XHJcbiAgICAgIGZvciAobGV0IGNvbnRyb2wgb2YgdGhpcy5jb250cm9scykge1xyXG5cclxuICAgICAgICBpZiAoY29udHJvbFsxXS5hY3RpdmUpXHJcbiAgICAgICAgICBzdW1JbnB1dCArPSBjb250cm9sWzFdLmdldE91dHB1dCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc3VtSW5wdXQgIT0gdGhpcy5zdW1QcmV2aW91cylcclxuICAgICAgICBzdXBlci5zZXRJbnB1dChzdW1JbnB1dCk7XHJcblxyXG4gICAgICB0aGlzLnN1bVByZXZpb3VzID0gc3VtSW5wdXQ7XHJcblxyXG4gICAgICByZXR1cm4gc3VwZXIuZ2V0T3V0cHV0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBobmRPdXRwdXRFdmVudDogRXZlbnRMaXN0ZW5lciA9IChfZXZlbnQ6IEV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5hY3RpdmUpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgbGV0IGNvbnRyb2w6IENvbnRyb2wgPSAoPENvbnRyb2w+X2V2ZW50LnRhcmdldCk7XHJcbiAgICAgIGxldCBldmVudDogQ3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfQ09OVFJPTC5PVVRQVVQsIHtkZXRhaWw6IHtcclxuICAgICAgICBjb250cm9sOiBjb250cm9sLCBcclxuICAgICAgICBpbnB1dDogKDxDdXN0b21FdmVudD5fZXZlbnQpLmRldGFpbC5vdXRwdXQsXHJcbiAgICAgICAgb3V0cHV0OiB0aGlzLmdldE91dHB1dCgpXHJcbiAgICAgIH19KTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhuZElucHV0RXZlbnQ6IEV2ZW50TGlzdGVuZXIgPSAoX2V2ZW50OiBFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuYWN0aXZlKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgbGV0IGV2ZW50OiBFdmVudCA9IG5ldyBFdmVudChFVkVOVF9DT05UUk9MLklOUFVULCBfZXZlbnQpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGludGVyZmFjZSBLZXlQcmVzc2VkIHtcclxuICAgIFtjb2RlOiBzdHJpbmddOiBib29sZWFuO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29sbGVjdHMgdGhlIGtleXMgcHJlc3NlZCBvbiB0aGUga2V5Ym9hcmQgYW5kIHN0b3JlcyB0aGVpciBzdGF0dXMuIFxyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBLZXlib2FyZCB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBrZXlzUHJlc3NlZDogS2V5UHJlc3NlZCA9IEtleWJvYXJkLmluaXRpYWxpemUoKTtcclxuICAgIC8vIHByaXZhdGUgc3RhdGljIGNvZGVfZW46IE9iamVjdDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBvbmUgb2YgdGhlIGdpdmVuIGtleXMgaXMgaXMgY3VycmVudGx5IGJlaW5nIHByZXNzZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgaXNQcmVzc2VkT25lKF9rZXlzOiBLRVlCT0FSRF9DT0RFW10pOiBib29sZWFuIHtcclxuICAgICAgZm9yIChsZXQgY29kZSBvZiBfa2V5cykge1xyXG4gICAgICAgIGlmIChLZXlib2FyZC5rZXlzUHJlc3NlZFtjb2RlXSlcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbGwgb2YgdGhlIGdpdmVuIGtleXMgYXJlIGN1cnJlbnRseSBiZWluZyBwcmVzc2VkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgaXNQcmVzc2VkQ29tYm8oX2tleXM6IEtFWUJPQVJEX0NPREVbXSk6IGJvb2xlYW4ge1xyXG4gICAgICBmb3IgKGxldCBjb2RlIG9mIF9rZXlzKSB7XHJcbiAgICAgICAgaWYgKCFLZXlib2FyZC5rZXlzUHJlc3NlZFtjb2RlXSlcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGdpdmVuIGFzIF9hY3RpdmUgaWYgb25lIG9yLCB3aGVuIF9jb21ibyBpcyB0cnVlLCBhbGwgb2YgdGhlIGdpdmVuIGtleXMgYXJlIHByZXNzZWQuXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBnaXZlbiBhcyBfaW5hY3RpdmUgaWYgbm90LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIG1hcFRvVmFsdWU8VD4oX2FjdGl2ZTogVCwgX2luYWN0aXZlOiBULCBfa2V5czogS0VZQk9BUkRfQ09ERVtdLCBfY29tYm86IGJvb2xlYW4gPSBmYWxzZSk6IFQge1xyXG4gICAgICBpZiAoIV9jb21ibyAmJiBLZXlib2FyZC5pc1ByZXNzZWRPbmUoX2tleXMpKVxyXG4gICAgICAgIHJldHVybiBfYWN0aXZlO1xyXG4gICAgICBpZiAoS2V5Ym9hcmQuaXNQcmVzc2VkQ29tYm8oX2tleXMpKVxyXG4gICAgICAgIHJldHVybiBfYWN0aXZlO1xyXG4gICAgICByZXR1cm4gX2luYWN0aXZlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGJhbGFuY2VkIHRlcm5hcnkgdmFsdWUgKGVpdGhlciAtMSwgMCBvciAxKSBcclxuICAgICAqIGFjY29yZGluZyB0byB0aGUgbWF0Y2ggb2YgdGhlIGtleXMgY3VycmVudGx5IGJlaW5nIHByZXNzZWQgYW5kIHRoZSBsaXN0cyBvZiBrZXlzIGdpdmVuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIG1hcFRvVHJpdChfcG9zaXRpdmU6IEtFWUJPQVJEX0NPREVbXSwgX25lZ2F0aXZlOiBLRVlCT0FSRF9DT0RFW10pOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gS2V5Ym9hcmQubWFwVG9WYWx1ZSgtMSwgMCwgX25lZ2F0aXZlKSArIEtleWJvYXJkLm1hcFRvVmFsdWUoMSwgMCwgX3Bvc2l0aXZlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwdWJsaWMgc3RhdGljIGxvY2FsZShfa2V5Ym9hcmQ6IE9iamVjdCk6IHZvaWQge1xyXG4gICAgLy8gICBpZiAoIUtleWJvYXJkLmNvZGVfZW4pIHtcclxuICAgIC8vICAgICAvLyBzYXZlIG9yaWdpbmFsIGtleWJvYXJkIGNvZGVzIHRvIGJlIGFibGUgdG8gc3dpdGNoIGJhY2sgbGF0ZXJcclxuICAgIC8vICAgICBLZXlib2FyZC5jb2RlX2VuID0ge307XHJcbiAgICAvLyAgICAgT2JqZWN0LmFzc2lnbihLZXlib2FyZC5jb2RlX2VuLCBLRVlCT0FSRF9DT0RFKTtcclxuICAgIC8vICAgfVxyXG5cclxuICAgIC8vICAgZm9yIChsZXQga2V5IGluIF9rZXlib2FyZCkge1xyXG4gICAgLy8gICAgIGxldCB2YWx1ZTogc3RyaW5nID0gUmVmbGVjdC5nZXQoX2tleWJvYXJkLCBrZXkpO1xyXG4gICAgLy8gICAgIGZvciAobGV0IG9yaWdpbmFsIGluIEtFWUJPQVJEX0NPREUpXHJcbiAgICAvLyAgICAgICBpZiAoUmVmbGVjdC5nZXQoS0VZQk9BUkRfQ09ERSwgb3JpZ2luYWwpID09IHZhbHVlKVxyXG4gICAgLy8gICAgICAgICAvLyByZW1vdmUgb3JpZ2luYWwga2V5IHRoZSB5aWVsZHMgdGhlIHZhbHVlXHJcbiAgICAvLyAgICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoS0VZQk9BUkRfQ09ERSwgb3JpZ2luYWwpO1xyXG4gICAgLy8gICAgIC8vIGFkZCBuZXcga2V5IHRvIHlpZWxkIHRoYXQgdmFsdWVcclxuICAgIC8vICAgICBSZWZsZWN0LnNldChLRVlCT0FSRF9DT0RFLCBrZXksIHZhbHVlKTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGluaXRpYWxpemUoKTogS2V5UHJlc3NlZCB7XHJcbiAgICAgIGxldCBzdG9yZTogS2V5UHJlc3NlZCA9IHt9O1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBLZXlib2FyZC5obmRLZXlJbnRlcmFjdGlvbik7XHJcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBLZXlib2FyZC5obmRLZXlJbnRlcmFjdGlvbik7XHJcbiAgICAgIHJldHVybiBzdG9yZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBobmRLZXlJbnRlcmFjdGlvbihfZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcclxuICAgICAgS2V5Ym9hcmQua2V5c1ByZXNzZWRbX2V2ZW50LmNvZGVdID0gKF9ldmVudC50eXBlID09IFwia2V5ZG93blwiKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCIvLyAvIDxyZWZlcmVuY2UgcGF0aD1cIkRlYnVnVGFyZ2V0LnRzXCIvPlxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBSb3V0aW5nIHRvIHRoZSBhbGVydCBib3hcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRGVidWdBbGVydCBleHRlbmRzIERlYnVnVGFyZ2V0IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVsZWdhdGVzOiBNYXBEZWJ1Z0ZpbHRlclRvRGVsZWdhdGUgPSB7XHJcbiAgICAgIFtERUJVR19GSUxURVIuSU5GT106IERlYnVnQWxlcnQuY3JlYXRlRGVsZWdhdGUoREVCVUdfU1lNQk9MW0RFQlVHX0ZJTFRFUi5JTkZPXSksXHJcbiAgICAgIFtERUJVR19GSUxURVIuTE9HXTogRGVidWdBbGVydC5jcmVhdGVEZWxlZ2F0ZShERUJVR19TWU1CT0xbREVCVUdfRklMVEVSLkxPR10pLFxyXG4gICAgICBbREVCVUdfRklMVEVSLldBUk5dOiBEZWJ1Z0FsZXJ0LmNyZWF0ZURlbGVnYXRlKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuV0FSTl0pLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkVSUk9SXTogRGVidWdBbGVydC5jcmVhdGVEZWxlZ2F0ZShERUJVR19TWU1CT0xbREVCVUdfRklMVEVSLkVSUk9SXSksXHJcbiAgICAgIFtERUJVR19GSUxURVIuRlVER0VdOiBEZWJ1Z0FsZXJ0LmNyZWF0ZURlbGVnYXRlKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuRlVER0VdKSxcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5TT1VSQ0VdOiBEZWJ1Z0FsZXJ0LmNyZWF0ZURlbGVnYXRlKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuU09VUkNFXSlcclxuICAgIH07XHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZURlbGVnYXRlKF9oZWFkbGluZTogc3RyaW5nKTogRnVuY3Rpb24ge1xyXG4gICAgICBsZXQgZGVsZWdhdGU6IEZ1bmN0aW9uID0gZnVuY3Rpb24gKF9tZXNzYWdlOiBPYmplY3QsIC4uLl9hcmdzOiBPYmplY3RbXSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBhcmdzOiBzdHJpbmdbXSA9IF9hcmdzLm1hcChfYXJnID0+IF9hcmcudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgbGV0IG91dDogc3RyaW5nID0gX2hlYWRsaW5lICsgXCIgXCIgKyBEZWJ1Z1RhcmdldC5tZXJnZUFyZ3VtZW50cyhfbWVzc2FnZSwgYXJncyk7XHJcbiAgICAgICAgYWxlcnQob3V0KTtcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIGRlbGVnYXRlO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWdUYXJnZXQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gICAgLyoqXHJcbiAgICAgKiBSb3V0aW5nIHRvIGEgSFRNTERpYWxvZ0VsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIERlYnVnRGlhbG9nIGV4dGVuZHMgRGVidWdUYXJnZXQge1xyXG4gICAgICAgIC8vIFRPRE86IGNoZWNrb3V0IEhUTUxEaWFsb2dFbGVtZW50OyAhISFcclxuICAgIH1cclxufSIsIi8vIC8gPHJlZmVyZW5jZSBwYXRoPVwiRGVidWdUYXJnZXQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFJvdXRlIHRvIGFuIEhUTUxUZXh0QXJlYSwgbWF5IGJlIG9ic29sZXRlIHdoZW4gdXNpbmcgSFRNTERpYWxvZ0VsZW1lbnRcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRGVidWdUZXh0QXJlYSBleHRlbmRzIERlYnVnVGFyZ2V0IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgdGV4dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XHJcbiAgICBwdWJsaWMgc3RhdGljIGF1dG9TY3JvbGw6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVsZWdhdGVzOiBNYXBEZWJ1Z0ZpbHRlclRvRGVsZWdhdGUgPSB7XHJcbiAgICAgIFtERUJVR19GSUxURVIuSU5GT106IERlYnVnVGV4dEFyZWEuY3JlYXRlRGVsZWdhdGUoREVCVUdfU1lNQk9MW0RFQlVHX0ZJTFRFUi5JTkZPXSksXHJcbiAgICAgIFtERUJVR19GSUxURVIuTE9HXTogRGVidWdUZXh0QXJlYS5jcmVhdGVEZWxlZ2F0ZShERUJVR19TWU1CT0xbREVCVUdfRklMVEVSLkxPR10pLFxyXG4gICAgICBbREVCVUdfRklMVEVSLldBUk5dOiBEZWJ1Z1RleHRBcmVhLmNyZWF0ZURlbGVnYXRlKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuV0FSTl0pLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkVSUk9SXTogRGVidWdUZXh0QXJlYS5jcmVhdGVEZWxlZ2F0ZShERUJVR19TWU1CT0xbREVCVUdfRklMVEVSLkVSUk9SXSksXHJcbiAgICAgIFtERUJVR19GSUxURVIuRlVER0VdOiBEZWJ1Z1RleHRBcmVhLmNyZWF0ZURlbGVnYXRlKERFQlVHX1NZTUJPTFtERUJVR19GSUxURVIuRlVER0VdKSxcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5DTEVBUl06IERlYnVnVGV4dEFyZWEuY2xlYXIsXHJcbiAgICAgIFtERUJVR19GSUxURVIuR1JPVVBdOiBEZWJ1Z1RleHRBcmVhLmdyb3VwLFxyXG4gICAgICBbREVCVUdfRklMVEVSLkdST1VQQ09MTEFQU0VEXTogRGVidWdUZXh0QXJlYS5ncm91cCxcclxuICAgICAgW0RFQlVHX0ZJTFRFUi5HUk9VUEVORF06IERlYnVnVGV4dEFyZWEuZ3JvdXBFbmQsXHJcbiAgICAgIFtERUJVR19GSUxURVIuU09VUkNFXTogRGVidWdUZXh0QXJlYS5jcmVhdGVEZWxlZ2F0ZShERUJVR19TWU1CT0xbREVCVUdfRklMVEVSLlNPVVJDRV0pXHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ3JvdXBzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgIERlYnVnVGV4dEFyZWEudGV4dEFyZWEudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICBEZWJ1Z1RleHRBcmVhLmdyb3VwcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ3JvdXAoX25hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICBEZWJ1Z1RleHRBcmVhLnByaW50KFwi4pa8IFwiICsgX25hbWUpO1xyXG4gICAgICBEZWJ1Z1RleHRBcmVhLmdyb3Vwcy5wdXNoKF9uYW1lKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ3JvdXBFbmQoKTogdm9pZCB7XHJcbiAgICAgIERlYnVnVGV4dEFyZWEuZ3JvdXBzLnBvcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRGVsZWdhdGUoX2hlYWRsaW5lOiBzdHJpbmcpOiBGdW5jdGlvbiB7XHJcbiAgICAgIGxldCBkZWxlZ2F0ZTogRnVuY3Rpb24gPSBmdW5jdGlvbiAoX21lc3NhZ2U6IE9iamVjdCwgLi4uX2FyZ3M6IE9iamVjdFtdKTogdm9pZCB7XHJcbiAgICAgICAgRGVidWdUZXh0QXJlYS5wcmludChfaGVhZGxpbmUgKyBcIiBcIiArIERlYnVnVGFyZ2V0Lm1lcmdlQXJndW1lbnRzKF9tZXNzYWdlLCBfYXJncykpO1xyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gZGVsZWdhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0SW5kZW50YXRpb24oX2xldmVsOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgcmVzdWx0OiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgX2xldmVsOyBpKyspXHJcbiAgICAgICAgcmVzdWx0ICs9IFwifCBcIjtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBwcmludChfdGV4dDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIERlYnVnVGV4dEFyZWEudGV4dEFyZWEudGV4dENvbnRlbnQgKz0gRGVidWdUZXh0QXJlYS5nZXRJbmRlbnRhdGlvbihEZWJ1Z1RleHRBcmVhLmdyb3Vwcy5sZW5ndGgpICsgX3RleHQgKyBcIlxcblwiO1xyXG4gICAgICBpZiAoRGVidWdUZXh0QXJlYS5hdXRvU2Nyb2xsKVxyXG4gICAgICAgIERlYnVnVGV4dEFyZWEudGV4dEFyZWEuc2Nyb2xsVG9wID0gRGVidWdUZXh0QXJlYS50ZXh0QXJlYS5zY3JvbGxIZWlnaHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogVGhlIGNvZGVzIHNlbnQgZnJvbSBhIHN0YW5kYXJkIGVuZ2xpc2gga2V5Ym9hcmQgbGF5b3V0XHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gS0VZQk9BUkRfQ09ERSB7XHJcbiAgICBBID0gXCJLZXlBXCIsXHJcbiAgICBCID0gXCJLZXlCXCIsXHJcbiAgICBDID0gXCJLZXlDXCIsXHJcbiAgICBEID0gXCJLZXlEXCIsXHJcbiAgICBFID0gXCJLZXlFXCIsXHJcbiAgICBGID0gXCJLZXlGXCIsXHJcbiAgICBHID0gXCJLZXlHXCIsXHJcbiAgICBIID0gXCJLZXlIXCIsXHJcbiAgICBJID0gXCJLZXlJXCIsXHJcbiAgICBKID0gXCJLZXlKXCIsXHJcbiAgICBLID0gXCJLZXlLXCIsXHJcbiAgICBMID0gXCJLZXlMXCIsXHJcbiAgICBNID0gXCJLZXlNXCIsXHJcbiAgICBOID0gXCJLZXlOXCIsXHJcbiAgICBPID0gXCJLZXlPXCIsXHJcbiAgICBQID0gXCJLZXlQXCIsXHJcbiAgICBRID0gXCJLZXlRXCIsXHJcbiAgICBSID0gXCJLZXlSXCIsXHJcbiAgICBTID0gXCJLZXlTXCIsXHJcbiAgICBUID0gXCJLZXlUXCIsXHJcbiAgICBVID0gXCJLZXlVXCIsXHJcbiAgICBWID0gXCJLZXlWXCIsXHJcbiAgICBXID0gXCJLZXlXXCIsXHJcbiAgICBYID0gXCJLZXlYXCIsXHJcbiAgICBZID0gXCJLZXlZXCIsXHJcbiAgICBaID0gXCJLZXlaXCIsXHJcbiAgICBFU0MgPSBcIkVzY2FwZVwiLFxyXG4gICAgWkVSTyA9IFwiRGlnaXQwXCIsXHJcbiAgICBPTkUgPSBcIkRpZ2l0MVwiLFxyXG4gICAgVFdPID0gXCJEaWdpdDJcIixcclxuICAgIFRIUkVFID0gXCJEaWdpdDNcIixcclxuICAgIEZPVVIgPSBcIkRpZ2l0NFwiLFxyXG4gICAgRklWRSA9IFwiRGlnaXQ1XCIsXHJcbiAgICBTSVggPSBcIkRpZ2l0NlwiLFxyXG4gICAgU0VWRU4gPSBcIkRpZ2l0N1wiLFxyXG4gICAgRUlHSFQgPSBcIkRpZ2l0OFwiLFxyXG4gICAgTklORSA9IFwiRGlnaXQ5XCIsXHJcbiAgICBNSU5VUyA9IFwiTWludXNcIixcclxuICAgIEVRVUFMID0gXCJFcXVhbFwiLFxyXG4gICAgQkFDS1NQQUNFID0gXCJCYWNrc3BhY2VcIixcclxuICAgIFRBQlVMQVRPUiA9IFwiVGFiXCIsXHJcbiAgICBCUkFDS0VUX0xFRlQgPSBcIkJyYWNrZXRMZWZ0XCIsXHJcbiAgICBCUkFDS0VUX1JJR0hUID0gXCJCcmFja2V0UmlnaHRcIixcclxuICAgIEVOVEVSID0gXCJFbnRlclwiLFxyXG4gICAgQ1RSTF9MRUZUID0gXCJDb250cm9sTGVmdFwiLFxyXG4gICAgU0VNSUNPTE9OID0gXCJTZW1pY29sb25cIixcclxuICAgIFFVT1RFID0gXCJRdW90ZVwiLFxyXG4gICAgQkFDS19RVU9URSA9IFwiQmFja3F1b3RlXCIsXHJcbiAgICBTSElGVF9MRUZUID0gXCJTaGlmdExlZnRcIixcclxuICAgIEJBQ0tTTEFTSCA9IFwiQmFja3NsYXNoXCIsXHJcbiAgICBDT01NQSA9IFwiQ29tbWFcIixcclxuICAgIFBFUklPRCA9IFwiUGVyaW9kXCIsXHJcbiAgICBTTEFTSCA9IFwiU2xhc2hcIixcclxuICAgIFNISUZUX1JJR0hUID0gXCJTaGlmdFJpZ2h0XCIsXHJcbiAgICBOVU1QQURfTVVMVElQTFkgPSBcIk51bXBhZE11bHRpcGx5XCIsXHJcbiAgICBBTFRfTEVGVCA9IFwiQWx0TGVmdFwiLFxyXG4gICAgU1BBQ0UgPSBcIlNwYWNlXCIsXHJcbiAgICBDQVBTX0xPQ0sgPSBcIkNhcHNMb2NrXCIsXHJcbiAgICBGMSA9IFwiRjFcIixcclxuICAgIEYyID0gXCJGMlwiLFxyXG4gICAgRjMgPSBcIkYzXCIsXHJcbiAgICBGNCA9IFwiRjRcIixcclxuICAgIEY1ID0gXCJGNVwiLFxyXG4gICAgRjYgPSBcIkY2XCIsXHJcbiAgICBGNyA9IFwiRjdcIixcclxuICAgIEY4ID0gXCJGOFwiLFxyXG4gICAgRjkgPSBcIkY5XCIsXHJcbiAgICBGMTAgPSBcIkYxMFwiLFxyXG4gICAgUEFVU0UgPSBcIlBhdXNlXCIsXHJcbiAgICBTQ1JPTExfTE9DSyA9IFwiU2Nyb2xsTG9ja1wiLFxyXG4gICAgTlVNUEFENyA9IFwiTnVtcGFkN1wiLFxyXG4gICAgTlVNUEFEOCA9IFwiTnVtcGFkOFwiLFxyXG4gICAgTlVNUEFEOSA9IFwiTnVtcGFkOVwiLFxyXG4gICAgTlVNUEFEX1NVQlRSQUNUID0gXCJOdW1wYWRTdWJ0cmFjdFwiLFxyXG4gICAgTlVNUEFENCA9IFwiTnVtcGFkNFwiLFxyXG4gICAgTlVNUEFENSA9IFwiTnVtcGFkNVwiLFxyXG4gICAgTlVNUEFENiA9IFwiTnVtcGFkNlwiLFxyXG4gICAgTlVNUEFEX0FERCA9IFwiTnVtcGFkQWRkXCIsXHJcbiAgICBOVU1QQUQxID0gXCJOdW1wYWQxXCIsXHJcbiAgICBOVU1QQUQyID0gXCJOdW1wYWQyXCIsXHJcbiAgICBOVU1QQUQzID0gXCJOdW1wYWQzXCIsXHJcbiAgICBOVU1QQUQwID0gXCJOdW1wYWQwXCIsXHJcbiAgICBOVU1QQURfREVDSU1BTCA9IFwiTnVtcGFkRGVjaW1hbFwiLFxyXG4gICAgUFJJTlRfU0NSRUVOID0gXCJQcmludFNjcmVlblwiLFxyXG4gICAgSU5UTF9CQUNLX1NMQVNIID0gXCJJbnRsQmFja1NsYXNoXCIsXHJcbiAgICBGMTEgPSBcIkYxMVwiLFxyXG4gICAgRjEyID0gXCJGMTJcIixcclxuICAgIE5VTVBBRF9FUVVBTCA9IFwiTnVtcGFkRXF1YWxcIixcclxuICAgIEYxMyA9IFwiRjEzXCIsXHJcbiAgICBGMTQgPSBcIkYxNFwiLFxyXG4gICAgRjE1ID0gXCJGMTVcIixcclxuICAgIEYxNiA9IFwiRjE2XCIsXHJcbiAgICBGMTcgPSBcIkYxN1wiLFxyXG4gICAgRjE4ID0gXCJGMThcIixcclxuICAgIEYxOSA9IFwiRjE5XCIsXHJcbiAgICBGMjAgPSBcIkYyMFwiLFxyXG4gICAgRjIxID0gXCJGMjFcIixcclxuICAgIEYyMiA9IFwiRjIyXCIsXHJcbiAgICBGMjMgPSBcIkYyM1wiLFxyXG4gICAgRjI0ID0gXCJGMjRcIixcclxuICAgIEtBTkFfTU9ERSA9IFwiS2FuYU1vZGVcIixcclxuICAgIExBTkcyID0gXCJMYW5nMlwiLFxyXG4gICAgTEFORzEgPSBcIkxhbmcxXCIsXHJcbiAgICBJTlRMX1JPID0gXCJJbnRsUm9cIixcclxuICAgIENPTlZFUlQgPSBcIkNvbnZlcnRcIixcclxuICAgIE5PTl9DT05WRVJUID0gXCJOb25Db252ZXJ0XCIsXHJcbiAgICBJTlRMX1lFTiA9IFwiSW50bFllblwiLFxyXG4gICAgTlVNUEFEX0NPTU1BID0gXCJOdW1wYWRDb21tYVwiLFxyXG4gICAgVU5ETyA9IFwiVW5kb1wiLFxyXG4gICAgUEFTVEUgPSBcIlBhc3RlXCIsXHJcbiAgICBNRURJQV9UUkFDS19QUkVWSU9VUyA9IFwiTWVkaWFUcmFja1ByZXZpb3VzXCIsXHJcbiAgICBDVVQgPSBcIkN1dFwiLFxyXG4gICAgQ09QWSA9IFwiQ29weVwiLFxyXG4gICAgTUVESUFfVFJBQ0tfTkVYVCA9IFwiTWVkaWFUcmFja05leHRcIixcclxuICAgIE5VTVBBRF9FTlRFUiA9IFwiTnVtcGFkRW50ZXJcIixcclxuICAgIENUUkxfUklHSFQgPSBcIkNvbnRyb2xSaWdodFwiLFxyXG4gICAgQVVESU9fVk9MVU1FX01VVEUgPSBcIkF1ZGlvVm9sdW1lTXV0ZVwiLFxyXG4gICAgTEFVTkNIX0FQUDIgPSBcIkxhdW5jaEFwcDJcIixcclxuICAgIE1FRElBX1BMQVlfUEFVU0UgPSBcIk1lZGlhUGxheVBhdXNlXCIsXHJcbiAgICBNRURJQV9TVE9QID0gXCJNZWRpYVN0b3BcIixcclxuICAgIEVKRUNUID0gXCJFamVjdFwiLFxyXG4gICAgQVVESU9fVk9MVU1FX0RPV04gPSBcIkF1ZGlvVm9sdW1lRG93blwiLFxyXG4gICAgVk9MVU1FX0RPV04gPSBcIlZvbHVtZURvd25cIixcclxuICAgIEFVRElPX1ZPTFVNRV9VUCA9IFwiQXVkaW9Wb2x1bWVVcFwiLFxyXG4gICAgVk9MVU1FX1VQID0gXCJWb2x1bWVVcFwiLFxyXG4gICAgQlJPV1NFUl9IT01FID0gXCJCcm93c2VySG9tZVwiLFxyXG4gICAgTlVNUEFEX0RJVklERSA9IFwiTnVtcGFkRGl2aWRlXCIsXHJcbiAgICBBTFRfUklHSFQgPSBcIkFsdFJpZ2h0XCIsXHJcbiAgICBIRUxQID0gXCJIZWxwXCIsXHJcbiAgICBOVU1fTE9DSyA9IFwiTnVtTG9ja1wiLFxyXG4gICAgSE9NRSA9IFwiSG9tZVwiLFxyXG4gICAgQVJST1dfVVAgPSBcIkFycm93VXBcIixcclxuICAgIEFSUk9XX1JJR0hUID0gXCJBcnJvd1JpZ2h0XCIsXHJcbiAgICBBUlJPV19ET1dOID0gXCJBcnJvd0Rvd25cIixcclxuICAgIEFSUk9XX0xFRlQgPSBcIkFycm93TGVmdFwiLFxyXG4gICAgRU5EID0gXCJFbmRcIixcclxuICAgIFBBR0VfVVAgPSBcIlBhZ2VVcFwiLFxyXG4gICAgUEFHRV9ET1dOID0gXCJQYWdlRG93blwiLFxyXG4gICAgSU5TRVJUID0gXCJJbnNlcnRcIixcclxuICAgIERFTEVURSA9IFwiRGVsZXRlXCIsXHJcbiAgICBNRVRBX0xFRlQgPSBcIk1ldGFfTGVmdFwiLFxyXG4gICAgT1NfTEVGVCA9IFwiT1NMZWZ0XCIsXHJcbiAgICBNRVRBX1JJR0hUID0gXCJNZXRhUmlnaHRcIixcclxuICAgIE9TX1JJR0hUID0gXCJPU1JpZ2h0XCIsXHJcbiAgICBDT05URVhUX01FTlUgPSBcIkNvbnRleHRNZW51XCIsXHJcbiAgICBQT1dFUiA9IFwiUG93ZXJcIixcclxuICAgIEJST1dTRVJfU0VBUkNIID0gXCJCcm93c2VyU2VhcmNoXCIsXHJcbiAgICBCUk9XU0VSX0ZBVk9SSVRFUyA9IFwiQnJvd3NlckZhdm9yaXRlc1wiLFxyXG4gICAgQlJPV1NFUl9SRUZSRVNIID0gXCJCcm93c2VyUmVmcmVzaFwiLFxyXG4gICAgQlJPV1NFUl9TVE9QID0gXCJCcm93c2VyU3RvcFwiLFxyXG4gICAgQlJPV1NFUl9GT1JXQVJEID0gXCJCcm93c2VyRm9yd2FyZFwiLFxyXG4gICAgQlJPV1NFUl9CQUNLID0gXCJCcm93c2VyQmFja1wiLFxyXG4gICAgTEFVTkNIX0FQUDEgPSBcIkxhdW5jaEFwcDFcIixcclxuICAgIExBVU5DSF9NQUlMID0gXCJMYXVuY2hNYWlsXCIsXHJcbiAgICBMQVVOQ0hfTUVESUFfUExBWUVSID0gXCJMYXVuY2hNZWRpYVBsYXllclwiLFxyXG5cclxuICAgIC8vbWFjIGJyaW5ncyB0aGlzIGJ1dHR0b25cclxuICAgIEZOID0gXCJGblwiLCAvL25vIGV2ZW50IGZpcmVkIGFjdHVhbGx5XHJcblxyXG4gICAgLy9MaW51eCBicmluZ3MgdGhlc2VcclxuICAgIEFHQUlOID0gXCJBZ2FpblwiLFxyXG4gICAgUFJPUFMgPSBcIlByb3BzXCIsXHJcbiAgICBTRUxFQ1QgPSBcIlNlbGVjdFwiLFxyXG4gICAgT1BFTiA9IFwiT3BlblwiLFxyXG4gICAgRklORCA9IFwiRmluZFwiLFxyXG4gICAgV0FLRV9VUCA9IFwiV2FrZVVwXCIsXHJcbiAgICBOVU1QQURfUEFSRU5UX0xFRlQgPSBcIk51bXBhZFBhcmVudExlZnRcIixcclxuICAgIE5VTVBBRF9QQVJFTlRfUklHSFQgPSBcIk51bXBhZFBhcmVudFJpZ2h0XCIsXHJcblxyXG4gICAgLy9hbmRyb2lkXHJcbiAgICBTTEVFUCA9IFwiU2xlZXBcIlxyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGVudW0gS0VZQk9BUkRfQ09ERV9ERSB7XHJcbiAgICBaID0gS0VZQk9BUkRfQ09ERS5ZLFxyXG4gICAgWSA9IEtFWUJPQVJEX0NPREUuWixcclxuICAgIMOWID0gS0VZQk9BUkRfQ09ERS5TRU1JQ09MT04sXHJcbiAgICDDhCA9IEtFWUJPQVJEX0NPREUuUVVPVEUsXHJcbiAgICDDnCA9IEtFWUJPQVJEX0NPREUuQlJBQ0tFVF9MRUZULFxyXG4gICAgSEFTSCA9IEtFWUJPQVJEX0NPREUuQkFDS1NMQVNILFxyXG4gICAgUExVUyA9IEtFWUJPQVJEX0NPREUuQlJBQ0tFVF9SSUdIVCxcclxuICAgIMOfID0gS0VZQk9BUkRfQ09ERS5NSU5VUyxcclxuICAgIEFDVVRFID0gS0VZQk9BUkRfQ09ERS5FUVVBTCxcclxuICAgIExFU1NfVEhBTiA9IEtFWUJPQVJEX0NPREUuSU5UTF9CQUNLX1NMQVNILFxyXG4gICAgTUlOVVMgPSBLRVlCT0FSRF9DT0RFLlNMQVNIXHJcbiAgfVxyXG5cclxuICAvKiBcclxuICBGaXJlZm94IGNhbid0IG1ha2UgdXNlIG9mIHRob3NlIGJ1dHRvbnMgYW5kIENvbWJpbmF0aW9uczpcclxuICBTSU5HRUxFX0JVVFRPTlM6XHJcbiAgIERydWNrLFxyXG4gIENPTUJJTkFUSU9OUzpcclxuICAgU2hpZnQgKyBGMTAsIFNoaWZ0ICsgTnVtcGFkNSxcclxuICAgQ1RSTCArIHEsIENUUkwgKyBGNCxcclxuICAgQUxUICsgRjEsIEFMVCArIEYyLCBBTFQgKyBGMywgQUxUICsgRjcsIEFMVCArIEY4LCBBTFQgKyBGMTBcclxuICBPcGVyYSB3b24ndCBkbyBnb29kIHdpdGggdGhlc2UgQnV0dG9ucyBhbmQgY29tYmluYXRpb25zOlxyXG4gIFNJTkdMRV9CVVRUT05TOlxyXG4gICBGbG9hdDMyQXJyYXksIEYxMSwgQUxULFxyXG4gIENPTUJJTkFUSU9OUzpcclxuICAgQ1RSTCArIHEsIENUUkwgKyB0LCBDVFJMICsgaCwgQ1RSTCArIGcsIENUUkwgKyBuLCBDVFJMICsgZiBcclxuICAgQUxUICsgRjEsIEFMVCArIEYyLCBBTFQgKyBGNCwgQUxUICsgRjUsIEFMVCArIEY2LCBBTFQgKyBGNywgQUxUICsgRjgsIEFMVCArIEYxMFxyXG4gICAqL1xyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgICBleHBvcnQgY29uc3QgZW51bSBFVkVOVF9USU1FUiB7XHJcbiAgICAgICAgQ0FMTCA9IFwixpJsYXBzZVwiXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFuIGV2ZW50IHRoYXQgcmVwcmVzZW50cyBhIGNhbGwgZnJvbSBhIHtAbGluayBUaW1lcn1cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIEV2ZW50VGltZXIge1xyXG4gICAgICAgIHB1YmxpYyB0eXBlOiBFVkVOVF9USU1FUiA9IEVWRU5UX1RJTUVSLkNBTEw7XHJcbiAgICAgICAgcHVibGljIHRhcmdldDogVGltZXI7XHJcbiAgICAgICAgcHVibGljIGFyZ3VtZW50czogT2JqZWN0W107XHJcbiAgICAgICAgcHVibGljIGZpcnN0Q2FsbDogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgcHVibGljIGxhc3RDYWxsOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgcHVibGljIGNvdW50OiBudW1iZXI7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKF90aW1lcjogVGltZXIsIC4uLl9hcmd1bWVudHM6IE9iamVjdFtdKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gX3RpbWVyO1xyXG4gICAgICAgICAgICB0aGlzLmFyZ3VtZW50cyA9IF9hcmd1bWVudHM7XHJcbiAgICAgICAgICAgIHRoaXMuZmlyc3RDYWxsID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBDdXN0b20gdG91Y2ggZXZlbnRzXHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gRVZFTlRfVE9VQ0gge1xyXG4gICAgLyoqIGN1c3RvbSBldmVudCBmaXJlZCBpbiBhZGRpdGlvbiB0byB0aGUgc3RhbmRhcmQgdG91Y2htb3ZlLCBkZXRhaWxzIG9mZnNldCB0byBzdGFydGluZyB0b3VjaCAqL1xyXG4gICAgTU9WRSA9IFwidG91Y2hNb3ZlXCIsXHJcbiAgICAvKiogY3VzdG9tIGV2ZW50IGZpcmVkIHdoZW4gdGhlIHRvdWNoZXMgaGF2ZW4ndCBtb3ZlZCBvdXRzaWRlIG9mIHRoZSB0YXAgcmFkaXVzICovXHJcbiAgICBUQVAgPSBcInRvdWNoVGFwXCIsXHJcbiAgICAvKiogY3VzdG9tIGV2ZW50IGZpcmVkIHdoZW4gdGhlIHRvdWNoZXMgaGF2ZSBtb3ZlZCBvdXRzaWRlIG9mIHRoZSBub3RjaCByYWRpdXMsIGRldGFpbHMgb2Zmc2V0IGFuZCBjYXJkaW5hbCBkaXJlY3Rpb24gKi9cclxuICAgIE5PVENIID0gXCJ0b3VjaE5vdGNoXCIsXHJcbiAgICAvKiogY3VzdG9tIGV2ZW50IGZpcmVkIHdoZW4gdGhlIHRvdWNoZXMgaGF2ZW4ndCBtb3ZlZCBvdXRzaWRlIG9mIHRoZSB0YXAgcmFkaXVzIGZvciBzb21lIHRpbWUgKi9cclxuICAgIExPTkcgPSBcInRvdWNoTG9uZ1wiLFxyXG4gICAgLyoqIGN1c3RvbSBldmVudCBmaXJlZCB3aGVuIHR3byB0YXBzIHdlcmUgZGV0ZWN0ZWQgaW4gc2hvcnQgc3VjY2Vzc2lvbiAqL1xyXG4gICAgRE9VQkxFID0gXCJ0b3VjaERvdWJsZVwiLFxyXG4gICAgLyoqIGN1c3RvbSBldmVudCBmaXJlZCB3aGVuIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBvbmx5IHR3byB0b3VjaGVzIGNoYW5nZXMgYmV5b25kIGEgdG9sZXJhbmNlICovXHJcbiAgICBQSU5DSCA9IFwidG91Y2hQaW5jaFwiLFxyXG4gICAgLyoqIGN1c3RvbSBldmVudCBub3QgaW1wbGVtZW50ZWQgeWV0ICovXHJcbiAgICBST1RBVEUgPSBcInRvdWNoUm90YXRlXCJcclxuICB9XHJcblxyXG4gIC8qKiBEZXRhaWxzIGZvciBDdXN0b21Ub3VjaEV2ZW50cywgdXNlIGFzIGdlbmVyaWMgQ3VzdG9tRXZlbnQ8RXZlbnRUb3VjaERldGFpbD4gKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEV2ZW50VG91Y2hEZXRhaWwge1xyXG4gICAgcG9zaXRpb246IFZlY3RvcjI7XHJcbiAgICB0b3VjaGVzOiBUb3VjaExpc3Q7XHJcbiAgICBvZmZzZXQ/OiBWZWN0b3IyO1xyXG4gICAgbW92ZW1lbnQ/OiBWZWN0b3IyO1xyXG4gICAgY2FyZGluYWw/OiBWZWN0b3IyO1xyXG4gICAgcGluY2g/OiBWZWN0b3IyO1xyXG4gICAgcGluY2hEZWx0YT86IG51bWJlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERpc3BhdGNoZXMgQ3VzdG9tVG91Y2hFdmVudHMgdG8gdGhlIEV2ZW50VGFyZ2V0IGdpdmVuIHdpdGggdGhlIGNvbnN0cnVjdG9yLlxyXG4gICAqIFdoZW4gdXNpbmcgdG91Y2ggZXZlbnRzLCBtYWtlIHN1cmUgdG8gc2V0IGB0b3VjaC1hY3Rpb246IG5vbmVgIGluIENTUyBcclxuICAgKiBAYXV0aG9yIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFRvdWNoRXZlbnREaXNwYXRjaGVyIHtcclxuICAgIHB1YmxpYyBwb3NTdGFydDogVmVjdG9yMiA9IFZlY3RvcjIuWkVSTygpO1xyXG4gICAgcHVibGljIHBvc05vdGNoOiBWZWN0b3IyID0gVmVjdG9yMi5aRVJPKCk7XHJcbiAgICBwdWJsaWMgcmFkaXVzVGFwOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgcmFkaXVzTm90Y2g6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGFyZ2V0OiBFdmVudFRhcmdldDtcclxuICAgIHByaXZhdGUgcG9zUHJldjogVmVjdG9yMiA9IFZlY3RvcjIuWkVSTygpO1xyXG4gICAgcHJpdmF0ZSBtb3ZlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSB0aW1lckRvdWJsZTogVGltZXI7XHJcbiAgICBwcml2YXRlIHRpbWVyTG9uZzogVGltZXI7XHJcbiAgICBwcml2YXRlIHRpbWVEb3VibGU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGltZUxvbmc6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGltZTogVGltZSA9IG5ldyBUaW1lKCk7XHJcbiAgICBwcml2YXRlIHBpbmNoRGlzdGFuY2U6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHBpbmNoVG9sZXJhbmNlOiBudW1iZXIgPSAxO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfdGFyZ2V0OiBFdmVudFRhcmdldCwgX3JhZGl1c1RhcDogbnVtYmVyID0gNSwgX3JhZGl1c05vdGNoOiBudW1iZXIgPSA1MCwgX3RpbWVEb3VibGU6IG51bWJlciA9IDIwMCwgX3RpbWVyTG9uZzogbnVtYmVyID0gMTAwMCkge1xyXG4gICAgICB0aGlzLnRhcmdldCA9IF90YXJnZXQ7XHJcbiAgICAgIHRoaXMucmFkaXVzVGFwID0gX3JhZGl1c1RhcDtcclxuICAgICAgdGhpcy5yYWRpdXNOb3RjaCA9IF9yYWRpdXNOb3RjaDtcclxuICAgICAgdGhpcy50aW1lRG91YmxlID0gX3RpbWVEb3VibGU7XHJcbiAgICAgIHRoaXMudGltZUxvbmcgPSBfdGltZXJMb25nO1xyXG4gICAgICB0aGlzLmFjdGl2YXRlKHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGUtL0FjdGl2YXRlcyB0aGUgZGlzcGF0Y2ggb2YgQ3VzdG9tVG91Y2hFdmVudHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFjdGl2YXRlKF9vbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICBpZiAoX29uKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgPEV2ZW50TGlzdGVuZXI+dGhpcy5obmRFdmVudCk7XHJcbiAgICAgICAgdGhpcy50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIDxFdmVudExpc3RlbmVyPnRoaXMuaG5kRXZlbnQpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgPEV2ZW50TGlzdGVuZXI+dGhpcy5obmRFdmVudCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCA8RXZlbnRMaXN0ZW5lcj50aGlzLmhuZEV2ZW50KTtcclxuICAgICAgdGhpcy50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIDxFdmVudExpc3RlbmVyPnRoaXMuaG5kRXZlbnQpO1xyXG4gICAgICB0aGlzLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIDxFdmVudExpc3RlbmVyPnRoaXMuaG5kRXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaG5kRXZlbnQgPSAoX2V2ZW50OiBUb3VjaEV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgIF9ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBsZXQgdG91Y2hGaXJzdDogVG91Y2ggPSBfZXZlbnQudG91Y2hlc1swXTtcclxuICAgICAgbGV0IHBvc2l0aW9uOiBWZWN0b3IyID0gdGhpcy5jYWxjQXZlcmFnZVBvc2l0aW9uKF9ldmVudC50b3VjaGVzKTsgLy9uZXcgVmVjdG9yMih0b3VjaEZpcnN0Py5jbGllbnRYLCB0b3VjaEZpcnN0Py5jbGllbnRZKTtcclxuICAgICAgbGV0IG9mZnNldDogVmVjdG9yMjtcclxuXHJcbiAgICAgIHN3aXRjaCAoX2V2ZW50LnR5cGUpIHtcclxuICAgICAgICBjYXNlIFwidG91Y2hzdGFydFwiOlxyXG4gICAgICAgICAgdGhpcy5tb3ZlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgdGhpcy5zdGFydEdlc3R1cmUocG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgIGlmIChfZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMikge1xyXG4gICAgICAgICAgICAvLyByZXNldCBwaW5jaFxyXG4gICAgICAgICAgICBsZXQgcGluY2g6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihfZXZlbnQudG91Y2hlc1sxXS5jbGllbnRYIC0gdG91Y2hGaXJzdC5jbGllbnRYLCBfZXZlbnQudG91Y2hlc1sxXS5jbGllbnRZIC0gdG91Y2hGaXJzdC5jbGllbnRZKTtcclxuICAgICAgICAgICAgdGhpcy5waW5jaERpc3RhbmNlID0gcGluY2gubWFnbml0dWRlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGxldCBkaXNwYXRjaExvbmc6IFRpbWVySGFuZGxlciA9IChfZXZlbnRUaW1lcjogRXZlbnRUaW1lcik6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuZGlzcGF0Y2hFdmVudChcclxuICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQ8RXZlbnRUb3VjaERldGFpbD4oRVZFTlRfVE9VQ0guTE9ORywge1xyXG4gICAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IHBvc2l0aW9uOiBwb3NpdGlvbiwgdG91Y2hlczogX2V2ZW50LnRvdWNoZXMgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIHRoaXMudGltZXJMb25nPy5jbGVhcigpO1xyXG4gICAgICAgICAgdGhpcy50aW1lckxvbmcgPSBuZXcgVGltZXIodGhpcy50aW1lLCB0aGlzLnRpbWVMb25nLCAxLCBkaXNwYXRjaExvbmcpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInRvdWNoZW5kXCI6XHJcbiAgICAgICAgICB0aGlzLnRpbWVyTG9uZz8uY2xlYXIoKTtcclxuXHJcbiAgICAgICAgICBpZiAoX2V2ZW50LnRvdWNoZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBzdGlsbCB0b3VjaGVzIGFjdGl2ZVxyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0R2VzdHVyZShwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGxldCBkaXNwYXRjaFRhcDogVGltZXJIYW5kbGVyID0gKF9ldmVudFRpbWVyOiBFdmVudFRpbWVyKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50PEV2ZW50VG91Y2hEZXRhaWw+KEVWRU5UX1RPVUNILlRBUCwge1xyXG4gICAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IHBvc2l0aW9uOiBwb3NpdGlvbiwgdG91Y2hlczogX2V2ZW50LnRvdWNoZXMgfVxyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIHdhcyBhIHRhcCBiZWZvcmUgYW5kIHRpbWVyIGlzIHN0aWxsIHJ1bm5pbmcgLT4gZG91YmxlIHRhcFxyXG4gICAgICAgICAgaWYgKHRoaXMudGltZXJEb3VibGU/LmFjdGl2ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyRG91YmxlLmNsZWFyKCk7XHJcbiAgICAgICAgICAgIC8vIHRoaXMudGltZXIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50PEV2ZW50VG91Y2hEZXRhaWw+KEVWRU5UX1RPVUNILkRPVUJMRSwge1xyXG4gICAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IHBvc2l0aW9uOiBwb3NpdGlvbiwgdG91Y2hlczogX2V2ZW50LnRvdWNoZXMgfVxyXG4gICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlIHdhcyBtb3ZlbWVudCwgb3RoZXJ3aXNlIHNldCB0aW1lciB0byBmaXJlIHRhcFxyXG4gICAgICAgICAgZWxzZSBpZiAoIXRoaXMubW92ZWQpXHJcbiAgICAgICAgICAgIHRoaXMudGltZXJEb3VibGUgPSBuZXcgVGltZXIodGhpcy50aW1lLCB0aGlzLnRpbWVEb3VibGUsIDEsIGRpc3BhdGNoVGFwKTtcclxuXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwidG91Y2htb3ZlXCI6XHJcbiAgICAgICAgICB0aGlzLmRldGVjdFBpbmNoKF9ldmVudCwgcG9zaXRpb24pO1xyXG4gICAgICAgICAgb2Zmc2V0ID0gVmVjdG9yMi5ESUZGRVJFTkNFKHRoaXMucG9zUHJldiwgdGhpcy5wb3NTdGFydCk7XHJcbiAgICAgICAgICB0aGlzLm1vdmVkIHx8PSAob2Zmc2V0Lm1hZ25pdHVkZSA8IHRoaXMucmFkaXVzVGFwKTsgLy8gcmVtZW1iZXIgdGhhdCB0b3VjaCBtb3ZlZCBvdmVyIHRhcCByYWRpdXNcclxuICAgICAgICAgIGxldCBtb3ZlbWVudDogVmVjdG9yMiA9IFZlY3RvcjIuRElGRkVSRU5DRShwb3NpdGlvbiwgdGhpcy5wb3NQcmV2KTtcclxuICAgICAgICAgIHRoaXMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgICAgIG5ldyBDdXN0b21FdmVudDxFdmVudFRvdWNoRGV0YWlsPihFVkVOVF9UT1VDSC5NT1ZFLCB7XHJcbiAgICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IHBvc2l0aW9uOiBwb3NpdGlvbiwgdG91Y2hlczogX2V2ZW50LnRvdWNoZXMsIG9mZnNldDogb2Zmc2V0LCBtb3ZlbWVudDogbW92ZW1lbnQgfVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAvLyBmaXJlIG5vdGNoIHdoZW4gdG91Y2hlcyBtb3ZlZCBvdXQgb2Ygbm90Y2ggcmFkaXVzIGFuZCByZXNldCBub3RjaFxyXG4gICAgICAgICAgb2Zmc2V0ID0gVmVjdG9yMi5ESUZGRVJFTkNFKHBvc2l0aW9uLCB0aGlzLnBvc05vdGNoKTtcclxuICAgICAgICAgIGlmIChvZmZzZXQubWFnbml0dWRlID4gdGhpcy5yYWRpdXNOb3RjaCkge1xyXG4gICAgICAgICAgICBsZXQgY2FyZGluYWw6IFZlY3RvcjIgPSBNYXRoLmFicyhvZmZzZXQueCkgPiBNYXRoLmFicyhvZmZzZXQueSkgP1xyXG4gICAgICAgICAgICAgIFZlY3RvcjIuWChvZmZzZXQueCA8IDAgPyAtMSA6IDEpIDpcclxuICAgICAgICAgICAgICBWZWN0b3IyLlkob2Zmc2V0LnkgPCAwID8gLTEgOiAxKTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXQuZGlzcGF0Y2hFdmVudChcclxuICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQ8RXZlbnRUb3VjaERldGFpbD4oRVZFTlRfVE9VQ0guTk9UQ0gsIHtcclxuICAgICAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsIGRldGFpbDogeyBwb3NpdGlvbjogcG9zaXRpb24sIHRvdWNoZXM6IF9ldmVudC50b3VjaGVzLCBvZmZzZXQ6IG9mZnNldCwgY2FyZGluYWw6IGNhcmRpbmFsLCBtb3ZlbWVudDogbW92ZW1lbnQgfVxyXG4gICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgdGhpcy5wb3NOb3RjaCA9IHBvc2l0aW9uO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy9UT0RPOiBwaW5jaCwgcm90YXRlLi4uXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucG9zUHJldi5zZXQocG9zaXRpb24ueCwgcG9zaXRpb24ueSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkZXRlY3RQaW5jaCA9IChfZXZlbnQ6IFRvdWNoRXZlbnQsIF9wb3NpdGlvbjogVmVjdG9yMik6IHZvaWQgPT4ge1xyXG4gICAgICBpZiAoX2V2ZW50LnRvdWNoZXMubGVuZ3RoICE9IDIpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgbGV0IHQ6IFRvdWNoTGlzdCA9IF9ldmVudC50b3VjaGVzO1xyXG4gICAgICBsZXQgcGluY2g6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMih0WzFdLmNsaWVudFggLSB0WzBdLmNsaWVudFgsIHRbMV0uY2xpZW50WSAtIHRbMF0uY2xpZW50WSk7XHJcbiAgICAgIGxldCBwaW5jaERpc3RhbmNlOiBudW1iZXIgPSBwaW5jaC5tYWduaXR1ZGU7XHJcbiAgICAgIGxldCBwaW5jaERlbHRhOiBudW1iZXIgPSBwaW5jaERpc3RhbmNlIC0gdGhpcy5waW5jaERpc3RhbmNlO1xyXG4gICAgICBpZiAoTWF0aC5hYnMocGluY2hEZWx0YSkgPiB0aGlzLnBpbmNoVG9sZXJhbmNlKVxyXG4gICAgICAgIHRoaXMudGFyZ2V0LmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQ8RXZlbnRUb3VjaERldGFpbD4oRVZFTlRfVE9VQ0guUElOQ0gsIHtcclxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IHBvc2l0aW9uOiBfcG9zaXRpb24sIHRvdWNoZXM6IF9ldmVudC50b3VjaGVzLCBwaW5jaDogcGluY2gsIHBpbmNoRGVsdGE6IHBpbmNoRGVsdGEgfVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICB0aGlzLnBpbmNoRGlzdGFuY2UgPSBwaW5jaERpc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhcnRHZXN0dXJlKF9wb3NpdGlvbjogVmVjdG9yMik6IHZvaWQge1xyXG4gICAgICB0aGlzLnBvc05vdGNoLnNldChfcG9zaXRpb24ueCwgX3Bvc2l0aW9uLnkpO1xyXG4gICAgICB0aGlzLnBvc1N0YXJ0LnNldChfcG9zaXRpb24ueCwgX3Bvc2l0aW9uLnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2FsY0F2ZXJhZ2VQb3NpdGlvbihfdG91Y2hlczogVG91Y2hMaXN0KTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCBhdmVyYWdlOiBWZWN0b3IyID0gVmVjdG9yMi5aRVJPKCk7XHJcbiAgICAgIGZvciAobGV0IHRvdWNoIG9mIF90b3VjaGVzKSB7XHJcbiAgICAgICAgYXZlcmFnZS54ICs9IHRvdWNoLmNsaWVudFg7XHJcbiAgICAgICAgYXZlcmFnZS55ICs9IHRvdWNoLmNsaWVudFk7XHJcbiAgICAgIH1cclxuICAgICAgYXZlcmFnZS5zY2FsZSgxIC8gX3RvdWNoZXMubGVuZ3RoKTtcclxuICAgICAgcmV0dXJuIGF2ZXJhZ2U7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBBIG5vZGUgbWFuYWdlZCBieSB7QGxpbmsgUHJvamVjdH0gdGhhdCBmdW5jdGlvbnMgYXMgYSB0ZW1wbGF0ZSBmb3Ige0BsaW5rIEdyYXBoSW5zdGFuY2V9cyBcclxuICAgKiBAYXV0aG9yIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICogQGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL0ppcmthRGVsbE9yby9GVURHRS93aWtpL1Jlc291cmNlXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEdyYXBoIGV4dGVuZHMgTm9kZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZVJlc291cmNlIHtcclxuICAgIHB1YmxpYyBpZFJlc291cmNlOiBzdHJpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICBwdWJsaWMgdHlwZTogc3RyaW5nID0gXCJHcmFwaFwiO1xyXG4gICAgLy8gI3N5bmNpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJHcmFwaFwiKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lKTtcclxuICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk1VVEFURSwgdGhpcy5obmRNdXRhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaWRSZXNvdXJjZSA9IHRoaXMuaWRSZXNvdXJjZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi50eXBlID0gdGhpcy50eXBlO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcywgX3NlcmlhbGl6YXRpb24uaWRSZXNvdXJjZSk7XHJcbiAgICAgIGF3YWl0IFByb2plY3QucmVzeW5jR3JhcGhJbnN0YW5jZXModGhpcyk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuR1JBUEhfREVTRVJJQUxJWkVEKSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaG5kTXV0YXRlID0gYXN5bmMgKF9ldmVudDogQ3VzdG9tRXZlbnQpID0+IHtcclxuXHJcbiAgICAgIC8vIFRPRE86IGlmIHBhdGggY29udGFpbnMgYSBncmFwaCBpbnN0YW5jZSBiZWxvdyB0aGlzLCBkb24ndCBkaXNwYXRjaCFcclxuICAgICAgLy8gbGV0IHBhdGg6IE5vZGVbXSA9IFJlZmxlY3QuZ2V0KF9ldmVudCwgXCJwYXRoXCIpO1xyXG4gICAgICAvLyBmb3IgKGxldCBub2RlIG9mIHBhdGgpXHJcbiAgICAgIC8vICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBHcmFwaEluc3RhbmNlICYmIG5vZGUuaWRTb3VyY2UgIT0gdGhpcy5pZFJlc291cmNlKVxyXG4gICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgXHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiR3JhcGggbXV0YXRlc1wiLCB0aGlzLm5hbWUpO1xyXG4gICAgICAvLyB0aGlzLiNzeW5jaW5nID0gdHJ1ZTtcclxuICAgICAgX2V2ZW50LmRldGFpbC5wYXRoID0gUmVmbGVjdC5nZXQoX2V2ZW50LCBcInBhdGhcIik7IC8vIHNhdmUgcGF0aCB0byB0YXJnZXQgaW4gZGV0YWlsXHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoRVZFTlQuTVVUQVRFX0dSQVBILCB7IGRldGFpbDogX2V2ZW50LmRldGFpbH0pKTtcclxuICAgICAgLy8gdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5NVVRBVEVfSU5TVEFOQ0UpKTtcclxuICAgICAgLy8gdGhpcy4jc3luY2luZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICBlbnVtIFNZTkMge1xyXG4gICAgUkVBRFksIEdSQVBIX1NZTkNFRCwgR1JBUEhfRE9ORSwgSU5TVEFOQ0VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEFuIGluc3RhbmNlIG9mIGEge0BsaW5rIEdyYXBofS4gIFxyXG4gICAqIFRoaXMgbm9kZSBrZWVwcyBhIHJlZmVyZW5jZSB0byBpdHMgcmVzb3VyY2UgYW4gY2FuIHRodXMgb3B0aW1pemUgc2VyaWFsaXphdGlvblxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKiBAbGluayBodHRwczovL2dpdGh1Yi5jb20vSmlya2FEZWxsT3JvL0ZVREdFL3dpa2kvUmVzb3VyY2VcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgR3JhcGhJbnN0YW5jZSBleHRlbmRzIE5vZGUge1xyXG4gICAgLyoqIGlkIG9mIHRoZSByZXNvdXJjZSB0aGF0IGluc3RhbmNlIHdhcyBjcmVhdGVkIGZyb20gKi9cclxuICAgIC8vIFRPRE86IGV4YW1pbmUsIGlmIHRoaXMgc2hvdWxkIGJlIGEgZGlyZWN0IHJlZmVyZW5jZSB0byB0aGUgR3JhcGgsIGluc3RlYWQgb2YgdGhlIGlkXHJcbiAgICAjaWRTb3VyY2U6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgICNzeW5jOiBTWU5DID0gU1lOQy5SRUFEWTtcclxuICAgICNkZXNlcmlhbGl6ZUZyb21Tb3VyY2U6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBjb25zdHJ1Y3RvciBhbGxvbmUgd2lsbCBub3QgY3JlYXRlIGEgcmVjb25zdHJ1Y3Rpb24sIGJ1dCBvbmx5IHNhdmUgdGhlIGlkLlxyXG4gICAgICogVG8gY3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBncmFwaCwgY2FsbCByZXNldCBvbiB0aGlzIG9yIHNldCB3aXRoIGEgZ3JhcGggYXMgcGFyYW1ldGVyLlxyXG4gICAgICogUHJlZmVyIFByb2plY3QuY3JlYXRlR3JhcGhJbnN0YW5jZShfZ3JhcGgpLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX2dyYXBoPzogR3JhcGgpIHtcclxuICAgICAgc3VwZXIoXCJHcmFwaEluc3RhbmNlXCIpO1xyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTVVUQVRFLCB0aGlzLmhuZE11dGF0aW9uSW5zdGFuY2UsIHRydWUpO1xyXG5cclxuICAgICAgaWYgKCFfZ3JhcGgpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB0aGlzLiNpZFNvdXJjZSA9IF9ncmFwaC5pZFJlc291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaWRTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2lkU291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjcmVhdGUgdGhpcyBub2RlIGZyb20gdGhlIHtAbGluayBHcmFwaH0gcmVmZXJlbmNlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgcmVzZXQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGxldCByZXNvdXJjZTogR3JhcGggPSA8R3JhcGg+YXdhaXQgUHJvamVjdC5nZXRSZXNvdXJjZSh0aGlzLiNpZFNvdXJjZSk7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2V0KHJlc291cmNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1RPRE86IG9wdGltaXplIHVzaW5nIHRoZSByZWZlcmVuY2VkIEdyYXBoLCBzZXJpYWxpemUvZGVzZXJpYWxpemUgb25seSB0aGUgZGlmZmVyZW5jZXNcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBmaWx0ZXI6IENvbXBvbmVudEdyYXBoRmlsdGVyID0gdGhpcy5nZXRDb21wb25lbnQoQ29tcG9uZW50R3JhcGhGaWx0ZXIpO1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHt9O1xyXG5cclxuICAgICAgaWYgKGZpbHRlciAmJiBmaWx0ZXIuaXNBY3RpdmUpIC8vIGlmIGdyYXBoIHN5bmNocm9uaXNhdGlvbiBpcyB1bmZpbHRlcmVkLCBrbm93aW5nIHRoZSBzb3VyY2UgaXMgc3VmZmljaWVudCBmb3Igc2VyaWFsaXphdGlvblxyXG4gICAgICAgIHNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHNlcmlhbGl6YXRpb24uZGVzZXJpYWxpemVGcm9tU291cmNlID0gdHJ1ZTtcclxuXHJcbiAgICAgIHNlcmlhbGl6YXRpb24ubmFtZSA9IHRoaXMubmFtZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5pZFNvdXJjZSA9IHRoaXMuI2lkU291cmNlO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLiNpZFNvdXJjZSA9IF9zZXJpYWxpemF0aW9uLmlkU291cmNlO1xyXG4gICAgICBpZiAoIV9zZXJpYWxpemF0aW9uLmRlc2VyaWFsaXplRnJvbVNvdXJjZSkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTsgLy8gaW5zdGFuY2UgaXMgZGVzZXJpYWxpemVkIGZyb20gaW5kaXZpZHVhbCBkYXRhXHJcbiAgICAgICAgdGhpcy4jZGVzZXJpYWxpemVGcm9tU291cmNlID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IGdyYXBoOiBHcmFwaCA9IHRoaXMuZ2V0KCk7XHJcblxyXG4gICAgICBpZiAoZ3JhcGgpXHJcbiAgICAgICAgLy8gaWYgKF9zZXJpYWxpemF0aW9uLmRlc2VyaWFsaXplRnJvbVNvdXJjZSkgLy8gbm8gY29tcG9uZW50cy0+IGFzc3VtZSBzeW5jaHJvbml6ZWQgR3JhcGhJbnN0YW5jZVxyXG4gICAgICAgIC8vICAgYXdhaXQgdGhpcy5zZXQoZ3JhcGgpOyAvLyByZWNyZWF0ZSBjb21wbGV0ZSBpbnN0YW5jZSBmcm9tIHNvdXJjZSBncmFwaFxyXG4gICAgICAgIC8vIGVsc2Uge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuY29ubmVjdFRvR3JhcGgoKTsgLy8gb3RoZXJ3aXNlIGp1c3QgY29ubmVjdFxyXG4gICAgICAvLyB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIFByb2plY3QucmVnaXN0ZXJHcmFwaEluc3RhbmNlRm9yUmVzeW5jKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBjb25uZWN0VG9HcmFwaCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IGdyYXBoOiBHcmFwaCA9IHRoaXMuZ2V0KCk7XHJcbiAgICAgIGlmICh0aGlzLiNkZXNlcmlhbGl6ZUZyb21Tb3VyY2UpXHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXQoZ3JhcGgpO1xyXG5cclxuICAgICAgLy8gZ3JhcGguYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5NVVRBVEUsIChfZXZlbnQ6IEN1c3RvbUV2ZW50KSA9PiB0aGlzLmhuZE11dGF0aW9uLCB0cnVlKTtcclxuICAgICAgZ3JhcGguYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5NVVRBVEVfR1JBUEgsIHRoaXMuaG5kTXV0YXRpb25HcmFwaCk7XHJcbiAgICAgIC8vIGdyYXBoLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuTVVUQVRFX0dSQVBIX0RPTkUsICgpID0+IHsgY29uc29sZS5sb2coXCJEb25lXCIsIHRoaXMubmFtZSk7IC8qIHRoaXMuI3N5bmMgPSB0cnVlOyAqLyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGlzIG5vZGUgdG8gYmUgYSByZWNyZWF0aW9uIG9mIHRoZSB7QGxpbmsgR3JhcGh9IGdpdmVuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhc3luYyBzZXQoX2dyYXBoOiBHcmFwaCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAvLyBUT0RPOiBleGFtaW5lLCBpZiB0aGUgc2VyaWFsaXphdGlvbiBzaG91bGQgYmUgc3RvcmVkIGluIHRoZSBHcmFwaCBmb3Igb3B0aW1pemF0aW9uIDwtIGFsc28gdXNlZnVsIGZvciBzeW5jIHdpdGggaW5zdGFuY2VzXHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gU2VyaWFsaXplci5zZXJpYWxpemUoX2dyYXBoKTtcclxuICAgICAgLy9TZXJpYWxpemVyLmRlc2VyaWFsaXplKHNlcmlhbGl6YXRpb24pO1xyXG4gICAgICBmb3IgKGxldCBwYXRoIGluIHNlcmlhbGl6YXRpb24pIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRlc2VyaWFsaXplKHNlcmlhbGl6YXRpb25bcGF0aF0pO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuI2lkU291cmNlID0gX2dyYXBoLmlkUmVzb3VyY2U7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuR1JBUEhfSU5TVEFOVElBVEVEKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgZ3JhcGggdGhpcyBpbnN0YW5jZXMgcmVmZXJzIHRvXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQoKTogR3JhcGgge1xyXG4gICAgICByZXR1cm4gPEdyYXBoPlByb2plY3QucmVzb3VyY2VzW3RoaXMuI2lkU291cmNlXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNvdXJjZSBncmFwaCBtdXRhdGVkLCByZWZsZWN0IG11dGF0aW9uIGluIHRoaXMgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBobmRNdXRhdGlvbkdyYXBoID0gYXN5bmMgKF9ldmVudDogQ3VzdG9tRXZlbnQpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgLy8gY29uc29sZS5sb2coXCJSZWZsZWN0IEdyYXBoLU11dGF0aW9uIHRvIEluc3RhbmNlXCIsIFNZTkNbdGhpcy4jc3luY10sICg8R3JhcGg+X2V2ZW50LmN1cnJlbnRUYXJnZXQpLm5hbWUsIHRoaXMuZ2V0UGF0aCgpLm1hcChfbm9kZSA9PiBfbm9kZS5uYW1lKSk7XHJcbiAgICAgIGlmICh0aGlzLiNzeW5jICE9IFNZTkMuUkVBRFkpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlN5bmMgYWJvcnRlZCwgc3dpdGNoIHRvIHJlYWR5XCIpO1xyXG4gICAgICAgIHRoaXMuI3N5bmMgPSBTWU5DLlJFQURZO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuaXNGaWx0ZXJlZCgpKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIHRoaXMuI3N5bmMgPSBTWU5DLkdSQVBIX1NZTkNFRDsgLy8gZG8gbm90IHN5bmMgYWdhaW4sIHNpbmNlIG11dGF0aW9uIGlzIGFscmVhZHkgYSBzeW5jaHJvbml6YXRpb25cclxuICAgICAgYXdhaXQgdGhpcy5yZWZsZWN0TXV0YXRpb24oX2V2ZW50LCA8R3JhcGg+X2V2ZW50LmN1cnJlbnRUYXJnZXQsIHRoaXMsIF9ldmVudC5kZXRhaWwucGF0aCk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuTVVUQVRFX0lOU1RBTkNFLCB7YnViYmxlczogZmFsc2V9KSlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgaW5zdGFuY2UgbXV0YXRlZCwgcmVmbGVjdCBtdXRhdGlvbiBpbiBzb3VyY2UgZ3JhcGhcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBobmRNdXRhdGlvbkluc3RhbmNlID0gYXN5bmMgKF9ldmVudDogQ3VzdG9tRXZlbnQpOiBQcm9taXNlPHZvaWQ+ID0+IHtcclxuICAgICAgLy8gY29uc29sZS5sb2coXCJSZWZsZWN0IEluc3RhbmNlLU11dGF0aW9uIHRvIEdyYXBoXCIsIFNZTkNbdGhpcy4jc3luY10sIHRoaXMuZ2V0UGF0aCgpLm1hcChfbm9kZSA9PiBfbm9kZS5uYW1lKSwgdGhpcy5nZXQoKS5uYW1lKTtcclxuICAgICAgaWYgKHRoaXMuI3N5bmMgIT0gU1lOQy5SRUFEWSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiU3luYyBhYm9ydGVkLCBzd2l0Y2ggdG8gcmVhZHlcIik7XHJcbiAgICAgICAgdGhpcy4jc3luYyA9IFNZTkMuUkVBRFk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoX2V2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEdyYXBoSW5zdGFuY2UgJiYgX2V2ZW50LnRhcmdldCAhPSB0aGlzKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJTeW5jIGFib3J0ZWQsIHRhcmdldCBhbHJlYWR5IHN5bmNlZFwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLmlzRmlsdGVyZWQoKSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICB0aGlzLiNzeW5jID0gU1lOQy5JTlNUQU5DRTsgLy8gZG8gbm90IHN5bmMgYWdhaW4sIHNpbmNlIG11dGF0aW9uIGlzIGFscmVhZHkgYSBzeW5jaHJvbml6YXRpb25cclxuICAgICAgYXdhaXQgdGhpcy5yZWZsZWN0TXV0YXRpb24oX2V2ZW50LCB0aGlzLCB0aGlzLmdldCgpLCBSZWZsZWN0LmdldChfZXZlbnQsIFwicGF0aFwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWZsZWN0TXV0YXRpb24oX2V2ZW50OiBDdXN0b21FdmVudCwgX3NvdXJjZTogTm9kZSwgX2Rlc3RpbmF0aW9uOiBOb2RlLCBfcGF0aDogTm9kZVtdKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiUmVmbGVjdCBtdXRhdGlvblwiLCBfc291cmNlLCBfZGVzdGluYXRpb24pO1xyXG4gICAgICBmb3IgKGxldCBub2RlIG9mIF9wYXRoKVxyXG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgR3JhcGhJbnN0YW5jZSlcclxuICAgICAgICAgIGlmIChub2RlID09IHRoaXMpIGJyZWFrO1xyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU3luYyBhYm9ydGVkLCB0YXJnZXQgYWxyZWFkeSBzeW5jZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgIGxldCBpbmRleDogbnVtYmVyID0gX3BhdGguaW5kZXhPZihfc291cmNlKTtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gaW5kZXggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgIGxldCBjaGlsZEluZGV4OiBudW1iZXIgPSBfcGF0aFtpXS5nZXRQYXJlbnQoKS5maW5kQ2hpbGQoX3BhdGhbaV0pOyAvLyBnZXQgdGhlIGluZGV4IG9mIHRoZSBjaGlsZG5vZGUgaW4gdGhlIG9yaWdpbmFsIHBhdGhcclxuICAgICAgICBfZGVzdGluYXRpb24gPSBfZGVzdGluYXRpb24uZ2V0Q2hpbGQoY2hpbGRJbmRleCk7IC8vIGdldCB0aGUgY29ycmVzcG9uZGluZyBjaGlsZCBpbiB0aGlzIHBhdGhcclxuICAgICAgICAvLyBUT0RPOiByZXNwZWN0IGluZGV4IGZvciBub24tc2luZ2xldG9uIGNvbXBvbmVudHMuLi5cclxuICAgICAgfVxyXG4gICAgICBsZXQgY21wTXV0YXRlOiBDb21wb25lbnQgPSBfZGVzdGluYXRpb24uZ2V0Q29tcG9uZW50KF9ldmVudC5kZXRhaWwuY29tcG9uZW50LmNvbnN0cnVjdG9yKTtcclxuICAgICAgaWYgKGNtcE11dGF0ZSlcclxuICAgICAgICBhd2FpdCBjbXBNdXRhdGUubXV0YXRlKF9ldmVudC5kZXRhaWwubXV0YXRvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpc0ZpbHRlcmVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICBsZXQgY21wRmlsdGVyOiBDb21wb25lbnRHcmFwaEZpbHRlciA9IHRoaXMuZ2V0Q29tcG9uZW50KENvbXBvbmVudEdyYXBoRmlsdGVyKTtcclxuICAgICAgcmV0dXJuIChjbXBGaWx0ZXIgJiYgY21wRmlsdGVyLmlzQWN0aXZlKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBIb2xkcyBkYXRhIHRvIGZlZWQgaW50byBhIHtAbGluayBTaGFkZXJ9IHRvIGRlc2NyaWJlIHRoZSBzdXJmYWNlIG9mIHtAbGluayBNZXNofS4gIFxyXG4gICAqIHtAbGluayBNYXRlcmlhbH1zIHJlZmVyZW5jZSB7QGxpbmsgQ29hdH0gYW5kIHtAbGluayBTaGFkZXJ9LiAgIFxyXG4gICAqIFRoZSBtZXRob2QgdXNlUmVuZGVyRGF0YSB3aWxsIGJlIGluamVjdGVkIGJ5IHtAbGluayBSZW5kZXJJbmplY3Rvcn0gYXQgcnVudGltZSwgZXh0ZW5kaW5nIHRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoaXMgY2xhc3MgdG8gZGVhbCB3aXRoIHRoZSByZW5kZXJlci5cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29hdCBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xyXG4gICAgLy8gcHVibGljIG5hbWU6IHN0cmluZyA9IFwiQ29hdFwiO1xyXG4gICAgcHJvdGVjdGVkIHJlbmRlckRhdGE6IHsgW2tleTogc3RyaW5nXTogdW5rbm93biB9O1xyXG5cclxuICAgIHB1YmxpYyB1c2VSZW5kZXJEYXRhKF9zaGFkZXI6IFNoYWRlckludGVyZmFjZSwgX2NtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCk6IHZvaWQgey8qIGluamVjdGVkIGJ5IFJlbmRlckluamVjdG9yKi8gfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgcmV0dXJuIHt9O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHsgXHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5yZW5kZXJEYXRhO1xyXG4gICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFRoZSBzaW1wbGVzdCB7QGxpbmsgQ29hdH0gcHJvdmlkaW5nIGp1c3QgYSBjb2xvclxyXG4gICAqL1xyXG4gIEBSZW5kZXJJbmplY3RvckNvYXQuZGVjb3JhdGVcclxuICBleHBvcnQgY2xhc3MgQ29hdENvbG9yZWQgZXh0ZW5kcyBDb2F0IHtcclxuICAgIHB1YmxpYyBjb2xvcjogQ29sb3I7XHJcbiAgICBjb25zdHJ1Y3RvcihfY29sb3I6IENvbG9yID0gbmV3IENvbG9yKCkpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5jb2xvciA9IF9jb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uY29sb3IgPSB0aGlzLmNvbG9yLnNlcmlhbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgYXdhaXQgdGhpcy5jb2xvci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5jb2xvcik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogVGhlIHNpbXBsZXN0IHtAbGluayBDb2F0fSBwcm92aWRpbmcganVzdCBhIGNvbG9yXHJcbiAgICovXHJcbiAgQFJlbmRlckluamVjdG9yQ29hdC5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBjbGFzcyBDb2F0UmVtaXNzaXZlIGV4dGVuZHMgQ29hdENvbG9yZWQge1xyXG4gICAgcHVibGljIHNwZWN1bGFyOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZGlmZnVzZTogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9jb2xvcjogQ29sb3IgPSBuZXcgQ29sb3IoKSwgX2RpZmZ1c2U6IG51bWJlciA9IDEsIF9zcGVjdWxhcjogbnVtYmVyID0gMCkge1xyXG4gICAgICBzdXBlcihfY29sb3IpO1xyXG4gICAgICB0aGlzLmRpZmZ1c2UgPSBfZGlmZnVzZTtcclxuICAgICAgdGhpcy5zcGVjdWxhciA9IF9zcGVjdWxhcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uZGlmZnVzZSA9IHRoaXMuZGlmZnVzZTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5zcGVjdWxhciA9IHRoaXMuc3BlY3VsYXI7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICBhd2FpdCB0aGlzLmNvbG9yLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmNvbG9yKTtcclxuICAgICAgdGhpcy5kaWZmdXNlID0gX3NlcmlhbGl6YXRpb24uZGlmZnVzZTtcclxuICAgICAgdGhpcy5zcGVjdWxhciA9IF9zZXJpYWxpemF0aW9uLnNwZWN1bGFyO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEEge0BsaW5rIENvYXR9IHByb3ZpZGluZyBhIHRleHR1cmUgYW5kIGFkZGl0aW9uYWwgZGF0YSBmb3IgdGV4dHVyaW5nXHJcbiAgICovXHJcbiAgQFJlbmRlckluamVjdG9yQ29hdC5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBjbGFzcyBDb2F0VGV4dHVyZWQgZXh0ZW5kcyBDb2F0Q29sb3JlZCB7XHJcbiAgICBwdWJsaWMgdGV4dHVyZTogVGV4dHVyZSA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX2NvbG9yOiBDb2xvciA9IG5ldyBDb2xvcigpLCBfdGV4dHVyZTogVGV4dHVyZSA9IFRleHR1cmVEZWZhdWx0LnRleHR1cmUpIHtcclxuICAgICAgc3VwZXIoX2NvbG9yKTtcclxuICAgICAgdGhpcy50ZXh0dXJlID0gX3RleHR1cmU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmlkVGV4dHVyZSA9IHRoaXMudGV4dHVyZS5pZFJlc291cmNlO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgaWYgKF9zZXJpYWxpemF0aW9uLmlkVGV4dHVyZSlcclxuICAgICAgICB0aGlzLnRleHR1cmUgPSA8VGV4dHVyZT5hd2FpdCBQcm9qZWN0LmdldFJlc291cmNlKF9zZXJpYWxpemF0aW9uLmlkVGV4dHVyZSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiQ29hdFRleHR1cmVkLnRzXCIvPlxyXG5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQSB7QGxpbmsgQ29hdH0gcHJvdmlkaW5nIGEgdGV4dHVyZSBhbmQgYWRkaXRpb25hbCBkYXRhIGZvciB0ZXh0dXJpbmdcclxuICAgKi9cclxuICBAUmVuZGVySW5qZWN0b3JDb2F0LmRlY29yYXRlXHJcbiAgZXhwb3J0IGNsYXNzIENvYXRSZW1pc3NpdmVUZXh0dXJlZCBleHRlbmRzIENvYXRUZXh0dXJlZCB7XHJcbiAgICBwdWJsaWMgc3BlY3VsYXI6IG51bWJlcjtcclxuICAgIHB1YmxpYyBkaWZmdXNlOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX2NvbG9yOiBDb2xvciA9IG5ldyBDb2xvcigpLCBfdGV4dHVyZTogVGV4dHVyZSA9IFRleHR1cmVEZWZhdWx0LnRleHR1cmUsIF9kaWZmdXNlOiBudW1iZXIgPSAxLCBfc3BlY3VsYXI6IG51bWJlciA9IDApIHtcclxuICAgICAgc3VwZXIoX2NvbG9yLCBfdGV4dHVyZSk7XHJcbiAgICAgIHRoaXMuZGlmZnVzZSA9IF9kaWZmdXNlO1xyXG4gICAgICB0aGlzLnNwZWN1bGFyID0gX3NwZWN1bGFyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5kaWZmdXNlID0gdGhpcy5kaWZmdXNlO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnNwZWN1bGFyID0gdGhpcy5zcGVjdWxhcjtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHRoaXMuZGlmZnVzZSA9IF9zZXJpYWxpemF0aW9uLmRpZmZ1c2U7XHJcbiAgICAgIHRoaXMuc3BlY3VsYXIgPSBfc2VyaWFsaXphdGlvbi5zcGVjdWxhcjtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBEZWZpbmVzIGEgY29sb3IgYXMgdmFsdWVzIGluIHRoZSByYW5nZSBvZiAwIHRvIDEgZm9yIHRoZSBmb3VyIGNoYW5uZWxzIHJlZCwgZ3JlZW4sIGJsdWUgYW5kIGFscGhhIChmb3Igb3BhY2l0eSlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQ29sb3IgZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcclxuICAgIC8vIGNyYzIgb25seSB1c2VkIGZvciBjb252ZXJ0aW5nIGNvbG9ycyBmcm9tIHN0cmluZ3MgcHJlZGVmaW5lZCBieSBDU1NcclxuICAgIHByaXZhdGUgc3RhdGljIGNyYzI6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cclxuICAgIHB1YmxpYyByOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZzogbnVtYmVyO1xyXG4gICAgcHVibGljIGI6IG51bWJlcjtcclxuICAgIHB1YmxpYyBhOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX3I6IG51bWJlciA9IDEsIF9nOiBudW1iZXIgPSAxLCBfYjogbnVtYmVyID0gMSwgX2E6IG51bWJlciA9IDEpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5zZXROb3JtUkdCQShfciwgX2csIF9iLCBfYSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRIZXhGcm9tQ1NTS2V5d29yZChfa2V5d29yZDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgQ29sb3IuY3JjMi5maWxsU3R5bGUgPSBfa2V5d29yZDtcclxuICAgICAgcmV0dXJuIENvbG9yLmNyYzIuZmlsbFN0eWxlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgQ1NTKF9rZXl3b3JkOiBzdHJpbmcsIF9hbHBoYTogbnVtYmVyID0gMSk6IENvbG9yIHtcclxuICAgICAgbGV0IGhleDogc3RyaW5nID0gQ29sb3IuZ2V0SGV4RnJvbUNTU0tleXdvcmQoX2tleXdvcmQpO1xyXG4gICAgICBsZXQgY29sb3I6IENvbG9yID0gbmV3IENvbG9yKFxyXG4gICAgICAgIHBhcnNlSW50KGhleC5zdWJzdHIoMSwgMiksIDE2KSAvIDI1NSxcclxuICAgICAgICBwYXJzZUludChoZXguc3Vic3RyKDMsIDIpLCAxNikgLyAyNTUsXHJcbiAgICAgICAgcGFyc2VJbnQoaGV4LnN1YnN0cig1LCAyKSwgMTYpIC8gMjU1LFxyXG4gICAgICAgIF9hbHBoYSk7XHJcbiAgICAgIHJldHVybiBjb2xvcjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBNVUxUSVBMWShfY29sb3IxOiBDb2xvciwgX2NvbG9yMjogQ29sb3IpOiBDb2xvciB7XHJcbiAgICAgIHJldHVybiBuZXcgQ29sb3IoX2NvbG9yMS5yICogX2NvbG9yMi5yLCBfY29sb3IxLmcgKiBfY29sb3IyLmcsIF9jb2xvcjEuYiAqIF9jb2xvcjIuYiwgX2NvbG9yMS5hICogX2NvbG9yMi5hKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Tm9ybVJHQkEoX3I6IG51bWJlciwgX2c6IG51bWJlciwgX2I6IG51bWJlciwgX2E6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLnIgPSBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCBfcikpO1xyXG4gICAgICB0aGlzLmcgPSBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCBfZykpO1xyXG4gICAgICB0aGlzLmIgPSBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCBfYikpO1xyXG4gICAgICB0aGlzLmEgPSBNYXRoLm1pbigxLCBNYXRoLm1heCgwLCBfYSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRCeXRlc1JHQkEoX3I6IG51bWJlciwgX2c6IG51bWJlciwgX2I6IG51bWJlciwgX2E6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLnNldE5vcm1SR0JBKF9yIC8gMjU1LCBfZyAvIDI1NSwgX2IgLyAyNTUsIF9hIC8gMjU1KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0QXJyYXkoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoW3RoaXMuciwgdGhpcy5nLCB0aGlzLmIsIHRoaXMuYV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRBcnJheU5vcm1SR0JBKF9jb2xvcjogRmxvYXQzMkFycmF5KTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2V0Tm9ybVJHQkEoX2NvbG9yWzBdLCBfY29sb3JbMV0sIF9jb2xvclsyXSwgX2NvbG9yWzNdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0QXJyYXlCeXRlc1JHQkEoX2NvbG9yOiBVaW50OENsYW1wZWRBcnJheSk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNldEJ5dGVzUkdCQShfY29sb3JbMF0sIF9jb2xvclsxXSwgX2NvbG9yWzJdLCBfY29sb3JbM10pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRBcnJheUJ5dGVzUkdCQSgpOiBVaW50OENsYW1wZWRBcnJheSB7XHJcbiAgICAgIHJldHVybiBuZXcgVWludDhDbGFtcGVkQXJyYXkoW3RoaXMuciAqIDI1NSwgdGhpcy5nICogMjU1LCB0aGlzLmIgKiAyNTUsIHRoaXMuYSAqIDI1NV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGQoX2NvbG9yOiBDb2xvcik6IHZvaWQge1xyXG4gICAgICB0aGlzLnIgKz0gX2NvbG9yLnI7XHJcbiAgICAgIHRoaXMuZyArPSBfY29sb3IuZztcclxuICAgICAgdGhpcy5iICs9IF9jb2xvci5iO1xyXG4gICAgICB0aGlzLmEgKz0gX2NvbG9yLmE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENTUygpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgYnl0ZXM6IFVpbnQ4Q2xhbXBlZEFycmF5ID0gdGhpcy5nZXRBcnJheUJ5dGVzUkdCQSgpO1xyXG4gICAgICByZXR1cm4gYFJHQkEoJHtieXRlc1swXX0sICR7Ynl0ZXNbMV19LCAke2J5dGVzWzJdfSwgJHtieXRlc1szXX0pYDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SGV4KCk6IHN0cmluZyB7XHJcbiAgICAgIGxldCBieXRlczogVWludDhDbGFtcGVkQXJyYXkgPSB0aGlzLmdldEFycmF5Qnl0ZXNSR0JBKCk7XHJcbiAgICAgIGxldCBoZXg6IHN0cmluZyA9IFwiXCI7XHJcbiAgICAgIGZvciAobGV0IGJ5dGUgb2YgYnl0ZXMpXHJcbiAgICAgICAgaGV4ICs9IGJ5dGUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcclxuICAgICAgcmV0dXJuIGhleDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0SGV4KF9oZXg6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICBsZXQgYnl0ZXM6IFVpbnQ4Q2xhbXBlZEFycmF5ID0gdGhpcy5nZXRBcnJheUJ5dGVzUkdCQSgpO1xyXG4gICAgICBsZXQgY2hhbm5lbDogbnVtYmVyID0gMDtcclxuICAgICAgZm9yIChsZXQgYnl0ZSBpbiBieXRlcylcclxuICAgICAgICBieXRlc1tieXRlXSA9IHBhcnNlSW50KF9oZXguc3Vic3RyKGNoYW5uZWwrKyAqIDIsIDIpLCAxNik7XHJcbiAgICAgIHRoaXMuc2V0QXJyYXlCeXRlc1JHQkEoYnl0ZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb3B5KF9jb2xvcjogQ29sb3IpOiB2b2lkIHtcclxuICAgICAgdGhpcy5yID0gX2NvbG9yLnI7IFxyXG4gICAgICB0aGlzLmcgPSBfY29sb3IuZzsgXHJcbiAgICAgIHRoaXMuYiA9IF9jb2xvci5iOyBcclxuICAgICAgdGhpcy5hID0gX2NvbG9yLmE7IFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGAocjogJHt0aGlzLnIudG9GaXhlZCgzKX0sIGc6ICR7dGhpcy5nLnRvRml4ZWQoMyl9LCBiOiAke3RoaXMuYi50b0ZpeGVkKDMpfSwgYTogJHt0aGlzLmEudG9GaXhlZCgzKX0pYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gdGhpcy5nZXRNdXRhdG9yKHRydWUpO1xyXG4gICAgICAvLyBzZXJpYWxpemF0aW9uLnRvSlNPTiA9ICgpID0+IHsgcmV0dXJuIGB7IFwiclwiOiAke3RoaXMucn0sIFwiZ1wiOiAke3RoaXMuZ30sIFwiYlwiOiAke3RoaXMuYn0sIFwiYVwiOiAke3RoaXMuYX19YDsgfTtcclxuICAgICAgc2VyaWFsaXphdGlvbi50b0pTT04gPSAoKSA9PiB7IHJldHVybiBgWyR7dGhpcy5yfSwgJHt0aGlzLmd9LCAke3RoaXMuYn0sICR7dGhpcy5hfV1gOyB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBpZiAodHlwZW9mIChfc2VyaWFsaXphdGlvbikgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIFt0aGlzLnIsIHRoaXMuZywgdGhpcy5iLCB0aGlzLmFdID0gSlNPTi5wYXJzZSg8c3RyaW5nPjx1bmtub3duPl9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5tdXRhdGUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgey8qKiAqLyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQmFzZWNsYXNzIGZvciBtYXRlcmlhbHMuIENvbWJpbmVzIGEge0BsaW5rIFNoYWRlcn0gd2l0aCBhIGNvbXBhdGlibGUge0BsaW5rIENvYXR9XHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWF0ZXJpYWwgZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgU2VyaWFsaXphYmxlUmVzb3VyY2Uge1xyXG4gICAgLyoqIFRoZSBuYW1lIHRvIGNhbGwgdGhlIE1hdGVyaWFsIGJ5LiAqL1xyXG4gICAgI2NvYXQ6IENvYXQ7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGlkUmVzb3VyY2U6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIHByaXZhdGUgc2hhZGVyVHlwZTogdHlwZW9mIFNoYWRlcjsgLy8gVGhlIHNoYWRlciBwcm9ncmFtIHVzZWQgYnkgdGhpcyBCYXNlTWF0ZXJpYWxcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZywgX3NoYWRlcj86IHR5cGVvZiBTaGFkZXIsIF9jb2F0PzogQ29hdCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgICAgdGhpcy5zaGFkZXJUeXBlID0gX3NoYWRlcjtcclxuICAgICAgaWYgKF9zaGFkZXIpIHtcclxuICAgICAgICBpZiAoX2NvYXQpXHJcbiAgICAgICAgICB0aGlzLmNvYXQgPSBfY29hdDtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICB0aGlzLmNvYXQgPSB0aGlzLmNyZWF0ZUNvYXRNYXRjaGluZ1NoYWRlcigpO1xyXG4gICAgICB9XHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgcmVmZXJlbmNlZCB7QGxpbmsgQ29hdH0gaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgIHB1YmxpYyBnZXQgY29hdCgpOiBDb2F0IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2NvYXQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE1ha2VzIHRoaXMgbWF0ZXJpYWwgcmVmZXJlbmNlIHRoZSBnaXZlbiB7QGxpbmsgQ29hdH0gaWYgaXQgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSByZWZlcmVuY2VkIHtAbGluayBTaGFkZXJ9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQgY29hdChfY29hdDogQ29hdCkge1xyXG4gICAgICBpZiAoX2NvYXQuY29uc3RydWN0b3IgIT0gdGhpcy5zaGFkZXJUeXBlLmdldENvYXQoKSlcclxuICAgICAgICBpZiAoX2NvYXQgaW5zdGFuY2VvZiB0aGlzLnNoYWRlclR5cGUuZ2V0Q29hdCgpKVxyXG4gICAgICAgICAgRGVidWcuZnVkZ2UoXCJDb2F0IGlzIGV4dGVuc2lvbiBvZiBDb2F0IHJlcXVpcmVkIGJ5IHNoYWRlclwiKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICB0aHJvdyAobmV3IEVycm9yKFwiU2hhZGVyIGFuZCBjb2F0IGRvbid0IG1hdGNoXCIpKTtcclxuICAgICAgdGhpcy4jY29hdCA9IF9jb2F0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgQ29hdH0gaW5zdGFuY2UgdGhhdCBpcyB2YWxpZCBmb3IgdGhlIHtAbGluayBTaGFkZXJ9IHJlZmVyZW5jZWQgYnkgdGhpcyBtYXRlcmlhbFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY3JlYXRlQ29hdE1hdGNoaW5nU2hhZGVyKCk6IENvYXQge1xyXG4gICAgICBsZXQgY29hdDogQ29hdCA9IG5ldyAodGhpcy5zaGFkZXJUeXBlLmdldENvYXQoKSkoKTtcclxuICAgICAgcmV0dXJuIGNvYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGFuZ2VzIHRoZSBtYXRlcmlhbHMgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiB7QGxpbmsgU2hhZGVyfSwgY3JlYXRlcyBhbmQgcmVmZXJlbmNlcyBhIG5ldyB7QGxpbmsgQ29hdH0gaW5zdGFuY2UgIFxyXG4gICAgICogYW5kIG11dGF0ZXMgdGhlIG5ldyBjb2F0IHRvIHByZXNlcnZlIG1hdGNoaW5nIHByb3BlcnRpZXMuXHJcbiAgICAgKiBAcGFyYW0gX3NoYWRlclR5cGUgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRTaGFkZXIoX3NoYWRlclR5cGU6IHR5cGVvZiBTaGFkZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zaGFkZXJUeXBlID0gX3NoYWRlclR5cGU7XHJcbiAgICAgIGxldCBjb2F0OiBDb2F0ID0gdGhpcy5jcmVhdGVDb2F0TWF0Y2hpbmdTaGFkZXIoKTtcclxuICAgICAgY29hdC5tdXRhdGUodGhpcy4jY29hdC5nZXRNdXRhdG9yKCkpO1xyXG4gICAgICB0aGlzLmNvYXQgPSBjb2F0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUge0BsaW5rIFNoYWRlcn0gcmVmZXJlbmNlZCBieSB0aGlzIG1hdGVyaWFsXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTaGFkZXIoKTogdHlwZW9mIFNoYWRlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNoYWRlclR5cGU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgLy8gVE9ETzogdGhpcyB0eXBlIG9mIHNlcmlhbGl6YXRpb24gd2FzIGltcGxlbWVudGVkIGZvciBpbXBsaWNpdCBNYXRlcmlhbCBjcmVhdGUuIENoZWNrIGlmIG9ic29sZXRlIHdoZW4gb25seSBvbmUgbWF0ZXJpYWwgY2xhc3MgZXhpc3RzIGFuZC9vciBtYXRlcmlhbHMgYXJlIHN0b3JlZCBzZXBhcmF0ZWx5XHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgaWRSZXNvdXJjZTogdGhpcy5pZFJlc291cmNlLFxyXG4gICAgICAgIHNoYWRlcjogdGhpcy5zaGFkZXJUeXBlLm5hbWUsXHJcbiAgICAgICAgY29hdDogU2VyaWFsaXplci5zZXJpYWxpemUodGhpcy4jY29hdClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICB0aGlzLm5hbWUgPSBfc2VyaWFsaXphdGlvbi5uYW1lO1xyXG4gICAgICBQcm9qZWN0LnJlZ2lzdGVyKHRoaXMsIF9zZXJpYWxpemF0aW9uLmlkUmVzb3VyY2UpO1xyXG4gICAgICB0aGlzLnNoYWRlclR5cGUgPSAoPEdlbmVyYWw+RnVkZ2VDb3JlKVtfc2VyaWFsaXphdGlvbi5zaGFkZXJdO1xyXG4gICAgICBsZXQgY29hdDogQ29hdCA9IDxDb2F0PmF3YWl0IFNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uY29hdCk7XHJcbiAgICAgIHRoaXMuY29hdCA9IGNvYXQ7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IodHJ1ZSk7XHJcbiAgICAgIG11dGF0b3IuY29hdCA9IHRoaXMuY29hdC5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIC8vIGRlbGV0ZSBfbXV0YXRvci5pZFJlc291cmNlO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQWJzdHJhY3QgY2xhc3Mgc3VwcG9ydGluZyB2YXJpb3VzIGFyaXRobWV0aWNhbCBoZWxwZXIgZnVuY3Rpb25zXHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhbGMge1xyXG4gICAgLyoqIGZhY3RvciBtdWx0aXBsaWVkIHdpdGggYW5nbGUgaW4gZGVncmVlcyB5aWVsZHMgdGhlIGFuZ2xlIGluIHJhZGlhbiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBkZWcycmFkOiBudW1iZXIgPSBNYXRoLlBJIC8gMTgwO1xyXG4gICAgLyoqIGZhY3RvciBtdWx0aXBsaWVkIHdpdGggYW5nbGUgaW4gcmFkaWFuIHlpZWxkcyB0aGUgYW5nbGUgaW4gZGVncmVlcyAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSByYWQyZGVnOiBudW1iZXIgPSAxIC8gQ2FsYy5kZWcycmFkO1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgb25lIG9mIHRoZSB2YWx1ZXMgcGFzc2VkIGluLCBlaXRoZXIgX3ZhbHVlIGlmIHdpdGhpbiBfbWluIGFuZCBfbWF4IG9yIHRoZSBib3VuZGFyeSBiZWluZyBleGNlZWRlZCBieSBfdmFsdWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBjbGFtcDxUPihfdmFsdWU6IFQsIF9taW46IFQsIF9tYXg6IFQsIF9pc1NtYWxsZXI6IChfdmFsdWUxOiBULCBfdmFsdWUyOiBUKSA9PiBib29sZWFuID0gKF92YWx1ZTE6IFQsIF92YWx1ZTI6IFQpID0+IHsgcmV0dXJuIF92YWx1ZTEgPCBfdmFsdWUyOyB9KTogVCB7XHJcbiAgICAgIGlmIChfaXNTbWFsbGVyKF92YWx1ZSwgX21pbikpIHJldHVybiBfbWluO1xyXG4gICAgICBpZiAoX2lzU21hbGxlcihfbWF4LCBfdmFsdWUpKSByZXR1cm4gX21heDtcclxuICAgICAgcmV0dXJuIF92YWx1ZTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgaW50ZXJmYWNlIEJvcmRlciB7XHJcbiAgICBsZWZ0OiBudW1iZXI7XHJcbiAgICB0b3A6IG51bWJlcjtcclxuICAgIHJpZ2h0OiBudW1iZXI7XHJcbiAgICBib3R0b206IG51bWJlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZyYW1pbmcgZGVzY3JpYmVzIGhvdyB0byBtYXAgYSByZWN0YW5nbGUgaW50byBhIGdpdmVuIGZyYW1lXHJcbiAgICogYW5kIGhvdyBwb2ludHMgaW4gdGhlIGZyYW1lIGNvcnJlc3BvbmQgdG8gcG9pbnRzIGluIHRoZSByZXN1bHRpbmcgcmVjdGFuZ2xlIGFuZCB2aWNlIHZlcnNhXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTkgIFxyXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9KaXJrYURlbGxPcm8vRlVER0Uvd2lraS9GcmFtaW5nXHJcbiAgICovXHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIEZyYW1pbmcgZXh0ZW5kcyBNdXRhYmxlIHtcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBhIHBvaW50IGluIHRoZSBnaXZlbiBmcmFtZSBhY2NvcmRpbmcgdG8gdGhpcyBmcmFtaW5nXHJcbiAgICAgKiBAcGFyYW0gX3BvaW50SW5GcmFtZSBUaGUgcG9pbnQgaW4gdGhlIGZyYW1lIGdpdmVuXHJcbiAgICAgKiBAcGFyYW0gX3JlY3RGcmFtZSBUaGUgZnJhbWUgdGhlIHBvaW50IGlzIHJlbGF0aXZlIHRvXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRQb2ludChfcG9pbnRJbkZyYW1lOiBWZWN0b3IyLCBfcmVjdEZyYW1lOiBSZWN0YW5nbGUpOiBWZWN0b3IyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBhIHBvaW50IGluIGEgZ2l2ZW4gcmVjdGFuZ2xlIGJhY2sgdG8gYSBjYWxjdWxhdGVkIGZyYW1lIG9mIG9yaWdpblxyXG4gICAgICogQHBhcmFtIF9wb2ludCBUaGUgcG9pbnQgaW4gdGhlIHJlY3RhbmdsZVxyXG4gICAgICogQHBhcmFtIF9yZWN0IFRoZSByZWN0YW5nbGUgdGhlIHBvaW50IGlzIHJlbGF0aXZlIHRvXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRQb2ludEludmVyc2UoX3BvaW50OiBWZWN0b3IyLCBfcmVjdDogUmVjdGFuZ2xlKTogVmVjdG9yMjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRha2VzIGEgcmVjdGFuZ2xlIGFzIHRoZSBmcmFtZSBhbmQgY3JlYXRlcyBhIG5ldyByZWN0YW5nbGUgYWNjb3JkaW5nIHRvIHRoZSBmcmFtaW5nXHJcbiAgICAgKiBAcGFyYW0gX3JlY3RGcmFtZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0UmVjdChfcmVjdEZyYW1lOiBSZWN0YW5nbGUpOiBSZWN0YW5nbGU7XHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgey8qKiAqLyB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgcmVzdWx0aW5nIHJlY3RhbmdsZSBoYXMgYSBmaXhlZCB3aWR0aCBhbmQgaGVpZ2h0IGFuZCBkaXNwbGF5IHNob3VsZCBzY2FsZSB0byBmaXQgdGhlIGZyYW1lXHJcbiAgICogUG9pbnRzIGFyZSBzY2FsZWQgaW4gdGhlIHNhbWUgcmF0aW9cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRnJhbWluZ0ZpeGVkIGV4dGVuZHMgRnJhbWluZyB7XHJcbiAgICBwdWJsaWMgd2lkdGg6IG51bWJlciA9IDMwMDtcclxuICAgIHB1YmxpYyBoZWlnaHQ6IG51bWJlciA9IDE1MDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3dpZHRoOiBudW1iZXIgPSAzMDAsIF9oZWlnaHQ6IG51bWJlciA9IDE1MCkge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLnNldFNpemUoX3dpZHRoLCBfaGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0U2l6ZShfd2lkdGg6IG51bWJlciwgX2hlaWdodDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMud2lkdGggPSBfd2lkdGg7XHJcbiAgICAgIHRoaXMuaGVpZ2h0ID0gX2hlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UG9pbnQoX3BvaW50SW5GcmFtZTogVmVjdG9yMiwgX3JlY3RGcmFtZTogUmVjdGFuZ2xlKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICB0aGlzLndpZHRoICogKF9wb2ludEluRnJhbWUueCAtIF9yZWN0RnJhbWUueCkgLyBfcmVjdEZyYW1lLndpZHRoLFxyXG4gICAgICAgIHRoaXMuaGVpZ2h0ICogKF9wb2ludEluRnJhbWUueSAtIF9yZWN0RnJhbWUueSkgLyBfcmVjdEZyYW1lLmhlaWdodFxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQb2ludEludmVyc2UoX3BvaW50OiBWZWN0b3IyLCBfcmVjdDogUmVjdGFuZ2xlKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICBfcG9pbnQueCAqIF9yZWN0LndpZHRoIC8gdGhpcy53aWR0aCArIF9yZWN0LngsXHJcbiAgICAgICAgX3BvaW50LnkgKiBfcmVjdC5oZWlnaHQgLyB0aGlzLmhlaWdodCArIF9yZWN0LnlcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UmVjdChfcmVjdEZyYW1lOiBSZWN0YW5nbGUpOiBSZWN0YW5nbGUge1xyXG4gICAgICByZXR1cm4gUmVjdGFuZ2xlLkdFVCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIHJlc3VsdGluZyByZWN0YW5nbGUgYXJlIGZyYWN0aW9ucyBvZiB0aG9zZSBvZiB0aGUgZnJhbWUsIHNjYWxlZCBieSBub3JtZWQgdmFsdWVzIG5vcm1XaWR0aCBhbmQgbm9ybUhlaWdodC5cclxuICAgKiBEaXNwbGF5IHNob3VsZCBzY2FsZSB0byBmaXQgdGhlIGZyYW1lIGFuZCBwb2ludHMgYXJlIHNjYWxlZCBpbiB0aGUgc2FtZSByYXRpb1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBGcmFtaW5nU2NhbGVkIGV4dGVuZHMgRnJhbWluZyB7XHJcbiAgICBwdWJsaWMgbm9ybVdpZHRoOiBudW1iZXIgPSAxLjA7XHJcbiAgICBwdWJsaWMgbm9ybUhlaWdodDogbnVtYmVyID0gMS4wO1xyXG5cclxuICAgIHB1YmxpYyBzZXRTY2FsZShfbm9ybVdpZHRoOiBudW1iZXIsIF9ub3JtSGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5ub3JtV2lkdGggPSBfbm9ybVdpZHRoO1xyXG4gICAgICB0aGlzLm5vcm1IZWlnaHQgPSBfbm9ybUhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UG9pbnQoX3BvaW50SW5GcmFtZTogVmVjdG9yMiwgX3JlY3RGcmFtZTogUmVjdGFuZ2xlKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICB0aGlzLm5vcm1XaWR0aCAqIChfcG9pbnRJbkZyYW1lLnggLSBfcmVjdEZyYW1lLngpLFxyXG4gICAgICAgIHRoaXMubm9ybUhlaWdodCAqIChfcG9pbnRJbkZyYW1lLnkgLSBfcmVjdEZyYW1lLnkpXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBvaW50SW52ZXJzZShfcG9pbnQ6IFZlY3RvcjIsIF9yZWN0OiBSZWN0YW5nbGUpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKFxyXG4gICAgICAgIF9wb2ludC54IC8gdGhpcy5ub3JtV2lkdGggKyBfcmVjdC54LFxyXG4gICAgICAgIF9wb2ludC55IC8gdGhpcy5ub3JtSGVpZ2h0ICsgX3JlY3QueVxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRSZWN0KF9yZWN0RnJhbWU6IFJlY3RhbmdsZSk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIHJldHVybiBSZWN0YW5nbGUuR0VUKDAsIDAsIHRoaXMubm9ybVdpZHRoICogX3JlY3RGcmFtZS53aWR0aCwgdGhpcy5ub3JtSGVpZ2h0ICogX3JlY3RGcmFtZS5oZWlnaHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIHJlc3VsdGluZyByZWN0YW5nbGUgZml0cyBpbnRvIGEgbWFyZ2luIGdpdmVuIGFzIGZyYWN0aW9ucyBvZiB0aGUgc2l6ZSBvZiB0aGUgZnJhbWUgZ2l2ZW4gYnkgbm9ybUFuY2hvclxyXG4gICAqIHBsdXMgYW4gYWJzb2x1dGUgcGFkZGluZyBnaXZlbiBieSBwaXhlbEJvcmRlci4gRGlzcGxheSBzaG91bGQgZml0IGludG8gdGhpcy5cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRnJhbWluZ0NvbXBsZXggZXh0ZW5kcyBGcmFtaW5nIHtcclxuICAgIHB1YmxpYyBtYXJnaW46IEJvcmRlciA9IHsgbGVmdDogMCwgdG9wOiAwLCByaWdodDogMCwgYm90dG9tOiAwIH07XHJcbiAgICBwdWJsaWMgcGFkZGluZzogQm9yZGVyID0geyBsZWZ0OiAwLCB0b3A6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAgfTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0UG9pbnQoX3BvaW50SW5GcmFtZTogVmVjdG9yMiwgX3JlY3RGcmFtZTogUmVjdGFuZ2xlKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICBfcG9pbnRJbkZyYW1lLnggLSB0aGlzLnBhZGRpbmcubGVmdCAtIHRoaXMubWFyZ2luLmxlZnQgKiBfcmVjdEZyYW1lLndpZHRoLFxyXG4gICAgICAgIF9wb2ludEluRnJhbWUueSAtIHRoaXMucGFkZGluZy50b3AgLSB0aGlzLm1hcmdpbi50b3AgKiBfcmVjdEZyYW1lLmhlaWdodFxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldFBvaW50SW52ZXJzZShfcG9pbnQ6IFZlY3RvcjIsIF9yZWN0OiBSZWN0YW5nbGUpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKFxyXG4gICAgICAgIF9wb2ludC54ICsgdGhpcy5wYWRkaW5nLmxlZnQgKyB0aGlzLm1hcmdpbi5sZWZ0ICogX3JlY3Qud2lkdGgsXHJcbiAgICAgICAgX3BvaW50LnkgKyB0aGlzLnBhZGRpbmcudG9wICsgdGhpcy5tYXJnaW4udG9wICogX3JlY3QuaGVpZ2h0XHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFJlY3QoX3JlY3RGcmFtZTogUmVjdGFuZ2xlKTogUmVjdGFuZ2xlIHtcclxuICAgICAgaWYgKCFfcmVjdEZyYW1lKVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgICAgbGV0IG1pblg6IG51bWJlciA9IF9yZWN0RnJhbWUueCArIHRoaXMubWFyZ2luLmxlZnQgKiBfcmVjdEZyYW1lLndpZHRoICsgdGhpcy5wYWRkaW5nLmxlZnQ7XHJcbiAgICAgIGxldCBtaW5ZOiBudW1iZXIgPSBfcmVjdEZyYW1lLnkgKyB0aGlzLm1hcmdpbi50b3AgKiBfcmVjdEZyYW1lLmhlaWdodCArIHRoaXMucGFkZGluZy50b3A7XHJcbiAgICAgIGxldCBtYXhYOiBudW1iZXIgPSBfcmVjdEZyYW1lLnggKyAoMSAtIHRoaXMubWFyZ2luLnJpZ2h0KSAqIF9yZWN0RnJhbWUud2lkdGggLSB0aGlzLnBhZGRpbmcucmlnaHQ7XHJcbiAgICAgIGxldCBtYXhZOiBudW1iZXIgPSBfcmVjdEZyYW1lLnkgKyAoMSAtIHRoaXMubWFyZ2luLmJvdHRvbSkgKiBfcmVjdEZyYW1lLmhlaWdodCAtIHRoaXMucGFkZGluZy5ib3R0b207XHJcblxyXG4gICAgICByZXR1cm4gUmVjdGFuZ2xlLkdFVChtaW5YLCBtaW5ZLCBtYXhYIC0gbWluWCwgbWF4WSAtIG1pblkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICByZXR1cm4geyBtYXJnaW46IHRoaXMubWFyZ2luLCBwYWRkaW5nOiB0aGlzLnBhZGRpbmcgfTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBSZXByZXNlbnRhdGlvbiBvZiBhIHZlY3RvcjIgYXMgcG9sYXIgY29vcmRpbmF0ZXMgXHJcbiAgICogYGBgcGxhaW50ZXh0XHJcbiAgICogIOKGlS0gYW5nbGUgKEFuZ2xlIHRvIHRoZSB4LWF4aXMpXHJcbiAgICogIC3ihpIgTWFnbml0dWRlIChEaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIpICBcclxuICAgKiBgYGBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgR2VvMiBpbXBsZW1lbnRzIFJlY3ljYWJsZSB7XHJcbiAgICBwdWJsaWMgbWFnbml0dWRlOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIGFuZ2xlOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9hbmdsZTogbnVtYmVyID0gMCwgX21hZ25pdHVkZTogbnVtYmVyID0gMSkge1xyXG4gICAgICB0aGlzLnNldChfYW5nbGUsIF9tYWduaXR1ZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBwcm9wZXJ0aWVzIG9mIHRoaXMgaW5zdGFuY2UgYXQgb25jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0KF9hbmdsZTogbnVtYmVyID0gMCwgX21hZ25pdHVkZTogbnVtYmVyID0gMSk6IHZvaWQge1xyXG4gICAgICB0aGlzLm1hZ25pdHVkZSA9IF9tYWduaXR1ZGU7XHJcbiAgICAgIHRoaXMuYW5nbGUgPSBfYW5nbGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcHJldHR5IHN0cmluZyByZXByZXNlbnRhdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGBhbmdsZTogJHt0aGlzLmFuZ2xlLnRvUHJlY2lzaW9uKDUpfSwgIG1hZ25pdHVkZTogJHt0aGlzLm1hZ25pdHVkZS50b1ByZWNpc2lvbig1KX1gO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFJlcHJlc2VudGF0aW9uIG9mIGEgdmVjdG9yMyBhcyBnZW9ncmFwaGljIGNvb3JkaW5hdGVzIGFzIHNlZW4gb24gYSBnbG9iZVxyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqIOKGkHzihpIgTG9uZ2l0dWRlIChBbmdsZSB0byB0aGUgei1heGlzKSBcclxuICAgKiAg4oaVLSBMYXRpdHVkZSAoQW5nbGUgdG8gdGhlIGVxdWF0b3IpXHJcbiAgICogIC3ihpIgTWFnbml0dWRlIChEaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIpICBcclxuICAgKiBgYGBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgR2VvMyBpbXBsZW1lbnRzIFJlY3ljYWJsZSB7XHJcbiAgICBwdWJsaWMgbWFnbml0dWRlOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIGxhdGl0dWRlOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIGxvbmdpdHVkZTogbnVtYmVyID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfbG9uZ2l0dWRlOiBudW1iZXIgPSAwLCBfbGF0aXR1ZGU6IG51bWJlciA9IDAsIF9tYWduaXR1ZGU6IG51bWJlciA9IDEpIHtcclxuICAgICAgdGhpcy5zZXQoX2xvbmdpdHVkZSwgX2xhdGl0dWRlLCBfbWFnbml0dWRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgcHJvcGVydGllcyBvZiB0aGlzIGluc3RhbmNlIGF0IG9uY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldChfbG9uZ2l0dWRlOiBudW1iZXIgPSAwLCBfbGF0aXR1ZGU6IG51bWJlciA9IDAsIF9tYWduaXR1ZGU6IG51bWJlciA9IDEpOiB2b2lkIHtcclxuICAgICAgdGhpcy5tYWduaXR1ZGUgPSBfbWFnbml0dWRlO1xyXG4gICAgICB0aGlzLmxhdGl0dWRlID0gX2xhdGl0dWRlO1xyXG4gICAgICB0aGlzLmxvbmdpdHVkZSA9IF9sb25naXR1ZGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2V0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcHJldHR5IHN0cmluZyByZXByZXNlbnRhdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGBsb25naXR1ZGU6ICR7dGhpcy5sb25naXR1ZGUudG9QcmVjaXNpb24oNSl9LCBsYXRpdHVkZTogJHt0aGlzLmxhdGl0dWRlLnRvUHJlY2lzaW9uKDUpfSwgbWFnbml0dWRlOiAke3RoaXMubWFnbml0dWRlLnRvUHJlY2lzaW9uKDUpfWA7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLy8gRnJvbSBodHRwOi8vYmFhZ29lLmNvbS9lbi9SYW5kb21NdXNpbmdzL2phdmFzY3JpcHQvXHJcbiAgLy8gSm9oYW5uZXMgQmFhZ8O4ZSA8YmFhZ29lQGJhYWdvZS5jb20+LCAyMDEwXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIE1hc2goKTogRnVuY3Rpb24ge1xyXG4gICAgbGV0IG46IG51bWJlciA9IDB4ZWZjODI0OWQ7XHJcblxyXG4gICAgbGV0IG1hc2g6IEZ1bmN0aW9uID0gZnVuY3Rpb24gKGRhdGE6IHN0cmluZyB8IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbiArPSBkYXRhLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgbGV0IGg6IG51bWJlciA9IDAuMDI1MTk2MDMyODI0MTY5MzggKiBuO1xyXG4gICAgICAgIG4gPSBoID4+PiAwO1xyXG4gICAgICAgIGggLT0gbjtcclxuICAgICAgICBoICo9IG47XHJcbiAgICAgICAgbiA9IGggPj4+IDA7XHJcbiAgICAgICAgaCAtPSBuO1xyXG4gICAgICAgIG4gKz0gaCAqIDB4MTAwMDAwMDAwOyAvLyAyXjMyXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIChuID4+PiAwKSAqIDIuMzI4MzA2NDM2NTM4Njk2M2UtMTA7IC8vIDJeLTMyXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1hc2gudmVyc2lvbiA9ICdNYXNoIDAuOSc7XHJcbiAgICByZXR1cm4gbWFzaDtcclxuICB9XHJcblxyXG5cclxuICAvLyBGcm9tIGh0dHA6Ly9iYWFnb2UuY29tL2VuL1JhbmRvbU11c2luZ3MvamF2YXNjcmlwdC9cclxuICBleHBvcnQgZnVuY3Rpb24gTEZJQjQoKTogRnVuY3Rpb24ge1xyXG4gICAgLy8gR2VvcmdlIE1hcnNhZ2xpYSdzIExGSUI0LFxyXG4gICAgLy9odHRwOi8vZ3JvdXBzLmdvb2dsZS5jb20vZ3JvdXAvc2NpLmNyeXB0L21zZy9lYjRkZGRlNzgyYjE3MDUxXHJcbiAgICBsZXQgYXJnczogbnVtYmVyW10gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xyXG4gICAgbGV0IGswOiBudW1iZXIgPSAwLFxyXG4gICAgICBrMTogbnVtYmVyID0gNTgsXHJcbiAgICAgIGsyOiBudW1iZXIgPSAxMTksXHJcbiAgICAgIGszOiBudW1iZXIgPSAxNzg7XHJcblxyXG4gICAgbGV0IHM6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgbGV0IG1hc2g6IEZ1bmN0aW9uID0gTWFzaCgpO1xyXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGFyZ3MgPSBbK25ldyBEYXRlKCldO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IDI1NjsgaisrKSB7XHJcbiAgICAgIHNbal0gPSBtYXNoKFwiIFwiKTtcclxuICAgICAgc1tqXSAtPSBtYXNoKFwiIFwiKSAqIDQuNzY4MzcxNTgyMDMxMjVlLTc7IC8vIDJeLTIxXHJcbiAgICAgIGlmIChzW2pdIDwgMCkge1xyXG4gICAgICAgIHNbal0gKz0gMTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgZm9yIChsZXQgajogbnVtYmVyID0gMDsgaiA8IDI1NjsgaisrKSB7XHJcbiAgICAgICAgc1tqXSAtPSBtYXNoKGFyZ3NbaV0pO1xyXG4gICAgICAgIHNbal0gLT0gbWFzaChhcmdzW2ldKSAqIDQuNzY4MzcxNTgyMDMxMjVlLTc7IC8vIDJeLTIxXHJcbiAgICAgICAgaWYgKHNbal0gPCAwKSB7XHJcbiAgICAgICAgICBzW2pdICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBtYXNoID0gbnVsbDtcclxuXHJcbiAgICBsZXQgcmFuZG9tOiBGdW5jdGlvbiA9IGZ1bmN0aW9uICgpOiBudW1iZXIge1xyXG4gICAgICBsZXQgeDogbnVtYmVyO1xyXG5cclxuICAgICAgazAgPSAoazAgKyAxKSAmIDI1NTtcclxuICAgICAgazEgPSAoazEgKyAxKSAmIDI1NTtcclxuICAgICAgazIgPSAoazIgKyAxKSAmIDI1NTtcclxuICAgICAgazMgPSAoazMgKyAxKSAmIDI1NTtcclxuXHJcbiAgICAgIHggPSBzW2swXSAtIHNbazFdO1xyXG4gICAgICBpZiAoeCA8IDApIHtcclxuICAgICAgICB4ICs9IDE7XHJcbiAgICAgIH1cclxuICAgICAgeCAtPSBzW2syXTtcclxuICAgICAgaWYgKHggPCAwKSB7XHJcbiAgICAgICAgeCArPSAxO1xyXG4gICAgICB9XHJcbiAgICAgIHggLT0gc1trM107XHJcbiAgICAgIGlmICh4IDwgMCkge1xyXG4gICAgICAgIHggKz0gMTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHNbazBdID0geDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gcmFuZG9tLnVpbnQzMiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgcmV0dXJuIHJhbmRvbSgpICogMHgxMDAwMDAwMDAgPj4+IDA7IC8vIDJeMzJcclxuICAgIC8vIH07XHJcbiAgICAvLyByYW5kb20uZnJhY3Q1MyA9IHJhbmRvbTtcclxuICAgIC8vIHJhbmRvbS52ZXJzaW9uID0gXCJMRklCNCAwLjlcIjtcclxuICAgIC8vIHJhbmRvbS5hcmdzID0gYXJncztcclxuXHJcbiAgICByZXR1cm4gcmFuZG9tO1xyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBSZXByZXNlbnRzIHRoZSBtYXRyaXggYXMgdHJhbnNsYXRpb24sIHJvdGF0aW9uIGFuZCBzY2FsaW5nIHtAbGluayBWZWN0b3IyfSwgYmVpbmcgY2FsY3VsYXRlZCBmcm9tIHRoZSBtYXRyaXhcclxuICAgKi9cclxuICBpbnRlcmZhY2UgVmVjdG9yUmVwcmVzZW50YXRpb24ge1xyXG4gICAgdHJhbnNsYXRpb246IFZlY3RvcjI7XHJcbiAgICByb3RhdGlvbjogbnVtYmVyO1xyXG4gICAgc2NhbGluZzogVmVjdG9yMjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNpbXBsZSBjbGFzcyBmb3IgM3gzIG1hdHJpeCBvcGVyYXRpb25zXHJcbiAgICogQGF1dGhvcnMgSmFzY2hhIEthcmFnw7ZsLCBIRlUsIDIwMTkgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBNYXRyaXgzeDMgZXh0ZW5kcyBNdXRhYmxlIGltcGxlbWVudHMgU2VyaWFsaXphYmxlLCBSZWN5Y2FibGUge1xyXG4gICAgcHJpdmF0ZSBkYXRhOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDkpOyAvLyBUaGUgZGF0YSBvZiB0aGUgbWF0cml4LlxyXG4gICAgcHJpdmF0ZSBtdXRhdG9yOiBNdXRhdG9yID0gbnVsbDsgLy8gcHJlcGFyZWQgZm9yIG9wdGltaXphdGlvbiwga2VlcCBtdXRhdG9yIHRvIHJlZHVjZSByZWR1bmRhbnQgY2FsY3VsYXRpb24gYW5kIGZvciBjb21wYXJpc29uLiBTZXQgdG8gbnVsbCB3aGVuIGRhdGEgY2hhbmdlcyFcclxuICAgIHByaXZhdGUgdmVjdG9yczogVmVjdG9yUmVwcmVzZW50YXRpb247IC8vIHZlY3RvciByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG1hdHJpeFxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5yZWN5Y2xlKCk7XHJcbiAgICAgIHRoaXMucmVzZXRDYWNoZSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvL1RPRE86IGZpZ3VyZSBvdXQgd2hhdCB0aGlzIGlzIHVzZWQgZm9yXHJcbiAgICBwdWJsaWMgc3RhdGljIFBST0pFQ1RJT04oX3dpZHRoOiBudW1iZXIsIF9oZWlnaHQ6IG51bWJlcik6IE1hdHJpeDN4MyB7XHJcbiAgICAgIGxldCBtdHhSZXN1bHQ6IE1hdHJpeDN4MyA9IG5ldyBNYXRyaXgzeDM7XHJcbiAgICAgIG10eFJlc3VsdC5kYXRhLnNldChbXHJcbiAgICAgICAgMiAvIF93aWR0aCwgMCwgMCxcclxuICAgICAgICAwLCAtMiAvIF9oZWlnaHQsIDAsXHJcbiAgICAgICAgLTEsIDEsIDFcclxuICAgICAgXSk7XHJcbiAgICAgIHJldHVybiBtdHhSZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBJREVOVElUWSgpOiBNYXRyaXgzeDMge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDN4MyA9IFJlY3ljbGVyLmdldChNYXRyaXgzeDMpO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG1hdHJpeCB0aGF0IHRyYW5zbGF0ZXMgY29vcmRpbmF0ZXMgYWxvbmcgdGhlIHgtLCB5LSBhbmQgei1heGlzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4ge0BsaW5rIFZlY3RvcjJ9LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFRSQU5TTEFUSU9OKF90cmFuc2xhdGU6IFZlY3RvcjIpOiBNYXRyaXgzeDMge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDN4MyA9IFJlY3ljbGVyLmdldChNYXRyaXgzeDMpO1xyXG4gICAgICBtdHhSZXN1bHQuZGF0YS5zZXQoW1xyXG4gICAgICAgIDEsIDAsIDAsXHJcbiAgICAgICAgMCwgMSwgMCxcclxuICAgICAgICBfdHJhbnNsYXRlLngsIF90cmFuc2xhdGUueSwgMVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCByb3RhdGVzIGNvb3JkaW5hdGVzIG9uIHRoZSB6LWF4aXMgd2hlbiBtdWx0aXBsaWVkIGJ5LlxyXG4gICAgICogQHBhcmFtIF9hbmdsZUluRGVncmVlcyBUaGUgdmFsdWUgb2YgdGhlIHJvdGF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFJPVEFUSU9OKF9hbmdsZUluRGVncmVlczogbnVtYmVyKTogTWF0cml4M3gzIHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXgzeDMgPSBSZWN5Y2xlci5nZXQoTWF0cml4M3gzKTtcclxuICAgICAgbGV0IGFuZ2xlSW5SYWRpYW5zOiBudW1iZXIgPSBfYW5nbGVJbkRlZ3JlZXMgKiBDYWxjLmRlZzJyYWQ7XHJcbiAgICAgIGxldCBzaW46IG51bWJlciA9IE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcclxuICAgICAgbGV0IGNvczogbnVtYmVyID0gTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xyXG4gICAgICBtdHhSZXN1bHQuZGF0YS5zZXQoW1xyXG4gICAgICAgIGNvcywgc2luLCAwLFxyXG4gICAgICAgIC1zaW4sIGNvcywgMCxcclxuICAgICAgICAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG1hdHJpeCB0aGF0IHNjYWxlcyBjb29yZGluYXRlcyBhbG9uZyB0aGUgeC0sIHktIGFuZCB6LWF4aXMgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiB7QGxpbmsgVmVjdG9yMn1cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBTQ0FMSU5HKF9zY2FsYXI6IFZlY3RvcjIpOiBNYXRyaXgzeDMge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDN4MyA9IFJlY3ljbGVyLmdldChNYXRyaXgzeDMpO1xyXG4gICAgICBtdHhSZXN1bHQuZGF0YS5zZXQoW1xyXG4gICAgICAgIF9zY2FsYXIueCwgMCwgMCxcclxuICAgICAgICAwLCBfc2NhbGFyLnksIDAsXHJcbiAgICAgICAgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIE1VTFRJUExJQ0FUSU9OKF9tdHhMZWZ0OiBNYXRyaXgzeDMsIF9tdHhSaWdodDogTWF0cml4M3gzKTogTWF0cml4M3gzIHtcclxuICAgICAgbGV0IGEwMDogbnVtYmVyID0gX210eExlZnQuZGF0YVswICogMyArIDBdO1xyXG4gICAgICBsZXQgYTAxOiBudW1iZXIgPSBfbXR4TGVmdC5kYXRhWzAgKiAzICsgMV07XHJcbiAgICAgIGxldCBhMDI6IG51bWJlciA9IF9tdHhMZWZ0LmRhdGFbMCAqIDMgKyAyXTtcclxuICAgICAgbGV0IGExMDogbnVtYmVyID0gX210eExlZnQuZGF0YVsxICogMyArIDBdO1xyXG4gICAgICBsZXQgYTExOiBudW1iZXIgPSBfbXR4TGVmdC5kYXRhWzEgKiAzICsgMV07XHJcbiAgICAgIGxldCBhMTI6IG51bWJlciA9IF9tdHhMZWZ0LmRhdGFbMSAqIDMgKyAyXTtcclxuICAgICAgbGV0IGEyMDogbnVtYmVyID0gX210eExlZnQuZGF0YVsyICogMyArIDBdO1xyXG4gICAgICBsZXQgYTIxOiBudW1iZXIgPSBfbXR4TGVmdC5kYXRhWzIgKiAzICsgMV07XHJcbiAgICAgIGxldCBhMjI6IG51bWJlciA9IF9tdHhMZWZ0LmRhdGFbMiAqIDMgKyAyXTtcclxuICAgICAgbGV0IGIwMDogbnVtYmVyID0gX210eFJpZ2h0LmRhdGFbMCAqIDMgKyAwXTtcclxuICAgICAgbGV0IGIwMTogbnVtYmVyID0gX210eFJpZ2h0LmRhdGFbMCAqIDMgKyAxXTtcclxuICAgICAgbGV0IGIwMjogbnVtYmVyID0gX210eFJpZ2h0LmRhdGFbMCAqIDMgKyAyXTtcclxuICAgICAgbGV0IGIxMDogbnVtYmVyID0gX210eFJpZ2h0LmRhdGFbMSAqIDMgKyAwXTtcclxuICAgICAgbGV0IGIxMTogbnVtYmVyID0gX210eFJpZ2h0LmRhdGFbMSAqIDMgKyAxXTtcclxuICAgICAgbGV0IGIxMjogbnVtYmVyID0gX210eFJpZ2h0LmRhdGFbMSAqIDMgKyAyXTtcclxuICAgICAgbGV0IGIyMDogbnVtYmVyID0gX210eFJpZ2h0LmRhdGFbMiAqIDMgKyAwXTtcclxuICAgICAgbGV0IGIyMTogbnVtYmVyID0gX210eFJpZ2h0LmRhdGFbMiAqIDMgKyAxXTtcclxuICAgICAgbGV0IGIyMjogbnVtYmVyID0gX210eFJpZ2h0LmRhdGFbMiAqIDMgKyAyXTtcclxuICAgICAgbGV0IG10eFJlc3VsdDogTWF0cml4M3gzID0gbmV3IE1hdHJpeDN4MztcclxuICAgICAgbXR4UmVzdWx0LmRhdGEuc2V0KFtcclxuICAgICAgICBiMDAgKiBhMDAgKyBiMDEgKiBhMTAgKyBiMDIgKiBhMjAsXHJcbiAgICAgICAgYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxLFxyXG4gICAgICAgIGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMiAqIGEyMixcclxuICAgICAgICBiMTAgKiBhMDAgKyBiMTEgKiBhMTAgKyBiMTIgKiBhMjAsXHJcbiAgICAgICAgYjEwICogYTAxICsgYjExICogYTExICsgYjEyICogYTIxLFxyXG4gICAgICAgIGIxMCAqIGEwMiArIGIxMSAqIGExMiArIGIxMiAqIGEyMixcclxuICAgICAgICBiMjAgKiBhMDAgKyBiMjEgKiBhMTAgKyBiMjIgKiBhMjAsXHJcbiAgICAgICAgYjIwICogYTAxICsgYjIxICogYTExICsgYjIyICogYTIxLFxyXG4gICAgICAgIGIyMCAqIGEwMiArIGIyMSAqIGExMiArIGIyMiAqIGEyMlxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIHRoZSBpbnZlcnNlIG9mIGEgcGFzc2VkIG1hdHJpeC5cclxuICAgICAqIEBwYXJhbSBfbXR4IFRoZSBtYXRyaXggdG8gY29tcHV0ZSB0aGUgaW52ZXJzZSBvZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBJTlZFUlNJT04oX210eDogTWF0cml4M3gzKTogTWF0cml4M3gzIHtcclxuICAgICAgbGV0IG06IEZsb2F0MzJBcnJheSA9IF9tdHguZGF0YTtcclxuICAgICAgbGV0IG0wMDogbnVtYmVyID0gbVswICogMyArIDBdO1xyXG4gICAgICBsZXQgbTAxOiBudW1iZXIgPSBtWzAgKiAzICsgMV07XHJcbiAgICAgIGxldCBtMDI6IG51bWJlciA9IG1bMCAqIDMgKyAyXTtcclxuICAgICAgbGV0IG0xMDogbnVtYmVyID0gbVsxICogMyArIDBdO1xyXG4gICAgICBsZXQgbTExOiBudW1iZXIgPSBtWzEgKiAzICsgMV07XHJcbiAgICAgIGxldCBtMTI6IG51bWJlciA9IG1bMSAqIDMgKyAyXTtcclxuICAgICAgbGV0IG0yMDogbnVtYmVyID0gbVsyICogMyArIDBdO1xyXG4gICAgICBsZXQgbTIxOiBudW1iZXIgPSBtWzIgKiAzICsgMV07XHJcbiAgICAgIGxldCBtMjI6IG51bWJlciA9IG1bMiAqIDMgKyAyXTtcclxuXHJcbiAgICAgIGxldCBkOiBudW1iZXIgPSAxIC9cclxuICAgICAgICAobTAwICogKG0xMSAqIG0yMiAtIG0yMSAqIG0xMikgLVxyXG4gICAgICAgIG0wMSAqIChtMTAgKiBtMjIgLSBtMTIgKiBtMjApICtcclxuICAgICAgICBtMDIgKiAobTEwICogbTIxIC0gbTExICogbTIwKSk7XHJcblxyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDN4MyA9IFJlY3ljbGVyLmdldChNYXRyaXgzeDMpO1xyXG4gICAgICBtdHhSZXN1bHQuZGF0YS5zZXQoW1xyXG4gICAgICAgIGQgKiAobTExICogbTIyIC0gbTIxICogbTEyKSwgLy8gWzBdXHJcbiAgICAgICAgZCAqIChtMDIgKiBtMjEgLSBtMDEgKiBtMjIpLCAvLyBbMV1cclxuICAgICAgICBkICogKG0wMSAqIG0xMiAtIG0wMiAqIG0xMSksIC8vIFsyXVxyXG4gICAgICAgIGQgKiAobTEyICogbTIwIC0gbTEwICogbTIyKSwgLy8gWzNdXHJcbiAgICAgICAgZCAqIChtMDAgKiBtMjIgLSBtMDIgKiBtMjApLCAvLyBbNF1cclxuICAgICAgICBkICogKG0xMCAqIG0wMiAtIG0wMCAqIG0xMiksIC8vIFs1XVxyXG4gICAgICAgIGQgKiAobTEwICogbTIxIC0gbTIwICogbTExKSwgLy8gWzZdXHJcbiAgICAgICAgZCAqIChtMjAgKiBtMDEgLSBtMDAgKiBtMjEpLCAvLyBbN11cclxuICAgICAgICBkICogKG0wMCAqIG0xMSAtIG0xMCAqIG0wMSkgLy8gWzhdXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIC0gZ2V0OiByZXR1cm4gYSB2ZWN0b3IgcmVwcmVzZW50YXRpb24gb2YgdGhlIHRyYW5zbGF0aW9uIHtAbGluayBWZWN0b3IyfS4gIFxyXG4gICAgICogKipDYXV0aW9uISoqIFVzZSBpbW1lZGlhdGVseSwgc2luY2UgdGhlIHZlY3RvciBpcyBnb2luZyB0byBiZSByZXVzZWQgYnkgUmVjeWNsZXIuIENyZWF0ZSBhIGNsb25lIHRvIGtlZXAgbG9uZ2VyIGFuZCBtYW5pcHVsYXRlLiBcclxuICAgICAqIC0gc2V0OiBlZmZlY3QgdGhlIG1hdHJpeCBpZ25vcmluZyBpdHMgcm90YXRpb24gYW5kIHNjYWxpbmdcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCB0cmFuc2xhdGlvbigpOiBWZWN0b3IyIHtcclxuICAgICAgaWYgKCF0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24pXHJcbiAgICAgICAgdGhpcy52ZWN0b3JzLnRyYW5zbGF0aW9uID0gbmV3IFZlY3RvcjIodGhpcy5kYXRhWzZdLCB0aGlzLmRhdGFbN10pO1xyXG4gICAgICByZXR1cm4gdGhpcy52ZWN0b3JzLnRyYW5zbGF0aW9uOyAvLyAuY2xvbmU7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHRyYW5zbGF0aW9uKF90cmFuc2xhdGlvbjogVmVjdG9yMikge1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KF90cmFuc2xhdGlvbi5nZXQoKSwgNik7XHJcbiAgICAgIC8vIG5vIGZ1bGwgY2FjaGUgcmVzZXQgcmVxdWlyZWRcclxuICAgICAgdGhpcy52ZWN0b3JzLnRyYW5zbGF0aW9uID0gX3RyYW5zbGF0aW9uO1xyXG4gICAgICB0aGlzLm11dGF0b3IgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIC0gZ2V0OiBhIGNvcHkgb2YgdGhlIGNhbGN1bGF0ZWQgcm90YXRpb24ge0BsaW5rIFZlY3RvcjJ9ICAgXHJcbiAgICAgKiAtIHNldDogZWZmZWN0IHRoZSBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCByb3RhdGlvbigpOiBudW1iZXIge1xyXG4gICAgICBpZiAoIXRoaXMudmVjdG9ycy5yb3RhdGlvbilcclxuICAgICAgICB0aGlzLnZlY3RvcnMucm90YXRpb24gPSB0aGlzLmdldEV1bGVyQW5nbGUoKTtcclxuICAgICAgcmV0dXJuIHRoaXMudmVjdG9ycy5yb3RhdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgcm90YXRpb24oX3JvdGF0aW9uOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5tdXRhdGUoeyBcInJvdGF0aW9uXCI6IF9yb3RhdGlvbiB9KTtcclxuICAgICAgdGhpcy5yZXNldENhY2hlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogLSBnZXQ6IHJldHVybiBhIHZlY3RvciByZXByZXNlbnRhdGlvbiBvZiB0aGUgc2NhbGUge0BsaW5rIFZlY3RvcjN9LiAgXHJcbiAgICAgKiAqKkNhdXRpb24hKiogRG8gbm90IG1hbmlwdWxhdGUgcmVzdWx0LCBpbnN0ZWFkIGNyZWF0ZSBhIGNsb25lISAgICBcclxuICAgICAqIC0gc2V0OiBlZmZlY3QgdGhlIG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHNjYWxpbmcoKTogVmVjdG9yMiB7XHJcbiAgICAgIGlmICghdGhpcy52ZWN0b3JzLnNjYWxpbmcpXHJcbiAgICAgICAgdGhpcy52ZWN0b3JzLnNjYWxpbmcgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICAgIE1hdGguaHlwb3QodGhpcy5kYXRhWzBdLCB0aGlzLmRhdGFbMV0pICogKHRoaXMuZGF0YVswXSA8IDAgPyAtMSA6IDEpLFxyXG4gICAgICAgICAgTWF0aC5oeXBvdCh0aGlzLmRhdGFbM10sIHRoaXMuZGF0YVs0XSkgKiAodGhpcy5kYXRhWzRdIDwgMCA/IC0xIDogMSlcclxuICAgICAgICApO1xyXG4gICAgICByZXR1cm4gdGhpcy52ZWN0b3JzLnNjYWxpbmc7IC8vIC5jbG9uZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc2NhbGluZyhfc2NhbGluZzogVmVjdG9yMikge1xyXG4gICAgICB0aGlzLm11dGF0ZSh7IFwic2NhbGluZ1wiOiBfc2NhbGluZyB9KTtcclxuICAgICAgdGhpcy5yZXNldENhY2hlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gYSBjb3B5IG9mIHRoaXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjbG9uZSgpOiBNYXRyaXgzeDMge1xyXG4gICAgICBsZXQgbXR4Q2xvbmU6IE1hdHJpeDN4MyA9IFJlY3ljbGVyLmdldChNYXRyaXgzeDMpO1xyXG4gICAgICBtdHhDbG9uZS5zZXQodGhpcyk7XHJcbiAgICAgIHJldHVybiBtdHhDbG9uZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgbWF0cml4IHRvIHRoZSBpZGVudGl0eS1tYXRyaXggYW5kIGNsZWFycyBjYWNoZS4gVXNlZCBieSB0aGUgcmVjeWNsZXIgdG8gcmVzZXQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWN5Y2xlKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KFtcclxuICAgICAgICAxLCAwLCAwLFxyXG4gICAgICAgIDAsIDEsIDAsXHJcbiAgICAgICAgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgICAgdGhpcy5yZXNldENhY2hlKCk7IFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgbWF0cml4IHRvIHRoZSBpZGVudGl0eS1tYXRyaXggYW5kIGNsZWFycyBjYWNoZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnJlY3ljbGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNsYXRpb25cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgdHJhbnNsYXRpb24gYnkgdGhlIGdpdmVuIHtAbGluayBWZWN0b3IyfSB0byB0aGlzIG1hdHJpeCBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZShfYnk6IFZlY3RvcjIpOiB2b2lkIHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXgzeDMgPSBNYXRyaXgzeDMuTVVMVElQTElDQVRJT04odGhpcywgTWF0cml4M3gzLlRSQU5TTEFUSU9OKF9ieSkpO1xyXG4gICAgICAvLyBUT0RPOiBwb3NzaWJsZSBvcHRpbWl6YXRpb24sIHRyYW5zbGF0aW9uIG1heSBhbHRlciBtdXRhdG9yIGluc3RlYWQgb2YgZGVsZXRpbmcgaXQuXHJcbiAgICAgIHRoaXMuc2V0KG10eFJlc3VsdCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFJlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSB0cmFuc2xhdGlvbiBhbG9uZyB0aGUgeC1BeGlzIGJ5IHRoZSBnaXZlbiBhbW91bnQgdG8gdGhpcyBtYXRyaXggXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0cmFuc2xhdGVYKF94OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5kYXRhWzZdICs9IF94O1xyXG4gICAgICB0aGlzLm11dGF0b3IgPSBudWxsO1xyXG4gICAgICB0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSB0cmFuc2xhdGlvbiBhbG9uZyB0aGUgeS1BeGlzIGJ5IHRoZSBnaXZlbiBhbW91bnQgdG8gdGhpcyBtYXRyaXggXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0cmFuc2xhdGVZKF95OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5kYXRhWzddICs9IF95O1xyXG4gICAgICB0aGlzLm11dGF0b3IgPSBudWxsO1xyXG4gICAgICB0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFNjYWxpbmdcclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgc2NhbGluZyBieSB0aGUgZ2l2ZW4ge0BsaW5rIFZlY3RvcjJ9IHRvIHRoaXMgbWF0cml4IFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGUoX2J5OiBWZWN0b3IyKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4M3gzID0gTWF0cml4M3gzLk1VTFRJUExJQ0FUSU9OKHRoaXMsIE1hdHJpeDN4My5TQ0FMSU5HKF9ieSkpO1xyXG4gICAgICB0aGlzLnNldChtdHhSZXN1bHQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSZXN1bHQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBzY2FsaW5nIGFsb25nIHRoZSB4LUF4aXMgYnkgdGhlIGdpdmVuIGFtb3VudCB0byB0aGlzIG1hdHJpeCBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNjYWxlWChfYnk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IyID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjIpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9ieSwgMSk7XHJcbiAgICAgIHRoaXMuc2NhbGUodmVjdG9yKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUodmVjdG9yKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgc2NhbGluZyBhbG9uZyB0aGUgeS1BeGlzIGJ5IHRoZSBnaXZlbiBhbW91bnQgdG8gdGhpcyBtYXRyaXggXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzY2FsZVkoX2J5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMiA9IFJlY3ljbGVyLmdldChWZWN0b3IyKTtcclxuICAgICAgdmVjdG9yLnNldCgxLCBfYnkpO1xyXG4gICAgICB0aGlzLnNjYWxlKHZlY3Rvcik7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHZlY3Rvcik7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgLy8jcmVnaW9uIFJvdGF0aW9uXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSByb3RhdGlvbiBhcm91bmQgdGhlIHotQXhpcyB0byB0aGlzIG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcm90YXRlKF9hbmdsZUluRGVncmVlczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4M3gzID0gTWF0cml4M3gzLk1VTFRJUExJQ0FUSU9OKHRoaXMsIE1hdHJpeDN4My5ST1RBVElPTihfYW5nbGVJbkRlZ3JlZXMpKTtcclxuICAgICAgdGhpcy5zZXQobXR4UmVzdWx0KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUobXR4UmVzdWx0KTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2Zvcm1hdGlvblxyXG4gICAgLyoqXHJcbiAgICAgKiBNdWx0aXBseSB0aGlzIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIG11bHRpcGx5KF9tdHhSaWdodDogTWF0cml4M3gzKTogdm9pZCB7XHJcbiAgICAgIGxldCBtdHhSZXN1bHQ6IE1hdHJpeDN4MyA9IE1hdHJpeDN4My5NVUxUSVBMSUNBVElPTih0aGlzLCBfbXR4UmlnaHQpO1xyXG4gICAgICB0aGlzLnNldChtdHhSZXN1bHQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSZXN1bHQpO1xyXG4gICAgICB0aGlzLm11dGF0b3IgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIGFuZCByZXR1cm5zIHRoZSBldWxlci1hbmdsZXMgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHJvdGF0aW9uIG9mIHRoaXMgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRFdWxlckFuZ2xlKCk6IG51bWJlciB7XHJcbiAgICAgIGxldCBzY2FsaW5nOiBWZWN0b3IyID0gdGhpcy5zY2FsaW5nO1xyXG5cclxuICAgICAgbGV0IHMwOiBudW1iZXIgPSB0aGlzLmRhdGFbMF0gLyBzY2FsaW5nLng7XHJcbiAgICAgIGxldCBzMTogbnVtYmVyID0gdGhpcy5kYXRhWzFdIC8gc2NhbGluZy54O1xyXG4gICAgICBsZXQgczM6IG51bWJlciA9IHRoaXMuZGF0YVszXSAvIHNjYWxpbmcueTtcclxuICAgICAgbGV0IHM0OiBudW1iZXIgPSB0aGlzLmRhdGFbNF0gLyBzY2FsaW5nLnk7XHJcblxyXG4gICAgICBsZXQgeFNrZXc6IG51bWJlciA9IE1hdGguYXRhbjIoLXMzLCBzNCk7XHJcbiAgICAgIGxldCB5U2tldzogbnVtYmVyID0gTWF0aC5hdGFuMihzMCwgczEpO1xyXG5cclxuICAgICAgbGV0IHN5OiBudW1iZXIgPSBNYXRoLmh5cG90KHMwLCBzMSk7IC8vIHByb2JhYmx5IDIuIHBhcmFtIHNob3VsZCBiZSB0aGlzLmRhdGFbNF0gLyBzY2FsaW5nLnlcclxuICAgICAgbGV0IHJvdGF0aW9uOiBudW1iZXI7XHJcblxyXG4gICAgICBpZiAoIShzeSA+IDFlLTYpKVxyXG4gICAgICAgIHJvdGF0aW9uID0geVNrZXc7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByb3RhdGlvbiA9IHhTa2V3O1xyXG5cclxuICAgICAgcm90YXRpb24gKj0gQ2FsYy5yYWQyZGVnO1xyXG5cclxuICAgICAgcmV0dXJuIHJvdGF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZWxlbWVudHMgb2YgdGhpcyBtYXRyaXggdG8gdGhlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQoX210eFRvOiBNYXRyaXgzeDMpOiB2b2lkIHtcclxuICAgICAgLy8gdGhpcy5kYXRhID0gX3RvLmdldCgpO1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KF9tdHhUby5kYXRhKTtcclxuICAgICAgdGhpcy5yZXNldENhY2hlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBgxpIuTWF0cml4M3gzKHRyYW5zbGF0aW9uOiAke3RoaXMudHJhbnNsYXRpb24udG9TdHJpbmcoKX0sIHJvdGF0aW9uOiAke3RoaXMucm90YXRpb24udG9TdHJpbmcoKX0sIHNjYWxpbmc6ICR7dGhpcy5zY2FsaW5nLnRvU3RyaW5nKCl9YDtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRoZSBlbGVtZW50cyBvZiB0aGlzIG1hdHJpeCBhcyBhIEZsb2F0MzJBcnJheVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0KCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgLy8gdGhpcy5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIHRyYW5zbGF0aW9uOiB0aGlzLnRyYW5zbGF0aW9uLnNlcmlhbGl6ZSgpLFxyXG4gICAgICAgIHJvdGF0aW9uOiB0aGlzLnJvdGF0aW9uLFxyXG4gICAgICAgIHNjYWxpbmc6IHRoaXMuc2NhbGluZy5zZXJpYWxpemUoKVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0ge1xyXG4gICAgICAgIHRyYW5zbGF0aW9uOiBhd2FpdCB0aGlzLnRyYW5zbGF0aW9uLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLnRyYW5zbGF0aW9uKSxcclxuICAgICAgICByb3RhdGlvbjogX3NlcmlhbGl6YXRpb24ucm90YXRpb24sXHJcbiAgICAgICAgc2NhbGluZzogYXdhaXQgdGhpcy5zY2FsaW5nLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLnNjYWxpbmcpXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMubXV0YXRlKG11dGF0b3IpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgaWYgKHRoaXMubXV0YXRvcilcclxuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdG9yO1xyXG5cclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7XHJcbiAgICAgICAgdHJhbnNsYXRpb246IHRoaXMudHJhbnNsYXRpb24uZ2V0TXV0YXRvcigpLFxyXG4gICAgICAgIHJvdGF0aW9uOiB0aGlzLnJvdGF0aW9uLFxyXG4gICAgICAgIHNjYWxpbmc6IHRoaXMuc2NhbGluZy5nZXRNdXRhdG9yKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIGNhY2hlIG11dGF0b3JcclxuICAgICAgdGhpcy5tdXRhdG9yID0gbXV0YXRvcjtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBsZXQgb2xkVHJhbnNsYXRpb246IFZlY3RvcjIgPSB0aGlzLnRyYW5zbGF0aW9uO1xyXG4gICAgICBsZXQgb2xkUm90YXRpb246IG51bWJlciA9IHRoaXMucm90YXRpb247XHJcbiAgICAgIGxldCBvbGRTY2FsaW5nOiBWZWN0b3IyID0gdGhpcy5zY2FsaW5nO1xyXG4gICAgICBsZXQgbmV3VHJhbnNsYXRpb246IFZlY3RvcjIgPSA8VmVjdG9yMj5fbXV0YXRvcltcInRyYW5zbGF0aW9uXCJdO1xyXG4gICAgICBsZXQgbmV3Um90YXRpb246IG51bWJlciA9IDxudW1iZXI+X211dGF0b3JbXCJyb3RhdGlvblwiXTtcclxuICAgICAgbGV0IG5ld1NjYWxpbmc6IFZlY3RvcjIgPSA8VmVjdG9yMj5fbXV0YXRvcltcInNjYWxpbmdcIl07XHJcbiAgICAgIGxldCB2ZWN0b3JzOiBWZWN0b3JSZXByZXNlbnRhdGlvbiA9IHsgdHJhbnNsYXRpb246IG9sZFRyYW5zbGF0aW9uLCByb3RhdGlvbjogb2xkUm90YXRpb24sIHNjYWxpbmc6IG9sZFNjYWxpbmcgfTtcclxuICAgICAgaWYgKG5ld1RyYW5zbGF0aW9uKSB7XHJcbiAgICAgICAgdmVjdG9ycy50cmFuc2xhdGlvbiA9IG5ldyBWZWN0b3IyKFxyXG4gICAgICAgICAgbmV3VHJhbnNsYXRpb24ueCAhPSB1bmRlZmluZWQgPyBuZXdUcmFuc2xhdGlvbi54IDogb2xkVHJhbnNsYXRpb24ueCxcclxuICAgICAgICAgIG5ld1RyYW5zbGF0aW9uLnkgIT0gdW5kZWZpbmVkID8gbmV3VHJhbnNsYXRpb24ueSA6IG9sZFRyYW5zbGF0aW9uLnlcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2ZWN0b3JzLnJvdGF0aW9uID0gKG5ld1JvdGF0aW9uID09IHVuZGVmaW5lZCkgPyBvbGRSb3RhdGlvbiA6IG5ld1JvdGF0aW9uO1xyXG5cclxuICAgICAgaWYgKG5ld1NjYWxpbmcpIHtcclxuICAgICAgICB2ZWN0b3JzLnNjYWxpbmcgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICAgIG5ld1NjYWxpbmcueCAhPSB1bmRlZmluZWQgPyBuZXdTY2FsaW5nLnggOiBvbGRTY2FsaW5nLngsXHJcbiAgICAgICAgICBuZXdTY2FsaW5nLnkgIT0gdW5kZWZpbmVkID8gbmV3U2NhbGluZy55IDogb2xkU2NhbGluZy55XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVE9ETzogcG9zc2libGUgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIHdoZW4gb25seSBvbmUgb3IgdHdvIGNvbXBvbmVudHMgY2hhbmdlLCB0aGVuIHVzZSBvbGQgbWF0cml4IGluc3RlYWQgb2YgSURFTlRJVFkgYW5kIHRyYW5zZm9ybSBieSBkaWZmZXJlbmNlcy9xdW90aWVudHNcclxuICAgICAgbGV0IG10eFJlc3VsdDogTWF0cml4M3gzID0gTWF0cml4M3gzLklERU5USVRZKCk7XHJcbiAgICAgIGlmICh2ZWN0b3JzLnRyYW5zbGF0aW9uKVxyXG4gICAgICAgIG10eFJlc3VsdC50cmFuc2xhdGUodmVjdG9ycy50cmFuc2xhdGlvbik7XHJcbiAgICAgIGlmICh2ZWN0b3JzLnJvdGF0aW9uKSB7XHJcbiAgICAgICAgbXR4UmVzdWx0LnJvdGF0ZSh2ZWN0b3JzLnJvdGF0aW9uKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodmVjdG9ycy5zY2FsaW5nKVxyXG4gICAgICAgIG10eFJlc3VsdC5zY2FsZSh2ZWN0b3JzLnNjYWxpbmcpO1xyXG4gICAgICB0aGlzLnNldChtdHhSZXN1bHQpO1xyXG5cclxuICAgICAgdGhpcy52ZWN0b3JzID0gdmVjdG9ycztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yOiBNdXRhdG9yKTogTXV0YXRvckF0dHJpYnV0ZVR5cGVzIHtcclxuICAgICAgbGV0IHR5cGVzOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMgPSB7fTtcclxuICAgICAgaWYgKF9tdXRhdG9yLnRyYW5zbGF0aW9uKSB0eXBlcy50cmFuc2xhdGlvbiA9IFwiVmVjdG9yMlwiO1xyXG4gICAgICBpZiAoX211dGF0b3Iucm90YXRpb24gIT0gdW5kZWZpbmVkKSB0eXBlcy5yb3RhdGlvbiA9IFwibnVtYmVyXCI7XHJcbiAgICAgIGlmIChfbXV0YXRvci5zY2FsaW5nKSB0eXBlcy5zY2FsaW5nID0gXCJWZWN0b3IyXCI7XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7LyoqICovIH1cclxuXHJcbiAgICBwcml2YXRlIHJlc2V0Q2FjaGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMudmVjdG9ycyA9IHsgdHJhbnNsYXRpb246IG51bGwsIHJvdGF0aW9uOiBudWxsLCBzY2FsaW5nOiBudWxsIH07XHJcbiAgICAgIHRoaXMubXV0YXRvciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxufVxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogUmVwcmVzZW50cyB0aGUgbWF0cml4IGFzIHRyYW5zbGF0aW9uLCByb3RhdGlvbiBhbmQgc2NhbGluZyB7QGxpbmsgVmVjdG9yM30sIGJlaW5nIGNhbGN1bGF0ZWQgZnJvbSB0aGUgbWF0cml4XHJcbiAgICovXHJcbiAgaW50ZXJmYWNlIFZlY3RvclJlcHJlc2VudGF0aW9uIHtcclxuICAgIHRyYW5zbGF0aW9uOiBWZWN0b3IzO1xyXG4gICAgcm90YXRpb246IFZlY3RvcjM7XHJcbiAgICBzY2FsaW5nOiBWZWN0b3IzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RvcmVzIGEgNHg0IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCBhbmQgcHJvdmlkZXMgb3BlcmF0aW9ucyBmb3IgaXQuXHJcbiAgICogYGBgcGxhaW50ZXh0XHJcbiAgICogWyAwLCAxLCAyLCAzIF0g4oaQIHJvdyB2ZWN0b3IgeFxyXG4gICAqIFsgNCwgNSwgNiwgNyBdIOKGkCByb3cgdmVjdG9yIHlcclxuICAgKiBbIDgsIDksMTAsMTEgXSDihpAgcm93IHZlY3RvciB6XHJcbiAgICogWzEyLDEzLDE0LDE1IF0g4oaQIHRyYW5zbGF0aW9uXHJcbiAgICogICAgICAgICAgICDihpEgIGhvbW9nZW5lb3VzIGNvbHVtblxyXG4gICAqIGBgYFxyXG4gICAqIEBhdXRob3JzIEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuXHJcbiAgZXhwb3J0IGNsYXNzIE1hdHJpeDR4NCBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUsIFJlY3ljYWJsZSB7XHJcbiAgICBwcml2YXRlIGRhdGE6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpOyAvLyBUaGUgZGF0YSBvZiB0aGUgbWF0cml4LlxyXG4gICAgcHJpdmF0ZSBtdXRhdG9yOiBNdXRhdG9yID0gbnVsbDsgLy8gcHJlcGFyZWQgZm9yIG9wdGltaXphdGlvbiwga2VlcCBtdXRhdG9yIHRvIHJlZHVjZSByZWR1bmRhbnQgY2FsY3VsYXRpb24gYW5kIGZvciBjb21wYXJpc29uLiBTZXQgdG8gbnVsbCB3aGVuIGRhdGEgY2hhbmdlcyFcclxuICAgIHByaXZhdGUgdmVjdG9yczogVmVjdG9yUmVwcmVzZW50YXRpb247IC8vIHZlY3RvciByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG1hdHJpeFxyXG5cclxuICAgICNldWxlckFuZ2xlczogVmVjdG9yMyA9IFZlY3RvcjMuWkVSTygpO1xyXG4gICAgI3ZlY3RvcnM6IFZlY3RvclJlcHJlc2VudGF0aW9uID0geyB0cmFuc2xhdGlvbjogVmVjdG9yMy5aRVJPKCksIHJvdGF0aW9uOiBWZWN0b3IzLlpFUk8oKSwgc2NhbGluZzogVmVjdG9yMy5aRVJPKCkgfTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMucmVjeWNsZSgpO1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gU1RBVElDU1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSBhIG5ldyBpZGVudGl0eSBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBJREVOVElUWSgpOiBNYXRyaXg0eDQge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLmdldChNYXRyaXg0eDQpO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgbWF0cml4IGFjY29yZGluZyB0byB0aGUgdHJhbnNsYXRpb24sIHJvdGF0aW9uIGFuZCBzY2FsaW5nIHtAbGluayBWZWN0b3IzfXMgZ2l2ZW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFJVQ1RJT04oX3ZlY3RvcnM6IFZlY3RvclJlcHJlc2VudGF0aW9uKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IHJlc3VsdDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCk7XHJcbiAgICAgIHJlc3VsdC5tdXRhdGUoX3ZlY3RvcnMpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgYW5kIHJldHVybnMgdGhlIHByb2R1Y3Qgb2YgdHdvIHBhc3NlZCBtYXRyaWNlcy5cclxuICAgICAqIEBwYXJhbSBfbXR4TGVmdCBUaGUgbWF0cml4IHRvIG11bHRpcGx5LlxyXG4gICAgICogQHBhcmFtIF9tdHhSaWdodCBUaGUgbWF0cml4IHRvIG11bHRpcGx5IGJ5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIE1VTFRJUExJQ0FUSU9OKF9tdHhMZWZ0OiBNYXRyaXg0eDQsIF9tdHhSaWdodDogTWF0cml4NHg0KTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IGE6IEZsb2F0MzJBcnJheSA9IF9tdHhMZWZ0LmRhdGE7XHJcbiAgICAgIGxldCBiOiBGbG9hdDMyQXJyYXkgPSBfbXR4UmlnaHQuZGF0YTtcclxuICAgICAgLy8gbGV0IG1hdHJpeDogTWF0cml4NHg0ID0gbmV3IE1hdHJpeDR4NCgpO1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLmdldChNYXRyaXg0eDQpO1xyXG4gICAgICBsZXQgYTAwOiBudW1iZXIgPSBhWzAgKiA0ICsgMF07XHJcbiAgICAgIGxldCBhMDE6IG51bWJlciA9IGFbMCAqIDQgKyAxXTtcclxuICAgICAgbGV0IGEwMjogbnVtYmVyID0gYVswICogNCArIDJdO1xyXG4gICAgICBsZXQgYTAzOiBudW1iZXIgPSBhWzAgKiA0ICsgM107XHJcbiAgICAgIGxldCBhMTA6IG51bWJlciA9IGFbMSAqIDQgKyAwXTtcclxuICAgICAgbGV0IGExMTogbnVtYmVyID0gYVsxICogNCArIDFdO1xyXG4gICAgICBsZXQgYTEyOiBudW1iZXIgPSBhWzEgKiA0ICsgMl07XHJcbiAgICAgIGxldCBhMTM6IG51bWJlciA9IGFbMSAqIDQgKyAzXTtcclxuICAgICAgbGV0IGEyMDogbnVtYmVyID0gYVsyICogNCArIDBdO1xyXG4gICAgICBsZXQgYTIxOiBudW1iZXIgPSBhWzIgKiA0ICsgMV07XHJcbiAgICAgIGxldCBhMjI6IG51bWJlciA9IGFbMiAqIDQgKyAyXTtcclxuICAgICAgbGV0IGEyMzogbnVtYmVyID0gYVsyICogNCArIDNdO1xyXG4gICAgICBsZXQgYTMwOiBudW1iZXIgPSBhWzMgKiA0ICsgMF07XHJcbiAgICAgIGxldCBhMzE6IG51bWJlciA9IGFbMyAqIDQgKyAxXTtcclxuICAgICAgbGV0IGEzMjogbnVtYmVyID0gYVszICogNCArIDJdO1xyXG4gICAgICBsZXQgYTMzOiBudW1iZXIgPSBhWzMgKiA0ICsgM107XHJcbiAgICAgIGxldCBiMDA6IG51bWJlciA9IGJbMCAqIDQgKyAwXTtcclxuICAgICAgbGV0IGIwMTogbnVtYmVyID0gYlswICogNCArIDFdO1xyXG4gICAgICBsZXQgYjAyOiBudW1iZXIgPSBiWzAgKiA0ICsgMl07XHJcbiAgICAgIGxldCBiMDM6IG51bWJlciA9IGJbMCAqIDQgKyAzXTtcclxuICAgICAgbGV0IGIxMDogbnVtYmVyID0gYlsxICogNCArIDBdO1xyXG4gICAgICBsZXQgYjExOiBudW1iZXIgPSBiWzEgKiA0ICsgMV07XHJcbiAgICAgIGxldCBiMTI6IG51bWJlciA9IGJbMSAqIDQgKyAyXTtcclxuICAgICAgbGV0IGIxMzogbnVtYmVyID0gYlsxICogNCArIDNdO1xyXG4gICAgICBsZXQgYjIwOiBudW1iZXIgPSBiWzIgKiA0ICsgMF07XHJcbiAgICAgIGxldCBiMjE6IG51bWJlciA9IGJbMiAqIDQgKyAxXTtcclxuICAgICAgbGV0IGIyMjogbnVtYmVyID0gYlsyICogNCArIDJdO1xyXG4gICAgICBsZXQgYjIzOiBudW1iZXIgPSBiWzIgKiA0ICsgM107XHJcbiAgICAgIGxldCBiMzA6IG51bWJlciA9IGJbMyAqIDQgKyAwXTtcclxuICAgICAgbGV0IGIzMTogbnVtYmVyID0gYlszICogNCArIDFdO1xyXG4gICAgICBsZXQgYjMyOiBudW1iZXIgPSBiWzMgKiA0ICsgMl07XHJcbiAgICAgIGxldCBiMzM6IG51bWJlciA9IGJbMyAqIDQgKyAzXTtcclxuICAgICAgbXR4UmVzdWx0LmRhdGEuc2V0KFxyXG4gICAgICAgIFtcclxuICAgICAgICAgIGIwMCAqIGEwMCArIGIwMSAqIGExMCArIGIwMiAqIGEyMCArIGIwMyAqIGEzMCxcclxuICAgICAgICAgIGIwMCAqIGEwMSArIGIwMSAqIGExMSArIGIwMiAqIGEyMSArIGIwMyAqIGEzMSxcclxuICAgICAgICAgIGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMiAqIGEyMiArIGIwMyAqIGEzMixcclxuICAgICAgICAgIGIwMCAqIGEwMyArIGIwMSAqIGExMyArIGIwMiAqIGEyMyArIGIwMyAqIGEzMyxcclxuICAgICAgICAgIGIxMCAqIGEwMCArIGIxMSAqIGExMCArIGIxMiAqIGEyMCArIGIxMyAqIGEzMCxcclxuICAgICAgICAgIGIxMCAqIGEwMSArIGIxMSAqIGExMSArIGIxMiAqIGEyMSArIGIxMyAqIGEzMSxcclxuICAgICAgICAgIGIxMCAqIGEwMiArIGIxMSAqIGExMiArIGIxMiAqIGEyMiArIGIxMyAqIGEzMixcclxuICAgICAgICAgIGIxMCAqIGEwMyArIGIxMSAqIGExMyArIGIxMiAqIGEyMyArIGIxMyAqIGEzMyxcclxuICAgICAgICAgIGIyMCAqIGEwMCArIGIyMSAqIGExMCArIGIyMiAqIGEyMCArIGIyMyAqIGEzMCxcclxuICAgICAgICAgIGIyMCAqIGEwMSArIGIyMSAqIGExMSArIGIyMiAqIGEyMSArIGIyMyAqIGEzMSxcclxuICAgICAgICAgIGIyMCAqIGEwMiArIGIyMSAqIGExMiArIGIyMiAqIGEyMiArIGIyMyAqIGEzMixcclxuICAgICAgICAgIGIyMCAqIGEwMyArIGIyMSAqIGExMyArIGIyMiAqIGEyMyArIGIyMyAqIGEzMyxcclxuICAgICAgICAgIGIzMCAqIGEwMCArIGIzMSAqIGExMCArIGIzMiAqIGEyMCArIGIzMyAqIGEzMCxcclxuICAgICAgICAgIGIzMCAqIGEwMSArIGIzMSAqIGExMSArIGIzMiAqIGEyMSArIGIzMyAqIGEzMSxcclxuICAgICAgICAgIGIzMCAqIGEwMiArIGIzMSAqIGExMiArIGIzMiAqIGEyMiArIGIzMyAqIGEzMixcclxuICAgICAgICAgIGIzMCAqIGEwMyArIGIzMSAqIGExMyArIGIzMiAqIGEyMyArIGIzMyAqIGEzM1xyXG4gICAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgYW5kIHJldHVybnMgdGhlIHRyYW5zcG9zZSBvZiBhIHBhc3NlZCBtYXRyaXguXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgVFJBTlNQT1NFKF9tdHg6IE1hdHJpeDR4NCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCBtOiBGbG9hdDMyQXJyYXkgPSBfbXR4LmRhdGE7XHJcbiAgICAgIGxldCByZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLmdldChNYXRyaXg0eDQpO1xyXG4gICAgICByZXN1bHQuZGF0YS5zZXQoW1xyXG4gICAgICAgIG1bMF0sIG1bNF0sIG1bOF0sIG1bMTJdLFxyXG4gICAgICAgIG1bMV0sIG1bNV0sIG1bOV0sIG1bMTNdLFxyXG4gICAgICAgIG1bMl0sIG1bNl0sIG1bMTBdLCBtWzE0XSxcclxuICAgICAgICBtWzNdLCBtWzddLCBtWzExXSwgbVsxNV1cclxuICAgICAgXSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhbmQgcmV0dXJucyB0aGUgaW52ZXJzZSBvZiBhIHBhc3NlZCBtYXRyaXguXHJcbiAgICAgKiBAcGFyYW0gX210eCBUaGUgbWF0cml4IHRvIGNvbXB1dGUgdGhlIGludmVyc2Ugb2YuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgSU5WRVJTSU9OKF9tdHg6IE1hdHJpeDR4NCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCBtOiBGbG9hdDMyQXJyYXkgPSBfbXR4LmRhdGE7XHJcbiAgICAgIGxldCBtMDA6IG51bWJlciA9IG1bMCAqIDQgKyAwXTtcclxuICAgICAgbGV0IG0wMTogbnVtYmVyID0gbVswICogNCArIDFdO1xyXG4gICAgICBsZXQgbTAyOiBudW1iZXIgPSBtWzAgKiA0ICsgMl07XHJcbiAgICAgIGxldCBtMDM6IG51bWJlciA9IG1bMCAqIDQgKyAzXTtcclxuICAgICAgbGV0IG0xMDogbnVtYmVyID0gbVsxICogNCArIDBdO1xyXG4gICAgICBsZXQgbTExOiBudW1iZXIgPSBtWzEgKiA0ICsgMV07XHJcbiAgICAgIGxldCBtMTI6IG51bWJlciA9IG1bMSAqIDQgKyAyXTtcclxuICAgICAgbGV0IG0xMzogbnVtYmVyID0gbVsxICogNCArIDNdO1xyXG4gICAgICBsZXQgbTIwOiBudW1iZXIgPSBtWzIgKiA0ICsgMF07XHJcbiAgICAgIGxldCBtMjE6IG51bWJlciA9IG1bMiAqIDQgKyAxXTtcclxuICAgICAgbGV0IG0yMjogbnVtYmVyID0gbVsyICogNCArIDJdO1xyXG4gICAgICBsZXQgbTIzOiBudW1iZXIgPSBtWzIgKiA0ICsgM107XHJcbiAgICAgIGxldCBtMzA6IG51bWJlciA9IG1bMyAqIDQgKyAwXTtcclxuICAgICAgbGV0IG0zMTogbnVtYmVyID0gbVszICogNCArIDFdO1xyXG4gICAgICBsZXQgbTMyOiBudW1iZXIgPSBtWzMgKiA0ICsgMl07XHJcbiAgICAgIGxldCBtMzM6IG51bWJlciA9IG1bMyAqIDQgKyAzXTtcclxuICAgICAgbGV0IHRtcDA6IG51bWJlciA9IG0yMiAqIG0zMztcclxuICAgICAgbGV0IHRtcDE6IG51bWJlciA9IG0zMiAqIG0yMztcclxuICAgICAgbGV0IHRtcDI6IG51bWJlciA9IG0xMiAqIG0zMztcclxuICAgICAgbGV0IHRtcDM6IG51bWJlciA9IG0zMiAqIG0xMztcclxuICAgICAgbGV0IHRtcDQ6IG51bWJlciA9IG0xMiAqIG0yMztcclxuICAgICAgbGV0IHRtcDU6IG51bWJlciA9IG0yMiAqIG0xMztcclxuICAgICAgbGV0IHRtcDY6IG51bWJlciA9IG0wMiAqIG0zMztcclxuICAgICAgbGV0IHRtcDc6IG51bWJlciA9IG0zMiAqIG0wMztcclxuICAgICAgbGV0IHRtcDg6IG51bWJlciA9IG0wMiAqIG0yMztcclxuICAgICAgbGV0IHRtcDk6IG51bWJlciA9IG0yMiAqIG0wMztcclxuICAgICAgbGV0IHRtcDEwOiBudW1iZXIgPSBtMDIgKiBtMTM7XHJcbiAgICAgIGxldCB0bXAxMTogbnVtYmVyID0gbTEyICogbTAzO1xyXG4gICAgICBsZXQgdG1wMTI6IG51bWJlciA9IG0yMCAqIG0zMTtcclxuICAgICAgbGV0IHRtcDEzOiBudW1iZXIgPSBtMzAgKiBtMjE7XHJcbiAgICAgIGxldCB0bXAxNDogbnVtYmVyID0gbTEwICogbTMxO1xyXG4gICAgICBsZXQgdG1wMTU6IG51bWJlciA9IG0zMCAqIG0xMTtcclxuICAgICAgbGV0IHRtcDE2OiBudW1iZXIgPSBtMTAgKiBtMjE7XHJcbiAgICAgIGxldCB0bXAxNzogbnVtYmVyID0gbTIwICogbTExO1xyXG4gICAgICBsZXQgdG1wMTg6IG51bWJlciA9IG0wMCAqIG0zMTtcclxuICAgICAgbGV0IHRtcDE5OiBudW1iZXIgPSBtMzAgKiBtMDE7XHJcbiAgICAgIGxldCB0bXAyMDogbnVtYmVyID0gbTAwICogbTIxO1xyXG4gICAgICBsZXQgdG1wMjE6IG51bWJlciA9IG0yMCAqIG0wMTtcclxuICAgICAgbGV0IHRtcDIyOiBudW1iZXIgPSBtMDAgKiBtMTE7XHJcbiAgICAgIGxldCB0bXAyMzogbnVtYmVyID0gbTEwICogbTAxO1xyXG5cclxuICAgICAgbGV0IHQwOiBudW1iZXIgPSAodG1wMCAqIG0xMSArIHRtcDMgKiBtMjEgKyB0bXA0ICogbTMxKSAtXHJcbiAgICAgICAgKHRtcDEgKiBtMTEgKyB0bXAyICogbTIxICsgdG1wNSAqIG0zMSk7XHJcblxyXG4gICAgICBsZXQgdDE6IG51bWJlciA9ICh0bXAxICogbTAxICsgdG1wNiAqIG0yMSArIHRtcDkgKiBtMzEpIC1cclxuICAgICAgICAodG1wMCAqIG0wMSArIHRtcDcgKiBtMjEgKyB0bXA4ICogbTMxKTtcclxuICAgICAgbGV0IHQyOiBudW1iZXIgPSAodG1wMiAqIG0wMSArIHRtcDcgKiBtMTEgKyB0bXAxMCAqIG0zMSkgLVxyXG4gICAgICAgICh0bXAzICogbTAxICsgdG1wNiAqIG0xMSArIHRtcDExICogbTMxKTtcclxuICAgICAgbGV0IHQzOiBudW1iZXIgPSAodG1wNSAqIG0wMSArIHRtcDggKiBtMTEgKyB0bXAxMSAqIG0yMSkgLVxyXG4gICAgICAgICh0bXA0ICogbTAxICsgdG1wOSAqIG0xMSArIHRtcDEwICogbTIxKTtcclxuXHJcbiAgICAgIGxldCBkOiBudW1iZXIgPSAxLjAgLyAobTAwICogdDAgKyBtMTAgKiB0MSArIG0yMCAqIHQyICsgbTMwICogdDMpO1xyXG5cclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5nZXQoTWF0cml4NHg0KTtcclxuICAgICAgbXR4UmVzdWx0LmRhdGEuc2V0KFtcclxuICAgICAgICBkICogdDAsIC8vIFswXVxyXG4gICAgICAgIGQgKiB0MSwgLy8gWzFdXHJcbiAgICAgICAgZCAqIHQyLCAvLyBbMl1cclxuICAgICAgICBkICogdDMsIC8vIFszXVxyXG4gICAgICAgIGQgKiAoKHRtcDEgKiBtMTAgKyB0bXAyICogbTIwICsgdG1wNSAqIG0zMCkgLSAodG1wMCAqIG0xMCArIHRtcDMgKiBtMjAgKyB0bXA0ICogbTMwKSksICAgICAgICAvLyBbNF1cclxuICAgICAgICBkICogKCh0bXAwICogbTAwICsgdG1wNyAqIG0yMCArIHRtcDggKiBtMzApIC0gKHRtcDEgKiBtMDAgKyB0bXA2ICogbTIwICsgdG1wOSAqIG0zMCkpLCAgICAgICAgLy8gWzVdXHJcbiAgICAgICAgZCAqICgodG1wMyAqIG0wMCArIHRtcDYgKiBtMTAgKyB0bXAxMSAqIG0zMCkgLSAodG1wMiAqIG0wMCArIHRtcDcgKiBtMTAgKyB0bXAxMCAqIG0zMCkpLCAgICAgIC8vIFs2XVxyXG4gICAgICAgIGQgKiAoKHRtcDQgKiBtMDAgKyB0bXA5ICogbTEwICsgdG1wMTAgKiBtMjApIC0gKHRtcDUgKiBtMDAgKyB0bXA4ICogbTEwICsgdG1wMTEgKiBtMjApKSwgICAgICAvLyBbN11cclxuICAgICAgICBkICogKCh0bXAxMiAqIG0xMyArIHRtcDE1ICogbTIzICsgdG1wMTYgKiBtMzMpIC0gKHRtcDEzICogbTEzICsgdG1wMTQgKiBtMjMgKyB0bXAxNyAqIG0zMykpLCAgLy8gWzhdXHJcbiAgICAgICAgZCAqICgodG1wMTMgKiBtMDMgKyB0bXAxOCAqIG0yMyArIHRtcDIxICogbTMzKSAtICh0bXAxMiAqIG0wMyArIHRtcDE5ICogbTIzICsgdG1wMjAgKiBtMzMpKSwgIC8vIFs5XVxyXG4gICAgICAgIGQgKiAoKHRtcDE0ICogbTAzICsgdG1wMTkgKiBtMTMgKyB0bXAyMiAqIG0zMykgLSAodG1wMTUgKiBtMDMgKyB0bXAxOCAqIG0xMyArIHRtcDIzICogbTMzKSksICAvLyBbMTBdXHJcbiAgICAgICAgZCAqICgodG1wMTcgKiBtMDMgKyB0bXAyMCAqIG0xMyArIHRtcDIzICogbTIzKSAtICh0bXAxNiAqIG0wMyArIHRtcDIxICogbTEzICsgdG1wMjIgKiBtMjMpKSwgIC8vIFsxMV1cclxuICAgICAgICBkICogKCh0bXAxNCAqIG0yMiArIHRtcDE3ICogbTMyICsgdG1wMTMgKiBtMTIpIC0gKHRtcDE2ICogbTMyICsgdG1wMTIgKiBtMTIgKyB0bXAxNSAqIG0yMikpLCAgLy8gWzEyXVxyXG4gICAgICAgIGQgKiAoKHRtcDIwICogbTMyICsgdG1wMTIgKiBtMDIgKyB0bXAxOSAqIG0yMikgLSAodG1wMTggKiBtMjIgKyB0bXAyMSAqIG0zMiArIHRtcDEzICogbTAyKSksICAvLyBbMTNdXHJcbiAgICAgICAgZCAqICgodG1wMTggKiBtMTIgKyB0bXAyMyAqIG0zMiArIHRtcDE1ICogbTAyKSAtICh0bXAyMiAqIG0zMiArIHRtcDE0ICogbTAyICsgdG1wMTkgKiBtMTIpKSwgIC8vIFsxNF1cclxuICAgICAgICBkICogKCh0bXAyMiAqIG0yMiArIHRtcDE2ICogbTAyICsgdG1wMjEgKiBtMTIpIC0gKHRtcDIwICogbTEyICsgdG1wMjMgKiBtMjIgKyB0bXAxNyAqIG0wMikpICAvLyBbMTVdXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29tcHV0ZXMgYW5kIHJldHVybnMgYSBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gdHJhbnNsYXRpb24sIGl0cyB6LWF4aXMgcG9pbnRpbmcgZGlyZWN0bHkgYXQgdGhlIGdpdmVuIHRhcmdldCxcclxuICAgICAqIGFuZCBhIG1pbmltYWwgYW5nbGUgYmV0d2VlbiBpdHMgeS1heGlzIGFuZCB0aGUgZ2l2ZW4gdXAte0BsaW5rIFZlY3RvcjN9LCByZXNwZXRpdmVseSBjYWxjdWxhdGluZyB5YXcgYW5kIHBpdGNoLlxyXG4gICAgICogVGhlIHBpdGNoIG1heSBiZSByZXN0cmljdGVkIHRvIHRoZSB1cC12ZWN0b3IgdG8gb25seSBjYWxjdWxhdGUgeWF3LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIExPT0tfQVQoX3RyYW5zbGF0aW9uOiBWZWN0b3IzLCBfdGFyZ2V0OiBWZWN0b3IzLCBfdXA6IFZlY3RvcjMgPSBWZWN0b3IzLlkoKSwgX3Jlc3RyaWN0OiBib29sZWFuID0gZmFsc2UpOiBNYXRyaXg0eDQge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLmdldChNYXRyaXg0eDQpO1xyXG4gICAgICBsZXQgekF4aXM6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UoX3RhcmdldCwgX3RyYW5zbGF0aW9uKTtcclxuICAgICAgekF4aXMubm9ybWFsaXplKCk7XHJcbiAgICAgIGxldCB4QXhpczogVmVjdG9yMyA9IFZlY3RvcjMuTk9STUFMSVpBVElPTihWZWN0b3IzLkNST1NTKF91cCwgekF4aXMpKTtcclxuICAgICAgbGV0IHlBeGlzOiBWZWN0b3IzID0gX3Jlc3RyaWN0ID8gX3VwIDogVmVjdG9yMy5OT1JNQUxJWkFUSU9OKFZlY3RvcjMuQ1JPU1MoekF4aXMsIHhBeGlzKSk7XHJcbiAgICAgIHpBeGlzID0gX3Jlc3RyaWN0ID8gVmVjdG9yMy5OT1JNQUxJWkFUSU9OKFZlY3RvcjMuQ1JPU1MoeEF4aXMsIF91cCkpIDogekF4aXM7XHJcbiAgICAgIG10eFJlc3VsdC5kYXRhLnNldChcclxuICAgICAgICBbXHJcbiAgICAgICAgICB4QXhpcy54LCB4QXhpcy55LCB4QXhpcy56LCAwLFxyXG4gICAgICAgICAgeUF4aXMueCwgeUF4aXMueSwgeUF4aXMueiwgMCxcclxuICAgICAgICAgIHpBeGlzLngsIHpBeGlzLnksIHpBeGlzLnosIDAsXHJcbiAgICAgICAgICBfdHJhbnNsYXRpb24ueCxcclxuICAgICAgICAgIF90cmFuc2xhdGlvbi55LFxyXG4gICAgICAgICAgX3RyYW5zbGF0aW9uLnosXHJcbiAgICAgICAgICAxXHJcbiAgICAgICAgXSk7XHJcbiAgICAgIHJldHVybiBtdHhSZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhbmQgcmV0dXJucyBhIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiB0cmFuc2xhdGlvbiwgaXRzIHktYXhpcyBtYXRjaGluZyB0aGUgZ2l2ZW4gdXAte0BsaW5rIFZlY3RvcjN9XHJcbiAgICAgKiBhbmQgaXRzIHotYXhpcyBmYWNpbmcgdG93YXJkcyB0aGUgZ2l2ZW4gdGFyZ2V0IGF0IGEgbWluaW1hbCBhbmdsZSwgcmVzcGV0aXZlbHkgY2FsY3VsYXRpbmcgeWF3IG9ubHkuXHJcbiAgICAgKi9cclxuICAgIC8vIHB1YmxpYyBzdGF0aWMgU0hPV19UTyhfdHJhbnNsYXRpb246IFZlY3RvcjMsIF90YXJnZXQ6IFZlY3RvcjMsIF91cDogVmVjdG9yMyA9IFZlY3RvcjMuWSgpKTogTWF0cml4NHg0IHtcclxuICAgIC8vICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5nZXQoTWF0cml4NHg0KTtcclxuICAgIC8vICAgbGV0IHpBeGlzOiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKF90YXJnZXQsIF90cmFuc2xhdGlvbik7XHJcbiAgICAvLyAgIHpBeGlzLm5vcm1hbGl6ZSgpO1xyXG4gICAgLy8gICBsZXQgeEF4aXM6IFZlY3RvcjMgPSBWZWN0b3IzLk5PUk1BTElaQVRJT04oVmVjdG9yMy5DUk9TUyhfdXAsIHpBeGlzKSk7XHJcbiAgICAvLyAgIC8vIGxldCB5QXhpczogVmVjdG9yMyA9IFZlY3RvcjMuTk9STUFMSVpBVElPTihWZWN0b3IzLkNST1NTKHpBeGlzLCB4QXhpcykpO1xyXG4gICAgLy8gICB6QXhpcyA9IFZlY3RvcjMuTk9STUFMSVpBVElPTihWZWN0b3IzLkNST1NTKHhBeGlzLCBfdXApKTtcclxuICAgIC8vICAgbXR4UmVzdWx0LmRhdGEuc2V0KFxyXG4gICAgLy8gICAgIFtcclxuICAgIC8vICAgICAgIHhBeGlzLngsIHhBeGlzLnksIHhBeGlzLnosIDAsXHJcbiAgICAvLyAgICAgICBfdXAueCwgX3VwLnksIF91cC56LCAwLFxyXG4gICAgLy8gICAgICAgekF4aXMueCwgekF4aXMueSwgekF4aXMueiwgMCxcclxuICAgIC8vICAgICAgIF90cmFuc2xhdGlvbi54LFxyXG4gICAgLy8gICAgICAgX3RyYW5zbGF0aW9uLnksXHJcbiAgICAvLyAgICAgICBfdHJhbnNsYXRpb24ueixcclxuICAgIC8vICAgICAgIDFcclxuICAgIC8vICAgICBdKTtcclxuICAgIC8vICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCB0cmFuc2xhdGVzIGNvb3JkaW5hdGVzIGFsb25nIHRoZSB4LSwgeS0gYW5kIHotYXhpcyBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHtAbGluayBWZWN0b3IzfS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBUUkFOU0xBVElPTihfdHJhbnNsYXRlOiBWZWN0b3IzKTogTWF0cml4NHg0IHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5nZXQoTWF0cml4NHg0KTtcclxuICAgICAgbXR4UmVzdWx0LmRhdGEuc2V0KFtcclxuICAgICAgICAxLCAwLCAwLCAwLFxyXG4gICAgICAgIDAsIDEsIDAsIDAsXHJcbiAgICAgICAgMCwgMCwgMSwgMCxcclxuICAgICAgICBfdHJhbnNsYXRlLngsIF90cmFuc2xhdGUueSwgX3RyYW5zbGF0ZS56LCAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG1hdHJpeCB0aGF0IHJvdGF0ZXMgY29vcmRpbmF0ZXMgb24gdGhlIHgtYXhpcyB3aGVuIG11bHRpcGxpZWQgYnkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUk9UQVRJT05fWChfYW5nbGVJbkRlZ3JlZXM6IG51bWJlcik6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4NHg0ID0gUmVjeWNsZXIuZ2V0KE1hdHJpeDR4NCk7XHJcbiAgICAgIGxldCBhbmdsZUluUmFkaWFuczogbnVtYmVyID0gX2FuZ2xlSW5EZWdyZWVzICogQ2FsYy5kZWcycmFkO1xyXG4gICAgICBsZXQgc2luOiBudW1iZXIgPSBNYXRoLnNpbihhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgIGxldCBjb3M6IG51bWJlciA9IE1hdGguY29zKGFuZ2xlSW5SYWRpYW5zKTtcclxuICAgICAgbXR4UmVzdWx0LmRhdGEuc2V0KFtcclxuICAgICAgICAxLCAwLCAwLCAwLFxyXG4gICAgICAgIDAsIGNvcywgc2luLCAwLFxyXG4gICAgICAgIDAsIC1zaW4sIGNvcywgMCxcclxuICAgICAgICAwLCAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG1hdHJpeCB0aGF0IHJvdGF0ZXMgY29vcmRpbmF0ZXMgb24gdGhlIHktYXhpcyB3aGVuIG11bHRpcGxpZWQgYnkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUk9UQVRJT05fWShfYW5nbGVJbkRlZ3JlZXM6IG51bWJlcik6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLmdldChNYXRyaXg0eDQpO1xyXG4gICAgICBsZXQgYW5nbGVJblJhZGlhbnM6IG51bWJlciA9IF9hbmdsZUluRGVncmVlcyAqIENhbGMuZGVnMnJhZDtcclxuICAgICAgbGV0IHNpbjogbnVtYmVyID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xyXG4gICAgICBsZXQgY29zOiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgIG10eFJlc3VsdC5kYXRhLnNldChbXHJcbiAgICAgICAgY29zLCAwLCAtc2luLCAwLFxyXG4gICAgICAgIDAsIDEsIDAsIDAsXHJcbiAgICAgICAgc2luLCAwLCBjb3MsIDAsXHJcbiAgICAgICAgMCwgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCByb3RhdGVzIGNvb3JkaW5hdGVzIG9uIHRoZSB6LWF4aXMgd2hlbiBtdWx0aXBsaWVkIGJ5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFJPVEFUSU9OX1ooX2FuZ2xlSW5EZWdyZWVzOiBudW1iZXIpOiBNYXRyaXg0eDQge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLmdldChNYXRyaXg0eDQpO1xyXG4gICAgICBsZXQgYW5nbGVJblJhZGlhbnM6IG51bWJlciA9IF9hbmdsZUluRGVncmVlcyAqIENhbGMuZGVnMnJhZDtcclxuICAgICAgbGV0IHNpbjogbnVtYmVyID0gTWF0aC5zaW4oYW5nbGVJblJhZGlhbnMpO1xyXG4gICAgICBsZXQgY29zOiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZUluUmFkaWFucyk7XHJcbiAgICAgIG10eFJlc3VsdC5kYXRhLnNldChbXHJcbiAgICAgICAgY29zLCBzaW4sIDAsIDAsXHJcbiAgICAgICAgLXNpbiwgY29zLCAwLCAwLFxyXG4gICAgICAgIDAsIDAsIDEsIDAsXHJcbiAgICAgICAgMCwgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCByb3RhdGVzIGNvb3JkaW5hdGVzIHdoZW4gbXVsdGlwbGllZCBieSwgdXNpbmcgdGhlIGFuZ2xlcyBnaXZlbi5cclxuICAgICAqIFJvdGF0aW9uIG9jY3VycyBhcm91bmQgdGhlIGF4aXMgaW4gdGhlIG9yZGVyIFotWS1YIC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBST1RBVElPTihfZXVsZXJBbmdsZXNJbkRlZ3JlZXM6IFZlY3RvcjMpOiBNYXRyaXg0eDQge1xyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLmdldChNYXRyaXg0eDQpO1xyXG4gICAgICBsZXQgYW5nbGVzSW5SYWRpYW5zOiBWZWN0b3IzID0gVmVjdG9yMy5TQ0FMRShfZXVsZXJBbmdsZXNJbkRlZ3JlZXMsIENhbGMuZGVnMnJhZCk7XHJcbiAgICAgIGxldCBzaW5YOiBudW1iZXIgPSBNYXRoLnNpbihhbmdsZXNJblJhZGlhbnMueCk7XHJcbiAgICAgIGxldCBjb3NYOiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZXNJblJhZGlhbnMueCk7XHJcbiAgICAgIGxldCBzaW5ZOiBudW1iZXIgPSBNYXRoLnNpbihhbmdsZXNJblJhZGlhbnMueSk7XHJcbiAgICAgIGxldCBjb3NZOiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZXNJblJhZGlhbnMueSk7XHJcbiAgICAgIGxldCBzaW5aOiBudW1iZXIgPSBNYXRoLnNpbihhbmdsZXNJblJhZGlhbnMueik7XHJcbiAgICAgIGxldCBjb3NaOiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZXNJblJhZGlhbnMueik7XHJcbiAgICAgIG10eFJlc3VsdC5kYXRhLnNldChbXHJcbiAgICAgICAgLyoqLyAgICAgICAgICAgICAgICAgY29zWiAqIGNvc1ksIC8qKi8gICAgICAgICAgICAgICAgIHNpblogKiBjb3NZLCAvKiovICAgICAgIC1zaW5ZLCAwLFxyXG4gICAgICAgIGNvc1ogKiBzaW5ZICogc2luWCAtIHNpblogKiBjb3NYLCBzaW5aICogc2luWSAqIHNpblggKyBjb3NaICogY29zWCwgLyoqLyBjb3NZICogc2luWCwgMCxcclxuICAgICAgICBjb3NaICogc2luWSAqIGNvc1ggKyBzaW5aICogc2luWCwgc2luWiAqIHNpblkgKiBjb3NYIC0gY29zWiAqIHNpblgsIC8qKi8gY29zWSAqIGNvc1gsIDAsXHJcbiAgICAgICAgMCwgMCwgMCwgMVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCBzY2FsZXMgY29vcmRpbmF0ZXMgYWxvbmcgdGhlIHgtLCB5LSBhbmQgei1heGlzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4ge0BsaW5rIFZlY3RvcjN9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgU0NBTElORyhfc2NhbGFyOiBWZWN0b3IzKTogTWF0cml4NHg0IHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5nZXQoTWF0cml4NHg0KTtcclxuICAgICAgbXR4UmVzdWx0LmRhdGEuc2V0KFtcclxuICAgICAgICBfc2NhbGFyLngsIDAsIDAsIDAsXHJcbiAgICAgICAgMCwgX3NjYWxhci55LCAwLCAwLFxyXG4gICAgICAgIDAsIDAsIF9zY2FsYXIueiwgMCxcclxuICAgICAgICAwLCAwLCAwLCAxXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBnaXZlbiBtYXRyaXggcmVsYXRpdmUgdG8gdGhlIGdpdmVuIGJhc2UuXHJcbiAgICAgKiBJZiBrbm93biwgcGFzcyB0aGUgaW52ZXJzZSBvZiB0aGUgYmFzZSB0byBhdm9pZCB1bm5lY2Nlc2FyeSBjYWxjdWxhdGlvbiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBSRUxBVElWRShfbXR4OiBNYXRyaXg0eDQsIF9tdHhCYXNlOiBNYXRyaXg0eDQsIF9tdHhJbnZlcnNlPzogTWF0cml4NHg0KTogTWF0cml4NHg0IHtcclxuICAgICAgaWYgKF9tdHhJbnZlcnNlKVxyXG4gICAgICAgIHJldHVybiBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04oX210eEludmVyc2UsIF9tdHgpO1xyXG5cclxuICAgICAgbGV0IG10eEludmVyc2U6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JTlZFUlNJT04oX210eEJhc2UpO1xyXG4gICAgICBsZXQgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04obXR4SW52ZXJzZSwgX210eCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eEludmVyc2UpO1xyXG4gICAgICByZXR1cm4gbXR4UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFBST0pFQ1RJT05TXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIGEgbWF0cml4IHRoYXQgYXBwbGllcyBwZXJzcGVjdGl2ZSB0byBhbiBvYmplY3QsIGlmIGl0cyB0cmFuc2Zvcm0gaXMgbXVsdGlwbGllZCBieSBpdC5cclxuICAgICAqIEBwYXJhbSBfYXNwZWN0IFRoZSBhc3BlY3QgcmF0aW8gYmV0d2VlbiB3aWR0aCBhbmQgaGVpZ2h0IG9mIHByb2plY3Rpb25zcGFjZS4oRGVmYXVsdCA9IGNhbnZhcy5jbGllbnRXaWR0aCAvIGNhbnZhcy5DbGllbnRIZWlnaHQpXHJcbiAgICAgKiBAcGFyYW0gX2ZpZWxkT2ZWaWV3SW5EZWdyZWVzIFRoZSBmaWVsZCBvZiB2aWV3IGluIERlZ3JlZXMuIChEZWZhdWx0ID0gNDUpXHJcbiAgICAgKiBAcGFyYW0gX25lYXIgVGhlIG5lYXIgY2xpcHNwYWNlIGJvcmRlciBvbiB0aGUgei1heGlzLlxyXG4gICAgICogQHBhcmFtIF9mYXIgVGhlIGZhciBjbGlwc3BhY2UgYm9yZGVyIG9uIHRoZSB6LWF4aXMuXHJcbiAgICAgKiBAcGFyYW0gX2RpcmVjdGlvbiBUaGUgcGxhbmUgb24gd2hpY2ggdGhlIGZpZWxkT2ZWaWV3LUFuZ2xlIGlzIGdpdmVuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFBST0pFQ1RJT05fQ0VOVFJBTChfYXNwZWN0OiBudW1iZXIsIF9maWVsZE9mVmlld0luRGVncmVlczogbnVtYmVyLCBfbmVhcjogbnVtYmVyLCBfZmFyOiBudW1iZXIsIF9kaXJlY3Rpb246IEZJRUxEX09GX1ZJRVcpOiBNYXRyaXg0eDQge1xyXG4gICAgICAvL1RPRE86IGNhbWVyYSBsb29rcyBkb3duIG5lZ2F0aXZlIHotZGlyZWN0aW9uLCBzaG91bGQgYmUgcG9zaXRpdmVcclxuICAgICAgbGV0IGZpZWxkT2ZWaWV3SW5SYWRpYW5zOiBudW1iZXIgPSBfZmllbGRPZlZpZXdJbkRlZ3JlZXMgKiBDYWxjLmRlZzJyYWQ7XHJcbiAgICAgIGxldCBmOiBudW1iZXIgPSBNYXRoLnRhbigwLjUgKiAoTWF0aC5QSSAtIGZpZWxkT2ZWaWV3SW5SYWRpYW5zKSk7XHJcbiAgICAgIGxldCByYW5nZUludjogbnVtYmVyID0gMS4wIC8gKF9uZWFyIC0gX2Zhcik7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4NHg0ID0gUmVjeWNsZXIuZ2V0KE1hdHJpeDR4NCk7XHJcbiAgICAgIG10eFJlc3VsdC5kYXRhLnNldChbXHJcbiAgICAgICAgZiwgMCwgMCwgMCxcclxuICAgICAgICAwLCBmLCAwLCAwLFxyXG4gICAgICAgIDAsIDAsIChfbmVhciArIF9mYXIpICogcmFuZ2VJbnYsIC0xLFxyXG4gICAgICAgIDAsIDAsIF9uZWFyICogX2ZhciAqIHJhbmdlSW52ICogMiwgMFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIGlmIChfZGlyZWN0aW9uID09IEZJRUxEX09GX1ZJRVcuRElBR09OQUwpIHtcclxuICAgICAgICBfYXNwZWN0ID0gTWF0aC5zcXJ0KF9hc3BlY3QpO1xyXG4gICAgICAgIG10eFJlc3VsdC5kYXRhWzBdID0gZiAvIF9hc3BlY3Q7XHJcbiAgICAgICAgbXR4UmVzdWx0LmRhdGFbNV0gPSBmICogX2FzcGVjdDtcclxuICAgICAgfSBlbHNlIGlmIChfZGlyZWN0aW9uID09IEZJRUxEX09GX1ZJRVcuVkVSVElDQUwpXHJcbiAgICAgICAgbXR4UmVzdWx0LmRhdGFbMF0gPSBmIC8gX2FzcGVjdDtcclxuICAgICAgZWxzZSAvL0ZPVl9ESVJFQ1RJT04uSE9SSVpPTlRBTFxyXG4gICAgICAgIG10eFJlc3VsdC5kYXRhWzVdID0gZiAqIF9hc3BlY3Q7XHJcblxyXG4gICAgICAvLyBIQUNLOiBtYXRyaXggc2hvdWxkIGxvb2sgaW4gcG9zaXRpdmUgei1kaXJlY3Rpb24sIHByZWZlcmFibHkgdGhlIG1hdHJpeCBzaG91bGQgYmUgY2FsY3VsYXRlZCBsaWtlIHRoYXQgcmlnaHQgYXdheVxyXG4gICAgICBtdHhSZXN1bHQucm90YXRlWSgxODApO1xyXG5cclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIGEgbWF0cml4IHRoYXQgYXBwbGllcyBvcnRob2dyYXBoaWMgcHJvamVjdGlvbiB0byBhbiBvYmplY3QsIGlmIGl0cyB0cmFuc2Zvcm0gaXMgbXVsdGlwbGllZCBieSBpdC5cclxuICAgICAqIEBwYXJhbSBfbGVmdCBUaGUgcG9zaXRpb252YWx1ZSBvZiB0aGUgcHJvamVjdGlvbnNwYWNlJ3MgbGVmdCBib3JkZXIuXHJcbiAgICAgKiBAcGFyYW0gX3JpZ2h0IFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyByaWdodCBib3JkZXIuXHJcbiAgICAgKiBAcGFyYW0gX2JvdHRvbSBUaGUgcG9zaXRpb252YWx1ZSBvZiB0aGUgcHJvamVjdGlvbnNwYWNlJ3MgYm90dG9tIGJvcmRlci5cclxuICAgICAqIEBwYXJhbSBfdG9wIFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyB0b3AgYm9yZGVyLlxyXG4gICAgICogQHBhcmFtIF9uZWFyIFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyBuZWFyIGJvcmRlci5cclxuICAgICAqIEBwYXJhbSBfZmFyIFRoZSBwb3NpdGlvbnZhbHVlIG9mIHRoZSBwcm9qZWN0aW9uc3BhY2UncyBmYXIgYm9yZGVyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUFJPSkVDVElPTl9PUlRIT0dSQVBISUMoX2xlZnQ6IG51bWJlciwgX3JpZ2h0OiBudW1iZXIsIF9ib3R0b206IG51bWJlciwgX3RvcDogbnVtYmVyLCBfbmVhcjogbnVtYmVyID0gLTQwMCwgX2ZhcjogbnVtYmVyID0gNDAwKTogTWF0cml4NHg0IHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5nZXQoTWF0cml4NHg0KTtcclxuICAgICAgbXR4UmVzdWx0LmRhdGEuc2V0KFtcclxuICAgICAgICAyIC8gKF9yaWdodCAtIF9sZWZ0KSwgMCwgMCwgMCxcclxuICAgICAgICAwLCAtMiAvIChfdG9wIC0gX2JvdHRvbSksIDAsIDAsXHJcbiAgICAgICAgMCwgMCwgMiAvIChfZmFyIC0gX25lYXIpLCAwLFxyXG4gICAgICAgIChfbGVmdCArIF9yaWdodCkgLyAoX2xlZnQgLSBfcmlnaHQpLFxyXG4gICAgICAgIChfYm90dG9tICsgX3RvcCkgLyAoX2JvdHRvbSAtIF90b3ApLFxyXG4gICAgICAgIChfbmVhciArIF9mYXIpIC8gKF9uZWFyIC0gX2ZhciksXHJcbiAgICAgICAgMVxyXG4gICAgICBdKTtcclxuICAgICAgcmV0dXJuIG10eFJlc3VsdDtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiAgQWNjZXNzb3JzXHJcbiAgICAvKiogXHJcbiAgICAgKiAtIGdldDogcmV0dXJuIGEgdmVjdG9yIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB0cmFuc2xhdGlvbiB7QGxpbmsgVmVjdG9yM30uICBcclxuICAgICAqICoqQ2F1dGlvbiEqKiBVc2UgaW1tZWRpYXRlbHkgYW5kIHJlYWRvbmx5LCBzaW5jZSB0aGUgdmVjdG9yIGlzIGdvaW5nIHRvIGJlIHJldXNlZCBieSBSZWN5Y2xlci4gQ3JlYXRlIGEgY2xvbmUgdG8ga2VlcCBsb25nZXIgYW5kIG1hbmlwdWxhdGUuIFxyXG4gICAgICogLSBzZXQ6IGVmZmVjdCB0aGUgbWF0cml4IGlnbm9yaW5nIGl0cyByb3RhdGlvbiBhbmQgc2NhbGluZ1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IHRyYW5zbGF0aW9uKF90cmFuc2xhdGlvbjogVmVjdG9yMykge1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KF90cmFuc2xhdGlvbi5nZXQoKSwgMTIpO1xyXG4gICAgICAvLyBubyBmdWxsIGNhY2hlIHJlc2V0IHJlcXVpcmVkXHJcbiAgICAgIGlmICh0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24pXHJcbiAgICAgICAgdGhpcy52ZWN0b3JzLnRyYW5zbGF0aW9uLnNldChfdHJhbnNsYXRpb24ueCwgX3RyYW5zbGF0aW9uLnksIF90cmFuc2xhdGlvbi56KTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMudmVjdG9ycy50cmFuc2xhdGlvbiA9IF90cmFuc2xhdGlvbi5jbG9uZTtcclxuICAgICAgdGhpcy5tdXRhdG9yID0gbnVsbDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgdHJhbnNsYXRpb24oKTogVmVjdG9yMyB7XHJcbiAgICAgIGlmICghdGhpcy52ZWN0b3JzLnRyYW5zbGF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy52ZWN0b3JzLnRyYW5zbGF0aW9uID0gdGhpcy4jdmVjdG9ycy50cmFuc2xhdGlvbjtcclxuICAgICAgICB0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24uc2V0KHRoaXMuZGF0YVsxMl0sIHRoaXMuZGF0YVsxM10sIHRoaXMuZGF0YVsxNF0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLnZlY3RvcnMudHJhbnNsYXRpb24uY2xvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogLSBnZXQ6IHJldHVybiBhIHZlY3RvciByZXByZXNlbnRhdGlvbiBvZiB0aGUgcm90YXRpb24ge0BsaW5rIFZlY3RvcjN9LiAgXHJcbiAgICAgKiAqKkNhdXRpb24hKiogVXNlIGltbWVkaWF0ZWx5IGFuZCByZWFkb25seSwgc2luY2UgdGhlIHZlY3RvciBpcyBnb2luZyB0byBiZSByZXVzZWQgYnkgUmVjeWNsZXIuIENyZWF0ZSBhIGNsb25lIHRvIGtlZXAgbG9uZ2VyIGFuZCBtYW5pcHVsYXRlLiBcclxuICAgICAqIC0gc2V0OiBlZmZlY3QgdGhlIG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IHJvdGF0aW9uKCk6IFZlY3RvcjMge1xyXG4gICAgICBpZiAoIXRoaXMudmVjdG9ycy5yb3RhdGlvbilcclxuICAgICAgICB0aGlzLnZlY3RvcnMucm90YXRpb24gPSB0aGlzLmdldEV1bGVyQW5nbGVzKCkuY2xvbmU7XHJcbiAgICAgIHJldHVybiB0aGlzLnZlY3RvcnMucm90YXRpb247IC8vLmNsb25lO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCByb3RhdGlvbihfcm90YXRpb246IFZlY3RvcjMpIHtcclxuICAgICAgdGhpcy5tdXRhdGUoeyBcInJvdGF0aW9uXCI6IF9yb3RhdGlvbiB9KTtcclxuICAgICAgdGhpcy5yZXNldENhY2hlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogLSBnZXQ6IHJldHVybiBhIHZlY3RvciByZXByZXNlbnRhdGlvbiBvZiB0aGUgc2NhbGluZyB7QGxpbmsgVmVjdG9yM30uICBcclxuICAgICAqICoqQ2F1dGlvbiEqKiBVc2UgaW1tZWRpYXRlbHkgYW5kIHJlYWRvbmx5LCBzaW5jZSB0aGUgdmVjdG9yIGlzIGdvaW5nIHRvIGJlIHJldXNlZCBieSBSZWN5Y2xlci4gQ3JlYXRlIGEgY2xvbmUgdG8ga2VlcCBsb25nZXIgYW5kIG1hbmlwdWxhdGUuIFxyXG4gICAgICogLSBzZXQ6IGVmZmVjdCB0aGUgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgc2NhbGluZygpOiBWZWN0b3IzIHtcclxuICAgICAgaWYgKCF0aGlzLnZlY3RvcnMuc2NhbGluZykge1xyXG4gICAgICAgIHRoaXMudmVjdG9ycy5zY2FsaW5nID0gdGhpcy4jdmVjdG9ycy5zY2FsaW5nO1xyXG4gICAgICAgIHRoaXMudmVjdG9ycy5zY2FsaW5nLnNldChcclxuICAgICAgICAgIE1hdGguaHlwb3QodGhpcy5kYXRhWzBdLCB0aGlzLmRhdGFbMV0sIHRoaXMuZGF0YVsyXSksIC8vKiAodGhpcy5kYXRhWzBdIDwgMCA/IC0xIDogMSksXHJcbiAgICAgICAgICBNYXRoLmh5cG90KHRoaXMuZGF0YVs0XSwgdGhpcy5kYXRhWzVdLCB0aGlzLmRhdGFbNl0pLCAvLyogKHRoaXMuZGF0YVs1XSA8IDAgPyAtMSA6IDEpLFxyXG4gICAgICAgICAgTWF0aC5oeXBvdCh0aGlzLmRhdGFbOF0sIHRoaXMuZGF0YVs5XSwgdGhpcy5kYXRhWzEwXSkgLy8gKiAodGhpcy5kYXRhWzEwXSA8IDAgPyAtMSA6IDEpXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy52ZWN0b3JzLnNjYWxpbmc7IC8vIC5jbG9uZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgc2NhbGluZyhfc2NhbGluZzogVmVjdG9yMykge1xyXG4gICAgICB0aGlzLm11dGF0ZSh7IFwic2NhbGluZ1wiOiBfc2NhbGluZyB9KTtcclxuICAgICAgdGhpcy5yZXNldENhY2hlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gYSBjb3B5IG9mIHRoaXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjbG9uZSgpOiBNYXRyaXg0eDQge1xyXG4gICAgICBsZXQgbXR4Q2xvbmU6IE1hdHJpeDR4NCA9IFJlY3ljbGVyLmdldChNYXRyaXg0eDQpO1xyXG4gICAgICBtdHhDbG9uZS5zZXQodGhpcyk7XHJcbiAgICAgIHJldHVybiBtdHhDbG9uZTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBtYXRyaXggdG8gdGhlIGlkZW50aXR5LW1hdHJpeCBhbmQgY2xlYXJzIGNhY2hlLiBVc2VkIGJ5IHRoZSByZWN5Y2xlciB0byByZXNldC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlY3ljbGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoW1xyXG4gICAgICAgIDEsIDAsIDAsIDAsXHJcbiAgICAgICAgMCwgMSwgMCwgMCxcclxuICAgICAgICAwLCAwLCAxLCAwLFxyXG4gICAgICAgIDAsIDAsIDAsIDFcclxuICAgICAgXSk7XHJcbiAgICAgIHRoaXMucmVzZXRDYWNoZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBtYXRyaXggdG8gdGhlIGlkZW50aXR5LW1hdHJpeCBhbmQgY2xlYXJzIGNhY2hlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucmVjeWNsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBSb3RhdGlvblxyXG4gICAgLyoqXHJcbiAgICAgKiBSb3RhdGUgdGhpcyBtYXRyaXggYnkgZ2l2ZW4ge0BsaW5rIFZlY3RvcjN9IGluIHRoZSBvcmRlciBaLCBZLCBYLiBSaWdodCBoYW5kIHJvdGF0aW9uIGlzIHVzZWQsIHRodW1iIHBvaW50cyBpbiBheGlzIGRpcmVjdGlvbiwgZmluZ2VycyBjdXJsaW5nIGluZGljYXRlIHJvdGF0aW9uXHJcbiAgICAgKiBUaGUgcm90YXRpb24gaXMgYXBwZW5kZWQgdG8gYWxyZWFkeSBhcHBsaWVkIHRyYW5zZm9ybXMsIHRodXMgbXVsdGlwbGllZCBmcm9tIHRoZSByaWdodC4gU2V0IF9mcm9tTGVmdCB0byB0cnVlIHRvIHN3aXRjaCBhbmQgcHV0IGl0IGluIGZyb250LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcm90YXRlKF9ieTogVmVjdG9yMywgX2Zyb21MZWZ0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgLy8gdGhpcy5yb3RhdGVaKF9ieS56LCBfZnJvbUxlZnQpO1xyXG4gICAgICAvLyB0aGlzLnJvdGF0ZVkoX2J5LnksIF9mcm9tTGVmdCk7XHJcbiAgICAgIC8vIHRoaXMucm90YXRlWChfYnkueCwgX2Zyb21MZWZ0KTtcclxuICAgICAgbGV0IG10eFJvdGF0aW9uOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUk9UQVRJT04oX2J5KTtcclxuICAgICAgdGhpcy5tdWx0aXBseShtdHhSb3RhdGlvbiwgX2Zyb21MZWZ0KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUobXR4Um90YXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0cmFuc3Bvc2UoKTogTWF0cml4NHg0IHtcclxuICAgICAgbGV0IG1hdHJpeDogRmxvYXQzMkFycmF5ID0gdGhpcy5kYXRhO1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KFtcclxuICAgICAgICBtYXRyaXhbMF0sIG1hdHJpeFs0XSwgbWF0cml4WzhdLCBtYXRyaXhbMTJdLFxyXG4gICAgICAgIG1hdHJpeFsxXSwgbWF0cml4WzVdLCBtYXRyaXhbOV0sIG1hdHJpeFsxM10sXHJcbiAgICAgICAgbWF0cml4WzJdLCBtYXRyaXhbNl0sIG1hdHJpeFsxMF0sIG1hdHJpeFsxNF0sXHJcbiAgICAgICAgbWF0cml4WzNdLCBtYXRyaXhbN10sIG1hdHJpeFsxMV0sIG1hdHJpeFsxNV1cclxuICAgICAgXSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbnZlcnNlKCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIGxldCBtOiBGbG9hdDMyQXJyYXkgPSB0aGlzLmRhdGE7XHJcbiAgICAgIGxldCBtMDA6IG51bWJlciA9IG1bMCAqIDQgKyAwXTtcclxuICAgICAgbGV0IG0wMTogbnVtYmVyID0gbVswICogNCArIDFdO1xyXG4gICAgICBsZXQgbTAyOiBudW1iZXIgPSBtWzAgKiA0ICsgMl07XHJcbiAgICAgIGxldCBtMDM6IG51bWJlciA9IG1bMCAqIDQgKyAzXTtcclxuICAgICAgbGV0IG0xMDogbnVtYmVyID0gbVsxICogNCArIDBdO1xyXG4gICAgICBsZXQgbTExOiBudW1iZXIgPSBtWzEgKiA0ICsgMV07XHJcbiAgICAgIGxldCBtMTI6IG51bWJlciA9IG1bMSAqIDQgKyAyXTtcclxuICAgICAgbGV0IG0xMzogbnVtYmVyID0gbVsxICogNCArIDNdO1xyXG4gICAgICBsZXQgbTIwOiBudW1iZXIgPSBtWzIgKiA0ICsgMF07XHJcbiAgICAgIGxldCBtMjE6IG51bWJlciA9IG1bMiAqIDQgKyAxXTtcclxuICAgICAgbGV0IG0yMjogbnVtYmVyID0gbVsyICogNCArIDJdO1xyXG4gICAgICBsZXQgbTIzOiBudW1iZXIgPSBtWzIgKiA0ICsgM107XHJcbiAgICAgIGxldCBtMzA6IG51bWJlciA9IG1bMyAqIDQgKyAwXTtcclxuICAgICAgbGV0IG0zMTogbnVtYmVyID0gbVszICogNCArIDFdO1xyXG4gICAgICBsZXQgbTMyOiBudW1iZXIgPSBtWzMgKiA0ICsgMl07XHJcbiAgICAgIGxldCBtMzM6IG51bWJlciA9IG1bMyAqIDQgKyAzXTtcclxuICAgICAgbGV0IHRtcDA6IG51bWJlciA9IG0yMiAqIG0zMztcclxuICAgICAgbGV0IHRtcDE6IG51bWJlciA9IG0zMiAqIG0yMztcclxuICAgICAgbGV0IHRtcDI6IG51bWJlciA9IG0xMiAqIG0zMztcclxuICAgICAgbGV0IHRtcDM6IG51bWJlciA9IG0zMiAqIG0xMztcclxuICAgICAgbGV0IHRtcDQ6IG51bWJlciA9IG0xMiAqIG0yMztcclxuICAgICAgbGV0IHRtcDU6IG51bWJlciA9IG0yMiAqIG0xMztcclxuICAgICAgbGV0IHRtcDY6IG51bWJlciA9IG0wMiAqIG0zMztcclxuICAgICAgbGV0IHRtcDc6IG51bWJlciA9IG0zMiAqIG0wMztcclxuICAgICAgbGV0IHRtcDg6IG51bWJlciA9IG0wMiAqIG0yMztcclxuICAgICAgbGV0IHRtcDk6IG51bWJlciA9IG0yMiAqIG0wMztcclxuICAgICAgbGV0IHRtcDEwOiBudW1iZXIgPSBtMDIgKiBtMTM7XHJcbiAgICAgIGxldCB0bXAxMTogbnVtYmVyID0gbTEyICogbTAzO1xyXG4gICAgICBsZXQgdG1wMTI6IG51bWJlciA9IG0yMCAqIG0zMTtcclxuICAgICAgbGV0IHRtcDEzOiBudW1iZXIgPSBtMzAgKiBtMjE7XHJcbiAgICAgIGxldCB0bXAxNDogbnVtYmVyID0gbTEwICogbTMxO1xyXG4gICAgICBsZXQgdG1wMTU6IG51bWJlciA9IG0zMCAqIG0xMTtcclxuICAgICAgbGV0IHRtcDE2OiBudW1iZXIgPSBtMTAgKiBtMjE7XHJcbiAgICAgIGxldCB0bXAxNzogbnVtYmVyID0gbTIwICogbTExO1xyXG4gICAgICBsZXQgdG1wMTg6IG51bWJlciA9IG0wMCAqIG0zMTtcclxuICAgICAgbGV0IHRtcDE5OiBudW1iZXIgPSBtMzAgKiBtMDE7XHJcbiAgICAgIGxldCB0bXAyMDogbnVtYmVyID0gbTAwICogbTIxO1xyXG4gICAgICBsZXQgdG1wMjE6IG51bWJlciA9IG0yMCAqIG0wMTtcclxuICAgICAgbGV0IHRtcDIyOiBudW1iZXIgPSBtMDAgKiBtMTE7XHJcbiAgICAgIGxldCB0bXAyMzogbnVtYmVyID0gbTEwICogbTAxO1xyXG5cclxuICAgICAgbGV0IHQwOiBudW1iZXIgPSAodG1wMCAqIG0xMSArIHRtcDMgKiBtMjEgKyB0bXA0ICogbTMxKSAtXHJcbiAgICAgICAgKHRtcDEgKiBtMTEgKyB0bXAyICogbTIxICsgdG1wNSAqIG0zMSk7XHJcblxyXG4gICAgICBsZXQgdDE6IG51bWJlciA9ICh0bXAxICogbTAxICsgdG1wNiAqIG0yMSArIHRtcDkgKiBtMzEpIC1cclxuICAgICAgICAodG1wMCAqIG0wMSArIHRtcDcgKiBtMjEgKyB0bXA4ICogbTMxKTtcclxuICAgICAgbGV0IHQyOiBudW1iZXIgPSAodG1wMiAqIG0wMSArIHRtcDcgKiBtMTEgKyB0bXAxMCAqIG0zMSkgLVxyXG4gICAgICAgICh0bXAzICogbTAxICsgdG1wNiAqIG0xMSArIHRtcDExICogbTMxKTtcclxuICAgICAgbGV0IHQzOiBudW1iZXIgPSAodG1wNSAqIG0wMSArIHRtcDggKiBtMTEgKyB0bXAxMSAqIG0yMSkgLVxyXG4gICAgICAgICh0bXA0ICogbTAxICsgdG1wOSAqIG0xMSArIHRtcDEwICogbTIxKTtcclxuXHJcbiAgICAgIGxldCBkOiBudW1iZXIgPSAxLjAgLyAobTAwICogdDAgKyBtMTAgKiB0MSArIG0yMCAqIHQyICsgbTMwICogdDMpO1xyXG5cclxuICAgICAgLy8gbGV0IG1hdHJpeDogTWF0cml4NHg0ID0gbmV3IE1hdHJpeDR4NDtcclxuICAgICAgY29uc3QgbWF0cml4OiBNYXRyaXg0eDQgPSBSZWN5Y2xlci5nZXQoTWF0cml4NHg0KTtcclxuICAgICAgbWF0cml4LmRhdGEuc2V0KFtcclxuICAgICAgICBkICogdDAsIC8vIFswXVxyXG4gICAgICAgIGQgKiB0MSwgLy8gWzFdXHJcbiAgICAgICAgZCAqIHQyLCAvLyBbMl1cclxuICAgICAgICBkICogdDMsIC8vIFszXVxyXG4gICAgICAgIGQgKiAoKHRtcDEgKiBtMTAgKyB0bXAyICogbTIwICsgdG1wNSAqIG0zMCkgLSAodG1wMCAqIG0xMCArIHRtcDMgKiBtMjAgKyB0bXA0ICogbTMwKSksICAgICAgICAvLyBbNF1cclxuICAgICAgICBkICogKCh0bXAwICogbTAwICsgdG1wNyAqIG0yMCArIHRtcDggKiBtMzApIC0gKHRtcDEgKiBtMDAgKyB0bXA2ICogbTIwICsgdG1wOSAqIG0zMCkpLCAgICAgICAgLy8gWzVdXHJcbiAgICAgICAgZCAqICgodG1wMyAqIG0wMCArIHRtcDYgKiBtMTAgKyB0bXAxMSAqIG0zMCkgLSAodG1wMiAqIG0wMCArIHRtcDcgKiBtMTAgKyB0bXAxMCAqIG0zMCkpLCAgICAgIC8vIFs2XVxyXG4gICAgICAgIGQgKiAoKHRtcDQgKiBtMDAgKyB0bXA5ICogbTEwICsgdG1wMTAgKiBtMjApIC0gKHRtcDUgKiBtMDAgKyB0bXA4ICogbTEwICsgdG1wMTEgKiBtMjApKSwgICAgICAvLyBbN11cclxuICAgICAgICBkICogKCh0bXAxMiAqIG0xMyArIHRtcDE1ICogbTIzICsgdG1wMTYgKiBtMzMpIC0gKHRtcDEzICogbTEzICsgdG1wMTQgKiBtMjMgKyB0bXAxNyAqIG0zMykpLCAgLy8gWzhdXHJcbiAgICAgICAgZCAqICgodG1wMTMgKiBtMDMgKyB0bXAxOCAqIG0yMyArIHRtcDIxICogbTMzKSAtICh0bXAxMiAqIG0wMyArIHRtcDE5ICogbTIzICsgdG1wMjAgKiBtMzMpKSwgIC8vIFs5XVxyXG4gICAgICAgIGQgKiAoKHRtcDE0ICogbTAzICsgdG1wMTkgKiBtMTMgKyB0bXAyMiAqIG0zMykgLSAodG1wMTUgKiBtMDMgKyB0bXAxOCAqIG0xMyArIHRtcDIzICogbTMzKSksICAvLyBbMTBdXHJcbiAgICAgICAgZCAqICgodG1wMTcgKiBtMDMgKyB0bXAyMCAqIG0xMyArIHRtcDIzICogbTIzKSAtICh0bXAxNiAqIG0wMyArIHRtcDIxICogbTEzICsgdG1wMjIgKiBtMjMpKSwgIC8vIFsxMV1cclxuICAgICAgICBkICogKCh0bXAxNCAqIG0yMiArIHRtcDE3ICogbTMyICsgdG1wMTMgKiBtMTIpIC0gKHRtcDE2ICogbTMyICsgdG1wMTIgKiBtMTIgKyB0bXAxNSAqIG0yMikpLCAgLy8gWzEyXVxyXG4gICAgICAgIGQgKiAoKHRtcDIwICogbTMyICsgdG1wMTIgKiBtMDIgKyB0bXAxOSAqIG0yMikgLSAodG1wMTggKiBtMjIgKyB0bXAyMSAqIG0zMiArIHRtcDEzICogbTAyKSksICAvLyBbMTNdXHJcbiAgICAgICAgZCAqICgodG1wMTggKiBtMTIgKyB0bXAyMyAqIG0zMiArIHRtcDE1ICogbTAyKSAtICh0bXAyMiAqIG0zMiArIHRtcDE0ICogbTAyICsgdG1wMTkgKiBtMTIpKSwgIC8vIFsxNF1cclxuICAgICAgICBkICogKCh0bXAyMiAqIG0yMiArIHRtcDE2ICogbTAyICsgdG1wMjEgKiBtMTIpIC0gKHRtcDIwICogbTEyICsgdG1wMjMgKiBtMjIgKyB0bXAxNyAqIG0wMikpICAvLyBbMTVdXHJcbiAgICAgIF0pO1xyXG4gICAgICByZXR1cm4gbWF0cml4O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIHJvdGF0aW9uIGFyb3VuZCB0aGUgeC1heGlzIHRvIHRoaXMgbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByb3RhdGVYKF9hbmdsZUluRGVncmVlczogbnVtYmVyLCBfZnJvbUxlZnQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICBsZXQgbXR4Um90YXRpb246IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5ST1RBVElPTl9YKF9hbmdsZUluRGVncmVlcyk7XHJcbiAgICAgIHRoaXMubXVsdGlwbHkobXR4Um90YXRpb24sIF9mcm9tTGVmdCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFJvdGF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSByb3RhdGlvbiBhcm91bmQgdGhlIHktYXhpcyB0byB0aGlzIG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcm90YXRlWShfYW5nbGVJbkRlZ3JlZXM6IG51bWJlciwgX2Zyb21MZWZ0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgbGV0IG10eFJvdGF0aW9uOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuUk9UQVRJT05fWShfYW5nbGVJbkRlZ3JlZXMpO1xyXG4gICAgICB0aGlzLm11bHRpcGx5KG10eFJvdGF0aW9uLCBfZnJvbUxlZnQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSb3RhdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgcm90YXRpb24gYXJvdW5kIHRoZSB6LWF4aXMgdG8gdGhpcyBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJvdGF0ZVooX2FuZ2xlSW5EZWdyZWVzOiBudW1iZXIsIF9mcm9tTGVmdDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICAgIGxldCBtdHhSb3RhdGlvbjogTWF0cml4NHg0ID0gTWF0cml4NHg0LlJPVEFUSU9OX1ooX2FuZ2xlSW5EZWdyZWVzKTtcclxuICAgICAgdGhpcy5tdWx0aXBseShtdHhSb3RhdGlvbiwgX2Zyb21MZWZ0KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUobXR4Um90YXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRqdXN0cyB0aGUgcm90YXRpb24gb2YgdGhpcyBtYXRyaXggdG8gcG9pbnQgdGhlIHotYXhpcyBkaXJlY3RseSBhdCB0aGUgZ2l2ZW4gdGFyZ2V0IGFuZCB0aWx0cyBpdCB0byBhY2NvcmQgd2l0aCB0aGUgZ2l2ZW4gdXAte0BsaW5rIFZlY3RvcjN9LFxyXG4gICAgICogcmVzcGVjdGl2ZWx5IGNhbGN1bGF0aW5nIHlhdyBhbmQgcGl0Y2guIElmIG5vIHVwLXtAbGluayBWZWN0b3IzfSBpcyBnaXZlbiwgdGhlIHByZXZpb3VzIHVwLXtAbGluayBWZWN0b3IzfSBpcyB1c2VkLiBcclxuICAgICAqIFRoZSBwaXRjaCBtYXkgYmUgcmVzdHJpY3RlZCB0byB0aGUgdXAtdmVjdG9yIHRvIG9ubHkgY2FsY3VsYXRlIHlhdy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGxvb2tBdChfdGFyZ2V0OiBWZWN0b3IzLCBfdXA/OiBWZWN0b3IzLCBfcmVzdHJpY3Q6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICBfdXAgPSBfdXAgPyBWZWN0b3IzLk5PUk1BTElaQVRJT04oX3VwKSA6IFZlY3RvcjMuTk9STUFMSVpBVElPTih0aGlzLmdldFkoKSk7XHJcblxyXG4gICAgICBjb25zdCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5MT09LX0FUKHRoaXMudHJhbnNsYXRpb24sIF90YXJnZXQsIF91cCwgX3Jlc3RyaWN0KTtcclxuICAgICAgbXR4UmVzdWx0LnNjYWxlKHRoaXMuc2NhbGluZyk7XHJcbiAgICAgIHRoaXMuc2V0KG10eFJlc3VsdCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFJlc3VsdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTYW1lIGFzIHtAbGluayBNYXRyaXg0eDQubG9va0F0fSwgYnV0IG9wdGltaXplZCBhbmQgbmVlZHMgdGVzdGluZ1xyXG4gICAgICovXHJcbiAgICAvLyBUT0RPOiB0ZXN0aW5nIGxvb2thdCB0aGF0IHJlYWxseSBqdXN0IHJvdGF0ZXMgdGhlIG1hdHJpeCByYXRoZXIgdGhhbiBjcmVhdGluZyBhIG5ldyBvbmVcclxuICAgIC8vIHB1YmxpYyBsb29rQXRSb3RhdGUoX3RhcmdldDogVmVjdG9yMywgX3VwPzogVmVjdG9yMywgX3ByZXNlcnZlU2NhbGluZzogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgIC8vICAgaWYgKCFfdXApXHJcbiAgICAvLyAgICAgX3VwID0gdGhpcy5nZXRZKCk7XHJcblxyXG4gICAgLy8gICBsZXQgc2NhbGluZzogVmVjdG9yMyA9IHRoaXMuc2NhbGluZztcclxuICAgIC8vICAgbGV0IGRpZmZlcmVuY2U6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UoX3RhcmdldCwgdGhpcy50cmFuc2xhdGlvbik7XHJcbiAgICAvLyAgIGRpZmZlcmVuY2Uubm9ybWFsaXplKCk7XHJcbiAgICAvLyAgIGxldCBjb3M6IG51bWJlciA9IFZlY3RvcjMuRE9UKFZlY3RvcjMuTk9STUFMSVpBVElPTih0aGlzLmdldFooKSksIGRpZmZlcmVuY2UpO1xyXG4gICAgLy8gICBsZXQgc2luOiBudW1iZXIgPSBWZWN0b3IzLkRPVChWZWN0b3IzLk5PUk1BTElaQVRJT04odGhpcy5nZXRYKCkpLCBkaWZmZXJlbmNlKTtcclxuICAgIC8vICAgLy8gY29uc29sZS5sb2coc2luLCBjb3MpO1xyXG4gICAgLy8gICBsZXQgbXR4Um90YXRpb246IE1hdHJpeDR4NCA9IFJlY3ljbGVyLmdldChNYXRyaXg0eDQpO1xyXG4gICAgLy8gICBtdHhSb3RhdGlvbi5kYXRhLnNldChbXHJcbiAgICAvLyAgICAgY29zLCAwLCAtc2luLCAwLFxyXG4gICAgLy8gICAgIDAsIDEsIDAsIDAsXHJcbiAgICAvLyAgICAgc2luLCAwLCBjb3MsIDAsXHJcbiAgICAvLyAgICAgMCwgMCwgMCwgMVxyXG4gICAgLy8gICBdKTtcclxuICAgIC8vICAgdGhpcy5tdWx0aXBseShtdHhSb3RhdGlvbiwgZmFsc2UpO1xyXG5cclxuICAgIC8vICAgY29zID0gVmVjdG9yMy5ET1QoVmVjdG9yMy5OT1JNQUxJWkFUSU9OKHRoaXMuZ2V0WigpKSwgZGlmZmVyZW5jZSk7XHJcbiAgICAvLyAgIHNpbiA9IC1WZWN0b3IzLkRPVChWZWN0b3IzLk5PUk1BTElaQVRJT04odGhpcy5nZXRZKCkpLCBkaWZmZXJlbmNlKTtcclxuICAgIC8vICAgLy8gY29uc29sZS5sb2coc2luLCBjb3MpO1xyXG4gICAgLy8gICBtdHhSb3RhdGlvbi5kYXRhLnNldChbXHJcbiAgICAvLyAgICAgMSwgMCwgMCwgMCxcclxuICAgIC8vICAgICAwLCBjb3MsIHNpbiwgMCxcclxuICAgIC8vICAgICAwLCAtc2luLCBjb3MsIDAsXHJcbiAgICAvLyAgICAgMCwgMCwgMCwgMVxyXG4gICAgLy8gICBdKTtcclxuICAgIC8vICAgdGhpcy5tdWx0aXBseShtdHhSb3RhdGlvbiwgZmFsc2UpO1xyXG4gICAgLy8gICB0aGlzLnNjYWxpbmcgPSBzY2FsaW5nO1xyXG4gICAgLy8gICBSZWN5Y2xlci5zdG9yZShtdHhSb3RhdGlvbik7XHJcbiAgICAvLyB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNsYXRpb25cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgdHJhbnNsYXRpb24gYnkgdGhlIGdpdmVuIHtAbGluayBWZWN0b3IzfSB0byB0aGlzIG1hdHJpeC5cclxuICAgICAqIElmIF9sb2NhbCBpcyB0cnVlLCB0cmFuc2xhdGlvbiBvY2N1cnMgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHJvdGF0aW9uIGFuZCBzY2FsaW5nIG9mIHRoaXMgbWF0cml4LFxyXG4gICAgICogYWNjb3JkaW5nIHRvIHRoZSBwYXJlbnQgb3RoZXJ3aXNlLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZShfYnk6IFZlY3RvcjMsIF9sb2NhbDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgICAgaWYgKF9sb2NhbCkge1xyXG4gICAgICAgIGxldCBtdHhUcmFuc2xhdGlvbjogTWF0cml4NHg0ID0gTWF0cml4NHg0LlRSQU5TTEFUSU9OKF9ieSk7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBseShtdHhUcmFuc2xhdGlvbik7XHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUobXR4VHJhbnNsYXRpb24pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuZGF0YVsxMl0gKz0gX2J5Lng7XHJcbiAgICAgICAgdGhpcy5kYXRhWzEzXSArPSBfYnkueTtcclxuICAgICAgICB0aGlzLmRhdGFbMTRdICs9IF9ieS56O1xyXG4gICAgICAgIHRoaXMubXV0YXRvciA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMudmVjdG9ycy50cmFuc2xhdGlvbilcclxuICAgICAgICAgIFJlY3ljbGVyLnN0b3JlKHRoaXMudmVjdG9ycy50cmFuc2xhdGlvbik7XHJcbiAgICAgICAgdGhpcy52ZWN0b3JzLnRyYW5zbGF0aW9uID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gY29uc3QgbWF0cml4OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04odGhpcywgTWF0cml4NHg0LlRSQU5TTEFUSU9OKF9ieSkpO1xyXG4gICAgICAvLyAvLyBUT0RPOiBwb3NzaWJsZSBvcHRpbWl6YXRpb24sIHRyYW5zbGF0aW9uIG1heSBhbHRlciBtdXRhdG9yIGluc3RlYWQgb2YgZGVsZXRpbmcgaXQuXHJcbiAgICAgIC8vIHRoaXMuc2V0KG1hdHJpeCk7XHJcbiAgICAgIC8vIFJlY3ljbGVyLnN0b3JlKG1hdHJpeCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSB0cmFuc2xhdGlvbiBhbG9uZyB0aGUgeC1heGlzIGJ5IHRoZSBnaXZlbiBhbW91bnQgdG8gdGhpcyBtYXRyaXggXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0cmFuc2xhdGVYKF94OiBudW1iZXIsIF9sb2NhbDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgICAgbGV0IHRyYW5zbGF0aW9uOiBWZWN0b3IzID0gVmVjdG9yMy5YKF94KTtcclxuICAgICAgdGhpcy50cmFuc2xhdGUodHJhbnNsYXRpb24sIF9sb2NhbCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHRyYW5zbGF0aW9uKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgdHJhbnNsYXRpb24gYWxvbmcgdGhlIHktYXhpcyBieSB0aGUgZ2l2ZW4gYW1vdW50IHRvIHRoaXMgbWF0cml4IFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNsYXRlWShfeTogbnVtYmVyLCBfbG9jYWw6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XHJcbiAgICAgIGxldCB0cmFuc2xhdGlvbjogVmVjdG9yMyA9IFZlY3RvcjMuWShfeSk7XHJcbiAgICAgIHRoaXMudHJhbnNsYXRlKHRyYW5zbGF0aW9uLCBfbG9jYWwpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZSh0cmFuc2xhdGlvbik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIHRyYW5zbGF0aW9uIGFsb25nIHRoZSB6LWF4aXMgYnkgdGhlIGdpdmVuIGFtb3VudCB0byB0aGlzIG1hdHJpeCBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zbGF0ZVooX3o6IG51bWJlciwgX2xvY2FsOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgICBsZXQgdHJhbnNsYXRpb246IFZlY3RvcjMgPSBWZWN0b3IzLlooX3opO1xyXG4gICAgICB0aGlzLnRyYW5zbGF0ZSh0cmFuc2xhdGlvbiwgX2xvY2FsKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUodHJhbnNsYXRpb24pO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFNjYWxpbmdcclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgc2NhbGluZyBieSB0aGUgZ2l2ZW4ge0BsaW5rIFZlY3RvcjN9IHRvIHRoaXMgbWF0cml4IFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGUoX2J5OiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIGNvbnN0IG10eFJlc3VsdDogTWF0cml4NHg0ID0gTWF0cml4NHg0Lk1VTFRJUExJQ0FUSU9OKHRoaXMsIE1hdHJpeDR4NC5TQ0FMSU5HKF9ieSkpO1xyXG4gICAgICB0aGlzLnNldChtdHhSZXN1bHQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSZXN1bHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGEgc2NhbGluZyBhbG9uZyB0aGUgeC1heGlzIGJ5IHRoZSBnaXZlbiBhbW91bnQgdG8gdGhpcyBtYXRyaXggXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzY2FsZVgoX2J5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgbGV0IHZlY3RvcjogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgdmVjdG9yLnNldChfYnksIDEsIDEpO1xyXG4gICAgICB0aGlzLnNjYWxlKHZlY3Rvcik7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHZlY3Rvcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZCBhIHNjYWxpbmcgYWxvbmcgdGhlIHktYXhpcyBieSB0aGUgZ2l2ZW4gYW1vdW50IHRvIHRoaXMgbWF0cml4IFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGVZKF9ieTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIGxldCB2ZWN0b3I6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIHZlY3Rvci5zZXQoMSwgX2J5LCAxKTtcclxuICAgICAgdGhpcy5zY2FsZSh2ZWN0b3IpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZSh2ZWN0b3IpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYSBzY2FsaW5nIGFsb25nIHRoZSB6LWF4aXMgYnkgdGhlIGdpdmVuIGFtb3VudCB0byB0aGlzIG1hdHJpeCBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNjYWxlWihfYnk6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KDEsIDEsIF9ieSk7XHJcbiAgICAgIHRoaXMuc2NhbGUodmVjdG9yKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUodmVjdG9yKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2Zvcm1hdGlvblxyXG4gICAgLyoqXHJcbiAgICAgKiBNdWx0aXBseSB0aGlzIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIG11bHRpcGx5KF9tYXRyaXg6IE1hdHJpeDR4NCwgX2Zyb21MZWZ0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgY29uc3QgbXR4UmVzdWx0OiBNYXRyaXg0eDQgPSBfZnJvbUxlZnQgPyBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04oX21hdHJpeCwgdGhpcykgOiBNYXRyaXg0eDQuTVVMVElQTElDQVRJT04odGhpcywgX21hdHJpeCk7XHJcbiAgICAgIHRoaXMuc2V0KG10eFJlc3VsdCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFJlc3VsdCk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIC8vIHB1YmxpYyBnZXRFdWxlckFuZ2xlc05ldygpOiBWZWN0b3IzIHtcclxuICAgIC8vICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSB0aGlzLnNjYWxpbmc7XHJcblxyXG4gICAgLy8gICBsZXQgdGhldGFYOiBudW1iZXIsIHRoZXRhWTogbnVtYmVyLCB0aGV0YVo6IG51bWJlcjtcclxuICAgIC8vICAgbGV0IHIwMjogbnVtYmVyID0gdGhpcy5kYXRhWzJdIC8gc2NhbGluZy56O1xyXG4gICAgLy8gICBsZXQgcjExOiBudW1iZXIgPSB0aGlzLmRhdGFbNV0gLyBzY2FsaW5nLnk7XHJcblxyXG4gICAgLy8gICBpZiAocjAyIDwgMSkge1xyXG4gICAgLy8gICAgIGlmIChyMDIgPiAtMSkge1xyXG4gICAgLy8gICAgICAgdGhldGFZID0gTWF0aC5hc2luKC1yMDIpO1xyXG4gICAgLy8gICAgICAgdGhldGFaID0gTWF0aC5hdGFuMih0aGlzLmRhdGFbMV0gLyBzY2FsaW5nLnksIHRoaXMuZGF0YVswXSAvIHNjYWxpbmcueCk7XHJcbiAgICAvLyAgICAgICB0aGV0YVggPSBNYXRoLmF0YW4yKHRoaXMuZGF0YVs5XSAvIHNjYWxpbmcueiwgdGhpcy5kYXRhWzEwXSAvIHNjYWxpbmcueik7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgIGVsc2Uge1xyXG4gICAgLy8gICAgICAgdGhldGFZID0gTWF0aC5QSSAvIDI7XHJcbiAgICAvLyAgICAgICB0aGV0YVogPSAtTWF0aC5hdGFuMih0aGlzLmRhdGFbNl0gLyBzY2FsaW5nLnksIHIxMSk7XHJcbiAgICAvLyAgICAgICB0aGV0YVggPSAwO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgfVxyXG4gICAgLy8gICBlbHNlIHtcclxuICAgIC8vICAgICB0aGV0YVkgPSAtTWF0aC5QSSAvIDI7XHJcbiAgICAvLyAgICAgdGhldGFaID0gTWF0aC5hdGFuMigtdGhpcy5kYXRhWzZdIC8gc2NhbGluZy55LCByMTEpO1xyXG4gICAgLy8gICAgIHRoZXRhWCA9IDA7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgdGhpcy4jZXVsZXJBbmdsZXMuc2V0KC10aGV0YVgsIHRoZXRhWSwgdGhldGFaKTtcclxuICAgIC8vICAgdGhpcy4jZXVsZXJBbmdsZXMuc2NhbGUoTWF0aGVtYXRpYy5yYWQyZGVnKTtcclxuXHJcbiAgICAvLyAgIHJldHVybiB0aGlzLiNldWxlckFuZ2xlcztcclxuICAgIC8vIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyBhbmQgcmV0dXJucyB0aGUgZXVsZXItYW5nbGVzIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCByb3RhdGlvbiBvZiB0aGlzIG1hdHJpeC4gIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RXVsZXJBbmdsZXMoKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCBzY2FsaW5nOiBWZWN0b3IzID0gdGhpcy5zY2FsaW5nO1xyXG5cclxuICAgICAgbGV0IHMwOiBudW1iZXIgPSB0aGlzLmRhdGFbMF0gLyBzY2FsaW5nLng7XHJcbiAgICAgIGxldCBzMTogbnVtYmVyID0gdGhpcy5kYXRhWzFdIC8gc2NhbGluZy54O1xyXG4gICAgICBsZXQgczI6IG51bWJlciA9IHRoaXMuZGF0YVsyXSAvIHNjYWxpbmcueDtcclxuICAgICAgbGV0IHM2OiBudW1iZXIgPSB0aGlzLmRhdGFbNl0gLyBzY2FsaW5nLnk7XHJcbiAgICAgIGxldCBzMTA6IG51bWJlciA9IHRoaXMuZGF0YVsxMF0gLyBzY2FsaW5nLno7XHJcblxyXG4gICAgICBsZXQgc3k6IG51bWJlciA9IE1hdGguaHlwb3QoczAsIHMxKTsgLy8gcHJvYmFibHkgMi4gcGFyYW0gc2hvdWxkIGJlIHRoaXMuZGF0YVs0XSAvIHNjYWxpbmcueVxyXG5cclxuICAgICAgbGV0IHNpbmd1bGFyOiBib29sZWFuID0gc3kgPCAxZS02OyAvLyBJZlxyXG5cclxuICAgICAgbGV0IHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHoxOiBudW1iZXI7XHJcbiAgICAgIGxldCB4MjogbnVtYmVyLCB5MjogbnVtYmVyLCB6MjogbnVtYmVyO1xyXG5cclxuICAgICAgaWYgKCFzaW5ndWxhcikge1xyXG4gICAgICAgIHgxID0gTWF0aC5hdGFuMihzNiwgczEwKTtcclxuICAgICAgICB5MSA9IE1hdGguYXRhbjIoLXMyLCBzeSk7XHJcbiAgICAgICAgejEgPSBNYXRoLmF0YW4yKHMxLCBzMCk7XHJcblxyXG4gICAgICAgIHgyID0gTWF0aC5hdGFuMigtczYsIC1zMTApO1xyXG4gICAgICAgIHkyID0gTWF0aC5hdGFuMigtczIsIC1zeSk7XHJcbiAgICAgICAgejIgPSBNYXRoLmF0YW4yKC1zMSwgLXMwKTtcclxuXHJcbiAgICAgICAgaWYgKE1hdGguYWJzKHgyKSArIE1hdGguYWJzKHkyKSArIE1hdGguYWJzKHoyKSA8IE1hdGguYWJzKHgxKSArIE1hdGguYWJzKHkxKSArIE1hdGguYWJzKHoxKSkge1xyXG4gICAgICAgICAgeDEgPSB4MjtcclxuICAgICAgICAgIHkxID0geTI7XHJcbiAgICAgICAgICB6MSA9IHoyO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB4MSA9IE1hdGguYXRhbjIoLXRoaXMuZGF0YVs5XSAvIHNjYWxpbmcueiwgdGhpcy5kYXRhWzVdIC8gc2NhbGluZy55KTtcclxuICAgICAgICB5MSA9IE1hdGguYXRhbjIoLXRoaXMuZGF0YVsyXSAvIHNjYWxpbmcueCwgc3kpO1xyXG4gICAgICAgIHoxID0gMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy4jZXVsZXJBbmdsZXMuc2V0KHgxLCB5MSwgejEpO1xyXG4gICAgICB0aGlzLiNldWxlckFuZ2xlcy5zY2FsZShDYWxjLnJhZDJkZWcpO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuI2V1bGVyQW5nbGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZWxlbWVudHMgb2YgdGhpcyBtYXRyaXggdG8gdGhlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gbWF0cml4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQoX210eFRvOiBNYXRyaXg0eDQgfCBBcnJheUxpa2U8bnVtYmVyPik6IHZvaWQge1xyXG4gICAgICBpZiAoX210eFRvIGluc3RhbmNlb2YgTWF0cml4NHg0KVxyXG4gICAgICAgIHRoaXMuZGF0YS5zZXQoX210eFRvLmRhdGEpO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5kYXRhLnNldChfbXR4VG8pO1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGDGki5NYXRyaXg0eDQodHJhbnNsYXRpb246ICR7dGhpcy50cmFuc2xhdGlvbi50b1N0cmluZygpfSwgcm90YXRpb246ICR7dGhpcy5yb3RhdGlvbi50b1N0cmluZygpfSwgc2NhbGluZzogJHt0aGlzLnNjYWxpbmcudG9TdHJpbmcoKX1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHRoZSBlbGVtZW50cyBvZiB0aGlzIG1hdHJpeCBhcyBhIEZsb2F0MzJBcnJheVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0KCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgIC8vIFRPRE86IG9wdGltaXphdGlvbiwgaXQgc2hvdWxkbid0IGFsd2F5cyByZXR1cm4gYSBjb3B5LCBzaW5jZSB0aGlzIGJsb2F0cyBtZW1vcnlcclxuICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodGhpcy5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBjYXJkaW5hbCB4LWF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFgoKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIHJlc3VsdC5zZXQodGhpcy5kYXRhWzBdLCB0aGlzLmRhdGFbMV0sIHRoaXMuZGF0YVsyXSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBjYXJkaW5hbCB5LWF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFkoKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIHJlc3VsdC5zZXQodGhpcy5kYXRhWzRdLCB0aGlzLmRhdGFbNV0sIHRoaXMuZGF0YVs2XSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBjYXJkaW5hbCB6LWF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFooKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIHJlc3VsdC5zZXQodGhpcy5kYXRhWzhdLCB0aGlzLmRhdGFbOV0sIHRoaXMuZGF0YVsxMF0pO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3dhcHMgdGhlIHR3byBjYXJkaW5hbCBheGlzIGFuZCByZXZlcnNlcyB0aGUgdGhpcmQsIGVmZmVjdGl2ZWx5IHJvdGF0aW5nIHRoZSB0cmFuc2Zvcm0gMTgwIGRlZ3JlZXMgYXJvdW5kIG9uZSBhbmQgOTAgZGVncmVlcyBhcm91bmQgYSBzZWNvbmQgYXhpc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3dhcFhZKCk6IHZvaWQge1xyXG4gICAgICBsZXQgdGVtcDogbnVtYmVyW10gPSBbdGhpcy5kYXRhWzBdLCB0aGlzLmRhdGFbMV0sIHRoaXMuZGF0YVsyXV07IC8vIHN0b3JlIHgtYXhpc1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KFt0aGlzLmRhdGFbNF0sIHRoaXMuZGF0YVs1XSwgdGhpcy5kYXRhWzZdXSwgMCk7IC8vIG92ZXJ3cml0ZSB4LWF4aXMgd2l0aCB5LWF4aXNcclxuICAgICAgdGhpcy5kYXRhLnNldCh0ZW1wLCA0KTsgLy8gb3ZlcndyaXRlIFkgd2l0aCB0ZW1wXHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoWy10aGlzLmRhdGFbOF0sIC10aGlzLmRhdGFbOV0sIC10aGlzLmRhdGFbMTBdXSwgOCk7IC8vIHJldmVyc2Ugei1heGlzXHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN3YXBzIHRoZSB0d28gY2FyZGluYWwgYXhpcyBhbmQgcmV2ZXJzZXMgdGhlIHRoaXJkLCBlZmZlY3RpdmVseSByb3RhdGluZyB0aGUgdHJhbnNmb3JtIDE4MCBkZWdyZWVzIGFyb3VuZCBvbmUgYW5kIDkwIGRlZ3JlZXMgYXJvdW5kIGEgc2Vjb25kIGF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN3YXBYWigpOiB2b2lkIHtcclxuICAgICAgbGV0IHRlbXA6IG51bWJlcltdID0gW3RoaXMuZGF0YVswXSwgdGhpcy5kYXRhWzFdLCB0aGlzLmRhdGFbMl1dOyAvLyBzdG9yZSB4LWF4aXNcclxuICAgICAgdGhpcy5kYXRhLnNldChbdGhpcy5kYXRhWzhdLCB0aGlzLmRhdGFbOV0sIHRoaXMuZGF0YVsxMF1dLCAwKTsgLy8gb3ZlcndyaXRlIHgtYXhpcyB3aXRoIHotYXhpc1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KHRlbXAsIDgpOyAvLyBvdmVyd3JpdGUgWiB3aXRoIHRlbXBcclxuICAgICAgdGhpcy5kYXRhLnNldChbLXRoaXMuZGF0YVs0XSwgLXRoaXMuZGF0YVs1XSwgLXRoaXMuZGF0YVs2XV0sIDQpOyAvLyByZXZlcnNlIHktYXhpc1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTd2FwcyB0aGUgdHdvIGNhcmRpbmFsIGF4aXMgYW5kIHJldmVyc2VzIHRoZSB0aGlyZCwgZWZmZWN0aXZlbHkgcm90YXRpbmcgdGhlIHRyYW5zZm9ybSAxODAgZGVncmVlcyBhcm91bmQgb25lIGFuZCA5MCBkZWdyZWVzIGFyb3VuZCBhIHNlY29uZCBheGlzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzd2FwWVooKTogdm9pZCB7XHJcbiAgICAgIGxldCB0ZW1wOiBudW1iZXJbXSA9IFt0aGlzLmRhdGFbNF0sIHRoaXMuZGF0YVs1XSwgdGhpcy5kYXRhWzZdXTsgLy8gc3RvcmUgeS1heGlzXHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoW3RoaXMuZGF0YVs4XSwgdGhpcy5kYXRhWzldLCB0aGlzLmRhdGFbMTBdXSwgNCk7IC8vIG92ZXJ3cml0ZSB5LWF4aXMgd2l0aCB6LWF4aXNcclxuICAgICAgdGhpcy5kYXRhLnNldCh0ZW1wLCA4KTsgLy8gb3ZlcndyaXRlIFogd2l0aCB0ZW1wXHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoWy10aGlzLmRhdGFbMF0sIC10aGlzLmRhdGFbMV0sIC10aGlzLmRhdGFbMl1dLCAwKTsgLy8gcmV2ZXJzZSB4LWF4aXNcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHRyYW5sYXRpb24gZnJvbSB0aGlzIG1hdHJpeCB0byB0aGUgdGFyZ2V0IG1hdHJpeFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VHJhbnNsYXRpb25UbyhfbXR4VGFyZ2V0OiBNYXRyaXg0eDQpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IGRpZmZlcmVuY2U6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIGRpZmZlcmVuY2Uuc2V0KF9tdHhUYXJnZXQuZGF0YVsxMl0gLSB0aGlzLmRhdGFbMTJdLCBfbXR4VGFyZ2V0LmRhdGFbMTNdIC0gdGhpcy5kYXRhWzEzXSwgX210eFRhcmdldC5kYXRhWzE0XSAtIHRoaXMuZGF0YVsxNF0pO1xyXG4gICAgICByZXR1cm4gZGlmZmVyZW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICAvLyB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgdHJhbnNsYXRpb246IHRoaXMudHJhbnNsYXRpb24uc2VyaWFsaXplKCksXHJcbiAgICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24uc2VyaWFsaXplKCksXHJcbiAgICAgICAgc2NhbGluZzogdGhpcy5zY2FsaW5nLnNlcmlhbGl6ZSgpXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSB7XHJcbiAgICAgICAgdHJhbnNsYXRpb246IGF3YWl0IHRoaXMudHJhbnNsYXRpb24uZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24udHJhbnNsYXRpb24pLFxyXG4gICAgICAgIHJvdGF0aW9uOiBhd2FpdCB0aGlzLnJvdGF0aW9uLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLnJvdGF0aW9uKSxcclxuICAgICAgICBzY2FsaW5nOiBhd2FpdCB0aGlzLnNjYWxpbmcuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uc2NhbGluZylcclxuICAgICAgfTtcclxuICAgICAgdGhpcy5tdXRhdGUobXV0YXRvcik7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBpZiAodGhpcy5tdXRhdG9yKVxyXG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0b3I7XHJcblxyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHtcclxuICAgICAgICB0cmFuc2xhdGlvbjogdGhpcy50cmFuc2xhdGlvbi5nZXRNdXRhdG9yKCksXHJcbiAgICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24uZ2V0TXV0YXRvcigpLFxyXG4gICAgICAgIHNjYWxpbmc6IHRoaXMuc2NhbGluZy5nZXRNdXRhdG9yKClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIGNhY2hlIG11dGF0b3JcclxuICAgICAgdGhpcy5tdXRhdG9yID0gbXV0YXRvcjtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBsZXQgb2xkVHJhbnNsYXRpb246IFZlY3RvcjMgPSB0aGlzLnRyYW5zbGF0aW9uO1xyXG4gICAgICBsZXQgb2xkUm90YXRpb246IFZlY3RvcjMgPSB0aGlzLnJvdGF0aW9uO1xyXG4gICAgICBsZXQgb2xkU2NhbGluZzogVmVjdG9yMyA9IHRoaXMuc2NhbGluZztcclxuICAgICAgLy8gVGhlIG5ldyB2YWx1ZXMgYXJlIG5vdCBuZWNlc3NhcmlseSBWZWN0b3IzIG9iamVjdHMgYnV0IGNvdWxkIGJlIHNpbXBsZSBtdXRhdG9yIG9iamVjdHMuXHJcbiAgICAgIC8vIFRoZXkgYXJlIG9ubHkgZ3VhcmFudGVlZCB0byBiZSBpbnN0YW5jZSBvZiBWZWN0b3IzIHdoZW4gc2V0IGJ5IE1hdHJpeDR4NCBzZXR0ZXJzLCBidXQgbm90IHdoZW4gZm9yIGV4YW1wbGUgc2V0IGJ5IHRoZSBhbmltYXRpb24gc3lzdGVtLlxyXG4gICAgICBsZXQgbmV3VHJhbnNsYXRpb246IFZlY3RvcjMgfCBNdXRhdG9yID0gPFZlY3RvcjMgfCBNdXRhdG9yPl9tdXRhdG9yW1widHJhbnNsYXRpb25cIl07XHJcbiAgICAgIGxldCBuZXdSb3RhdGlvbjogVmVjdG9yMyB8IE11dGF0b3IgPSA8VmVjdG9yMyB8IE11dGF0b3I+X211dGF0b3JbXCJyb3RhdGlvblwiXTtcclxuICAgICAgbGV0IG5ld1NjYWxpbmc6IFZlY3RvcjMgfCBNdXRhdG9yID0gPFZlY3RvcjMgfCBNdXRhdG9yPl9tdXRhdG9yW1wic2NhbGluZ1wiXTtcclxuICAgICAgbGV0IHZlY3RvcnM6IFZlY3RvclJlcHJlc2VudGF0aW9uID0geyB0cmFuc2xhdGlvbjogb2xkVHJhbnNsYXRpb24sIHJvdGF0aW9uOiBvbGRSb3RhdGlvbiwgc2NhbGluZzogb2xkU2NhbGluZyB9O1xyXG4gICAgICBpZiAobmV3VHJhbnNsYXRpb24pIHtcclxuICAgICAgICB2ZWN0b3JzLnRyYW5zbGF0aW9uID0gdmVjdG9ycy50cmFuc2xhdGlvbiB8fCB0aGlzLiN2ZWN0b3JzLnRyYW5zbGF0aW9uO1xyXG4gICAgICAgIHZlY3RvcnMudHJhbnNsYXRpb24uc2V0KFxyXG4gICAgICAgICAgbmV3VHJhbnNsYXRpb24ueCAhPSB1bmRlZmluZWQgPyBuZXdUcmFuc2xhdGlvbi54IDogb2xkVHJhbnNsYXRpb24ueCxcclxuICAgICAgICAgIG5ld1RyYW5zbGF0aW9uLnkgIT0gdW5kZWZpbmVkID8gbmV3VHJhbnNsYXRpb24ueSA6IG9sZFRyYW5zbGF0aW9uLnksXHJcbiAgICAgICAgICBuZXdUcmFuc2xhdGlvbi56ICE9IHVuZGVmaW5lZCA/IG5ld1RyYW5zbGF0aW9uLnogOiBvbGRUcmFuc2xhdGlvbi56XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAobmV3Um90YXRpb24pIHtcclxuICAgICAgICBpZiAoXCJ3XCIgaW4gbmV3Um90YXRpb24pIHsgXHJcbiAgICAgICAgICAvLyBUaGlzIHJvdGF0aW9uIGlzIGEgcXVhdGVybmlvbiAobXV0YXRvcikuIEdldCB0aGUgZXVsZXIgYW5nbGVzLlxyXG4gICAgICAgICAgLy8gVE9ETzogbWF5YmUgbWFrZSBRdWF0ZXJuaW9uIHRoZSBzdGFuZGFyZCBmb3Igcm90YXRpb25cclxuICAgICAgICAgIGNvbnN0IHJvdGF0aW9uOiBRdWF0ZXJuaW9uID0gUmVjeWNsZXIuZ2V0KFF1YXRlcm5pb24pO1xyXG4gICAgICAgICAgcm90YXRpb24uc2V0KFtuZXdSb3RhdGlvbi54LCBuZXdSb3RhdGlvbi55LCBuZXdSb3RhdGlvbi56LCBuZXdSb3RhdGlvbi53XSk7XHJcbiAgICAgICAgICBuZXdSb3RhdGlvbiA9IHJvdGF0aW9uLmV1bGVyQW5nbGVzO1xyXG4gICAgICAgICAgUmVjeWNsZXIuc3RvcmUocm90YXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2ZWN0b3JzLnJvdGF0aW9uID0gdmVjdG9ycy5yb3RhdGlvbiB8fCB0aGlzLiN2ZWN0b3JzLnJvdGF0aW9uO1xyXG4gICAgICAgIHZlY3RvcnMucm90YXRpb24uc2V0KFxyXG4gICAgICAgICAgbmV3Um90YXRpb24ueCAhPSB1bmRlZmluZWQgPyBuZXdSb3RhdGlvbi54IDogb2xkUm90YXRpb24ueCxcclxuICAgICAgICAgIG5ld1JvdGF0aW9uLnkgIT0gdW5kZWZpbmVkID8gbmV3Um90YXRpb24ueSA6IG9sZFJvdGF0aW9uLnksXHJcbiAgICAgICAgICBuZXdSb3RhdGlvbi56ICE9IHVuZGVmaW5lZCA/IG5ld1JvdGF0aW9uLnogOiBvbGRSb3RhdGlvbi56XHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAobmV3U2NhbGluZykge1xyXG4gICAgICAgIHZlY3RvcnMuc2NhbGluZyA9IHZlY3RvcnMuc2NhbGluZyB8fCB0aGlzLiN2ZWN0b3JzLnNjYWxpbmc7XHJcbiAgICAgICAgdmVjdG9ycy5zY2FsaW5nLnNldChcclxuICAgICAgICAgIG5ld1NjYWxpbmcueCAhPSB1bmRlZmluZWQgPyBuZXdTY2FsaW5nLnggOiBvbGRTY2FsaW5nLngsXHJcbiAgICAgICAgICBuZXdTY2FsaW5nLnkgIT0gdW5kZWZpbmVkID8gbmV3U2NhbGluZy55IDogb2xkU2NhbGluZy55LFxyXG4gICAgICAgICAgbmV3U2NhbGluZy56ICE9IHVuZGVmaW5lZCA/IG5ld1NjYWxpbmcueiA6IG9sZFNjYWxpbmcuelxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRPRE86IHBvc3NpYmxlIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB3aGVuIG9ubHkgb25lIG9yIHR3byBjb21wb25lbnRzIGNoYW5nZSwgdGhlbiB1c2Ugb2xkIG1hdHJpeCBpbnN0ZWFkIG9mIElERU5USVRZIGFuZCB0cmFuc2Zvcm0gYnkgZGlmZmVyZW5jZXMvcXVvdGllbnRzXHJcbiAgICAgIGxldCBtdHhSZXN1bHQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG4gICAgICBpZiAodmVjdG9ycy50cmFuc2xhdGlvbilcclxuICAgICAgICBtdHhSZXN1bHQudHJhbnNsYXRlKHZlY3RvcnMudHJhbnNsYXRpb24pO1xyXG4gICAgICAvLyBwcm9ibGVtOiBwcmV2aW91cyByb3RhdGlvbiBtaWdodCBoYXZlIGJlZW4gY2FsY3VsYXRlZCBiYWNrIGFzIGEgc2NhbGluZyBhbmQgdmljZSB2ZXJzYS4gQXBwbHlpbmcgYWdhaW4gbWlnaHQgZG91YmxlIHRoZSBlZmZlY3QuLi5cclxuICAgICAgaWYgKHZlY3RvcnMucm90YXRpb24pXHJcbiAgICAgICAgbXR4UmVzdWx0LnJvdGF0ZSh2ZWN0b3JzLnJvdGF0aW9uKTtcclxuICAgICAgaWYgKHZlY3RvcnMuc2NhbGluZylcclxuICAgICAgICBtdHhSZXN1bHQuc2NhbGUodmVjdG9ycy5zY2FsaW5nKTtcclxuXHJcbiAgICAgIHRoaXMuc2V0KG10eFJlc3VsdCk7XHJcbiAgICAgIHRoaXMudmVjdG9ycyA9IHZlY3RvcnM7XHJcblxyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhSZXN1bHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yQXR0cmlidXRlVHlwZXMoX211dGF0b3I6IE11dGF0b3IpOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMge1xyXG4gICAgICBsZXQgdHlwZXM6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyA9IHt9O1xyXG4gICAgICBpZiAoX211dGF0b3IudHJhbnNsYXRpb24pIHR5cGVzLnRyYW5zbGF0aW9uID0gXCJWZWN0b3IzXCI7XHJcbiAgICAgIGlmIChfbXV0YXRvci5yb3RhdGlvbikgdHlwZXMucm90YXRpb24gPSBcIlZlY3RvcjNcIjtcclxuICAgICAgaWYgKF9tdXRhdG9yLnNjYWxpbmcpIHR5cGVzLnNjYWxpbmcgPSBcIlZlY3RvcjNcIjtcclxuICAgICAgcmV0dXJuIHR5cGVzO1xyXG4gICAgfVxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHsvKiogKi8gfVxyXG5cclxuICAgIHByaXZhdGUgcmVzZXRDYWNoZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy52ZWN0b3JzID0geyB0cmFuc2xhdGlvbjogbnVsbCwgcm90YXRpb246IG51bGwsIHNjYWxpbmc6IG51bGwgfTtcclxuICAgICAgdGhpcy5tdXRhdG9yID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcbn1cclxuIiwiLyoqXHJcbiAqIEJhc2VjbGFzcyBmb3IgTm9pc2UyLCBOb2lzZTMgYW5kIE5vaXNlNFxyXG4gKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMVxyXG4gKiBUaGlzIGlzIGFuIGFkYXB0aW9uIG9mIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2Zhc3Qtc2ltcGxleC1ub2lzZVxyXG4gKi9cclxuXHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBjbGFzcyBOb2lzZSB7XHJcbiAgICBwcm90ZWN0ZWQgcGVybTogVWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KDUxMik7XHJcbiAgICBwcm90ZWN0ZWQgcGVybU1vZDEyOiBVaW50OEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoNTEyKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfcmFuZG9tOiBGdW5jdGlvbiA9IE1hdGgucmFuZG9tKSB7XHJcbiAgICAgIGNvbnN0IHA6IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheSgyNTYpO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgMjU2OyBpKyspXHJcbiAgICAgICAgcFtpXSA9IGk7XHJcblxyXG4gICAgICBsZXQgbjogbnVtYmVyO1xyXG4gICAgICBsZXQgcTogbnVtYmVyO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAyNTU7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICBuID0gTWF0aC5mbG9vcigoaSArIDEpICogX3JhbmRvbSgpKTtcclxuICAgICAgICBxID0gcFtpXTtcclxuICAgICAgICBwW2ldID0gcFtuXTtcclxuICAgICAgICBwW25dID0gcTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IDUxMjsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5wZXJtW2ldID0gcFtpICYgMjU1XTtcclxuICAgICAgICB0aGlzLnBlcm1Nb2QxMltpXSA9IHRoaXMucGVybVtpXSAlIDEyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi9Ob2lzZS50c1wiLz5cclxuLyoqXHJcbiAqIFRoaXMgaXMgYW4gYWRhcHRpb24gb2YgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZmFzdC1zaW1wbGV4LW5vaXNlXHJcbiAqIGRvbmUgYnkgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICpcclxuICogQmFzZWQgb24gZXhhbXBsZSBjb2RlIGJ5IFN0ZWZhbiBHdXN0YXZzb24gKHN0ZWd1QGl0bi5saXUuc2UpLlxyXG4gKiBPcHRpbWlzYXRpb25zIGJ5IFBldGVyIEVhc3RtYW4gKHBlYXN0bWFuQGRyaXp6bGUuc3RhbmZvcmQuZWR1KS5cclxuICogQmV0dGVyIHJhbmsgb3JkZXJpbmcgbWV0aG9kIGJ5IFN0ZWZhbiBHdXN0YXZzb24gaW4gMjAxMi5cclxuICpcclxuICogVGhpcyBjb2RlIHdhcyBwbGFjZWQgaW4gdGhlIHB1YmxpYyBkb21haW4gYnkgaXRzIG9yaWdpbmFsIGF1dGhvcixcclxuICogU3RlZmFuIEd1c3RhdnNvbi4gWW91IG1heSB1c2UgaXQgYXMgeW91IHNlZSBmaXQsIGJ1dFxyXG4gKiBhdHRyaWJ1dGlvbiBpcyBhcHByZWNpYXRlZC5cclxuICovXHJcblxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgY2xhc3MgTm9pc2UyIGV4dGVuZHMgTm9pc2Uge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgb2Zmc2V0OiBudW1iZXIgPSAoMy4wIC0gTWF0aC5zcXJ0KDMuMCkpIC8gNi4wO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ3JhZGllbnQ6IG51bWJlcltdW10gPSBbWzEsIDFdLCBbLTEsIDFdLCBbMSwgLTFdLCBbLTEsIC0xXSwgWzEsIDBdLCBbLTEsIDBdLCBbMSwgMF0sIFstMSwgMF0sIFswLCAxXSwgWzAsIC0xXSwgWzAsIDFdLCBbMCwgLTFdXTtcclxuICAgICNzYW1wbGU6IChfeDogbnVtYmVyLCBfeTogbnVtYmVyKSA9PiBudW1iZXIgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9yYW5kb206IEZ1bmN0aW9uID0gTWF0aC5yYW5kb20pIHtcclxuICAgICAgc3VwZXIoX3JhbmRvbSk7XHJcblxyXG4gICAgICB0aGlzLiNzYW1wbGUgPSAoX3g6IG51bWJlciwgX3k6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIC8vIFNrZXcgdGhlIGlucHV0IHNwYWNlIHRvIGRldGVybWluZSB3aGljaCBzaW1wbGV4IGNlbGwgd2UncmUgaW5cclxuICAgICAgICBjb25zdCBzOiBudW1iZXIgPSAoX3ggKyBfeSkgKiAwLjUgKiAoTWF0aC5zcXJ0KDMuMCkgLSAxLjApOyAvLyBIYWlyeSBmYWN0b3IgZm9yIDJEXHJcbiAgICAgICAgY29uc3QgaTogbnVtYmVyID0gTWF0aC5mbG9vcihfeCArIHMpO1xyXG4gICAgICAgIGNvbnN0IGo6IG51bWJlciA9IE1hdGguZmxvb3IoX3kgKyBzKTtcclxuICAgICAgICBjb25zdCB0OiBudW1iZXIgPSAoaSArIGopICogTm9pc2UyLm9mZnNldDtcclxuICAgICAgICBjb25zdCBYMDogbnVtYmVyID0gaSAtIHQ7IC8vIFVuc2tldyB0aGUgY2VsbCBvcmlnaW4gYmFjayB0byAoeCx5KSBzcGFjZVxyXG4gICAgICAgIGNvbnN0IFkwOiBudW1iZXIgPSBqIC0gdDtcclxuICAgICAgICBjb25zdCB4MDogbnVtYmVyID0gX3ggLSBYMDsgLy8gVGhlIHgseSBkaXN0YW5jZXMgZnJvbSB0aGUgY2VsbCBvcmlnaW5cclxuICAgICAgICBjb25zdCB5MDogbnVtYmVyID0gX3kgLSBZMDtcclxuXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoaWNoIHNpbXBsZXggd2UgYXJlIGluLlxyXG4gICAgICAgIGNvbnN0IGkxOiBudW1iZXIgPSB4MCA+IHkwID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgajE6IG51bWJlciA9IHgwID4geTAgPyAwIDogMTtcclxuXHJcbiAgICAgICAgLy8gT2Zmc2V0Om51bWJlcnMgZm9yIGNvcm5lcnNcclxuICAgICAgICBjb25zdCB4MTogbnVtYmVyID0geDAgLSBpMSArIE5vaXNlMi5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeTE6IG51bWJlciA9IHkwIC0gajEgKyBOb2lzZTIub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHgyOiBudW1iZXIgPSB4MCAtIDEuMCArIDIuMCAqIE5vaXNlMi5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeTI6IG51bWJlciA9IHkwIC0gMS4wICsgMi4wICogTm9pc2UyLm9mZnNldDtcclxuXHJcbiAgICAgICAgLy8gV29yayBvdXQgdGhlIGhhc2hlZCBncmFkaWVudCBpbmRpY2VzIG9mIHRoZSB0aHJlZSBzaW1wbGV4IGNvcm5lcnNcclxuICAgICAgICBjb25zdCBpaTogbnVtYmVyID0gaSAmIDI1NTtcclxuICAgICAgICBjb25zdCBqajogbnVtYmVyID0gaiAmIDI1NTtcclxuICAgICAgICBjb25zdCBnMDogbnVtYmVyW10gPSBOb2lzZTIuZ3JhZGllbnRbdGhpcy5wZXJtTW9kMTJbaWkgKyB0aGlzLnBlcm1bampdXV07XHJcbiAgICAgICAgY29uc3QgZzE6IG51bWJlcltdID0gTm9pc2UyLmdyYWRpZW50W3RoaXMucGVybU1vZDEyW2lpICsgaTEgKyB0aGlzLnBlcm1bamogKyBqMV1dXTtcclxuICAgICAgICBjb25zdCBnMjogbnVtYmVyW10gPSBOb2lzZTIuZ3JhZGllbnRbdGhpcy5wZXJtTW9kMTJbaWkgKyAxICsgdGhpcy5wZXJtW2pqICsgMV1dXTtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBjb250cmlidXRpb24gZnJvbSB0aGUgdGhyZWUgY29ybmVyc1xyXG4gICAgICAgIGNvbnN0IHQwOiBudW1iZXIgPSAwLjUgLSB4MCAqIHgwIC0geTAgKiB5MDtcclxuICAgICAgICBjb25zdCBuMDogbnVtYmVyID0gdDAgPCAwID8gMC4wIDogTWF0aC5wb3codDAsIDQpICogKGcwWzBdICogeDAgKyBnMFsxXSAqIHkwKTtcclxuXHJcbiAgICAgICAgY29uc3QgdDE6IG51bWJlciA9IDAuNSAtIHgxICogeDEgLSB5MSAqIHkxO1xyXG4gICAgICAgIGNvbnN0IG4xOiBudW1iZXIgPSB0MSA8IDAgPyAwLjAgOiBNYXRoLnBvdyh0MSwgNCkgKiAoZzFbMF0gKiB4MSArIGcxWzFdICogeTEpO1xyXG5cclxuICAgICAgICBjb25zdCB0MjogbnVtYmVyID0gMC41IC0geDIgKiB4MiAtIHkyICogeTI7XHJcbiAgICAgICAgY29uc3QgbjI6IG51bWJlciA9IHQyIDwgMCA/IDAuMCA6IE1hdGgucG93KHQyLCA0KSAqIChnMlswXSAqIHgyICsgZzJbMV0gKiB5Mik7XHJcblxyXG4gICAgICAgIC8vIEFkZCBjb250cmlidXRpb25zIGZyb20gZWFjaCBjb3JuZXIgdG8gZ2V0IHRoZSBmaW5hbCBub2lzZSB2YWx1ZS5cclxuICAgICAgICAvLyBUaGUgcmVzdWx0IGlzIHNjYWxlZCB0byByZXR1cm4gdmFsdWVzIGluIHRoZSBpbnRlcnZhbCBbLTEsIDFdXHJcbiAgICAgICAgcmV0dXJuIDcwLjE0ODA1NzcwNjUzOTUyICogKG4wICsgbjEgKyBuMik7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNhbXBsZSA9IChfeDogbnVtYmVyLCBfeTogbnVtYmVyKTogbnVtYmVyID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NhbXBsZShfeCwgX3kpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8qKlxyXG4gKiBUaGlzIGlzIGFuIGFkYXB0aW9uIG9mIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2Zhc3Qtc2ltcGxleC1ub2lzZVxyXG4gKiBkb25lIGJ5IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAqXHJcbiAqIEJhc2VkIG9uIGV4YW1wbGUgY29kZSBieSBTdGVmYW4gR3VzdGF2c29uIChzdGVndUBpdG4ubGl1LnNlKS5cclxuICogT3B0aW1pc2F0aW9ucyBieSBQZXRlciBFYXN0bWFuIChwZWFzdG1hbkBkcml6emxlLnN0YW5mb3JkLmVkdSkuXHJcbiAqIEJldHRlciByYW5rIG9yZGVyaW5nIG1ldGhvZCBieSBTdGVmYW4gR3VzdGF2c29uIGluIDIwMTIuXHJcbiAqXHJcbiAqIFRoaXMgY29kZSB3YXMgcGxhY2VkIGluIHRoZSBwdWJsaWMgZG9tYWluIGJ5IGl0cyBvcmlnaW5hbCBhdXRob3IsXHJcbiAqIFN0ZWZhbiBHdXN0YXZzb24uIFlvdSBtYXkgdXNlIGl0IGFzIHlvdSBzZWUgZml0LCBidXRcclxuICogYXR0cmlidXRpb24gaXMgYXBwcmVjaWF0ZWQuXHJcbiAqL1xyXG5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gIC8vIFRPRE86IFRlc3RcclxuICBleHBvcnQgY2xhc3MgTm9pc2UzIGV4dGVuZHMgTm9pc2Uge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgb2Zmc2V0OiBudW1iZXIgPSAxLjAgLyA2LjA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBncmFkaWVudDogbnVtYmVyW11bXSA9IFtbMSwgMSwgMF0sIFstMSwgMSwgMF0sIFsxLCAtMSwgMF0sIFstMSwgLTEsIDBdLCBbMSwgMCwgMV0sIFstMSwgMCwgMV0sIFsxLCAwLCAtMV0sIFstMSwgMCwgLTFdLCBbMCwgMSwgMV0sIFswLCAtMSwgLTFdLCBbMCwgMSwgLTFdLCBbMCwgLTEsIC0xXVxyXG4gICAgXTtcclxuICAgICNzYW1wbGU6IChfeDogbnVtYmVyLCBfeTogbnVtYmVyLCBfejogbnVtYmVyKSA9PiBudW1iZXIgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9yYW5kb206IEZ1bmN0aW9uID0gTWF0aC5yYW5kb20pIHtcclxuICAgICAgc3VwZXIoX3JhbmRvbSk7XHJcblxyXG4gICAgICB0aGlzLiNzYW1wbGUgPSAoX3g6IG51bWJlciwgX3k6IG51bWJlciwgX3o6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIC8vIFNrZXcgdGhlIGlucHV0IHNwYWNlIHRvIGRldGVybWluZSB3aGljaCBzaW1wbGV4IGNlbGwgd2UncmUgaW5cclxuICAgICAgICBjb25zdCBzOiBudW1iZXIgPSAoX3ggKyBfeSArIF96KSAvIDMuMDsgLy8gVmVyeSBuaWNlIGFuZCBzaW1wbGUgc2tldyBmYWN0b3IgZm9yIDNEXHJcbiAgICAgICAgY29uc3QgaTogbnVtYmVyID0gTWF0aC5mbG9vcihfeCArIHMpO1xyXG4gICAgICAgIGNvbnN0IGo6IG51bWJlciA9IE1hdGguZmxvb3IoX3kgKyBzKTtcclxuICAgICAgICBjb25zdCBrOiBudW1iZXIgPSBNYXRoLmZsb29yKF96ICsgcyk7XHJcbiAgICAgICAgY29uc3QgdDogbnVtYmVyID0gKGkgKyBqICsgaykgKiBOb2lzZTMub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IFgwOiBudW1iZXIgPSBpIC0gdDsgLy8gVW5za2V3IHRoZSBjZWxsIG9yaWdpbiBiYWNrIHRvICh4LHkseikgc3BhY2VcclxuICAgICAgICBjb25zdCBZMDogbnVtYmVyID0gaiAtIHQ7XHJcbiAgICAgICAgY29uc3QgWjA6IG51bWJlciA9IGsgLSB0O1xyXG4gICAgICAgIGNvbnN0IHgwOiBudW1iZXIgPSBfeCAtIFgwOyAvLyBUaGUgeCx5LHogZGlzdGFuY2VzIGZyb20gdGhlIGNlbGwgb3JpZ2luXHJcbiAgICAgICAgY29uc3QgeTA6IG51bWJlciA9IF95IC0gWTA7XHJcbiAgICAgICAgY29uc3QgejA6IG51bWJlciA9IF96IC0gWjA7XHJcblxyXG4gICAgICAgIC8vIERldGVyaW5lIHdoaWNoIHNpbXBsZXggd2UgYXJlIGluXHJcbiAgICAgICAgbGV0IGkxOiBudW1iZXIsIGoxOiBudW1iZXIsIGsxOiBudW1iZXIgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGosaykgY29vcmRzXHJcbiAgICAgICAgICA7XHJcbiAgICAgICAgbGV0IGkyOiBudW1iZXIsIGoyOiBudW1iZXIsIGsyOiBudW1iZXIgLy8gT2Zmc2V0cyBmb3IgdGhpcmQgY29ybmVyIG9mIHNpbXBsZXggaW4gKGksaixrKSBjb29yZHNcclxuICAgICAgICAgIDtcclxuICAgICAgICBpZiAoeDAgPj0geTApIHtcclxuICAgICAgICAgIGlmICh5MCA+PSB6MCkge1xyXG4gICAgICAgICAgICBpMSA9IGkyID0gajIgPSAxO1xyXG4gICAgICAgICAgICBqMSA9IGsxID0gazIgPSAwO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICh4MCA+PSB6MCkge1xyXG4gICAgICAgICAgICBpMSA9IGkyID0gazIgPSAxO1xyXG4gICAgICAgICAgICBqMSA9IGsxID0gajIgPSAwO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgazEgPSBpMiA9IGsyID0gMTtcclxuICAgICAgICAgICAgaTEgPSBqMSA9IGoyID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHkwIDwgejApIHtcclxuICAgICAgICAgICAgazEgPSBqMiA9IGsyID0gMTtcclxuICAgICAgICAgICAgaTEgPSBqMSA9IGkyID0gMDtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoeDAgPCB6MCkge1xyXG4gICAgICAgICAgICBqMSA9IGoyID0gazIgPSAxO1xyXG4gICAgICAgICAgICBpMSA9IGsxID0gaTIgPSAwO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgajEgPSBpMiA9IGoyID0gMTtcclxuICAgICAgICAgICAgaTEgPSBrMSA9IGsyID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHgxOiBudW1iZXIgPSB4MCAtIGkxICsgTm9pc2UzLm9mZnNldDsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIGNvcm5lciBpbiAoeCx5LHopIGNvb3Jkc1xyXG4gICAgICAgIGNvbnN0IHkxOiBudW1iZXIgPSB5MCAtIGoxICsgTm9pc2UzLm9mZnNldDtcclxuICAgICAgICBjb25zdCB6MTogbnVtYmVyID0gejAgLSBrMSArIE5vaXNlMy5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeDI6IG51bWJlciA9IHgwIC0gaTIgKyAyLjAgKiBOb2lzZTMub2Zmc2V0OyAvLyBPZmZzZXRzIGZvciB0aGlyZCBjb3JuZXIgaW4gKHgseSx6KSBjb29yZHNcclxuICAgICAgICBjb25zdCB5MjogbnVtYmVyID0geTAgLSBqMiArIDIuMCAqIE5vaXNlMy5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgejI6IG51bWJlciA9IHowIC0gazIgKyAyLjAgKiBOb2lzZTMub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHgzOiBudW1iZXIgPSB4MCAtIDEuMCArIDMuMCAqIE5vaXNlMy5vZmZzZXQ7IC8vIE9mZnNldHMgZm9yIGxhc3QgY29ybmVyIGluICh4LHkseikgY29vcmRzXHJcbiAgICAgICAgY29uc3QgeTM6IG51bWJlciA9IHkwIC0gMS4wICsgMy4wICogTm9pc2UzLm9mZnNldDtcclxuICAgICAgICBjb25zdCB6MzogbnVtYmVyID0gejAgLSAxLjAgKyAzLjAgKiBOb2lzZTMub2Zmc2V0O1xyXG5cclxuICAgICAgICAvLyBXb3JrIDpudW1iZXJ1dCB0aGUgaGFzaGVkIGdyYWRpZW50IGluZGljZXMgb2YgdGhlIGZvdXIgc2ltcGxleCBjb3JuZXJzXHJcbiAgICAgICAgY29uc3QgaWk6IG51bWJlciA9IGkgJiAyNTU7XHJcbiAgICAgICAgY29uc3Qgamo6IG51bWJlciA9IGogJiAyNTU7XHJcbiAgICAgICAgY29uc3Qga2s6IG51bWJlciA9IGsgJiAyNTU7XHJcbiAgICAgICAgY29uc3QgZzA6IG51bWJlcltdID0gTm9pc2UzLmdyYWRpZW50W3RoaXMucGVybU1vZDEyW2lpICsgdGhpcy5wZXJtW2pqICsgdGhpcy5wZXJtW2trXV1dXTtcclxuICAgICAgICBjb25zdCBnMTogbnVtYmVyW10gPSBOb2lzZTMuZ3JhZGllbnRbdGhpcy5wZXJtTW9kMTJbaWkgKyBpMSArIHRoaXMucGVybVtqaiArIGoxICsgdGhpcy5wZXJtW2trICsgazFdXV1dO1xyXG4gICAgICAgIGNvbnN0IGcyOiBudW1iZXJbXSA9IE5vaXNlMy5ncmFkaWVudFt0aGlzLnBlcm1Nb2QxMltpaSArIGkyICsgdGhpcy5wZXJtW2pqICsgajIgKyB0aGlzLnBlcm1ba2sgKyBrMl1dXV07XHJcbiAgICAgICAgY29uc3QgZzM6IG51bWJlcltdID0gTm9pc2UzLmdyYWRpZW50W3RoaXMucGVybU1vZDEyW2lpICsgMSArIHRoaXMucGVybVtqaiArIDEgKyB0aGlzLnBlcm1ba2sgKyAxXV1dXTtcclxuXHJcbiAgICAgICAgLy8gQ2FsY3U6bnVtYmVyYXRlIHRoZSBjb250cmlidXRpb24gZnJvbSB0aGUgZm91ciBjb3JuZXJzXHJcbiAgICAgICAgY29uc3QgdDA6IG51bWJlciA9IDAuNSAtIHgwICogeDAgLSB5MCAqIHkwIC0gejAgKiB6MDtcclxuICAgICAgICBjb25zdCBuMDogbnVtYmVyID0gdDAgPCAwXHJcbiAgICAgICAgICA/IDAuMFxyXG4gICAgICAgICAgOiBNYXRoLnBvdyh0MCwgNCkgKiAoZzBbMF0gKiB4MCArIGcwWzFdICogeTAgKyBnMFsyXSAqIHowKTtcclxuICAgICAgICBjb25zdCB0MTogbnVtYmVyID0gMC41IC0geDEgKiB4MSAtIHkxICogeTEgLSB6MSAqIHoxO1xyXG4gICAgICAgIGNvbnN0IG4xOiBudW1iZXIgPSB0MSA8IDBcclxuICAgICAgICAgID8gMC4wXHJcbiAgICAgICAgICA6IE1hdGgucG93KHQxLCA0KSAqIChnMVswXSAqIHgxICsgZzFbMV0gKiB5MSArIGcxWzJdICogejEpO1xyXG4gICAgICAgIGNvbnN0IHQyOiBudW1iZXIgPSAwLjUgLSB4MiAqIHgyIC0geTIgKiB5MiAtIHoyICogejI7XHJcbiAgICAgICAgY29uc3QgbjI6IG51bWJlciA9IHQyIDwgMFxyXG4gICAgICAgICAgPyAwLjBcclxuICAgICAgICAgIDogTWF0aC5wb3codDIsIDQpICogKGcyWzBdICogeDIgKyBnMlsxXSAqIHkyICsgZzJbMl0gKiB6Mik7XHJcbiAgICAgICAgY29uc3QgdDM6IG51bWJlciA9IDAuNSAtIHgzICogeDMgLSB5MyAqIHkzIC0gejMgKiB6MztcclxuICAgICAgICBjb25zdCBuMzogbnVtYmVyID0gdDMgPCAwXHJcbiAgICAgICAgICA/IDAuMFxyXG4gICAgICAgICAgOiBNYXRoLnBvdyh0MywgNCkgKiAoZzNbMF0gKiB4MyArIGczWzFdICogeTMgKyBnM1syXSAqIHozKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGNvbnRyaWJ1dGlvbnMgZnJvbSBlYWNoIGNvcm5lciB0byBnZXQgdGhlIGZpbmFsIG5vaXNlIHZhbHVlLlxyXG4gICAgICAgIC8vIFRoZSByZXN1bHQgaXMgc2NhbGVkIHRvIHN0YXkganVzdCBpbnNpZGUgWy0xLDFdXHJcbiAgICAgICAgcmV0dXJuIDk0LjY4NDkzMTUwNjgxOTcyICogKG4wICsgbjEgKyBuMiArIG4zKTtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2FtcGxlID0gKF94OiBudW1iZXIsIF95OiBudW1iZXIsIF96OiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc2FtcGxlKF94LCBfeSwgX3opO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8qKlxyXG4gKiBUaGlzIGlzIGFuIGFkYXB0aW9uIG9mIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2Zhc3Qtc2ltcGxleC1ub2lzZVxyXG4gKiBkb25lIGJ5IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAqXHJcbiAqIEJhc2VkIG9uIGV4YW1wbGUgY29kZSBieSBTdGVmYW4gR3VzdGF2c29uIChzdGVndUBpdG4ubGl1LnNlKS5cclxuICogT3B0aW1pc2F0aW9ucyBieSBQZXRlciBFYXN0bWFuIChwZWFzdG1hbkBkcml6emxlLnN0YW5mb3JkLmVkdSkuXHJcbiAqIEJldHRlciByYW5rIG9yZGVyaW5nIG1ldGhvZCBieSBTdGVmYW4gR3VzdGF2c29uIGluIDIwMTIuXHJcbiAqXHJcbiAqIFRoaXMgY29kZSB3YXMgcGxhY2VkIGluIHRoZSBwdWJsaWMgZG9tYWluIGJ5IGl0cyBvcmlnaW5hbCBhdXRob3IsXHJcbiAqIFN0ZWZhbiBHdXN0YXZzb24uIFlvdSBtYXkgdXNlIGl0IGFzIHlvdSBzZWUgZml0LCBidXRcclxuICogYXR0cmlidXRpb24gaXMgYXBwcmVjaWF0ZWQuXHJcbiAqL1xyXG5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLy8gVE9ETzogVGVzdFxyXG4gIGV4cG9ydCBjbGFzcyBOb2lzZTQgZXh0ZW5kcyBOb2lzZSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBvZmZzZXQ6IG51bWJlciA9ICg1LjAgLSBNYXRoLnNxcnQoNS4wKSkgLyAyMC4wO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ3JhZGllbnQ6IG51bWJlcltdW10gPSBbWzAsIDEsIDEsIDFdLCBbMCwgMSwgMSwgLTFdLCBbMCwgMSwgLTEsIDFdLCBbMCwgMSwgLTEsIC0xXSwgWzAsIC0xLCAxLCAxXSwgWzAsIC0xLCAxLCAtMV0sIFswLCAtMSwgLTEsIDFdLCBbMCwgLTEsIC0xLCAtMV0sIFsxLCAwLCAxLCAxXSwgWzEsIDAsIDEsIC0xXSwgWzEsIDAsIC0xLCAxXSwgWzEsIDAsIC0xLCAtMV0sIFstMSwgMCwgMSwgMV0sIFstMSwgMCwgMSwgLTFdLCBbLTEsIDAsIC0xLCAxXSwgWy0xLCAwLCAtMSwgLTFdLCBbMSwgMSwgMCwgMV0sIFsxLCAxLCAwLCAtMV0sIFsxLCAtMSwgMCwgMV0sIFsxLCAtMSwgMCwgLTFdLCBbLTEsIDEsIDAsIDFdLCBbLTEsIDEsIDAsIC0xXSwgWy0xLCAtMSwgMCwgMV0sIFstMSwgLTEsIDAsIC0xXSwgWzEsIDEsIDEsIDBdLCBbMSwgMSwgLTEsIDBdLCBbMSwgLTEsIDEsIDBdLCBbMSwgLTEsIC0xLCAwXSwgWy0xLCAxLCAxLCAwXSwgWy0xLCAxLCAtMSwgMF0sIFstMSwgLTEsIDEsIDBdLCBbLTEsIC0xLCAtMSwgMF1dO1xyXG4gICAgI3NhbXBsZTogKF94OiBudW1iZXIsIF95OiBudW1iZXIsIF96OiBudW1iZXIsIF93OiBudW1iZXIpID0+IG51bWJlciA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX3JhbmRvbTogRnVuY3Rpb24gPSBNYXRoLnJhbmRvbSkge1xyXG4gICAgICBzdXBlcihfcmFuZG9tKVxyXG5cclxuICAgICAgdGhpcy4jc2FtcGxlID0gKHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIsIHc6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICAgICAgLy8gU2tldyB0aGUgKHgseSx6LHcpIHNwYWNlIHRvIGRldGVybWluZSB3aGljaCBjZWxsIG9mIDI0IHNpbXBsaWNlcyB3ZSdyZSBpblxyXG4gICAgICAgIGNvbnN0IHM6IG51bWJlciA9ICh4ICsgeSArIHogKyB3KSAqIChNYXRoLnNxcnQoNS4wKSAtIDEuMCkgLyA0LjA7IC8vIEZhY3RvciBmb3IgNEQgc2tld2luZ1xyXG4gICAgICAgIGNvbnN0IGk6IG51bWJlciA9IE1hdGguZmxvb3IoeCArIHMpO1xyXG4gICAgICAgIGNvbnN0IGo6IG51bWJlciA9IE1hdGguZmxvb3IoeSArIHMpO1xyXG4gICAgICAgIGNvbnN0IGs6IG51bWJlciA9IE1hdGguZmxvb3IoeiArIHMpO1xyXG4gICAgICAgIGNvbnN0IGw6IG51bWJlciA9IE1hdGguZmxvb3IodyArIHMpO1xyXG4gICAgICAgIGNvbnN0IHQ6IG51bWJlciA9IChpICsgaiArIGsgKyBsKSAqIE5vaXNlNC5vZmZzZXQ7IC8vIEZhY3RvciBmb3IgNEQgdW5za2V3aW5nXHJcbiAgICAgICAgY29uc3QgWDA6IG51bWJlciA9IGkgLSB0OyAvLyBVbnNrZXcgdGhlIGNlbGwgb3JpZ2luIGJhY2sgdG8gKHgseSx6LHcpIHNwYWNlXHJcbiAgICAgICAgY29uc3QgWTA6IG51bWJlciA9IGogLSB0O1xyXG4gICAgICAgIGNvbnN0IFowOiBudW1iZXIgPSBrIC0gdDtcclxuICAgICAgICBjb25zdCBXMDogbnVtYmVyID0gbCAtIHQ7XHJcbiAgICAgICAgY29uc3QgeDA6IG51bWJlciA9IHggLSBYMDsgLy8gVGhlIHgseSx6LHcgZGlzdGFuY2VzIGZyb20gdGhlIGNlbGwgb3JpZ2luXHJcbiAgICAgICAgY29uc3QgeTA6IG51bWJlciA9IHkgLSBZMDtcclxuICAgICAgICBjb25zdCB6MDogbnVtYmVyID0geiAtIFowO1xyXG4gICAgICAgIGNvbnN0IHcwOiBudW1iZXIgPSB3IC0gVzA7XHJcblxyXG4gICAgICAgIC8vIFRvIGZpbmQgb3V0IHdoaWNoIG9mIHRoZSAyNCBwb3NzaWJsZSBzaW1wbGljZXMgd2UncmUgaW4sIHdlIG5lZWQgdG8gZGV0ZXJtaW5lIHRoZVxyXG4gICAgICAgIC8vIG1hZ25pdHVkZSBvcmRlcmluZyBvZiB4MCwgeTAsIHowIGFuZCB3MC4gU2l4IHBhaXItd2lzZSBjb21wYXJpc29ucyBhcmUgcGVyZm9ybWVkIGJldHdlZW5cclxuICAgICAgICAvLyBlYWNoIHBvc3NpYmxlIHBhaXIgb2YgdGhlIGZvdXIgY29vcmRpbmF0ZXMsIGFuZCB0aGUgcmVzdWx0cyBhcmUgdXNlZCB0byByYW5rIHRoZSBudW1iZXJzLlxyXG4gICAgICAgIGxldCByYW5reDogbnVtYmVyID0gMDtcclxuICAgICAgICBsZXQgcmFua3k6IG51bWJlciA9IDA7XHJcbiAgICAgICAgbGV0IHJhbmt6OiBudW1iZXIgPSAwO1xyXG4gICAgICAgIGxldCByYW5rdzogbnVtYmVyID0gMDtcclxuICAgICAgICBpZiAoeDAgPiB5MCkgcmFua3grKztcclxuICAgICAgICBlbHNlIHJhbmt5Kys7XHJcbiAgICAgICAgaWYgKHgwID4gejApIHJhbmt4Kys7XHJcbiAgICAgICAgZWxzZSByYW5reisrO1xyXG4gICAgICAgIGlmICh4MCA+IHcwKSByYW5reCsrO1xyXG4gICAgICAgIGVsc2UgcmFua3crKztcclxuICAgICAgICBpZiAoeTAgPiB6MCkgcmFua3krKztcclxuICAgICAgICBlbHNlIHJhbmt6Kys7XHJcbiAgICAgICAgaWYgKHkwID4gdzApIHJhbmt5Kys7XHJcbiAgICAgICAgZWxzZSByYW5rdysrO1xyXG4gICAgICAgIGlmICh6MCA+IHcwKSByYW5reisrO1xyXG4gICAgICAgIGVsc2UgcmFua3crKztcclxuXHJcbiAgICAgICAgLy8gc2ltcGxleFtjXSBpcyBhIDQtdmVjdG9yIHdpdGggdGhlIG51bWJlcnMgMCwgMSwgMiBhbmQgMyBpbiBzb21lIG9yZGVyLlxyXG4gICAgICAgIC8vIE1hbnkgdmFsdWVzIG9mIGMgd2lsbCBuZXZlciBvY2N1ciwgc2luY2UgZS5nLiB4Pnk+ej53IG1ha2VzIHg8eiwgeTx3IGFuZCB4PHdcclxuICAgICAgICAvLyBpbXBvc3NpYmxlLiBPbmx5IHRoZSAyNCBpbmRpY2VzIHdoaWNoIGhhdmUgbm9uLXplcm8gZW50cmllcyBtYWtlIGFueSBzZW5zZS5cclxuICAgICAgICAvLyBXZSB1c2UgYSB0aHJlc2hvbGRpbmcgdG8gc2V0IHRoZSBjb29yZGluYXRlcyBpbiB0dXJuIGZyb20gdGhlIGxhcmdlc3QgbWFnbml0dWRlLlxyXG4gICAgICAgIC8vIFJhbmsgMyBkZW5vdGVzIHRoZSBsYXJnZXN0IGNvb3JkaW5hdGUuXHJcbiAgICAgICAgY29uc3QgaTE6IG51bWJlciA9IHJhbmt4ID49IDMgPyAxIDogMDtcclxuICAgICAgICBjb25zdCBqMTogbnVtYmVyID0gcmFua3kgPj0gMyA/IDEgOiAwO1xyXG4gICAgICAgIGNvbnN0IGsxOiBudW1iZXIgPSByYW5reiA+PSAzID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgbDE6IG51bWJlciA9IHJhbmt3ID49IDMgPyAxIDogMDtcclxuICAgICAgICAvLyBSYW5rIDogMiBkZW5vdGVzIHRoZSBzZWNvbmQgbGFyZ2VzdCBjb29yZGluYXRlLlxyXG4gICAgICAgIGNvbnN0IGkyOiBudW1iZXIgPSByYW5reCA+PSAyID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgajI6IG51bWJlciA9IHJhbmt5ID49IDIgPyAxIDogMDtcclxuICAgICAgICBjb25zdCBrMjogbnVtYmVyID0gcmFua3ogPj0gMiA/IDEgOiAwO1xyXG4gICAgICAgIGNvbnN0IGwyOiBudW1iZXIgPSByYW5rdyA+PSAyID8gMSA6IDA7XHJcbiAgICAgICAgLy8gUmFuayA6IDEgZGVub3RlcyB0aGUgc2Vjb25kIHNtYWxsZXN0IGNvb3JkaW5hdGUuXHJcbiAgICAgICAgY29uc3QgaTM6IG51bWJlciA9IHJhbmt4ID49IDEgPyAxIDogMDtcclxuICAgICAgICBjb25zdCBqMzogbnVtYmVyID0gcmFua3kgPj0gMSA/IDEgOiAwO1xyXG4gICAgICAgIGNvbnN0IGszOiBudW1iZXIgPSByYW5reiA+PSAxID8gMSA6IDA7XHJcbiAgICAgICAgY29uc3QgbDM6IG51bWJlciA9IHJhbmt3ID49IDEgPyAxIDogMDtcclxuXHJcbiAgICAgICAgLy8gVGhlIGZpZnRoIGNvcm5lciBoYXMgYWxsIGNvb3JkaW5hdGUgb2Zmc2V0cyA9IDEsIHNvIG5vIG5lZWQgdG8gY29tcHV0ZSB0aGF0LlxyXG4gICAgICAgIGNvbnN0IHgxOiBudW1iZXIgPSB4MCAtIGkxICsgTm9pc2U0Lm9mZnNldDsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIGNvcm5lciBpbiAoeCx5LHosdykgY29vcmRzXHJcbiAgICAgICAgY29uc3QgeTE6IG51bWJlciA9IHkwIC0gajEgKyBOb2lzZTQub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHoxOiBudW1iZXIgPSB6MCAtIGsxICsgTm9pc2U0Lm9mZnNldDtcclxuICAgICAgICBjb25zdCB3MTogbnVtYmVyID0gdzAgLSBsMSArIE5vaXNlNC5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeDI6IG51bWJlciA9IHgwIC0gaTIgKyAyLjAgKiBOb2lzZTQub2Zmc2V0OyAvLyBPZmZzZXRzIGZvciB0aGlyZCBjb3JuZXIgaW4gKHgseSx6LHcpIGNvb3Jkc1xyXG4gICAgICAgIGNvbnN0IHkyOiBudW1iZXIgPSB5MCAtIGoyICsgMi4wICogTm9pc2U0Lm9mZnNldDtcclxuICAgICAgICBjb25zdCB6MjogbnVtYmVyID0gejAgLSBrMiArIDIuMCAqIE5vaXNlNC5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgdzI6IG51bWJlciA9IHcwIC0gbDIgKyAyLjAgKiBOb2lzZTQub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHgzOiBudW1iZXIgPSB4MCAtIGkzICsgMy4wICogTm9pc2U0Lm9mZnNldDsgLy8gT2Zmc2V0cyBmb3IgZm91cnRoIGNvcm5lciBpbiAoeCx5LHosdykgY29vcmRzXHJcbiAgICAgICAgY29uc3QgeTM6IG51bWJlciA9IHkwIC0gajMgKyAzLjAgKiBOb2lzZTQub2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IHozOiBudW1iZXIgPSB6MCAtIGszICsgMy4wICogTm9pc2U0Lm9mZnNldDtcclxuICAgICAgICBjb25zdCB3MzogbnVtYmVyID0gdzAgLSBsMyArIDMuMCAqIE5vaXNlNC5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgeDQ6IG51bWJlciA9IHgwIC0gMS4wICsgNC4wICogTm9pc2U0Lm9mZnNldDsgLy8gT2Zmc2V0cyBmb3IgbGFzdCBjb3JuZXIgaW4gKHgseSx6LHcpIGNvb3Jkc1xyXG4gICAgICAgIGNvbnN0IHk0OiBudW1iZXIgPSB5MCAtIDEuMCArIDQuMCAqIE5vaXNlNC5vZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgejQ6IG51bWJlciA9IHowIC0gMS4wICsgNC4wICogTm9pc2U0Lm9mZnNldDtcclxuICAgICAgICBjb25zdCB3NDogbnVtYmVyID0gdzAgLSAxLjAgKyA0LjAgKiBOb2lzZTQub2Zmc2V0O1xyXG5cclxuICAgICAgICAvLyBXb3JrIG91dCB0aGUgaGFzaGVkIGdyYWRpZW50IGluZGljZXMgb2YgdGhlIGZpdmUgc2ltcGxleCBjb3JuZXJzXHJcbiAgICAgICAgY29uc3QgaWk6IG51bWJlciA9IGkgJiAyNTU7XHJcbiAgICAgICAgY29uc3Qgamo6IG51bWJlciA9IGogJiAyNTU7XHJcbiAgICAgICAgY29uc3Qga2s6IG51bWJlciA9IGsgJiAyNTU7XHJcbiAgICAgICAgY29uc3QgbGw6IG51bWJlciA9IGwgJiAyNTU7XHJcbiAgICAgICAgY29uc3QgZzA6IG51bWJlcltdID0gTm9pc2U0LmdyYWRpZW50W1xyXG4gICAgICAgICAgdGhpcy5wZXJtW2lpICsgdGhpcy5wZXJtW2pqICsgdGhpcy5wZXJtW2trICsgdGhpcy5wZXJtW2xsXV1dXSAlXHJcbiAgICAgICAgICAzMlxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgZzE6IG51bWJlcltdID0gTm9pc2U0LmdyYWRpZW50W1xyXG4gICAgICAgICAgdGhpcy5wZXJtW1xyXG4gICAgICAgICAgaWkgKyBpMSArIHRoaXMucGVybVtqaiArIGoxICsgdGhpcy5wZXJtW2trICsgazEgKyB0aGlzLnBlcm1bbGwgKyBsMV1dXVxyXG4gICAgICAgICAgXSAlIDMyXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBnMjogbnVtYmVyW10gPSBOb2lzZTQuZ3JhZGllbnRbXHJcbiAgICAgICAgICB0aGlzLnBlcm1bXHJcbiAgICAgICAgICBpaSArIGkyICsgdGhpcy5wZXJtW2pqICsgajIgKyB0aGlzLnBlcm1ba2sgKyBrMiArIHRoaXMucGVybVtsbCArIGwyXV1dXHJcbiAgICAgICAgICBdICUgMzJcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGczOiBudW1iZXJbXSA9IE5vaXNlNC5ncmFkaWVudFtcclxuICAgICAgICAgIHRoaXMucGVybVtcclxuICAgICAgICAgIGlpICsgaTMgKyB0aGlzLnBlcm1bamogKyBqMyArIHRoaXMucGVybVtrayArIGszICsgdGhpcy5wZXJtW2xsICsgbDNdXV1cclxuICAgICAgICAgIF0gJSAzMlxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgZzQ6IG51bWJlcltdID0gTm9pc2U0LmdyYWRpZW50W1xyXG4gICAgICAgICAgdGhpcy5wZXJtW1xyXG4gICAgICAgICAgaWkgKyAxICsgdGhpcy5wZXJtW2pqICsgMSArIHRoaXMucGVybVtrayArIDEgKyB0aGlzLnBlcm1bbGwgKyAxXV1dXHJcbiAgICAgICAgICBdICUgMzJcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGNvbnRyaWJ1dGlvbiBmcm9tIHRoZSBmaXZlIGNvcm5lcnNcclxuICAgICAgICBjb25zdCB0MDogbnVtYmVyID0gMC41IC0geDAgKiB4MCAtIHkwICogeTAgLSB6MCAqIHowIC0gdzAgKiB3MDtcclxuICAgICAgICBjb25zdCBuMDogbnVtYmVyID0gdDAgPCAwXHJcbiAgICAgICAgICA/IDAuMFxyXG4gICAgICAgICAgOiBNYXRoLnBvdyh0MCwgNCkgKiAoZzBbMF0gKiB4MCArIGcwWzFdICogeTAgKyBnMFsyXSAqIHowICsgZzBbM10gKiB3MCk7XHJcbiAgICAgICAgY29uc3QgdDE6IG51bWJlciA9IDAuNSAtIHgxICogeDEgLSB5MSAqIHkxIC0gejEgKiB6MSAtIHcxICogdzE7XHJcbiAgICAgICAgY29uc3QgbjE6IG51bWJlciA9IHQxIDwgMFxyXG4gICAgICAgICAgPyAwLjBcclxuICAgICAgICAgIDogTWF0aC5wb3codDEsIDQpICogKGcxWzBdICogeDEgKyBnMVsxXSAqIHkxICsgZzFbMl0gKiB6MSArIGcxWzNdICogdzEpO1xyXG4gICAgICAgIGNvbnN0IHQyOiBudW1iZXIgPSAwLjUgLSB4MiAqIHgyIC0geTIgKiB5MiAtIHoyICogejIgLSB3MiAqIHcyO1xyXG4gICAgICAgIGNvbnN0IG4yOiBudW1iZXIgPSB0MiA8IDBcclxuICAgICAgICAgID8gMC4wXHJcbiAgICAgICAgICA6IE1hdGgucG93KHQyLCA0KSAqIChnMlswXSAqIHgyICsgZzJbMV0gKiB5MiArIGcyWzJdICogejIgKyBnMlszXSAqIHcyKTtcclxuICAgICAgICBjb25zdCB0MzogbnVtYmVyID0gMC41IC0geDMgKiB4MyAtIHkzICogeTMgLSB6MyAqIHozIC0gdzMgKiB3MztcclxuICAgICAgICBjb25zdCBuMzogbnVtYmVyID0gdDMgPCAwXHJcbiAgICAgICAgICA/IDAuMFxyXG4gICAgICAgICAgOiBNYXRoLnBvdyh0MywgNCkgKiAoZzNbMF0gKiB4MyArIGczWzFdICogeTMgKyBnM1syXSAqIHozICsgZzNbM10gKiB3Myk7XHJcbiAgICAgICAgY29uc3QgdDQ6IG51bWJlciA9IDAuNSAtIHg0ICogeDQgLSB5NCAqIHk0IC0gejQgKiB6NCAtIHc0ICogdzQ7XHJcbiAgICAgICAgY29uc3QgbjQ6IG51bWJlciA9IHQ0IDwgMFxyXG4gICAgICAgICAgPyAwLjBcclxuICAgICAgICAgIDogTWF0aC5wb3codDQsIDQpICogKGc0WzBdICogeDQgKyBnNFsxXSAqIHk0ICsgZzRbMl0gKiB6NCArIGc0WzNdICogdzQpO1xyXG5cclxuICAgICAgICAvLyBTdW0gdXAgYW5kIHNjYWxlIHRoZSByZXN1bHQgdG8gY292ZXIgdGhlIHJhbmdlIFstMSwxXVxyXG4gICAgICAgIHJldHVybiA3Mi4zNzg1NTc2NTE1MzY2NSAqIChuMCArIG4xICsgbjIgKyBuMyArIG40KTtcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2FtcGxlID0gKF94OiBudW1iZXIsIF95OiBudW1iZXIsIF96OiBudW1iZXIsIF93OiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc2FtcGxlKF94LCBfeSwgX3osIF93KTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICogU3RvcmluZyBhbmQgbWFuaXB1bGF0aW5nIHJvdGF0aW9ucyBpbiB0aGUgZm9ybSBvZiBxdWF0ZXJuaW9ucy5cclxuICAgICogQ29uc3RydWN0ZWQgb3V0IG9mIHRoZSA0IGNvbXBvbmVudHM6ICh4LCB5LCB6LCB3KS4gTWF0aGVtYXRpY2FsIG5vdGF0aW9uOiB3ICsgeGkgKyB5aiArIHprLlxyXG4gICAgKiBBIFF1YXRlcm5pb24gY2FuIGJlIGRlc2NyaWJlZCB3aXRoIGFuIGF4aXMgYW5kIGFuZ2xlOiAoeCwgeSwgeikgPSBzaW4oYW5nbGUvMikqYXhpczsgdyA9IGNvcyhhbmdsZS8yKS5cclxuICAgICogcm9sbDogeCwgcGl0Y2g6IHksIHlhdzogei4gTm90ZSB0aGF0IG9wZXJhdGlvbnMgYXJlIGFkYXB0ZWQgdG8gd29yayB3aXRoIHZlY3RvcnMgd2hlcmUgeSBpcyB1cCBhbmQgeiBpcyBmb3J3YXJkLlxyXG4gICAgKiBAYXV0aG9ycyBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyMyB8IE1hcmtvIEZlaHJlbmJhY2gsIEhGVSwgMjAyMCB8IEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyM1xyXG4gICAgKi9cclxuICBleHBvcnQgY2xhc3MgUXVhdGVybmlvbiBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUsIFJlY3ljYWJsZSB7XHJcbiAgICBwcml2YXRlIGRhdGE6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7IC8vIFRoZSBkYXRhIG9mIHRoZSBxdWF0ZXJuaW9uICh4LCB5LCB6LCB3KS5cclxuICAgIHByaXZhdGUgbXV0YXRvcjogTXV0YXRvciA9IG51bGw7IC8vIHByZXBhcmVkIGZvciBvcHRpbWl6YXRpb24sIGtlZXAgbXV0YXRvciB0byByZWR1Y2UgcmVkdW5kYW50IGNhbGN1bGF0aW9uIGFuZCBmb3IgY29tcGFyaXNvbi4gU2V0IHRvIG51bGwgd2hlbiBkYXRhIGNoYW5nZXMhXHJcbiAgICAjZXVsZXJBbmdsZXM6IFZlY3RvcjMgPSBudWxsOyAvLyBldWxlciBhbmdsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIHF1YXRlcm5pb24gaW4gZGVncmVlcy5cclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX3g6IG51bWJlciA9IDAsIF95OiBudW1iZXIgPSAwLCBfejogbnVtYmVyID0gMCwgX3c6IG51bWJlciA9IDEpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5kYXRhLnNldChbX3gsIF95LCBfeiwgX3ddKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gU1RBVElDU1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSBhIG5ldyBpZGVudGl0eSBxdWF0ZXJuaW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgSURFTlRJVFkoKTogUXVhdGVybmlvbiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdDogUXVhdGVybmlvbiA9IFJlY3ljbGVyLmdldChRdWF0ZXJuaW9uKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgcXVhdGVybmlvbiBmcm9tIHRoZSBldWxlciBhbmdsZXMgZ2l2ZW5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBGUk9NX0VVTEVSX0FOR0xFUyhfZXVsZXJBbmdsZXM6IFZlY3RvcjMsIF9vcmRlcjogc3RyaW5nID0gXCJaWVhcIik6IFF1YXRlcm5pb24ge1xyXG4gICAgICBjb25zdCByZXN1bHQ6IFF1YXRlcm5pb24gPSBSZWN5Y2xlci5nZXQoUXVhdGVybmlvbik7XHJcbiAgICAgIHJlc3VsdC5ldWxlckFuZ2xlcyA9IF9ldWxlckFuZ2xlcztcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIGFuZCByZXR1cm5zIHRoZSBwcm9kdWN0IG9mIHR3byBwYXNzZWQgcXVhdGVybmlvbnMuXHJcbiAgICAgKiBAcGFyYW0gX210eExlZnQgVGhlIG1hdHJpeCB0byBtdWx0aXBseS5cclxuICAgICAqIEBwYXJhbSBfbXR4UmlnaHQgVGhlIG1hdHJpeCB0byBtdWx0aXBseSBieS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBNVUxUSVBMSUNBVElPTihfcUxlZnQ6IFF1YXRlcm5pb24sIF9xUmlnaHQ6IFF1YXRlcm5pb24pOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgY29uc3QgcmVzdWx0OiBRdWF0ZXJuaW9uID0gX3FMZWZ0LmNsb25lO1xyXG4gICAgICByZXN1bHQubXVsdGlwbHkoX3FSaWdodCk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhbmQgcmV0dXJucyB0aGUgaW52ZXJzZSBvZiBhIHBhc3NlZCBxdWF0ZXJuaW9uLlxyXG4gICAgICogQHBhcmFtIF9tdHggVGhlIHF1YXRlcm5pb24gdG8gY29tcHV0ZSB0aGUgaW52ZXJzZSBvZi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBJTlZFUlNJT04oX3E6IFF1YXRlcm5pb24pOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgY29uc3QgcmVzdWx0OiBRdWF0ZXJuaW9uID0gX3EuY2xvbmU7XHJcbiAgICAgIHJlc3VsdC5pbnZlcnNlKCk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb21wdXRlcyBhbmQgcmV0dXJucyB0aGUgY29uanVnYXRlIG9mIGEgcGFzc2VkIHF1YXRlcm5pb24uXHJcbiAgICAgKiBAcGFyYW0gX210eCBUaGUgcXVhdGVybmlvbiB0byBjb21wdXRlIHRoZSBjb25qdWdhdGUgb2YuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgQ09OSlVHQVRJT04oX3E6IFF1YXRlcm5pb24pOiBRdWF0ZXJuaW9uIHtcclxuICAgICAgY29uc3QgcmVzdWx0OiBRdWF0ZXJuaW9uID0gX3EuY2xvbmU7XHJcbiAgICAgIHJlc3VsdC5jb25qdWdhdGUoKTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEV4cGVyaW1lbnRhbDogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIHZlY3RvciB0aHJvdWdoIHRyYW5zZm9ybWF0aW9uIG9mIHRoZSBnaXZlbiB2ZWN0b3IgYnkgdGhlIGdpdmVuIHF1YXRlcm5pb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBUUkFOU0ZPUk1fVkVDVE9SKF92OiBWZWN0b3IzLCBfcTogUXVhdGVybmlvbik6IFZlY3RvcjMge1xyXG4gICAgICAvLyBjaGFuZ2VkIGF4aXMgb3JkZXIgbWlnaHQgbm90IGJlIG5lY2Vzc2FyeSwgbmVlZHMgdGVzdGluZ1xyXG4gICAgICBjb25zdCB2OiBRdWF0ZXJuaW9uID0gUmVjeWNsZXIuZ2V0KFF1YXRlcm5pb24pO1xyXG4gICAgICB2LnNldChbMCwgX3YueiwgX3YueCwgX3YueV0pO1xyXG4gICAgICB2Lm11bHRpcGx5KF9xLCB0cnVlKTtcclxuICAgICAgdi5tdWx0aXBseSh0aGlzLkNPTkpVR0FUSU9OKF9xKSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQ6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIHJlc3VsdC5zZXQodi5kYXRhWzJdLCB2LmRhdGFbM10sIHYuZGF0YVsxXSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHBlcmltZW50YWw6IENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIGEgTWF0cml4NHg0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUVVBVEVSTklPTl9UT19NQVRSSVgoX3E6IFF1YXRlcm5pb24pOiBNYXRyaXg0eDQge1xyXG4gICAgICBjb25zdCB4OiBudW1iZXIgPSBfcS5kYXRhWzBdLCB5OiBudW1iZXIgPSBfcS5kYXRhWzFdLCB6OiBudW1iZXIgPSBfcS5kYXRhWzJdLCB3OiBudW1iZXIgPSBfcS5kYXRhWzNdO1xyXG4gICAgICAvLyBGcm9tOiBodHRwczovL3d3dy5ldWNsaWRlYW5zcGFjZS5jb20vbWF0aHMvZ2VvbWV0cnkvcm90YXRpb25zL2NvbnZlcnNpb25zL3F1YXRlcm5pb25Ub01hdHJpeC9pbmRleC5odG1cclxuICAgICAgY29uc3QgeHg6IG51bWJlciA9IHggKiB4LCB4eTogbnVtYmVyID0geCAqIHksIHh6OiBudW1iZXIgPSB4ICogeiwgeHc6IG51bWJlciA9IHggKiB3O1xyXG4gICAgICBjb25zdCB5eTogbnVtYmVyID0geSAqIHksIHl6OiBudW1iZXIgPSB5ICogeiwgeXc6IG51bWJlciA9IHkgKiB3O1xyXG4gICAgICBjb25zdCB6ejogbnVtYmVyID0geiAqIHosIHp3OiBudW1iZXIgPSB6ICogdztcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdDogTWF0cml4NHg0ID0gUmVjeWNsZXIuZ2V0KE1hdHJpeDR4NCk7XHJcbiAgICAgIHJlc3VsdC5zZXQoW1xyXG4gICAgICAgIDEgLSAyICogKHl5ICsgenopLCAyICogKHh5IC0gencpLCAyICogKHh6ICsgeXcpLCAwLFxyXG4gICAgICAgIDIgKiAoeHkgKyB6dyksIDEgLSAyICogKHh4ICsgenopLCAyICogKHl6IC0geHcpLCAwLFxyXG4gICAgICAgIDIgKiAoeHogLSB5dyksIDIgKiAoeXogKyB4dyksIDEgLSAyICogKHh4ICsgeXkpLCAwLFxyXG4gICAgICAgIDAsIDAsIDAsIDFcclxuICAgICAgXSk7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZGF0YVswXTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgeSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5kYXRhWzFdO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCB6KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmRhdGFbMl07XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IHcoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZGF0YVszXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiByZXNldCBjYWNoZSB3aGVuIHNldHRpbmcgeCx5LHosdyA/XHJcbiAgICBwdWJsaWMgc2V0IHgoX3g6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmRhdGFbMF0gPSBfeDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgeShfeTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuZGF0YVsxXSA9IF95O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCB6KF96OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5kYXRhWzJdID0gX3o7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IHcoX3c6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmRhdGFbM10gPSBfdztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiBhIGNvcHkgb2YgdGhpc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGNsb25lKCk6IFF1YXRlcm5pb24ge1xyXG4gICAgICBsZXQgcmVzdWx0OiBRdWF0ZXJuaW9uID0gUmVjeWNsZXIuZ2V0KFF1YXRlcm5pb24pO1xyXG4gICAgICByZXN1bHQuc2V0KHRoaXMpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogLSBnZXQ6IHJldHVybiB0aGUgZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJvdGF0aW9uIGluIGRlZ3JlZXMuICBcclxuICAgICAqIC0gc2V0OiBzZXQgdGhlIGV1bGVyIGFuZ2xlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSByb3RhdGlvbiBpbiBkZWdyZWVzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGV1bGVyQW5nbGVzKCk6IFZlY3RvcjMge1xyXG4gICAgICBpZiAoIXRoaXMuI2V1bGVyQW5nbGVzKSB7XHJcbiAgICAgICAgdGhpcy4jZXVsZXJBbmdsZXMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcblxyXG4gICAgICAgIC8vIHJvbGwgKHgtYXhpcyByb3RhdGlvbilcclxuICAgICAgICBsZXQgc2lucmNvc3A6IG51bWJlciA9IDIgKiAodGhpcy53ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy56KTtcclxuICAgICAgICBsZXQgY29zcmNvc3A6IG51bWJlciA9IDEgLSAyICogKHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XHJcbiAgICAgICAgdGhpcy4jZXVsZXJBbmdsZXMueCA9IE1hdGguYXRhbjIoc2lucmNvc3AsIGNvc3Jjb3NwKTtcclxuXHJcbiAgICAgICAgLy8gcGl0Y2ggKHktYXhpcyByb3RhdGlvbilcclxuICAgICAgICBsZXQgc2lucDogbnVtYmVyID0gMiAqICh0aGlzLncgKiB0aGlzLnkgLSB0aGlzLnogKiB0aGlzLngpO1xyXG4gICAgICAgIGlmIChNYXRoLmFicyhzaW5wKSA+PSAxKVxyXG4gICAgICAgICAgdGhpcy4jZXVsZXJBbmdsZXMueSA9IHNpbnAgPCAwID8gLU1hdGguYWJzKE1hdGguUEkgLyAyKSA6IE1hdGguYWJzKE1hdGguUEkgLyAyKTsgLy8gdXNlIDkwIGRlZ3JlZXMgaWYgb3V0IG9mIHJhbmdlXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgdGhpcy4jZXVsZXJBbmdsZXMueSA9IE1hdGguYXNpbihzaW5wKTtcclxuXHJcbiAgICAgICAgLy8geWF3ICh6LWF4aXMgcm90YXRpb24pXHJcbiAgICAgICAgbGV0IHNpbnljb3NwOiBudW1iZXIgPSAyICogKHRoaXMudyAqIHRoaXMueiArIHRoaXMueCAqIHRoaXMueSk7XHJcbiAgICAgICAgbGV0IGNvc3ljb3NwOiBudW1iZXIgPSAxIC0gMiAqICh0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnopO1xyXG4gICAgICAgIHRoaXMuI2V1bGVyQW5nbGVzLnogPSBNYXRoLmF0YW4yKHNpbnljb3NwLCBjb3N5Y29zcCk7XHJcblxyXG4gICAgICAgIHRoaXMuI2V1bGVyQW5nbGVzLnNjYWxlKENhbGMucmFkMmRlZyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLiNldWxlckFuZ2xlcztcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHNldCBldWxlckFuZ2xlcyhfZXVsZXJBbmdsZXM6IFZlY3RvcjMpIHtcclxuICAgICAgX2V1bGVyQW5nbGVzLnNjYWxlKENhbGMuZGVnMnJhZCk7XHJcbiAgICAgIGNvbnN0IGNvc1g6IG51bWJlciA9IE1hdGguY29zKF9ldWxlckFuZ2xlcy54IC8gMik7XHJcbiAgICAgIGNvbnN0IGNvc1k6IG51bWJlciA9IE1hdGguY29zKF9ldWxlckFuZ2xlcy55IC8gMik7XHJcbiAgICAgIGNvbnN0IGNvc1o6IG51bWJlciA9IE1hdGguY29zKF9ldWxlckFuZ2xlcy56IC8gMik7XHJcbiAgICAgIGNvbnN0IHNpblg6IG51bWJlciA9IE1hdGguc2luKF9ldWxlckFuZ2xlcy54IC8gMik7XHJcbiAgICAgIGNvbnN0IHNpblk6IG51bWJlciA9IE1hdGguc2luKF9ldWxlckFuZ2xlcy55IC8gMik7XHJcbiAgICAgIGNvbnN0IHNpblo6IG51bWJlciA9IE1hdGguc2luKF9ldWxlckFuZ2xlcy56IC8gMik7XHJcblxyXG4gICAgICB0aGlzLnNldChbXHJcbiAgICAgICAgc2luWCAqIGNvc1kgKiBjb3NaIC0gY29zWCAqIHNpblkgKiBzaW5aLFxyXG4gICAgICAgIGNvc1ggKiBzaW5ZICogY29zWiArIHNpblggKiBjb3NZICogc2luWixcclxuICAgICAgICBjb3NYICogY29zWSAqIHNpblogLSBzaW5YICogc2luWSAqIGNvc1osXHJcbiAgICAgICAgY29zWCAqIGNvc1kgKiBjb3NaICsgc2luWCAqIHNpblkgKiBzaW5aXHJcbiAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBxdWF0ZXJuaW9uIHRvIHRoZSBpZGVudGl0eS1xdWF0ZXJuaW9uIGFuZCBjbGVhcnMgY2FjaGUuIFVzZWQgYnkgdGhlIHJlY3ljbGVyIHRvIHJlc2V0LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVjeWNsZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5kYXRhLnNldChbMCwgMCwgMCwgMV0pO1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0cyB0aGUgcXVhdGVybmlvbiB0byB0aGUgaWRlbnRpdHktcXVhdGVybmlvbiBhbmQgY2xlYXJzIGNhY2hlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucmVjeWNsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW52ZXJzZSB0aGlzIHF1YXRlcm5pb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIGludmVyc2UoKTogdm9pZCB7XHJcbiAgICAgIC8vIHF1YXRlcm5pb24gaXMgYXNzdW1lZCB0byBoYXZlIHVuaXQgbGVuZ3RoXHJcbiAgICAgIHRoaXMuY29uanVnYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25qdWdhdGUgdGhpcyBxdWF0ZXJuaW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25qdWdhdGUoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YVswXSAqPSAtMTtcclxuICAgICAgdGhpcy5kYXRhWzFdICo9IC0xO1xyXG4gICAgICB0aGlzLmRhdGFbMl0gKj0gLTE7XHJcbiAgICAgIHRoaXMucmVzZXRDYWNoZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTXVsdGlwbHkgdGhpcyBxdWF0ZXJuaW9uIHdpdGggdGhlIGdpdmVuIHF1YXRlcm5pb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIG11bHRpcGx5KF9vdGhlcjogUXVhdGVybmlvbiwgX2Zyb21MZWZ0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgY29uc3QgYTogUXVhdGVybmlvbiA9IF9mcm9tTGVmdCA/IF9vdGhlciA6IHRoaXM7XHJcbiAgICAgIGNvbnN0IGI6IFF1YXRlcm5pb24gPSBfZnJvbUxlZnQgPyB0aGlzIDogX290aGVyO1xyXG4gICAgICAvLyBmcm9tOiBodHRwOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9hbGdlYnJhL3JlYWxOb3JtZWRBbGdlYnJhL3F1YXRlcm5pb25zL2NvZGUvaW5kZXguaHRtXHJcbiAgICAgIGNvbnN0IGF4OiBudW1iZXIgPSBhLmRhdGFbMF07XHJcbiAgICAgIGNvbnN0IGF5OiBudW1iZXIgPSBhLmRhdGFbMV07XHJcbiAgICAgIGNvbnN0IGF6OiBudW1iZXIgPSBhLmRhdGFbMl07XHJcbiAgICAgIGNvbnN0IGF3OiBudW1iZXIgPSBhLmRhdGFbM107XHJcbiAgICAgIGNvbnN0IGJ4OiBudW1iZXIgPSBiLmRhdGFbMF07XHJcbiAgICAgIGNvbnN0IGJ5OiBudW1iZXIgPSBiLmRhdGFbMV07XHJcbiAgICAgIGNvbnN0IGJ6OiBudW1iZXIgPSBiLmRhdGFbMl07XHJcbiAgICAgIGNvbnN0IGJ3OiBudW1iZXIgPSBiLmRhdGFbM107XHJcblxyXG4gICAgICB0aGlzLnNldChbXHJcbiAgICAgICAgYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5ICsgYXcgKiBieCxcclxuICAgICAgICAtYXggKiBieiArIGF5ICogYncgKyBheiAqIGJ4ICsgYXcgKiBieSxcclxuICAgICAgICBheCAqIGJ5IC0gYXkgKiBieCArIGF6ICogYncgKyBhdyAqIGJ6LFxyXG4gICAgICAgIC1heCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYnogKyBhdyAqIGJ3XHJcbiAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZWxlbWVudHMgb2YgdGhpcyBxdWF0ZXJuaW9uIHRvIHRoZSB2YWx1ZXMgb2YgdGhlIGdpdmVuIHF1YXRlcm5pb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldChfcVRvOiBRdWF0ZXJuaW9uIHwgQXJyYXlMaWtlPG51bWJlcj4pOiB2b2lkIHtcclxuICAgICAgaWYgKF9xVG8gaW5zdGFuY2VvZiBRdWF0ZXJuaW9uKVxyXG4gICAgICAgIHRoaXMuZGF0YS5zZXQoX3FUby5kYXRhKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMuZGF0YS5zZXQoX3FUbyk7XHJcbiAgICAgIHRoaXMucmVzZXRDYWNoZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gYMaSLlF1YXRlcm5pb24oeDogJHt0aGlzLmRhdGFbMF19LCB5OiAke3RoaXMuZGF0YVsxXX0sIHo6ICR7dGhpcy5kYXRhWzJdfSwgdzogJHt0aGlzLmRhdGFbM119KWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gdGhlIGVsZW1lbnRzIG9mIHRoaXMgcXVhdGVybmlvbiBhcyBhIEZsb2F0MzJBcnJheVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0KCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgIC8vIFRPRE86IG9wdGltaXphdGlvbiwgaXQgc2hvdWxkblwidCBhbHdheXMgcmV0dXJuIGEgY29weSwgc2luY2UgdGhpcyBibG9hdHMgbWVtb3J5XHJcbiAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0TXV0YXRvcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHRoaXMubXV0YXRlKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGlmICghdGhpcy5tdXRhdG9yKVxyXG4gICAgICAgIHRoaXMubXV0YXRvciA9IHtcclxuICAgICAgICAgIHg6IHRoaXMuZGF0YVswXSwgeTogdGhpcy5kYXRhWzFdLCB6OiB0aGlzLmRhdGFbMl0sIHc6IHRoaXMuZGF0YVszXVxyXG4gICAgICAgIH07XHJcbiAgICAgIHJldHVybiB0aGlzLm11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICB0aGlzLmRhdGFbMF0gPSBfbXV0YXRvci54O1xyXG4gICAgICB0aGlzLmRhdGFbMV0gPSBfbXV0YXRvci55O1xyXG4gICAgICB0aGlzLmRhdGFbMl0gPSBfbXV0YXRvci56O1xyXG4gICAgICB0aGlzLmRhdGFbM10gPSBfbXV0YXRvci53O1xyXG4gICAgICB0aGlzLnJlc2V0Q2FjaGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgey8qKiAqLyB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNldENhY2hlKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNldWxlckFuZ2xlcyA9IG51bGw7XHJcbiAgICAgIHRoaXMubXV0YXRvciA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQ2xhc3MgZm9yIGNyZWF0aW5nIHJhbmRvbSB2YWx1ZXMsIHN1cHBvcnRpbmcgSmF2YXNjcmlwdCdzIE1hdGgucmFuZG9tIGFuZCBhIGRldGVybWluaXN0aWcgcHNldWRvLXJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIChQUk5HKSBcclxuICAgKiB0aGF0IGNhbiBiZSBmZWQgd2l0aCBhIHNlZWQgYW5kIHRoZW4gcmV0dXJucyBhIHJlcHJvZHVjYWJsZSBzZXQgb2YgcmFuZG9tIG51bWJlcnMgKGlmIHRoZSBwcmVjaXNpb24gb2YgSmF2YXNjcmlwdCBhbGxvd3MpIFxyXG4gICAqIFxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUmFuZG9tIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmYXVsdDogUmFuZG9tID0gbmV3IFJhbmRvbSgpO1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZTogRnVuY3Rpb24gPSBNYXRoLnJhbmRvbTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgUmFuZG9tfS4gXHJcbiAgICAgKiBJZiBhIHNlZWQgaXMgZ2l2ZW4sIExGSUI0IGlzIHVzZWQgYXMgZ2VuZXJhdG9yLCByZXByb2R1Y2luZyBhIHNlcmllcyBvZiBudW1iZXJzIGZyb20gdGhhdCBzZWVkLlxyXG4gICAgICogSWYgYSBmdW5jdGlvbiBwcm9kdWNpbmcgdmFsdWVzIGJldHdlZW4gMCBhbmQgMSBpcyBnaXZlbiwgaXQgd2lsbCBiZSB1c2VkIGFzIGdlbmVyYXRvci5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoX3NlZWRPckZ1bmN0aW9uPzogbnVtYmVyIHwgRnVuY3Rpb24pIHtcclxuICAgICAgaWYgKF9zZWVkT3JGdW5jdGlvbiBpbnN0YW5jZW9mIEZ1bmN0aW9uKVxyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGUgPSBfc2VlZE9yRnVuY3Rpb247XHJcbiAgICAgIGVsc2UgaWYgKF9zZWVkT3JGdW5jdGlvbiA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZSA9IE1hdGgucmFuZG9tO1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5nZW5lcmF0ZSA9IG5ldyBMRklCNChfc2VlZE9yRnVuY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG5vcm1lZCByYW5kb20gbnVtYmVyLCB0aHVzIGluIHRoZSByYW5nZSBvZiBbMCwgMVtcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldE5vcm0oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByYW5kb20gbnVtYmVyIGluIHRoZSByYW5nZSBvZiBnaXZlbiBbX21pbiwgX21heFtcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJhbmdlKF9taW46IG51bWJlciwgX21heDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIF9taW4gKyB0aGlzLmdlbmVyYXRlKCkgKiAoX21heCAtIF9taW4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJhbmRvbSBpbnRlZ2VyIG51bWJlciBpbiB0aGUgcmFuZ2Ugb2YgZ2l2ZW4gZmxvb3JlZCBbX21pbiwgX21heFtcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJhbmdlRmxvb3JlZChfbWluOiBudW1iZXIsIF9tYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKHRoaXMuZ2V0UmFuZ2UoX21pbiwgX21heCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIG9yIGZhbHNlIHJhbmRvbWx5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRCb29sZWFuKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZSgpIDwgMC41O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyAtMSBvciAxIHJhbmRvbWx5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTaWduKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldEJvb2xlYW4oKSA/IDEgOiAtMTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByYW5kb21seSBzZWxlY3RlZCBpbmRleCBpbnRvIHRoZSBnaXZlbiBhcnJheVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0SW5kZXg8VD4oX2FycmF5OiBBcnJheTxUPik6IG51bWJlciB7XHJcbiAgICAgIGlmIChfYXJyYXkubGVuZ3RoID4gMClcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRSYW5nZUZsb29yZWQoMCwgX2FycmF5Lmxlbmd0aCk7XHJcbiAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByYW5kb21seSBzZWxlY3RlZCBlbGVtZW50IG9mIHRoZSBnaXZlbiBhcnJheVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RWxlbWVudDxUPihfYXJyYXk6IEFycmF5PFQ+KTogVCB7XHJcbiAgICAgIGlmIChfYXJyYXkubGVuZ3RoID4gMClcclxuICAgICAgICByZXR1cm4gX2FycmF5W3RoaXMuZ2V0SW5kZXgoX2FycmF5KV07XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBhIHJhbmRvbWx5IHNlbGVjdGVkIGVsZW1lbnQgZnJvbSB0aGUgZ2l2ZW4gYXJyYXkgYW5kIHJldHVybnMgaXRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNwbGljZTxUPihfYXJyYXk6IEFycmF5PFQ+KTogVCB7XHJcbiAgICAgIHJldHVybiBfYXJyYXkuc3BsaWNlKHRoaXMuZ2V0SW5kZXgoX2FycmF5KSwgMSlbMF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmFuZG9tbHkgc2VsZWN0ZWQga2V5IGZyb20gdGhlIGdpdmVuIE1hcC1pbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0S2V5PFQsIFU+KF9tYXA6IE1hcDxULCBVPik6IFQge1xyXG4gICAgICBsZXQga2V5czogR2VuZXJhbCA9IEFycmF5LmZyb20oX21hcC5rZXlzKCkpO1xyXG4gICAgICByZXR1cm4ga2V5c1t0aGlzLmdldEluZGV4KGtleXMpXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByYW5kb21seSBzZWxlY3RlZCBwcm9wZXJ0eSBuYW1lIGZyb20gdGhlIGdpdmVuIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UHJvcGVydHlOYW1lPFQ+KF9vYmplY3Q6IFQpOiBrZXlvZiBUIHtcclxuICAgICAgbGV0IGtleXM6IHN0cmluZ1tdID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoX29iamVjdCk7XHJcbiAgICAgIHJldHVybiA8a2V5b2YgVD5rZXlzW3RoaXMuZ2V0SW5kZXgoa2V5cyldO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJhbmRvbWx5IHNlbGVjdGVkIHN5bWJvbCBmcm9tIHRoZSBnaXZlbiBvYmplY3QsIGlmIHN5bWJvbHMgYXJlIHVzZWQgYXMga2V5c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UHJvcGVydHlTeW1ib2w8VD4oX29iamVjdDogVCk6IHN5bWJvbCB7XHJcbiAgICAgIGxldCBrZXlzOiBzeW1ib2xbXSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoX29iamVjdCk7XHJcbiAgICAgIHJldHVybiBrZXlzW3RoaXMuZ2V0SW5kZXgoa2V5cyldO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHJhbmRvbSB0aHJlZS1kaW1lbnNpb25hbCB2ZWN0b3IgaW4gdGhlIGxpbWl0cyBvZiB0aGUgYm94IGRlZmluZWQgYnkgdGhlIHZlY3RvcnMgZ2l2ZW4gYXMgW19jb3JuZXIwLCBfY29ybmVyMVtcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFZlY3RvcjMoX2Nvcm5lcjA6IFZlY3RvcjMsIF9jb3JuZXIxOiBWZWN0b3IzKTogVmVjdG9yMyB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMyh0aGlzLmdldFJhbmdlKF9jb3JuZXIwLngsIF9jb3JuZXIxLngpLCB0aGlzLmdldFJhbmdlKF9jb3JuZXIwLnksIF9jb3JuZXIxLnkpLCB0aGlzLmdldFJhbmdlKF9jb3JuZXIwLnosIF9jb3JuZXIxLnopKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSByYW5kb20gdHdvLWRpbWVuc2lvbmFsIHZlY3RvciBpbiB0aGUgbGltaXRzIG9mIHRoZSByZWN0YW5nbGUgZGVmaW5lZCBieSB0aGUgdmVjdG9ycyBnaXZlbiBhcyBbX2Nvcm5lcjAsIF9jb3JuZXIxW1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0VmVjdG9yMihfY29ybmVyMDogVmVjdG9yMiwgX2Nvcm5lcjE6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMuZ2V0UmFuZ2UoX2Nvcm5lcjAueCwgX2Nvcm5lcjEueCksIHRoaXMuZ2V0UmFuZ2UoX2Nvcm5lcjAueSwgX2Nvcm5lcjEueSkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RhbmRhcmQge0BsaW5rIFJhbmRvbX0taW5zdGFuY2UgdXNpbmcgTWF0aC5yYW5kb20oKS5cclxuICAgKi9cclxuICBleHBvcnQgY29uc3QgcmFuZG9tOiBSYW5kb20gPSBuZXcgUmFuZG9tKCk7XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBTdG9yZXMgYW5kIG1hbmlwdWxhdGVzIGEgdGhyZWVkaW1lbnNpb25hbCB2ZWN0b3IgY29tcHJpc2VkIG9mIHRoZSBjb21wb25lbnRzIHgsIHkgYW5kIHpcclxuICAgKiBgYGBwbGFpbnRleHRcclxuICAgKiAgICAgICAgICAgICt5XHJcbiAgICogICAgICAgICAgICAgfF9fICt4XHJcbiAgICogICAgICAgICAgICAvXHJcbiAgICogICAgICAgICAgK3ogICBcclxuICAgKiBgYGBcclxuICAgKiBAYXV0aG9ycyBKYXNjaGEgS2FyYWfDtmwsIEhGVSwgMjAxOSB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5LTIwMjJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgVmVjdG9yMyBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBSZWN5Y2FibGUge1xyXG4gICAgcHJpdmF0ZSBkYXRhOiBGbG9hdDMyQXJyYXk7IC8vIFRPRE86IGNoZWNrIHdoeSB0aGlzIHNob3VsZG4ndCBiZSB4LHkseiBhcyBudW1iZXJzLi4uXHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF94OiBudW1iZXIgPSAwLCBfeTogbnVtYmVyID0gMCwgX3o6IG51bWJlciA9IDApIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5kYXRhID0gbmV3IEZsb2F0MzJBcnJheShbX3gsIF95LCBfel0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBTdGF0aWNcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBsZW5ndGggcG9pbnRpbmcgaW4geC1kaXJlY3Rpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBYKF9zY2FsZTogbnVtYmVyID0gMSk6IFZlY3RvcjMge1xyXG4gICAgICBjb25zdCB2ZWN0b3I6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIHZlY3Rvci5zZXQoX3NjYWxlLCAwLCAwKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gbGVuZ3RoIHBvaW50aW5nIGluIHktZGlyZWN0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgWShfc2NhbGU6IG51bWJlciA9IDEpOiBWZWN0b3IzIHtcclxuICAgICAgY29uc3QgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KDAsIF9zY2FsZSwgMCk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgdmVjdG9yIHdpdGggdGhlIGdpdmVuIGxlbmd0aCBwb2ludGluZyBpbiB6LWRpcmVjdGlvblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFooX3NjYWxlOiBudW1iZXIgPSAxKTogVmVjdG9yMyB7XHJcbiAgICAgIGNvbnN0IHZlY3RvcjogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgdmVjdG9yLmRhdGEuc2V0KFswLCAwLCBfc2NhbGVdKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSB2ZWN0b3Igd2l0aCB0aGUgdmFsdWUgMCBvbiBlYWNoIGF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBaRVJPKCk6IFZlY3RvcjMge1xyXG4gICAgICBjb25zdCB2ZWN0b3I6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIHZlY3Rvci5zZXQoMCwgMCwgMCk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgdmVjdG9yIG9mIHRoZSBnaXZlbiBzaXplIG9uIGVhY2ggb2YgdGhlIHRocmVlIGF4aXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBPTkUoX3NjYWxlOiBudW1iZXIgPSAxKTogVmVjdG9yMyB7XHJcbiAgICAgIGNvbnN0IHZlY3RvcjogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgdmVjdG9yLnNldChfc2NhbGUsIF9zY2FsZSwgX3NjYWxlKTtcclxuICAgICAgcmV0dXJuIHZlY3RvcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSB2ZWN0b3IgdGhyb3VnaCB0cmFuc2Zvcm1hdGlvbiBvZiB0aGUgZ2l2ZW4gdmVjdG9yIGJ5IHRoZSBnaXZlbiBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBUUkFOU0ZPUk1BVElPTihfdmVjdG9yOiBWZWN0b3IzLCBfbXR4VHJhbnNmb3JtOiBNYXRyaXg0eDQsIF9pbmNsdWRlVHJhbnNsYXRpb246IGJvb2xlYW4gPSB0cnVlKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIGxldCBtOiBGbG9hdDMyQXJyYXkgPSBfbXR4VHJhbnNmb3JtLmdldCgpO1xyXG4gICAgICBsZXQgW3gsIHksIHpdID0gX3ZlY3Rvci5nZXQoKTtcclxuXHJcbiAgICAgIHJlc3VsdC54ID0gbVswXSAqIHggKyBtWzRdICogeSArIG1bOF0gKiB6O1xyXG4gICAgICByZXN1bHQueSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogejtcclxuICAgICAgcmVzdWx0LnogPSBtWzJdICogeCArIG1bNl0gKiB5ICsgbVsxMF0gKiB6O1xyXG5cclxuICAgICAgaWYgKF9pbmNsdWRlVHJhbnNsYXRpb24pIHtcclxuICAgICAgICByZXN1bHQuYWRkKF9tdHhUcmFuc2Zvcm0udHJhbnNsYXRpb24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIHZlY3RvciB3aGljaCBpcyBhIGNvcHkgb2YgdGhlIGdpdmVuIHZlY3RvciBzY2FsZWQgdG8gdGhlIGdpdmVuIGxlbmd0aFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIE5PUk1BTElaQVRJT04oX3ZlY3RvcjogVmVjdG9yMywgX2xlbmd0aDogbnVtYmVyID0gMSk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgbWFnbml0dWRlU3F1YXJlZDogbnVtYmVyID0gX3ZlY3Rvci5tYWduaXR1ZGVTcXVhcmVkO1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IzID0gX3ZlY3Rvci5jbG9uZTtcclxuICAgICAgaWYgKG1hZ25pdHVkZVNxdWFyZWQgPT0gMClcclxuICAgICAgICB0aHJvdyAobmV3IFJhbmdlRXJyb3IoXCJJbXBvc3NpYmxlIG5vcm1hbGl6YXRpb25cIikpO1xyXG4gICAgICB2ZWN0b3Iuc2NhbGUoX2xlbmd0aCAvIE1hdGguc3FydChtYWduaXR1ZGVTcXVhcmVkKSk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHRpbmcgdmVjdG9yIGF0dGFpbmVkIGJ5IGFkZGl0aW9uIG9mIGFsbCBnaXZlbiB2ZWN0b3JzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFNVTSguLi5fdmVjdG9yczogVmVjdG9yM1tdKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIGZvciAobGV0IHZlY3RvciBvZiBfdmVjdG9ycylcclxuICAgICAgICByZXN1bHQuc2V0KHJlc3VsdC54ICsgdmVjdG9yLngsIHJlc3VsdC55ICsgdmVjdG9yLnksIHJlc3VsdC56ICsgdmVjdG9yLnopO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSBzdWJ0cmFjdGlvbiBvZiB0d28gdmVjdG9ycy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBESUZGRVJFTkNFKF9taW51ZW5kOiBWZWN0b3IzLCBfc3VidHJhaGVuZDogVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9taW51ZW5kLnggLSBfc3VidHJhaGVuZC54LCBfbWludWVuZC55IC0gX3N1YnRyYWhlbmQueSwgX21pbnVlbmQueiAtIF9zdWJ0cmFoZW5kLnopO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIG5ldyB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBnaXZlbiB2ZWN0b3Igc2NhbGVkIGJ5IHRoZSBnaXZlbiBzY2FsaW5nIGZhY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFNDQUxFKF92ZWN0b3I6IFZlY3RvcjMsIF9zY2FsaW5nOiBudW1iZXIpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHNjYWxlZDogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgc2NhbGVkLnNldChfdmVjdG9yLnggKiBfc2NhbGluZywgX3ZlY3Rvci55ICogX3NjYWxpbmcsIF92ZWN0b3IueiAqIF9zY2FsaW5nKTtcclxuICAgICAgcmV0dXJuIHNjYWxlZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIHRoZSBjcm9zc3Byb2R1Y3Qgb2YgMiB2ZWN0b3JzLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIENST1NTKF9hOiBWZWN0b3IzLCBfYjogVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KFxyXG4gICAgICAgIF9hLnkgKiBfYi56IC0gX2EueiAqIF9iLnksXHJcbiAgICAgICAgX2EueiAqIF9iLnggLSBfYS54ICogX2IueixcclxuICAgICAgICBfYS54ICogX2IueSAtIF9hLnkgKiBfYi54XHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENvbXB1dGVzIHRoZSBkb3Rwcm9kdWN0IG9mIDIgdmVjdG9ycy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBET1QoX2E6IFZlY3RvcjMsIF9iOiBWZWN0b3IzKTogbnVtYmVyIHtcclxuICAgICAgbGV0IHNjYWxhclByb2R1Y3Q6IG51bWJlciA9IF9hLnggKiBfYi54ICsgX2EueSAqIF9iLnkgKyBfYS56ICogX2IuejtcclxuICAgICAgcmV0dXJuIHNjYWxhclByb2R1Y3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIGFuZCByZXR1cm5zIHRoZSByZWZsZWN0aW9uIG9mIHRoZSBpbmNvbWluZyB2ZWN0b3IgYXQgdGhlIGdpdmVuIG5vcm1hbCB2ZWN0b3IuIFRoZSBsZW5ndGggb2Ygbm9ybWFsIHNob3VsZCBiZSAxLlxyXG4gICAgICogICAgIF9fX19fX19fX19fX19fX19fX1xyXG4gICAgICogICAgICAgICAgIC98XFxcclxuICAgICAqIGluY29taW5nIC8gfCBcXCByZWZsZWN0aW9uXHJcbiAgICAgKiAgICAgICAgIC8gIHwgIFxcICAgXHJcbiAgICAgKiAgICAgICAgICBub3JtYWxcclxuICAgICAqIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIFJFRkxFQ1RJT04oX2luY29taW5nOiBWZWN0b3IzLCBfbm9ybWFsOiBWZWN0b3IzKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCBkb3Q6IG51bWJlciA9IC1WZWN0b3IzLkRPVChfaW5jb21pbmcsIF9ub3JtYWwpO1xyXG4gICAgICBsZXQgcmVmbGVjdGlvbjogVmVjdG9yMyA9IFZlY3RvcjMuU1VNKF9pbmNvbWluZywgVmVjdG9yMy5TQ0FMRShfbm9ybWFsLCAyICogZG90KSk7XHJcbiAgICAgIHJldHVybiByZWZsZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGl2aWRlcyB0aGUgZGl2aWRlbmQgYnkgdGhlIGRpdmlzb3IgY29tcG9uZW50IGJ5IGNvbXBvbmVudCBhbmQgcmV0dXJucyB0aGUgcmVzdWx0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgUkFUSU8oX2RpdmlkZW5kOiBWZWN0b3IzLCBfZGl2aXNvcjogVmVjdG9yMyk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICB2ZWN0b3Iuc2V0KF9kaXZpZGVuZC54IC8gX2Rpdmlzb3IueCwgX2RpdmlkZW5kLnkgLyBfZGl2aXNvci55LCBfZGl2aWRlbmQueiAvIF9kaXZpc29yLnopO1xyXG4gICAgICByZXR1cm4gdmVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNhcnRlc2lhbiB2ZWN0b3IgZnJvbSBnZW9ncmFwaGljIGNvb3JkaW5hdGVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgR0VPKF9sb25naXR1ZGU6IG51bWJlciA9IDAsIF9sYXRpdHVkZTogbnVtYmVyID0gMCwgX21hZ25pdHVkZTogbnVtYmVyID0gMSk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgdmVjdG9yOiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICBsZXQgZ2VvOiBHZW8zID0gUmVjeWNsZXIuZ2V0KEdlbzMpO1xyXG4gICAgICBnZW8uc2V0KF9sb25naXR1ZGUsIF9sYXRpdHVkZSwgX21hZ25pdHVkZSk7XHJcbiAgICAgIHZlY3Rvci5nZW8gPSBnZW87XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGdlbyk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3I7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gQWNjZXNzb3JzXHJcbiAgICAvLyBUT0RPOiBpbXBsZW1lbnQgZXF1YWxzLWZ1bmN0aW9uc1xyXG4gICAgZ2V0IHgoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZGF0YVswXTtcclxuICAgIH1cclxuICAgIGdldCB5KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmRhdGFbMV07XHJcbiAgICB9XHJcbiAgICBnZXQgeigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5kYXRhWzJdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCB4KF94OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5kYXRhWzBdID0gX3g7XHJcbiAgICB9XHJcbiAgICBzZXQgeShfeTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuZGF0YVsxXSA9IF95O1xyXG4gICAgfVxyXG4gICAgc2V0IHooX3o6IG51bWJlcikge1xyXG4gICAgICB0aGlzLmRhdGFbMl0gPSBfejtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgdmVjdG9yXHJcbiAgICAgKi9cclxuICAgIGdldCBtYWduaXR1ZGUoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIE1hdGguaHlwb3QoLi4udGhpcy5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgbWFnbml0dWRlIG9mIHRoZSB2ZWN0b3Igd2l0aG91dCBjYWxjdWxhdGluZyBhIHNxdWFyZSByb290LiBGYXN0ZXIgZm9yIHNpbXBsZSBwcm94aW1pdHkgZXZhbHVhdGlvbi5cclxuICAgICAqL1xyXG4gICAgZ2V0IG1hZ25pdHVkZVNxdWFyZWQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIFZlY3RvcjMuRE9UKHRoaXMsIHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGNsb25lIG9mIHRoaXMgdmVjdG9yXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgY2xvbmUoKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCBjbG9uZTogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgY2xvbmUuZGF0YS5zZXQodGhpcy5kYXRhKTtcclxuICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogLSBnZXQ6IHJldHVybnMgYSBnZW9ncmFwaGljIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgdmVjdG9yICBcclxuICAgICAqIC0gc2V0OiBhZGp1c3QgdGhlIGNhcnRlc2lhbiB2YWx1ZXMgb2YgdGhpcyB2ZWN0b3IgdG8gcmVwcmVzZW50IHRoZSBnaXZlbiBhcyBnZW9ncmFwaGljIGNvb3JkaW5hdGVzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQgZ2VvKF9nZW86IEdlbzMpIHtcclxuICAgICAgdGhpcy5zZXQoMCwgMCwgX2dlby5tYWduaXR1ZGUpO1xyXG4gICAgICB0aGlzLnRyYW5zZm9ybShNYXRyaXg0eDQuUk9UQVRJT05fWCgtX2dlby5sYXRpdHVkZSkpO1xyXG4gICAgICB0aGlzLnRyYW5zZm9ybShNYXRyaXg0eDQuUk9UQVRJT05fWShfZ2VvLmxvbmdpdHVkZSkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBnZW8oKTogR2VvMyB7XHJcbiAgICAgIGxldCBnZW86IEdlbzMgPSBSZWN5Y2xlci5nZXQoR2VvMyk7XHJcbiAgICAgIGdlby5tYWduaXR1ZGUgPSB0aGlzLm1hZ25pdHVkZTtcclxuXHJcbiAgICAgIGlmIChnZW8ubWFnbml0dWRlID09PSAwKVxyXG4gICAgICAgIHJldHVybiBnZW87XHJcblxyXG4gICAgICBnZW8ubG9uZ2l0dWRlID0gMTgwICogTWF0aC5hdGFuMih0aGlzLnggLyBnZW8ubWFnbml0dWRlLCB0aGlzLnogLyBnZW8ubWFnbml0dWRlKSAvIE1hdGguUEk7XHJcbiAgICAgIGdlby5sYXRpdHVkZSA9IDE4MCAqIE1hdGguYXNpbih0aGlzLnkgLyBnZW8ubWFnbml0dWRlKSAvIE1hdGguUEk7XHJcbiAgICAgIHJldHVybiBnZW87XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwdWJsaWMgcmVjeWNsZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5kYXRhLnNldChbMCwgMCwgMF0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIENvcGllcyB0aGUgdmFsdWVzIG9mIHRoZSBnaXZlbiB2ZWN0b3IgaW50byB0aGlzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb3B5KF9vcmlnaW5hbDogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KF9vcmlnaW5hbC5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY29vcmRpbmF0ZXMgb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHZlY3RvciBhcmUgdG8gYmUgY29uc2lkZXJlZCBpZGVudGljYWwgd2l0aGluIHRoZSBnaXZlbiB0b2xlcmFuY2VcclxuICAgICAqIFRPRE86IGV4YW1pbmUsIGlmIHRvbGVyYW5jZSBhcyBjcml0ZXJpdW0gZm9yIHRoZSBkaWZmZXJlbmNlIGlzIGFwcHJvcHJpYXRlIHdpdGggdmVyeSBsYXJnZSBjb29yZGluYXRlIHZhbHVlcyBvciBpZiBfdG9sZXJhbmNlIHNob3VsZCBiZSBtdWx0aXBsaWVkIGJ5IGNvb3JkaW5hdGUgdmFsdWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGVxdWFscyhfY29tcGFyZTogVmVjdG9yMywgX3RvbGVyYW5jZTogbnVtYmVyID0gTnVtYmVyLkVQU0lMT04pOiBib29sZWFuIHtcclxuICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCAtIF9jb21wYXJlLngpID4gX3RvbGVyYW5jZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBpZiAoTWF0aC5hYnModGhpcy55IC0gX2NvbXBhcmUueSkgPiBfdG9sZXJhbmNlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnogLSBfY29tcGFyZS56KSA+IF90b2xlcmFuY2UpIHJldHVybiBmYWxzZTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHBvc2l0aW9uIGRlc2NyaWJlZCBieSB0aGlzIGlzIHdpdGhpbiBhIGN1YmUgd2l0aCB0aGUgb3Bwb3NpdGUgY29ybmVycyAxIGFuZCAyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0luc2lkZUN1YmUoX2Nvcm5lcjE6IFZlY3RvcjMsIF9jb3JuZXIyOiBWZWN0b3IzKTogYm9vbGVhbiB7XHJcbiAgICAgIGxldCBkaWFnb25hbDogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRShfY29ybmVyMiwgX2Nvcm5lcjEpO1xyXG4gICAgICBsZXQgcmVsYXRpdmU6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UodGhpcywgX2Nvcm5lcjEpO1xyXG4gICAgICBsZXQgcmF0aW86IFZlY3RvcjMgPSBWZWN0b3IzLlJBVElPKHJlbGF0aXZlLCBkaWFnb25hbCk7XHJcbiAgICAgIGlmIChyYXRpby54ID4gMSB8fCByYXRpby54IDwgMClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmIChyYXRpby55ID4gMSB8fCByYXRpby55IDwgMClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIGlmIChyYXRpby56ID4gMSB8fCByYXRpby56IDwgMClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBwb3NpdGlvbiBkZXNjcmliZWQgYnkgdGhpcyBpcyB3aXRoaW4gYSBzcGhlcmUgd2l0aCB0aGUgZ2l2ZW4gY2VudGVyIGFuZCByYWRpdXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzSW5zaWRlU3BoZXJlKF9jZW50ZXI6IFZlY3RvcjMsIF9yYWRpdXM6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICBsZXQgZGlmZmVyZW5jZTogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRSh0aGlzLCBfY2VudGVyKTtcclxuICAgICAgcmV0dXJuIGRpZmZlcmVuY2UubWFnbml0dWRlU3F1YXJlZCA8IChfcmFkaXVzICogX3JhZGl1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSBnaXZlbiB2ZWN0b3IgdG8gdGhpc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkKF9hZGRlbmQ6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy5kYXRhLnNldChbX2FkZGVuZC54ICsgdGhpcy54LCBfYWRkZW5kLnkgKyB0aGlzLnksIF9hZGRlbmQueiArIHRoaXMuel0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3VidHJhY3RzIHRoZSBnaXZlbiB2ZWN0b3IgZnJvbSB0aGlzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdWJ0cmFjdChfc3VidHJhaGVuZDogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICB0aGlzLmRhdGEuc2V0KFt0aGlzLnggLSBfc3VidHJhaGVuZC54LCB0aGlzLnkgLSBfc3VidHJhaGVuZC55LCB0aGlzLnogLSBfc3VidHJhaGVuZC56XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTY2FsZXMgdGhpcyB2ZWN0b3IgYnkgdGhlIGdpdmVuIHNjYWxhclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2NhbGUoX3NjYWxhcjogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YS5zZXQoW19zY2FsYXIgKiB0aGlzLngsIF9zY2FsYXIgKiB0aGlzLnksIF9zY2FsYXIgKiB0aGlzLnpdKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vcm1hbGl6ZXMgdGhpcyB0byB0aGUgZ2l2ZW4gbGVuZ3RoLCAxIGJ5IGRlZmF1bHRcclxuICAgICAqL1xyXG4gICAgcHVibGljIG5vcm1hbGl6ZShfbGVuZ3RoOiBudW1iZXIgPSAxKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZGF0YSA9IFZlY3RvcjMuTk9STUFMSVpBVElPTih0aGlzLCBfbGVuZ3RoKS5kYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVmaW5lcyB0aGUgY29tcG9uZW50cyBvZiB0aGlzIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBudW1iZXJzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQoX3g6IG51bWJlciA9IDAsIF95OiBudW1iZXIgPSAwLCBfejogbnVtYmVyID0gMCk6IHZvaWQge1xyXG4gICAgICB0aGlzLmRhdGFbMF0gPSBfeDtcclxuICAgICAgdGhpcy5kYXRhWzFdID0gX3k7XHJcbiAgICAgIHRoaXMuZGF0YVsyXSA9IF96O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGlzIHZlY3RvciBhcyBhIG5ldyBGbG9hdDMyQXJyYXkgKGNvcHkpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkodGhpcy5kYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zZm9ybXMgdGhpcyB2ZWN0b3IgYnkgdGhlIGdpdmVuIG1hdHJpeCwgaW5jbHVkaW5nIG9yIGV4bHVkaW5nIHRoZSB0cmFuc2xhdGlvbi5cclxuICAgICAqIEluY2x1ZGluZyBpcyB0aGUgZGVmYXVsdCwgZXhjbHVkaW5nIHdpbGwgb25seSByb3RhdGUgYW5kIHNjYWxlIHRoaXMgdmVjdG9yLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNmb3JtKF9tdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCwgX2luY2x1ZGVUcmFuc2xhdGlvbjogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgICAgbGV0IHRyYW5zZm9ybWVkOiBWZWN0b3IzID0gVmVjdG9yMy5UUkFOU0ZPUk1BVElPTih0aGlzLCBfbXR4VHJhbnNmb3JtLCBfaW5jbHVkZVRyYW5zbGF0aW9uKTtcclxuICAgICAgdGhpcy5kYXRhLnNldCh0cmFuc2Zvcm1lZC5kYXRhKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUodHJhbnNmb3JtZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHJvcHMgdGhlIHotY29tcG9uZW50IGFuZCByZXR1cm5zIGEgVmVjdG9yMiBjb25zaXN0aW5nIG9mIHRoZSB4LSBhbmQgeS1jb21wb25lbnRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1ZlY3RvcjIoKTogVmVjdG9yMiB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLngsIHRoaXMueSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWZsZWN0cyB0aGlzIHZlY3RvciBhdCBhIGdpdmVuIG5vcm1hbC4gU2VlIHtAbGluayBWZWN0b3IzLlJFRkxFQ1RJT059XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZWZsZWN0KF9ub3JtYWw6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgY29uc3QgcmVmbGVjdGVkOiBWZWN0b3IzID0gVmVjdG9yMy5SRUZMRUNUSU9OKHRoaXMsIF9ub3JtYWwpO1xyXG4gICAgICB0aGlzLnNldChyZWZsZWN0ZWQueCwgcmVmbGVjdGVkLnksIHJlZmxlY3RlZC56KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUocmVmbGVjdGVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNodWZmbGVzIHRoZSBjb21wb25lbnRzIG9mIHRoaXMgdmVjdG9yXHJcbiAgICAgKi9cclxuICAgIHNodWZmbGUoKTogdm9pZCB7XHJcbiAgICAgIGxldCBhOiBudW1iZXJbXSA9IEFycmF5LmZyb20odGhpcy5kYXRhKTtcclxuICAgICAgdGhpcy5zZXQoUmFuZG9tLmRlZmF1bHQuc3BsaWNlKGEpLCBSYW5kb20uZGVmYXVsdC5zcGxpY2UoYSksIGFbMF0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXREaXN0YW5jZShfdG86IFZlY3RvcjMpOiBudW1iZXIge1xyXG4gICAgICBsZXQgZGlmZmVyZW5jZTogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRSh0aGlzLCBfdG8pO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShkaWZmZXJlbmNlKTtcclxuICAgICAgcmV0dXJuIGRpZmZlcmVuY2UubWFnbml0dWRlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgZWFjaCBkaW1lbnNpb24sIG1vdmVzIHRoZSBjb21wb25lbnQgdG8gdGhlIG1pbmltdW0gb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHZlY3RvclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbWluKF9jb21wYXJlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMueCA9IE1hdGgubWluKHRoaXMueCwgX2NvbXBhcmUueCk7XHJcbiAgICAgIHRoaXMueSA9IE1hdGgubWluKHRoaXMueSwgX2NvbXBhcmUueSk7XHJcbiAgICAgIHRoaXMueiA9IE1hdGgubWluKHRoaXMueiwgX2NvbXBhcmUueik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEZvciBlYWNoIGRpbWVuc2lvbiwgbW92ZXMgdGhlIGNvbXBvbmVudCB0byB0aGUgbWF4aW11bSBvZiB0aGlzIGFuZCB0aGUgZ2l2ZW4gdmVjdG9yXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtYXgoX2NvbXBhcmU6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy54ID0gTWF0aC5tYXgodGhpcy54LCBfY29tcGFyZS54KTtcclxuICAgICAgdGhpcy55ID0gTWF0aC5tYXgodGhpcy55LCBfY29tcGFyZS55KTtcclxuICAgICAgdGhpcy56ID0gTWF0aC5tYXgodGhpcy56LCBfY29tcGFyZS56KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBmb3JtYXR0ZWQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgdmVjdG9yXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICBsZXQgcmVzdWx0OiBzdHJpbmcgPSBgKCR7dGhpcy54LnRvUHJlY2lzaW9uKDUpfSwgJHt0aGlzLnkudG9QcmVjaXNpb24oNSl9LCAke3RoaXMuei50b1ByZWNpc2lvbig1KX0pYDtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVzZXMgdGhlIHN0YW5kYXJkIGFycmF5Lm1hcCBmdW5jdGlvbmFsaXR5IHRvIHBlcmZvcm0gdGhlIGdpdmVuIGZ1bmN0aW9uIG9uIGFsbCBjb21wb25lbnRzIG9mIHRoaXMgdmVjdG9yXHJcbiAgICAgKiBhbmQgcmV0dXJuIGEgbmV3IHZlY3RvciB3aXRoIHRoZSByZXN1bHRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBtYXAoX2Z1bmN0aW9uOiAodmFsdWU6IG51bWJlciwgaW5kZXg6IG51bWJlciwgYXJyYXk6IEZsb2F0MzJBcnJheSkgPT4gbnVtYmVyKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCBjb3B5OiBWZWN0b3IzID0gUmVjeWNsZXIuZ2V0KFZlY3RvcjMpO1xyXG4gICAgICBjb3B5LmRhdGEgPSB0aGlzLmRhdGEubWFwKF9mdW5jdGlvbik7XHJcbiAgICAgIHJldHVybiBjb3B5O1xyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgICAgLy8gc2VyaWFsaXphdGlvbi50b0pTT04gPSAoKSA9PiB7IHJldHVybiBgeyBcInJcIjogJHt0aGlzLnJ9LCBcImdcIjogJHt0aGlzLmd9LCBcImJcIjogJHt0aGlzLmJ9LCBcImFcIjogJHt0aGlzLmF9fWA7IH07XHJcbiAgICAgIHNlcmlhbGl6YXRpb24udG9KU09OID0gKCkgPT4geyByZXR1cm4gYFske3RoaXMueH0sICR7dGhpcy55fSwgJHt0aGlzLnp9XWA7IH07XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8VmVjdG9yMz4ge1xyXG4gICAgICBpZiAodHlwZW9mIChfc2VyaWFsaXphdGlvbikgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIFt0aGlzLngsIHRoaXMueSwgdGhpcy56XSA9IEpTT04ucGFyc2UoPHN0cmluZz48dW5rbm93bj5fc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMubXV0YXRlKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0ge1xyXG4gICAgICAgIHg6IHRoaXMuZGF0YVswXSwgeTogdGhpcy5kYXRhWzFdLCB6OiB0aGlzLmRhdGFbMl1cclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgey8qKiAqLyB9XHJcbiAgICAvLyNlbmRyZWdpb24gVHJhbnNmZXJcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBEZXNjcmliZXMgYSBmYWNlIG9mIGEge0BsaW5rIE1lc2h9IGJ5IHJlZmVyZW5jaW5nIHRocmVlIHtAbGluayBWZXJ0aWNlc30gd2l0aCB0aGVpciBpbmRpemVzXHJcbiAgICogYW5kIGNhbGN1bGF0ZXMgZmFjZSBub3JtYWxzLlxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEZhY2Uge1xyXG4gICAgcHVibGljIGluZGljZXM6IG51bWJlcltdID0gW107XHJcbiAgICBwdWJsaWMgbm9ybWFsVW5zY2FsZWQ6IFZlY3RvcjM7XHJcbiAgICBwdWJsaWMgbm9ybWFsOiBWZWN0b3IzO1xyXG4gICAgcHJpdmF0ZSB2ZXJ0aWNlczogVmVydGljZXM7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF92ZXJ0aWNlczogVmVydGljZXMsIF9pbmRleDA6IG51bWJlciwgX2luZGV4MTogbnVtYmVyLCBfaW5kZXgyOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5pbmRpY2VzID0gW19pbmRleDAsIF9pbmRleDEsIF9pbmRleDJdO1xyXG4gICAgICB0aGlzLnZlcnRpY2VzID0gX3ZlcnRpY2VzO1xyXG4gICAgICB0aGlzLmNhbGN1bGF0ZU5vcm1hbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2FsY3VsYXRlTm9ybWFscygpOiB2b2lkIHtcclxuICAgICAgbGV0IHRyaWdvbjogVmVjdG9yM1tdID0gdGhpcy5pbmRpY2VzLm1hcCgoX2luZGV4OiBudW1iZXIpID0+IHRoaXMudmVydGljZXMucG9zaXRpb24oX2luZGV4KSk7XHJcbiAgICAgIGxldCB2MTogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRSh0cmlnb25bMV0sIHRyaWdvblswXSk7XHJcbiAgICAgIGxldCB2MjogVmVjdG9yMyA9IFZlY3RvcjMuRElGRkVSRU5DRSh0cmlnb25bMl0sIHRyaWdvblswXSk7XHJcbiAgICAgIHRoaXMubm9ybWFsVW5zY2FsZWQgPSBWZWN0b3IzLkNST1NTKHYxLCB2Mik7XHJcbiAgICAgIHRoaXMubm9ybWFsID0gVmVjdG9yMy5OT1JNQUxJWkFUSU9OKHRoaXMubm9ybWFsVW5zY2FsZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRQb3NpdGlvbihfaW5kZXg6IG51bWJlcik6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gdGhpcy52ZXJ0aWNlcy5wb3NpdGlvbih0aGlzLmluZGljZXNbX2luZGV4XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtdXN0IGJlIGNvcGxhbmFyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0luc2lkZShfcG9pbnQ6IFZlY3RvcjMpOiBib29sZWFuIHtcclxuICAgICAgbGV0IGRpZmZzOiBWZWN0b3IzW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgaW5kZXggb2YgdGhpcy5pbmRpY2VzKSB7XHJcbiAgICAgICAgbGV0IGRpZmY6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UodGhpcy52ZXJ0aWNlcy5wb3NpdGlvbihpbmRleCksIF9wb2ludCk7XHJcbiAgICAgICAgZGlmZnMucHVzaChkaWZmKTtcclxuICAgICAgfVxyXG4gICAgICBsZXQgbjA6IFZlY3RvcjMgPSBWZWN0b3IzLkNST1NTKGRpZmZzWzFdLCBkaWZmc1swXSk7XHJcbiAgICAgIGxldCBuMTogVmVjdG9yMyA9IFZlY3RvcjMuQ1JPU1MoZGlmZnNbMl0sIGRpZmZzWzFdKTtcclxuICAgICAgbGV0IG4yOiBWZWN0b3IzID0gVmVjdG9yMy5DUk9TUyhkaWZmc1swXSwgZGlmZnNbMl0pO1xyXG5cclxuICAgICAgbGV0IGRvdDE6IG51bWJlciA9IFZlY3RvcjMuRE9UKG4wLCBuMSk7XHJcbiAgICAgIGxldCBkb3QyOiBudW1iZXIgPSBWZWN0b3IzLkRPVChuMCwgbjIpO1xyXG5cclxuICAgICAgcmV0dXJuICEoZG90MSA8IDAgfHwgZG90MiA8IDApO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGFsbCBtZXNoZXMuIFxyXG4gICAqIE1lc2hlcyBwcm92aWRlIGluZGV4ZWQgdmVydGljZXMsIHRoZSBvcmRlciBvZiBpbmRpY2VzIHRvIGNyZWF0ZSB0cmlnb25zIGFuZCBub3JtYWxzLCBhbmQgdGV4dHVyZSBjb29yZGluYXRlc1xyXG4gICAqIFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5LzIyXHJcbiAgICovXHJcbiAgQFJlbmRlckluamVjdG9yTWVzaC5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNZXNoIGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZVJlc291cmNlIHtcclxuICAgIC8qKiByZWZlcnMgYmFjayB0byB0aGlzIGNsYXNzIGZyb20gYW55IHN1YmNsYXNzIGUuZy4gaW4gb3JkZXIgdG8gZmluZCBjb21wYXRpYmxlIG90aGVyIHJlc291cmNlcyovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGJhc2VDbGFzczogdHlwZW9mIE1lc2ggPSBNZXNoO1xyXG4gICAgLyoqIGxpc3Qgb2YgYWxsIHRoZSBzdWJjbGFzc2VzIGRlcml2ZWQgZnJvbSB0aGlzIGNsYXNzLCBpZiB0aGV5IHJlZ2lzdGVyZWQgcHJvcGVybHkqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBzdWJjbGFzc2VzOiB0eXBlb2YgTWVzaFtdID0gW107XHJcblxyXG4gICAgLy8gVE9ETzogYXQgdGhpcyB0aW1lLCBjcmVhdGluZyB0aGUgYnVmZmVycyBmb3IgZmxhdCBzaGFkaW5nIGlzIGEgYnJ1dGUgZm9yY2UgYWxnb3JpdGhtIGFuZCBzaG91bGQgYmUgb3B0aW1pemVkIGluIHRoZSBkaWZmZXJlbnQgc3ViY2xhc3Nlc1xyXG4gICAgLy8gVE9ETzogcmVuYW1lIHZlcnRpY2VzIHRvIHZlcnRpY2VzU21vb3RoIG9yIGp1c3QgY2xvdWQsIGFuZCBjbG91ZCB0byB2ZXJ0aWNlc1xyXG4gICAgLy8gXHJcblxyXG4gICAgcHVibGljIGlkUmVzb3VyY2U6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcgPSBcIk1lc2hcIjtcclxuICAgIC8vIGJhc2Ugc3RydWN0dXJlIGZvciBtZXNoZXMgaW4gRlVER0VcclxuICAgIHB1YmxpYyB2ZXJ0aWNlczogVmVydGljZXMgPSBuZXcgVmVydGljZXMoKTtcclxuICAgIHB1YmxpYyBmYWNlczogRmFjZVtdID0gW107XHJcblxyXG4gICAgLy8gcHVibGljIHJlbmRlckJ1ZmZlcnM6IFJlbmRlckJ1ZmZlcnM7IC8qIGRlZmluZWQgYnkgUmVuZGVySW5qZWN0b3IqL1xyXG4gICAgcHJvdGVjdGVkIHJlbmRlck1lc2g6IFJlbmRlck1lc2g7IC8qIGRlZmluZWQgYnkgUmVuZGVySW5qZWN0b3IqL1xyXG5cclxuXHJcbiAgICAvKiogYm91bmRpbmcgYm94IEFBQkIgKi9cclxuICAgIHByb3RlY3RlZCDGkmJveDogQm94O1xyXG4gICAgLy8gVE9ETzogZXhwbG9yZSBtYXRoZW1hdGljcyBmb3IgZWFzeSB0cmFuc2Zvcm1hdGlvbnMgb2YgcmFkaXVzIFxyXG4gICAgLyoqIGJvdW5kaW5nIHJhZGl1cyAqL1xyXG4gICAgcHJvdGVjdGVkIMaScmFkaXVzOiBudW1iZXI7XHJcblxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoXCIpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlZ2lzdGVyU3ViY2xhc3MoX3N1YkNsYXNzOiB0eXBlb2YgTWVzaCk6IG51bWJlciB7IHJldHVybiBNZXNoLnN1YmNsYXNzZXMucHVzaChfc3ViQ2xhc3MpIC0gMTsgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgYm91bmRpbmdCb3goKTogQm94IHtcclxuICAgICAgaWYgKHRoaXMuxpJib3ggPT0gbnVsbClcclxuICAgICAgICB0aGlzLsaSYm94ID0gdGhpcy5jcmVhdGVCb3VuZGluZ0JveCgpO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuxpJib3g7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IHJhZGl1cygpOiBudW1iZXIge1xyXG4gICAgICBpZiAodGhpcy7GknJhZGl1cyA9PSBudWxsKVxyXG4gICAgICAgIHRoaXMuxpJyYWRpdXMgPSB0aGlzLmNyZWF0ZVJhZGl1cygpO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuxpJyYWRpdXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVzZVJlbmRlckJ1ZmZlcnMoX3NoYWRlcjogU2hhZGVySW50ZXJmYWNlLCBfbXR4TWVzaFRvV29ybGQ6IE1hdHJpeDR4NCwgX210eE1lc2hUb1ZpZXc6IE1hdHJpeDR4NCwgX2lkPzogbnVtYmVyKTogUmVuZGVyQnVmZmVycyB7IHJldHVybiBudWxsOyAvKiBpbmplY3RlZCBieSBSZW5kZXJJbmplY3RvciovIH1cclxuICAgIHB1YmxpYyBnZXRSZW5kZXJCdWZmZXJzKF9zaGFkZXI6IFNoYWRlckludGVyZmFjZSk6IFJlbmRlckJ1ZmZlcnMgeyByZXR1cm4gbnVsbDsgLyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcbiAgICBwdWJsaWMgZGVsZXRlUmVuZGVyQnVmZmVycyhfc2hhZGVyOiBTaGFkZXJJbnRlcmZhY2UpOiB2b2lkIHsvKiBpbmplY3RlZCBieSBSZW5kZXJJbmplY3RvciovIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuxpJib3ggPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMuxpJyYWRpdXMgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICB0aGlzLnJlbmRlck1lc2g/LmNsZWFyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICAvLyBTZXJpYWxpemUvRGVzZXJpYWxpemUgZm9yIGFsbCBtZXNoZXMgdGhhdCBjYWxjdWxhdGUgd2l0aG91dCBwYXJhbWV0ZXJzXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBpZFJlc291cmNlOiB0aGlzLmlkUmVzb3VyY2UsXHJcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgIHR5cGU6IHRoaXMudHlwZSAvLyBzdG9yZSBmb3IgZWRpdG9yIHZpZXdcclxuICAgICAgfTsgLy8gbm8gZGF0YSBuZWVkZWQgLi4uXHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzLCBfc2VyaWFsaXphdGlvbi5pZFJlc291cmNlKTtcclxuICAgICAgdGhpcy5uYW1lID0gX3NlcmlhbGl6YXRpb24ubmFtZTtcclxuICAgICAgLy8gdHlwZSBpcyBhbiBhY2Nlc3NvciBhbmQgbXVzdCBub3QgYmUgZGVzZXJpYWxpemVkXHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIC8vIFRPRE86IHNvIG11Y2ggdG8gZGVsZXRlLi4uIHJhdGhlciBqdXN0IGdhdGhlciB3aGF0IHRvIG11dGF0ZVxyXG4gICAgICBkZWxldGUgX211dGF0b3IuxpJib3g7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci7GknJhZGl1cztcclxuXHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5yZW5kZXJCdWZmZXJzO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG5cclxuICAgIHByb3RlY3RlZCBjcmVhdGVSYWRpdXMoKTogbnVtYmVyIHtcclxuICAgICAgLy9UT0RPOiByYWRpdXMgYW5kIGJvdW5kaW5nIGJveCBjb3VsZCBiZSBjcmVhdGVkIG9uIGNvbnN0cnVjdGlvbiBvZiB2ZXJ0ZXgtYXJyYXlcclxuICAgICAgbGV0IHJhZGl1czogbnVtYmVyID0gMDtcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICByYWRpdXMgPSBNYXRoLm1heChyYWRpdXMsIHRoaXMudmVydGljZXMucG9zaXRpb24oaSkubWFnbml0dWRlU3F1YXJlZCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIE1hdGguc3FydChyYWRpdXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjcmVhdGVCb3VuZGluZ0JveCgpOiBCb3gge1xyXG4gICAgICBsZXQgYm94OiBCb3ggPSBSZWN5Y2xlci5nZXQoQm94KTtcclxuICAgICAgYm94LnNldCgpO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkgKyspIHtcclxuICAgICAgICBsZXQgcG9pbnQ6IFZlY3RvcjMgPSB0aGlzLnZlcnRpY2VzLnBvc2l0aW9uKGkpO1xyXG4gICAgICAgIGJveC5leHBhbmQocG9pbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBib3g7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGUgYSBzaW1wbGUgY3ViZSB3aXRoIGVkZ2VzIG9mIGxlbmd0aCAxLCBlYWNoIGZhY2UgY29uc2lzdGluZyBvZiB0d28gdHJpZ29uc1xyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqICAgICAgICgxMikgNF9fX183ICAoMTEpXHJcbiAgICogICAgICAgKDgpIDAvX18zL3wgKDEwKVxyXG4gICAqICAgICAgICgxNSkgfHw1X3x8NiAoMTQpXHJcbiAgICogICAgICAgKDkpIDF8L18yfC8gKDEzKVxyXG4gICAqIGBgYFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hDdWJlIGV4dGVuZHMgTWVzaCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gTWVzaC5yZWdpc3RlclN1YmNsYXNzKE1lc2hDdWJlKTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiTWVzaEN1YmVcIikge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIC8vIHRoaXMuY3JlYXRlKCk7XHJcbiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgVmVydGljZXMoXHJcbiAgICAgICAgLy8gZnJvbnRcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKC0wLjUsIDAuNSwgMC41KSwgbmV3IFZlY3RvcjIoMCwgMCkpLCAvLyAwXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygtMC41LCAtMC41LCAwLjUpLCBuZXcgVmVjdG9yMigwLCAxKSksIC8vIDFcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKDAuNSwgLTAuNSwgMC41KSwgbmV3IFZlY3RvcjIoMSwgMSkpLCAvLyAyXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygwLjUsIDAuNSwgMC41KSwgbmV3IFZlY3RvcjIoMSwgMCkpLCAvLyAzXHJcbiAgICAgICAgLy8gYmFja1xyXG4gICAgICAgIG5ldyBWZXJ0ZXgobmV3IFZlY3RvcjMoLTAuNSwgMC41LCAtMC41KSwgbmV3IFZlY3RvcjIoMywgMCkpLCAvLyA0XHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygtMC41LCAtMC41LCAtMC41KSwgbmV3IFZlY3RvcjIoMywgMSkpLCAvLyA1XHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygwLjUsIC0wLjUsIC0wLjUpLCBuZXcgVmVjdG9yMigyLCAxKSksIC8vIDZcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKDAuNSwgMC41LCAtMC41KSwgbmV3IFZlY3RvcjIoMiwgMCkpLCAvLyA3XHJcbiAgICAgICAgLy8gcmVmZXJlbmNlc1xyXG4gICAgICAgIG5ldyBWZXJ0ZXgoMCwgbmV3IFZlY3RvcjIoNCwgMCkpLCAvLyA4XHJcbiAgICAgICAgbmV3IFZlcnRleCgxLCBuZXcgVmVjdG9yMig0LCAxKSksIC8vIDlcclxuICAgICAgICBuZXcgVmVydGV4KDMsIG5ldyBWZWN0b3IyKDAsIDEpKSwgLy8gMTBcclxuICAgICAgICBuZXcgVmVydGV4KDcsIG5ldyBWZWN0b3IyKDEsIDEpKSwgLy8gMTFcclxuICAgICAgICBuZXcgVmVydGV4KDQsIG5ldyBWZWN0b3IyKDEsIDApKSwgLy8gMTJcclxuICAgICAgICBuZXcgVmVydGV4KDIsIG5ldyBWZWN0b3IyKDAsIDApKSwgLy8gMTNcclxuICAgICAgICBuZXcgVmVydGV4KDYsIG5ldyBWZWN0b3IyKDEsIDApKSwgLy8gMTRcclxuICAgICAgICBuZXcgVmVydGV4KDUsIG5ldyBWZWN0b3IyKDEsIDEpKSAgLy8gMTVcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRoaXMuZmFjZXMgPSBbXHJcbiAgICAgICAgLi4ubmV3IFF1YWQodGhpcy52ZXJ0aWNlcywgMCwgMSwgMiwgMykuZmFjZXMsIC8vIGZyb250XHJcbiAgICAgICAgLi4ubmV3IFF1YWQodGhpcy52ZXJ0aWNlcywgNywgNiwgNSwgNCkuZmFjZXMsIC8vIGJhY2tcclxuICAgICAgICAuLi5uZXcgUXVhZCh0aGlzLnZlcnRpY2VzLCAzLCAyLCA2LCA3KS5mYWNlcywgLy8gcmlnaHRcclxuICAgICAgICAuLi5uZXcgUXVhZCh0aGlzLnZlcnRpY2VzLCA0LCA1LCA5LCA4KS5mYWNlcywgLy8gbGVmdFxyXG4gICAgICAgIC4uLm5ldyBRdWFkKHRoaXMudmVydGljZXMsIDAsIDEwLCAxMSwgMTIpLmZhY2VzLCAvLyB0b3BcclxuICAgICAgICAuLi5uZXcgUXVhZCh0aGlzLnZlcnRpY2VzLCAxMywgMSwgMTUsIDE0KS5mYWNlcyAgLy8gYm90dG9tXHJcbiAgICAgIF07XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGUgYSBmbGF0IHBvbHlnb24uIEFsbCB0cmlnb25zIHNoYXJlIHZlcnRleCAwLCBzbyBjYXJlZnVsIGRlc2lnbiBpcyByZXF1aXJlZCB0byBjcmVhdGUgY29uY2F2ZSBwb2x5Z29ucy4gXHJcbiAgICogVmVydGV4IDAgaXMgYWxzbyBhc3NvY2lhdGVkIHdpdGggdGhlIGZhY2Ugbm9ybWFsLlxyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqICAgICAgICAgICAgIDAgXHJcbiAgICogICAgICAgICAgIDHilbF84pWyICA0IC4uLlxyXG4gICAqICAgICAgICAgICAg4pWyfF/ilbLilbEgXHJcbiAgICogICAgICAgICAgICAyICAgM1xyXG4gICAqIGBgYFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxLTIwMjJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaFBvbHlnb24gZXh0ZW5kcyBNZXNoIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaFBvbHlnb24pO1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBzaGFwZURlZmF1bHQ6IFZlY3RvcjJbXSA9IFsgLy8gdHJpZ29uIGlzIHRoZSBtaW5pbWFsIHNoYXBlXHJcbiAgICAgIG5ldyBWZWN0b3IyKC0xLCAtMSksXHJcbiAgICAgIG5ldyBWZWN0b3IyKDEsIC0xKSxcclxuICAgICAgbmV3IFZlY3RvcjIoMCwgMSlcclxuICAgIF07XHJcbiAgICBwcm90ZWN0ZWQgc2hhcGU6IE11dGFibGVBcnJheTxWZWN0b3IyPiA9IG5ldyBNdXRhYmxlQXJyYXk8VmVjdG9yMj4oVmVjdG9yMik7XHJcbiAgICBwcm90ZWN0ZWQgZml0VGV4dHVyZTogYm9vbGVhbjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiTWVzaFBvbHlnb25cIiwgX3NoYXBlOiBWZWN0b3IyW10gPSBNZXNoUG9seWdvbi5zaGFwZURlZmF1bHQsIF9maXRUZXh0dXJlOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIHRoaXMuY3JlYXRlKF9zaGFwZSwgX2ZpdFRleHR1cmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgbWluVmVydGljZXMoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIDM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZShfc2hhcGU6IFZlY3RvcjJbXSA9IFtdLCBfZml0VGV4dHVyZTogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zaGFwZSA9IDxNdXRhYmxlQXJyYXk8VmVjdG9yMj4+TXV0YWJsZUFycmF5LmZyb20oX3NoYXBlLm1hcChfdmVydGV4ID0+IF92ZXJ0ZXguY2xvbmUpKTtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICB0aGlzLmZpdFRleHR1cmUgPSBfZml0VGV4dHVyZTtcclxuXHJcbiAgICAgIGlmIChfc2hhcGUubGVuZ3RoIDwgdGhpcy5taW5WZXJ0aWNlcykge1xyXG4gICAgICAgIERlYnVnLndhcm4oYEF0IGxlYXN0ICR7dGhpcy5taW5WZXJ0aWNlc30gdmVydGljZXMgbmVlZGVkIHRvIGNvbnN0cnVjdCBNZXNoUG9seWdvbiwgZGVmYXVsdCB0cmlnb24gdXNlZGApO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlKE1lc2hQb2x5Z29uLnNoYXBlRGVmYXVsdCwgdHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgc2hhcGU6IFZlY3RvcjJbXSA9IF9zaGFwZTtcclxuXHJcbiAgICAgIGxldCBtaW46IFZlY3RvcjIgPSBWZWN0b3IyLlpFUk8oKTtcclxuICAgICAgbGV0IG1heDogVmVjdG9yMiA9IFZlY3RvcjIuWkVSTygpO1xyXG4gICAgICB0aGlzLnZlcnRpY2VzID0gbmV3IFZlcnRpY2VzKCk7XHJcbiAgICAgIGZvciAobGV0IHZlcnRleCBvZiBzaGFwZSkge1xyXG4gICAgICAgIHRoaXMudmVydGljZXMucHVzaChuZXcgVmVydGV4KHZlcnRleC50b1ZlY3RvcjMoKSkpO1xyXG5cclxuICAgICAgICBtaW4ueCA9IE1hdGgubWluKG1pbi54LCB2ZXJ0ZXgueCk7XHJcbiAgICAgICAgbWF4LnggPSBNYXRoLm1heChtYXgueCwgdmVydGV4LngpO1xyXG4gICAgICAgIG1pbi55ID0gTWF0aC5taW4obWluLnksIHZlcnRleC55KTtcclxuICAgICAgICBtYXgueSA9IE1hdGgubWF4KG1heC55LCB2ZXJ0ZXgueSk7XHJcbiAgICAgIH1cclxuICAgICAgbGV0IHNpemU6IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihtYXgueCAtIG1pbi54LCBtYXgueSAtIG1pbi55KTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmZpdFRleHR1cmUpIHtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgc2hhcGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGxldCB0ZXh0dXJlVVY6IFZlY3RvcjIgPSBWZWN0b3IyLkRJRkZFUkVOQ0Uoc2hhcGVbaV0sIG1pbik7XHJcbiAgICAgICAgICB0aGlzLnZlcnRpY2VzW2ldLnV2ID0gbmV3IFZlY3RvcjIodGV4dHVyZVVWLnggLyBzaXplLngsIDEgLSB0ZXh0dXJlVVYueSAvIHNpemUueSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIF9zaGFwZS5mb3JFYWNoKChfdmVydGV4LCBfaSkgPT4gdGhpcy52ZXJ0aWNlc1tfaV0udXYgPSBuZXcgVmVjdG9yMihfdmVydGV4LngsIC1fdmVydGV4LnkpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5mYWNlcyA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAyOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKylcclxuICAgICAgICB0aGlzLmZhY2VzLnB1c2gobmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgaSAtIDEsIGksIDApKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uc2hhcGUgPSBTZXJpYWxpemVyLnNlcmlhbGl6ZUFycmF5KFZlY3RvcjIsIHRoaXMuc2hhcGUpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmZpdFRleHR1cmUgPSB0aGlzLmZpdFRleHR1cmU7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICBsZXQgdmVjdG9yczogVmVjdG9yMltdID0gPFZlY3RvcjJbXT5hd2FpdCBTZXJpYWxpemVyLmRlc2VyaWFsaXplQXJyYXkoX3NlcmlhbGl6YXRpb24uc2hhcGUpO1xyXG4gICAgICB0aGlzLmNyZWF0ZSh2ZWN0b3JzLCBfc2VyaWFsaXphdGlvbi5maXRUZXh0dXJlKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5tdXRhdGUoX211dGF0b3IpO1xyXG4gICAgICB0aGlzLmNyZWF0ZSh0aGlzLnNoYXBlLCB0aGlzLmZpdFRleHR1cmUpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULk1VVEFURSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLnJlZHVjZU11dGF0b3IoX211dGF0b3IpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiTWVzaFBvbHlnb24udHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlcyBhbiBleHRydXNpb24gb2YgYSBwb2x5Z29uIGJ5IGEgc2VyaWVzIG9mIHRyYW5zZm9ybWF0aW9uc1xyXG4gICAqIGBgYHBsYWludGV4dCAgXHJcbiAgICogICAgICAgICAgICAgICAgICAgICAgX19fX1xyXG4gICAqIFBvbHlnb24gICAgICAgICBfX19f4pWx4pWyICAg4pWyICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5XHJcbiAgICogVHJhbnNmb3JtIDAgIOKGkiDilbEg4pWyX1/ilbJf4pWyX19f4pWyIOKGkCBUcmFuc2Zvcm0gMiAgICAgICAgICB6IF9f4pSCXHJcbiAgICogKGJhc2UpICAgICAgICAg4pWyX+KVsV9f4pWxIOKVsSAgIOKVsSAgIChsaWQpICAgICAgICAgICAgICAgICAgICAg4pWyICAgICAgIFxyXG4gICAqICAgICBUcmFuc2Zvcm0gMSAg4oaSICDilbLilbFfX1/ilbEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeFxyXG4gICAqIGBgYFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxLTIwMjJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaEV4dHJ1c2lvbiBleHRlbmRzIE1lc2hQb2x5Z29uIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaEV4dHJ1c2lvbik7XHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIG10eERlZmF1bHRzOiBNYXRyaXg0eDRbXSA9IFsgLy8gb2Zmc2V0IG9mICswLjV6IGFuZCAtMC41eiBhcyBkZWZhdWx0XHJcbiAgICAgIE1hdHJpeDR4NC5UUkFOU0xBVElPTihWZWN0b3IzLlooMC41KSksXHJcbiAgICAgIE1hdHJpeDR4NC5UUkFOU0xBVElPTihWZWN0b3IzLlooLTAuNSkpXHJcbiAgICBdO1xyXG4gICAgcHJpdmF0ZSBtdHhUcmFuc2Zvcm1zOiBNdXRhYmxlQXJyYXk8TWF0cml4NHg0PiA9IG5ldyBNdXRhYmxlQXJyYXkoTWF0cml4NHg0KTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiTWVzaEV4dHJ1c2lvblwiLCBfdmVydGljZXM6IFZlY3RvcjJbXSA9IE1lc2hQb2x5Z29uLnNoYXBlRGVmYXVsdCwgX210eFRyYW5zZm9ybXM6IE1hdHJpeDR4NFtdID0gTWVzaEV4dHJ1c2lvbi5tdHhEZWZhdWx0cywgX2ZpdFRleHR1cmU6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lLCBfdmVydGljZXMsIF9maXRUZXh0dXJlKTtcclxuICAgICAgdGhpcy5leHRydWRlKF9tdHhUcmFuc2Zvcm1zKTtcclxuICAgICAgLy8gY29uc29sZS5sb2coXCJNdXRhdG9yXCIsIHRoaXMuZ2V0TXV0YXRvcigpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24udHJhbnNmb3JtcyA9IFNlcmlhbGl6ZXIuc2VyaWFsaXplQXJyYXkoTWF0cml4NHg0LCB0aGlzLm10eFRyYW5zZm9ybXMpO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGxldCBtdHhUcmFuc2Zvcm1zOiBNYXRyaXg0eDRbXTtcclxuICAgICAgaWYgKF9zZXJpYWxpemF0aW9uLnRyYW5zZm9ybXMpXHJcbiAgICAgICAgbXR4VHJhbnNmb3JtcyA9IDxNYXRyaXg0eDRbXT5hd2FpdCBTZXJpYWxpemVyLmRlc2VyaWFsaXplQXJyYXkoX3NlcmlhbGl6YXRpb24udHJhbnNmb3Jtcyk7XHJcbiAgICAgIHRoaXMuZXh0cnVkZShtdHhUcmFuc2Zvcm1zKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5tdXRhdGUoX211dGF0b3IpO1xyXG4gICAgICB0aGlzLmV4dHJ1ZGUodGhpcy5tdHhUcmFuc2Zvcm1zKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5NVVRBVEUpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuXHJcbiAgICBwcml2YXRlIGV4dHJ1ZGUoX210eFRyYW5zZm9ybXM6IE1hdHJpeDR4NFtdID0gTWVzaEV4dHJ1c2lvbi5tdHhEZWZhdWx0cyk6IHZvaWQge1xyXG4gICAgICB0aGlzLm10eFRyYW5zZm9ybXMgPSA8TXV0YWJsZUFycmF5PE1hdHJpeDR4ND4+TXV0YWJsZUFycmF5LmZyb20oPE11dGFibGVBcnJheTxNYXRyaXg0eDQ+Pl9tdHhUcmFuc2Zvcm1zKTtcclxuICAgICAgbGV0IG5UcmFuc2Zvcm1zOiBudW1iZXIgPSBfbXR4VHJhbnNmb3Jtcy5sZW5ndGg7XHJcbiAgICAgIGxldCBuVmVydGljZXNTaGFwZTogbnVtYmVyID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7XHJcblxyXG4gICAgICAvLyBjcmVhdGUgbmV3IHZlcnRleCBjbG91ZCwgY3VycmVudCBjbG91ZCBob2xkcyBNZXNoUG9seWdvblxyXG4gICAgICBsZXQgdmVydGljZXM6IFZlcnRpY2VzID0gbmV3IFZlcnRpY2VzKCk7XHJcblxyXG4gICAgICAvLyBjcmVhdGUgYmFzZSBieSB0cmFuc2Zvcm1hdGlvbiBvZiBwb2x5Z29uIHdpdGggZmlyc3QgdHJhbnNmb3JtXHJcbiAgICAgIGxldCBiYXNlOiBWZXJ0ZXhbXSA9IHRoaXMudmVydGljZXMubWFwKChfdjogVmVydGV4KSA9PiBuZXcgVmVydGV4KFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3YucG9zaXRpb24sIF9tdHhUcmFuc2Zvcm1zWzBdLCB0cnVlKSwgX3YudXYpKTtcclxuICAgICAgdmVydGljZXMucHVzaCguLi5iYXNlKTtcclxuICAgICAgLy8gY3JlYXRlIGxpZCBieSB0cmFuc2Zvcm1hdGlvbiBvZiBwb2x5Z29uIHdpdGggbGFzdCB0cmFuc2Zvcm1cclxuICAgICAgbGV0IGxpZDogVmVydGV4W10gPSB0aGlzLnZlcnRpY2VzLm1hcCgoX3Y6IFZlcnRleCkgPT4gbmV3IFZlcnRleChWZWN0b3IzLlRSQU5TRk9STUFUSU9OKF92LnBvc2l0aW9uLCBfbXR4VHJhbnNmb3Jtc1tuVHJhbnNmb3JtcyAtIDFdLCB0cnVlKSwgX3YudXYpKTtcclxuICAgICAgdmVydGljZXMucHVzaCguLi5saWQpO1xyXG5cclxuICAgICAgLy8gcmVjcmVhdGUgYmFzZSBmYWNlcyB0byByZWNhbGN1bGF0ZSBub3JtYWxzXHJcbiAgICAgIHRoaXMuZmFjZXMgPSB0aGlzLmZhY2VzLm1hcCgoX2ZhY2U6IEZhY2UpID0+IG5ldyBGYWNlKHZlcnRpY2VzLCBfZmFjZS5pbmRpY2VzWzBdLCBfZmFjZS5pbmRpY2VzWzFdLCBfZmFjZS5pbmRpY2VzWzJdKSk7XHJcbiAgICAgIC8vIGNyZWF0ZSB0aGUgbGlkIGZhY2VzIHVzaW5nIHRoZSBpbmRpY2VzIG9mIHRoZSBiYXNlIGZhY2VzLCBidXQgd2l0aCBhbiBpbmRleCBvZmZzZXQgYW5kIHJldmVyc2Ugb3JkZXIgb2YgaW5kaWNlc1xyXG4gICAgICB0aGlzLmZhY2VzLnB1c2goLi4udGhpcy5mYWNlcy5tYXAoX2ZhY2UgPT5cclxuICAgICAgICBuZXcgRmFjZSh2ZXJ0aWNlcywgX2ZhY2UuaW5kaWNlc1syXSArIG5WZXJ0aWNlc1NoYXBlLCBfZmFjZS5pbmRpY2VzWzFdICsgblZlcnRpY2VzU2hhcGUsIF9mYWNlLmluZGljZXNbMF0gKyBuVmVydGljZXNTaGFwZSlcclxuICAgICAgKSk7XHJcblxyXG4gICAgICBmb3IgKGxldCB0OiBudW1iZXIgPSAwOyB0IDwgblRyYW5zZm9ybXM7IHQrKykge1xyXG4gICAgICAgIGxldCBtdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCA9IF9tdHhUcmFuc2Zvcm1zW3RdO1xyXG4gICAgICAgIGxldCByZWZlclRvQ2xvc2U6IG51bWJlciA9IHZlcnRpY2VzLmxlbmd0aDtcclxuICAgICAgICBsZXQgd3JhcDogVmVydGV4W10gPSB0aGlzLnZlcnRpY2VzLm1hcCgoX3Y6IFZlcnRleCwgX2k6IG51bWJlcikgPT5cclxuICAgICAgICAgIG5ldyBWZXJ0ZXgoVmVjdG9yMy5UUkFOU0ZPUk1BVElPTihfdi5wb3NpdGlvbiwgbXR4VHJhbnNmb3JtLCB0cnVlKSwgbmV3IFZlY3RvcjIoX2kgLyBuVmVydGljZXNTaGFwZSwgdCAvIG5UcmFuc2Zvcm1zKSlcclxuICAgICAgICApO1xyXG4gICAgICAgIHZlcnRpY2VzLnB1c2goLi4ud3JhcCk7XHJcbiAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVydGV4KHJlZmVyVG9DbG9zZSwgbmV3IFZlY3RvcjIoMSwgdCAvIG5UcmFuc2Zvcm1zKSkpO1xyXG4gICAgICAgIC8vIGlmIChpID4gMCAmJiBpIDwgblRyYW5zZm9ybXMgLSAxKVxyXG4gICAgICAgIC8vICAgdmVydGljZXMucHVzaCguLi53cmFwLm1hcCgoX3ZlY3RvcjogVmVjdG9yMykgPT4gX3ZlY3Rvci5jbG9uZSkpOyA8LSBubyBzbGljaW5nIGZvciBmbGF0IHNoYWRpbmcgeWV0Li4uXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGNyZWF0ZSBpbmRpemVzIGZvciB3cmFwcGVyXHJcbiAgICAgIGZvciAobGV0IHQ6IG51bWJlciA9IDA7IHQgPCBuVHJhbnNmb3JtcyAtIDE7IHQrKylcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgblZlcnRpY2VzU2hhcGU7IGkrKykge1xyXG4gICAgICAgICAgbGV0IGluZGV4OiBudW1iZXIgPVxyXG4gICAgICAgICAgICArIDIgKiBuVmVydGljZXNTaGFwZSAvLyBiYXNlICYgbGlkIGFyZSBvZmZzZXRzIFxyXG4gICAgICAgICAgICArIHQgKiAoblZlcnRpY2VzU2hhcGUgKyAxKSAvLyBvZmZzZXQgZm9yIGVhY2ggdHJhbnNmb3JtYXRpb25cclxuICAgICAgICAgICAgKyBpO1xyXG4gICAgICAgICAgbGV0IHF1YWQ6IFF1YWQgPSBuZXcgUXVhZCh2ZXJ0aWNlcywgaW5kZXgsIGluZGV4ICsgblZlcnRpY2VzU2hhcGUgKyAxLCBpbmRleCArIG5WZXJ0aWNlc1NoYXBlICsgMiwgaW5kZXggKyAxLCBRVUFEU1BMSVQuQVRfMCk7XHJcbiAgICAgICAgICB0aGlzLmZhY2VzLnB1c2goLi4ucXVhZC5mYWNlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIHByaXZhdGUgY2FsY3VsYXRlUG9seWdvbkxlbmd0aHMoKTogbnVtYmVyW10ge1xyXG4gICAgLy8gICBsZXQgcmVzdWx0OiBudW1iZXJbXSA9IFtdO1xyXG4gICAgLy8gICBsZXQgZmlyc3Q6IFZlY3RvcjM7XHJcbiAgICAvLyAgIGxldCBwcmV2OiBWZWN0b3IzO1xyXG4gICAgLy8gICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgLy8gICAgIGxldCBjdXJyZW50OiBWZWN0b3IzID0gbmV3IFZlY3RvcjModGhpcy52ZXJ0aWNlc1tpXSwgdGhpcy52ZXJ0aWNlc1tpICsgMV0sIHRoaXMudmVydGljZXNbaSArIDJdKTtcclxuICAgIC8vICAgICBpZiAocHJldilcclxuICAgIC8vICAgICAgIHJlc3VsdC5wdXNoKFZlY3RvcjMuRElGRkVSRU5DRShjdXJyZW50LCBwcmV2KS5tYWduaXR1ZGUpO1xyXG4gICAgLy8gICAgIGVsc2VcclxuICAgIC8vICAgICAgIGZpcnN0ID0gY3VycmVudDtcclxuICAgIC8vICAgICBwcmV2ID0gY3VycmVudDtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICByZXN1bHQucHVzaChWZWN0b3IzLkRJRkZFUkVOQ0UoZmlyc3QsIHByZXYpLm1hZ25pdHVkZSk7XHJcbiAgICAvLyAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAvLyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcblxyXG4gICAgLyoqIEFsbG93cyB0byBjcmVhdGUgY3VzdG9tIG1lc2hlcyBmcm9tIGdpdmVuIERhdGEgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBNZXNoRnJvbURhdGEgZXh0ZW5kcyBNZXNoIHtcclxuICAgICAgICAgICAgcHJvdGVjdGVkIHZlcnRpY2VzVG9TZXQ6IEZsb2F0MzJBcnJheTtcclxuICAgICAgICAgICAgcHJvdGVjdGVkIHRleHR1cmVVVnNUb1NldDogRmxvYXQzMkFycmF5O1xyXG4gICAgICAgICAgICBwcm90ZWN0ZWQgaW5kaWNlc1RvU2V0OiBVaW50MTZBcnJheTtcclxuICAgICAgICAgICAgcHJvdGVjdGVkIGZhY2VOb3JtYWxzVG9TZXQ6IEZsb2F0MzJBcnJheTtcclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IoX3ZlcnRpY2VzOiBGbG9hdDMyQXJyYXksIF90ZXh0dXJlVVZzOiBGbG9hdDMyQXJyYXksIF9pbmRpY2VzOiBVaW50MTZBcnJheSwgX2ZhY2VOb3JtYWxzOiBGbG9hdDMyQXJyYXkpIHtcclxuICAgICAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICAgICAgdGhpcy52ZXJ0aWNlc1RvU2V0ID0gX3ZlcnRpY2VzO1xyXG4gICAgICAgICAgICB0aGlzLnRleHR1cmVVVnNUb1NldCA9IF90ZXh0dXJlVVZzO1xyXG4gICAgICAgICAgICB0aGlzLmluZGljZXNUb1NldCA9IF9pbmRpY2VzO1xyXG4gICAgICAgICAgICB0aGlzLmZhY2VOb3JtYWxzVG9TZXQgPSBfZmFjZU5vcm1hbHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY3JlYXRlVmVydGljZXMoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVydGljZXNUb1NldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVUZXh0dXJlVVZzKCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHR1cmVVVnNUb1NldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVJbmRpY2VzKCk6IFVpbnQxNkFycmF5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kaWNlc1RvU2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNyZWF0ZUZsYXROb3JtYWxzKCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZhY2VOb3JtYWxzVG9TZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIE1lc2ggbG9hZGVkIGZyb20gYSBmaWxlXHJcbiAgICogQGF1dGhvciBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyMi0yMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hJbXBvcnQgZXh0ZW5kcyBNZXNoIHtcclxuICAgIHB1YmxpYyB1cmw6IFJlcXVlc3RJbmZvO1xyXG4gICAgcHJpdmF0ZSBsb2FkZXI6IHR5cGVvZiBNZXNoTG9hZGVyO1xyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGNvbnN0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi51cmwgPSB0aGlzLnVybC50b1N0cmluZygpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmZpbGV0eXBlID0gdGhpcy5sb2FkZXIubmFtZS5yZXBsYWNlKE1lc2hMb2FkZXIubmFtZSwgXCJcIik7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgdGhpcy51cmwgPSBfc2VyaWFsaXphdGlvbi51cmw7XHJcbiAgICAgIHRoaXMubG9hZGVyID0gUmVmbGVjdC5nZXQoRnVkZ2VDb3JlLCBNZXNoTG9hZGVyLm5hbWUuY29uY2F0KF9zZXJpYWxpemF0aW9uLmZpbGV0eXBlKSk7XHJcbiAgICAgIHJldHVybiB0aGlzLmxvYWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZChfbG9hZGVyOiB0eXBlb2YgTWVzaExvYWRlciA9IHRoaXMubG9hZGVyLCBfdXJsOiBSZXF1ZXN0SW5mbyA9IHRoaXMudXJsLCBfZGF0YT86IE9iamVjdCk6IFByb21pc2U8TWVzaEltcG9ydD4ge1xyXG4gICAgICB0aGlzLnVybCA9IF91cmw7XHJcbiAgICAgIHRoaXMubG9hZGVyID0gX2xvYWRlcjtcclxuICAgICAgaWYgKCF0aGlzLnJlbmRlck1lc2gpXHJcbiAgICAgICAgdGhpcy5yZW5kZXJNZXNoID0gbmV3IFJlbmRlck1lc2godGhpcyk7XHJcbiAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgcmV0dXJuIF9sb2FkZXIubG9hZCh0aGlzLCBfZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBzdXBlci5tdXRhdGUoX211dGF0b3IpO1xyXG4gICAgICBpZiAodHlwZW9mIChfbXV0YXRvci51cmwpICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHRoaXMubG9hZCh0aGlzLmxvYWRlciwgX211dGF0b3IudXJsKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGUgYSBzaW1wbGUgcHlyYW1pZCB3aXRoIGVkZ2VzIGF0IHRoZSBiYXNlIG9mIGxlbmd0aCAxIGFuZCBhIGhlaWdodCBvZiAxLiBUaGUgc2lkZXMgY29uc2lzdGluZyBvZiBvbmUsIHRoZSBiYXNlIG9mIHR3byB0cmlnb25zXHJcbiAgICogYGBgcGxhaW50ZXh0XHJcbiAgICogICAgICAgICAgICAgICA0XHJcbiAgICogICAgICAgICAgICAgIC9cXGAuXHJcbiAgICogICAgICAgICAgICAzL19fXFxfXFwgMlxyXG4gICAqICAgICAgICAgICAwL19fX19cXC8xXHJcbiAgICogYGBgXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaFB5cmFtaWQgZXh0ZW5kcyBNZXNoIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaFB5cmFtaWQpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoUHlyYW1pZFwiKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lKTtcclxuICAgICAgLy8gdGhpcy5jcmVhdGUoKTtcclxuXHJcbiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgVmVydGljZXMoXHJcbiAgICAgICAgLy8gZ3JvdW5kIHZlcnRpY2VzXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygtMC41LCAwLjAsIDAuNSksIG5ldyBWZWN0b3IyKDAsIDEpKSxcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKDAuNSwgMC4wLCAwLjUpLCBuZXcgVmVjdG9yMigxLCAxKSksXHJcbiAgICAgICAgbmV3IFZlcnRleChuZXcgVmVjdG9yMygwLjUsIDAuMCwgLTAuNSksIG5ldyBWZWN0b3IyKDEsIDApKSxcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKC0wLjUsIDAuMCwgLTAuNSksIG5ldyBWZWN0b3IyKDAsIDApKSxcclxuICAgICAgICAvLyB0aXAgKHZlcnRleCAjNClcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKDAuMCwgMS4wLCAwLjApLCBuZXcgVmVjdG9yMigwLjUsIDAuNSkpLFxyXG4gICAgICAgIC8vIGZsb29yIGFnYWluIGZvciBkb3duc2lkZSB0ZXh0dXJlXHJcbiAgICAgICAgbmV3IFZlcnRleCgwLCBuZXcgVmVjdG9yMigwLCAwKSksXHJcbiAgICAgICAgbmV3IFZlcnRleCgxLCBuZXcgVmVjdG9yMigxLCAwKSksXHJcbiAgICAgICAgbmV3IFZlcnRleCgyLCBuZXcgVmVjdG9yMigxLCAxKSksXHJcbiAgICAgICAgbmV3IFZlcnRleCgzLCBuZXcgVmVjdG9yMigwLCAxKSlcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5mYWNlcyA9IFtcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCA0LCAwLCAxKSxcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCA0LCAxLCAyKSxcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCA0LCAyLCAzKSxcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCA0LCAzLCAwKSxcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCA1ICsgMCwgNSArIDIsIDUgKyAxKSxcclxuICAgICAgICBuZXcgRmFjZSh0aGlzLnZlcnRpY2VzLCA1ICsgMCwgNSArIDMsIDUgKyAyKVxyXG4gICAgICBdO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIGEgc2ltcGxlIHF1YWQgd2l0aCBlZGdlcyBvZiBsZW5ndGggMSwgdGhlIGZhY2UgY29uc2lzdGluZyBvZiB0d28gdHJpZ29uc1xyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqICAgICAgICAwIF9fIDNcclxuICAgKiAgICAgICAgIHxfXFx8XHJcbiAgICogICAgICAgIDEgICAgMiAgICAgICAgICAgICBcclxuICAgKiBgYGAgXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTktMjAyMlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBNZXNoUXVhZCBleHRlbmRzIE1lc2hQb2x5Z29uIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaFF1YWQpO1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBzaGFwZTogVmVjdG9yMltdID0gW1xyXG4gICAgICBuZXcgVmVjdG9yMigtMC41LCAwLjUpLCBuZXcgVmVjdG9yMigtMC41LCAtMC41KSwgbmV3IFZlY3RvcjIoMC41LCAtMC41KSwgbmV3IFZlY3RvcjIoMC41LCAwLjUpXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoUXVhZFwiKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lLCBNZXNoUXVhZC5zaGFwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLy8gZmxhdCBlcXVhbHMgc21vb3RoXHJcbiAgICAvLyBwdWJsaWMgZ2V0IHZlcnRpY2VzRmxhdCgpOiBGbG9hdDMyQXJyYXkgeyByZXR1cm4gdGhpcy52ZXJ0aWNlczsgfVxyXG4gICAgLy8gcHVibGljIGdldCBpbmRpY2VzRmxhdCgpOiBVaW50MTZBcnJheSB7IHJldHVybiB0aGlzLmluZGljZXM7IH1cclxuICAgIC8vIHB1YmxpYyBnZXQgbm9ybWFsc0ZsYXQoKTogRmxvYXQzMkFycmF5IHsgcmV0dXJuIHRoaXMubm9ybWFsc1ZlcnRleDsgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2dlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHRoaXMuY3JlYXRlKE1lc2hRdWFkLnNoYXBlLCB0cnVlKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnNoYXBlO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IuZml0VGV4dHVyZTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqIFxyXG4gICAqIFRoaXMgZnVuY3Rpb24gdHlwZSB0YWtlcyB4IGFuZCB6IGFzIFBhcmFtZXRlcnMgYW5kIHJldHVybnMgYSBudW1iZXIgYmV0d2VlbiAtMSBhbmQgMSB0byBiZSB1c2VkIGFzIGEgaGVpZ2h0bWFwLiBcclxuICAgKiB4ICogeiAqIDIgcmVwcmVzZW50IHRoZSBhbW91dCBvZiBmYWNlcyB3aGljaCBhcmUgY3JlYXRlZC4gQXMgYSByZXN1bHQgeW91IGdldCAxIHZlcnRleCBtb3JlIGluIGVhY2ggZGlyZWN0aW9uICh4IGFuZCB6IGF4aXMpXHJcbiAgICogVGhlIHktY29tcG9uZW50IG9mIHRoZSByZXN1bHRpbmcgbWVzaCBtYXkgYmUgbW92ZWQgdG8gdmFsdWVzIGJldHdlZW4gMCBhbmQgYSBtYXhpbXVtIGhlaWdodC5cclxuICAgKiBAYXV0aG9ycyBTaW1vbiBTdG9ybC1TY2h1bGtlLCBIRlUsIDIwMjAgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMS0yMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IHR5cGUgSGVpZ2h0TWFwRnVuY3Rpb24gPSAoeDogbnVtYmVyLCB6OiBudW1iZXIpID0+IG51bWJlcjtcclxuXHJcbiAgLyoqXHJcbiAgICogSW5mb3JtYXRpb24gYWJvdXQgdGhlIHZlcnRpY2FsIHByb2plY3Rpb24gb2YgYSBnaXZlbiBwb3NpdGlvbiBvbnRvIHRoZSB0ZXJyYWluXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFRlcnJhaW5JbmZvIHtcclxuICAgIC8qKiB0aGUgcG9zaXRpb24gb2YgdGhlIHBvaW50IHZlcnRpY2FsbHkgcHJvamVjdGVkIG9uIHRoZSB0ZXJyYWluIGluIHdvcmxkIGNvb3JkaW5hdGVzICovXHJcbiAgICBwb3NpdGlvbjogVmVjdG9yMztcclxuICAgIC8qKiB0aGUgbm9ybWFsIG9mIHRoZSBmYWNlIG9mIHRoZSB0ZXJyYWluIHVuZGVyIHRoZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcyAqL1xyXG4gICAgbm9ybWFsOiBWZWN0b3IzO1xyXG4gICAgLyoqIHZlcnRpY2FsIGRpc3RhbmNlIG9mIHRoZSBwb2ludCB0byB0aGUgdGVycmFpbiwgbmVnYXRpdmUgaWYgYmVsb3cgKi9cclxuICAgIGRpc3RhbmNlOiBudW1iZXI7XHJcbiAgICAvKiogdGhlIHBvc2l0aW9uIGluIGZhY2UgY29vcmRpbmF0ZXMgKi9cclxuICAgIHBvc2l0aW9uRmFjZTogVmVjdG9yMztcclxuICAgIC8qKiB0aGUgaW5kZXggb2YgdGhlIGZhY2UgdGhlIHBvc2l0aW9uIGlzIGluc2lkZSAqL1xyXG4gICAgaW5kZXg6IG51bWJlcjtcclxuICAgIC8qKiB0aGUgZ3JpZCBjb29yZGluYXRlcyBvZiB0aGUgcXVhZCB0aGUgZmFjZSBiZWxvbmdzIHRvICovXHJcbiAgICBncmlkOiBWZWN0b3IyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSB0ZXJyYWluIHNwcmVhZHMgb3V0IGluIHRoZSB4LXotcGxhbmUsIHkgaXMgdGhlIGhlaWdodCBkZXJpdmVkIGZyb20gdGhlIGhlaWdodG1hcCBmdW5jdGlvbi4gXHJcbiAgICogVGhlIHRlcnJhaW4gaXMgYWx3YXlzIDEgaW4gc2l6ZSBpbiBhbGwgZGltZW5zaW9ucywgZml0dGluZyBpbnRvIHRoZSB1bml0LWN1YmUuIFxyXG4gICAqIFJlc29sdXRpb24gZGV0ZXJtaW5lcyB0aGUgbnVtYmVyIG9mIHF1YWRzIGluIHggYW5kIHogZGltZW5zaW9uLCBzY2FsZSB0aGUgZmFjdG9yIGFwcGxpZWQgdG8gdGhlIHgsei1jb29yZGluYXRlcyBwYXNzZWQgdG8gdGhlIGhlaWdodG1hcCBmdW5jdGlvbi5cclxuICAgKiBTdGFuZGFyZCBmdW5jdGlvbiBpcyB0aGUgc2ltcGxleCBub2lzZSBpbXBsZW1lbnRlZCB3aXRoIEZVREdFLCBidXQgYW5vdGhlciBmdW5jdGlvbiBjYW4gYmUgZ2l2ZW4uXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjEtMjAyMiB8IFNpbW9uIFN0b3JsLVNjaHVsa2UsIEhGVSwgMjAyMCB8IE1vcml0eiBCZWF1Z3JhbmQsIEhGVSwgMjAyMVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBNZXNoVGVycmFpbiBleHRlbmRzIE1lc2gge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IE1lc2gucmVnaXN0ZXJTdWJjbGFzcyhNZXNoVGVycmFpbik7XHJcbiAgICBwcm90ZWN0ZWQgcmVzb2x1dGlvbjogVmVjdG9yMjtcclxuICAgIHByb3RlY3RlZCBzY2FsZTogVmVjdG9yMjtcclxuICAgIHByb3RlY3RlZCBzZWVkOiBudW1iZXI7XHJcbiAgICBwcm90ZWN0ZWQgaGVpZ2h0TWFwRnVuY3Rpb246IEhlaWdodE1hcEZ1bmN0aW9uID0gbnVsbDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiTWVzaFRlcnJhaW5cIiwgX3Jlc29sdXRpb246IFZlY3RvcjIgPSBWZWN0b3IyLk9ORSgyKSwgX3NjYWxlSW5wdXQ6IFZlY3RvcjIgPSBWZWN0b3IyLk9ORSgpLCBfZnVuY3Rpb25PclNlZWQ6IEhlaWdodE1hcEZ1bmN0aW9uIHwgbnVtYmVyID0gMCkge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIHRoaXMuY3JlYXRlKF9yZXNvbHV0aW9uLCBfc2NhbGVJbnB1dCwgX2Z1bmN0aW9uT3JTZWVkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlKF9yZXNvbHV0aW9uOiBWZWN0b3IyID0gVmVjdG9yMi5PTkUoMiksIF9zY2FsZUlucHV0OiBWZWN0b3IyID0gVmVjdG9yMi5PTkUoKSwgX2Z1bmN0aW9uT3JTZWVkOiBIZWlnaHRNYXBGdW5jdGlvbiB8IG51bWJlciA9IDApOiB2b2lkIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICB0aGlzLnNlZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMucmVzb2x1dGlvbiA9IG5ldyBWZWN0b3IyKE1hdGgucm91bmQoX3Jlc29sdXRpb24ueCksIE1hdGgucm91bmQoX3Jlc29sdXRpb24ueSkpO1xyXG4gICAgICB0aGlzLnNjYWxlID0gX3NjYWxlSW5wdXQuY2xvbmU7XHJcblxyXG4gICAgICBpZiAoX2Z1bmN0aW9uT3JTZWVkIGluc3RhbmNlb2YgRnVuY3Rpb24pXHJcbiAgICAgICAgdGhpcy5oZWlnaHRNYXBGdW5jdGlvbiA9IF9mdW5jdGlvbk9yU2VlZDtcclxuICAgICAgZWxzZSBpZiAodHlwZW9mIChfZnVuY3Rpb25PclNlZWQpID09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICB0aGlzLnNlZWQgPSBfZnVuY3Rpb25PclNlZWQ7XHJcbiAgICAgICAgbGV0IHBybmc6IFJhbmRvbSA9IG5ldyBSYW5kb20odGhpcy5zZWVkKTtcclxuICAgICAgICB0aGlzLmhlaWdodE1hcEZ1bmN0aW9uID0gbmV3IE5vaXNlMigoKSA9PiBwcm5nLmdldE5vcm0oKSkuc2FtcGxlOyAvLyBUT0RPIGNhbGwgUFJOR1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAgICB0aGlzLmhlaWdodE1hcEZ1bmN0aW9uID0gbmV3IE5vaXNlMigpLnNhbXBsZTtcclxuXHJcbiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgVmVydGljZXMoKTtcclxuICAgICAgLy9JdGVyYXRlIG92ZXIgZWFjaCBjZWxsIHRvIGdlbmVyYXRlIGdyaWQgb2YgdmVydGljZXNcclxuICAgICAgZm9yIChsZXQgejogbnVtYmVyID0gMDsgeiA8PSB0aGlzLnJlc29sdXRpb24ueTsgeisrKSB7XHJcbiAgICAgICAgZm9yIChsZXQgeDogbnVtYmVyID0gMDsgeCA8PSB0aGlzLnJlc29sdXRpb24ueDsgeCsrKSB7XHJcbiAgICAgICAgICBsZXQgeE5vcm06IG51bWJlciA9IHggLyB0aGlzLnJlc29sdXRpb24ueDtcclxuICAgICAgICAgIGxldCB6Tm9ybTogbnVtYmVyID0geiAvIHRoaXMucmVzb2x1dGlvbi55O1xyXG4gICAgICAgICAgdGhpcy52ZXJ0aWNlcy5wdXNoKG5ldyBWZXJ0ZXgoXHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKHhOb3JtIC0gMC41LCB0aGlzLmhlaWdodE1hcEZ1bmN0aW9uKHhOb3JtICogdGhpcy5zY2FsZS54LCB6Tm9ybSAqIHRoaXMuc2NhbGUueSksIHpOb3JtIC0gMC41KSxcclxuICAgICAgICAgICAgbmV3IFZlY3RvcjIoeE5vcm0sIHpOb3JtKVxyXG4gICAgICAgICAgKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcXVhZHM6IFF1YWRbXSA9IFtdO1xyXG4gICAgICBsZXQgc3BsaXQ6IFFVQURTUExJVCA9IFFVQURTUExJVC5BVF8wO1xyXG4gICAgICBmb3IgKGxldCB6OiBudW1iZXIgPSAwOyB6IDwgdGhpcy5yZXNvbHV0aW9uLnk7IHorKykge1xyXG4gICAgICAgIGZvciAobGV0IHg6IG51bWJlciA9IDA7IHggPCB0aGlzLnJlc29sdXRpb24ueDsgeCsrKSB7XHJcbiAgICAgICAgICBxdWFkcy5wdXNoKG5ldyBRdWFkKFxyXG4gICAgICAgICAgICB0aGlzLnZlcnRpY2VzLFxyXG4gICAgICAgICAgICAoeCArIDApICsgKHogKyAwKSAqICh0aGlzLnJlc29sdXRpb24ueCArIDEpLFxyXG4gICAgICAgICAgICAoeCArIDApICsgKHogKyAxKSAqICh0aGlzLnJlc29sdXRpb24ueCArIDEpLFxyXG4gICAgICAgICAgICAoeCArIDEpICsgKHogKyAxKSAqICh0aGlzLnJlc29sdXRpb24ueCArIDEpLFxyXG4gICAgICAgICAgICAoeCArIDEpICsgKHogKyAwKSAqICh0aGlzLnJlc29sdXRpb24ueCArIDEpLFxyXG4gICAgICAgICAgICBzcGxpdFxyXG4gICAgICAgICAgKSk7XHJcbiAgICAgICAgICBzcGxpdCA9IChzcGxpdCA9PSBRVUFEU1BMSVQuQVRfMCkgPyBRVUFEU1BMSVQuQVRfMSA6IFFVQURTUExJVC5BVF8wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uLnggJSAyID09IDApIC8vIHJldmVyc2UgbGFzdCBzcGxpdCBjaGFuZ2UgaWYgeC1yZXNvbHV0aW9uIGlzIGV2ZW5cclxuICAgICAgICAgIHNwbGl0ID0gKHNwbGl0ID09IFFVQURTUExJVC5BVF8wKSA/IFFVQURTUExJVC5BVF8xIDogUVVBRFNQTElULkFUXzA7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5mYWNlcyA9IHF1YWRzLmZsYXRNYXAoKHF1YWQ6IFF1YWQpID0+IHF1YWQuZmFjZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdmVydGljYWwgcHJvamVjdGlvbiBvZiB0aGUgZ2l2ZW4gcG9zaXRpb24gb250byB0aGUgdGVycmFpbi5cclxuICAgICAqIFBhc3MgdGhlIG92ZXJhbGwgd29ybGQgdHJhbnNmb3JtYXRpb24gb2YgdGhlIHRlcnJhaW4gaWYgdGhlIHBvc2l0aW9uIGlzIGdpdmVuIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxyXG4gICAgICogSWYgYXQgaGFuZCwgcGFzcyB0aGUgaW52ZXJzZSB0b28gdG8gYXZvaWQgdW5uZWNlc3NhcnkgY2FsY3VsYXRpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRUZXJyYWluSW5mbyhfcG9zaXRpb246IFZlY3RvcjMsIF9tdHhXb3JsZDogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCksIF9tdHhJbnZlcnNlPzogTWF0cml4NHg0KTogVGVycmFpbkluZm8ge1xyXG4gICAgICBpZiAoIV9tdHhJbnZlcnNlKVxyXG4gICAgICAgIF9tdHhJbnZlcnNlID0gTWF0cml4NHg0LklOVkVSU0lPTihfbXR4V29ybGQpO1xyXG5cclxuICAgICAgbGV0IHRlcnJhaW5JbmZvOiBUZXJyYWluSW5mbyA9IG5ldyBUZXJyYWluSW5mbztcclxuXHJcbiAgICAgIGxldCBwb3NMb2NhbDogVmVjdG9yMyA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oX3Bvc2l0aW9uLCBfbXR4SW52ZXJzZSwgdHJ1ZSk7XHJcblxyXG5cclxuICAgICAgbGV0IHo6IG51bWJlciA9IE1hdGguZmxvb3IoKHBvc0xvY2FsLnogKyAwLjUpICogdGhpcy5yZXNvbHV0aW9uLnkpO1xyXG4gICAgICBsZXQgeDogbnVtYmVyID0gTWF0aC5mbG9vcigocG9zTG9jYWwueCArIDAuNSkgKiB0aGlzLnJlc29sdXRpb24ueCk7XHJcbiAgICAgIGlmICh6IDwgMCB8fCB6ID4gdGhpcy5yZXNvbHV0aW9uLnkgLSAxIHx8IHggPCAwIHx8IHggPiB0aGlzLnJlc29sdXRpb24ueCAtIDEpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICBsZXQgaW5kZXg6IG51bWJlciA9ICh6ICogdGhpcy5yZXNvbHV0aW9uLnggKyB4KSAqIDI7XHJcbiAgICAgIGxldCBmYWNlOiBGYWNlID0gdGhpcy5mYWNlc1tpbmRleF07XHJcblxyXG4gICAgICBsZXQgcmF5OiBSYXkgPSBuZXcgUmF5KFZlY3RvcjMuWSgpLCBwb3NMb2NhbCk7XHJcbiAgICAgIGxldCBwb2ludDogVmVjdG9yMyA9IHJheS5pbnRlcnNlY3RGYWNlUGxhbmUoZmFjZSk7XHJcbiAgICAgIGlmICghZmFjZS5pc0luc2lkZShwb2ludCkpIHtcclxuICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgIGZhY2UgPSB0aGlzLmZhY2VzW2luZGV4XTtcclxuICAgICAgICBwb2ludCA9IHJheS5pbnRlcnNlY3RGYWNlUGxhbmUoZmFjZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRlcnJhaW5JbmZvLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgIHRlcnJhaW5JbmZvLnBvc2l0aW9uRmFjZSA9IHBvaW50O1xyXG4gICAgICB0ZXJyYWluSW5mby5wb3NpdGlvbiA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04ocG9pbnQsIF9tdHhXb3JsZCwgdHJ1ZSk7XHJcbiAgICAgIHRlcnJhaW5JbmZvLm5vcm1hbCA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04oZmFjZS5ub3JtYWwsIE1hdHJpeDR4NC5UUkFOU1BPU0UoX210eEludmVyc2UpLCBmYWxzZSk7XHJcbiAgICAgIHRlcnJhaW5JbmZvLmRpc3RhbmNlID0gX3Bvc2l0aW9uLnkgLSB0ZXJyYWluSW5mby5wb3NpdGlvbi55O1xyXG4gICAgICB0ZXJyYWluSW5mby5ncmlkID0gdGhpcy5nZXRHcmlkRnJvbUZhY2VJbmRleChpbmRleCk7XHJcbiAgICAgIHJldHVybiB0ZXJyYWluSW5mbztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0R3JpZEZyb21GYWNlSW5kZXgoX2luZGV4OiBudW1iZXIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMiA9IFJlY3ljbGVyLmdldChWZWN0b3IyKTtcclxuICAgICAgbGV0IGlRdWFkOiBudW1iZXIgPSBNYXRoLmZsb29yKF9pbmRleCAvIDIpO1xyXG4gICAgICByZXN1bHQuc2V0KGlRdWFkICUgdGhpcy5yZXNvbHV0aW9uLnksIE1hdGguZmxvb3IoaVF1YWQgLyB0aGlzLnJlc29sdXRpb24ueCkpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGYWNlSW5kaWNlc0Zyb21HcmlkKF9ncmlkOiBWZWN0b3IyKTogbnVtYmVyW10ge1xyXG4gICAgICBsZXQgaVF1YWQ6IG51bWJlciA9IF9ncmlkLnkgKiAyICogdGhpcy5yZXNvbHV0aW9uLnggKyBfZ3JpZC54ICogMjtcclxuICAgICAgcmV0dXJuIFtpUXVhZCwgaVF1YWQgKyAxXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uc2VlZCA9IHRoaXMuc2VlZDtcclxuICAgICAgc2VyaWFsaXphdGlvbi5zY2FsZSA9IHRoaXMuc2NhbGUuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ucmVzb2x1dGlvbiA9IHRoaXMucmVzb2x1dGlvbi5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGF3YWl0IHRoaXMucmVzb2x1dGlvbi5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5yZXNvbHV0aW9uKTtcclxuICAgICAgYXdhaXQgdGhpcy5zY2FsZS5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5zY2FsZSk7XHJcbiAgICAgIHRoaXMuc2VlZCA9IF9zZXJpYWxpemF0aW9uLnNlZWQ7XHJcbiAgICAgIHRoaXMuY3JlYXRlKHRoaXMucmVzb2x1dGlvbiwgdGhpcy5zY2FsZSwgdGhpcy5zZWVkKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBzdXBlci5tdXRhdGUoX211dGF0b3IpO1xyXG4gICAgICB0aGlzLmNyZWF0ZSh0aGlzLnJlc29sdXRpb24sIHRoaXMuc2NhbGUsIHRoaXMuc2VlZCk7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCJNZXNoVGVycmFpbi50c1wiLz5cclxubmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGVzIGEgcGxhbmFyIEdyaWQgYW5kIGFwcGxpZXMgYSBIZWlnaHRtYXAtRnVuY3Rpb24gdG8gaXQuXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjEgfCBNb3JpdHogQmVhdWdyYW5kLCBIRlUsIDIwMjBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaFJlbGllZiBleHRlbmRzIE1lc2hUZXJyYWluIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaFJlbGllZik7XHJcbiAgICBwcml2YXRlIHRleHR1cmU6IFRleHR1cmVJbWFnZSA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcgPSBcIk1lc2hSZWxpZWZcIiwgX3RleHR1cmU6IFRleHR1cmVJbWFnZSA9IG51bGwpIHtcclxuICAgICAgc3VwZXIoX25hbWUsIFZlY3RvcjIuT05FKDIpLCB1bmRlZmluZWQsIChfeDogbnVtYmVyLCBfejogbnVtYmVyKSA9PiAwKTtcclxuICAgICAgdGhpcy5zZXRUZXh0dXJlKF90ZXh0dXJlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjcmVhdGVIZWlnaHRNYXBGdW5jdGlvbihfdGV4dHVyZTogVGV4dHVyZUltYWdlKTogSGVpZ2h0TWFwRnVuY3Rpb24ge1xyXG4gICAgICBsZXQgYXJyYXk6IFVpbnQ4Q2xhbXBlZEFycmF5ID0gTWVzaFJlbGllZi50ZXh0dXJlVG9DbGFtcGVkQXJyYXkoX3RleHR1cmUpO1xyXG4gICAgICBsZXQgaGVpZ2h0TWFwRnVuY3Rpb246IEhlaWdodE1hcEZ1bmN0aW9uID0gKF94OiBudW1iZXIsIF96OiBudW1iZXIpID0+IHtcclxuICAgICAgICBsZXQgcGl4ZWw6IG51bWJlciA9IE1hdGgucm91bmQoX3ogKiBfdGV4dHVyZS5pbWFnZS53aWR0aCArIF94KTtcclxuICAgICAgICByZXR1cm4gYXJyYXlbcGl4ZWwgKiA0XSAvIDI1NTtcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIGhlaWdodE1hcEZ1bmN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIHRleHR1cmVUb0NsYW1wZWRBcnJheShfdGV4dHVyZTogVGV4dHVyZUltYWdlKTogVWludDhDbGFtcGVkQXJyYXkge1xyXG4gICAgICBsZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgIGNhbnZhcy53aWR0aCA9IF90ZXh0dXJlLmltYWdlLndpZHRoO1xyXG4gICAgICBjYW52YXMuaGVpZ2h0ID0gX3RleHR1cmUuaW1hZ2UuaGVpZ2h0O1xyXG5cclxuICAgICAgbGV0IGNyYzogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgY3JjLmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICBjcmMuZHJhd0ltYWdlKF90ZXh0dXJlLmltYWdlLCAwLCAwKTtcclxuXHJcbiAgICAgIHJldHVybiBjcmMuZ2V0SW1hZ2VEYXRhKDAsIDAsIF90ZXh0dXJlLmltYWdlLndpZHRoLCBfdGV4dHVyZS5pbWFnZS5oZWlnaHQpLmRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFRleHR1cmUoX3RleHR1cmU6IFRleHR1cmVJbWFnZSA9IG51bGwpOiB2b2lkIHtcclxuICAgICAgaWYgKCFfdGV4dHVyZSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIHRoaXMudGV4dHVyZSA9IF90ZXh0dXJlO1xyXG4gICAgICBsZXQgcmVzb2x1dGlvbjogVmVjdG9yMiA9IF90ZXh0dXJlID8gbmV3IFZlY3RvcjIoX3RleHR1cmUuaW1hZ2Uud2lkdGggLSAxLCBfdGV4dHVyZS5pbWFnZS5oZWlnaHQgLSAxKSA6IHVuZGVmaW5lZDtcclxuICAgICAgc3VwZXIuY3JlYXRlKHJlc29sdXRpb24sIHJlc29sdXRpb24sIE1lc2hSZWxpZWYuY3JlYXRlSGVpZ2h0TWFwRnVuY3Rpb24oX3RleHR1cmUpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIGRlbGV0ZSBzZXJpYWxpemF0aW9uLnNlZWQ7XHJcbiAgICAgIGRlbGV0ZSBzZXJpYWxpemF0aW9uLnNjYWxlO1xyXG4gICAgICBkZWxldGUgc2VyaWFsaXphdGlvbi5yZXNvbHV0aW9uO1xyXG5cclxuICAgICAgaWYgKHRoaXMudGV4dHVyZSlcclxuICAgICAgICBzZXJpYWxpemF0aW9uLmlkVGV4dHVyZSA9IHRoaXMudGV4dHVyZS5pZFJlc291cmNlO1xyXG5cclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGlmIChfc2VyaWFsaXphdGlvbi5pZFRleHR1cmUpIHtcclxuICAgICAgICB0aGlzLnRleHR1cmUgPSA8VGV4dHVyZUltYWdlPmF3YWl0IFByb2plY3QuZ2V0UmVzb3VyY2UoX3NlcmlhbGl6YXRpb24uaWRUZXh0dXJlKTtcclxuICAgICAgICB0aGlzLnNldFRleHR1cmUodGhpcy50ZXh0dXJlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLnRleHR1cmUpICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHRoaXMuc2V0VGV4dHVyZShfbXV0YXRvci50ZXh0dXJlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnNlZWQ7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5zY2FsZTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnJlc29sdXRpb247XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn0iLCIvLyAvPHJlZmVyZW5jZSBwYXRoPVwiTWVzaFBvbHlnb24udHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlcyBhIHJvdGF0aW9uIG9mIGEgcG9seWdvbiBhcm91bmQgdGhlIHktYXhpc1xyXG4gICAqIGBgYHBsYWludGV4dCAgICAgICBcclxuICAgKiAgICAgICAgICAgICAgICAgICAgIHlcclxuICAgKiAgICAgICAgICAgICAgICAgIF8gIOKGkSAwXzFcclxuICAgKiAgICAgICAgICAgICAgICAg4pSCICAg4pSC4oaSeCDilIIyICAgICAgICAgXHJcbiAgICogICAgICAgICAgICAgICAgICDilbIgIOKUgiAg4pWxMyAgICAgICAgIFxyXG4gICAqICAgICAgICAgICAgICAgICAg4pWxICDilIIgIOKVsiAgIFxyXG4gICAqICAgICAgICAgICAgICAgICDilbFfX1/ilIJfX1/ilbI0IFxyXG4gICAqICAgICAgICAgICAgICAgICAgICAgIDVcclxuICAgKiBgYGBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMS0yMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hSb3RhdGlvbiBleHRlbmRzIE1lc2gge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IE1lc2gucmVnaXN0ZXJTdWJjbGFzcyhNZXNoUm90YXRpb24pO1xyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyB2ZXJ0aWNlc0RlZmF1bHQ6IFZlY3RvcjJbXSA9IFsgLy8gbGluZSBpcyB0aGUgbWluaW1hbCBzaGFwZVxyXG4gICAgICBuZXcgVmVjdG9yMigwLjUsIDAuNSksXHJcbiAgICAgIG5ldyBWZWN0b3IyKDAuNSwgLTAuNSlcclxuICAgIF07XHJcbiAgICBwcm90ZWN0ZWQgc2hhcGU6IE11dGFibGVBcnJheTxWZWN0b3IyPiA9IG5ldyBNdXRhYmxlQXJyYXk8VmVjdG9yMj4oVmVjdG9yMik7XHJcbiAgICBwcm90ZWN0ZWQgbG9uZ2l0dWRlczogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoUm90YXRpb25cIiwgX3NoYXBlOiBWZWN0b3IyW10gPSBNZXNoUm90YXRpb24udmVydGljZXNEZWZhdWx0LCBfbG9uZ2l0dWRlczogbnVtYmVyID0gMykge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIHRoaXMucm90YXRlKF9zaGFwZSwgX2xvbmdpdHVkZXMpO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhcIk11dGF0b3JcIiwgdGhpcy5nZXRNdXRhdG9yKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBnZXQgbWluVmVydGljZXMoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIDI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHN1cGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnNoYXBlID0gU2VyaWFsaXplci5zZXJpYWxpemVBcnJheShWZWN0b3IyLCB0aGlzLnNoYXBlKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5sb25naXR1ZGVzID0gdGhpcy5sb25naXR1ZGVzO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGxldCBzaGFwZTogVmVjdG9yMltdID0gPFZlY3RvcjJbXT5hd2FpdCBTZXJpYWxpemVyLmRlc2VyaWFsaXplQXJyYXkoX3NlcmlhbGl6YXRpb24uc2hhcGUpO1xyXG4gICAgICB0aGlzLmxvbmdpdHVkZXMgPSBfc2VyaWFsaXphdGlvbi5sb25naXR1ZGVzO1xyXG4gICAgICB0aGlzLnJvdGF0ZShzaGFwZSwgdGhpcy5sb25naXR1ZGVzKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5tdXRhdGUoX211dGF0b3IpO1xyXG4gICAgICB0aGlzLnJvdGF0ZSh0aGlzLnNoYXBlLCB0aGlzLmxvbmdpdHVkZXMpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULk1VVEFURSkpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIHJvdGF0ZShfc2hhcGU6IFZlY3RvcjJbXSwgX2xvbmdpdHVkZXM6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgIHRoaXMuc2hhcGUgPSA8TXV0YWJsZUFycmF5PFZlY3RvcjI+Pk11dGFibGVBcnJheS5mcm9tKF9zaGFwZS5tYXAoX3ZlcnRleCA9PiBfdmVydGV4LmNsb25lKSk7XHJcbiAgICAgIHRoaXMubG9uZ2l0dWRlcyA9IE1hdGgucm91bmQoX2xvbmdpdHVkZXMpO1xyXG4gICAgICBsZXQgYW5nbGU6IG51bWJlciA9IDM2MCAvIHRoaXMubG9uZ2l0dWRlcztcclxuICAgICAgbGV0IG10eFJvdGF0ZTogTWF0cml4NHg0ID0gTWF0cml4NHg0LlJPVEFUSU9OX1koYW5nbGUpO1xyXG4gICAgICAvLyBjb3B5IG9yaWdpbmFsIHBvbHlnb24gYXMgVmVjdG9yMyBhcnJheVxyXG4gICAgICBsZXQgcG9seWdvbjogVmVjdG9yM1tdID0gW107XHJcbiAgICAgIGxldCBkaXN0YW5jZXM6IG51bWJlcltdID0gWzBdO1xyXG4gICAgICBsZXQgdG90YWw6IG51bWJlciA9IDA7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLnNoYXBlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcG9seWdvbi5wdXNoKHRoaXMuc2hhcGVbaV0udG9WZWN0b3IzKCkpO1xyXG4gICAgICAgIGlmIChpID4gMCkge1xyXG4gICAgICAgICAgbGV0IGRpc3RhbmNlOiBudW1iZXIgPSBWZWN0b3IyLkRJRkZFUkVOQ0UodGhpcy5zaGFwZVtpXSwgdGhpcy5zaGFwZVtpIC0gMV0pLm1hZ25pdHVkZTtcclxuICAgICAgICAgIHRvdGFsICs9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgZGlzdGFuY2VzLnB1c2godG90YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBkaXN0YW5jZXMuZm9yRWFjaCgoZW50cnksIGluZGV4KSA9PiB7IGRpc3RhbmNlc1tpbmRleF0gPSBlbnRyeSAvIHRvdGFsOyB9KTtcclxuXHJcbiAgICAgIGxldCBuVmVydGljZXNQb2x5Z29uOiBudW1iZXIgPSBwb2x5Z29uLmxlbmd0aDtcclxuXHJcbiAgICAgIGxldCBjbG91ZDogVmVydGljZXMgPSBuZXcgVmVydGljZXMoKTtcclxuICAgICAgZm9yIChsZXQgbG9uZ2l0dWRlOiBudW1iZXIgPSAwOyBsb25naXR1ZGUgPD0gdGhpcy5sb25naXR1ZGVzOyBsb25naXR1ZGUrKykge1xyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBuVmVydGljZXNQb2x5Z29uOyBpKyspIHtcclxuICAgICAgICAgIGxldCB1djogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKGxvbmdpdHVkZSAvIHRoaXMubG9uZ2l0dWRlcywgZGlzdGFuY2VzW2ldKTtcclxuICAgICAgICAgIC8vIFRPRE86IGxhc3Qgc2VjdG9yIHNob3VsZCBvbmx5IGJlIHJlZmVyZW5jZXMgdG8gdGhlIGZpcnN0IG1lcmlkaWFuXHJcbiAgICAgICAgICBpZiAobG9uZ2l0dWRlID09IHRoaXMubG9uZ2l0dWRlcylcclxuICAgICAgICAgICAgY2xvdWQucHVzaChuZXcgVmVydGV4KGksIHV2KSk7XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGxvbmdpdHVkZSA+IDAgJiYgdGhpcy5zaGFwZVtpXS54ID09IDApIC8vIHVzZSBhIHNpbmdsZSB2ZXJ0ZXggd2hlbiBpdCdzIG9uIHRoZSByb3RhdGlvbiBheGlzXHJcbiAgICAgICAgICAgICAgY2xvdWQucHVzaChuZXcgVmVydGV4KGksIHV2KSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICBjbG91ZC5wdXNoKG5ldyBWZXJ0ZXgocG9seWdvbltpXS5jbG9uZSwgdXYpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcG9seWdvbi5mb3JFYWNoKChfdmVjdG9yOiBWZWN0b3IzKSA9PiBfdmVjdG9yLnRyYW5zZm9ybShtdHhSb3RhdGUpKTtcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIC8vIGNvcHkgaW5kaWNlcyB0byBuZXcgaW5kZXggYXJyYXlcclxuICAgICAgbGV0IGZhY2VzOiBGYWNlW10gPSBbXTtcclxuXHJcbiAgICAgIGZvciAobGV0IGxvbmdpdHVkZTogbnVtYmVyID0gMDsgbG9uZ2l0dWRlIDwgdGhpcy5sb25naXR1ZGVzOyBsb25naXR1ZGUrKykge1xyXG4gICAgICAgIGZvciAobGV0IGxhdGl0dWRlOiBudW1iZXIgPSAwOyBsYXRpdHVkZSA8IG5WZXJ0aWNlc1BvbHlnb24gLSAxOyBsYXRpdHVkZSsrKSB7XHJcbiAgICAgICAgICBsZXQgc3RhcnQ6IG51bWJlciA9IGxvbmdpdHVkZSAqIG5WZXJ0aWNlc1BvbHlnb24gKyBsYXRpdHVkZTtcclxuICAgICAgICAgIGxldCBxdWFkOiBRdWFkID0gbmV3IFF1YWQoY2xvdWQsIHN0YXJ0ICsgMSwgc3RhcnQgKyAxICsgblZlcnRpY2VzUG9seWdvbiwgc3RhcnQgKyBuVmVydGljZXNQb2x5Z29uLCBzdGFydCk7XHJcbiAgICAgICAgICBmYWNlcy5wdXNoKC4uLnF1YWQuZmFjZXMpO1xyXG4gICAgICAgICAgLy8gVE9ETzogY2F0Y2ggaW52YWxpZCBmYWNlcyByaWdodCBoZXJlLi4uXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnZlcnRpY2VzID0gY2xvdWQ7XHJcbiAgICAgIHRoaXMuZmFjZXMgPSBmYWNlcztcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgY2xhc3MgUmVuZGVySW5qZWN0b3JNZXNoU2tpbiBleHRlbmRzIFJlbmRlckluamVjdG9yTWVzaCB7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWNvcmF0ZShfY29uc3RydWN0b3I6IEZ1bmN0aW9uKTogdm9pZCB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfY29uc3RydWN0b3IucHJvdG90eXBlLCBcInVzZVJlbmRlckJ1ZmZlcnNcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3Rvck1lc2hTa2luLnVzZVJlbmRlckJ1ZmZlcnNcclxuICAgICAgfSk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfY29uc3RydWN0b3IucHJvdG90eXBlLCBcImdldFJlbmRlckJ1ZmZlcnNcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3Rvck1lc2hTa2luLmdldFJlbmRlckJ1ZmZlcnNcclxuICAgICAgfSk7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfY29uc3RydWN0b3IucHJvdG90eXBlLCBcImRlbGV0ZVJlbmRlckJ1ZmZlcnNcIiwge1xyXG4gICAgICAgIHZhbHVlOiBSZW5kZXJJbmplY3Rvck1lc2hTa2luLmRlbGV0ZVJlbmRlckJ1ZmZlcnNcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBnZXRSZW5kZXJCdWZmZXJzKHRoaXM6IE1lc2hTa2luLCBfc2hhZGVyOiB0eXBlb2YgU2hhZGVyKTogUmVuZGVyQnVmZmVycyB7XHJcbiAgICAgIGxldCByZW5kZXJCdWZmZXJzOiBSZW5kZXJCdWZmZXJzID0gc3VwZXIuZ2V0UmVuZGVyQnVmZmVycy5jYWxsKHRoaXMsIF9zaGFkZXIpO1xyXG4gICAgICBjb25zdCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG5cclxuICAgICAgbGV0IGlCb25lczogVWludDhBcnJheSA9IHRoaXMucmVuZGVyTWVzaC5pQm9uZXM7XHJcbiAgICAgIGxldCB3ZWlnaHRzOiBGbG9hdDMyQXJyYXkgPSB0aGlzLnJlbmRlck1lc2gud2VpZ2h0cztcclxuICAgICAgaWYgKF9zaGFkZXIuZGVmaW5lLmluY2x1ZGVzKFwiRkxBVFwiKSkge1xyXG4gICAgICAgIGlCb25lcyA9IHRoaXMucmVuZGVyTWVzaC5pQm9uZXNGbGF0O1xyXG4gICAgICAgIHdlaWdodHMgPSB0aGlzLnJlbmRlck1lc2gud2VpZ2h0c0ZsYXQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghcmVuZGVyQnVmZmVycy5pQm9uZXMpIHtcclxuICAgICAgICByZW5kZXJCdWZmZXJzLmlCb25lcyA9IFJlbmRlcldlYkdMLmFzc2VydChjcmMzLmNyZWF0ZUJ1ZmZlcigpKTtcclxuICAgICAgICBjcmMzLmJpbmRCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIHJlbmRlckJ1ZmZlcnMuaUJvbmVzKTtcclxuICAgICAgICBjcmMzLmJ1ZmZlckRhdGEoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIGlCb25lcywgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghcmVuZGVyQnVmZmVycy53ZWlnaHRzKSB7XHJcbiAgICAgICAgcmVuZGVyQnVmZmVycy53ZWlnaHRzID0gUmVuZGVyV2ViR0wuYXNzZXJ0KGNyYzMuY3JlYXRlQnVmZmVyKCkpO1xyXG4gICAgICAgIGNyYzMuYmluZEJ1ZmZlcihXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkFSUkFZX0JVRkZFUiwgcmVuZGVyQnVmZmVycy53ZWlnaHRzKTtcclxuICAgICAgICBjcmMzLmJ1ZmZlckRhdGEoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIHdlaWdodHMsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuU1RBVElDX0RSQVcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXJlbmRlckJ1ZmZlcnMubXR4Qm9uZXMpIHtcclxuICAgICAgICBjb25zdCBib25lczogbnVtYmVyID0gY3JjMy5nZXRVbmlmb3JtQmxvY2tJbmRleChfc2hhZGVyLnByb2dyYW0sIFVOSUZPUk1fQkxPQ0tTLlNLSU4uTkFNRSk7XHJcbiAgICAgICAgY29uc3QgYm9uZXNTaXplOiBudW1iZXIgPSBjcmMzLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihfc2hhZGVyLnByb2dyYW0sIGJvbmVzLCBjcmMzLlVOSUZPUk1fQkxPQ0tfREFUQV9TSVpFKTtcclxuICAgICAgICBcclxuICAgICAgICByZW5kZXJCdWZmZXJzLm10eEJvbmVzID0gY3JjMy5jcmVhdGVCdWZmZXIoKTtcclxuICAgICAgICBjcmMzLmJpbmRCdWZmZXJCYXNlKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5JRk9STV9CVUZGRVIsIFVOSUZPUk1fQkxPQ0tTLlNLSU4uQklORElORywgcmVuZGVyQnVmZmVycy5tdHhCb25lcyk7XHJcbiAgICAgICAgY3JjMy5idWZmZXJEYXRhKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5JRk9STV9CVUZGRVIsIGJvbmVzU2l6ZSwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5EWU5BTUlDX0RSQVcpO1xyXG4gICAgICAgIGNyYzMudW5pZm9ybUJsb2NrQmluZGluZyhfc2hhZGVyLnByb2dyYW0sIGJvbmVzLCBVTklGT1JNX0JMT0NLUy5TS0lOLkJJTkRJTkcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcmVuZGVyQnVmZmVycztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHVzZVJlbmRlckJ1ZmZlcnModGhpczogTWVzaFNraW4sIF9zaGFkZXI6IHR5cGVvZiBTaGFkZXIsIF9tdHhNZXNoVG9Xb3JsZDogTWF0cml4NHg0LCBfbXR4TWVzaFRvVmlldzogTWF0cml4NHg0LCBfaWQ/OiBudW1iZXIsIF9tdHhCb25lcz86IE1hdHJpeDR4NFtdKTogUmVuZGVyQnVmZmVycyB7XHJcbiAgICAgIGxldCByZW5kZXJCdWZmZXJzOiBSZW5kZXJCdWZmZXJzID0gc3VwZXIudXNlUmVuZGVyQnVmZmVycy5jYWxsKHRoaXMsIF9zaGFkZXIsIF9tdHhNZXNoVG9Xb3JsZCwgX210eE1lc2hUb1ZpZXcsIF9pZCk7XHJcbiAgICAgIGNvbnN0IGNyYzM6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcblxyXG4gICAgICBjb25zdCBhSUJvbmU6IG51bWJlciA9IF9zaGFkZXIuYXR0cmlidXRlc1tcImFfaUJvbmVcIl07XHJcbiAgICAgIGlmIChhSUJvbmUpIHtcclxuICAgICAgICBjcmMzLmJpbmRCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIHJlbmRlckJ1ZmZlcnMuaUJvbmVzKTtcclxuICAgICAgICBjcmMzLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFJQm9uZSk7XHJcbiAgICAgICAgY3JjMy52ZXJ0ZXhBdHRyaWJJUG9pbnRlcihhSUJvbmUsIDQsIFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuVU5TSUdORURfQllURSwgMCwgMCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGFXZWlnaHQ6IG51bWJlciA9IF9zaGFkZXIuYXR0cmlidXRlc1tcImFfZldlaWdodFwiXTtcclxuICAgICAgaWYgKGFXZWlnaHQpIHtcclxuICAgICAgICBjcmMzLmJpbmRCdWZmZXIoV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5BUlJBWV9CVUZGRVIsIHJlbmRlckJ1ZmZlcnMud2VpZ2h0cyk7XHJcbiAgICAgICAgY3JjMy5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhV2VpZ2h0KTtcclxuICAgICAgICBjcmMzLnZlcnRleEF0dHJpYlBvaW50ZXIoYVdlaWdodCwgNCwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5GTE9BVCwgZmFsc2UsIDAsIDApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoX210eEJvbmVzKSB7XHJcbiAgICAgICAgY29uc3Qgc2tpbjogbnVtYmVyID0gY3JjMy5nZXRVbmlmb3JtQmxvY2tJbmRleChfc2hhZGVyLnByb2dyYW0sIFVOSUZPUk1fQkxPQ0tTLlNLSU4uTkFNRSk7XHJcbiAgICAgICAgY3JjMy51bmlmb3JtQmxvY2tCaW5kaW5nKF9zaGFkZXIucHJvZ3JhbSwgc2tpbiwgVU5JRk9STV9CTE9DS1MuU0tJTi5CSU5ESU5HKTtcclxuICAgICAgICBjcmMzLmJpbmRCdWZmZXIoY3JjMy5VTklGT1JNX0JVRkZFUiwgcmVuZGVyQnVmZmVycy5tdHhCb25lcyk7XHJcbiAgICAgICAgY3JjMy5idWZmZXJTdWJEYXRhKGNyYzMuVU5JRk9STV9CVUZGRVIsIDAsIG5ldyBGbG9hdDMyQXJyYXkoaXRlcmFibGVGcm9tKF9tdHhCb25lcykpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHJlbmRlckJ1ZmZlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBkZWxldGVSZW5kZXJCdWZmZXJzKF9yZW5kZXJCdWZmZXJzOiBSZW5kZXJCdWZmZXJzKTogdm9pZCB7XHJcbiAgICAgIHN1cGVyLmRlbGV0ZVJlbmRlckJ1ZmZlcnMoX3JlbmRlckJ1ZmZlcnMpO1xyXG4gICAgICBjb25zdCBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gUmVuZGVyV2ViR0wuZ2V0UmVuZGVyaW5nQ29udGV4dCgpO1xyXG5cclxuICAgICAgaWYgKF9yZW5kZXJCdWZmZXJzKSB7XHJcbiAgICAgICAgY3JjMy5iaW5kQnVmZmVyKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCBudWxsKTtcclxuICAgICAgICBjcmMzLmRlbGV0ZUJ1ZmZlcihfcmVuZGVyQnVmZmVycy5pQm9uZXMpO1xyXG4gICAgICAgIGNyYzMuZGVsZXRlQnVmZmVyKF9yZW5kZXJCdWZmZXJzLndlaWdodHMpO1xyXG4gICAgICAgIGNyYzMuZGVsZXRlQnVmZmVyKF9yZW5kZXJCdWZmZXJzLm10eEJvbmVzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uKiBpdGVyYWJsZUZyb20oX21hdHJpY2VzOiBNYXRyaXg0eDRbXSk6IEl0ZXJhYmxlPG51bWJlcj4ge1xyXG4gICAgZm9yIChjb25zdCBtYXRyaXggb2YgX21hdHJpY2VzKVxyXG4gICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIG1hdHJpeC5nZXQoKSlcclxuICAgICAgICB5aWVsZCB2YWx1ZTtcclxuICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLy4uL1JlbmRlci9SZW5kZXJJbmplY3Rvck1lc2hTa2luLnRzXCIvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuL01lc2hJbXBvcnQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIE1lc2ggaW5mbHVlbmNlZCBieSBhIHNrZWxldG9uIGFuZCBsb2FkZWQgZnJvbSBhIGZpbGVcclxuICAgKiBAYXV0aG9yIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIyLTIwMjNcclxuICAgKi9cclxuICBAUmVuZGVySW5qZWN0b3JNZXNoU2tpbi5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBjbGFzcyBNZXNoU2tpbiBleHRlbmRzIE1lc2hJbXBvcnQge1xyXG4gICAgcHVibGljIHVzZVJlbmRlckJ1ZmZlcnMoX3NoYWRlcjogU2hhZGVySW50ZXJmYWNlLCBfbXR4V29ybGQ6IE1hdHJpeDR4NCwgX210eFByb2plY3Rpb246IE1hdHJpeDR4NCwgX2lkPzogbnVtYmVyLCBfbXR4Qm9uZXM/OiBNYXRyaXg0eDRbXSk6IFJlbmRlckJ1ZmZlcnMgeyByZXR1cm4gbnVsbDsgLyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgc3VwZXIucmVkdWNlTXV0YXRvcihfbXV0YXRvcik7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogR2VuZXJhdGUgYSBVViBTcGhlcmUgd2l0aCBhIGdpdmVuIG51bWJlciBvZiBzZWN0b3JzIGFuZCBzdGFja3MgKGNsYW1wZWQgYXQgMTI4KjEyOClcclxuICAgKiBJbXBsZW1lbnRhdGlvbiBiYXNlZCBvbiBodHRwOi8vd3d3LnNvbmdoby5jYS9vcGVuZ2wvZ2xfc3BoZXJlLmh0bWxcclxuICAgKiBAYXV0aG9ycyBTaW1vbiBTdG9ybC1TY2h1bGtlLCBIRlUsIDIwMjAgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBNZXNoU3BoZXJlIGV4dGVuZHMgTWVzaFJvdGF0aW9uIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaFNwaGVyZSk7XHJcbiAgICBwcml2YXRlIGxhdGl0dWRlczogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoU3BoZXJlXCIsIF9sb25naXR1ZGVzOiBudW1iZXIgPSA4LCBfbGF0aXR1ZGVzOiBudW1iZXIgPSA4KSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lKTtcclxuICAgICAgdGhpcy5jcmVhdGUoX2xvbmdpdHVkZXMsIF9sYXRpdHVkZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGUoX2xvbmdpdHVkZXM6IG51bWJlciA9IDMsIF9sYXRpdHVkZXM6IG51bWJlciA9IDIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAvL0NsYW1wIHJlc29sdXRpb24gdG8gcHJldmVudCBwZXJmb3JtYW5jZSBpc3N1ZXNcclxuICAgICAgdGhpcy5sb25naXR1ZGVzID0gTWF0aC5taW4oTWF0aC5yb3VuZChfbG9uZ2l0dWRlcyksIDEyOCk7XHJcbiAgICAgIHRoaXMubGF0aXR1ZGVzID0gTWF0aC5taW4oTWF0aC5yb3VuZChfbGF0aXR1ZGVzKSwgMTI4KTtcclxuXHJcbiAgICAgIGlmIChfbG9uZ2l0dWRlcyA8IDMgfHwgX2xhdGl0dWRlcyA8IDIpIHtcclxuICAgICAgICBEZWJ1Zy53YXJuKFwiVVYgU3BoZXJlIG11c3QgaGF2ZSBhdCBsZWFzdCAzIGxvbmdpdHVkZXMgYW5kIDIgbGF0aXR1ZGVzIHRvIGZvcm0gYSAzLWRpbWVuc2lvbmFsIHNoYXBlLlwiKTtcclxuICAgICAgICB0aGlzLmxvbmdpdHVkZXMgPSBNYXRoLm1heCgzLCBfbG9uZ2l0dWRlcyk7XHJcbiAgICAgICAgdGhpcy5sYXRpdHVkZXMgPSBNYXRoLm1heCgyLCBfbGF0aXR1ZGVzKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IHNoYXBlOiBWZWN0b3IyW10gPSBbXTtcclxuICAgICAgbGV0IHN0ZXA6IG51bWJlciA9IE1hdGguUEkgLyB0aGlzLmxhdGl0dWRlcztcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8PSB0aGlzLmxhdGl0dWRlczsgKytpKSB7XHJcbiAgICAgICAgbGV0IGFuZ2xlOiBudW1iZXIgPSBNYXRoLlBJIC8gMiAtIGkgKiBzdGVwO1xyXG4gICAgICAgIGxldCB4OiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICAgICAgbGV0IHk6IG51bWJlciA9IE1hdGguc2luKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgc2hhcGUucHVzaChuZXcgVmVjdG9yMih4IC8gMiwgeSAvIDIpKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBwbGFjZSBmaXJzdCBhbmQgbGFzdCB2ZXJ0ZXggZXhhY3RseSBvbiByb3RhdGlvbiBheGlzXHJcbiAgICAgIHNoYXBlWzBdLnggPSAwO1xyXG4gICAgICBzaGFwZVtzaGFwZS5sZW5ndGggLSAxXS54ID0gMDtcclxuXHJcbiAgICAgIHN1cGVyLnJvdGF0ZShzaGFwZSwgX2xvbmdpdHVkZXMpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIGRlbGV0ZSBzZXJpYWxpemF0aW9uLnNoYXBlO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmxhdGl0dWRlcyA9IHRoaXMubGF0aXR1ZGVzO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHRoaXMuY3JlYXRlKF9zZXJpYWxpemF0aW9uLmxvbmdpdHVkZXMsIF9zZXJpYWxpemF0aW9uLmxhdGl0dWRlcyk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yKTtcclxuICAgICAgdGhpcy5jcmVhdGUodGhpcy5sb25naXR1ZGVzLCB0aGlzLmxhdGl0dWRlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZHVjZU11dGF0b3IoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgc3VwZXIucmVkdWNlTXV0YXRvcihfbXV0YXRvcik7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5zaGFwZTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIHR3byBxdWFkcyBwbGFjZWQgYmFjayB0byBiYWNrLCB0aGUgb25lIGZhY2luZyBpbiBuZWdhdGl2ZSBaLWRpcmVjdGlvbiBpcyB0ZXh0dXJlZCByZXZlcnNlZFxyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqICAgICAgICAwIF9fIDNcclxuICAgKiAgICAgICAgIHxfX3xcclxuICAgKiAgICAgICAgMSAgICAyICAgICAgICAgICAgIFxyXG4gICAqIGBgYCBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBNZXNoU3ByaXRlIGV4dGVuZHMgTWVzaCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gTWVzaC5yZWdpc3RlclN1YmNsYXNzKE1lc2hTcHJpdGUpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfbmFtZTogc3RyaW5nID0gXCJNZXNoU3ByaXRlXCIpIHtcclxuICAgICAgc3VwZXIoX25hbWUpO1xyXG4gICAgICB0aGlzLnZlcnRpY2VzID0gbmV3IFZlcnRpY2VzKFxyXG4gICAgICAgIG5ldyBWZXJ0ZXgobmV3IFZlY3RvcjMoLTAuNSwgMC41LCAwKSwgbmV3IFZlY3RvcjIoMCwgMCkpLFxyXG4gICAgICAgIG5ldyBWZXJ0ZXgobmV3IFZlY3RvcjMoLTAuNSwgLTAuNSwgMCksIG5ldyBWZWN0b3IyKDAsIDEpKSxcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKDAuNSwgLTAuNSwgMCksIG5ldyBWZWN0b3IyKDEsIDEpKSxcclxuICAgICAgICBuZXcgVmVydGV4KG5ldyBWZWN0b3IzKDAuNSwgMC41LCAwKSwgbmV3IFZlY3RvcjIoMSwgMCkpXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuZmFjZXMgPSBbXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgMSwgMiwgMCksXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgMiwgMywgMCksXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgMCwgMywgMSksXHJcbiAgICAgICAgbmV3IEZhY2UodGhpcy52ZXJ0aWNlcywgMywgMiwgMSlcclxuICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmbGF0IGlzIHN0YW5kYXJkIGhlcmVcclxuICAgIHB1YmxpYyBnZXQgdmVydGljZXNGbGF0KCk6IEZsb2F0MzJBcnJheSB7IHJldHVybiB0aGlzLnJlbmRlck1lc2gudmVydGljZXM7IH1cclxuICAgIHB1YmxpYyBnZXQgaW5kaWNlc0ZsYXQoKTogVWludDE2QXJyYXkgeyByZXR1cm4gdGhpcy5yZW5kZXJNZXNoLmluZGljZXM7IH1cclxuXHJcbiAgICAvLyBpbnN0ZWFkLCBzbW9vdGggc2hhZGluZyB3b3VsZCBuZWVkIGV4dHJhIGF0dGVudGlvbiBidXQgaXMgbm90IHJlbGV2YW50Li4uXHJcblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEdlbmVyYXRlIGEgVG9ydXMgd2l0aCBhIGdpdmVuIHRoaWNrbmVzcyBhbmQgdGhlIG51bWJlciBvZiBtYWpvci0gYW5kIG1pbm9yIHNlZ21lbnRzXHJcbiAgICogQGF1dGhvcnMgU2ltb24gU3RvcmwtU2NodWxrZSwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaFRvcnVzIGV4dGVuZHMgTWVzaFJvdGF0aW9uIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBNZXNoLnJlZ2lzdGVyU3ViY2xhc3MoTWVzaFRvcnVzKTtcclxuICAgIHByaXZhdGUgc2l6ZTogbnVtYmVyID0gMC4yNTtcclxuICAgIHByaXZhdGUgbGF0aXR1ZGVzOiBudW1iZXIgPSAxMjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiTWVzaFRvcnVzXCIsIF9zaXplOiBudW1iZXIgPSAwLjI1LCBfbG9uZ2l0dWRlczogbnVtYmVyID0gOCwgX2xhdGl0dWRlczogbnVtYmVyID0gNikge1xyXG4gICAgICBzdXBlcihfbmFtZSwgTWVzaFRvcnVzLmdldFNoYXBlKF9zaXplLCBNYXRoLm1heCgzLCBfbGF0aXR1ZGVzKSksIF9sb25naXR1ZGVzKTtcclxuICAgICAgdGhpcy5zaXplID0gX3NpemU7XHJcbiAgICAgIHRoaXMubG9uZ2l0dWRlcyA9IF9sb25naXR1ZGVzO1xyXG4gICAgICB0aGlzLmxhdGl0dWRlcyA9IE1hdGgubWF4KDMsIF9sYXRpdHVkZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGdldFNoYXBlKF9zaXplOiBudW1iZXIsIF9sYXRpdHVkZXM6IG51bWJlcik6IFZlY3RvcjJbXSB7XHJcbiAgICAgIGxldCBzaGFwZTogVmVjdG9yMltdID0gW107XHJcbiAgICAgIGxldCByYWRpdXM6IG51bWJlciA9IF9zaXplIC8gMjtcclxuICAgICAgbGV0IGNlbnRlcjogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKDAuMjUgKyByYWRpdXMsIDApO1xyXG4gICAgICBmb3IgKGxldCBsYXRpdHVkZTogbnVtYmVyID0gMDsgbGF0aXR1ZGUgPD0gX2xhdGl0dWRlczsgbGF0aXR1ZGUrKykge1xyXG4gICAgICAgIGxldCBhbmdsZTogbnVtYmVyID0gMiAqIE1hdGguUEkgKiBsYXRpdHVkZSAvIF9sYXRpdHVkZXM7XHJcbiAgICAgICAgc2hhcGUucHVzaChWZWN0b3IyLlNVTShjZW50ZXIsIG5ldyBWZWN0b3IyKHJhZGl1cyAqIC1NYXRoLmNvcyhhbmdsZSksIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKSkpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2hhcGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZShfc2l6ZTogbnVtYmVyID0gMC4yNSwgX2xvbmdpdHVkZXM6IG51bWJlciA9IDgsIF9sYXRpdHVkZXM6IG51bWJlciA9IDYpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zaXplID0gX3NpemU7XHJcbiAgICAgIHRoaXMubGF0aXR1ZGVzID0gTWF0aC5tYXgoMywgX2xhdGl0dWRlcyk7XHJcbiAgICAgIHN1cGVyLnJvdGF0ZShNZXNoVG9ydXMuZ2V0U2hhcGUoX3NpemUsIF9sYXRpdHVkZXMpLCBfbG9uZ2l0dWRlcyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2ZlclxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgc2VyaWFsaXphdGlvbi5sYXRpdHVkZXMgPSB0aGlzLmxhdGl0dWRlcztcclxuICAgICAgc2VyaWFsaXphdGlvbi5zaXplID0gdGhpcy5zaXplO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHRoaXMuY3JlYXRlKF9zZXJpYWxpemF0aW9uLnNpemUsIF9zZXJpYWxpemF0aW9uLmxvbmdpdHVkZXMsIF9zZXJpYWxpemF0aW9uLmxhdGl0dWRlcyk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yKTtcclxuICAgICAgdGhpcy5jcmVhdGUodGhpcy5zaXplLCB0aGlzLmxvbmdpdHVkZXMsIHRoaXMubGF0aXR1ZGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnNoYXBlO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGVudW0gUVVBRFNQTElUIHtcclxuICAgIFBMQU5BUiwgQVRfMCwgQVRfMVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBzdXJmYWNlIGNyZWF0ZWQgd2l0aCBmb3VyIHZlcnRpY2VzIHdoaWNoIGltbWVkaWF0ZWx5IGNyZWF0ZXMgbm9uZSwgb25lIG9yIHR3byB7QGxpbmsgRmFjZX1zIGRlcGVuZGluZyBvbiB2ZXJ0aWNlcyBhdCBpZGVudGljYWwgcG9zaXRpb25zLlxyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqIFFVQURTUExJVDogIFBMQU5BUiAgICAgICAgICAgICAgICAgIEFUXzAgICAgICAgICAgICAgICAgICAgICBBVF8xXHJcbiAgICogICAgICAgICAgICAgMCBfIDMgICAgICAgICAgICAgICAgICAgMCBfIDMgICAgICAgICAgICAgICAgICAgIDAgXyAzICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAqICAgICAgICAgICAgICB8XFx8ICAgICAgICAgICAgICAgICAgICAgfFxcfCAgICAgICAgICAgICAgICAgICAgICB8L3wgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICogICAgICAgICAgICAgMSDigL4gMiAgICAgICAgICAgICAgICAgICAxIOKAviAyICAgICAgICAgICAgICAgICAgICAxIOKAviAyICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICogIHNoYXJlZCBsYXN0IHZlcnRleCAyICAgICAgbGFzdCB2ZXJ0aWNlcyAyICsgMyAgICAgIGxhc3QgdmVydGljZXMgMyArIDAgXHJcbiAgICogICAgICBcclxuICAgKiBgYGAgXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjJcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUXVhZCB7XHJcbiAgICBwdWJsaWMgZmFjZXM6IEZhY2VbXTtcclxuICAgICNzcGxpdDogUVVBRFNQTElUO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF92ZXJ0aWNlczogVmVydGljZXMsIF9pbmRleDA6IG51bWJlciwgX2luZGV4MTogbnVtYmVyLCBfaW5kZXgyOiBudW1iZXIsIF9pbmRleDM6IG51bWJlciwgX3NwbGl0OiBRVUFEU1BMSVQgPSBRVUFEU1BMSVQuUExBTkFSKSB7XHJcbiAgICAgIHRoaXMuZmFjZXMgPSBbXTtcclxuICAgICAgdGhpcy4jc3BsaXQgPSBfc3BsaXQ7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKF9zcGxpdCAhPSBRVUFEU1BMSVQuQVRfMSlcclxuICAgICAgICAgIHRoaXMuZmFjZXMucHVzaChuZXcgRmFjZShfdmVydGljZXMsIF9pbmRleDAsIF9pbmRleDEsIF9pbmRleDIpKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICB0aGlzLmZhY2VzLnB1c2gobmV3IEZhY2UoX3ZlcnRpY2VzLCBfaW5kZXgxLCBfaW5kZXgyLCBfaW5kZXgzKSk7XHJcbiAgICAgIH0gY2F0Y2ggKF9lOiB1bmtub3duKSB7XHJcbiAgICAgICAgRGVidWcuZnVkZ2UoXCJGYWNlIGV4Y2x1ZGVkXCIsICg8RXJyb3I+X2UpLm1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKF9zcGxpdCA9PSBRVUFEU1BMSVQuUExBTkFSKVxyXG4gICAgICAgICAgdGhpcy5mYWNlcy5wdXNoKG5ldyBGYWNlKF92ZXJ0aWNlcywgX2luZGV4MywgX2luZGV4MCwgX2luZGV4MikpO1xyXG4gICAgICAgIGVsc2UgaWYgKF9zcGxpdCA9PSBRVUFEU1BMSVQuQVRfMClcclxuICAgICAgICAgIHRoaXMuZmFjZXMucHVzaChuZXcgRmFjZShfdmVydGljZXMsIF9pbmRleDAsIF9pbmRleDIsIF9pbmRleDMpKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICB0aGlzLmZhY2VzLnB1c2gobmV3IEZhY2UoX3ZlcnRpY2VzLCBfaW5kZXgxLCBfaW5kZXgzLCBfaW5kZXgwKSk7XHJcbiAgICAgIH0gY2F0Y2ggKF9lOiB1bmtub3duKSB7XHJcbiAgICAgICAgRGVidWcuZnVkZ2UoXCJGYWNlIGV4Y2x1ZGVkXCIsICg8RXJyb3I+X2UpLm1lc3NhZ2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzcGxpdCgpOiBRVUFEU1BMSVQge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc3BsaXQ7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGludGVyZmFjZSBCb25lIHtcclxuICAgIGluZGV4OiBudW1iZXI7XHJcbiAgICB3ZWlnaHQ6IG51bWJlcjtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBjbGFzcyBWZXJ0ZXgge1xyXG4gICAgcHVibGljIHBvc2l0aW9uOiBWZWN0b3IzO1xyXG4gICAgcHVibGljIHV2OiBWZWN0b3IyO1xyXG4gICAgcHVibGljIG5vcm1hbDogVmVjdG9yMztcclxuICAgIHB1YmxpYyByZWZlclRvOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgYm9uZXM6IEJvbmVbXTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlcHJlc2VudHMgYSB2ZXJ0ZXggb2YgYSBtZXNoIHdpdGggZXh0ZW5kZWQgaW5mb3JtYXRpb24gc3VjaCBhcyB0aGUgdXYgY29vcmRpbmF0ZXMgYW5kIHRoZSB2ZXJ0ZXggbm9ybWFsLlxyXG4gICAgICogSXQgbWF5IHJlZmVyIHRvIGFub3RoZXIgdmVydGV4IHZpYSBhbiBpbmRleCBpbnRvIHNvbWUgYXJyYXksIGluIHdoaWNoIGNhc2UgdGhlIHBvc2l0aW9uIGFuZCB0aGUgbm9ybWFsIGFyZSBzdG9yZWQgdGhlcmUuXHJcbiAgICAgKiBUaGlzIHdheSwgdmVydGV4IHBvc2l0aW9uIGFuZCBub3JtYWwgaXMgYSAxOjEgYXNzb2NpYXRpb24sIHZlcnRleCB0byB0ZXh0dXJlIGNvb3JkaW5hdGVzIGEgMTpuIGFzc29jaWF0aW9uLlxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIyXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfcG9zaXRpb25PckluZGV4OiBWZWN0b3IzIHwgbnVtYmVyLCBfdXY6IFZlY3RvcjIgPSBudWxsLCBfbm9ybWFsOiBWZWN0b3IzID0gVmVjdG9yMy5aRVJPKCkpIHtcclxuICAgICAgaWYgKF9wb3NpdGlvbk9ySW5kZXggaW5zdGFuY2VvZiBWZWN0b3IzKVxyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBfcG9zaXRpb25PckluZGV4O1xyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5yZWZlclRvID0gX3Bvc2l0aW9uT3JJbmRleDtcclxuXHJcbiAgICAgIHRoaXMudXYgPSBfdXY7XHJcbiAgICAgIHRoaXMubm9ybWFsID0gX25vcm1hbDtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBBcnJheSB3aXRoIGV4dGVuZGVkIGZ1bmN0aW9uYWxpdHkgdG8gc2VydmUgYXMgYSB7QGxpbmsgVmVydGV4fS1jbG91ZC4gXHJcbiAgICogQWNjZXNzb3JzIHlpZWxkIHBvc2l0aW9uIG9yIG5vcm1hbCBhbHNvIGZvciB2ZXJ0aWNlcyByZWZlcmVuY2luZyBvdGhlciB2ZXJ0aWNlc1xyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIyXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFZlcnRpY2VzIGV4dGVuZHMgQXJyYXk8VmVydGV4PiB7XHJcbiAgICAvLyBUT0RPOiB0aGlzIGNsYXNzIG1heSBiZWNvbWUgbW9yZSBwb3dlcmZ1bCBieSBoaWRpbmcgdGhlIGFycmF5IGFuZCBhZGQgbW9yZSBzZXJ2aWNlIG1ldGhvZHMgbGlrZSBjYWxjdWxhdGluZyBib3VuZGluZyBib3gsIHJhZGl1cyBldGMuXHJcbiAgICAvLyBzZWUgaWYgYSBwcm94eSBvZiB0aGUgYXJyYXkgaW50ZXJmYWNpbmcgW10gd291bGQgZG8gYSBnb29kIGpvYiAtPiB0ZXN0ZWQ6IHByb3h5IGlzIGFib3V0IDIwIHRpbWVzIHNsb3dlciFcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHN1YnNldCBvZiB2ZXJ0aWNlcyB0aGF0IGRvIG5vdCByZWZlciB0byBvdGhlciB2ZXJ0aWNlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG9yaWdpbmFscygpOiBBcnJheTxWZXJ0ZXg+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKF92ZXJ0ZXggPT4gX3ZlcnRleC5yZWZlclRvID09IHVuZGVmaW5lZCk7XHJcbiAgICB9ICAgXHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogcmV0dXJucyB0aGUgcG9zaXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSB2ZXJ0ZXggYWRkcmVzc2VkLCByZXNvbHZpbmcgcmVmZXJlbmNlcyBiZXR3ZWVuIHZlcnRpY2VzIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9zaXRpb24oX2luZGV4OiBudW1iZXIpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHZlcnRleDogVmVydGV4ID0gdGhpc1tfaW5kZXhdO1xyXG4gICAgICByZXR1cm4gKHZlcnRleC5yZWZlclRvID09IHVuZGVmaW5lZCkgPyB2ZXJ0ZXgucG9zaXRpb24gOiB0aGlzW3ZlcnRleC5yZWZlclRvXS5wb3NpdGlvbjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiByZXR1cm5zIHRoZSBub3JtYWwgYXNzb2NpYXRlZCB3aXRoIHRoZSB2ZXJ0ZXggYWRkcmVzc2VkLCByZXNvbHZpbmcgcmVmZXJlbmNlcyBiZXR3ZWVuIHZlcnRpY2VzIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgbm9ybWFsKF9pbmRleDogbnVtYmVyKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCB2ZXJ0ZXg6IFZlcnRleCA9IHRoaXNbX2luZGV4XTtcclxuICAgICAgcmV0dXJuICh2ZXJ0ZXgucmVmZXJUbyA9PSB1bmRlZmluZWQpID8gdmVydGV4Lm5vcm1hbCA6IHRoaXNbdmVydGV4LnJlZmVyVG9dLm5vcm1hbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgdGhlIHV2LWNvb3JkaW5hdGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdmVydGV4IGFkZHJlc3NlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdXYoX2luZGV4OiBudW1iZXIpOiBWZWN0b3IyIHtcclxuICAgICAgcmV0dXJuIHRoaXNbX2luZGV4XS51djtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHJldHVybnMgdGhlIHBvc2l0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgdmVydGV4IGFkZHJlc3NlZCwgcmVzb2x2aW5nIHJlZmVyZW5jZXMgYmV0d2VlbiB2ZXJ0aWNlcyBcclxuICAgICAqL1xyXG4gICAgIHB1YmxpYyBib25lcyhfaW5kZXg6IG51bWJlcik6IEJvbmVbXSB7XHJcbiAgICAgIGxldCB2ZXJ0ZXg6IFZlcnRleCA9IHRoaXNbX2luZGV4XTtcclxuICAgICAgcmV0dXJuICh2ZXJ0ZXgucmVmZXJUbyA9PSB1bmRlZmluZWQpID8gdmVydGV4LmJvbmVzIDogdGhpc1t2ZXJ0ZXgucmVmZXJUb10uYm9uZXM7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQmFzZSBjbGFzcyBmb3IgTWVzaEltcG9ydC1sb2FkZXJzXHJcbiAgICogQGF1dGhvciBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNZXNoTG9hZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZChfbWVzaDogTWVzaEltcG9ydCB8IE1lc2hTa2luLCBfZGF0YT86IE9iamVjdCk6IFByb21pc2U8TWVzaEltcG9ydD4ge1xyXG4gICAgICByZXR1cm4gX21lc2g7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRmlsbWJveCBtZXNoIGltcG9ydFxyXG4gICAqIEBhdXRob3JzIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIzIHwgSm9uYXMgUGxvdHpreSwgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hMb2FkZXJGQlggZXh0ZW5kcyBNZXNoTG9hZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZChfbWVzaDogTWVzaEltcG9ydCB8IE1lc2hTa2luLCBfZGF0YTogRkJYLkdlb21ldHJ5KTogUHJvbWlzZTxNZXNoSW1wb3J0PiB7XHJcbiAgICAgIGNvbnN0IGxvYWRlcjogRkJYTG9hZGVyID0gYXdhaXQgRkJYTG9hZGVyLkxPQUQoX21lc2gudXJsLnRvU3RyaW5nKCkpO1xyXG4gICAgICBjb25zdCBnZW9tZXRyeUZCWDogRkJYLkdlb21ldHJ5ID0gKFxyXG4gICAgICAgIF9kYXRhIHx8XHJcbiAgICAgICAgbG9hZGVyLmZieC5vYmplY3RzLmdlb21ldHJpZXMuZmluZChvYmplY3QgPT4gb2JqZWN0Lm5hbWUgPT0gX21lc2gubmFtZSkgfHxcclxuICAgICAgICBsb2FkZXIuZmJ4Lm9iamVjdHMubW9kZWxzLmZpbmQob2JqZWN0ID0+IG9iamVjdC5uYW1lID09IF9tZXNoLm5hbWUgJiYgb2JqZWN0LnN1YnR5cGUgPT0gXCJNZXNoXCIpLmNoaWxkcmVuWzBdXHJcbiAgICAgICkubG9hZCgpO1xyXG4gICAgICBpZiAoX2RhdGEpXHJcbiAgICAgICAgX21lc2gubmFtZSA9IF9kYXRhLm5hbWUubGVuZ3RoID4gMCA/IF9kYXRhLm5hbWUgOiBfZGF0YS5wYXJlbnRzWzBdLm5hbWU7XHJcbiAgICAgIFxyXG4gICAgICBsZXQgcG9zaXRpb25zOiBWZWN0b3IzW10gPSBbXTtcclxuICAgICAgbGV0IHZlcnRleEJ1ZmZlcjogRmxvYXQzMkFycmF5ID0gZ2VvbWV0cnlGQlguVmVydGljZXM7XHJcbiAgICAgIGZvciAobGV0IGlWZXJ0ZXg6IG51bWJlciA9IDA7IGlWZXJ0ZXggPCB2ZXJ0ZXhCdWZmZXIubGVuZ3RoOyBpVmVydGV4ICs9IDMpIHtcclxuICAgICAgICBwb3NpdGlvbnMucHVzaChuZXcgVmVjdG9yMyh2ZXJ0ZXhCdWZmZXJbaVZlcnRleCArIDBdLCB2ZXJ0ZXhCdWZmZXJbaVZlcnRleCArIDFdLCB2ZXJ0ZXhCdWZmZXJbaVZlcnRleCArIDJdKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCB1dnM6IFZlY3RvcjJbXSA9IFtdO1xyXG4gICAgICBpZiAoZ2VvbWV0cnlGQlguTGF5ZXJFbGVtZW50VVYpIHtcclxuICAgICAgICBsZXQgdXZCdWZmZXI6IEZsb2F0MzJBcnJheSA9IGdlb21ldHJ5RkJYLkxheWVyRWxlbWVudFVWLlVWO1xyXG4gICAgICAgIGZvciAobGV0IGl1djogbnVtYmVyID0gMDsgaXV2IDwgdXZCdWZmZXIubGVuZ3RoOyBpdXYgKz0gMikge1xyXG4gICAgICAgICAgdXZzLnB1c2gobmV3IFZlY3RvcjIodXZCdWZmZXJbaXV2XSwgMSAtIHV2QnVmZmVyW2l1diArIDFdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgbm9ybWFsczogVmVjdG9yM1tdID0gW107XHJcbiAgICAgIGlmIChnZW9tZXRyeUZCWC5MYXllckVsZW1lbnROb3JtYWwpIHtcclxuICAgICAgICBsZXQgbm9ybWFsQnVmZmVyOiBGbG9hdDMyQXJyYXkgPSBnZW9tZXRyeUZCWC5MYXllckVsZW1lbnROb3JtYWwuTm9ybWFscztcclxuICAgICAgICBmb3IgKGxldCBpTm9ybWFsOiBudW1iZXIgPSAwOyBpTm9ybWFsIDwgbm9ybWFsQnVmZmVyLmxlbmd0aDsgaU5vcm1hbCArPSAzKSB7XHJcbiAgICAgICAgICBub3JtYWxzLnB1c2gobmV3IFZlY3RvcjMobm9ybWFsQnVmZmVyW2lOb3JtYWxdLCBub3JtYWxCdWZmZXJbaU5vcm1hbCArIDFdLCBub3JtYWxCdWZmZXJbaU5vcm1hbCArIDJdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgbWFwVmVydGV4VG9JbmRleDogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXAoKTtcclxuICAgICAgbGV0IG5ld1ZlcnRleEluZGljZXM6IG51bWJlcltdW10gPSBbXTtcclxuICAgICAgbGV0IGlQb2x5Z29uID0gMDtcclxuICAgICAgbGV0IGlzRW5kT2ZQb2x5Z29uOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgIGxldCBwb2x5Z29uOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgICAgZ2VvbWV0cnlGQlguUG9seWdvblZlcnRleEluZGV4LmZvckVhY2goKF9pVmVydGV4LCBfaVBvbHlnb25WZXJ0ZXgpID0+IHtcclxuICAgICAgICBpZiAoX2lWZXJ0ZXggPCAwKSB7XHJcbiAgICAgICAgICBfaVZlcnRleCA9IF9pVmVydGV4IF4gLSAxO1xyXG4gICAgICAgICAgaXNFbmRPZlBvbHlnb24gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBvc2l0aW9uOiBWZWN0b3IzID0gcG9zaXRpb25zW19pVmVydGV4XTtcclxuICAgICAgICBsZXQgdXY6IFZlY3RvcjIgPSB1dnNbZ2V0RGF0YUluZGV4KGdlb21ldHJ5RkJYLkxheWVyRWxlbWVudFVWLCBfaVZlcnRleCwgaVBvbHlnb24sIF9pUG9seWdvblZlcnRleCldO1xyXG5cclxuICAgICAgICBsZXQgdmVydGV4S2V5ID0gcG9zaXRpb24udG9TdHJpbmcoKSArIHV2LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKCFtYXBWZXJ0ZXhUb0luZGV4Lmhhcyh2ZXJ0ZXhLZXkpKSB7XHJcbiAgICAgICAgICBsZXQgbm9ybWFsOiBWZWN0b3IzID0gbm9ybWFsc1tnZXREYXRhSW5kZXgoZ2VvbWV0cnlGQlguTGF5ZXJFbGVtZW50Tm9ybWFsLCBfaVZlcnRleCwgaVBvbHlnb24sIF9pUG9seWdvblZlcnRleCldO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgX21lc2gudmVydGljZXMucHVzaChuZXcgVmVydGV4KHBvc2l0aW9uLCB1diwgbm9ybWFsKSk7XHJcbiAgICAgICAgICBtYXBWZXJ0ZXhUb0luZGV4LnNldCh2ZXJ0ZXhLZXksIF9tZXNoLnZlcnRpY2VzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgaWYgKCFuZXdWZXJ0ZXhJbmRpY2VzW19pVmVydGV4XSlcclxuICAgICAgICAgICAgbmV3VmVydGV4SW5kaWNlc1tfaVZlcnRleF0gPSBbXTtcclxuICAgICAgICAgIG5ld1ZlcnRleEluZGljZXNbX2lWZXJ0ZXhdLnB1c2goX21lc2gudmVydGljZXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHBvbHlnb24ucHVzaChtYXBWZXJ0ZXhUb0luZGV4LmdldCh2ZXJ0ZXhLZXkpKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaXNFbmRPZlBvbHlnb24pIHtcclxuICAgICAgICAgIGlmIChwb2x5Z29uLmxlbmd0aCA9PSAzKSB7XHJcbiAgICAgICAgICAgIF9tZXNoLmZhY2VzLnB1c2gobmV3IEZhY2UoX21lc2gudmVydGljZXMsIHBvbHlnb25bMF0sIHBvbHlnb25bMV0sIHBvbHlnb25bMl0pKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAocG9seWdvbi5sZW5ndGggPT0gNCkge1xyXG4gICAgICAgICAgICBsZXQgcXVhZDogUXVhZCA9IG5ldyBRdWFkKF9tZXNoLnZlcnRpY2VzLCBwb2x5Z29uWzBdLCBwb2x5Z29uWzFdLCBwb2x5Z29uWzJdLCBwb2x5Z29uWzNdLCBRVUFEU1BMSVQuQVRfMCk7XHJcbiAgICAgICAgICAgIF9tZXNoLmZhY2VzLnB1c2goLi4ucXVhZC5mYWNlcyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjb3VsZCBhZGQgcHJvcGVyIHRyaWFuZ3VsYXRpb24gaGVyZVxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYCR7TWVzaExvYWRlckZCWC5uYW1lfTogUG9seWdvbnMgd2l0aCBtb3JlIHRoYW4gNCB2ZXJ0aWNlcyBhcmUgbm90IHN1cHBvcnRlZC5gKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcG9seWdvbiA9IFtdO1xyXG4gICAgICAgICAgaXNFbmRPZlBvbHlnb24gPSBmYWxzZTtcclxuICAgICAgICAgIGlQb2x5Z29uKys7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBpZiAoX21lc2ggaW5zdGFuY2VvZiBNZXNoU2tpbikge1xyXG4gICAgICAgIGNvbnN0IGZieERlZm9ybWVyOiBGQlguRGVmb3JtZXIgPSBnZW9tZXRyeUZCWC5jaGlsZHJlblswXTtcclxuICAgICAgICBjb25zdCBza2VsZXRvbjogU2tlbGV0b24gPSBhd2FpdCBsb2FkZXIuZ2V0U2tlbGV0b24oZmJ4RGVmb3JtZXIuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0pOyAvLyBEZWZvcm1lci5TdWJEZWZvcm1lci5MaW1iTm9kZVxyXG4gICAgICAgIGNyZWF0ZUJvbmVzKGZieERlZm9ybWVyLCBza2VsZXRvbiwgX21lc2gudmVydGljZXMsIG5ld1ZlcnRleEluZGljZXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBfbWVzaDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldERhdGFJbmRleChfbGF5ZXJFbGVtZW50OiBGQlguTGF5ZXJFbGVtZW50VVYgfCBGQlguTGF5ZXJFbGVtZW50Tm9ybWFsLCBfaVZlcnRleDogbnVtYmVyLCBfaVBvbHlnb246IG51bWJlciwgX2lQb2x5Z29uVmVydGV4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgbGV0IGluZGV4OiBudW1iZXIgPVxyXG4gICAgICBfbGF5ZXJFbGVtZW50Lk1hcHBpbmdJbmZvcm1hdGlvblR5cGUgPT0gXCJCeVZlcnRleFwiID9cclxuICAgICAgICBfaVZlcnRleCA6XHJcbiAgICAgIF9sYXllckVsZW1lbnQuTWFwcGluZ0luZm9ybWF0aW9uVHlwZSA9PSBcIkJ5UG9seWdvblwiID9cclxuICAgICAgICBfaVBvbHlnb24gOlxyXG4gICAgICAgIF9pUG9seWdvblZlcnRleDtcclxuICAgIFxyXG4gICAgaWYgKF9sYXllckVsZW1lbnQuUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlID09PSAnSW5kZXhUb0RpcmVjdCcgKSB7XHJcbiAgICAgIGxldCBpbmRpY2VzOiBVaW50MTZBcnJheSA9IChfbGF5ZXJFbGVtZW50IGFzIEZCWC5MYXllckVsZW1lbnRVVikuVVZJbmRleCB8fCAoX2xheWVyRWxlbWVudCBhcyBGQlguTGF5ZXJFbGVtZW50Tm9ybWFsKS5Ob3JtYWxzSW5kZXg7XHJcbiAgICAgIGluZGV4ID0gaW5kaWNlc1tpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlQm9uZXMoX2RlZm9ybWVyRkJYOiBGQlguRGVmb3JtZXIsIF9za2VsZXRvbjogU2tlbGV0b24sIF92ZXJ0aWNlczogVmVydGljZXMsIF9uZXdWZXJ0ZXhJbmRpY2VzPzogbnVtYmVyW11bXSk6IHZvaWQge1xyXG4gICAgZm9yIChjb25zdCBmYnhTdWJEZWZvcm1lciBvZiBfZGVmb3JtZXJGQlguY2hpbGRyZW4gYXMgRkJYLlN1YkRlZm9ybWVyW10pIHtcclxuICAgICAgZmJ4U3ViRGVmb3JtZXIubG9hZCgpO1xyXG4gICAgICBpZiAoZmJ4U3ViRGVmb3JtZXIuSW5kZXhlcylcclxuICAgICAgICBmb3IgKGxldCBpQm9uZUluZmx1ZW5jZTogbnVtYmVyID0gMDsgaUJvbmVJbmZsdWVuY2UgPCBmYnhTdWJEZWZvcm1lci5JbmRleGVzLmxlbmd0aDsgaUJvbmVJbmZsdWVuY2UrKykge1xyXG4gICAgICAgICAgY29uc3QgaVZlcnRleDogbnVtYmVyID0gZmJ4U3ViRGVmb3JtZXIuSW5kZXhlc1tpQm9uZUluZmx1ZW5jZV07XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGlWZXJ0ZXhOZXcgb2YgX25ld1ZlcnRleEluZGljZXMgPyBfbmV3VmVydGV4SW5kaWNlc1tpVmVydGV4XSA6IFtpVmVydGV4XSkge1xyXG4gICAgICAgICAgICAoX3ZlcnRpY2VzW2lWZXJ0ZXhOZXddLmJvbmVzIHx8IChfdmVydGljZXNbaVZlcnRleE5ld10uYm9uZXMgPSBbXSkpLnB1c2goe1xyXG4gICAgICAgICAgICAgIGluZGV4OiBfc2tlbGV0b24uaW5kZXhPZkJvbmUoZmJ4U3ViRGVmb3JtZXIuY2hpbGRyZW5bMF0ubmFtZSksXHJcbiAgICAgICAgICAgICAgd2VpZ2h0OiBmYnhTdWJEZWZvcm1lci5XZWlnaHRzW2lCb25lSW5mbHVlbmNlXSB8fCAxXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogZ2wgVHJhbnNmZXIgRm9ybWF0IG1lc2ggaW1wb3J0XHJcbiAgICogQGF1dGhvciBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyMi0yMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE1lc2hMb2FkZXJHTFRGIGV4dGVuZHMgTWVzaExvYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWQoX21lc2g6IE1lc2hJbXBvcnQgfCBNZXNoU2tpbiwgX2RhdGE/OiBHTFRGLk1lc2gpOiBQcm9taXNlPE1lc2hJbXBvcnQ+IHtcclxuICAgICAgY29uc3QgbG9hZGVyOiBHTFRGTG9hZGVyID0gYXdhaXQgR0xURkxvYWRlci5MT0FEKF9tZXNoLnVybC50b1N0cmluZygpKTtcclxuICAgICAgY29uc3QgbWVzaEdMVEY6IEdMVEYuTWVzaCA9IF9kYXRhIHx8IGxvYWRlci5nbHRmLm1lc2hlcy5maW5kKGdsdGZNZXNoID0+IGdsdGZNZXNoLm5hbWUgPT0gX21lc2gubmFtZSk7XHJcbiAgICAgIGNvbnN0IHJlbmRlck1lc2g6IFJlbmRlck1lc2ggPSBSZWZsZWN0LmdldChfbWVzaCwgXCJyZW5kZXJNZXNoXCIpO1xyXG4gICAgICBfbWVzaC5uYW1lID0gX2RhdGEubmFtZTtcclxuICAgICAgUmVmbGVjdC5zZXQocmVuZGVyTWVzaCwgXCLGkmluZGljZXNcIiwgYXdhaXQgbG9hZGVyLmdldFVpbnQxNkFycmF5KG1lc2hHTFRGLnByaW1pdGl2ZXNbMF0uaW5kaWNlcykpO1xyXG4gICAgICBSZWZsZWN0LnNldChyZW5kZXJNZXNoLCBcIsaSdmVydGljZXNcIiwgYXdhaXQgbG9hZGVyLmdldEZsb2F0MzJBcnJheShtZXNoR0xURi5wcmltaXRpdmVzWzBdLmF0dHJpYnV0ZXMuUE9TSVRJT04pKTtcclxuICAgICAgaWYgKG1lc2hHTFRGLnByaW1pdGl2ZXNbMF0uYXR0cmlidXRlcy5OT1JNQUwpXHJcbiAgICAgICAgUmVmbGVjdC5zZXQocmVuZGVyTWVzaCwgXCLGkm5vcm1hbHNWZXJ0ZXhcIiwgYXdhaXQgbG9hZGVyLmdldEZsb2F0MzJBcnJheShtZXNoR0xURi5wcmltaXRpdmVzWzBdLmF0dHJpYnV0ZXMuTk9STUFMKSk7XHJcbiAgICAgIGlmIChtZXNoR0xURi5wcmltaXRpdmVzWzBdLmF0dHJpYnV0ZXMuVEVYQ09PUkRfMClcclxuICAgICAgICBSZWZsZWN0LnNldChyZW5kZXJNZXNoLCBcIsaSdGV4dHVyZVVWc1wiLCBhd2FpdCBsb2FkZXIuZ2V0RmxvYXQzMkFycmF5KG1lc2hHTFRGLnByaW1pdGl2ZXNbMF0uYXR0cmlidXRlcy5URVhDT09SRF8wKSk7XHJcbiAgICAgIF9tZXNoLnZlcnRpY2VzLnB1c2goLi4uZ2V0VmVydGljZXMocmVuZGVyTWVzaCkpO1xyXG4gICAgICBfbWVzaC5mYWNlcy5wdXNoKC4uLmdldEZhY2VzKHJlbmRlck1lc2gsIF9tZXNoLnZlcnRpY2VzKSk7XHJcbiAgICAgIGlmIChfbWVzaCBpbnN0YW5jZW9mIE1lc2hTa2luKSB7XHJcbiAgICAgICAgUmVmbGVjdC5zZXQocmVuZGVyTWVzaCwgXCLGkmlCb25lc1wiLCBhd2FpdCBsb2FkZXIuZ2V0VWludDhBcnJheShtZXNoR0xURi5wcmltaXRpdmVzWzBdLmF0dHJpYnV0ZXMuSk9JTlRTXzApKTtcclxuICAgICAgICBSZWZsZWN0LnNldChyZW5kZXJNZXNoLCBcIsaSd2VpZ2h0c1wiLCBhd2FpdCBsb2FkZXIuZ2V0RmxvYXQzMkFycmF5KG1lc2hHTFRGLnByaW1pdGl2ZXNbMF0uYXR0cmlidXRlcy5XRUlHSFRTXzApKTtcclxuICAgICAgICBjcmVhdGVCb25lcyhyZW5kZXJNZXNoLCBfbWVzaC52ZXJ0aWNlcyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIF9tZXNoO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24qIGdldFZlcnRpY2VzKF9yZW5kZXJNZXNoOiBSZW5kZXJNZXNoKTogR2VuZXJhdG9yPFZlcnRleD4ge1xyXG4gICAgZm9yIChsZXQgaVZlcnRleDogbnVtYmVyID0gMCwgaVRleHR1cmVVVjogbnVtYmVyID0gMDsgaVZlcnRleCA8IF9yZW5kZXJNZXNoLnZlcnRpY2VzLmxlbmd0aDtcclxuICAgICAgaVZlcnRleCArPSAzLCBpVGV4dHVyZVVWICs9IDIpIHtcclxuICAgICAgeWllbGQgbmV3IFZlcnRleChcclxuICAgICAgICBuZXcgVmVjdG9yMyhcclxuICAgICAgICAgIF9yZW5kZXJNZXNoLnZlcnRpY2VzW2lWZXJ0ZXggKyAwXSxcclxuICAgICAgICAgIF9yZW5kZXJNZXNoLnZlcnRpY2VzW2lWZXJ0ZXggKyAxXSxcclxuICAgICAgICAgIF9yZW5kZXJNZXNoLnZlcnRpY2VzW2lWZXJ0ZXggKyAyXVxyXG4gICAgICAgICksXHJcbiAgICAgICAgbmV3IFZlY3RvcjIoXHJcbiAgICAgICAgICBfcmVuZGVyTWVzaC50ZXh0dXJlVVZzW2lUZXh0dXJlVVYgKyAwXSxcclxuICAgICAgICAgIF9yZW5kZXJNZXNoLnRleHR1cmVVVnNbaVRleHR1cmVVViArIDFdXHJcbiAgICAgICAgKSxcclxuICAgICAgICBuZXcgVmVjdG9yMyhcclxuICAgICAgICAgIF9yZW5kZXJNZXNoLm5vcm1hbHNWZXJ0ZXhbaVZlcnRleCArIDBdLFxyXG4gICAgICAgICAgX3JlbmRlck1lc2gubm9ybWFsc1ZlcnRleFtpVmVydGV4ICsgMV0sXHJcbiAgICAgICAgICBfcmVuZGVyTWVzaC5ub3JtYWxzVmVydGV4W2lWZXJ0ZXggKyAyXVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uKiBnZXRGYWNlcyhfcmVuZGVyTWVzaDogUmVuZGVyTWVzaCwgX3ZlcnRpY2VzOiBWZXJ0aWNlcyk6IEdlbmVyYXRvcjxGYWNlPiB7XHJcbiAgICBmb3IgKGxldCBpRmFjZVZlcnRleEluZGV4OiBudW1iZXIgPSAwOyBpRmFjZVZlcnRleEluZGV4IDwgX3JlbmRlck1lc2guaW5kaWNlcy5sZW5ndGg7IGlGYWNlVmVydGV4SW5kZXggKz0gMykge1xyXG4gICAgICB5aWVsZCBuZXcgRmFjZShcclxuICAgICAgICBfdmVydGljZXMsXHJcbiAgICAgICAgX3JlbmRlck1lc2guaW5kaWNlc1tpRmFjZVZlcnRleEluZGV4ICsgMF0sXHJcbiAgICAgICAgX3JlbmRlck1lc2guaW5kaWNlc1tpRmFjZVZlcnRleEluZGV4ICsgMV0sXHJcbiAgICAgICAgX3JlbmRlck1lc2guaW5kaWNlc1tpRmFjZVZlcnRleEluZGV4ICsgMl1cclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUJvbmVzKF9yZW5kZXJNZXNoOiBSZW5kZXJNZXNoLCBfdmVydGljZXM6IFZlcnRpY2VzKTogdm9pZCB7XHJcbiAgICBmb3IgKGxldCBpVmVydGV4OiBudW1iZXIgPSAwLCBpQm9uZUVudHJ5OiBudW1iZXIgPSAwOyBpVmVydGV4IDwgX3ZlcnRpY2VzLmxlbmd0aDsgaVZlcnRleCsrKSB7XHJcbiAgICAgIF92ZXJ0aWNlc1tpVmVydGV4XS5ib25lcyA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgNDsgaSsrLCBpQm9uZUVudHJ5KyspIHtcclxuICAgICAgICBfdmVydGljZXNbaVZlcnRleF0uYm9uZXMucHVzaCh7XHJcbiAgICAgICAgICBpbmRleDogX3JlbmRlck1lc2guaUJvbmVzW2lCb25lRW50cnldLFxyXG4gICAgICAgICAgd2VpZ2h0OiBfcmVuZGVyTWVzaC53ZWlnaHRzW2lCb25lRW50cnldXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBTaW1wbGUgV2F2ZWZyb250IE9CSiBpbXBvcnQuIFRha2VzIGEgd2F2ZWZyb250IG9iaiBzdHJpbmcuIFRvIExvYWQgZnJvbSBhIGZpbGUgdXJsLCB1c2UgdGhlXHJcbiAgICogc3RhdGljIExPQUQgTWV0aG9kLiBDdXJyZW50bHkgb25seSB3b3JrcyB3aXRoIHRyaWFuZ3VsYXRlZCBNZXNoZXNcclxuICAgKiAoYWN0aXZhdGUgJ0dlb21lbnRyeSDihpIgVHJpYW5ndWxhdGUgRmFjZXMnIGluIEJsZW5kZXJzIG9iaiBleHBvcnRlcilcclxuICAgKiBAdG9kbyBVVnMsIExvYWQgTWF0ZXJpYWxzLCBTdXBwb3J0IFF1YWRzXHJcbiAgICogQGF1dGhvcnMgU2ltb24gU3RvcmwtU2NodWxrZSAyMDIxIHwgTHVpcyBLZWNrLCBIRlUsIDIwMjEgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMS0yMDIyIHwgTWF0dGhpYXMgUm9taW5nLCBIRlUsIDIwMjNcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTWVzaExvYWRlck9CSiBleHRlbmRzIE1lc2hMb2FkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkKF9tZXNoOiBNZXNoSW1wb3J0KTogUHJvbWlzZTxNZXNoSW1wb3J0PiB7XHJcbiAgICAgIGxldCB1cmw6IHN0cmluZyA9IG5ldyBVUkwoX21lc2gudXJsLnRvU3RyaW5nKCksIFByb2plY3QuYmFzZVVSTCkudG9TdHJpbmcoKTtcclxuICAgICAgbGV0IGRhdGE6IHN0cmluZyA9IGF3YWl0IChhd2FpdCBmZXRjaCh1cmwpKS50ZXh0KCk7XHJcbiAgICAgIF9tZXNoLm5hbWUgPSB1cmwuc3BsaXQoXCIvXCIpLnBvcCgpO1xyXG4gICAgICBwYXJzZU9iaihkYXRhLCBfbWVzaCk7XHJcbiAgICAgIHJldHVybiBfbWVzaDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBTcGxpdHMgdXAgdGhlIG9iaiBzdHJpbmcgaW50byBzZXBhcmF0ZSBhcnJheXMgZm9yIGVhY2ggZGF0YXR5cGUgKi9cclxuICBmdW5jdGlvbiBwYXJzZU9iaihfZGF0YTogc3RyaW5nLCBfbWVzaDogTWVzaEltcG9ydCk6IHZvaWQge1xyXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gX2RhdGEuc3BsaXQoXCJcXG5cIik7XHJcblxyXG4gICAgbGV0IHBvc2l0aW9uczogVmVjdG9yM1tdID0gW107XHJcbiAgICBsZXQgdXZzOiBWZWN0b3IyW10gPSBbXTtcclxuICAgIGxldCBub3JtYWxzOiBWZWN0b3IzW10gPSBbXTtcclxuICAgIGxldCBmYWNlSW5mbzogRmFjZUluZm9bXSA9IFtdO1xyXG5cclxuICAgIGZvciAobGV0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgbGluZSA9IGxpbmUudHJpbSgpO1xyXG5cclxuICAgICAgaWYgKCFsaW5lIHx8IGxpbmUuc3RhcnRzV2l0aChcIiNcIikpXHJcbiAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBsaW5lLnNwbGl0KFwiIFwiKTtcclxuICAgICAgcGFydHMuc2hpZnQoKTtcclxuXHJcbiAgICAgIC8vVmVydGV4IC0gZXhhbXBsZTogdiAwLjcwIC0wLjQ1IC0wLjUyXHJcbiAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJ2IFwiKSlcclxuICAgICAgICBwb3NpdGlvbnMucHVzaChuZXcgVmVjdG9yMyguLi5wYXJ0cy5tYXAoX3ZhbHVlID0+ICtfdmFsdWUpKSk7XHJcblxyXG4gICAgICAvL05vcm1hbCAtIGV4YW1wbGU6IHZuIDAuMDAgMC4wMCAxLjAwXHJcbiAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJ2biBcIikpXHJcbiAgICAgICAgbm9ybWFscy5wdXNoKG5ldyBWZWN0b3IzKC4uLnBhcnRzLm1hcChfdmFsdWUgPT4gK192YWx1ZSkpKTtcclxuXHJcbiAgICAgIC8vVGV4Y29vcmQgLSBleGFtcGxlOiB2dCAwLjU0NTQ1NCAwLjQ3MjM4MlxyXG4gICAgICBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJ2dCBcIikpXHJcbiAgICAgICAgdXZzLnB1c2gobmV3IFZlY3RvcjIoLi4ucGFydHMubWFwKChfdmFsdWUsIF9pbmRleCkgPT4gK192YWx1ZSAqIChfaW5kZXggPT0gMSA/IC0xIDogMSkpKSk7XHJcblxyXG4gICAgICAvKkZhY2UgSW5kaWNlcyAtIGV4YW1wbGU6IGYgMS8xLzEgMi8yLzEgMy8zLzEgLS0+XHJcbiAgICAgIHZlcnRleDEvdGV4Y29vcmQxL25vcm1hbDEgdmVydGV4Mi90ZXhjb29yZDIvbm9ybWFsMiB2ZXJ0ZXgzL3RleGNvb3JkMy9ub3JtYWwzKi9cclxuICAgICAgZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKFwiZiBcIikpXHJcbiAgICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgY29uc3QgaW5kaWNlczogc3RyaW5nW10gPSBwYXJ0c1tpXS5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgICBmYWNlSW5mby5wdXNoKHtcclxuICAgICAgICAgICAgaVBvc2l0aW9uOiAraW5kaWNlc1swXSAtIDEsXHJcbiAgICAgICAgICAgIGlVVjogK2luZGljZXNbMV0gLSAxLFxyXG4gICAgICAgICAgICBpTm9ybWFsOiAraW5kaWNlc1syXSAtIDFcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfbWVzaC52ZXJ0aWNlcyA9IG5ldyBWZXJ0aWNlcygpO1xyXG4gICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IGZhY2VJbmZvLmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgIGxldCBpbmRpY2VzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCB2OiBudW1iZXIgPSAwOyB2IDwgMzsgdisrKSB7XHJcbiAgICAgICAgbGV0IGluZm86IEZhY2VJbmZvID0gZmFjZUluZm9baSArIHZdO1xyXG4gICAgICAgIC8vIEEgbG90IG9mIHZlcnRpY2VzIHdpdGggZHVwbGljYXRlIHBvc2l0aW9ucyBhcmUgKHByb2JhYmx5KSBjcmVhdGVkIGhlcmUsXHJcbiAgICAgICAgLy8gc2luY2UgaW4gb2JqIGZpbGVzIHRoZSBmYWNlIGRlZmluZXMgdGhlIGNvbm5lY3Rpdml0eSBvZiB0aGUgdmVydGljZXMsIFVWIGNvb3JkaW5hdGVzLCBhbmQgbm9ybWFscyAoc2VlIGFib3ZlKS5cclxuICAgICAgICAvLyBIb3dldmVyLCBpbiBGdWRnZSwgZWFjaCB2ZXJ0ZXggaGFzIGl0cyBvd24gVVYgY29vcmRpbmF0ZXMgYW5kIG5vcm1hbHMgZGlyZWN0bGV5IGFzc29jaWF0ZWQgd2l0aCBpdC5cclxuICAgICAgICBfbWVzaC52ZXJ0aWNlcy5wdXNoKG5ldyBWZXJ0ZXgocG9zaXRpb25zW2luZm8uaVBvc2l0aW9uXSwgdXZzW2luZm8uaVVWXSwgbm9ybWFsc1tpbmZvLmlOb3JtYWxdKSk7XHJcbiAgICAgICAgaW5kaWNlcy5wdXNoKF9tZXNoLnZlcnRpY2VzLmxlbmd0aCAtIDEpO1xyXG4gICAgICB9XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgX21lc2guZmFjZXMucHVzaChuZXcgRmFjZShfbWVzaC52ZXJ0aWNlcywgaW5kaWNlc1swXSwgaW5kaWNlc1sxXSwgaW5kaWNlc1syXSkpO1xyXG4gICAgICB9IGNhdGNoIChfZTogdW5rbm93bikge1xyXG4gICAgICAgIERlYnVnLmZ1ZGdlKFwiRmFjZSBleGNsdWRlZFwiLCAoPEVycm9yPl9lKS5tZXNzYWdlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW50ZXJmYWNlIEZhY2VJbmZvIHtcclxuICAgIGlQb3NpdGlvbjogbnVtYmVyO1xyXG4gICAgaVVWOiBudW1iZXI7XHJcbiAgICBpTm9ybWFsOiBudW1iZXI7XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgXHJcbiAgLyoqXHJcbiAgICogVGhlIG5hbWVzYXBjZSBmb3IgaGFuZGxpbmcgdGhlIHBhcnRpY2xlIGRhdGFcclxuICAgKi9cclxuICBleHBvcnQgbmFtZXNwYWNlIFBhcnRpY2xlRGF0YSB7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTeXN0ZW0ge1xyXG4gICAgICB2YXJpYWJsZU5hbWVzPzogc3RyaW5nW107XHJcbiAgICAgIHZhcmlhYmxlcz86IEV4cHJlc3Npb25bXTsgLy97IFtuYW1lOiBzdHJpbmddOiBFeHByZXNzaW9uIH07XHJcbiAgICAgIGNvbG9yPzogRXhwcmVzc2lvbltdO1xyXG4gICAgICBtdHhMb2NhbD86IFRyYW5zZm9ybWF0aW9uW107XHJcbiAgICAgIG10eFdvcmxkPzogVHJhbnNmb3JtYXRpb25bXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZXhwb3J0IHR5cGUgUmVjdXJzaXZlID0gU3lzdGVtIHwgRXhwcmVzc2lvbltdIHwgVHJhbnNmb3JtYXRpb25bXSB8IFRyYW5zZm9ybWF0aW9uIHwgRXhwcmVzc2lvbjtcclxuXHJcbiAgICBleHBvcnQgdHlwZSBFeHByZXNzaW9uID0gRnVuY3Rpb24gfCBWYXJpYWJsZSB8IENvbnN0YW50IHwgQ29kZTtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEZ1bmN0aW9uIHtcclxuICAgICAgZnVuY3Rpb246IEZVTkNUSU9OO1xyXG4gICAgICBwYXJhbWV0ZXJzOiBFeHByZXNzaW9uW107XHJcbiAgICB9XHJcbiAgXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFZhcmlhYmxlIHtcclxuICAgICAgdmFsdWU6IHN0cmluZztcclxuICAgIH1cclxuICBcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29uc3RhbnQge1xyXG4gICAgICB2YWx1ZTogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29kZSB7XHJcbiAgICAgIGNvZGU6IHN0cmluZztcclxuICAgIH1cclxuICBcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVHJhbnNmb3JtYXRpb24ge1xyXG4gICAgICB0cmFuc2Zvcm1hdGlvbjogXCJ0cmFuc2xhdGVcIiB8IFwicm90YXRlXCIgfCBcInNjYWxlXCI7XHJcbiAgICAgIHBhcmFtZXRlcnM6IEV4cHJlc3Npb25bXTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaXNFeHByZXNzaW9uKF9kYXRhOiBSZWN1cnNpdmUpOiBfZGF0YSBpcyBFeHByZXNzaW9uIHtcclxuICAgICAgcmV0dXJuIGlzRnVuY3Rpb24oX2RhdGEpIHx8IGlzVmFyaWFibGUoX2RhdGEpIHx8IGlzQ29uc3RhbnQoX2RhdGEpIHx8IGlzQ29kZShfZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24oX2RhdGE6IFJlY3Vyc2l2ZSk6IF9kYXRhIGlzIEZ1bmN0aW9uIHtcclxuICAgICAgcmV0dXJuIHR5cGVvZiBfZGF0YSA9PSBcIm9iamVjdFwiICYmIFwiZnVuY3Rpb25cIiBpbiBfZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaXNWYXJpYWJsZShfZGF0YTogUmVjdXJzaXZlKTogX2RhdGEgaXMgVmFyaWFibGUge1xyXG4gICAgICByZXR1cm4gdHlwZW9mIF9kYXRhID09IFwib2JqZWN0XCIgJiYgXCJ2YWx1ZVwiIGluIF9kYXRhICYmIHR5cGVvZiBfZGF0YS52YWx1ZSA9PSBcInN0cmluZ1wiO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0NvbnN0YW50KF9kYXRhOiBSZWN1cnNpdmUpOiBfZGF0YSBpcyBDb25zdGFudCB7XHJcbiAgICAgIHJldHVybiB0eXBlb2YgX2RhdGEgPT0gXCJvYmplY3RcIiAmJiBcInZhbHVlXCIgaW4gX2RhdGEgJiYgdHlwZW9mIF9kYXRhLnZhbHVlID09IFwibnVtYmVyXCI7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzQ29kZShfZGF0YTogUmVjdXJzaXZlKTogX2RhdGEgaXMgQ29kZSB7XHJcbiAgICAgIHJldHVybiB0eXBlb2YgX2RhdGEgPT0gXCJvYmplY3RcIiAmJiBcImNvZGVcIiBpbiBfZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaXNUcmFuc2Zvcm1hdGlvbihfZGF0YTogUmVjdXJzaXZlKTogX2RhdGEgaXMgVHJhbnNmb3JtYXRpb24ge1xyXG4gICAgICByZXR1cm4gdHlwZW9mIF9kYXRhID09IFwib2JqZWN0XCIgJiYgXCJ0cmFuc2Zvcm1hdGlvblwiIGluIF9kYXRhO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSG9sZHMgaW5mb3JtYXRpb24gb24gaG93IHRvIG11dGF0ZSB0aGUgcGFydGljbGVzIG9mIGEgcGFydGljbGUgc3lzdGVtLlxyXG4gICAqIEEgZnVsbCBwYXJ0aWNsZSBzeXN0ZW0gaXMgY29tcG9zZWQgYnkgYXR0YWNoaW5nIGEge0BsaW5rIENvbXBvbmVudFBhcnRpY2xlU3lzdGVtfSwge0BsaW5rIENvbXBvbmVudE1lc2h9IGFuZCB7QGxpbmsgQ29tcG9uZW50TWF0ZXJpYWx9IHRvIHRoZSBzYW1lIHtAbGluayBOb2RlfS4gXHJcbiAgICogQWRkaXRpb25hbGx5IGEge0BsaW5rIENvbXBvbmVudEZhY2VDYW1lcmF9IGNhbiBiZSBhdHRhY2hlZCB0byBtYWtlIHRoZSBwYXJ0aWNsZXMgZmFjZSB0aGUgY2FtZXJhLlxyXG4gICAqIEBhdXRob3JzIEpvbmFzIFBsb3R6a3ksIEhGVSwgMjAyMlxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBQYXJ0aWNsZVN5c3RlbSBleHRlbmRzIE11dGFibGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGVSZXNvdXJjZSB7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGlkUmVzb3VyY2U6IHN0cmluZyA9IHVuZGVmaW5lZDtcclxuICAgIFxyXG4gICAgI2RhdGE6IFBhcnRpY2xlRGF0YS5TeXN0ZW07XHJcbiAgICAvKiogTWFwIG9mIHNoYWRlciB1bml2ZXJzYWwgZGVyaXZhdGVzIHRvIGNvcnJlc3BvbmRpbmcgY29tcHV0ZWQge0BsaW5rIFNoYWRlclBhcnRpY2xlU3lzdGVtfS4gXHJcbiAgICAgKiBUaGlzIHdheSBlYWNoIHBhcnRpY2xlIHN5c3RlbSByZXNvdXJjZSBjYW4gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGFsbCBzaGFkZXIgdW5pdmVyc2FsIGRlcml2YXRlcyAqL1xyXG4gICAgI3NoYWRlclRvU2hhZGVyUGFydGljbGVTeXN0ZW06IE1hcDxTaGFkZXJJbnRlcmZhY2UsIFNoYWRlclBhcnRpY2xlU3lzdGVtPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFBhcnRpY2xlU3lzdGVtLm5hbWUsIF9kYXRhOiBQYXJ0aWNsZURhdGEuU3lzdGVtID0ge30pIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICAgIHRoaXMuZGF0YSA9IF9kYXRhO1xyXG5cclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGdldCBkYXRhKCk6IFBhcnRpY2xlRGF0YS5TeXN0ZW0ge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGRhdGEoX2RhdGE6IFBhcnRpY2xlRGF0YS5TeXN0ZW0pIHtcclxuICAgICAgdGhpcy4jZGF0YSA9IF9kYXRhO1xyXG4gICAgICB0aGlzLiNzaGFkZXJUb1NoYWRlclBhcnRpY2xlU3lzdGVtLmZvckVhY2goX3NoYWRlciA9PiBfc2hhZGVyLmRlbGV0ZVByb2dyYW0oKSk7XHJcbiAgICAgIHRoaXMuI3NoYWRlclRvU2hhZGVyUGFydGljbGVTeXN0ZW0uY2xlYXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBjb3JyZXNwb25kaW5nIHtAbGluayBTaGFkZXJQYXJ0aWNsZVN5c3RlbX0gZm9yIHRoZSBnaXZlbiBzaGFkZXIgdW5pdmVyc2FsIGRlcml2YXRlLlxyXG4gICAgICogQHBhcmFtIF9zb3VyY2UgdGhlIHNoYWRlciB1bml2ZXJzYWwgZGVyaXZhdGUgdG8gdXNlIGFzIGEgYmFzZSBmb3IgdGhlIHBhcnRpY2xlIHN5c3RlbVxyXG4gICAgICogQHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcge0BsaW5rIFNoYWRlclBhcnRpY2xlU3lzdGVtfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0U2hhZGVyRnJvbShfc291cmNlOiBTaGFkZXJJbnRlcmZhY2UpOiBTaGFkZXJQYXJ0aWNsZVN5c3RlbSB7XHJcbiAgICAgIGlmICghdGhpcy4jc2hhZGVyVG9TaGFkZXJQYXJ0aWNsZVN5c3RlbS5oYXMoX3NvdXJjZSkpIHtcclxuICAgICAgICBsZXQgcGFydGljbGVTaGFkZXI6IFNoYWRlclBhcnRpY2xlU3lzdGVtID0gbmV3IFNoYWRlclBhcnRpY2xlU3lzdGVtKCk7XHJcbiAgICAgICAgcGFydGljbGVTaGFkZXIuZGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgICBwYXJ0aWNsZVNoYWRlci5kZWZpbmUgPSBbLi4ucGFydGljbGVTaGFkZXIuZGVmaW5lLCAuLi5fc291cmNlLmRlZmluZV07XHJcbiAgICAgICAgcGFydGljbGVTaGFkZXIudmVydGV4U2hhZGVyU291cmNlID0gX3NvdXJjZS5nZXRWZXJ0ZXhTaGFkZXJTb3VyY2UoKTtcclxuICAgICAgICBwYXJ0aWNsZVNoYWRlci5mcmFnbWVudFNoYWRlclNvdXJjZSA9IF9zb3VyY2UuZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTtcclxuICAgICAgICB0aGlzLiNzaGFkZXJUb1NoYWRlclBhcnRpY2xlU3lzdGVtLnNldChfc291cmNlLCBwYXJ0aWNsZVNoYWRlcik7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJldHVybiB0aGlzLiNzaGFkZXJUb1NoYWRlclBhcnRpY2xlU3lzdGVtLmdldChfc291cmNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gVHJhbnNmZXJcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gIHtcclxuICAgICAgICBpZFJlc291cmNlOiB0aGlzLmlkUmVzb3VyY2UsXHJcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgIGRhdGE6IHRoaXMuZGF0YVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgUHJvamVjdC5yZWdpc3Rlcih0aGlzLCBfc2VyaWFsaXphdGlvbi5pZFJlc291cmNlKTtcclxuICAgICAgdGhpcy5uYW1lID0gX3NlcmlhbGl6YXRpb24ubmFtZTtcclxuICAgICAgdGhpcy5kYXRhID0gX3NlcmlhbGl6YXRpb24uZGF0YTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JGb3JVc2VySW50ZXJmYWNlKCk6IE11dGF0b3JGb3JVc2VySW50ZXJmYWNlIHtcclxuICAgICAgcmV0dXJuIDxNdXRhdG9yRm9yVXNlckludGVyZmFjZT5zdXBlci5nZXRNdXRhdG9yKCk7IC8vIHJlbW92ZSBkYXRhIGZyb20gbXV0YXRvclxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IodHJ1ZSk7XHJcbiAgICAgIG11dGF0b3IuZGF0YSA9IHRoaXMuZGF0YTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByb3RlY3RlZCByZWR1Y2VNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5jYWNoZWRNdXRhdG9ycztcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnNoYWRlck1hcDtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG5cclxuICAvKipcclxuICAgKiBBIFdlYkdMIHNoYWRlcnByb2dyYW1tIGZvciBhIHBhcnRpY2xlIHN5c3RlbS4gTWFuYWdlZCBieSBhIHtAbGluayBQYXJ0aWNsZVN5c3RlbX0uIEl0IHVzZXMge0BsaW5rIFBhcnRpY2xlU3lzdGVtLnByb3RvdHlwZS5kYXRhfSB0byBnZW5lcmF0ZSBhbmQgaW5qZWN0IGNvZGUgaW50byBhIHNoYWRlciB1bml2ZXJzYWwgZGVyaXZhdGUgKEdMU0wpIHRodXMgY3JlYXRpbmcgYSBzaGFkZXIgcGFydGljbGUgc3lzdGVtIGZyb20gYSBzdXBwbGllZCB7QGxpbmsgU2hhZGVyfXMgdmVydGV4IGFuZCBmcmFnbWVudCBzaGFkZXIgc291cmNlIGNvZGUuXHJcbiAgICovXHJcbiAgQFJlbmRlckluamVjdG9yU2hhZGVyUGFydGljbGVTeXN0ZW0uZGVjb3JhdGVcclxuICBleHBvcnQgY2xhc3MgU2hhZGVyUGFydGljbGVTeXN0ZW0gaW1wbGVtZW50cyBTaGFkZXJJbnRlcmZhY2Uge1xyXG4gICAgcHVibGljIGRhdGE6IFBhcnRpY2xlRGF0YS5TeXN0ZW07XHJcbiAgICBwdWJsaWMgZGVmaW5lOiBzdHJpbmdbXSA9IFsgXCJQQVJUSUNMRVwiIF07XHJcbiAgICBwdWJsaWMgdmVydGV4U2hhZGVyU291cmNlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgZnJhZ21lbnRTaGFkZXJTb3VyY2U6IHN0cmluZztcclxuXHJcbiAgICBwdWJsaWMgcHJvZ3JhbTogV2ViR0xQcm9ncmFtO1xyXG4gICAgcHVibGljIGF0dHJpYnV0ZXM6IHsgW25hbWU6IHN0cmluZ106IG51bWJlciB9O1xyXG4gICAgcHVibGljIHVuaWZvcm1zOiB7IFtuYW1lOiBzdHJpbmddOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiB9O1xyXG5cclxuICAgIHB1YmxpYyBnZXRWZXJ0ZXhTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHsgcmV0dXJuIFwiXCI7IC8qIGluamVjdGVkIGJ5IGRlY29yYXRvciAqLyB9XHJcbiAgICBwdWJsaWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHsgcmV0dXJuIFwiXCI7IC8qIGluamVjdGVkIGJ5IGRlY29yYXRvciAqLyB9XHJcbiAgICBwdWJsaWMgZGVsZXRlUHJvZ3JhbSgpOiB2b2lkIHsvKiBpbmplY3RlZCBieSBkZWNvcmF0b3IgKi8gfVxyXG4gICAgcHVibGljIHVzZVByb2dyYW0oKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgZGVjb3JhdG9yICovIH1cclxuICAgIHB1YmxpYyBjcmVhdGVQcm9ncmFtKCk6IHZvaWQgey8qIGluamVjdGVkIGJ5IGRlY29yYXRvciAqLyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyBhdXRvbWF0aWMgYWRqdXN0bWVudCBvZiB0aGUgY29sbGlkZXJcclxuICAgKi9cclxuICBleHBvcnQgZW51bSBCT0RZX0lOSVQge1xyXG4gICAgLyoqIENvbGxpZGVyIHVzZXMgdGhlIHBpdm90IG9mIHRoZSBtZXNoIGZvciBpbml0aWxpYWxpemF0aW9uICovXHJcbiAgICBUT19NRVNILFxyXG4gICAgLyoqIENvbGxpZGVyIHVzZXMgdGhlIHRyYW5zZm9ybSBvZiB0aGUgbm9kZSBmb3IgaW5pdGlsaWFsaXphdGlvbiAqL1xyXG4gICAgVE9fTk9ERSxcclxuICAgIC8qKiBDb2xsaWRlciB1c2VzIGl0cyBvd24gcGl2b3QgZm9yIGluaXRpbGlhbGl6YXRpb24gKi9cclxuICAgIFRPX1BJVk9UXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgICAqIEFjdHMgYXMgdGhlIHBoeXNpY2FsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB7QGxpbmsgTm9kZX0gaXQncyBhdHRhY2hlZCB0by5cclxuICAgICAqIEl0J3MgdGhlIGNvbm5lY3Rpb24gYmV0d2VlbiB0aGUgRlVER0UgcmVuZGVyZWQgd29ybGQgYW5kIHRoZSBQaHlzaWNzIHdvcmxkLlxyXG4gICAgICogRm9yIHRoZSBwaHlzaWNzIHRvIGNvcnJlY3RseSBnZXQgdGhlIHRyYW5zZm9ybWF0aW9ucyByb3RhdGlvbnMgbmVlZCB0byBiZSBhcHBsaWVkIHdpdGggZnJvbSBsZWZ0ID0gdHJ1ZS5cclxuICAgICAqIE9yIHJvdGF0aW9ucyBuZWVkIHRvIGhhcHBlbiBiZWZvcmUgc2NhbGluZy5cclxuICAgICAqIEBhdXRob3IgTWFya28gRmVocmVuYmFjaCwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnRSaWdpZGJvZHkgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IENvbXBvbmVudC5yZWdpc3RlclN1YmNsYXNzKENvbXBvbmVudFJpZ2lkYm9keSk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBtYXBCb2R5VHlwZTogeyBbdHlwZTogbnVtYmVyXTogbnVtYmVyIH0gPSAodHlwZW9mIE9JTU8gPT0gXCJ1bmRlZmluZWRcIikgP1xyXG4gICAgICB7XHJcbiAgICAgICAgW0JPRFlfVFlQRS5EWU5BTUlDXTogQk9EWV9UWVBFLkRZTkFNSUMsIFtCT0RZX1RZUEUuU1RBVElDXTogQk9EWV9UWVBFLlNUQVRJQywgW0JPRFlfVFlQRS5LSU5FTUFUSUNdOiBCT0RZX1RZUEUuS0lORU1BVElDXHJcbiAgICAgIH0gOiB7XHJcbiAgICAgICAgW0JPRFlfVFlQRS5EWU5BTUlDXTogT0lNTy5SaWdpZEJvZHlUeXBlLkRZTkFNSUMsIFtCT0RZX1RZUEUuU1RBVElDXTogT0lNTy5SaWdpZEJvZHlUeXBlLlNUQVRJQywgW0JPRFlfVFlQRS5LSU5FTUFUSUNdOiBPSU1PLlJpZ2lkQm9keVR5cGUuS0lORU1BVElDXHJcbiAgICAgIH07XHJcblxyXG4gICAgLyoqIFRyYW5zZm9ybWF0aW9uIG9mIHRoZSBjb2xsaWRlciByZWxhdGl2ZSB0byB0aGUgbm9kZSdzIHRyYW5zZm9ybS4gT25jZSBzZXQgbW9zdGx5IHJlbWFpbnMgY29uc3RhbnQuIFxyXG4gICAgICogSWYgYWx0ZXJlZCwge0BsaW5rIGlzSW5pdGlhbGl6ZWR9IG11c3QgYmUgcmVzZXQgdG8gZmFsc2UgdG8gcmVjcmVhdGUgdGhlIGNvbGxpZGVyIGluIHRoZSBuZXh0IHtAbGluayBSZW5kZXIucHJlcGFyZX1cclxuICAgICAqL1xyXG4gICAgcHVibGljIG10eFBpdm90OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBWZXJ0aWNlcyB0aGF0IGJ1aWxkIGEgY29udmV4IG1lc2ggKGZvcm0gdGhhdCBpcyBpbiBpdHNlbGYgY2xvc2VkKS4gTmVlZHMgdG8gc2V0IGluIHRoZSBjb25zdHJ1Y3Rpb24gb2YgdGhlIHJiIGlmIG5vbmUgb2YgdGhlIHN0YW5kYXJkIGNvbGxpZGVycyBpcyB1c2VkLiBcclxuICAgICAqIFVudGVzdGVkIGFuZCBub3QgeWV0IGZ1bGx5IHN1cHBvcnRlZCBieSBzZXJpYWxpemF0aW9uIGFuZCBtdXRhdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbnZleE1lc2g6IEZsb2F0MzJBcnJheSA9IG51bGw7XHJcblxyXG4gICAgLyoqIENvbGxpc2lvbnMgd2l0aCByaWdpZGJvZGllcyBoYXBwZW5pbmcgdG8gdGhpcyBib2R5LCBjYW4gYmUgdXNlZCB0byBidWlsZCBhIGN1c3RvbSBvbkNvbGxpc2lvblN0YXkgZnVuY3Rpb25hbGl0eS4gKi9cclxuICAgIHB1YmxpYyBjb2xsaXNpb25zOiBDb21wb25lbnRSaWdpZGJvZHlbXSA9IG5ldyBBcnJheSgpO1xyXG4gICAgLyoqIFRyaWdnZXJzIHRoYXQgYXJlIGN1cnJlbnRseSB0cmlnZ2VyaW5nIHRoaXMgYm9keSAqL1xyXG4gICAgcHVibGljIHRyaWdnZXJpbmdzOiBDb21wb25lbnRSaWdpZGJvZHlbXSA9IG5ldyBBcnJheSgpO1xyXG5cclxuICAgIC8qKiBcclxuICAgICAqIFRoZSBncm91cHMgdGhpcyBvYmplY3QgY29sbGlkZXMgd2l0aC4gR3JvdXBzIG11c3QgYmUgd3JpdGVuIGluIGZvcm0gb2ZcclxuICAgICAqICBlLmcuIGNvbGxpc2lvbk1hc2sgPSB7QGxpbmsgQ09MTElTSU9OX0dST1VQLkRFRkFVTFR9IHwge0BsaW5rIENPTExJU0lPTl9HUk9VUH0uLi4uIGFuZCBzbyBvbiB0byBjb2xsaWRlIHdpdGggbXVsdGlwbGUgZ3JvdXBzLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNvbGxpc2lvbk1hc2s6IG51bWJlcjtcclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBBdXRvbWF0aWMgYWRqdXN0bWVudCBvZiB0aGUgcGl2b3Qgd2hlbiB7QGxpbmsgUmVuZGVyLnByZXBhcmV9IGlzIGNhbGxlZCBhY2NvcmRpbmcgdG8ge0BsaW5rIEJPRFlfSU5JVH1cclxuICAgICAqL1xyXG4gICAgcHVibGljIGluaXRpYWxpemF0aW9uOiBCT0RZX0lOSVQgPSBCT0RZX0lOSVQuVE9fUElWT1Q7XHJcbiAgICAvKiogTWFya3MgaWYgY29sbGlkZXIgd2FzIGluaXRpYWxpemVkLiBSZXNldCB0byBmYWxzZSB0byBpbml0aWFsaXplIGFnYWluIGUuZy4gYWZ0ZXIgbWFuaXB1bGF0aW9uIG9mIG10eFBpdm90ICovXHJcbiAgICBwdWJsaWMgaXNJbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8qKiBJRCB0byByZWZlcmVuY2UgdGhpcyBzcGVjaWZpYyBDb21wb25lbnRSaWdpZGJvZHkgKi9cclxuICAgICNpZDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAvL1ByaXZhdGUgaW5mb3JtYXRpb25zIC0gTW9zdGx5IE9pbW9QaHlzaWNzIHZhcmlhYmxlcyB0aGF0IHNob3VsZCBub3QgYmUgZXhwb3NlZCB0byB0aGUgRlVER0UgVXNlciBhbmQgbWFuaXB1bGF0ZWQgYnkgdGhlbVxyXG4gICAgI2NvbGxpZGVyOiBPSU1PLlNoYXBlO1xyXG4gICAgI2NvbGxpZGVySW5mbzogT0lNTy5TaGFwZUNvbmZpZztcclxuICAgICNjb2xsaXNpb25Hcm91cDogQ09MTElTSU9OX0dST1VQID0gQ09MTElTSU9OX0dST1VQLkRFRkFVTFQ7XHJcbiAgICAjdHlwZUNvbGxpZGVyOiBDT0xMSURFUl9UWVBFID0gQ09MTElERVJfVFlQRS5DVUJFO1xyXG5cclxuICAgICNyaWdpZGJvZHk6IE9JTU8uUmlnaWRCb2R5O1xyXG4gICAgI3JpZ2lkYm9keUluZm86IE9JTU8uUmlnaWRCb2R5Q29uZmlnID0gbmV3IE9JTU8uUmlnaWRCb2R5Q29uZmlnKCk7XHJcbiAgICAjdHlwZUJvZHk6IEJPRFlfVFlQRSA9IEJPRFlfVFlQRS5EWU5BTUlDO1xyXG5cclxuICAgICNtYXNzRGF0YTogT0lNTy5NYXNzRGF0YSA9IG5ldyBPSU1PLk1hc3NEYXRhKCk7XHJcbiAgICAjcmVzdGl0dXRpb246IG51bWJlcjtcclxuICAgICNmcmljdGlvbjogbnVtYmVyO1xyXG4gICAgI2RhbXBpbmdMaW5lYXI6IG51bWJlciA9IDAuMTtcclxuICAgICNkYW1waW5nQW5ndWxhcjogbnVtYmVyID0gMC4xO1xyXG4gICAgI2VmZmVjdFJvdGF0aW9uOiBWZWN0b3IzID0gVmVjdG9yMy5PTkUoKTtcclxuICAgICNlZmZlY3RHcmF2aXR5OiBudW1iZXIgPSAxO1xyXG4gICAgI2lzVHJpZ2dlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgI210eFBpdm90VW5zY2FsZWQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG4gICAgI210eFBpdm90SW52ZXJzZTogTWF0cml4NHg0ID0gTWF0cml4NHg0LklERU5USVRZKCk7XHJcblxyXG4gICAgI2NhbGxiYWNrczogT0lNTy5Db250YWN0Q2FsbGJhY2s7IC8vQ2FsbGJhY2sgTWV0aG9kcyB3aGVuIHdpdGhpbiB0aGUgb2ltb1N5c3RlbSBhIGV2ZW50IGlzIGhhcHBlbmluZ1xyXG5cclxuICAgIC8vICNwaHlzaWNzOiBQaHlzaWNzOyAvL1RPRE86IGtlZXAgYSBwb2ludGVyIHRvIHRoZSBwaHlzaWNzIGluc3RhbmNlIHVzZWQgYnkgdGhpcyBjb21wb25lbnRcclxuXHJcbiAgICAvKiogQ3JlYXRpbmcgYSBuZXcgcmlnaWRib2R5IHdpdGggYSB3ZWlnaHQgaW4ga2csIGEgcGh5c2ljcyB0eXBlIChkZWZhdWx0ID0gZHluYW1pYyksIGEgY29sbGlkZXIgdHlwZSB3aGF0IHBoeXNpY2FsIGZvcm0gaGFzIHRoZSBjb2xsaWRlciwgdG8gd2hhdCBncm91cCBkb2VzIGl0IGJlbG9uZywgaXMgdGhlcmUgYSB0cmFuc2Zvcm0gTWF0cml4IHRoYXQgc2hvdWxkIGJlIHVzZWQsIGFuZCBpcyB0aGUgY29sbGlkZXIgZGVmaW5lZCBhcyBhIGdyb3VwIG9mIHBvaW50cyB0aGF0IHJlcHJlc2VudCBhIGNvbnZleCBtZXNoLiAqL1xyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9tYXNzOiBudW1iZXIgPSAxLCBfdHlwZTogQk9EWV9UWVBFID0gQk9EWV9UWVBFLkRZTkFNSUMsIF9jb2xsaWRlclR5cGU6IENPTExJREVSX1RZUEUgPSBDT0xMSURFUl9UWVBFLkNVQkUsIF9ncm91cDogQ09MTElTSU9OX0dST1VQID0gUGh5c2ljcy5zZXR0aW5ncy5kZWZhdWx0Q29sbGlzaW9uR3JvdXAsIF9tdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCA9IG51bGwsIF9jb252ZXhNZXNoOiBGbG9hdDMyQXJyYXkgPSBudWxsKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcbiAgICAgIHRoaXMuY3JlYXRlKF9tYXNzLCBfdHlwZSwgX2NvbGxpZGVyVHlwZSwgX2dyb3VwLCBfbXR4VHJhbnNmb3JtLCBfY29udmV4TWVzaCk7XHJcblxyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX0FERCwgdGhpcy5obmRFdmVudCk7XHJcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfUkVNT1ZFLCB0aGlzLmhuZEV2ZW50KTtcclxuICAgICAgLy8gdGhpcy5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk5PREVfREVTRVJJQUxJWkVELCB0aGlzLmhuZEV2ZW50KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiBBY2Nlc3NvcnNcclxuICAgIHB1YmxpYyBnZXQgaWQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2lkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBVc2VkIGZvciBjYWxjdWxhdGlvbiBvZiB0aGUgZ2VvbWV0cmljYWwgcmVsYXRpb25zaGlwIG9mIG5vZGUgYW5kIGNvbGxpZGVyIGJ5IHtAbGluayBSZW5kZXJ9Ki9cclxuICAgIHB1YmxpYyBnZXQgbXR4UGl2b3RJbnZlcnNlKCk6IE1hdHJpeDR4NCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtdHhQaXZvdEludmVyc2U7XHJcbiAgICB9XHJcbiAgICAvKiogVXNlZCBmb3IgY2FsY3VsYXRpb24gb2YgdGhlIGdlb21ldHJpY2FsIHJlbGF0aW9uc2hpcCBvZiBub2RlIGFuZCBjb2xsaWRlciBieSB7QGxpbmsgUmVuZGVyfSovXHJcbiAgICBwdWJsaWMgZ2V0IG10eFBpdm90VW5zY2FsZWQoKTogTWF0cml4NHg0IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI210eFBpdm90VW5zY2FsZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFJldHJpZXZlIHRoZSBib2R5IHR5cGUuIFNlZSB7QGxpbmsgQk9EWV9UWVBFfSAqL1xyXG4gICAgcHVibGljIGdldCB0eXBlQm9keSgpOiBCT0RZX1RZUEUge1xyXG4gICAgICByZXR1cm4gdGhpcy4jdHlwZUJvZHk7XHJcbiAgICB9XHJcbiAgICAvKiogU2V0IHRoZSBib2R5IHR5cGUuIFNlZSB7QGxpbmsgQk9EWV9UWVBFfSAqL1xyXG4gICAgcHVibGljIHNldCB0eXBlQm9keShfdmFsdWU6IEJPRFlfVFlQRSkge1xyXG4gICAgICB0aGlzLiN0eXBlQm9keSA9IF92YWx1ZTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldFR5cGUoQ29tcG9uZW50UmlnaWRib2R5Lm1hcEJvZHlUeXBlW3RoaXMuI3R5cGVCb2R5XSk7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRNYXNzRGF0YSh0aGlzLiNtYXNzRGF0YSk7IC8vaGF2ZSB0byByZXNldCBtYXNzIGFmdGVyIGNoYW5naW5nIHRoZSB0eXBlLCBzaW5jZSBPaW1vIGlzIGhhbmRsaW5nIG1hc3MgaW50ZXJuYWxseSB3cm9uZyB3aGVuIHN3aXRjaGluZyB0eXBlc1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUaGUgc2hhcGUgdGhhdCByZXByZXNlbnRzIHRoZSB7QGxpbmsgTm9kZX0gaW4gdGhlIHBoeXNpY2FsIHdvcmxkLiBEZWZhdWx0IGlzIGEgQ3ViZS4gKi9cclxuICAgIHB1YmxpYyBnZXQgdHlwZUNvbGxpZGVyKCk6IENPTExJREVSX1RZUEUge1xyXG4gICAgICByZXR1cm4gdGhpcy4jdHlwZUNvbGxpZGVyO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCB0eXBlQ29sbGlkZXIoX3ZhbHVlOiBDT0xMSURFUl9UWVBFKSB7XHJcbiAgICAgIGlmIChfdmFsdWUgIT0gdGhpcy4jdHlwZUNvbGxpZGVyICYmIHRoaXMuI3JpZ2lkYm9keSAhPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy4jdHlwZUNvbGxpZGVyID0gX3ZhbHVlO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBjb2xsaXNpb24gZ3JvdXAgdGhpcyB7QGxpbmsgTm9kZX0gYmVsb25ncyB0byBpdCdzIHRoZSBkZWZhdWx0IGdyb3VwIG5vcm1hbGx5IHdoaWNoIG1lYW5zIGl0IHBoeXNpY2FsbHkgY29sbGlkZXMgd2l0aCBldmVyeSBncm91cCBiZXNpZGVzIHRyaWdnZXIuICovXHJcbiAgICBwdWJsaWMgZ2V0IGNvbGxpc2lvbkdyb3VwKCk6IENPTExJU0lPTl9HUk9VUCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjb2xsaXNpb25Hcm91cDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgY29sbGlzaW9uR3JvdXAoX3ZhbHVlOiBDT0xMSVNJT05fR1JPVVApIHtcclxuICAgICAgdGhpcy4jY29sbGlzaW9uR3JvdXAgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLiNyaWdpZGJvZHkgIT0gbnVsbClcclxuICAgICAgICB0aGlzLiNyaWdpZGJvZHkuZ2V0U2hhcGVMaXN0KCkuc2V0Q29sbGlzaW9uR3JvdXAodGhpcy4jY29sbGlzaW9uR3JvdXApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBNYXJraW5nIHRoZSBCb2R5IGFzIGEgdHJpZ2dlciB0aGVyZWZvcmUgbm90IGluZmx1ZW5jaW5nIHRoZSBjb2xsaXNpb24gc3lzdGVtIGJ1dCBvbmx5IHNlbmRpbmcgdHJpZ2dlckV2ZW50cyAqL1xyXG4gICAgcHVibGljIGdldCBpc1RyaWdnZXIoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNpc1RyaWdnZXI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGlzVHJpZ2dlcihfdmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgdGhpcy4jaXNUcmlnZ2VyID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5nZXRPaW1vUmlnaWRib2R5KCkgIT0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuZ2V0T2ltb1JpZ2lkYm9keSgpLl9pc1RyaWdnZXIgPSB0aGlzLiNpc1RyaWdnZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHBoeXNpY2FsIHdlaWdodCBvZiB0aGUge0BsaW5rIE5vZGV9XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbWFzcygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcmlnaWRib2R5LmdldE1hc3MoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0dGluZyB0aGUgcGh5c2ljYWwgd2VpZ2h0IG9mIHRoZSB7QGxpbmsgTm9kZX0gaW4ga2dcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBtYXNzKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21hc3NEYXRhLm1hc3MgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLm5vZGUgIT0gbnVsbClcclxuICAgICAgICBpZiAodGhpcy4jcmlnaWRib2R5ICE9IG51bGwpXHJcbiAgICAgICAgICB0aGlzLiNyaWdpZGJvZHkuc2V0TWFzc0RhdGEodGhpcy4jbWFzc0RhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBEcmFnIG9mIGxpbmVhciBtb3ZlbWVudC4gQSBCb2R5IGRvZXMgc2xvdyBkb3duIGV2ZW4gb24gYSBzdXJmYWNlIHdpdGhvdXQgZnJpY3Rpb24uICovXHJcbiAgICBwdWJsaWMgZ2V0IGRhbXBUcmFuc2xhdGlvbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcmlnaWRib2R5LmdldExpbmVhckRhbXBpbmcoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgZGFtcFRyYW5zbGF0aW9uKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI2RhbXBpbmdMaW5lYXIgPSBfdmFsdWU7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRMaW5lYXJEYW1waW5nKF92YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIERyYWcgb2Ygcm90YXRpb24uICovXHJcbiAgICBwdWJsaWMgZ2V0IGRhbXBSb3RhdGlvbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcmlnaWRib2R5LmdldEFuZ3VsYXJEYW1waW5nKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGRhbXBSb3RhdGlvbihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNkYW1waW5nQW5ndWxhciA9IF92YWx1ZTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldEFuZ3VsYXJEYW1waW5nKF92YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBmYWN0b3IgdGhpcyByaWdpZGJvZHkgcmVhY3RzIHJvdGF0aW9ucyB0aGF0IGhhcHBlbiBpbiB0aGUgcGh5c2ljYWwgd29ybGQuIDAgdG8gbG9jayByb3RhdGlvbiB0aGlzIGF4aXMuICovXHJcbiAgICBwdWJsaWMgZ2V0IGVmZmVjdFJvdGF0aW9uKCk6IFZlY3RvcjMge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZWZmZWN0Um90YXRpb247XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGVmZmVjdFJvdGF0aW9uKF9lZmZlY3Q6IFZlY3RvcjMpIHtcclxuICAgICAgdGhpcy4jZWZmZWN0Um90YXRpb24gPSBfZWZmZWN0O1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuc2V0Um90YXRpb25GYWN0b3IobmV3IE9JTU8uVmVjMyh0aGlzLiNlZmZlY3RSb3RhdGlvbi54LCB0aGlzLiNlZmZlY3RSb3RhdGlvbi55LCB0aGlzLiNlZmZlY3RSb3RhdGlvbi56KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBmYWN0b3IgdGhpcyByaWdpZGJvZHkgcmVhY3RzIHRvIHdvcmxkIGdyYXZpdHkuIERlZmF1bHQgPSAxIGUuZy4gMSo5LjgxIG0vcy4gKi9cclxuICAgIHB1YmxpYyBnZXQgZWZmZWN0R3Jhdml0eSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZWZmZWN0R3Jhdml0eTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgZWZmZWN0R3Jhdml0eShfZWZmZWN0OiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jZWZmZWN0R3Jhdml0eSA9IF9lZmZlY3Q7XHJcbiAgICAgIGlmICh0aGlzLiNyaWdpZGJvZHkgIT0gbnVsbCkgdGhpcy4jcmlnaWRib2R5LnNldEdyYXZpdHlTY2FsZSh0aGlzLiNlZmZlY3RHcmF2aXR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgZnJpY3Rpb24gb2YgdGhlIHJpZ2lkYm9keSwgd2hpY2ggaXMgdGhlIGZhY3RvciBvZiBzbGlkaW5nIHJlc2lzdGFuY2Ugb2YgdGhpcyByaWdpZGJvZHkgb24gc3VyZmFjZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBmcmljdGlvbigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jZnJpY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGZyaWN0aW9uIG9mIHRoZSByaWdpZGJvZHksIHdoaWNoIGlzIHRoZSBmYWN0b3Igb2YgIHNsaWRpbmcgcmVzaXN0YW5jZSBvZiB0aGlzIHJpZ2lkYm9keSBvbiBzdXJmYWNlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IGZyaWN0aW9uKF9mcmljdGlvbjogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI2ZyaWN0aW9uID0gX2ZyaWN0aW9uO1xyXG4gICAgICBpZiAodGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpICE9IG51bGwpXHJcbiAgICAgICAgdGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpLnNldEZyaWN0aW9uKHRoaXMuI2ZyaWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgcmVzdGl0dXRpb24gb2YgdGhlIHJpZ2lkYm9keSwgd2hpY2ggaXMgdGhlIGZhY3RvciBvZiBib3VuY2luZXNzIG9mIHRoaXMgcmlnaWRib2R5IG9uIHN1cmZhY2VzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgcmVzdGl0dXRpb24oKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3Jlc3RpdHV0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSByZXN0aXR1dGlvbiBvZiB0aGUgcmlnaWRib2R5LCB3aGljaCBpcyB0aGUgZmFjdG9yIG9mIGJvdW5jaW5lc3Mgb2YgdGhpcyByaWdpZGJvZHkgb24gc3VyZmFjZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCByZXN0aXR1dGlvbihfcmVzdGl0dXRpb246IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNyZXN0aXR1dGlvbiA9IF9yZXN0aXR1dGlvbjtcclxuICAgICAgaWYgKHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKSAhPSBudWxsKVxyXG4gICAgICAgIHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKS5zZXRSZXN0aXR1dGlvbih0aGlzLiNyZXN0aXR1dGlvbik7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyBBY3RpdmF0ZSB0aGUgZnVuY3Rpb25zIG9mIHRoaXMgY29tcG9uZW50IGFzIHJlc3BvbnNlIHRvIGV2ZW50c1xyXG4gICAgcHVibGljIGhuZEV2ZW50ID0gKF9ldmVudDogRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgc3dpdGNoIChfZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgRVZFTlQuQ09NUE9ORU5UX0FERDpcclxuICAgICAgICAgIC8vIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfQUNUSVZBVEUsIHRoaXMuYWRkUmlnaWRib2R5VG9Xb3JsZCk7XHJcbiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ09NUE9ORU5UX0RFQUNUSVZBVEUsIHRoaXMucmVtb3ZlUmlnaWRib2R5RnJvbVdvcmxkKTtcclxuICAgICAgICAgIC8vIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk5PREVfQUNUSVZBVEUsIHRoaXMuYWRkUmlnaWRib2R5VG9Xb3JsZCwgdHJ1ZSk7IC8vIHVzZSBjYXB0dXJlIHRvIHJlYWN0IHRvIGJyb2FkY2FzdCFcclxuICAgICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKEVWRU5ULk5PREVfREVBQ1RJVkFURSwgdGhpcy5yZW1vdmVSaWdpZGJvZHlGcm9tV29ybGQsIHRydWUpO1xyXG4gICAgICAgICAgaWYgKCF0aGlzLm5vZGUuY21wVHJhbnNmb3JtKVxyXG4gICAgICAgICAgICBEZWJ1Zy53YXJuKFwiQ29tcG9uZW50UmlnaWRib2R5IGF0dGFjaGVkIHRvIG5vZGUgbWlzc2luZyBDb21wb25lbnRUcmFuc2Zvcm1cIiwgdGhpcy5ub2RlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRVZFTlQuQ09NUE9ORU5UX1JFTU9WRTpcclxuICAgICAgICAgIC8vIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVC5DT01QT05FTlRfQURELCB0aGlzLmFkZFJpZ2lkYm9keVRvV29ybGQpO1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULkNPTVBPTkVOVF9SRU1PVkUsIHRoaXMucmVtb3ZlUmlnaWRib2R5RnJvbVdvcmxkKTtcclxuICAgICAgICAgIC8vIHRoaXMubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULk5PREVfQUNUSVZBVEUsIHRoaXMuYWRkUmlnaWRib2R5VG9Xb3JsZCwgdHJ1ZSk7IC8vIHVzZSBjYXB0dXJlIHRvIHJlYWN0IHRvIGJyb2FkY2FzdCFcclxuICAgICAgICAgIHRoaXMubm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULk5PREVfREVBQ1RJVkFURSwgdGhpcy5yZW1vdmVSaWdpZGJvZHlGcm9tV29ybGQsIHRydWUpO1xyXG4gICAgICAgICAgdGhpcy5yZW1vdmVSaWdpZGJvZHlGcm9tV29ybGQoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgRVZFTlQuTk9ERV9ERVNFUklBTElaRUQ6XHJcbiAgICAgICAgICBpZiAoIXRoaXMubm9kZS5jbXBUcmFuc2Zvcm0pXHJcbiAgICAgICAgICAgIERlYnVnLmVycm9yKFwiQ29tcG9uZW50UmlnaWRib2R5IGF0dGFjaGVkIHRvIG5vZGUgbWlzc2luZyBDb21wb25lbnRUcmFuc2Zvcm1cIiwgdGhpcy5ub2RlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vI3JlZ2lvbiBUcmFuc2Zvcm1hdGlvblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSByaWdpZGJvZHkgaW4gdGhlIGZvcm0gdGhlIHBoeXNpY3MgZW5naW5lIGlzIHVzaW5nIGl0LCBzaG91bGQgbm90IGJlIHVzZWQgdW5sZXNzIGEgZnVuY3Rpb25hbGl0eVxyXG4gICAgICogaXMgbm90IHByb3ZpZGVkIHRocm91Z2ggdGhlIEZVREdFIEludGVncmF0aW9uLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0T2ltb1JpZ2lkYm9keSgpOiBPSU1PLlJpZ2lkQm9keSB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNyaWdpZGJvZHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFJvdGF0aW5nIHRoZSByaWdpZGJvZHkgdGhlcmVmb3JlIGNoYW5naW5nIGl0J3Mgcm90YXRpb24gb3ZlciB0aW1lIGRpcmVjdGx5IGluIHBoeXNpY3MuIFRoaXMgd2F5IHBoeXNpY3MgaXMgY2hhbmdpbmcgaW5zdGVhZCBvZiB0cmFuc2Zvcm0uIFxyXG4gICAgICogIEJ1dCB5b3UgYXJlIGFibGUgdG8gaW5jcmVtZW50YWwgY2hhbmdpbmcgaXQgaW5zdGVhZCBvZiBhIGRpcmVjdCByb3RhdGlvbi4gIEFsdGhvdWdoIGl0J3MgYWx3YXlzIHByZWZlcmVkIHRvIHVzZSBmb3JjZXMgaW4gcGh5c2ljcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHJvdGF0ZUJvZHkoX3JvdGF0aW9uQ2hhbmdlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5yb3RhdGVYeXoobmV3IE9JTU8uVmVjMyhfcm90YXRpb25DaGFuZ2UueCAqIENhbGMuZGVnMnJhZCwgX3JvdGF0aW9uQ2hhbmdlLnkgKiBDYWxjLmRlZzJyYWQsIF9yb3RhdGlvbkNoYW5nZS56ICogQ2FsYy5kZWcycmFkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRyYW5zbGF0aW5nIHRoZSByaWdpZGJvZHkgdGhlcmVmb3JlIGNoYW5naW5nIGl0J3MgcGxhY2Ugb3ZlciB0aW1lIGRpcmVjdGx5IGluIHBoeXNpY3MuIFRoaXMgd2F5IHBoeXNpY3MgaXMgY2hhbmdpbmcgaW5zdGVhZCBvZiB0cmFuc2Zvcm0uIFxyXG4gICAgICogIEJ1dCB5b3UgYXJlIGFibGUgdG8gaW5jcmVtZW50YWxseSBjaGFuZ2luZyBpdCBpbnN0ZWFkIG9mIGEgZGlyZWN0IHBvc2l0aW9uLiBBbHRob3VnaCBpdCdzIGFsd2F5cyBwcmVmZXJlZCB0byB1c2UgZm9yY2VzIGluIHBoeXNpY3MuIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgdHJhbnNsYXRlQm9keShfdHJhbnNsYXRpb25DaGFuZ2U6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnRyYW5zbGF0ZShuZXcgT0lNTy5WZWMzKF90cmFuc2xhdGlvbkNoYW5nZS54LCBfdHJhbnNsYXRpb25DaGFuZ2UueSwgX3RyYW5zbGF0aW9uQ2hhbmdlLnopKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY3VycmVudCBQT1NJVElPTiBvZiB0aGUge0BsaW5rIE5vZGV9IGluIHRoZSBwaHlzaWNhbCBzcGFjZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24oKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCB0bXBQb3M6IE9JTU8uVmVjMyA9IHRoaXMuI3JpZ2lkYm9keS5nZXRQb3NpdGlvbigpO1xyXG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjModG1wUG9zLngsIHRtcFBvcy55LCB0bXBQb3Mueik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjdXJyZW50IFBPU0lUSU9OIG9mIHRoZSB7QGxpbmsgTm9kZX0gaW4gdGhlIHBoeXNpY2FsIHNwYWNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRQb3NpdGlvbihfdmFsdWU6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldFBvc2l0aW9uKG5ldyBPSU1PLlZlYzMoX3ZhbHVlLngsIF92YWx1ZS55LCBfdmFsdWUueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBjdXJyZW50IFJPVEFUSU9OIG9mIHRoZSB7QGxpbmsgTm9kZX0gaW4gdGhlIHBoeXNpY2FsIHNwYWNlLiBOb3RlIHRoaXMgcmFuZ2UgZnJvbSAtcGkgdG8gcGksIHNvIC05MCB0byA5MC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJvdGF0aW9uKCk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgb3JpZW50YXRpb246IE9JTU8uUXVhdCA9IHRoaXMuI3JpZ2lkYm9keS5nZXRPcmllbnRhdGlvbigpO1xyXG4gICAgICBsZXQgdG1wUXVhdDogUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKG9yaWVudGF0aW9uLngsIG9yaWVudGF0aW9uLnksIG9yaWVudGF0aW9uLnosIG9yaWVudGF0aW9uLncpO1xyXG4gICAgICByZXR1cm4gdG1wUXVhdC5ldWxlckFuZ2xlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgUk9UQVRJT04gb2YgdGhlIHtAbGluayBOb2RlfSBpbiB0aGUgcGh5c2ljYWwgc3BhY2UsIGluIGRlZ3JlZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFJvdGF0aW9uKF92YWx1ZTogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICBsZXQgcXVhdDogT0lNTy5RdWF0ID0gbmV3IE9JTU8uUXVhdCgpO1xyXG4gICAgICBsZXQgbXR4Um90OiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuICAgICAgbXR4Um90LnJvdGF0ZShuZXcgVmVjdG9yMyhfdmFsdWUueCwgX3ZhbHVlLnksIF92YWx1ZS56KSk7XHJcbiAgICAgIGxldCBhcnJheTogRmxvYXQzMkFycmF5ID0gbXR4Um90LmdldCgpO1xyXG4gICAgICBsZXQgcm90OiBPSU1PLk1hdDMgPSBuZXcgT0lNTy5NYXQzKGFycmF5WzBdLCBhcnJheVs0XSwgYXJyYXlbOF0sIGFycmF5WzFdLCBhcnJheVs1XSwgYXJyYXlbOV0sIGFycmF5WzJdLCBhcnJheVs2XSwgYXJyYXlbMTBdKTtcclxuICAgICAgcXVhdC5mcm9tTWF0Myhyb3QpO1xyXG4gICAgICAvLyBxdWF0Lm5vcm1hbGl6ZSgpO1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuc2V0T3JpZW50YXRpb24ocXVhdCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKiBHZXQgdGhlIGN1cnJlbnQgU0NBTElORyBpbiB0aGUgcGh5c2ljYWwgc3BhY2UuICovXHJcbiAgICBwdWJsaWMgZ2V0U2NhbGluZygpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSB0aGlzLm5vZGUubXR4V29ybGQuc2NhbGluZy5jbG9uZTtcclxuICAgICAgc2NhbGluZy54ICo9IHRoaXMubXR4UGl2b3Quc2NhbGluZy54O1xyXG4gICAgICBzY2FsaW5nLnkgKj0gdGhpcy5tdHhQaXZvdC5zY2FsaW5nLnk7XHJcbiAgICAgIHNjYWxpbmcueiAqPSB0aGlzLm10eFBpdm90LnNjYWxpbmcuejtcclxuICAgICAgcmV0dXJuIHNjYWxpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFNjYWxpbmcgcmVxdWlyZXMgdGhlIGNvbGxpZGVyIHRvIGJlIGNvbXBsZXRlbHkgcmVjcmVhdGVkIGFuZXcgKi9cclxuICAgIHB1YmxpYyBzZXRTY2FsaW5nKF92YWx1ZTogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICAvLyBsZXQgc2NhbGluZzogVmVjdG9yMyA9IF92YWx1ZS5jbG9uZTsgICBcclxuICAgICAgdGhpcy5jcmVhdGVDb2xsaWRlcihuZXcgT0lNTy5WZWMzKF92YWx1ZS54IC8gMiwgX3ZhbHVlLnkgLyAyLCBfdmFsdWUueiAvIDIpLCB0aGlzLiN0eXBlQ29sbGlkZXIpOyAvL3JlY3JlYXRlIHRoZSBjb2xsaWRlclxyXG4gICAgICB0aGlzLiNjb2xsaWRlciA9IG5ldyBPSU1PLlNoYXBlKHRoaXMuI2NvbGxpZGVySW5mbyk7XHJcbiAgICAgIGxldCBvbGRDb2xsaWRlcjogT0lNTy5TaGFwZSA9IHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmFkZFNoYXBlKHRoaXMuI2NvbGxpZGVyKTsgLy9hZGQgbmV3IGNvbGxpZGVyLCBiZWZvcmUgcmVtb3ZpbmcgdGhlIG9sZCwgc28gdGhlIHJiIGlzIG5ldmVyIGFjdGl2ZSB3aXRoIDAgY29sbGlkZXJzXHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5yZW1vdmVTaGFwZShvbGRDb2xsaWRlcik7IC8vcmVtb3ZlIHRoZSBvbGQgY29sbGlkZXJcclxuICAgICAgdGhpcy4jY29sbGlkZXIudXNlckRhdGEgPSB0aGlzOyAvL3Jlc2V0IHRoZSBleHRyYSBpbmZvcm1hdGlvbiBzbyB0aGF0IHRoaXMgY29sbGlkZXIga25vd3MgdG8gd2hpY2ggRlVER0UgQ29tcG9uZW50IGl0J3MgY29ubmVjdGVkXHJcbiAgICAgIHRoaXMuI2NvbGxpZGVyLnNldENvbGxpc2lvbkdyb3VwKHRoaXMuY29sbGlzaW9uR3JvdXApO1xyXG4gICAgICB0aGlzLiNjb2xsaWRlci5zZXRDb2xsaXNpb25NYXNrKHRoaXMuY29sbGlzaW9uTWFzayk7XHJcblxyXG4gICAgICB0aGlzLiNjb2xsaWRlci5zZXRSZXN0aXR1dGlvbih0aGlzLiNyZXN0aXR1dGlvbik7XHJcbiAgICAgIHRoaXMuI2NvbGxpZGVyLnNldEZyaWN0aW9uKHRoaXMuI2ZyaWN0aW9uKTtcclxuICAgICAgdGhpcy4jY29sbGlkZXIuc2V0Q29udGFjdENhbGxiYWNrKHRoaXMuI2NhbGxiYWNrcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgcmlnaWRib2R5IGFjY29yZGluZyB0byBpdHMgaW5pdGlhbGl6YXRpb24gc2V0dGluZyB0byBtYXRjaCB0aGUgbWVzaCwgdGhlIG5vZGUgb3IgaXRzIG93biBwaXZvdCBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIGluaXRpYWxpemUoKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5ub2RlKSAvLyBkZWxheSBpbml0aWFsaXphdGlvbiB1bnRpbCB0aGlzIHJpZ2lkYm9keSBpcyBhdHRhY2hlZCB0byBhIG5vZGVcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIHN3aXRjaCAoTnVtYmVyKHRoaXMuaW5pdGlhbGl6YXRpb24pKSB7XHJcbiAgICAgICAgY2FzZSBCT0RZX0lOSVQuVE9fTk9ERTpcclxuICAgICAgICAgIHRoaXMubXR4UGl2b3QgPSBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQk9EWV9JTklULlRPX01FU0g6XHJcbiAgICAgICAgICBsZXQgY21wTWVzaDogQ29tcG9uZW50TWVzaCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk7XHJcbiAgICAgICAgICBpZiAoY21wTWVzaClcclxuICAgICAgICAgICAgdGhpcy5tdHhQaXZvdCA9IGNtcE1lc2gubXR4UGl2b3QuY2xvbmU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEJPRFlfSU5JVC5UT19QSVZPVDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBtdHhXb3JsZDogTWF0cml4NHg0ID0gTWF0cml4NHg0Lk1VTFRJUExJQ0FUSU9OKHRoaXMubm9kZS5tdHhXb3JsZCwgdGhpcy5tdHhQaXZvdCk7XHJcblxyXG4gICAgICBsZXQgcG9zaXRpb246IFZlY3RvcjMgPSBtdHhXb3JsZC50cmFuc2xhdGlvbjsgLy9BZGRpbmcgdGhlIG9mZnNldHMgZnJvbSB0aGUgcGl2b3RcclxuICAgICAgbGV0IHJvdGF0aW9uOiBWZWN0b3IzID0gbXR4V29ybGQuZ2V0RXVsZXJBbmdsZXMoKTtcclxuICAgICAgbGV0IHNjYWxpbmc6IFZlY3RvcjMgPSBtdHhXb3JsZC5zY2FsaW5nO1xyXG4gICAgICAvL3NjYWxpbmcgcmVxdWlyZXMgY29sbGlkZXIgdG8gYmUgcmVjcmVhdGVkXHJcbiAgICAgIHRoaXMuc2V0U2NhbGluZyhzY2FsaW5nKTtcclxuXHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5zZXRNYXNzRGF0YSh0aGlzLiNtYXNzRGF0YSk7XHJcbiAgICAgIHRoaXMuc2V0UG9zaXRpb24ocG9zaXRpb24pOyAvL3NldCB0aGUgYWN0dWFsIG5ldyByb3RhdGlvbi9wb3NpdGlvbiBmb3IgdGhpcyBSYiBhZ2FpbiBzaW5jZSBpdCdzIG5vdyB1cGRhdGVkXHJcbiAgICAgIHRoaXMuc2V0Um90YXRpb24ocm90YXRpb24pO1xyXG5cclxuICAgICAgbGV0IHNjYWxpbmdJbnZlcnNlOiBWZWN0b3IzID0gdGhpcy5ub2RlLm10eFdvcmxkLnNjYWxpbmcubWFwKF9pID0+IDEgLyBfaSk7XHJcbiAgICAgIHRoaXMuI210eFBpdm90VW5zY2FsZWQgPSBNYXRyaXg0eDQuQ09OU1RSVUNUSU9OKHsgdHJhbnNsYXRpb246IHRoaXMubXR4UGl2b3QudHJhbnNsYXRpb24sIHJvdGF0aW9uOiB0aGlzLm10eFBpdm90LnJvdGF0aW9uLCBzY2FsaW5nOiBzY2FsaW5nSW52ZXJzZSB9KTtcclxuICAgICAgdGhpcy4jbXR4UGl2b3RJbnZlcnNlID0gTWF0cml4NHg0LklOVkVSU0lPTih0aGlzLiNtdHhQaXZvdFVuc2NhbGVkKTtcclxuXHJcbiAgICAgIHRoaXMuYWRkUmlnaWRib2R5VG9Xb3JsZCgpO1xyXG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFZlbG9jaXR5IGFuZCBGb3JjZXNcclxuICAgIC8qKlxyXG4gICAgKiBHZXQgdGhlIGN1cnJlbnQgVkVMT0NJVFkgb2YgdGhlIHtAbGluayBOb2RlfVxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBnZXRWZWxvY2l0eSgpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IHZlbG9jaXR5OiBPSU1PLlZlYzMgPSB0aGlzLiNyaWdpZGJvZHkuZ2V0TGluZWFyVmVsb2NpdHkoKTtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHZlbG9jaXR5LngsIHZlbG9jaXR5LnksIHZlbG9jaXR5LnopO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgVkVMT0NJVFkgb2YgdGhlIHtAbGluayBOb2RlfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0VmVsb2NpdHkoX3ZhbHVlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIGxldCB2ZWxvY2l0eTogT0lNTy5WZWMzID0gbmV3IE9JTU8uVmVjMyhfdmFsdWUueCwgX3ZhbHVlLnksIF92YWx1ZS56KTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldExpbmVhclZlbG9jaXR5KHZlbG9jaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY3VycmVudCBBTkdVTEFSIC0gVkVMT0NJVFkgb2YgdGhlIHtAbGluayBOb2RlfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0QW5ndWxhclZlbG9jaXR5KCk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgdmVsb2NpdHk6IE9JTU8uVmVjMyA9IHRoaXMuI3JpZ2lkYm9keS5nZXRBbmd1bGFyVmVsb2NpdHkoKTtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHZlbG9jaXR5LngsIHZlbG9jaXR5LnksIHZlbG9jaXR5LnopO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGN1cnJlbnQgQU5HVUxBUiAtIFZFTE9DSVRZIG9mIHRoZSB7QGxpbmsgTm9kZX1cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEFuZ3VsYXJWZWxvY2l0eShfdmFsdWU6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgbGV0IHZlbG9jaXR5OiBPSU1PLlZlYzMgPSBuZXcgT0lNTy5WZWMzKF92YWx1ZS54LCBfdmFsdWUueSwgX3ZhbHVlLnopO1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuc2V0QW5ndWxhclZlbG9jaXR5KHZlbG9jaXR5KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEFwcGxpZXMgYSBjb250aW5vdXMgRk9SQ0UgYXQgdGhlIGNlbnRlciBvZiB0aGUgUklHSURCT0RZIGluIHRoZSB0aHJlZSBkaW1lbnNpb25zLiBDb25zaWRlcmluZyB0aGUgcmlnaWRib2R5J3MgTUFTUy5cclxuICAgICogVGhlIGZvcmNlIGlzIG1lYXN1cmVkIGluIG5ld3RvbiwgMWtnIG5lZWRzIGFib3V0IDEwIE5ld3RvbiB0byBmaWdodCBhZ2FpbnN0IGdyYXZpdHkuXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGFwcGx5Rm9yY2UoX2ZvcmNlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5hcHBseUZvcmNlVG9DZW50ZXIobmV3IE9JTU8uVmVjMyhfZm9yY2UueCwgX2ZvcmNlLnksIF9mb3JjZS56KSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEFwcGxpZXMgYSBjb250aW5vdXMgRk9SQ0UgYXQgYSBzcGVjaWZpYyBwb2ludCBpbiB0aGUgd29ybGQgdG8gdGhlIFJJR0lEQk9EWSBpbiB0aGUgdGhyZWUgZGltZW5zaW9ucy4gQ29uc2lkZXJpbmcgdGhlIHJpZ2lkYm9keSdzIE1BU1NcclxuICAgICovXHJcbiAgICBwdWJsaWMgYXBwbHlGb3JjZUF0UG9pbnQoX2ZvcmNlOiBWZWN0b3IzLCBfd29ybGRQb2ludDogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuYXBwbHlGb3JjZShuZXcgT0lNTy5WZWMzKF9mb3JjZS54LCBfZm9yY2UueSwgX2ZvcmNlLnopLCBuZXcgT0lNTy5WZWMzKF93b3JsZFBvaW50LngsIF93b3JsZFBvaW50LnksIF93b3JsZFBvaW50LnopKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQXBwbGllcyBhIGNvbnRpbm91cyBST1RBVElPTkFMIEZPUkNFIChUb3JxdWUpIHRvIHRoZSBSSUdJREJPRFkgaW4gdGhlIHRocmVlIGRpbWVuc2lvbnMuIENvbnNpZGVyaW5nIHRoZSByaWdpZGJvZHkncyBNQVNTXHJcbiAgICAqL1xyXG4gICAgcHVibGljIGFwcGx5VG9ycXVlKF9yb3RhdGlvbmFsRm9yY2U6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmFwcGx5VG9ycXVlKG5ldyBPSU1PLlZlYzMoX3JvdGF0aW9uYWxGb3JjZS54LCBfcm90YXRpb25hbEZvcmNlLnksIF9yb3RhdGlvbmFsRm9yY2UueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBcHBsaWVzIGEgaW5zdGFudCBGT1JDRSBhdCBhIHBvaW50L3JpZ2lkYm9keWNlbnRlciB0byB0aGUgUklHSURCT0RZIGluIHRoZSB0aHJlZSBkaW1lbnNpb25zLiBDb25zaWRlcmluZyB0aGUgcmlnaWRib2QncyBNQVNTXHJcbiAgICAqIEluZmx1ZW5jaW5nIHRoZSBhbmd1bGFyIHNwZWVkIGFuZCB0aGUgbGluZWFyIHNwZWVkLiBcclxuICAgICovXHJcbiAgICBwdWJsaWMgYXBwbHlJbXB1bHNlQXRQb2ludChfaW1wdWxzZTogVmVjdG9yMywgX3dvcmxkUG9pbnQ6IFZlY3RvcjMgPSBudWxsKTogdm9pZCB7XHJcbiAgICAgIF93b3JsZFBvaW50ID0gX3dvcmxkUG9pbnQgIT0gbnVsbCA/IF93b3JsZFBvaW50IDogdGhpcy5nZXRQb3NpdGlvbigpO1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuYXBwbHlJbXB1bHNlKG5ldyBPSU1PLlZlYzMoX2ltcHVsc2UueCwgX2ltcHVsc2UueSwgX2ltcHVsc2UueiksIG5ldyBPSU1PLlZlYzMoX3dvcmxkUG9pbnQueCwgX3dvcmxkUG9pbnQueSwgX3dvcmxkUG9pbnQueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBcHBsaWVzIGEgaW5zdGFudCBGT1JDRSB0byB0aGUgUklHSURCT0RZIGluIHRoZSB0aHJlZSBkaW1lbnNpb25zLiBDb25zaWRlcmluZyB0aGUgcmlnaWRib2R5J3MgTUFTU1xyXG4gICAgKiBPbmx5IGluZmx1ZW5jaW5nIGl0J3Mgc3BlZWQgbm90IHJvdGF0aW9uLlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBhcHBseUxpbmVhckltcHVsc2UoX2ltcHVsc2U6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmFwcGx5TGluZWFySW1wdWxzZShuZXcgT0lNTy5WZWMzKF9pbXB1bHNlLngsIF9pbXB1bHNlLnksIF9pbXB1bHNlLnopKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgKiBBcHBsaWVzIGEgaW5zdGFudCBST1RBVElPTkFMLUZPUkNFIHRvIHRoZSBSSUdJREJPRFkgaW4gdGhlIHRocmVlIGRpbWVuc2lvbnMuIENvbnNpZGVyaW5nIHRoZSByaWdpZGJvZHkncyBNQVNTXHJcbiAgICogT25seSBpbmZsdWVuY2luZyBpdCdzIHJvdGF0aW9uLlxyXG4gICAqL1xyXG4gICAgcHVibGljIGFwcGx5QW5ndWxhckltcHVsc2UoX3JvdGF0aW9uYWxJbXB1bHNlOiBWZWN0b3IzKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3JpZ2lkYm9keS5hcHBseUFuZ3VsYXJJbXB1bHNlKG5ldyBPSU1PLlZlYzMoX3JvdGF0aW9uYWxJbXB1bHNlLngsIF9yb3RhdGlvbmFsSW1wdWxzZS55LCBfcm90YXRpb25hbEltcHVsc2UueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAqIENoYW5naW5nIHRoZSBWRUxPQ0lUWSBvZiB0aGUgUklHSURCT0RZLiBPbmx5IGluZmx1ZW5jaW5nIHRoZSBsaW5lYXIgc3BlZWQgbm90IGFuZ3VsYXJcclxuICAgKi9cclxuICAgIHB1YmxpYyBhZGRWZWxvY2l0eShfdmFsdWU6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmFkZExpbmVhclZlbG9jaXR5KG5ldyBPSU1PLlZlYzMoX3ZhbHVlLngsIF92YWx1ZS55LCBfdmFsdWUueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAqIENoYW5naW5nIHRoZSBWRUxPQ0lUWSBvZiB0aGUgUklHSURCT0RZLiBPbmx5IGluZmx1ZW5jaW5nIHRoZSBhbmd1bGFyIHNwZWVkIG5vdCB0aGUgbGluZWFyXHJcbiAgICovXHJcbiAgICBwdWJsaWMgYWRkQW5ndWxhclZlbG9jaXR5KF92YWx1ZTogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuYWRkQW5ndWxhclZlbG9jaXR5KG5ldyBPSU1PLlZlYzMoX3ZhbHVlLngsIF92YWx1ZS55LCBfdmFsdWUueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBTdG9wcyB0aGUgcmlnaWRib2R5IGZyb20gc2xlZXBpbmcgd2hlbiBtb3ZlbWVudCBpcyB0b28gbWluaW1hbC4gRGVjcmVhc2luZyBwZXJmb3JtYW5jZSwgZm9yIHJhcmVseSBtb3JlIHByZWNpc2UgcGh5c2ljcyByZXN1bHRzICovXHJcbiAgICBwdWJsaWMgZGVhY3RpdmF0ZUF1dG9TbGVlcCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldEF1dG9TbGVlcChmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFjdGl2YXRlQXV0b1NsZWVwKCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuc2V0QXV0b1NsZWVwKHRydWUpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIENvbGxpc2lvblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja2luZyBmb3IgQ29sbGlzaW9uIHdpdGggb3RoZXIgQ29sbGlkZXJzIGFuZCBkaXNwYXRjaGVzIGEgY3VzdG9tIGV2ZW50IHdpdGggaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbGxpZGVyLlxyXG4gICAgICogQXV0b21hdGljYWxseSBjYWxsZWQgaW4gdGhlIFJlbmRlck1hbmFnZXIsIG5vIGludGVyYWN0aW9uIG5lZWRlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGNoZWNrQ29sbGlzaW9uRXZlbnRzKCk6IHZvaWQge1xyXG4gICAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCkgLy8gY2hlY2sgY29sbGlzaW9ucyBvbmx5IGlmIGludGlhbGl6YXRpb24gY29tcGxldGVkXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICBsZXQgbGlzdDogT0lNTy5Db250YWN0TGluayA9IHRoaXMuI3JpZ2lkYm9keS5nZXRDb250YWN0TGlua0xpc3QoKTsgLy9hbGwgcGh5c2ljYWwgY29udGFjdHMgYmV0d2VlbiBjb2xsaWRpbmcgYm9kaWVzIG9uIHRoaXMgcmJcclxuICAgICAgbGV0IG9iakhpdDogQ29tcG9uZW50UmlnaWRib2R5OyAvL2NvbGxpc2lvbiBjb25zaXN0aW5nIG9mIDIgYm9kaWVzLCBzbyBIaXQxLzJcclxuICAgICAgbGV0IG9iakhpdDI6IENvbXBvbmVudFJpZ2lkYm9keTtcclxuICAgICAgbGV0IGV2ZW50OiBFdmVudFBoeXNpY3M7ICAvL1RoZSBldmVudCB0aGF0IHdpbGwgYmUgc2VuZCBhbmQgdGhlIGluZm9ybWF0aW9ucyBhZGRlZCB0byBpdFxyXG4gICAgICBsZXQgbm9ybWFsSW1wdWxzZTogbnVtYmVyID0gMDtcclxuICAgICAgbGV0IGJpbm9ybWFsSW1wdWxzZTogbnVtYmVyID0gMDtcclxuICAgICAgbGV0IHRhbmdlbnRJbXB1bHNlOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgY29sUG9pbnQ6IFZlY3RvcjM7XHJcbiAgICAgIC8vQUREIE5FVyBDb2xsaXNpb24gLSBUaGF0IGp1c3QgaGFwcGVuZWRcclxuICAgICAgZm9yIChsZXQgaTogbnVtYmVyID0gMDsgaSA8IHRoaXMuI3JpZ2lkYm9keS5nZXROdW1Db250YWN0TGlua3MoKTsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGNvbGxpc2lvbk1hbmlmb2xkOiBPSU1PLk1hbmlmb2xkID0gbGlzdC5nZXRDb250YWN0KCkuZ2V0TWFuaWZvbGQoKTsgLy9NYW5pZm9sZCA9IEFkZGl0aW9uYWwgaW5mb3JtYXRpb25zIGFib3V0IHRoZSBjb250YWN0XHJcbiAgICAgICAgb2JqSGl0ID0gbGlzdC5nZXRDb250YWN0KCkuZ2V0U2hhcGUxKCkudXNlckRhdGE7ICAvL1VzZXJkYXRhIGlzIHVzZWQgdG8gdHJhbnNmZXIgdGhlIMaSLkNvbXBvbmVudFJpZ2lkYm9keSwgaXQncyBhbiBlbXB0eSBPaW1vUGh5c2ljcyBWYXJpYWJsZVxyXG4gICAgICAgIC8vT25seSByZWdpc3RlciB0aGUgY29sbGlzaW9uIG9uIHRoZSBhY3R1YWwgdG91Y2gsIG5vdCBvbiBcInNoYWRvd0NvbGxpZGVcIiwgdG8gcmVnaXN0ZXIgaW4gdGhlIG1vbWVudCBvZiBpbXB1bHNlIGNhbGN1bGF0aW9uXHJcbiAgICAgICAgaWYgKCFvYmpIaXQuaXNJbml0aWFsaXplZClcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGlmIChvYmpIaXQgPT0gbnVsbCB8fCBsaXN0LmdldENvbnRhY3QoKS5pc1RvdWNoaW5nKCkgPT0gZmFsc2UpIC8vIG9ubHkgYWN0IGlmIHRoZSBjb2xsaXNpb24gaXMgYWN0dWFsIHRvdWNoaW5nLCBzbyByaWdodCBhdCB0aGUgbW9tZW50IHdoZW4gYSBpbXB1bHNlIGlzIGhhcHBlbmluZywgbm90IHdoZW4gc2hhcGVzIG92ZXJsYXBcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBvYmpIaXQyID0gbGlzdC5nZXRDb250YWN0KCkuZ2V0U2hhcGUyKCkudXNlckRhdGE7XHJcbiAgICAgICAgaWYgKCFvYmpIaXQyLmlzSW5pdGlhbGl6ZWQpXHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICBpZiAob2JqSGl0MiA9PSBudWxsIHx8IGxpc3QuZ2V0Q29udGFjdCgpLmlzVG91Y2hpbmcoKSA9PSBmYWxzZSlcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBsZXQgcG9pbnRzOiBPSU1PLk1hbmlmb2xkUG9pbnRbXSA9IGNvbGxpc2lvbk1hbmlmb2xkLmdldFBvaW50cygpOyAvL0FsbCBwb2ludHMgaW4gdGhlIGNvbGxpc2lvbiB3aGVyZSB0aGUgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcsIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBmdWxsIGltcGFjdFxyXG4gICAgICAgIGxldCBub3JtYWw6IE9JTU8uVmVjMyA9IGNvbGxpc2lvbk1hbmlmb2xkLmdldE5vcm1hbCgpO1xyXG4gICAgICAgIGlmIChvYmpIaXQuZ2V0T2ltb1JpZ2lkYm9keSgpICE9IHRoaXMuZ2V0T2ltb1JpZ2lkYm9keSgpICYmIHRoaXMuY29sbGlzaW9ucy5pbmRleE9mKG9iakhpdCkgPT0gLTEpIHsgLy9GaXJlLCBpZiB0aGUgaGl0IG9iamVjdCBpcyBub3QgdGhlIEJvZHkgaXRzZWxmIGJ1dCBhbm90aGVyIGFuZCBpdCdzIG5vdCBhbHJlYWR5IGZpcmVkLlxyXG4gICAgICAgICAgbGV0IGNvbFBvczogT0lNTy5WZWMzID0gdGhpcy5jb2xsaXNpb25DZW50ZXJQb2ludChwb2ludHMsIGNvbGxpc2lvbk1hbmlmb2xkLmdldE51bVBvaW50cygpKTsgLy9USEUgcG9pbnQgb2YgY29sbGlzaW9uIGlzIHRoZSBmaXJzdCB0b3VjaGluZyBwb2ludCAoRVhURU5TSU9OOiBjb3VsZCBiZSB0aGUgY2VudGVyIG9mIGFsbCB0b3VjaGluZyBwb2ludHMgY29tYmluZWQpXHJcbiAgICAgICAgICBjb2xQb2ludCA9IG5ldyBWZWN0b3IzKGNvbFBvcy54LCBjb2xQb3MueSwgY29sUG9zLnopO1xyXG4gICAgICAgICAgcG9pbnRzLmZvckVhY2goKF92YWx1ZTogT0lNTy5NYW5pZm9sZFBvaW50KTogdm9pZCA9PiB7IC8vVGhlIGltcGFjdCBvZiB0aGUgY29sbGlzaW9uIGludm9sdmluZyBhbGwgdG91Y2hpbmcgcG9pbnRzXHJcbiAgICAgICAgICAgIG5vcm1hbEltcHVsc2UgKz0gX3ZhbHVlLmdldE5vcm1hbEltcHVsc2UoKTtcclxuICAgICAgICAgICAgYmlub3JtYWxJbXB1bHNlICs9IF92YWx1ZS5nZXRCaW5vcm1hbEltcHVsc2UoKTtcclxuICAgICAgICAgICAgdGFuZ2VudEltcHVsc2UgKz0gX3ZhbHVlLmdldFRhbmdlbnRJbXB1bHNlKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIHRoaXMuY29sbGlzaW9ucy5wdXNoKG9iakhpdCk7IC8vVGVsbCB0aGUgb2JqZWN0IHRoYXQgdGhlIGV2ZW50IGZvciB0aGlzIG9iamVjdCBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpcmVkIGFnYWluXHJcbiAgICAgICAgICBldmVudCA9IG5ldyBFdmVudFBoeXNpY3MoRVZFTlRfUEhZU0lDUy5DT0xMSVNJT05fRU5URVIsIG9iakhpdCwgbm9ybWFsSW1wdWxzZSwgdGFuZ2VudEltcHVsc2UsIGJpbm9ybWFsSW1wdWxzZSwgY29sUG9pbnQsIG5ldyBWZWN0b3IzKG5vcm1hbC54LCBub3JtYWwueSwgbm9ybWFsLnopKTsgLy9CdWlsZGluZyB0aGUgYWN0dWFsIGV2ZW50LCB3aXRoIHdoYXQgb2JqZWN0IGRpZCBjb2xsaWRlIGFuZCBpbmZvcm1hdGlvbnMgYWJvdXQgaXRcclxuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7IC8vU2VuZGluZyB0aGUgZ2l2ZW4gZXZlbnRcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9iakhpdDIgIT0gdGhpcyAmJiB0aGlzLmNvbGxpc2lvbnMuaW5kZXhPZihvYmpIaXQyKSA9PSAtMSkgeyAvL1NhbWUgYXMgdGhlIGFib3ZlIGJ1dCBmb3IgdGhlIGNhc2UgdGhlIFNFQ09ORCBoaXQgb2JqZWN0IGlzIG5vdCB0aGUgYm9keSBpdHNlbGZcclxuICAgICAgICAgIGxldCBjb2xQb3M6IE9JTU8uVmVjMyA9IHRoaXMuY29sbGlzaW9uQ2VudGVyUG9pbnQocG9pbnRzLCBjb2xsaXNpb25NYW5pZm9sZC5nZXROdW1Qb2ludHMoKSk7XHJcbiAgICAgICAgICBjb2xQb2ludCA9IG5ldyBWZWN0b3IzKGNvbFBvcy54LCBjb2xQb3MueSwgY29sUG9zLnopO1xyXG4gICAgICAgICAgcG9pbnRzLmZvckVhY2goKF92YWx1ZTogT0lNTy5NYW5pZm9sZFBvaW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIG5vcm1hbEltcHVsc2UgKz0gX3ZhbHVlLmdldE5vcm1hbEltcHVsc2UoKTtcclxuICAgICAgICAgICAgYmlub3JtYWxJbXB1bHNlICs9IF92YWx1ZS5nZXRCaW5vcm1hbEltcHVsc2UoKTtcclxuICAgICAgICAgICAgdGFuZ2VudEltcHVsc2UgKz0gX3ZhbHVlLmdldFRhbmdlbnRJbXB1bHNlKCk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICB0aGlzLmNvbGxpc2lvbnMucHVzaChvYmpIaXQyKTtcclxuICAgICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50UGh5c2ljcyhFVkVOVF9QSFlTSUNTLkNPTExJU0lPTl9FTlRFUiwgb2JqSGl0Miwgbm9ybWFsSW1wdWxzZSwgdGFuZ2VudEltcHVsc2UsIGJpbm9ybWFsSW1wdWxzZSwgY29sUG9pbnQsIG5ldyBWZWN0b3IzKG5vcm1hbC54LCBub3JtYWwueSwgbm9ybWFsLnopKTtcclxuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpc3QgPSBsaXN0LmdldE5leHQoKTsgLy9TdGFydCB0aGUgc2FtZSByb3V0aW5lIHdpdGggdGhlIG5leHQgY29sbGlzaW9uIGluIHRoZSBsaXN0XHJcbiAgICAgIH1cclxuICAgICAgLy9SRU1PVkUgT0xEIENvbGxpc2lvbnMgLSBUaGF0IGRvIG5vdCBoYXBwZW4gYW55bW9yZVxyXG4gICAgICB0aGlzLmNvbGxpc2lvbnMuZm9yRWFjaCgoX3ZhbHVlOiBDb21wb25lbnRSaWdpZGJvZHkpID0+IHsgLy9FdmVyeSBDb2xsaWRlciBpbiB0aGUgbGlzdCBpcyBjaGVja2VkIGlmIHRoZSBjb2xsaXNpb24gaXMgc3RpbGwgaGFwcGVuaW5nXHJcbiAgICAgICAgbGV0IGlzQ29sbGlkaW5nOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgbGlzdCA9IHRoaXMuI3JpZ2lkYm9keS5nZXRDb250YWN0TGlua0xpc3QoKTtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy4jcmlnaWRib2R5LmdldE51bUNvbnRhY3RMaW5rcygpOyBpKyspIHtcclxuICAgICAgICAgIG9iakhpdCA9IGxpc3QuZ2V0Q29udGFjdCgpLmdldFNoYXBlMSgpLnVzZXJEYXRhO1xyXG4gICAgICAgICAgb2JqSGl0MiA9IGxpc3QuZ2V0Q29udGFjdCgpLmdldFNoYXBlMigpLnVzZXJEYXRhO1xyXG4gICAgICAgICAgaWYgKF92YWx1ZSA9PSBvYmpIaXQgfHwgX3ZhbHVlID09IG9iakhpdDIpIHsgLy9JZiB0aGUgZ2l2ZW4gb2JqZWN0IGluIHRoZSBjb2xsaXNpb25zIGxpc3QgaXMgc3RpbGwgb25lIG9mIHRoZSBvYmpIaXQgdGhlIGNvbGxpc2lvbiBpcyBub3QgQ29sbGlzaW9uRVhJVFxyXG4gICAgICAgICAgICBpc0NvbGxpZGluZyA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBsaXN0ID0gbGlzdC5nZXROZXh0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc0NvbGxpZGluZyA9PSBmYWxzZSkgeyAvL1RoZSBjb2xsaXNpb24gaXMgZXhpdGluZyBidXQgd2FzIGluIHRoZSBjb2xsaXNpb24gbGlzdCwgdGhlbiBFWElUIEV2ZW50IG5lZWRzIHRvIGJlIGZpcmVkXHJcbiAgICAgICAgICBsZXQgaW5kZXg6IG51bWJlciA9IHRoaXMuY29sbGlzaW9ucy5pbmRleE9mKF92YWx1ZSk7IC8vRmluZCBvYmplY3QgaW4gdGhlIGFycmF5XHJcbiAgICAgICAgICB0aGlzLmNvbGxpc2lvbnMuc3BsaWNlKGluZGV4KTsgLy9yZW1vdmUgaXQgZnJvbSB0aGUgYXJyYXlcclxuICAgICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50UGh5c2ljcyhFVkVOVF9QSFlTSUNTLkNPTExJU0lPTl9FWElULCBfdmFsdWUsIDAsIDAsIDApO1xyXG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VuZHMgYSByYXkgdGhyb3VnaCB0aGlzIHNwZWNpZmljIGJvZHkgaWdub3JpbmcgdGhlIHJlc3Qgb2YgdGhlIHdvcmxkIGFuZCBjaGVja3MgaWYgdGhpcyBib2R5IHdhcyBoaXQgYnkgdGhlIHJheSxcclxuICAgICAqIHJldHVybmluZyBpbmZvIGFib3V0IHRoZSBoaXQuIFByb3ZpZGVzIHRoZSBzYW1lIGZ1bmN0aW9uYWxpdHkgYW5kIGluZm9ybWF0aW9uIGEgcmVndWxhciByYXljYXN0IGRvZXMgYnV0IHRoZSByYXkgaXMgb25seSB0ZXN0aW5nIGFnYWluc3QgdGhpcyBzcGVjaWZpYyBib2R5LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmF5Y2FzdFRoaXNCb2R5KF9vcmlnaW46IFZlY3RvcjMsIF9kaXJlY3Rpb246IFZlY3RvcjMsIF9sZW5ndGg6IG51bWJlciwgX2RlYnVnRHJhdzogYm9vbGVhbiA9IGZhbHNlKTogUmF5SGl0SW5mbyB7XHJcbiAgICAgIGxldCBoaXRJbmZvOiBSYXlIaXRJbmZvID0gbmV3IFJheUhpdEluZm8oKTtcclxuICAgICAgbGV0IGdlb21ldHJ5OiBPSU1PLkdlb21ldHJ5ID0gdGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpLmdldEdlb21ldHJ5KCk7XHJcbiAgICAgIGxldCB0cmFuc2Zvcm06IE9JTU8uVHJhbnNmb3JtID0gdGhpcy4jcmlnaWRib2R5LmdldFRyYW5zZm9ybSgpO1xyXG4gICAgICBsZXQgc2NhbGVkRGlyZWN0aW9uOiBWZWN0b3IzID0gX2RpcmVjdGlvbi5jbG9uZTtcclxuICAgICAgc2NhbGVkRGlyZWN0aW9uLnNjYWxlKF9sZW5ndGgpO1xyXG4gICAgICBsZXQgZW5kcG9pbnQ6IFZlY3RvcjMgPSBWZWN0b3IzLlNVTShzY2FsZWREaXJlY3Rpb24sIF9vcmlnaW4uY2xvbmUpO1xyXG4gICAgICBsZXQgb2ltb1JheTogT0lNTy5SYXlDYXN0SGl0ID0gbmV3IE9JTU8uUmF5Q2FzdEhpdCgpO1xyXG4gICAgICBsZXQgaGl0OiBib29sZWFuID0gZ2VvbWV0cnkucmF5Q2FzdChuZXcgT0lNTy5WZWMzKF9vcmlnaW4ueCwgX29yaWdpbi55LCBfb3JpZ2luLnopLCBuZXcgT0lNTy5WZWMzKGVuZHBvaW50LngsIGVuZHBvaW50LnksIGVuZHBvaW50LnopLCB0cmFuc2Zvcm0sIG9pbW9SYXkpOyAvL3RoZSBhY3R1YWwgT2ltb1BoeXNpY3MgUmF5Y2FzdFxyXG4gICAgICBpZiAoaGl0KSB7ICAvL0lmIGhpdCByZXR1cm4gYSBidW5jaCBvZiBpbmZvcm1hdGlvbnMgYWJvdXQgdGhlIGhpdFxyXG4gICAgICAgIGhpdEluZm8uaGl0ID0gdHJ1ZTtcclxuICAgICAgICBoaXRJbmZvLmhpdFBvaW50ID0gbmV3IFZlY3RvcjMob2ltb1JheS5wb3NpdGlvbi54LCBvaW1vUmF5LnBvc2l0aW9uLnksIG9pbW9SYXkucG9zaXRpb24ueik7XHJcbiAgICAgICAgaGl0SW5mby5oaXROb3JtYWwgPSBuZXcgVmVjdG9yMyhvaW1vUmF5Lm5vcm1hbC54LCBvaW1vUmF5Lm5vcm1hbC55LCBvaW1vUmF5Lm5vcm1hbC56KTtcclxuICAgICAgICBsZXQgZHg6IG51bWJlciA9IF9vcmlnaW4ueCAtIGhpdEluZm8uaGl0UG9pbnQueDsgIC8vY2FsY3VsYXRlIGhpdCBkaXN0YW5jZVxyXG4gICAgICAgIGxldCBkeTogbnVtYmVyID0gX29yaWdpbi55IC0gaGl0SW5mby5oaXRQb2ludC55O1xyXG4gICAgICAgIGxldCBkejogbnVtYmVyID0gX29yaWdpbi56IC0gaGl0SW5mby5oaXRQb2ludC56O1xyXG4gICAgICAgIGhpdEluZm8uaGl0RGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6KTtcclxuICAgICAgICBoaXRJbmZvLnJpZ2lkYm9keUNvbXBvbmVudCA9IHRoaXM7XHJcbiAgICAgICAgaGl0SW5mby5yYXlPcmlnaW4gPSBfb3JpZ2luO1xyXG4gICAgICAgIGhpdEluZm8ucmF5RW5kID0gZW5kcG9pbnQ7XHJcbiAgICAgIH0gZWxzZSB7IC8vT25seSB0ZWxsIHRoZSBvcmlnaW4sIGFuZCB0aGUgaGl0IHBvaW50IGlzIHRoZSBlbmQgb2YgdGhlIHJheS5cclxuICAgICAgICBoaXRJbmZvLnJheU9yaWdpbiA9IF9vcmlnaW47XHJcbiAgICAgICAgaGl0SW5mby5oaXRQb2ludCA9IG5ldyBWZWN0b3IzKGVuZHBvaW50LngsIGVuZHBvaW50LnksIGVuZHBvaW50LnopO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChfZGVidWdEcmF3KSB7XHJcbiAgICAgICAgUGh5c2ljcy5kZWJ1Z0RyYXcuZGVidWdSYXkoaGl0SW5mby5yYXlPcmlnaW4sIGhpdEluZm8uaGl0UG9pbnQsIG5ldyBDb2xvcigwLCAxLCAwLCAxKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGhpdEluZm87XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcblxyXG4gICAgLy8jcmVnaW9uIFNhdmluZy9Mb2FkaW5nIC0gU29tZSBwcm9wZXJ0aWVzIG1pZ2h0IGJlIG1pc3NpbmcsIGUuZy4gY29udmV4TWVzaCAoRmxvYXQzMkFycmF5KVxyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLmdldE11dGF0b3IoKTtcclxuXHJcbiAgICAgIGRlbGV0ZSBzZXJpYWxpemF0aW9uLm10eFBpdm90O1xyXG4gICAgICBkZWxldGUgc2VyaWFsaXphdGlvbi5hY3RpdmU7XHJcblxyXG4gICAgICBzZXJpYWxpemF0aW9uLnR5cGVCb2R5ID0gQk9EWV9UWVBFW3RoaXMuI3R5cGVCb2R5XTtcclxuICAgICAgc2VyaWFsaXphdGlvbi50eXBlQ29sbGlkZXIgPSBDT0xMSURFUl9UWVBFW3RoaXMuI3R5cGVDb2xsaWRlcl07XHJcbiAgICAgIHNlcmlhbGl6YXRpb24uaW5pdGlhbGl6YXRpb24gPSBCT0RZX0lOSVRbdGhpcy5pbml0aWFsaXphdGlvbl07XHJcblxyXG4gICAgICBzZXJpYWxpemF0aW9uLmlkID0gdGhpcy4jaWQ7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ucGl2b3QgPSB0aGlzLm10eFBpdm90LnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHJldHVybiBzZXJpYWxpemF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgdGhpcy5tdHhQaXZvdC5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbi5waXZvdCk7XHJcbiAgICAgIHRoaXMuI2lkID0gX3NlcmlhbGl6YXRpb24uaWQ7XHJcbiAgICAgIHRoaXMubWFzcyA9IGlmTnVtYmVyKF9zZXJpYWxpemF0aW9uLm1hc3MsIHRoaXMubWFzcyk7XHJcbiAgICAgIHRoaXMuZGFtcFRyYW5zbGF0aW9uID0gaWZOdW1iZXIoX3NlcmlhbGl6YXRpb24uZGFtcFRyYW5zbGF0aW9uLCB0aGlzLmRhbXBUcmFuc2xhdGlvbik7XHJcbiAgICAgIHRoaXMuZGFtcFJvdGF0aW9uID0gaWZOdW1iZXIoX3NlcmlhbGl6YXRpb24uZGFtcFJvdGF0aW9uLCB0aGlzLmRhbXBSb3RhdGlvbik7XHJcbiAgICAgIHRoaXMuY29sbGlzaW9uR3JvdXAgPSBpZk51bWJlcihfc2VyaWFsaXphdGlvbi5jb2xsaXNpb25Hcm91cCwgdGhpcy5jb2xsaXNpb25Hcm91cCk7XHJcbiAgICAgIHRoaXMuZWZmZWN0Um90YXRpb24gPSBfc2VyaWFsaXphdGlvbi5lZmZlY3RSb3RhdGlvbiB8fCB0aGlzLmVmZmVjdFJvdGF0aW9uO1xyXG4gICAgICB0aGlzLmVmZmVjdEdyYXZpdHkgPSBpZk51bWJlcihfc2VyaWFsaXphdGlvbi5lZmZlY3RHcmF2aXR5LCB0aGlzLmVmZmVjdEdyYXZpdHkpO1xyXG4gICAgICB0aGlzLmZyaWN0aW9uID0gaWZOdW1iZXIoX3NlcmlhbGl6YXRpb24uZnJpY3Rpb24sIHRoaXMuZnJpY3Rpb24pO1xyXG4gICAgICB0aGlzLnJlc3RpdHV0aW9uID0gaWZOdW1iZXIoX3NlcmlhbGl6YXRpb24ucmVzdGl0dXRpb24sIHRoaXMucmVzdGl0dXRpb24pO1xyXG4gICAgICB0aGlzLmlzVHJpZ2dlciA9IF9zZXJpYWxpemF0aW9uLmlzVHJpZ2dlciB8fCB0aGlzLmlzVHJpZ2dlcjtcclxuICAgICAgdGhpcy5pbml0aWFsaXphdGlvbiA9IF9zZXJpYWxpemF0aW9uLmluaXRpYWxpemF0aW9uO1xyXG5cclxuICAgICAgdGhpcy5pbml0aWFsaXphdGlvbiA9IDxudW1iZXI+PHVua25vd24+Qk9EWV9JTklUW19zZXJpYWxpemF0aW9uLmluaXRpYWxpemF0aW9uXTtcclxuICAgICAgdGhpcy50eXBlQm9keSA9IDxudW1iZXI+PHVua25vd24+Qk9EWV9UWVBFW19zZXJpYWxpemF0aW9uLnR5cGVCb2R5XTtcclxuICAgICAgdGhpcy50eXBlQ29sbGlkZXIgPSA8bnVtYmVyPjx1bmtub3duPkNPTExJREVSX1RZUEVbX3NlcmlhbGl6YXRpb24udHlwZUNvbGxpZGVyXTtcclxuICAgICAgLy8gdGhpcy5jcmVhdGUodGhpcy5tYXNzLCB0aGlzLiN0eXBlQm9keSwgdGhpcy4jdHlwZUNvbGxpZGVyLCB0aGlzLmNvbGxpc2lvbkdyb3VwLCBudWxsLCB0aGlzLmNvbnZleE1lc2gpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKiogQ2hhbmdlIHByb3BlcnRpZXMgYnkgYW4gYXNzb2NpYXRpdmUgYXJyYXkgKi9cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgaWYgKF9tdXRhdG9yLnR5cGVCb2R5ICE9IHVuZGVmaW5lZClcclxuICAgICAgICBfbXV0YXRvci50eXBlQm9keSA9IHBhcnNlSW50KF9tdXRhdG9yLnR5cGVCb2R5KTtcclxuICAgICAgaWYgKF9tdXRhdG9yLnR5cGVDb2xsaWRlciAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgX211dGF0b3IudHlwZUNvbGxpZGVyID0gcGFyc2VJbnQoX211dGF0b3IudHlwZUNvbGxpZGVyKTtcclxuICAgICAgaWYgKF9tdXRhdG9yLmluaXRpYWxpemF0aW9uICE9IHVuZGVmaW5lZClcclxuICAgICAgICBfbXV0YXRvci5pbml0aWFsaXphdGlvbiA9IHBhcnNlSW50KF9tdXRhdG9yLmluaXRpYWxpemF0aW9uKTtcclxuICAgICAgYXdhaXQgc3VwZXIubXV0YXRlKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKF9tdXRhdG9yLmluaXRpYWxpemF0aW9uICE9IHVuZGVmaW5lZCAmJiB0aGlzLmlzQWN0aXZlKVxyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAvLyBUT0RPOiBzZWUgaWYgdGhpcyBhbHRlcm5hdGl2ZSBzaG91bGQgYmUsIGF0IGxlYXN0IHBhcnRpYWxseSwgZG9uZSB3aXRoIG11dGF0ZVNlbGVjdGlvblxyXG4gICAgICAvLyBsZXQgY2FsbElmRXhpc3Q6IEZ1bmN0aW9uID0gKF9rZXk6IHN0cmluZywgX3NldHRlcjogRnVuY3Rpb24pID0+IHtcclxuICAgICAgLy8gICBpZiAoX211dGF0b3JbX2tleV0pXHJcbiAgICAgIC8vICAgICBfc2V0dGVyKF9tdXRhdG9yW19rZXldKTtcclxuICAgICAgLy8gfTtcclxuXHJcbiAgICAgIC8vIGNhbGxJZkV4aXN0KFwiZnJpY3Rpb25cIiwgKF92YWx1ZTogbnVtYmVyKSA9PiB0aGlzLmZyaWN0aW9uID0gX3ZhbHVlKTtcclxuICAgICAgLy8gY2FsbElmRXhpc3QoXCJyZXN0aXR1dGlvblwiLCAoX3ZhbHVlOiBudW1iZXIpID0+IHRoaXMucmVzdGl0dXRpb24gPSBfdmFsdWUpO1xyXG4gICAgICAvLyBjYWxsSWZFeGlzdChcIm1hc3NcIiwgKF92YWx1ZTogbnVtYmVyKSA9PiB0aGlzLm1hc3MgPSBfdmFsdWUpO1xyXG4gICAgICAvLyBjYWxsSWZFeGlzdChcImRhbXBUcmFuc2xhdGlvblwiLCAoX3ZhbHVlOiBudW1iZXIpID0+IHRoaXMuZGFtcFRyYW5zbGF0aW9uID0gX3ZhbHVlKTtcclxuICAgICAgLy8gY2FsbElmRXhpc3QoXCJkYW1wUm90YXRpb25cIiwgKF92YWx1ZTogbnVtYmVyKSA9PiB0aGlzLmRhbXBSb3RhdGlvbiA9IF92YWx1ZSk7XHJcbiAgICAgIC8vIGNhbGxJZkV4aXN0KFwiZWZmZWN0R3Jhdml0eVwiLCAoX3ZhbHVlOiBudW1iZXIpID0+IHRoaXMuZWZmZWN0R3Jhdml0eSA9IF92YWx1ZSk7XHJcbiAgICAgIC8vIGNhbGxJZkV4aXN0KFwiY29sbGlzaW9uR3JvdXBcIiwgKF92YWx1ZTogQ09MTElTSU9OX0dST1VQKSA9PiB0aGlzLmNvbGxpc2lvbkdyb3VwID0gX3ZhbHVlKTtcclxuICAgICAgLy8gY2FsbElmRXhpc3QoXCJ0eXBlQm9keVwiLCAoX3ZhbHVlOiBzdHJpbmcpID0+IHRoaXMudHlwZUJvZHkgPSBwYXJzZUludChfdmFsdWUpKTtcclxuICAgICAgLy8gY2FsbElmRXhpc3QoXCJ0eXBlQ29sbGlkZXJcIiwgKF92YWx1ZTogc3RyaW5nKSA9PiB0aGlzLnR5cGVDb2xsaWRlciA9IHBhcnNlSW50KF92YWx1ZSkpO1xyXG5cclxuICAgICAgLy8gdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5NVVRBVEUpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKHRydWUpO1xyXG5cclxuICAgICAgbXV0YXRvci5mcmljdGlvbiA9IHRoaXMuZnJpY3Rpb247XHJcbiAgICAgIG11dGF0b3IucmVzdGl0dXRpb24gPSB0aGlzLnJlc3RpdHV0aW9uO1xyXG4gICAgICBtdXRhdG9yLm1hc3MgPSB0aGlzLm1hc3M7XHJcbiAgICAgIG11dGF0b3IuZGFtcFRyYW5zbGF0aW9uID0gdGhpcy5kYW1wVHJhbnNsYXRpb247XHJcbiAgICAgIG11dGF0b3IuZGFtcFJvdGF0aW9uID0gdGhpcy5kYW1wUm90YXRpb247XHJcbiAgICAgIG11dGF0b3IuZWZmZWN0R3Jhdml0eSA9IHRoaXMuZWZmZWN0R3Jhdml0eTtcclxuICAgICAgbXV0YXRvci50eXBlQm9keSA9IHRoaXMuI3R5cGVCb2R5O1xyXG4gICAgICBtdXRhdG9yLnR5cGVDb2xsaWRlciA9IHRoaXMuI3R5cGVDb2xsaWRlcjtcclxuICAgICAgbXV0YXRvci5pc1RyaWdnZXIgPSB0aGlzLiNpc1RyaWdnZXI7XHJcblxyXG4gICAgICAvLyBPYmplY3QucHJldmVudEV4dGVuc2lvbnMobXV0YXRvcik7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yQXR0cmlidXRlVHlwZXMoX211dGF0b3I6IE11dGF0b3IpOiBNdXRhdG9yQXR0cmlidXRlVHlwZXMge1xyXG4gICAgICBsZXQgdHlwZXM6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyA9IHN1cGVyLmdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcik7XHJcbiAgICAgIGlmICh0eXBlcy50eXBlQm9keSlcclxuICAgICAgICB0eXBlcy50eXBlQm9keSA9IEJPRFlfVFlQRTtcclxuICAgICAgaWYgKHR5cGVzLnR5cGVDb2xsaWRlcilcclxuICAgICAgICB0eXBlcy50eXBlQ29sbGlkZXIgPSBDT0xMSURFUl9UWVBFO1xyXG4gICAgICBpZiAodHlwZXMuaW5pdGlhbGl6YXRpb24pXHJcbiAgICAgICAgdHlwZXMuaW5pdGlhbGl6YXRpb24gPSBCT0RZX0lOSVQ7XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBzdXBlci5yZWR1Y2VNdXRhdG9yKF9tdXRhdG9yKTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLmNvbnZleE1lc2g7IC8vQ29udmV4IE1lc2ggY2FuJ3QgYmUgc2hvd24gaW4gdGhlIGVkaXRvciBiZWNhdXNlIGZsb2F0MzJBcnJheSBpcyBub3QgYSB2aWFibGUgbXV0YXRvclxyXG4gICAgICBkZWxldGUgX211dGF0b3IuY29sbGlzaW9uTWFzaztcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLmlzSW5pdGlhbGl6ZWQ7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gQ3JlYXRpb25cclxuICAgIHByaXZhdGUgY3JlYXRlKF9tYXNzOiBudW1iZXIgPSAxLCBfdHlwZTogQk9EWV9UWVBFID0gQk9EWV9UWVBFLkRZTkFNSUMsIF9jb2xsaWRlclR5cGU6IENPTExJREVSX1RZUEUgPSBDT0xMSURFUl9UWVBFLkNVQkUsIF9ncm91cDogQ09MTElTSU9OX0dST1VQID0gUGh5c2ljcy5zZXR0aW5ncy5kZWZhdWx0Q29sbGlzaW9uR3JvdXAsIF9tdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCA9IG51bGwsIF9jb252ZXhNZXNoOiBGbG9hdDMyQXJyYXkgPSBudWxsKTogdm9pZCB7XHJcbiAgICAgIC8vU2V0dGluZyB1cCBhbGwgaW5jb21pbmcgdmFsdWVzIHRvIGJlIGludGVybmFsIHZhbHVlc1xyXG4gICAgICB0aGlzLmNvbnZleE1lc2ggPSBfY29udmV4TWVzaDtcclxuICAgICAgdGhpcy4jdHlwZUJvZHkgPSBfdHlwZTtcclxuICAgICAgdGhpcy4jY29sbGlzaW9uR3JvdXAgPSBfZ3JvdXA7XHJcbiAgICAgIHRoaXMuI3R5cGVDb2xsaWRlciA9IF9jb2xsaWRlclR5cGU7XHJcbiAgICAgIHRoaXMubWFzcyA9IF9tYXNzO1xyXG4gICAgICB0aGlzLiNyZXN0aXR1dGlvbiA9IFBoeXNpY3Muc2V0dGluZ3MuZGVmYXVsdFJlc3RpdHV0aW9uO1xyXG4gICAgICB0aGlzLiNmcmljdGlvbiA9IFBoeXNpY3Muc2V0dGluZ3MuZGVmYXVsdEZyaWN0aW9uO1xyXG4gICAgICB0aGlzLmNvbGxpc2lvbk1hc2sgPSBQaHlzaWNzLnNldHRpbmdzLmRlZmF1bHRDb2xsaXNpb25NYXNrO1xyXG4gICAgICAvL0NyZWF0ZSB0aGUgYWN0dWFsIHJpZ2lkYm9keSBpbiB0aGUgT2ltb1BoeXNpY3MgU3BhY2VcclxuICAgICAgdGhpcy5jcmVhdGVSaWdpZGJvZHkoX21hc3MsIF90eXBlLCB0aGlzLiN0eXBlQ29sbGlkZXIsIF9tdHhUcmFuc2Zvcm0sIHRoaXMuI2NvbGxpc2lvbkdyb3VwKTtcclxuICAgICAgdGhpcy4jaWQgPSBQaHlzaWNzLmRpc3RyaWJ1dGVCb2R5SUQoKTtcclxuXHJcbiAgICAgIC8vIEV2ZW50IENhbGxiYWNrcyBkaXJlY3RseSBmcm9tIE9JTU8gUGh5c2ljc1xyXG4gICAgICB0aGlzLiNjYWxsYmFja3MgPSBuZXcgT0lNTy5Db250YWN0Q2FsbGJhY2soKTsgLy9mZWhtXHJcbiAgICAgIHRoaXMuI2NhbGxiYWNrcy5iZWdpblRyaWdnZXJDb250YWN0ID0gdGhpcy50cmlnZ2VyRW50ZXI7XHJcbiAgICAgIHRoaXMuI2NhbGxiYWNrcy5lbmRUcmlnZ2VyQ29udGFjdCA9IHRoaXMudHJpZ2dlckV4aXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIENyZWF0ZXMgdGhlIGFjdHVhbCBPaW1vUGh5c2ljcyBSaWdpZGJvZHkgb3V0IG9mIGluZm9ybWF0aW9ucyB0aGUgRlVER0UgQ29tcG9uZW50IGhhcy4gKi9cclxuICAgIHByaXZhdGUgY3JlYXRlUmlnaWRib2R5KF9tYXNzOiBudW1iZXIsIF90eXBlOiBCT0RZX1RZUEUsIF9jb2xsaWRlclR5cGU6IENPTExJREVSX1RZUEUsIF9tdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCwgX2NvbGxpc2lvbkdyb3VwOiBDT0xMSVNJT05fR1JPVVAgPSBDT0xMSVNJT05fR1JPVVAuREVGQVVMVCk6IHZvaWQge1xyXG4gICAgICBsZXQgb2ltb1R5cGU6IG51bWJlcjsgLy9OZWVkIHRoZSBjb252ZXJzaW9uIGZyb20gc2ltcGxlIGVudW0gdG8gbnVtYmVyIGJlY2F1c2UgaWYgZW51bSBpcyBkZWZpbmVkIGFzIE9pbW8uUmlnaWR5Qm9keVR5cGUgeW91IGhhdmUgdG8gaW5jbHVkZSBPaW1vIHRvIHVzZSBGVURHRSBhdCBhbGxcclxuICAgICAgc3dpdGNoIChfdHlwZSkge1xyXG4gICAgICAgIGNhc2UgQk9EWV9UWVBFLkRZTkFNSUM6XHJcbiAgICAgICAgICBvaW1vVHlwZSA9IE9JTU8uUmlnaWRCb2R5VHlwZS5EWU5BTUlDO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCT0RZX1RZUEUuU1RBVElDOlxyXG4gICAgICAgICAgb2ltb1R5cGUgPSBPSU1PLlJpZ2lkQm9keVR5cGUuU1RBVElDO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBCT0RZX1RZUEUuS0lORU1BVElDOlxyXG4gICAgICAgICAgb2ltb1R5cGUgPSBPSU1PLlJpZ2lkQm9keVR5cGUuS0lORU1BVElDO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIG9pbW9UeXBlID0gT0lNTy5SaWdpZEJvZHlUeXBlLkRZTkFNSUM7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gcmVtb3ZlIGFsbCBwcmV2aW91cyBzaGFwZXMgZnJvbSB3b3JsZC4gTmVjZXNzYXJ5P1xyXG4gICAgICAvLyB3aGlsZSAodGhpcy4jcmlnaWRib2R5ICYmIHRoaXMuI3JpZ2lkYm9keS5nZXRTaGFwZUxpc3QoKSAhPSBudWxsKVxyXG4gICAgICAvLyAgIHRoaXMuI3JpZ2lkYm9keS5yZW1vdmVTaGFwZSh0aGlzLiNyaWdpZGJvZHkuZ2V0U2hhcGVMaXN0KCkpO1xyXG5cclxuICAgICAgbGV0IHRtcFRyYW5zZm9ybTogTWF0cml4NHg0ID0gX210eFRyYW5zZm9ybSA9PSBudWxsID8gc3VwZXIubm9kZSAhPSBudWxsID8gc3VwZXIubm9kZS5tdHhXb3JsZCA6IE1hdHJpeDR4NC5JREVOVElUWSgpIDogX210eFRyYW5zZm9ybTsgLy9HZXQgdHJhbnNmb3JtIGluZm9ybWF0aW9ucyBmcm9tIHRoZSB3b3JsZCwgc2luY2UgcGh5c2ljcyBkb2VzIG5vdCBjYXJlIGFib3V0IGhpZXJhcmNoeVxyXG4gICAgICAvL0NvbnZlcnQgaW5mb3JtYXRpb25zIGZyb20gRlVER0UgdG8gT2ltb1BoeXNpY3MgYW5kIGNyZWF0aW5nIGEgY29sbGlkZXIgd2l0aCBpdCwgd2hpbGUgYWxzbyBhZGRpbmcgYSBwaXZvdCB0byBkZXJpdmF0ZSBmcm9tIHRoZSB0cmFuc2Zvcm0gaW5mb3JtYXRpb25zIGlmIG5lZWRlZFxyXG4gICAgICBsZXQgc2NhbGU6IE9JTU8uVmVjMyA9IG5ldyBPSU1PLlZlYzMoKHRtcFRyYW5zZm9ybS5zY2FsaW5nLnggKiB0aGlzLm10eFBpdm90LnNjYWxpbmcueCkgLyAyLCAodG1wVHJhbnNmb3JtLnNjYWxpbmcueSAqIHRoaXMubXR4UGl2b3Quc2NhbGluZy55KSAvIDIsICh0bXBUcmFuc2Zvcm0uc2NhbGluZy56ICogdGhpcy5tdHhQaXZvdC5zY2FsaW5nLnopIC8gMik7XHJcbiAgICAgIGxldCBwb3NpdGlvbjogT0lNTy5WZWMzID0gbmV3IE9JTU8uVmVjMyh0bXBUcmFuc2Zvcm0udHJhbnNsYXRpb24ueCArIHRoaXMubXR4UGl2b3QudHJhbnNsYXRpb24ueCwgdG1wVHJhbnNmb3JtLnRyYW5zbGF0aW9uLnkgKyB0aGlzLm10eFBpdm90LnRyYW5zbGF0aW9uLnksIHRtcFRyYW5zZm9ybS50cmFuc2xhdGlvbi56ICsgdGhpcy5tdHhQaXZvdC50cmFuc2xhdGlvbi56KTtcclxuICAgICAgbGV0IHJvdGF0aW9uOiBPSU1PLlZlYzMgPSBuZXcgT0lNTy5WZWMzKHRtcFRyYW5zZm9ybS5yb3RhdGlvbi54ICsgdGhpcy5tdHhQaXZvdC5yb3RhdGlvbi54LCB0bXBUcmFuc2Zvcm0ucm90YXRpb24ueSArIHRoaXMubXR4UGl2b3Qucm90YXRpb24ueSwgdG1wVHJhbnNmb3JtLnJvdGF0aW9uLnogKyB0aGlzLm10eFBpdm90LnJvdGF0aW9uLnopO1xyXG4gICAgICB0aGlzLmNyZWF0ZUNvbGxpZGVyKHNjYWxlLCBfY29sbGlkZXJUeXBlKTtcclxuICAgICAgLy9TZXR0aW5nIGluZm9ybWF0aW9ucyBhYm91dCBtYXNzLCBwb3NpdGlvbi9yb3RhdGlvbiBhbmQgcGh5c2ljYWwgcmVhY3Rpb24gdHlwZVxyXG4gICAgICB0aGlzLiNtYXNzRGF0YS5tYXNzID0gX21hc3M7IC8vX3R5cGUgIT0gUEhZU0lDU19UWVBFLlNUQVRJQyA/IF9tYXNzIDogMDsgLy9JZiBhIG9iamVjdCBpcyBzdGF0aWMgaXQgYWN0cyBhcyBpZiBpdCBoYXMgbm8gbWFzc1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHlJbmZvLnR5cGUgPSBvaW1vVHlwZTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5SW5mby5wb3NpdGlvbiA9IHBvc2l0aW9uO1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHlJbmZvLnJvdGF0aW9uLmZyb21FdWxlclh5eihuZXcgT0lNTy5WZWMzKHJvdGF0aW9uLngsIHJvdGF0aW9uLnksIHJvdGF0aW9uLnopKTsgLy9Db252ZXJ0IGV1bGVyQW5nbGVzIGluIGRlZ3JlZSB0byB0aGUgaW50ZXJuYWxseSB1c2VkIHF1YXRlcm5pb25zXHJcbiAgICAgIC8vQ3JlYXRpbmcgdGhlIGFjdHVhbCByaWdpZGJvZHkgYW5kIGl0J3MgY29sbGlkZXJcclxuICAgICAgdGhpcy4jcmlnaWRib2R5ID0gbmV3IE9JTU8uUmlnaWRCb2R5KHRoaXMuI3JpZ2lkYm9keUluZm8pO1xyXG4gICAgICB0aGlzLiNjb2xsaWRlciA9IG5ldyBPSU1PLlNoYXBlKHRoaXMuI2NvbGxpZGVySW5mbyk7XHJcbiAgICAgIC8vRmlsbGluZyB0aGUgYWRkaXRpb25hbCBzZXR0aW5ncyBhbmQgaW5mb3JtYXRpb25zIHRoZSByaWdpZGJvZHkgbmVlZHMuIFdobyBpcyBjb2xsaWRpbmcsIGhvdyBpcyB0aGUgY29sbGlzaW9uIGhhbmRsZWQgKGRhbXBpbmcsIGluZmx1ZW5jZSBmYWN0b3JzKVxyXG4gICAgICB0aGlzLiNjb2xsaWRlci51c2VyRGF0YSA9IHRoaXM7XHJcbiAgICAgIHRoaXMuI2NvbGxpZGVyLnNldENvbGxpc2lvbkdyb3VwKF9jb2xsaXNpb25Hcm91cCk7XHJcbiAgICAgIHRoaXMuI2NvbGxpZGVyLnNldENvbGxpc2lvbk1hc2sodGhpcy5jb2xsaXNpb25NYXNrKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmFkZFNoYXBlKHRoaXMuI2NvbGxpZGVyKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldE1hc3NEYXRhKHRoaXMuI21hc3NEYXRhKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpLnNldFJlc3RpdHV0aW9uKHRoaXMuI3Jlc3RpdHV0aW9uKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpLnNldEZyaWN0aW9uKHRoaXMuI2ZyaWN0aW9uKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LmdldFNoYXBlTGlzdCgpLnNldENvbnRhY3RDYWxsYmFjayh0aGlzLiNjYWxsYmFja3MpO1xyXG4gICAgICB0aGlzLiNyaWdpZGJvZHkuc2V0TGluZWFyRGFtcGluZyh0aGlzLiNkYW1waW5nTGluZWFyKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldEFuZ3VsYXJEYW1waW5nKHRoaXMuI2RhbXBpbmdBbmd1bGFyKTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldEdyYXZpdHlTY2FsZSh0aGlzLiNlZmZlY3RHcmF2aXR5KTtcclxuICAgICAgdGhpcy4jcmlnaWRib2R5LnNldFJvdGF0aW9uRmFjdG9yKG5ldyBPSU1PLlZlYzModGhpcy4jZWZmZWN0Um90YXRpb24ueCwgdGhpcy4jZWZmZWN0Um90YXRpb24ueSwgdGhpcy4jZWZmZWN0Um90YXRpb24ueikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBDcmVhdGVzIGEgY29sbGlkZXIgYSBzaGFwZSB0aGF0IHJlcHJlc2VudHMgdGhlIG9iamVjdCBpbiB0aGUgcGh5c2ljYWwgd29ybGQuICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVDb2xsaWRlcihfc2NhbGU6IE9JTU8uVmVjMywgX2NvbGxpZGVyVHlwZTogQ09MTElERVJfVFlQRSk6IHZvaWQge1xyXG4gICAgICBsZXQgc2hhcGVDb25mOiBPSU1PLlNoYXBlQ29uZmlnID0gbmV3IE9JTU8uU2hhcGVDb25maWcoKTsgLy9Db2xsaWRlciB3aXRoIGdlb21ldHJ5IGFuZCBpbmZvcyBsaWtlIGZyaWN0aW9uL3Jlc3RpdHV0aW9uIGFuZCBtb3JlXHJcbiAgICAgIGxldCBnZW9tZXRyeTogT0lNTy5HZW9tZXRyeTtcclxuICAgICAgaWYgKHRoaXMudHlwZUNvbGxpZGVyICE9IF9jb2xsaWRlclR5cGUpIC8vSWYgdGhlIGNvbGxpZGVyIHR5cGUgd2FzIGNoYW5nZWQgc2V0IHRoZSBpbnRlcm5hbCBvbmUgbmV3LCBlbHNlIGRvbid0IHNvIHRoZXJlIGlzIG5vdCBpbmZpbml0ZSBzZXQgY2FsbHNcclxuICAgICAgICB0aGlzLnR5cGVDb2xsaWRlciA9IF9jb2xsaWRlclR5cGU7XHJcbiAgICAgIHN3aXRjaCAoX2NvbGxpZGVyVHlwZSkgeyAgLy9DcmVhdGUgYSBkaWZmZXJlbnQgT2ltb1BoeXNpY3MgZ2VvbWV0cnkgYmFzZWQgb24gdGhlIGdpdmVuIHR5cGUuIFRoYXQgaXMgb25seSB0aGUgbWF0aGVtYXRpY2FsIHNoYXBlIG9mIHRoZSBjb2xsaWRlclxyXG4gICAgICAgIGNhc2UgQ09MTElERVJfVFlQRS5DVUJFOlxyXG4gICAgICAgICAgZ2VvbWV0cnkgPSBuZXcgT0lNTy5Cb3hHZW9tZXRyeShfc2NhbGUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDT0xMSURFUl9UWVBFLlNQSEVSRTpcclxuICAgICAgICAgIGdlb21ldHJ5ID0gbmV3IE9JTU8uU3BoZXJlR2VvbWV0cnkoX3NjYWxlLngpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDT0xMSURFUl9UWVBFLkNBUFNVTEU6XHJcbiAgICAgICAgICBnZW9tZXRyeSA9IG5ldyBPSU1PLkNhcHN1bGVHZW9tZXRyeShfc2NhbGUueCwgX3NjYWxlLnkpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDT0xMSURFUl9UWVBFLkNZTElOREVSOlxyXG4gICAgICAgICAgZ2VvbWV0cnkgPSBuZXcgT0lNTy5DeWxpbmRlckdlb21ldHJ5KF9zY2FsZS54LCBfc2NhbGUueSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENPTExJREVSX1RZUEUuQ09ORTpcclxuICAgICAgICAgIGdlb21ldHJ5ID0gbmV3IE9JTU8uQ29uZUdlb21ldHJ5KF9zY2FsZS54LCBfc2NhbGUueSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENPTExJREVSX1RZUEUuUFlSQU1JRDpcclxuICAgICAgICAgIGdlb21ldHJ5ID0gdGhpcy5jcmVhdGVDb252ZXhHZW9tZXRyeUNvbGxpZGVyKHRoaXMuY3JlYXRlUHlyYW1pZFZlcnRpY2VzKCksIF9zY2FsZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENPTExJREVSX1RZUEUuQ09OVkVYOlxyXG4gICAgICAgICAgZ2VvbWV0cnkgPSB0aGlzLmNyZWF0ZUNvbnZleEdlb21ldHJ5Q29sbGlkZXIodGhpcy5jb252ZXhNZXNoLCBfc2NhbGUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgc2hhcGVDb25mLmdlb21ldHJ5ID0gZ2VvbWV0cnk7XHJcbiAgICAgIHRoaXMuI2NvbGxpZGVySW5mbyA9IHNoYXBlQ29uZjsgLy90aGUgY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBhZGQgYW4gYWN0dWFsIGNvbGxpZGVyIHRvIHRoZSByaWdpZGJvZHkgaW4gY3JlYXRlUmlnaWRib2R5XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIENyZWF0aW5nIGEgc2hhcGUgdGhhdCByZXByZXNlbnRzIGEgaW4gaXRzZWxmIGNsb3NlZCBmb3JtLCBvdXQgb2YgdGhlIGdpdmVuIHZlcnRpY2VzLiAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVDb252ZXhHZW9tZXRyeUNvbGxpZGVyKF92ZXJ0aWNlczogRmxvYXQzMkFycmF5LCBfc2NhbGU6IE9JTU8uVmVjMyk6IE9JTU8uQ29udmV4SHVsbEdlb21ldHJ5IHtcclxuICAgICAgbGV0IHZlcnRpY2VzQXNWZWMzOiBPSU1PLlZlYzNbXSA9IG5ldyBBcnJheSgpOyAvL0NvbnZlcnQgRlVER0UgVmVjdG9yMyB0byBPaW1vVmVjM1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgX3ZlcnRpY2VzLmxlbmd0aDsgaSArPSAzKSB7IC8vMyBWYWx1ZXMgZm9yIG9uZSBwb2ludFxyXG4gICAgICAgIHZlcnRpY2VzQXNWZWMzLnB1c2gobmV3IE9JTU8uVmVjMyhfdmVydGljZXNbaV0gKiBfc2NhbGUueCwgX3ZlcnRpY2VzW2kgKyAxXSAqIF9zY2FsZS55LCBfdmVydGljZXNbaSArIDJdICogX3NjYWxlLnopKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbmV3IE9JTU8uQ29udmV4SHVsbEdlb21ldHJ5KHZlcnRpY2VzQXNWZWMzKTsgLy9UZWxsIE9pbW9QaHlzaWNzIHRvIGNyZWF0ZSBhIGh1bGwgdGhhdCBpbnZvbHZlcyBhbGwgcG9pbnRzIGJ1dCBjbG9zZSBpdCBvZi4gQSBjb252ZXggc2hhcGUgY2FuIG5vdCBoYXZlIGEgaG9sZSBpbiBpdC5cclxuICAgIH1cclxuXHJcbiAgICAvKiogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgdmVydGljZXMgdGhhdCBjb25zdHJ1Y3QgYSBweXJhbWlkLiBUaGUgdmVydGljZXMgb2YgdGhlIGltcGxlbWVudGVkIHB5cmFtaWQgbWVzaCBjYW4gYmUgdXNlZCB0b28uIEJ1dCB0aGV5IGFyZSBoYWxmZWQgYW5kIGRvdWJsZSBzaWRlZCwgc28gaXQncyBtb3JlIHBlcmZvcm1hbnQgdG8gdXNlIHRoaXMuICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZVB5cmFtaWRWZXJ0aWNlcygpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICBsZXQgdmVydGljZXM6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoW1xyXG4gICAgICAgIC8qMCovLTEsIDAsIDEsIC8qMSovIDEsIDAsIDEsICAvKjIqLyAxLCAwLCAtMSwgLyozKi8gLTEsIDAsIC0xLFxyXG4gICAgICAgIC8qNCovIDAsIDIsIDBcclxuICAgICAgXSk7XHJcbiAgICAgIHJldHVybiB2ZXJ0aWNlcztcclxuICAgIH1cclxuXHJcbiAgICAvKiogQWRkaW5nIHRoaXMgQ29tcG9uZW50UmlnaWRib2R5IHRvIHRoZSBQaHlzaXNjcy53b3JsZCBnaXZpbmcgdGhlIG9pbW9QaHlzaWNzIHN5c3RlbSB0aGUgaW5mb3JtYXRpb24gbmVlZGVkICovXHJcbiAgICBwcml2YXRlIGFkZFJpZ2lkYm9keVRvV29ybGQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgIGlmICghdGhpcy4jcmlnaWRib2R5Ll93b3JsZClcclxuICAgICAgICBQaHlzaWNzLmFkZFJpZ2lkYm9keSh0aGlzKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIFJlbW92aW5nIHRoaXMgQ29tcG9uZW50UmlnaWRib2R5IGZyb20gdGhlIFBoeXNpc2NzLndvcmxkIHRha2luZyB0aGUgaW5mb3JtYXRpb25zIGZyb20gdGhlIG9pbW9QaHlzaWNzIHN5c3RlbSAqL1xyXG4gICAgcHJpdmF0ZSByZW1vdmVSaWdpZGJvZHlGcm9tV29ybGQgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgIFBoeXNpY3MucmVtb3ZlUmlnaWRib2R5KHRoaXMpO1xyXG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vI3JlZ2lvbiBwcml2YXRlIEVWRU5UIGZ1bmN0aW9uc1xyXG4gICAgLy9DYWxjdWxhdGluZyB0aGUgY2VudGVyIG9mIGEgY29sbGlzaW9uIGFzIGEgc2luZ3VsYXIgcG9pbnQgLSBpbiBjYXNlIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgcG9pbnQgLSBieSBnZXR0aW5nIHRoZSBnZW9tZXRyaWNhbCBjZW50ZXIgb2YgYWxsIGNvbGxpZGluZyBwb2ludHNcclxuICAgIHByaXZhdGUgY29sbGlzaW9uQ2VudGVyUG9pbnQoX2NvbFBvaW50czogT0lNTy5NYW5pZm9sZFBvaW50W10sIF9udW1Qb2ludHM6IG51bWJlcik6IE9JTU8uVmVjMyB7XHJcbiAgICAgIGxldCBjZW50ZXI6IE9JTU8uVmVjMztcclxuICAgICAgbGV0IHRvdGFsUG9pbnRzOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgdG90YWxYOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgdG90YWxZOiBudW1iZXIgPSAwO1xyXG4gICAgICBsZXQgdG90YWxaOiBudW1iZXIgPSAwO1xyXG4gICAgICBfY29sUG9pbnRzLmZvckVhY2goKF92YWx1ZTogT0lNTy5NYW5pZm9sZFBvaW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKHRvdGFsUG9pbnRzIDwgX251bVBvaW50cykge1xyXG4gICAgICAgICAgdG90YWxQb2ludHMrKztcclxuICAgICAgICAgIHRvdGFsWCArPSBfdmFsdWUuZ2V0UG9zaXRpb24yKCkueDtcclxuICAgICAgICAgIHRvdGFsWSArPSBfdmFsdWUuZ2V0UG9zaXRpb24yKCkueTtcclxuICAgICAgICAgIHRvdGFsWiArPSBfdmFsdWUuZ2V0UG9zaXRpb24yKCkuejtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBjZW50ZXIgPSBuZXcgT0lNTy5WZWMzKHRvdGFsWCAvIF9udW1Qb2ludHMsIHRvdGFsWSAvIF9udW1Qb2ludHMsIHRvdGFsWiAvIF9udW1Qb2ludHMpO1xyXG4gICAgICByZXR1cm4gY2VudGVyO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBUcmlnZ2VyIEVudGVyaW5nRXZlbnQgQ2FsbGJhY2ssIGF1dG9tYXRpY2FsbHkgY2FsbGVkIGJ5IE9JTU8gUGh5c2ljcyB3aXRoaW4gdGhlaXIgY2FsY3VsYXRpb25zLlxyXG4gICAgKiBTaW5jZSB0aGUgZXZlbnQgZG9lcyBub3Qga25vdyB3aGljaCBib2R5IGlzIHRoZSB0cmlnZ2VyIGluaWF0b3IsIHRoZSBldmVudCBjYW4gYmUgbGlzdGVuZWQgdG9cclxuICAgICogb24gZWl0aGVyIHRoZSB0cmlnZ2VyIG9yIHRoZSB0cmlnZ2VyZWQuIChUaGlzIGlzIG9ubHkgcG9zc2libGUgd2l0aCB0aGUgRlVER0UgT0lNTyBGb3JrISlcclxuICAgICovXHJcbiAgICBwcml2YXRlIHRyaWdnZXJFbnRlcihfY29udGFjdDogT0lNTy5Db250YWN0KTogdm9pZCB7XHJcbiAgICAgIGxldCBvYmpIaXQ6IENvbXBvbmVudFJpZ2lkYm9keTsgLy9jb2xsaXNpb24gY29uc2lzdGluZyBvZiAyIGJvZGllcywgc28gSGl0MS8yXHJcbiAgICAgIGxldCBvYmpIaXQyOiBDb21wb25lbnRSaWdpZGJvZHk7XHJcbiAgICAgIGxldCBldmVudDogRXZlbnRQaHlzaWNzOyAgLy9UaGUgZXZlbnQgdGhhdCB3aWxsIGJlIHNlbmQgYW5kIHRoZSBpbmZvcm1hdGlvbnMgYWRkZWQgdG8gaXRcclxuICAgICAgbGV0IGNvbFBvaW50OiBWZWN0b3IzO1xyXG5cclxuICAgICAgLy9BREQgTkVXIFRyaWdnZXJpbmcgLSBUaGF0IGp1c3QgaGFwcGVuZWRcclxuICAgICAgbGV0IGNvbGxpc2lvbk1hbmlmb2xkOiBPSU1PLk1hbmlmb2xkID0gX2NvbnRhY3QuZ2V0TWFuaWZvbGQoKTsgLy9NYW5pZm9sZCA9IEFkZGl0aW9uYWwgaW5mb3JtYXRpb25zIGFib3V0IHRoZSBjb250YWN0XHJcbiAgICAgIG9iakhpdCA9IF9jb250YWN0LmdldFNoYXBlMSgpLnVzZXJEYXRhOyAgLy9Vc2VyZGF0YSBpcyB1c2VkIHRvIHRyYW5zZmVyIHRoZSDGki5Db21wb25lbnRSaWdpZGJvZHksIGl0J3MgYW4gZW1wdHkgT2ltb1BoeXNpY3MgVmFyaWFibGVcclxuICAgICAgLy9Pbmx5IHJlZ2lzdGVyIHRoZSBjb2xsaXNpb24gb24gdGhlIGFjdHVhbCB0b3VjaCwgbm90IG9uIFwic2hhZG93Q29sbGlkZVwiLCB0byByZWdpc3RlciBpbiB0aGUgbW9tZW50IG9mIGltcHVsc2UgY2FsY3VsYXRpb25cclxuICAgICAgaWYgKG9iakhpdCA9PSBudWxsIHx8IF9jb250YWN0LmlzVG91Y2hpbmcoKSA9PSBmYWxzZSkgLy8gb25seSBhY3QgaWYgdGhlIGNvbGxpc2lvbiBpcyBhY3R1YWwgdG91Y2hpbmcsIHNvIHJpZ2h0IGF0IHRoZSBtb21lbnQgd2hlbiBhIGltcHVsc2UgaXMgaGFwcGVuaW5nLCBub3Qgd2hlbiBzaGFwZXMgb3ZlcmxhcFxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgb2JqSGl0MiA9IF9jb250YWN0LmdldFNoYXBlMigpLnVzZXJEYXRhO1xyXG4gICAgICBpZiAob2JqSGl0MiA9PSBudWxsIHx8IF9jb250YWN0LmlzVG91Y2hpbmcoKSA9PSBmYWxzZSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIGxldCBwb2ludHM6IE9JTU8uTWFuaWZvbGRQb2ludFtdID0gY29sbGlzaW9uTWFuaWZvbGQuZ2V0UG9pbnRzKCk7IC8vQWxsIHBvaW50cyBpbiB0aGUgY29sbGlzaW9uIHdoZXJlIHRoZSB0d28gYm9kaWVzIGFyZSB0b3VjaGluZywgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGZ1bGwgaW1wYWN0XHJcbiAgICAgIGxldCBub3JtYWw6IE9JTU8uVmVjMyA9IGNvbGxpc2lvbk1hbmlmb2xkLmdldE5vcm1hbCgpO1xyXG4gICAgICBpZiAob2JqSGl0Mi50cmlnZ2VyaW5ncy5pbmRleE9mKG9iakhpdCkgPT0gLTEpIHsgLy9GaXJlLCBpZiB0aGUgaGl0IG9iamVjdCBpcyBub3QgdGhlIEJvZHkgaXRzZWxmIGJ1dCBhbm90aGVyIGFuZCBpdCdzIG5vdCBhbHJlYWR5IGZpcmVkLlxyXG4gICAgICAgIGxldCBjb2xQb3M6IE9JTU8uVmVjMyA9IG9iakhpdDIuY29sbGlzaW9uQ2VudGVyUG9pbnQocG9pbnRzLCBjb2xsaXNpb25NYW5pZm9sZC5nZXROdW1Qb2ludHMoKSk7IC8vVEhFIHBvaW50IG9mIGNvbGxpc2lvbiBpcyB0aGUgZmlyc3QgdG91Y2hpbmcgcG9pbnQgKEVYVEVOU0lPTjogY291bGQgYmUgdGhlIGNlbnRlciBvZiBhbGwgdG91Y2hpbmcgcG9pbnRzIGNvbWJpbmVkKVxyXG4gICAgICAgIGNvbFBvaW50ID0gbmV3IFZlY3RvcjMoY29sUG9zLngsIGNvbFBvcy55LCBjb2xQb3Mueik7XHJcbiAgICAgICAgLy8gSW1wdWxzZXMgYXJlIDAgc2luY2UsIHRoZXJlIGFyZSBubyBmb3JjZXMvaW1wdWxzZXMgYXQgd29yaywgZWxzZSB0aGlzIHdvdWxkIG5vdCBiZSBhIHRyaWdnZXIsIGJ1dCBhIGNvbGxpc2lvblxyXG4gICAgICAgIG9iakhpdDIudHJpZ2dlcmluZ3MucHVzaChvYmpIaXQpOyAvL1RlbGwgdGhlIG9iamVjdCB0aGF0IHRoZSBldmVudCBmb3IgdGhpcyBvYmplY3QgZG9lcyBub3QgbmVlZCB0byBiZSBmaXJlZCBhZ2FpblxyXG4gICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50UGh5c2ljcyhFVkVOVF9QSFlTSUNTLlRSSUdHRVJfRU5URVIsIG9iakhpdCwgMCwgMCwgMCwgY29sUG9pbnQsIG5ldyBWZWN0b3IzKG5vcm1hbC54LCBub3JtYWwueSwgbm9ybWFsLnopKTsgLy9CdWlsZGluZyB0aGUgYWN0dWFsIGV2ZW50LCB3aXRoIHdoYXQgb2JqZWN0IGRpZCBjb2xsaWRlIGFuZCBpbmZvcm1hdGlvbnMgYWJvdXQgaXRcclxuICAgICAgICBvYmpIaXQyLmRpc3BhdGNoRXZlbnQoZXZlbnQpOyAvL1NlbmRpbmcgdGhlIGdpdmVuIGV2ZW50XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG9iakhpdC50cmlnZ2VyaW5ncy5pbmRleE9mKG9iakhpdDIpID09IC0xKSB7IC8vU2FtZSBhcyB0aGUgYWJvdmUgYnV0IGZvciB0aGUgY2FzZSB0aGUgU0VDT05EIGhpdCBvYmplY3QgaXMgbm90IHRoZSBib2R5IGl0c2VsZlxyXG4gICAgICAgIGxldCBjb2xQb3M6IE9JTU8uVmVjMyA9IG9iakhpdC5jb2xsaXNpb25DZW50ZXJQb2ludChwb2ludHMsIGNvbGxpc2lvbk1hbmlmb2xkLmdldE51bVBvaW50cygpKTtcclxuICAgICAgICBjb2xQb2ludCA9IG5ldyBWZWN0b3IzKGNvbFBvcy54LCBjb2xQb3MueSwgY29sUG9zLnopO1xyXG4gICAgICAgIC8vIEltcHVsc2VzIGFyZSAwIHNpbmNlLCB0aGVyZSBhcmUgbm8gZm9yY2VzL2ltcHVsc2VzIGF0IHdvcmssIGVsc2UgdGhpcyB3b3VsZCBub3QgYmUgYSB0cmlnZ2VyLCBidXQgYSBjb2xsaXNpb24sXHJcbiAgICAgICAgLy8gYWxzbyB0aGUgZXZlbnQgaXMgaGFuZGxlZCBiZWZvcmUgdGhlIGFjdHVhbCBzb2x2aW5nIGltcHVsc2Ugc3RlcCBpbiBPSU1PXHJcbiAgICAgICAgb2JqSGl0LnRyaWdnZXJpbmdzLnB1c2gob2JqSGl0Mik7XHJcbiAgICAgICAgZXZlbnQgPSBuZXcgRXZlbnRQaHlzaWNzKEVWRU5UX1BIWVNJQ1MuVFJJR0dFUl9FTlRFUiwgb2JqSGl0MiwgMCwgMCwgMCwgY29sUG9pbnQsIG5ldyBWZWN0b3IzKG5vcm1hbC54LCBub3JtYWwueSwgbm9ybWFsLnopKTtcclxuICAgICAgICBvYmpIaXQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogVHJpZ2dlciBMZWF2aW5nRXZlbnQgQ2FsbGJhY2ssIGF1dG9tYXRpY2FsbHkgY2FsbGVkIGJ5IE9JTU8gUGh5c2ljcyB3aXRoaW4gdGhlaXIgY2FsY3VsYXRpb25zLlxyXG4gICAgKiBTaW5jZSB0aGUgZXZlbnQgZG9lcyBub3Qga25vdyB3aGljaCBib2R5IGlzIHRoZSB0cmlnZ2VyIGluaWF0b3IsIHRoZSBldmVudCBjYW4gYmUgbGlzdGVuZWQgdG9cclxuICAgICogb24gZWl0aGVyIHRoZSB0cmlnZ2VyIG9yIHRoZSB0cmlnZ2VyZWQuIChUaGlzIGlzIG9ubHkgcG9zc2libGUgd2l0aCB0aGUgRlVER0UgT0lNTyBGb3JrISlcclxuICAgICovXHJcbiAgICBwcml2YXRlIHRyaWdnZXJFeGl0KF9jb250YWN0OiBPSU1PLkNvbnRhY3QpOiB2b2lkIHtcclxuICAgICAgLy9SRU1PVkUgT0xEIFRyaWdnZXJpbmcgQm9keVxyXG4gICAgICBsZXQgb2JqSGl0OiBDb21wb25lbnRSaWdpZGJvZHk7IC8vY29sbGlzaW9uIGNvbnNpc3Rpbmcgb2YgMiBib2RpZXMsIHNvIEhpdDEvMlxyXG4gICAgICBsZXQgb2JqSGl0MjogQ29tcG9uZW50UmlnaWRib2R5O1xyXG4gICAgICBsZXQgZXZlbnQ6IEV2ZW50UGh5c2ljczsgIC8vVGhlIGV2ZW50IHRoYXQgd2lsbCBiZSBzZW5kIGFuZCB0aGUgaW5mb3JtYXRpb25zIGFkZGVkIHRvIGl0XHJcbiAgICAgIG9iakhpdCA9IF9jb250YWN0LmdldFNoYXBlMSgpLnVzZXJEYXRhO1xyXG4gICAgICBvYmpIaXQyID0gX2NvbnRhY3QuZ2V0U2hhcGUyKCkudXNlckRhdGE7XHJcblxyXG4gICAgICAvLyBSZW1vdmUgYm90aCBib2RpZXMgaW4gYm90aCBjYXNlcywgb2Ygc2VsZiBhbmQgb3RoZXJcclxuICAgICAgbGV0IGluZGV4OiBudW1iZXIgPSBvYmpIaXQudHJpZ2dlcmluZ3MuaW5kZXhPZihvYmpIaXQyKTsgLy9GaW5kIG9iamVjdCBpbiB0aGUgYXJyYXlcclxuICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XHJcbiAgICAgICAgb2JqSGl0LnRyaWdnZXJpbmdzLnNwbGljZShpbmRleCk7IC8vcmVtb3ZlIGl0IGZyb20gdGhlIGFycmF5XHJcbiAgICAgICAgZXZlbnQgPSBuZXcgRXZlbnRQaHlzaWNzKEVWRU5UX1BIWVNJQ1MuVFJJR0dFUl9FWElULCBvYmpIaXQyLCAwLCAwLCAwKTtcclxuICAgICAgICBvYmpIaXQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgIH1cclxuICAgICAgaW5kZXggPSBvYmpIaXQyLnRyaWdnZXJpbmdzLmluZGV4T2Yob2JqSGl0KTsgLy9GaW5kIG9iamVjdCBpbiB0aGUgYXJyYXlcclxuICAgICAgaWYgKGluZGV4ICE9IC0xKSB7XHJcbiAgICAgICAgb2JqSGl0Mi50cmlnZ2VyaW5ncy5zcGxpY2UoaW5kZXgpOyAvL3JlbW92ZSBpdCBmcm9tIHRoZSBhcnJheVxyXG4gICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50UGh5c2ljcyhFVkVOVF9QSFlTSUNTLlRSSUdHRVJfRVhJVCwgb2JqSGl0LCAwLCAwLCAwKTtcclxuICAgICAgICBvYmpIaXQyLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqIEludGVybmFsIGNsYXNzIGZvciBob2xkaW5nIGRhdGEgYWJvdXQgcGh5c2ljcyBkZWJ1ZyB2ZXJ0aWNlcy4qL1xyXG4gIGV4cG9ydCBjbGFzcyBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXIge1xyXG4gICAgcHVibGljIGdsOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xyXG4gICAgcHVibGljIG51bVZlcnRpY2VzOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIGF0dHJpYnM6IEFycmF5PFBoeXNpY3NEZWJ1Z1ZlcnRleEF0dHJpYnV0ZT47XHJcbiAgICBwdWJsaWMgaW5kaWNlczogQXJyYXk8bnVtYmVyPjtcclxuICAgIHB1YmxpYyBvZmZzZXRzOiBBcnJheTxudW1iZXI+O1xyXG4gICAgcHVibGljIHN0cmlkZTogbnVtYmVyO1xyXG4gICAgcHVibGljIGJ1ZmZlcjogV2ViR0xCdWZmZXI7XHJcbiAgICBwdWJsaWMgZGF0YUxlbmd0aDogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBTZXR1cCB0aGUgcmVuZGVyaW5nIGNvbnRleHQgZm9yIHRoaXMgYnVmZmVyIGFuZCBjcmVhdGUgdGhlIGFjdHVhbCBidWZmZXIgZm9yIHRoaXMgY29udGV4dC4gKi9cclxuICAgIGNvbnN0cnVjdG9yKF9yZW5kZXJpbmdDb250ZXh0OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0KSB7XHJcbiAgICAgIHRoaXMuZ2wgPSBfcmVuZGVyaW5nQ29udGV4dDtcclxuICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBGaWxsIHRoZSBib3VuZCBidWZmZXIgd2l0aCBkYXRhLiBVc2VkIGF0IGJ1ZmZlciBpbml0aWFsaXphdGlvbiAqL1xyXG4gICAgcHVibGljIHNldERhdGEoYXJyYXk6IEFycmF5PG51bWJlcj4pOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuYXR0cmlicyA9PSBudWxsKSB0aHJvdyBcInNldCBhdHRyaWJ1dGVzIGZpcnN0XCI7XHJcbiAgICAgIHRoaXMubnVtVmVydGljZXMgPSBhcnJheS5sZW5ndGggLyAodGhpcy5zdHJpZGUgLyA0KTtcclxuICAgICAgdGhpcy5nbC5iaW5kQnVmZmVyKHRoaXMuZ2wuQVJSQVlfQlVGRkVSLCB0aGlzLmJ1ZmZlcik7XHJcbiAgICAgIHRoaXMuZ2wuYnVmZmVyRGF0YSh0aGlzLmdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShhcnJheSksIHRoaXMuZ2wuRFlOQU1JQ19EUkFXKTtcclxuICAgICAgLy9ub3QgbmVjZXNzYXJ5IGFuIGluIHdlYmdsMiBhbnltb3JlIHRvIHJlYmluZCB0aGUgc2FtZSBsYXN0IGJ1ZmZlciAod2hpY2ggaXMgYWNoaWV2ZWQgYnkgZ2l2aW5nIGEgbnVsbCBidWZmZXIpLCBhZnRlciBidWZmZXIgaXMgY2hhbmdlZC4gUmVtb3ZlZCBpdCBvbiBhbGwgb3RoZXIgb2NjYXNpb25zXHJcbiAgICAgIC8vIHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7IFxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBTZXQgU2hhZGVyIEF0dHJpYnV0ZXMgaW5mb3JtYXRpb25zIGJ5IGdldHRpbmcgdGhlaXIgcG9zaXRpb24gaW4gdGhlIHNoYWRlciwgc2V0dGluZyB0aGUgb2Zmc2V0LCBzdHJpZGUgYW5kIHNpemUuIEZvciBsYXRlciB1c2UgaW4gdGhlIGJpbmRpbmcgcHJvY2VzcyAqL1xyXG4gICAgcHVibGljIHNldEF0dHJpYnMoYXR0cmliczogQXJyYXk8UGh5c2ljc0RlYnVnVmVydGV4QXR0cmlidXRlPik6IHZvaWQge1xyXG4gICAgICB0aGlzLmF0dHJpYnMgPSBhdHRyaWJzO1xyXG4gICAgICB0aGlzLm9mZnNldHMgPSBbXTtcclxuICAgICAgdGhpcy5zdHJpZGUgPSAwO1xyXG4gICAgICBsZXQgbjogbnVtYmVyID0gYXR0cmlicy5sZW5ndGg7XHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICB0aGlzLm9mZnNldHMucHVzaCh0aGlzLnN0cmlkZSk7XHJcbiAgICAgICAgdGhpcy5zdHJpZGUgKz0gYXR0cmlic1tpXS5mbG9hdDMyQ291bnQgKiBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7IC8vIDMyYml0IGZsb2F0IEJ5dGVzIGFyZSBhIGNvbnN0YW50IG9mIDRcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKiBHZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBhdHRyaWJ1dGUgaW4gdGhlIHNoYWRlciAqL1xyXG4gICAgcHVibGljIGxvYWRBdHRyaWJJbmRpY2VzKF9wcm9ncmFtOiBQaHlzaWNzRGVidWdTaGFkZXIpOiB2b2lkIHtcclxuICAgICAgdGhpcy5pbmRpY2VzID0gX3Byb2dyYW0uZ2V0QXR0cmliSW5kaWNlcyh0aGlzLmF0dHJpYnMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBFbmFibGUgYSBhdHRyaWJ1dGUgaW4gYSBzaGFkZXIgZm9yIHRoaXMgY29udGV4dCwgKi9cclxuICAgIHB1YmxpYyBiaW5kQXR0cmlicygpOiB2b2lkIHtcclxuICAgICAgaWYgKHRoaXMuaW5kaWNlcyA9PSBudWxsKSB0aHJvdyBcImluZGljZXMgYXJlIG5vdCBsb2FkZWRcIjtcclxuICAgICAgbGV0IG46IG51bWJlciA9IHRoaXMuYXR0cmlicy5sZW5ndGg7XHJcbiAgICAgIHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkFSUkFZX0JVRkZFUiwgdGhpcy5idWZmZXIpOyAvL21ha2luZyB0aGUgYnVmZmVyIG9mIHRoaXMgY2xhc3MgdGhlIGN1cnJlbnQgYnVmZmVyXHJcbiAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICB0aGlzLmdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHRoaXMuaW5kaWNlc1tpXSk7IC8vZW5hYmxlIHRoZSBBdHRyaWJ1dGVcclxuICAgICAgICB0aGlzLmdsLnZlcnRleEF0dHJpYlBvaW50ZXIodGhpcy5pbmRpY2VzW2ldLCB0aGlzLmF0dHJpYnNbaV0uZmxvYXQzMkNvdW50LCB0aGlzLmdsLkZMT0FULCBmYWxzZSwgdGhpcy5zdHJpZGUsIHRoaXMub2Zmc2V0c1tpXSk7IC8vY3JlYXRlcyBhIHBvaW50ZXIgYW5kIHN0cnVjdHVyZSBmb3IgdGhpcyBhdHRyaWJ1dGVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIEludGVybmFsIGNsYXNzIGZvciBob2xkaW5nIGRhdGEgYWJvdXQgUGh5c2ljc0RlYnVnVmVydGV4QnVmZmVycyAqL1xyXG4gIGV4cG9ydCBjbGFzcyBQaHlzaWNzRGVidWdJbmRleEJ1ZmZlciB7XHJcbiAgICBwdWJsaWMgZ2w6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgICBwdWJsaWMgYnVmZmVyOiBXZWJHTEJ1ZmZlcjtcclxuICAgIHB1YmxpYyBjb3VudDogbnVtYmVyO1xyXG5cclxuICAgIC8qKiBTZXR1cCB0aGUgcmVuZGVyaW5nIGNvbnRleHQgZm9yIHRoaXMgYnVmZmVyIGFuZCBjcmVhdGUgdGhlIGFjdHVhbCBidWZmZXIgZm9yIHRoaXMgY29udGV4dC4gKi9cclxuICAgIGNvbnN0cnVjdG9yKF9yZW5kZXJpbmdDb250ZXh0OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0KSB7XHJcbiAgICAgIHRoaXMuZ2wgPSBfcmVuZGVyaW5nQ29udGV4dDtcclxuICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmdsLmNyZWF0ZUJ1ZmZlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBGaWxsIHRoZSBib3VuZCBidWZmZXIgd2l0aCBkYXRhIGFtb3VudC4gVXNlZCBhdCBidWZmZXIgaW5pdGlhbGl6YXRpb24gKi9cclxuICAgIHB1YmxpYyBzZXREYXRhKGFycmF5OiBBcnJheTxudW1iZXI+KTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZ2wuYmluZEJ1ZmZlcih0aGlzLmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB0aGlzLmJ1ZmZlcik7XHJcbiAgICAgIHRoaXMuZ2wuYnVmZmVyRGF0YSh0aGlzLmdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBuZXcgSW50MTZBcnJheShhcnJheSksIHRoaXMuZ2wuRFlOQU1JQ19EUkFXKTtcclxuICAgICAgdGhpcy5jb3VudCA9IGFycmF5Lmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKiogVGhlIGFjdHVhbCBEcmF3Q2FsbCBmb3IgcGh5c2ljc0RlYnVnRHJhdyBCdWZmZXJzLiBUaGlzIGlzIHdoZXJlIHRoZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBkZWJ1ZyBpcyBhY3R1YWxseSBkcmF3bi4gKi9cclxuICAgIHB1YmxpYyBkcmF3KF9tb2RlOiBudW1iZXIgPSB0aGlzLmdsLlRSSUFOR0xFUywgX2NvdW50OiBudW1iZXIgPSAtMSk6IHZvaWQge1xyXG4gICAgICB0aGlzLmdsLmJpbmRCdWZmZXIodGhpcy5nbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5idWZmZXIpO1xyXG4gICAgICB0aGlzLmdsLmRyYXdFbGVtZW50cyhfbW9kZSwgX2NvdW50ID49IDAgPyBfY291bnQgOiB0aGlzLmNvdW50LCB0aGlzLmdsLlVOU0lHTkVEX1NIT1JULCAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBJbnRlcm5hbCBjbGFzcyBmb3IgbWFuYWdpbmcgZGF0YSBhYm91dCB3ZWJHTCBBdHRyaWJ1dGVzICovXHJcbiAgZXhwb3J0IGNsYXNzIFBoeXNpY3NEZWJ1Z1ZlcnRleEF0dHJpYnV0ZSB7XHJcbiAgICBwdWJsaWMgZmxvYXQzMkNvdW50OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9mbG9hdDMyQ291bnQ6IG51bWJlciwgX25hbWU6IHN0cmluZykge1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgICAgdGhpcy5mbG9hdDMyQ291bnQgPSBfZmxvYXQzMkNvdW50O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIEludGVybmFsIGNsYXNzIGZvciBTaGFkZXJzIHVzZWQgb25seSBieSB0aGUgcGh5c2ljcyBkZWJ1Z0RyYXcgKi9cclxuICBleHBvcnQgY2xhc3MgUGh5c2ljc0RlYnVnU2hhZGVyIHtcclxuICAgIHB1YmxpYyBnbDogV2ViR0wyUmVuZGVyaW5nQ29udGV4dDtcclxuICAgIHB1YmxpYyBwcm9ncmFtOiBXZWJHTFByb2dyYW07XHJcbiAgICBwdWJsaWMgdmVydGV4U2hhZGVyOiBXZWJHTFNoYWRlcjtcclxuICAgIHB1YmxpYyBmcmFnbWVudFNoYWRlcjogV2ViR0xTaGFkZXI7XHJcbiAgICBwdWJsaWMgdW5pZm9ybUxvY2F0aW9uTWFwOiBNYXA8c3RyaW5nLCBXZWJHTFVuaWZvcm1Mb2NhdGlvbj47XHJcblxyXG4gICAgLyoqIEludHJvZHVjZSB0aGUgRlVER0UgUmVuZGVyaW5nIENvbnRleHQgdG8gdGhpcyBjbGFzcywgY3JlYXRpbmcgYSBwcm9ncmFtIGFuZCB2ZXJ0ZXgvZnJhZ21lbnQgc2hhZGVyIGluIHRoaXMgY29udGV4dCAqL1xyXG4gICAgY29uc3RydWN0b3IoX3JlbmRlcmluZ0NvbnRleHQ6IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQpIHtcclxuICAgICAgdGhpcy5nbCA9IF9yZW5kZXJpbmdDb250ZXh0O1xyXG4gICAgICB0aGlzLnByb2dyYW0gPSB0aGlzLmdsLmNyZWF0ZVByb2dyYW0oKTtcclxuICAgICAgdGhpcy52ZXJ0ZXhTaGFkZXIgPSB0aGlzLmdsLmNyZWF0ZVNoYWRlcih0aGlzLmdsLlZFUlRFWF9TSEFERVIpO1xyXG4gICAgICB0aGlzLmZyYWdtZW50U2hhZGVyID0gdGhpcy5nbC5jcmVhdGVTaGFkZXIodGhpcy5nbC5GUkFHTUVOVF9TSEFERVIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBUYWtlIGdsc2wgc2hhZGVycyBhcyBzdHJpbmdzIGFuZCBjb21waWxlIHRoZW0sIGF0dGFjaGluZyB0aGUgY29tcGlsZWQgc2hhZGVycyB0byBhIHByb2dyYW0gdGhhdHMgdXNlZCBieSB0aGlzIHJlbmRlcmluZyBjb250ZXh0LiAqL1xyXG4gICAgcHVibGljIGNvbXBpbGUodmVydGV4U291cmNlOiBzdHJpbmcsIGZyYWdtZW50U291cmNlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgdGhpcy51bmlmb3JtTG9jYXRpb25NYXAgPSBuZXcgTWFwPHN0cmluZywgV2ViR0xVbmlmb3JtTG9jYXRpb24+KCk7XHJcbiAgICAgIHRoaXMuY29tcGlsZVNoYWRlcih0aGlzLnZlcnRleFNoYWRlciwgdmVydGV4U291cmNlKTtcclxuICAgICAgdGhpcy5jb21waWxlU2hhZGVyKHRoaXMuZnJhZ21lbnRTaGFkZXIsIGZyYWdtZW50U291cmNlKTtcclxuICAgICAgdGhpcy5nbC5hdHRhY2hTaGFkZXIodGhpcy5wcm9ncmFtLCB0aGlzLnZlcnRleFNoYWRlcik7XHJcbiAgICAgIHRoaXMuZ2wuYXR0YWNoU2hhZGVyKHRoaXMucHJvZ3JhbSwgdGhpcy5mcmFnbWVudFNoYWRlcik7XHJcbiAgICAgIHRoaXMuZ2wubGlua1Byb2dyYW0odGhpcy5wcm9ncmFtKTtcclxuICAgICAgaWYgKCF0aGlzLmdsLmdldFByb2dyYW1QYXJhbWV0ZXIodGhpcy5wcm9ncmFtLCB0aGlzLmdsLkxJTktfU1RBVFVTKSkgeyAgLy9tYWtlIHN1cmUgdGhlIGxpbmtpbmcgd29ya2VkLCBzbyB0aGUgcHJvZ3JhbSBpcyB2YWxpZCwgYW5kIHNoYWRlcnMgYXJlIHdvcmtpbmdcclxuICAgICAgICBEZWJ1Zy5sb2codGhpcy5nbC5nZXRQcm9ncmFtSW5mb0xvZyh0aGlzLnByb2dyYW0pKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLmdsLnZhbGlkYXRlUHJvZ3JhbSh0aGlzLnByb2dyYW0pO1xyXG4gICAgICBpZiAoIXRoaXMuZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcih0aGlzLnByb2dyYW0sIHRoaXMuZ2wuVkFMSURBVEVfU1RBVFVTKSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPUiB2YWxpZGF0aW5nIHByb2dyYW0hXCIsIHRoaXMuZ2wuZ2V0UHJvZ3JhbUluZm9Mb2codGhpcy5wcm9ncmFtKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdldCBpbmRleCBvZiBhIGF0dHJpYnV0ZSBpbiBhIHNoYWRlciBpbiB0aGlzIHByb2dyYW0gKi9cclxuICAgIHB1YmxpYyBnZXRBdHRyaWJJbmRleChfbmFtZTogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5wcm9ncmFtLCBfbmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdldCB0aGUgbG9jYXRpb24gb2YgYSB1bmlmb3JtIGluIGEgc2hhZGVyIGluIHRoaXMgcHJvZ3JhbSAqL1xyXG4gICAgcHVibGljIGdldFVuaWZvcm1Mb2NhdGlvbihfbmFtZTogc3RyaW5nKTogV2ViR0xVbmlmb3JtTG9jYXRpb24ge1xyXG4gICAgICBpZiAodGhpcy51bmlmb3JtTG9jYXRpb25NYXAuaGFzKF9uYW1lKSkgcmV0dXJuIHRoaXMudW5pZm9ybUxvY2F0aW9uTWFwLmdldChfbmFtZSk7XHJcbiAgICAgIGxldCBsb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSB0aGlzLmdsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sIF9uYW1lKTtcclxuICAgICAgdGhpcy51bmlmb3JtTG9jYXRpb25NYXAuc2V0KF9uYW1lLCBsb2NhdGlvbik7XHJcbiAgICAgIHJldHVybiBsb2NhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKiogR2V0IGFsbCBpbmRpY2VzIGZvciBldmVyeSBhdHRyaWJ1dGUgaW4gdGhlIHNoYWRlcnMgb2YgdGhpcyBwcm9ncmFtICovXHJcbiAgICBwdWJsaWMgZ2V0QXR0cmliSW5kaWNlcyhfYXR0cmliczogQXJyYXk8UGh5c2ljc0RlYnVnVmVydGV4QXR0cmlidXRlPik6IEFycmF5PG51bWJlcj4ge1xyXG4gICAgICBsZXQgaW5kaWNlczogQXJyYXk8bnVtYmVyPiA9IFtdO1xyXG4gICAgICBfYXR0cmlicy5mb3JFYWNoKHZhbHVlID0+IHtcclxuICAgICAgICBpbmRpY2VzLnB1c2godGhpcy5nZXRBdHRyaWJJbmRleCh2YWx1ZS5uYW1lKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gaW5kaWNlcztcclxuICAgIH1cclxuXHJcbiAgICAvKiogVGVsbCB0aGUgRlVER0UgUmVuZGVyaW5nIENvbnRleHQgdG8gdXNlIHRoaXMgcHJvZ3JhbSB0byBkcmF3LiAqL1xyXG4gICAgcHVibGljIHVzZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5nbC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIENvbXBpbGUgYSBzaGFkZXIgb3V0IG9mIGEgc3RyaW5nIGFuZCB2YWxpZGF0ZSBpdC4gKi9cclxuICAgIHB1YmxpYyBjb21waWxlU2hhZGVyKHNoYWRlcjogV2ViR0xTaGFkZXIsIHNvdXJjZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcclxuICAgICAgdGhpcy5nbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcbiAgICAgIGlmICghdGhpcy5nbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCB0aGlzLmdsLkNPTVBJTEVfU1RBVFVTKSkge1xyXG4gICAgICAgIERlYnVnLmxvZyh0aGlzLmdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBJbnRlcm5hbCBDbGFzcyB1c2VkIHRvIGRyYXcgZGVidWdJbmZvcm1hdGlvbnMgYWJvdXQgdGhlIHBoeXNpY3Mgc2ltdWxhdGlvbiBvbnRvIHRoZSByZW5kZXJDb250ZXh0LiBObyB1c2VyIGludGVyYWN0aW9uIG5lZWRlZC4gXHJcbiAgICogQGF1dGhvciBNYXJrbyBGZWhyZW5iYWNoLCBIRlUgMjAyMCAvL0Jhc2VkIG9uIE9pbW9QaHlzaWNzIEhheGUgRGVidWdEcmF3RGVtbyBcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUGh5c2ljc0RlYnVnRHJhdyBleHRlbmRzIFJlbmRlcldlYkdMIHtcclxuICAgIHB1YmxpYyBvaW1vRGVidWdEcmF3OiBPSU1PLkRlYnVnRHJhdzsgLy90aGUgb3JpZ2luYWwgcGh5c2ljcyBlbmdpbmUgZGVidWdEcmF3IGNsYXNzIHJlY2VpdmluZyBjYWxscyBmcm9tIHRoZSBvaW1vUGh5c2ljcy5Xb3JsZCwgYW5kIHByb3ZpZGluZyBpbmZvcm1hdGlvbnMgaW4gZm9ybSBvZiBwb2ludHMvbGluZXMvdHJpYW5nbGVzIHdoYXQgdGhlIHBoeXNpY3Mgd29ybGQgbG9va3MgbGlrZVxyXG4gICAgcHVibGljIHN0eWxlOiBPSU1PLkRlYnVnRHJhd1N0eWxlOyAvL2NvbG9ycyBvZiB0aGUgZGVidWcgaW5mb3JtYXRpb25zLCB1bmNoYW5nZWQgaW4gRlVER0UgaW50ZWdyYXRpb24sIGJhc2ljYWxseSBjb2xvcmluZyB0aGluZ3MgbGlrZSBzbGVlcGluZy9hY3RpdmUgcmIncyBkaWZmZXJlbnRseSwgam9pbnRzIHdoaXRlIGFuZCBzdWNoLiBObyBuZWVkIHRvIGhhdmUgdXNlcnMgY2hhbmdlIGFueXRoaW5nLlxyXG4gICAgcHVibGljIGdsOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0O1xyXG5cclxuICAgIHB1YmxpYyBwcm9ncmFtOiBXZWJHTFByb2dyYW07IC8vcHJvZ3JhbSB0aGF0IGlzIHVzZWQgaW4gdGhlIEZVREdFIHJlbmRlcmluZyBjb250ZXh0IGNvbnRhaW5pbmcgc2hhZGVycyBhbmQgdXNlIGluZm9ybWF0aW9ucyBmb3IgdGhlIGNvbnRleHQgdG8ga25vdyBob3cgdG8gZHJhd1xyXG4gICAgcHVibGljIHNoYWRlcjogUGh5c2ljc0RlYnVnU2hhZGVyO1xyXG5cclxuICAgIC8vQnVmZmVycyBmb3IgcG9pbnRzL2xpbmVzL3RyaWFuZ2xlcy4gSW5kZXggQnVmZmVyIGZvciB0aGUgYW1vdW50IG9mIGRyYXdDYWxscyBhbmQgVmVydGV4IEJ1ZmZlciBmb3IgdGhlIGluZm9ybWF0aW9uc1xyXG4gICAgcHVibGljIHBvaW50VkJPOiBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXI7XHJcbiAgICBwdWJsaWMgcG9pbnRJQk86IFBoeXNpY3NEZWJ1Z0luZGV4QnVmZmVyO1xyXG5cclxuICAgIHB1YmxpYyBsaW5lVkJPOiBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXI7XHJcbiAgICBwdWJsaWMgbGluZUlCTzogUGh5c2ljc0RlYnVnSW5kZXhCdWZmZXI7XHJcblxyXG4gICAgcHVibGljIHRyaVZCTzogUGh5c2ljc0RlYnVnVmVydGV4QnVmZmVyO1xyXG4gICAgcHVibGljIHRyaUlCTzogUGh5c2ljc0RlYnVnSW5kZXhCdWZmZXI7XHJcblxyXG4gICAgcHVibGljIHBvaW50RGF0YTogQXJyYXk8bnVtYmVyPjtcclxuICAgIHB1YmxpYyBwb2ludElib0RhdGE6IEFycmF5PG51bWJlcj47XHJcbiAgICBwdWJsaWMgbnVtUG9pbnREYXRhOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGxpbmVEYXRhOiBBcnJheTxudW1iZXI+O1xyXG4gICAgcHVibGljIGxpbmVJYm9EYXRhOiBBcnJheTxudW1iZXI+O1xyXG4gICAgcHVibGljIG51bUxpbmVEYXRhOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIHRyaURhdGE6IEFycmF5PG51bWJlcj47XHJcbiAgICBwdWJsaWMgdHJpSWJvRGF0YTogQXJyYXk8bnVtYmVyPjtcclxuICAgIHB1YmxpYyBudW1UcmlEYXRhOiBudW1iZXI7XHJcblxyXG4gICAgLyoqIENyZWF0aW5nIHRoZSBkZWJ1ZyBmb3IgcGh5c2ljcyBpbiBGVURHRS4gVGVsbCBpdCB0byBkcmF3IG9ubHkgd2lyZWZyYW1lIG9iamVjdHMsIHNpbmNlIEZVREdFIGlzIGhhbmRsaW5nIHJlbmRlcmluZyBvZiB0aGUgb2JqZWN0cyBiZXNpZGVzIHBoeXNpY3MuIFxyXG4gICAgICogT3ZlcnJpZGUgT2ltb1BoeXNpY3MgRnVuY3Rpb25zIHdpdGggb3duIHJlbmRlcmluZy4gSW5pdGlhbGl6ZSBidWZmZXJzIGFuZCBjb25uZWN0IHRoZW0gd2l0aCB0aGUgY29udGV4dCBmb3IgbGF0ZXIgdXNlLiAqL1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICB0aGlzLnN0eWxlID0gbmV3IE9JTU8uRGVidWdEcmF3U3R5bGUoKTtcclxuICAgICAgdGhpcy5vaW1vRGVidWdEcmF3ID0gbmV3IE9JTU8uRGVidWdEcmF3KCk7XHJcbiAgICAgIHRoaXMub2ltb0RlYnVnRHJhdy53aXJlZnJhbWUgPSB0cnVlOyAvL1RyaWFuZ2xlIFJlbmRlcmluZyBpcyBoYW5kbGVkIGJ5IEZVREdFIHNvLCBvbmx5IHRoZSBwaHlzaWNzIGxpbmVzL3BvaW50cyBuZWVkIHRvIGJlIHJlbmRlcmVkLCBhbHRob3VnaCB0cmlhbmdsZSBpcyBzdGlsbCBpbXBsZW1lbnRlZFxyXG5cclxuICAgICAgdGhpcy5nbCA9IFJlbmRlcldlYkdMLmNyYzM7XHJcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZU92ZXJyaWRlKCk7XHJcbiAgICAgIHRoaXMuc2hhZGVyID0gbmV3IFBoeXNpY3NEZWJ1Z1NoYWRlcih0aGlzLmdsKTtcclxuICAgICAgdGhpcy5zaGFkZXIuY29tcGlsZSh0aGlzLnZlcnRleFNoYWRlclNvdXJjZSgpLCB0aGlzLmZyYWdtZW50U2hhZGVyU291cmNlKCkpO1xyXG5cclxuICAgICAgdGhpcy5pbml0aWFsaXplQnVmZmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBSZWNlaXZlIHRoZSBjdXJyZW50IERlYnVnTW9kZSBmcm9tIHRoZSBwaHlzaWNzIHNldHRpbmdzIGFuZCBzZXQgdGhlIE9pbW9QaHlzaWNzLkRlYnVnRHJhdyBib29sZWFucyB0byBzaG93IG9ubHkgY2VydGFpbiBpbmZvcm1hdGlvbnMuXHJcbiAgICAgKiBOZWVkZWQgc2luY2Ugc29tZSBkZWJ1ZyBpbmZvcm1hdGlvbnMgZXhjbHVkZSBvdGhlcnMsIGFuZCBjYW4ndCBiZSBkcmF3biBhdCB0aGUgc2FtZSB0aW1lLCBieSBPaW1vUGh5c2ljcy4gQW5kIGZvciB1c2VycyBpdCBwcm92aWRlcyBtb3JlIHJlYWRhYmlsaXR5XHJcbiAgICAgKiB0byBkZWJ1ZyBvbmx5IHdoYXQgdGhleSBuZWVkIGFuZCBpcyBjb21tb25seSBkZWJ1Z2dlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldERlYnVnTW9kZShfbW9kZTogUEhZU0lDU19ERUJVR01PREUgPSBQSFlTSUNTX0RFQlVHTU9ERS5OT05FKTogdm9pZCB7XHJcbiAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxyXG4gICAgICBsZXQgZHJhdyA9IHsgZHJhd0FhYmJzOiBmYWxzZSwgZHJhd0Jhc2VzOiBmYWxzZSwgZHJhd0J2aDogZmFsc2UsIGRyYXdDb250YWN0QmFzZXM6IGZhbHNlLCBkcmF3Q29udGFjdHM6IGZhbHNlLCBkcmF3Sm9pbnRMaW1pdHM6IGZhbHNlLCBkcmF3Sm9pbnRzOiBmYWxzZSwgZHJhd1BhaXJzOiBmYWxzZSwgZHJhd1NoYXBlczogZmFsc2UgfTtcclxuXHJcbiAgICAgIHN3aXRjaCAoX21vZGUpIHtcclxuICAgICAgICBjYXNlIFBIWVNJQ1NfREVCVUdNT0RFLkNPTExJREVSUzogLy9Db2xsaWRlcnMgYW5kIEJhc2VzXHJcbiAgICAgICAgICBkcmF3LmRyYXdCYXNlcyA9IGRyYXcuZHJhd1NoYXBlcyA9IHRydWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFBIWVNJQ1NfREVCVUdNT0RFLkpPSU5UU19BTkRfQ09MTElERVI6IC8vQ29sbGlkZXJzIGFuZCBqb2ludHNcclxuICAgICAgICAgIGRyYXcuZHJhd0pvaW50cyA9IGRyYXcuZHJhd0pvaW50TGltaXRzID0gZHJhdy5kcmF3U2hhcGVzID0gdHJ1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgUEhZU0lDU19ERUJVR01PREUuUEhZU0lDX09CSkVDVFNfT05MWTogLy9QaHlzaWNzIE9iamVjdHMgb25seSwgc2hvd3Mgc2FtZSBhcyBDb2xsaWRlciAvIEpvaW50cyBidXQgYWxzbyBoaWRpbmcgZXZlcnkgb3RoZXIgZnVkZ2Ugb2JqZWN0XHJcbiAgICAgICAgICBkcmF3LmRyYXdCYXNlcyA9IGRyYXcuZHJhd0pvaW50TGltaXRzID0gZHJhdy5kcmF3Sm9pbnRzID0gZHJhdy5kcmF3U2hhcGVzID0gdHJ1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgUEhZU0lDU19ERUJVR01PREUuQ09OVEFDVFM6IC8vQ29udGFjdHNcclxuICAgICAgICAgIGRyYXcuZHJhd0Jhc2VzID0gZHJhdy5kcmF3Q29udGFjdEJhc2VzID0gZHJhdy5kcmF3Q29udGFjdHMgPSBkcmF3LmRyYXdQYWlycyA9IGRyYXcuZHJhd1NoYXBlcyA9IHRydWU7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFBIWVNJQ1NfREVCVUdNT0RFLkJPVU5ESU5HX0JPWEVTOiAvL0JvdW5kaW5nIEJveCAvIEJyb2FkcGhhc2UgQnZoIC8gQmFzZXNcclxuICAgICAgICAgIGRyYXcuZHJhd0FhYmJzID0gZHJhdy5kcmF3QmFzZXMgPSBkcmF3LmRyYXdCdmggPSB0cnVlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLm9pbW9EZWJ1Z0RyYXcsIGRyYXcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBDcmVhdGluZyB0aGUgZW1wdHkgcmVuZGVyIGJ1ZmZlcnMuIERlZmluaW5nIHRoZSBhdHRyaWJ1dGVzIHVzZWQgaW4gc2hhZGVycy5cclxuICAgICAqIE5lZWRzIHRvIGNyZWF0ZSBlbXB0eSBidWZmZXJzIHRvIGFscmVhZHkgaGF2ZSB0aGVtIHJlYWR5IHRvIGRyYXcgbGF0ZXIgb24sIGxpbmtpbmcgaXMgb25seSBwb3NzaWJsZSB3aXRoIGV4aXN0aW5nIGJ1ZmZlcnMuICovXHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZUJ1ZmZlcnMoKTogdm9pZCB7XHJcbiAgICAgIGxldCBhdHRyaWJzOiBBcnJheTxQaHlzaWNzRGVidWdWZXJ0ZXhBdHRyaWJ1dGU+ID0gW1xyXG4gICAgICAgIG5ldyBQaHlzaWNzRGVidWdWZXJ0ZXhBdHRyaWJ1dGUoMywgXCJhUG9zaXRpb25cIiksXHJcbiAgICAgICAgbmV3IFBoeXNpY3NEZWJ1Z1ZlcnRleEF0dHJpYnV0ZSgzLCBcImFOb3JtYWxcIiksXHJcbiAgICAgICAgbmV3IFBoeXNpY3NEZWJ1Z1ZlcnRleEF0dHJpYnV0ZSgzLCBcImFDb2xvclwiKVxyXG4gICAgICBdO1xyXG5cclxuICAgICAgdGhpcy5wb2ludFZCTyA9IG5ldyBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXIodGhpcy5nbCk7XHJcbiAgICAgIHRoaXMucG9pbnRJQk8gPSBuZXcgUGh5c2ljc0RlYnVnSW5kZXhCdWZmZXIodGhpcy5nbCk7XHJcbiAgICAgIHRoaXMucG9pbnRWQk8uc2V0QXR0cmlicyhhdHRyaWJzKTtcclxuICAgICAgdGhpcy5wb2ludFZCTy5sb2FkQXR0cmliSW5kaWNlcyh0aGlzLnNoYWRlcik7XHJcbiAgICAgIHRoaXMubGluZVZCTyA9IG5ldyBQaHlzaWNzRGVidWdWZXJ0ZXhCdWZmZXIodGhpcy5nbCk7XHJcbiAgICAgIHRoaXMubGluZUlCTyA9IG5ldyBQaHlzaWNzRGVidWdJbmRleEJ1ZmZlcih0aGlzLmdsKTtcclxuICAgICAgdGhpcy5saW5lVkJPLnNldEF0dHJpYnMoYXR0cmlicyk7XHJcbiAgICAgIHRoaXMubGluZVZCTy5sb2FkQXR0cmliSW5kaWNlcyh0aGlzLnNoYWRlcik7XHJcbiAgICAgIHRoaXMudHJpVkJPID0gbmV3IFBoeXNpY3NEZWJ1Z1ZlcnRleEJ1ZmZlcih0aGlzLmdsKTtcclxuICAgICAgdGhpcy50cmlJQk8gPSBuZXcgUGh5c2ljc0RlYnVnSW5kZXhCdWZmZXIodGhpcy5nbCk7XHJcbiAgICAgIHRoaXMudHJpVkJPLnNldEF0dHJpYnMoYXR0cmlicyk7XHJcbiAgICAgIHRoaXMudHJpVkJPLmxvYWRBdHRyaWJJbmRpY2VzKHRoaXMuc2hhZGVyKTtcclxuXHJcbiAgICAgIHRoaXMuY2xlYXJCdWZmZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEJlZm9yZSBPaW1vUGh5c2ljcy53b3JsZCBpcyBmaWxsaW5nIHRoZSBkZWJ1Zy4gTWFrZSBzdXJlIHRoZSBidWZmZXJzIGFyZSByZXNldC4gQWxzbyByZWNlaXZpbmcgdGhlIGRlYnVnTW9kZSBmcm9tIHNldHRpbmdzIGFuZCB1cGRhdGluZyB0aGUgY3VycmVudCBwcm9qZWN0aW9uIGZvciB0aGUgdmVydGV4U2hhZGVyLiAqL1xyXG4gICAgcHVibGljIGNsZWFyQnVmZmVycygpOiB2b2lkIHtcclxuICAgICAgdGhpcy5nbC5saW5lV2lkdGgoMi4wKTsgLy9Eb2VzIG5vdCBhZmZlY3QgYW55dGhpbmcgYmVjYXVzZSBsaW5lV2lkdGggaXMgY3VycmVudGx5IG9ubHkgc3VwcG9ydGVkIGJ5IE1pY3Jvc29mdCBFZGdlIGFuZCBGVURHRSBpcyBvcHRpbWl6ZWQgZm9yIENocm9tZVxyXG5cclxuICAgICAgdGhpcy5wb2ludERhdGEgPSBbXTsgLy9SZXNldHRpbmcgdGhlIGRhdGEgdG8gYmUgZmlsbGVkIGFnYWluXHJcbiAgICAgIHRoaXMubGluZURhdGEgPSBbXTtcclxuICAgICAgdGhpcy50cmlEYXRhID0gW107XHJcblxyXG4gICAgICB0aGlzLm51bVBvaW50RGF0YSA9IDA7IC8vUmVzZXR0aW5nIHRoZSBhbW91bnQgb2YgZGF0YSBjYWxsc1xyXG4gICAgICB0aGlzLm51bUxpbmVEYXRhID0gMDtcclxuICAgICAgdGhpcy5udW1UcmlEYXRhID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKiogQWZ0ZXIgT2ltb1BoeXNpY3Mud29ybGQgZmlsbGVkIHRoZSBkZWJ1Zy4gUmVuZGVyaW5nIGNhbGxzLiBTZXR0aW5nIHRoaXMgcHJvZ3JhbSB0byBiZSB1c2VkIGJ5IHRoZSBGVURHRSByZW5kZXJpbmcgY29udGV4dC4gQW5kIGRyYXcgZWFjaCB1cGRhdGVkIGJ1ZmZlciBhbmQgcmVzZXR0aW5nIHRoZW0uICovXHJcbiAgICBwdWJsaWMgZHJhd0J1ZmZlcnMoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuc2hhZGVyLnVzZSgpO1xyXG4gICAgICBsZXQgcHJvamVjdGlvbjogRmxvYXQzMkFycmF5ID0gUGh5c2ljcy5tYWluQ2FtLm10eFdvcmxkVG9WaWV3LmdldCgpO1xyXG4gICAgICB0aGlzLmdsLnVuaWZvcm1NYXRyaXg0ZnYodGhpcy5zaGFkZXIuZ2V0VW5pZm9ybUxvY2F0aW9uKFwidV9tdHhNZXNoVG9WaWV3XCIpLCBmYWxzZSwgcHJvamVjdGlvbik7XHJcblxyXG5cclxuICAgICAgaWYgKHRoaXMubnVtUG9pbnREYXRhID4gMCkge1xyXG4gICAgICAgIHRoaXMucG9pbnRJYm9EYXRhID0gW107ICAvL0J1ZmZlciBzaXplIG1hdGNoaW5nIHRvIHdoYXRzIG5lZWRlZFxyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm51bVBvaW50RGF0YTsgaSsrKSB7XHJcbiAgICAgICAgICB0aGlzLnBvaW50SWJvRGF0YS5wdXNoKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBvaW50SUJPLnNldERhdGEodGhpcy5wb2ludElib0RhdGEpOyAvL1NldCBJbmRleCBidWZmZXIgdG8gY29ycmVjdCBzaXplXHJcbiAgICAgICAgdGhpcy5wb2ludFZCTy5zZXREYXRhKHRoaXMucG9pbnREYXRhKTsgLy9TZXQgVmVydGV4IEJ1ZmZlciB0byBjdXJyZW50IERhdGFcclxuICAgICAgICB0aGlzLnBvaW50VkJPLmJpbmRBdHRyaWJzKCk7XHJcbiAgICAgICAgdGhpcy5wb2ludElCTy5kcmF3KHRoaXMuZ2wuUE9JTlRTLCB0aGlzLm51bVBvaW50RGF0YSk7IC8vVGhlIGFjdHVhbCBkcmF3IGNhbGwgZm9yIGVhY2ggaW5kZXggaW4gaWJvXHJcbiAgICAgICAgdGhpcy5udW1Qb2ludERhdGEgPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLm51bUxpbmVEYXRhID4gMCkge1xyXG4gICAgICAgIHRoaXMubGluZUlib0RhdGEgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5udW1MaW5lRGF0YTsgaSsrKSB7XHJcbiAgICAgICAgICB0aGlzLmxpbmVJYm9EYXRhLnB1c2goaSAqIDIpO1xyXG4gICAgICAgICAgdGhpcy5saW5lSWJvRGF0YS5wdXNoKGkgKiAyICsgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGluZUlCTy5zZXREYXRhKHRoaXMubGluZUlib0RhdGEpO1xyXG4gICAgICAgIHRoaXMubGluZVZCTy5zZXREYXRhKHRoaXMubGluZURhdGEpO1xyXG4gICAgICAgIHRoaXMubGluZVZCTy5iaW5kQXR0cmlicygpO1xyXG4gICAgICAgIHRoaXMubGluZUlCTy5kcmF3KHRoaXMuZ2wuTElORVMsIHRoaXMubnVtTGluZURhdGEgKiAyKTtcclxuICAgICAgICB0aGlzLm51bUxpbmVEYXRhID0gMDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5udW1UcmlEYXRhID4gMCkge1xyXG4gICAgICAgIHRoaXMudHJpSWJvRGF0YSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB0aGlzLm51bVRyaURhdGE7IGkrKykge1xyXG4gICAgICAgICAgdGhpcy50cmlJYm9EYXRhLnB1c2goaSAqIDMpO1xyXG4gICAgICAgICAgdGhpcy50cmlJYm9EYXRhLnB1c2goaSAqIDMgKyAxKTtcclxuICAgICAgICAgIHRoaXMudHJpSWJvRGF0YS5wdXNoKGkgKiAzICsgMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJpSUJPLnNldERhdGEodGhpcy50cmlJYm9EYXRhKTtcclxuICAgICAgICB0aGlzLnRyaVZCTy5zZXREYXRhKHRoaXMudHJpRGF0YSk7XHJcbiAgICAgICAgdGhpcy50cmlWQk8uYmluZEF0dHJpYnMoKTtcclxuICAgICAgICB0aGlzLnRyaUlCTy5kcmF3KHRoaXMuZ2wuVFJJQU5HTEVTLCB0aGlzLm51bVRyaURhdGEgKiAzKTtcclxuICAgICAgICB0aGlzLm51bVRyaURhdGEgPSAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIERyYXdpbmcgdGhlIHJheSBpbnRvIHRoZSBkZWJ1Z0RyYXcgQ2FsbC4gQnkgdXNpbmcgdGhlIG92ZXJ3cml0dGVuIGxpbmUgcmVuZGVyaW5nIGZ1bmN0aW9ucyBhbmQgZHJhd2luZyBhIHBvaW50IChwb2ludFNpemUgZGVmaW5lZCBpbiB0aGUgc2hhZGVyKSBhdCB0aGUgZW5kIG9mIHRoZSByYXkuICovXHJcbiAgICBwdWJsaWMgZGVidWdSYXkoX29yaWdpbjogVmVjdG9yMywgX2VuZDogVmVjdG9yMywgX2NvbG9yOiBDb2xvcik6IHZvaWQge1xyXG4gICAgICB0aGlzLm9pbW9EZWJ1Z0RyYXcubGluZShuZXcgT0lNTy5WZWMzKF9vcmlnaW4ueCwgX29yaWdpbi55LCBfb3JpZ2luLnopLCBuZXcgT0lNTy5WZWMzKF9lbmQueCwgX2VuZC55LCBfZW5kLnopLCBuZXcgT0lNTy5WZWMzKF9jb2xvci5yLCBfY29sb3IuZywgX2NvbG9yLmIpKTtcclxuICAgICAgdGhpcy5vaW1vRGVidWdEcmF3LnBvaW50KG5ldyBPSU1PLlZlYzMoX2VuZC54LCBfZW5kLnksIF9lbmQueiksIG5ldyBPSU1PLlZlYzMoX2NvbG9yLnIsIF9jb2xvci5nLCBfY29sb3IuYikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBPdmVycmlkaW5nIHRoZSBleGlzdGluZyBmdW5jdGlvbnMgZnJvbSBPaW1vUGh5c2ljcy5EZWJ1Z0RyYXcgd2l0aG91dCBhY3R1YWxseSBpbmhlcml0IGZyb20gdGhlIGNsYXNzLCB0byBhdm9pZCBjb21waWxlciBwcm9ibGVtcy4gXHJcbiAgICAgKiBPdmVycmlkaW5nIHRoZW0gdG8gcmVjZWl2ZSBkZWJ1Z0luZm9ybWF0aW9ucyBpbiB0aGUgZm9ybWF0IHRoZSBwaHlzaWMgZW5naW5lIHByb3ZpZGVzIHRoZW0gYnV0IGhhbmRsaW5nIHRoZSByZW5kZXJpbmcgaW4gdGhlIGZ1ZGdlIGNvbnRleHQuICovXHJcbiAgICBwcml2YXRlIGluaXRpYWxpemVPdmVycmlkZSgpOiB2b2lkIHtcclxuICAgICAgLy9PdmVycmlkZSBwb2ludC9saW5lL3RyaWFuZ2xlIGZ1bmN0aW9ucyBvZiBPaW1vUGh5c2ljcyB3aGljaCBhcmUgdXNlZCB0byBkcmF3IHdpcmVmcmFtZXMgb2Ygb2JqZWN0cywgbGluZXMgb2YgcmF5Y2FzdHMgb3IgdHJpYW5nbGVzIHdoZW4gdGhlIG9iamVjdHMgYXJlIHJlbmRlcmVkIGJ5IHRoZSBwaHlzaWNzIG5vdCBGVURHRSAodW51c2VkKVxyXG5cclxuICAgICAgT0lNTy5EZWJ1Z0RyYXcucHJvdG90eXBlLnBvaW50ID0gZnVuY3Rpb24gKF92OiBPSU1PLlZlYzMsIF9jb2xvcjogT0lNTy5WZWMzKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGRlYnVnV3JhcHBlcjogUGh5c2ljc0RlYnVnRHJhdyA9IFBoeXNpY3MuZGVidWdEcmF3OyAvL0dldCB0aGUgY3VzdG9tIHBoeXNpY3MgZGVidWcgY2xhc3MgdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGRhdGEuXHJcbiAgICAgICAgaWYgKFBoeXNpY3MubWFpbkNhbSAhPSBudWxsKSB7IC8vb25seSBhY3Qgd2hlbiB0aGVyZSBpcyBhIGNhbWVyYSB0aGF0IGlzIHJlbmRlcmluZ1xyXG4gICAgICAgICAgbGV0IGRhdGE6IEFycmF5PE51bWJlcj4gPSBkZWJ1Z1dyYXBwZXIucG9pbnREYXRhOyAvL2dldCB0aGUgYWxyZWFkeSB3cml0dGVuIGJ1ZmZlciBpbmZvcm1hdGlvbnNcclxuICAgICAgICAgIGRhdGEucHVzaChfdi54LCBfdi55LCBfdi56KTsgLy9Db29yZGluYXRlcyBvZiB0aGUgcG9pbnRcclxuICAgICAgICAgIGRhdGEucHVzaCgwLCAwLCAwKTsgLy9Qb2ludCBOb3JtYWxzIC0gRW1wdHkgc2luY2UgaXQncyBub3QgYSBwb2x5Z29uXHJcbiAgICAgICAgICBkYXRhLnB1c2goX2NvbG9yLngsIF9jb2xvci55LCBfY29sb3Iueik7IC8vQ29sb3Igb2YgdGhlIHBvaW50XHJcbiAgICAgICAgICBkZWJ1Z1dyYXBwZXIubnVtUG9pbnREYXRhKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgT0lNTy5EZWJ1Z0RyYXcucHJvdG90eXBlLmxpbmUgPSBmdW5jdGlvbiAoX3YxOiBPSU1PLlZlYzMsIF92MjogT0lNTy5WZWMzLCBfY29sb3I6IE9JTU8uVmVjMyk6IHZvaWQge1xyXG4gICAgICAgIGxldCBkZWJ1Z1dyYXBwZXI6IFBoeXNpY3NEZWJ1Z0RyYXcgPSBQaHlzaWNzLmRlYnVnRHJhdztcclxuICAgICAgICBpZiAoUGh5c2ljcy5tYWluQ2FtICE9IG51bGwpIHtcclxuICAgICAgICAgIGxldCBkYXRhOiBBcnJheTxudW1iZXI+ID0gZGVidWdXcmFwcGVyLmxpbmVEYXRhO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF92MS54LCBfdjEueSwgX3YxLnopOyAvL1BvaW50IDEgQ29vcmRpbmF0ZXNcclxuICAgICAgICAgIGRhdGEucHVzaCgwLCAwLCAwKTsgLy9QMSBOb3JtYWxzIC0gRW1wdHkgc2luY2UgaXQncyBub3QgYSBwb2x5Z29uXHJcbiAgICAgICAgICBkYXRhLnB1c2goX2NvbG9yLngsIF9jb2xvci55LCBfY29sb3Iueik7IC8vUDEgQ29sb3JcclxuICAgICAgICAgIGRhdGEucHVzaChfdjIueCwgX3YyLnksIF92Mi56KTsgLy9Qb2ludCAyIENvb3JkaW5hdGVzXHJcbiAgICAgICAgICBkYXRhLnB1c2goMCwgMCwgMCk7XHJcbiAgICAgICAgICBkYXRhLnB1c2goX2NvbG9yLngsIF9jb2xvci55LCBfY29sb3Iueik7XHJcbiAgICAgICAgICBkZWJ1Z1dyYXBwZXIubnVtTGluZURhdGErKztcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBPSU1PLkRlYnVnRHJhdy5wcm90b3R5cGUudHJpYW5nbGUgPSBmdW5jdGlvbiAoX3YxOiBPSU1PLlZlYzMsIF92MjogT0lNTy5WZWMzLCBfdjM6IE9JTU8uVmVjMywgX24xOiBPSU1PLlZlYzMsIF9uMjogT0lNTy5WZWMzLCBfbjM6IE9JTU8uVmVjMywgX2NvbG9yOiBPSU1PLlZlYzMpOiB2b2lkIHtcclxuICAgICAgICBsZXQgZGVidWdXcmFwcGVyOiBQaHlzaWNzRGVidWdEcmF3ID0gUGh5c2ljcy5kZWJ1Z0RyYXc7XHJcbiAgICAgICAgaWYgKFBoeXNpY3MubWFpbkNhbSAhPSBudWxsKSB7XHJcbiAgICAgICAgICBsZXQgZGF0YTogQXJyYXk8bnVtYmVyPiA9IGRlYnVnV3JhcHBlci50cmlEYXRhO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF92MS54LCBfdjEueSwgX3YxLnopO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF9uMS54LCBfbjEueSwgX24xLnopO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF9jb2xvci54LCBfY29sb3IueSwgX2NvbG9yLnopO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF92Mi54LCBfdjIueSwgX3YyLnopO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF9uMi54LCBfbjIueSwgX24yLnopO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF9jb2xvci54LCBfY29sb3IueSwgX2NvbG9yLnopO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF92My54LCBfdjMueSwgX3YzLnopO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF9uMy54LCBfbjMueSwgX24zLnopO1xyXG4gICAgICAgICAgZGF0YS5wdXNoKF9jb2xvci54LCBfY29sb3IueSwgX2NvbG9yLnopO1xyXG4gICAgICAgICAgZGVidWdXcmFwcGVyLm51bVRyaURhdGErKztcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBzb3VyY2UgY29kZSAoc3RyaW5nKSBvZiB0aGUgaW4gcGh5c2ljc0RlYnVnIHVzZWQgdmVyeSBzaW1wbGUgdmVydGV4U2hhZGVyLlxyXG4gICAgICogIEhhbmRsaW5nIHRoZSBwcm9qZWN0aW9uICh3aGljaCBpbmNsdWRlcywgdmlldy93b3JsZFtpcyBhbHdheXMgaWRlbnRpdHkgaW4gdGhpcyBjYXNlXS9wcm9qZWN0aW9uIGluIEZVREdFKS4gSW5jcmVhc2luZyB0aGUgc2l6ZSBvZiBzaW5nbGUgcG9pbnRzIGRyYXduLlxyXG4gICAgICogIEFuZCB0cmFuc2ZlciBwb3NpdGlvbiBjb2xvciB0byB0aGUgZnJhZ21lbnRTaGFkZXIuICovXHJcbiAgICBwcml2YXRlIHZlcnRleFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gYFxyXG5cdFx0XHRwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxuXHRcdFx0YXR0cmlidXRlIHZlYzMgYVBvc2l0aW9uO1xyXG5cdFx0XHRhdHRyaWJ1dGUgdmVjMyBhQ29sb3I7XHJcblx0XHRcdGF0dHJpYnV0ZSB2ZWMzIGFOb3JtYWw7XHJcblx0XHRcdHZhcnlpbmcgdmVjMyB2UG9zaXRpb247XHJcblx0XHRcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xyXG5cdFx0XHR2YXJ5aW5nIHZlYzMgdkNvbG9yO1xyXG5cdFx0XHR1bmlmb3JtIG1hdDQgdV9tdHhNZXNoVG9WaWV3O1xyXG5cclxuXHRcdFx0dm9pZCBtYWluKCkge1xyXG5cdFx0XHRcdHZQb3NpdGlvbiA9IGFQb3NpdGlvbjtcclxuXHRcdFx0XHR2Q29sb3IgPSBhQ29sb3I7XHJcblx0XHRcdFx0dk5vcm1hbCA9IGFOb3JtYWw7XHJcblx0XHRcdFx0Z2xfUG9zaXRpb24gPSB1X210eE1lc2hUb1ZpZXcgKiB2ZWM0KGFQb3NpdGlvbiwxLjApO1xyXG5cdFx0XHRcdGdsX1BvaW50U2l6ZSA9IDYuMDtcclxuXHRcdFx0fWA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFRoZSBzb3VyY2UgY29kZSAoc3RyaW5nKSBvZiB0aGUgaW4gcGh5c2ljc0RlYnVnIHVzZWQgc3VwZXIgc2ltcGxlIGZyYWdtZW50U2hhZGVyLiBVbmxpdCAtIG9ubHkgY29sb3JpemluZyB0aGUgZHJhd24gcGl4ZWxzLCBub3JtYWxzL3Bvc2l0aW9uIGFyZSBnaXZlbiB0byBtYWtlIGl0IGV4cGFuZGFibGUgKi9cclxuICAgIHByaXZhdGUgZnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIGBcclxuICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XHJcblx0XHRcdHZhcnlpbmcgdmVjMyB2UG9zaXRpb247XHJcblx0XHRcdHZhcnlpbmcgdmVjMyB2Tm9ybWFsO1xyXG5cdFx0XHR2YXJ5aW5nIHZlYzMgdkNvbG9yO1xyXG5cclxuXHRcdFx0dm9pZCBtYWluKCkge1xyXG5cdFx0XHRcdGdsX0ZyYWdDb2xvciA9IHZlYzQodkNvbG9yLCAxLjApO1xyXG5cdFx0XHR9YDtcclxuICAgIH1cclxuICB9XHJcblxyXG59IiwiXHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIEEgcGh5c2ljYWwgY29ubmVjdGlvbiBiZXR3ZWVuIHR3byBib2RpZXMgd2l0aCBhIGRlZmluZWQgYXhlIG9mIHRyYW5zbGF0aW9uIGFuZCByb3RhdGlvbi4gVHdvIERlZ3JlZXMgb2YgRnJlZWRvbSBpbiB0aGUgZGVmaW5lZCBheGlzLlxyXG4gICAqIFR3byBSaWdpZEJvZGllcyBuZWVkIHRvIGJlIGRlZmluZWQgdG8gdXNlIGl0LiBBIG1vdG9yIGNhbiBiZSBkZWZpbmVkIGZvciByb3RhdGlvbiBhbmQgdHJhbnNsYXRpb24sIGFsb25nIHdpdGggc3ByaW5nIHNldHRpbmdzLlxyXG4gICAqIFxyXG4gICAqIGBgYHBsYWludGV4dFxyXG4gICAqICAgICAgICAgIEpvaW50SG9sZGVyIC0gYm9keUFuY2hvclxyXG4gICAqICAgICAgICAgICAgICAgICAgICDilIzilIDilIDilIDilJBcclxuICAgKiAgICAgICAgICAgICAgICAgICAg4pSCICAg4pSCXHJcbiAgICogICAgICAgICAgIDzilIDilIDilIDilIDilIDilIDilIDilIDilIIgICDilILilIDilIDilIDilIDilIDilIA+IHRpZWQgYm9keSwgc2xpZGluZyBvbiBheGlzID0gMXN0IGRlZ3JlZSBvZiBmcmVlZG9tXHJcbiAgICogICAgICAgICAgICAgICAgICAgIOKUgiAgIOKUgiAgICAgICAgcm90YXRpbmcgYXJvdW5kIGF4aXMgPSAybmQgZGVncmVlIG9mIGZyZWVkb20gXHJcbiAgICogICAgICAgICAgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUmFxyXG4gICAqIGBgYCAgXHJcbiAgICogQGF1dGhvciBNYXJrbyBGZWhyZW5iYWNoLCBIRlUsIDIwMjAgfCBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBKb2ludEN5bGluZHJpY2FsIGV4dGVuZHMgSm9pbnRBeGlhbCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gSm9pbnQucmVnaXN0ZXJTdWJjbGFzcyhKb2ludEN5bGluZHJpY2FsKTtcclxuICAgICNzcHJpbmdEYW1waW5nUm90YXRpb246IG51bWJlciA9IDA7XHJcbiAgICAjc3ByaW5nRnJlcXVlbmN5Um90YXRpb246IG51bWJlciA9IDA7XHJcblxyXG4gICAgI21vdG9yRm9yY2U6IG51bWJlciA9IDA7XHJcblxyXG4gICAgI21heFJvdG9yOiBudW1iZXIgPSAzNjA7XHJcbiAgICAjbWluUm90b3I6IG51bWJlciA9IDA7XHJcbiAgICAjcm90b3JUb3JxdWU6IG51bWJlciA9IDA7XHJcbiAgICAjcm90b3JTcGVlZDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAjcm90b3I6IE9JTU8uUm90YXRpb25hbExpbWl0TW90b3I7XHJcbiAgICAjcm90b3JTcHJpbmdEYW1wZXI6IE9JTU8uU3ByaW5nRGFtcGVyO1xyXG5cclxuICAgIHByb3RlY3RlZCBqb2ludDogT0lNTy5DeWxpbmRyaWNhbEpvaW50O1xyXG4gICAgcHJvdGVjdGVkIGNvbmZpZzogT0lNTy5DeWxpbmRyaWNhbEpvaW50Q29uZmlnID0gbmV3IE9JTU8uQ3lsaW5kcmljYWxKb2ludENvbmZpZygpO1xyXG4gICAgcHJvdGVjdGVkIG1vdG9yOiBPSU1PLlRyYW5zbGF0aW9uYWxMaW1pdE1vdG9yO1xyXG5cclxuXHJcbiAgICAvKiogQ3JlYXRpbmcgYSBjeWxpbmRyaWNhbCBqb2ludCBiZXR3ZWVuIHR3byBDb21wb25lbnRSaWdpZGJvZGllcyBtb3Zpbmcgb24gb25lIGF4aXMgYW5kIHJvdGF0aW5nIGFyb3VuZCBhbm90aGVyIGJvdW5kIG9uIGEgbG9jYWwgYW5jaG9ycG9pbnQuICovXHJcbiAgICBjb25zdHJ1Y3RvcihfYm9keUFuY2hvcjogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2JvZHlUaWVkOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYXhpczogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDEsIDApLCBfbG9jYWxBbmNob3I6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAwLCAwKSkge1xyXG4gICAgICBzdXBlcihfYm9keUFuY2hvciwgX2JvZHlUaWVkLCBfYXhpcywgX2xvY2FsQW5jaG9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gR2V0L1NldCB0cmFuc2ZvciBvZiBmdWRnZSBwcm9wZXJ0aWVzIHRvIHRoZSBwaHlzaWNzIGVuZ2luZVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGRhbXBpbmcgb2YgdGhlIHNwcmluZy4gMSBlcXVhbHMgY29tcGxldGx5IGRhbXBlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBzcHJpbmdEYW1waW5nKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHN1cGVyLnNwcmluZ0RhbXBpbmcgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0VHJhbnNsYXRpb25hbFNwcmluZ0RhbXBlcigpLmRhbXBpbmdSYXRpbyA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmcmVxdWVuY3kgb2YgdGhlIHNwcmluZyBpbiBIei4gQXQgMCB0aGUgc3ByaW5nIGlzIHJpZ2lkLCBlcXVhbHMgbm8gc3ByaW5nLiBUaGUgc21hbGxlciB0aGUgdmFsdWUgdGhlIGxlc3MgcmVzdHJpY3RpdmUgaXMgdGhlIHNwcmluZy5cclxuICAgICovXHJcbiAgICBwdWJsaWMgc2V0IHNwcmluZ0ZyZXF1ZW5jeShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBzdXBlci5zcHJpbmdGcmVxdWVuY3kgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0VHJhbnNsYXRpb25hbFNwcmluZ0RhbXBlcigpLmZyZXF1ZW5jeSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogVGhlIGRhbXBpbmcgb2YgdGhlIHNwcmluZy4gMSBlcXVhbHMgY29tcGxldGx5IGRhbXBlZC4gSW5mbHVlbmNpbmcgVE9SUVVFIC8gUk9UQVRJT05cclxuICAgICovXHJcbiAgICBnZXQgc3ByaW5nRGFtcGluZ1JvdGF0aW9uKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdEYW1waW5nUm90YXRpb247XHJcbiAgICB9XHJcbiAgICBzZXQgc3ByaW5nRGFtcGluZ1JvdGF0aW9uKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0RhbXBpbmdSb3RhdGlvbiA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRSb3RhdGlvbmFsU3ByaW5nRGFtcGVyKCkuZGFtcGluZ1JhdGlvID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZyZXF1ZW5jeSBvZiB0aGUgc3ByaW5nIGluIEh6LiBBdCAwIHRoZSBzcHJpbmcgaXMgcmlnaWQsIGVxdWFscyBubyBzcHJpbmcuIEluZmx1ZW5jaW5nIFRPUlFVRSAvIFJPVEFUSU9OXHJcbiAgICAqL1xyXG4gICAgZ2V0IHNwcmluZ0ZyZXF1ZW5jeVJvdGF0aW9uKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdGcmVxdWVuY3lSb3RhdGlvbjtcclxuICAgIH1cclxuICAgIHNldCBzcHJpbmdGcmVxdWVuY3lSb3RhdGlvbihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdGcmVxdWVuY3lSb3RhdGlvbiA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRSb3RhdGlvbmFsU3ByaW5nRGFtcGVyKCkuZnJlcXVlbmN5ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgVXBwZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC4gQXhpcy1BbmdsZSBtZWFzdXJlZCBpbiBEZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIGdldCBtYXhSb3RvcigpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbWF4Um90b3I7XHJcbiAgICB9XHJcbiAgICBzZXQgbWF4Um90b3IoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jbWF4Um90b3IgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0Um90YXRpb25hbExpbWl0TW90b3IoKS51cHBlckxpbWl0ID0gX3ZhbHVlICogQ2FsYy5kZWcycmFkO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIExvd2VyIExpbWl0IG9mIG1vdmVtZW50IGFsb25nIHRoZSBheGlzIG9mIHRoaXMgam9pbnQuIFRoZSBsaW1pdGVyIGlzIGRpc2FibGUgaWYgbG93ZXJMaW1pdCA+IHVwcGVyTGltaXQuIEF4aXMgQW5nbGUgbWVhc3VyZWQgaW4gRGVncmVlLlxyXG4gICAgICovXHJcbiAgICBnZXQgbWluUm90b3IoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21pblJvdG9yO1xyXG4gICAgfVxyXG4gICAgc2V0IG1pblJvdG9yKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21pblJvdG9yID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFJvdGF0aW9uYWxMaW1pdE1vdG9yKCkubG93ZXJMaW1pdCA9IF92YWx1ZSAqIENhbGMuZGVnMnJhZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSB0YXJnZXQgcm90YXRpb25hbCBzcGVlZCBvZiB0aGUgbW90b3IgaW4gbS9zLiBcclxuICAgICAqL1xyXG4gICAgZ2V0IHJvdG9yU3BlZWQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3JvdG9yU3BlZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgcm90b3JTcGVlZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNyb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFJvdGF0aW9uYWxMaW1pdE1vdG9yKCkubW90b3JTcGVlZCA9IF92YWx1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBtYXhpbXVtIG1vdG9yIHRvcnF1ZSBpbiBOZXd0b24uIGZvcmNlIDw9IDAgZXF1YWxzIGRpc2FibGVkLiBcclxuICAgICAqL1xyXG4gICAgZ2V0IHJvdG9yVG9ycXVlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNyb3RvclRvcnF1ZTtcclxuICAgIH1cclxuICAgIHNldCByb3RvclRvcnF1ZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNyb3RvclRvcnF1ZSA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRSb3RhdGlvbmFsTGltaXRNb3RvcigpLm1vdG9yVG9ycXVlID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBVcHBlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBtYXhNb3RvcihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBzdXBlci5tYXhNb3RvciA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbClcclxuICAgICAgICB0aGlzLmpvaW50LmdldFRyYW5zbGF0aW9uYWxMaW1pdE1vdG9yKCkudXBwZXJMaW1pdCA9IF92YWx1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBMb3dlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBtaW5Nb3RvcihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBzdXBlci5taW5Nb3RvciA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbClcclxuICAgICAgICB0aGlzLmpvaW50LmdldFRyYW5zbGF0aW9uYWxMaW1pdE1vdG9yKCkubG93ZXJMaW1pdCA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IG1vdG9yU3BlZWQoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgc3VwZXIubW90b3JTcGVlZCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbClcclxuICAgICAgICB0aGlzLmpvaW50LmdldFRyYW5zbGF0aW9uYWxMaW1pdE1vdG9yKCkubW90b3JTcGVlZCA9IF92YWx1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBtYXhpbXVtIG1vdG9yIGZvcmNlIGluIE5ld3Rvbi4gZm9yY2UgPD0gMCBlcXVhbHMgZGlzYWJsZWQuIFxyXG4gICAgICovXHJcbiAgICBnZXQgbW90b3JGb3JjZSgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbW90b3JGb3JjZTtcclxuICAgIH1cclxuICAgIHNldCBtb3RvckZvcmNlKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21vdG9yRm9yY2UgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0VHJhbnNsYXRpb25hbExpbWl0TW90b3IoKS5tb3RvckZvcmNlID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBTYXZpbmcvTG9hZGluZ1xyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB0aGlzLiNnZXRNdXRhdG9yKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy4jbXV0YXRlKF9zZXJpYWxpemF0aW9uKTtcclxuICAgICAgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbXV0YXRlKF9tdXRhdG9yOiBNdXRhdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfbXV0YXRvcik7XHJcbiAgICAgIHRoaXMuZGVsZXRlRnJvbU11dGF0b3IoX211dGF0b3IsIHRoaXMuI2dldE11dGF0b3IoKSk7XHJcbiAgICAgIHN1cGVyLm11dGF0ZShfbXV0YXRvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcigpO1xyXG4gICAgICBPYmplY3QuYXNzaWduKG11dGF0b3IsIHRoaXMuI2dldE11dGF0b3IoKSk7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgICNnZXRNdXRhdG9yID0gKCk6IE11dGF0b3IgPT4ge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHtcclxuICAgICAgICBtb3RvckZvcmNlOiB0aGlzLm1vdG9yRm9yY2UsXHJcbiAgICAgICAgc3ByaW5nRGFtcGluZ1JvdGF0aW9uOiB0aGlzLnNwcmluZ0RhbXBpbmdSb3RhdGlvbixcclxuICAgICAgICBzcHJpbmdGcmVxdWVuY3lSb3RhdGlvbjogdGhpcy5zcHJpbmdGcmVxdWVuY3lSb3RhdGlvbixcclxuICAgICAgICBtYXhSb3RvcjogdGhpcy5tYXhSb3RvcixcclxuICAgICAgICBtaW5Sb3RvcjogdGhpcy5taW5Sb3RvcixcclxuICAgICAgICByb3RvclRvcnF1ZTogdGhpcy5yb3RvclRvcnF1ZSxcclxuICAgICAgICByb3RvclNwZWVkOiB0aGlzLnJvdG9yU3BlZWRcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgI211dGF0ZSA9IChfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgPT4ge1xyXG4gICAgICB0aGlzLm11dGF0ZUJhc2UoX211dGF0b3IsIFtcIm1vdG9yRm9yY2VcIiwgXCJyb3RvclRvcnF1ZVwiLCBcInJvdG9yU3BlZWRcIiwgXCJtYXhSb3RvclwiLCBcIm1pblJvdG9yXCIsIFwic3ByaW5nRGFtcGluZ1JvdGF0aW9uXCIsIFwic3ByaW5nRnJlcXVlbmN5Um90YXRpb25cIiwgXCJzcHJpbmdGcmVxdWVuY3lcIl0pO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNyb3RvclNwcmluZ0RhbXBlciA9IG5ldyBPSU1PLlNwcmluZ0RhbXBlcigpLnNldFNwcmluZyh0aGlzLnNwcmluZ0ZyZXF1ZW5jeVJvdGF0aW9uLCB0aGlzLnNwcmluZ0RhbXBpbmdSb3RhdGlvbik7XHJcblxyXG4gICAgICB0aGlzLm1vdG9yID0gbmV3IE9JTU8uVHJhbnNsYXRpb25hbExpbWl0TW90b3IoKS5zZXRMaW1pdHMoc3VwZXIubWluTW90b3IsIHN1cGVyLm1heE1vdG9yKTtcclxuICAgICAgdGhpcy5tb3Rvci5zZXRNb3RvcihzdXBlci5tb3RvclNwZWVkLCB0aGlzLm1vdG9yRm9yY2UpO1xyXG4gICAgICB0aGlzLiNyb3RvciA9IG5ldyBPSU1PLlJvdGF0aW9uYWxMaW1pdE1vdG9yKCkuc2V0TGltaXRzKHRoaXMubWluUm90b3IgKiBDYWxjLmRlZzJyYWQsIHRoaXMubWF4Um90b3IgKiBDYWxjLmRlZzJyYWQpO1xyXG4gICAgICB0aGlzLiNyb3Rvci5zZXRNb3Rvcih0aGlzLnJvdG9yU3BlZWQsIHRoaXMucm90b3JUb3JxdWUpO1xyXG5cclxuICAgICAgdGhpcy5jb25maWcgPSBuZXcgT0lNTy5DeWxpbmRyaWNhbEpvaW50Q29uZmlnKCk7XHJcbiAgICAgIHN1cGVyLmNvbnN0cnVjdEpvaW50KCk7XHJcblxyXG4gICAgICB0aGlzLmNvbmZpZy50cmFuc2xhdGlvbmFsU3ByaW5nRGFtcGVyID0gdGhpcy5zcHJpbmdEYW1wZXI7XHJcbiAgICAgIHRoaXMuY29uZmlnLnRyYW5zbGF0aW9uYWxMaW1pdE1vdG9yID0gdGhpcy5tb3RvcjtcclxuICAgICAgdGhpcy5jb25maWcucm90YXRpb25hbExpbWl0TW90b3IgPSB0aGlzLiNyb3RvcjtcclxuICAgICAgdGhpcy5jb25maWcucm90YXRpb25hbFNwcmluZ0RhbXBlciA9IHRoaXMuI3JvdG9yU3ByaW5nRGFtcGVyO1xyXG5cclxuICAgICAgdGhpcy5qb2ludCA9IG5ldyBPSU1PLkN5bGluZHJpY2FsSm9pbnQodGhpcy5jb25maWcpO1xyXG4gICAgICB0aGlzLmNvbmZpZ3VyZUpvaW50KCk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICAgKiBBIHBoeXNpY2FsIGNvbm5lY3Rpb24gYmV0d2VlbiB0d28gYm9kaWVzIHdpdGggYSBkZWZpbmVkIGF4ZSBtb3ZlbWVudC5cclxuICAgICAqIFVzZWQgdG8gY3JlYXRlIGEgc2xpZGluZyBqb2ludCBhbG9uZyBvbmUgYXhpcy4gVHdvIFJpZ2lkQm9kaWVzIG5lZWQgdG8gYmUgZGVmaW5lZCB0byB1c2UgaXQuXHJcbiAgICAgKiBBIG1vdG9yIGNhbiBiZSBkZWZpbmVkIHRvIG1vdmUgdGhlIGNvbm5lY3RlZCBhbG9uZyB0aGUgZGVmaW5lZCBheGlzLiBHcmVhdCB0byBjb25zdHJ1Y3Qgc3RhbmRhcmQgc3ByaW5ncyBvciBwaHlzaWNhbCBzbGlkZXJzLlxyXG4gICAgICogXHJcbiAgICAgKiBgYGBwbGFpbnRleHRcclxuICAgICAqICAgICAgICAgIEpvaW50SG9sZGVyIC0gYm9keUFuY2hvclxyXG4gICAgICogICAgICAgICAgICAgICAgICAgIOKUjOKUgOKUgOKUgOKUkFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgIOKUgiAgIOKUglxyXG4gICAgICogICAgICAgICAgIDzilIDilIDilIDilIDilIDilIDilIDilIDilIIgICDilILilIDilIDilIDilIDilIDilIA+IHRpZWQgYm9keSwgc2xpZGluZyBvbiBvbmUgQXhpcywgMSBEZWdyZWUgb2YgRnJlZWRvbVxyXG4gICAgICogICAgICAgICAgICAgICAgICAgIOKUgiAgIOKUglxyXG4gICAgICogICAgICAgICAgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUmFxyXG4gICAgICogYGBgXHJcbiAgICAgKiBAYXV0aG9yIE1hcmtvIEZlaHJlbmJhY2gsIEhGVSwgMjAyMCB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICAgKi9cclxuICBleHBvcnQgY2xhc3MgSm9pbnRQcmlzbWF0aWMgZXh0ZW5kcyBKb2ludEF4aWFsIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBKb2ludC5yZWdpc3RlclN1YmNsYXNzKEpvaW50UHJpc21hdGljKTtcclxuXHJcbiAgICAjbW90b3JGb3JjZTogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgam9pbnQ6IE9JTU8uUHJpc21hdGljSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY29uZmlnOiBPSU1PLlByaXNtYXRpY0pvaW50Q29uZmlnID0gbmV3IE9JTU8uUHJpc21hdGljSm9pbnRDb25maWcoKTtcclxuICAgIHByb3RlY3RlZCBtb3RvcjogT0lNTy5UcmFuc2xhdGlvbmFsTGltaXRNb3RvcjtcclxuICAgIC8vSW50ZXJuYWxseSB1c2VkIHZhcmlhYmxlcyAtIEpvaW50IFByb3BlcnRpZXMgdGhhdCBhcmUgdXNlZCBldmVuIHdoZW4gbm8gYWN0dWFsIGpvaW50IGlzIGN1cnJlbnRseSBleGlzdGVuZFxyXG5cclxuICAgIC8qKiBDcmVhdGluZyBhIHByaXNtYXRpYyBqb2ludCBiZXR3ZWVuIHR3byBDb21wb25lbnRSaWdpZGJvZGllcyBvbmx5IG1vdmluZyBvbiBvbmUgYXhpcyBib3VuZCBvbiBhIGxvY2FsIGFuY2hvcnBvaW50LiAqL1xyXG4gICAgY29uc3RydWN0b3IoX2JvZHlBbmNob3I6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwsIF9ib2R5VGllZDogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2F4aXM6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAxLCAwKSwgX2xvY2FsQW5jaG9yOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoMCwgMCwgMCkpIHtcclxuICAgICAgc3VwZXIoX2JvZHlBbmNob3IsIF9ib2R5VGllZCwgX2F4aXMsIF9sb2NhbEFuY2hvcik7XHJcblxyXG4gICAgICB0aGlzLm1heE1vdG9yID0gMTA7XHJcbiAgICAgIHRoaXMubWluTW90b3IgPSAtMTA7XHJcbiAgICB9XHJcbiAgICAvLyNyZWdpb24gR2V0L1NldCB0cmFuc2ZvciBvZiBmdWRnZSBwcm9wZXJ0aWVzIHRvIHRoZSBwaHlzaWNzIGVuZ2luZVxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIG1heGltdW0gbW90b3IgZm9yY2UgaW4gTmV3dG9uLiBmb3JjZSA8PSAwIGVxdWFscyBkaXNhYmxlZC4gVGhpcyBpcyB0aGUgZm9yY2UgdGhhdCB0aGUgbW90b3IgaXMgdXNpbmcgdG8gaG9sZCB0aGUgcG9zaXRpb24sIG9yIHJlYWNoIGl0IGlmIGEgbW90b3JTcGVlZCBpcyBkZWZpbmVkLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IG1vdG9yRm9yY2UoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21vdG9yRm9yY2U7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IG1vdG9yRm9yY2UoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jbW90b3JGb3JjZSA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRMaW1pdE1vdG9yKCkubW90b3JGb3JjZSA9IF92YWx1ZTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vI3JlZ2lvbiBTYXZpbmcvTG9hZGluZ1xyXG4gICAgcHVibGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uIHtcclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSB7XHJcbiAgICAgICAgbW90b3JGb3JjZTogdGhpcy5tb3RvckZvcmNlLFxyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5tb3RvckZvcmNlID0gX3NlcmlhbGl6YXRpb24ubW90b3JGb3JjZTtcclxuICAgICAgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIG11dGF0b3IubW90b3JGb3JjZSA9IHRoaXMubW90b3JGb3JjZTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBpZiAodHlwZW9mIChfbXV0YXRvci5tb3RvckZvcmNlKSAhPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICB0aGlzLm1vdG9yRm9yY2UgPSBfbXV0YXRvci5tb3RvckZvcmNlO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IubW90b3JGb3JjZTtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8qKiBBY3R1YWwgY3JlYXRpb24gb2YgYSBqb2ludCBpbiB0aGUgT2ltb1BoeXNpY3Mgc3lzdGVtICovXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0Sm9pbnQoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMubW90b3IgPSBuZXcgT0lNTy5UcmFuc2xhdGlvbmFsTGltaXRNb3RvcigpLnNldExpbWl0cyh0aGlzLm1pbk1vdG9yLCB0aGlzLm1heE1vdG9yKTsgLy9DcmVhdGUgbW90b3Igc2V0dGluZ3MsIHRvIGhvbGQgcG9zaXRpb25zLCBzZXQgY29uc3RyYWludCBtaW4vbWF4XHJcbiAgICAgIHRoaXMubW90b3Iuc2V0TW90b3IodGhpcy5tb3RvclNwZWVkLCB0aGlzLm1vdG9yRm9yY2UpO1xyXG5cclxuICAgICAgdGhpcy5jb25maWcgPSBuZXcgT0lNTy5QcmlzbWF0aWNKb2ludENvbmZpZygpOyAvL0NyZWF0ZSBhIHNwZWNpZmljIGNvbmZpZyBmb3IgdGhpcyBqb2ludCB0eXBlIHRoYXQgaXMgY2FsY3VsYXRpbmcgdGhlIGxvY2FsIGF4aXMgZm9yIGJvdGggYm9kaWVzXHJcbiAgICAgIHN1cGVyLmNvbnN0cnVjdEpvaW50KCk7XHJcblxyXG4gICAgICB0aGlzLmNvbmZpZy5zcHJpbmdEYW1wZXIgPSB0aGlzLnNwcmluZ0RhbXBlcjsgLy9UZWxsaW5nIHRoZSBjb25maWcgdG8gdXNlIHRoZSBtb3Rvci9zcHJpbmcgb2YgdGhlIEZVREdFIENvbXBvbmVudFxyXG4gICAgICB0aGlzLmNvbmZpZy5saW1pdE1vdG9yID0gdGhpcy5tb3RvcjtcclxuXHJcbiAgICAgIHRoaXMuam9pbnQgPSBuZXcgT0lNTy5QcmlzbWF0aWNKb2ludCh0aGlzLmNvbmZpZyk7XHJcbiAgICAgIHRoaXMuY29uZmlndXJlSm9pbnQoKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICogQSBwaHlzaWNhbCBjb25uZWN0aW9uIGJldHdlZW4gdHdvIGJvZGllcywgZGVzaWduZWQgdG8gc2ltdWxhdGUgYmVoYXZpb3VyIHdpdGhpbiBhIHJlYWwgYm9keS4gSXQgaGFzIHR3byBheGlzLCBhIHN3aW5nIGFuZCB0d2lzdCBheGlzLCBhbmQgYWxzbyB0aGUgcGVycGVuZGljdWxhciBheGlzLCBcclxuICAgICogc2ltaWxhciB0byBhIFNwaGVyaWNhbCBqb2ludCwgYnV0IG1vcmUgcmVzdHJpY3RpdmUgaW4gaXQncyBhbmdsZXMgYW5kIG9ubHkgdHdvIGRlZ3JlZXMgb2YgZnJlZWRvbS4gVHdvIFJpZ2lkQm9kaWVzIG5lZWQgdG8gYmUgZGVmaW5lZCB0byB1c2UgaXQuIE1vc3RseSB1c2VkIHRvIGNyZWF0ZSBodW1hbmxpa2Ugam9pbnRzIHRoYXQgYmVoYXZlIGxpa2UgYSBcclxuICAgICogbGlmZWxlc3MgYm9keS5cclxuICAgICogYGBgcGxhaW50ZXh0ICAgICAgICBcclxuICAgICogICAgICAgICAgICAgICAgICBcclxuICAgICogICAgICAgICAgICAgICAgICAgICAgYW5jaG9yIC0gaXQgY2FuIHR3aXN0IG9uIG9uZSBheGlzIGFuZCBzd2luZyBvbiBhbm90aGVyXHJcbiAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUglxyXG4gICAgKiAgICAgICAgIHogICAgICAgICAgICDilIzilIDilIDilIDilJAg4pSCIOKUjOKUgOKUgOKUgOKUkFxyXG4gICAgKiAgICAgICAgIOKGkSAgICAgICAgICAgIOKUgiAgIOKUgiDihpMg4pSCICAg4pSCICAgICAgICBlLmcuIHogPSBUd2lzdEF4aXMsIGl0IGNhbiByb3RhdGUgaW4taXRzZWxmIGFyb3VuZCB0aGlzIGF4aXMgXHJcbiAgICAqICAgIC14IOKGkOKUgOKUvOKUgOKGkiB4ICAgICAgICDilIIgICDilIIgeCDilIIgICDilIIgICAgICAgIGUuZy4geCA9IFN3aW5nQXhpcywgaXQgY2FuIHJvdGF0ZSBhbmNob3JlZCBhcm91bmQgdGhlIGJhc2Ugb24gdGhpcyBheGlzICAgXHJcbiAgICAqICAgICAgICAg4oaTICAgICAgICAgICAg4pSCICAg4pSCICAg4pSCICAg4pSCICAgICAgICAgICBcclxuICAgICogICAgICAgIC16ICAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSYICAg4pSU4pSA4pSA4pSA4pSYICAgICAgICAgZS5nLiB5b3UgY2FuIHR3aXN0IHRoZSBsZWcgaW4taXRzZWxmIHRvIGEgY2VydGFpbiBkZWdyZWUsXHJcbiAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXQgYWxzbyByb3RhdGUgaXQgZm9yd2FyZC9iYWNrd2FyZC9sZWZ0L3JpZ2h0IHRvIGEgY2VydGFpbiBkZWdyZWVcclxuICAgICogICAgICAgICAgICAgICAgYm9keUFuY2hvciAgICAgICAgICBib2R5VGllZFxyXG4gICAgKiAgICAgICAgICAgICAgKGUuZy4gcGVsdmlzKSAgICAgICAgIChlLmcuIHVwcGVyLWxlZylcclxuICAgICogXHJcbiAgICAqIGBgYFxyXG4gICAgKiBUd2lzdCBlcXVhbHMgYSByb3RhdGlvbiBhcm91bmQgYSBwb2ludCB3aXRob3V0IG1vdmluZyBvbiBhbiBheGlzLlxyXG4gICAgKiBTd2luZyBlcXVhbHMgYSByb3RhdGlvbiBvbiBhIHBvaW50IHdpdGggYSBtb3ZpbmcgbG9jYWwgYXhpcy5cclxuICAgICAqIEBhdXRob3IgTWFya28gRmVocmVuYmFjaCwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgICovXHJcblxyXG4gIGV4cG9ydCBjbGFzcyBKb2ludFJhZ2RvbGwgZXh0ZW5kcyBKb2ludCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gSm9pbnQucmVnaXN0ZXJTdWJjbGFzcyhKb2ludFJhZ2RvbGwpO1xyXG5cclxuXHJcbiAgICAjc3ByaW5nRGFtcGluZ1R3aXN0OiBudW1iZXIgPSAwO1xyXG4gICAgI3NwcmluZ0ZyZXF1ZW5jeVR3aXN0OiBudW1iZXIgPSAwO1xyXG5cclxuICAgICNzcHJpbmdEYW1waW5nU3dpbmc6IG51bWJlciA9IDA7XHJcbiAgICAjc3ByaW5nRnJlcXVlbmN5U3dpbmc6IG51bWJlciA9IDA7XHJcblxyXG4gICAgI21heE1vdG9yVHdpc3Q6IG51bWJlciA9IDM2MDtcclxuICAgICNtaW5Nb3RvclR3aXN0OiBudW1iZXIgPSAwO1xyXG4gICAgI21vdG9yVG9ycXVlVHdpc3Q6IG51bWJlciA9IDA7XHJcbiAgICAjbW90b3JTcGVlZFR3aXN0OiBudW1iZXIgPSAwO1xyXG5cclxuICAgICNtb3RvclR3aXN0OiBPSU1PLlJvdGF0aW9uYWxMaW1pdE1vdG9yO1xyXG4gICAgI3NwcmluZ0RhbXBlclR3aXN0OiBPSU1PLlNwcmluZ0RhbXBlcjtcclxuICAgICNzcHJpbmdEYW1wZXJTd2luZzogT0lNTy5TcHJpbmdEYW1wZXI7XHJcbiAgICAjYXhpc0ZpcnN0OiBPSU1PLlZlYzM7XHJcbiAgICAjYXhpc1NlY29uZDogT0lNTy5WZWMzO1xyXG5cclxuXHJcbiAgICAjbWF4QW5nbGVGaXJzdDogbnVtYmVyID0gMDtcclxuICAgICNtYXhBbmdsZVNlY29uZDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgam9pbnQ6IE9JTU8uUmFnZG9sbEpvaW50O1xyXG4gICAgcHJvdGVjdGVkIGNvbmZpZzogT0lNTy5SYWdkb2xsSm9pbnRDb25maWcgPSBuZXcgT0lNTy5SYWdkb2xsSm9pbnRDb25maWcoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfYm9keUFuY2hvcjogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2JvZHlUaWVkOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYXhpc0ZpcnN0OiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoMSwgMCwgMCksIF9heGlzU2Vjb25kOiBWZWN0b3IzID0gbmV3IFZlY3RvcjMoMCwgMCwgMSksIF9sb2NhbEFuY2hvcjogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDAsIDApKSB7XHJcbiAgICAgIHN1cGVyKF9ib2R5QW5jaG9yLCBfYm9keVRpZWQpO1xyXG4gICAgICB0aGlzLmF4aXNGaXJzdCA9IF9heGlzRmlyc3Q7XHJcbiAgICAgIHRoaXMuYXhpc1NlY29uZCA9IF9heGlzU2Vjb25kO1xyXG4gICAgICB0aGlzLmFuY2hvciA9IF9sb2NhbEFuY2hvcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gR2V0L1NldCB0cmFuc2ZvciBvZiBmdWRnZSBwcm9wZXJ0aWVzIHRvIHRoZSBwaHlzaWNzIGVuZ2luZVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYXhpcyBjb25uZWN0aW5nIHRoZSB0aGUgdHdvIHtAbGluayBOb2RlfXMgZS5nLiBWZWN0b3IzKDAsMSwwKSB0byBoYXZlIGEgdXB3YXJkIGNvbm5lY3Rpb24uXHJcbiAgICAgKiAgV2hlbiBjaGFuZ2VkIGFmdGVyIGluaXRpYWxpemF0aW9uIHRoZSBqb2ludCBuZWVkcyB0byBiZSByZWNvbm5lY3RlZC5cclxuICAgICAqL1xyXG4gICAgZ2V0IGF4aXNGaXJzdCgpOiBWZWN0b3IzIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHRoaXMuI2F4aXNGaXJzdC54LCB0aGlzLiNheGlzRmlyc3QueSwgdGhpcy4jYXhpc0ZpcnN0LnopO1xyXG4gICAgfVxyXG4gICAgc2V0IGF4aXNGaXJzdChfdmFsdWU6IFZlY3RvcjMpIHtcclxuICAgICAgdGhpcy4jYXhpc0ZpcnN0ID0gbmV3IE9JTU8uVmVjMyhfdmFsdWUueCwgX3ZhbHVlLnksIF92YWx1ZS56KTtcclxuICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICAgIHRoaXMuZGlydHlTdGF0dXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogVGhlIGF4aXMgY29ubmVjdGluZyB0aGUgdGhlIHR3byB7QGxpbmsgTm9kZX1zIGUuZy4gVmVjdG9yMygwLDEsMCkgdG8gaGF2ZSBhIHVwd2FyZCBjb25uZWN0aW9uLlxyXG4gICAgKiAgV2hlbiBjaGFuZ2VkIGFmdGVyIGluaXRpYWxpemF0aW9uIHRoZSBqb2ludCBuZWVkcyB0byBiZSByZWNvbm5lY3RlZC5cclxuICAgICovXHJcbiAgICBnZXQgYXhpc1NlY29uZCgpOiBWZWN0b3IzIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHRoaXMuI2F4aXNTZWNvbmQueCwgdGhpcy4jYXhpc1NlY29uZC55LCB0aGlzLiNheGlzU2Vjb25kLnopO1xyXG4gICAgfVxyXG4gICAgc2V0IGF4aXNTZWNvbmQoX3ZhbHVlOiBWZWN0b3IzKSB7XHJcbiAgICAgIHRoaXMuI2F4aXNTZWNvbmQgPSBuZXcgT0lNTy5WZWMzKF92YWx1ZS54LCBfdmFsdWUueSwgX3ZhbHVlLnopO1xyXG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5kaXJ0eVN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1heGltdW0gYW5nbGUgb2Ygcm90YXRpb24gYWxvbmcgdGhlIGZpcnN0IGF4aXMuIFZhbHVlIG5lZWRzIHRvIGJlIHBvc2l0aXZlLiBDaGFuZ2VzIGRvIHJlYnVpbGQgdGhlIGpvaW50XHJcbiAgICAgKi9cclxuICAgIGdldCBtYXhBbmdsZUZpcnN0QXhpcygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbWF4QW5nbGVGaXJzdCAqIENhbGMucmFkMmRlZztcclxuICAgIH1cclxuICAgIHNldCBtYXhBbmdsZUZpcnN0QXhpcyhfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtYXhBbmdsZUZpcnN0ID0gX3ZhbHVlICogQ2FsYy5kZWcycmFkO1xyXG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5kaXJ0eVN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1heGltdW0gYW5nbGUgb2Ygcm90YXRpb24gYWxvbmcgdGhlIHNlY29uZCBheGlzLiBWYWx1ZSBuZWVkcyB0byBiZSBwb3NpdGl2ZS4gQ2hhbmdlcyBkbyByZWJ1aWxkIHRoZSBqb2ludFxyXG4gICAgICovXHJcbiAgICBnZXQgbWF4QW5nbGVTZWNvbmRBeGlzKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtYXhBbmdsZVNlY29uZCAqIENhbGMucmFkMmRlZztcclxuICAgIH1cclxuICAgIHNldCBtYXhBbmdsZVNlY29uZEF4aXMoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jbWF4QW5nbGVTZWNvbmQgPSBfdmFsdWUgKiBDYWxjLmRlZzJyYWQ7XHJcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgICB0aGlzLmRpcnR5U3RhdHVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGFtcGluZyBvZiB0aGUgc3ByaW5nLiAxIGVxdWFscyBjb21wbGV0bHkgZGFtcGVkLlxyXG4gICAgICovXHJcbiAgICBnZXQgc3ByaW5nRGFtcGluZ1R3aXN0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdEYW1waW5nVHdpc3Q7XHJcbiAgICB9XHJcbiAgICBzZXQgc3ByaW5nRGFtcGluZ1R3aXN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0RhbXBpbmdUd2lzdCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRUd2lzdFNwcmluZ0RhbXBlcigpLmRhbXBpbmdSYXRpbyA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmcmVxdWVuY3kgb2YgdGhlIHNwcmluZyBpbiBIei4gQXQgMCB0aGUgc3ByaW5nIGlzIHJpZ2lkLCBlcXVhbHMgbm8gc3ByaW5nLiBUaGUgc21hbGxlciB0aGUgdmFsdWUgdGhlIGxlc3MgcmVzdHJpY3RpdmUgaXMgdGhlIHNwcmluZy5cclxuICAgICovXHJcbiAgICBnZXQgc3ByaW5nRnJlcXVlbmN5VHdpc3QoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeVR3aXN0O1xyXG4gICAgfVxyXG4gICAgc2V0IHNwcmluZ0ZyZXF1ZW5jeVR3aXN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeVR3aXN0ID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFR3aXN0U3ByaW5nRGFtcGVyKCkuZnJlcXVlbmN5ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGRhbXBpbmcgb2YgdGhlIHNwcmluZy4gMSBlcXVhbHMgY29tcGxldGx5IGRhbXBlZC5cclxuICAgICAqL1xyXG4gICAgZ2V0IHNwcmluZ0RhbXBpbmdTd2luZygpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc3ByaW5nRGFtcGluZ1N3aW5nO1xyXG4gICAgfVxyXG4gICAgc2V0IHNwcmluZ0RhbXBpbmdTd2luZyhfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdEYW1waW5nU3dpbmcgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0U3dpbmdTcHJpbmdEYW1wZXIoKS5kYW1waW5nUmF0aW8gPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnJlcXVlbmN5IG9mIHRoZSBzcHJpbmcgaW4gSHouIEF0IDAgdGhlIHNwcmluZyBpcyByaWdpZCwgZXF1YWxzIG5vIHNwcmluZy4gVGhlIHNtYWxsZXIgdGhlIHZhbHVlIHRoZSBsZXNzIHJlc3RyaWN0aXZlIGlzIHRoZSBzcHJpbmcuXHJcbiAgICAqL1xyXG4gICAgZ2V0IHNwcmluZ0ZyZXF1ZW5jeVN3aW5nKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdGcmVxdWVuY3lTd2luZztcclxuICAgIH1cclxuICAgIHNldCBzcHJpbmdGcmVxdWVuY3lTd2luZyhfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdGcmVxdWVuY3lTd2luZyA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRTd2luZ1NwcmluZ0RhbXBlcigpLmZyZXF1ZW5jeSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgVXBwZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC4gQXhpcy1BbmdsZSBtZWFzdXJlZCBpbiBEZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIGdldCBtYXhNb3RvclR3aXN0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtYXhNb3RvclR3aXN0ICogQ2FsYy5yYWQyZGVnO1xyXG4gICAgfVxyXG4gICAgc2V0IG1heE1vdG9yVHdpc3QoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgX3ZhbHVlICo9IENhbGMuZGVnMnJhZDtcclxuICAgICAgdGhpcy4jbWF4TW90b3JUd2lzdCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRUd2lzdExpbWl0TW90b3IoKS51cHBlckxpbWl0ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgTG93ZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC4gQXhpcyBBbmdsZSBtZWFzdXJlZCBpbiBEZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIGdldCBtaW5Nb3RvclR3aXN0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtaW5Nb3RvclR3aXN0ICogQ2FsYy5yYWQyZGVnO1xyXG4gICAgfVxyXG4gICAgc2V0IG1pbk1vdG9yVHdpc3QoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgX3ZhbHVlICo9IENhbGMuZGVnMnJhZDtcclxuICAgICAgdGhpcy4jbWluTW90b3JUd2lzdCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRUd2lzdExpbWl0TW90b3IoKS5sb3dlckxpbWl0ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIHRhcmdldCByb3RhdGlvbmFsIHNwZWVkIG9mIHRoZSBtb3RvciBpbiBtL3MuIFxyXG4gICAgICovXHJcbiAgICBnZXQgbW90b3JTcGVlZFR3aXN0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtb3RvclNwZWVkVHdpc3Q7XHJcbiAgICB9XHJcbiAgICBzZXQgbW90b3JTcGVlZFR3aXN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21vdG9yU3BlZWRUd2lzdCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRUd2lzdExpbWl0TW90b3IoKS5tb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIG1heGltdW0gbW90b3IgdG9ycXVlIGluIE5ld3Rvbi4gZm9yY2UgPD0gMCBlcXVhbHMgZGlzYWJsZWQuIFxyXG4gICAgICovXHJcbiAgICBnZXQgbW90b3JUb3JxdWVUd2lzdCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbW90b3JUb3JxdWVUd2lzdDtcclxuICAgIH1cclxuICAgIHNldCBtb3RvclRvcnF1ZVR3aXN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI21vdG9yVG9ycXVlVHdpc3QgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0VHdpc3RMaW1pdE1vdG9yKCkubW90b3JUb3JxdWUgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogSWYgdGhlIHR3byBjb25uZWN0ZWQgUmlnaWRCb2RpZXMgY29sbGlkZSB3aXRoIGVhdGggb3RoZXIuIChEZWZhdWx0ID0gZmFsc2UpXHJcbiAgICAgKi9cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2F2aW5nL0xvYWRpbmdcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gdGhpcy4jZ2V0TXV0YXRvcigpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmF4aXNGaXJzdCA9IHRoaXMuYXhpc0ZpcnN0LnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmF4aXNTZWNvbmQgPSB0aGlzLmF4aXNTZWNvbmQuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgYXdhaXQgdGhpcy5heGlzRmlyc3QuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uYXhpc0ZpcnN0KTtcclxuICAgICAgYXdhaXQgdGhpcy5heGlzU2Vjb25kLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmF4aXNTZWNvbmQpO1xyXG4gICAgICB0aGlzLiNtdXRhdGUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgICBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3IuYXhpc0ZpcnN0KSAhPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICB0aGlzLmF4aXNGaXJzdCA9IG5ldyBWZWN0b3IzKC4uLjxudW1iZXJbXT4oT2JqZWN0LnZhbHVlcyhfbXV0YXRvci5heGlzRmlyc3QpKSk7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLmF4aXNTZWNvbmQpICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHRoaXMuYXhpc1NlY29uZCA9IG5ldyBWZWN0b3IzKC4uLjxudW1iZXJbXT4oT2JqZWN0LnZhbHVlcyhfbXV0YXRvci5heGlzU2Vjb25kKSkpO1xyXG4gICAgICBkZWxldGUgX211dGF0b3IuYXhpc0ZpcnN0O1xyXG4gICAgICBkZWxldGUgX211dGF0b3IuYXhpc1NlY29uZDtcclxuICAgICAgdGhpcy4jbXV0YXRlKF9tdXRhdG9yKTtcclxuICAgICAgdGhpcy5kZWxldGVGcm9tTXV0YXRvcihfbXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgc3VwZXIubXV0YXRlKF9tdXRhdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvcigpOiBNdXRhdG9yIHtcclxuICAgICAgbGV0IG11dGF0b3I6IE11dGF0b3IgPSBzdXBlci5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIE9iamVjdC5hc3NpZ24obXV0YXRvciwgdGhpcy4jZ2V0TXV0YXRvcigpKTtcclxuICAgICAgbXV0YXRvci5heGlzRmlyc3QgPSB0aGlzLmF4aXNGaXJzdC5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIG11dGF0b3IuYXhpc1NlY29uZCA9IHRoaXMuYXhpc1NlY29uZC5nZXRNdXRhdG9yKCk7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgICNnZXRNdXRhdG9yID0gKCk6IE11dGF0b3IgPT4ge1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHtcclxuICAgICAgICBtYXhBbmdsZUZpcnN0OiB0aGlzLiNtYXhBbmdsZUZpcnN0LFxyXG4gICAgICAgIG1heEFuZ2xlU2Vjb25kOiB0aGlzLiNtYXhBbmdsZVNlY29uZCxcclxuICAgICAgICBzcHJpbmdEYW1waW5nVHdpc3Q6IHRoaXMuc3ByaW5nRGFtcGluZ1R3aXN0LFxyXG4gICAgICAgIHNwcmluZ0ZyZXF1ZW5jeVR3aXN0OiB0aGlzLnNwcmluZ0ZyZXF1ZW5jeVR3aXN0LFxyXG4gICAgICAgIHNwcmluZ0RhbXBpbmdTd2luZzogdGhpcy5zcHJpbmdEYW1waW5nU3dpbmcsXHJcbiAgICAgICAgc3ByaW5nRnJlcXVlbmN5U3dpbmc6IHRoaXMuc3ByaW5nRnJlcXVlbmN5U3dpbmcsXHJcbiAgICAgICAgbWF4TW90b3JUd2lzdDogdGhpcy4jbWF4TW90b3JUd2lzdCxcclxuICAgICAgICBtaW5Nb3RvclR3aXN0OiB0aGlzLiNtaW5Nb3RvclR3aXN0LFxyXG4gICAgICAgIG1vdG9yU3BlZWRUd2lzdDogdGhpcy5tb3RvclNwZWVkVHdpc3QsXHJcbiAgICAgICAgbW90b3JUb3JxdWVUd2lzdDogdGhpcy5tb3RvclRvcnF1ZVR3aXN0XHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgICNtdXRhdGUgPSAoX211dGF0b3I6IE11dGF0b3IpOiB2b2lkID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3IubWF4QW5nbGVGaXJzdCkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy4jbWF4QW5nbGVGaXJzdCA9IF9tdXRhdG9yLm1heEFuZ2xlRmlyc3Q7XHJcbiAgICAgIGlmICh0eXBlb2YgKF9tdXRhdG9yLm1heEFuZ2xlU2Vjb25kKSAhPT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICB0aGlzLiNtYXhBbmdsZVNlY29uZCA9IF9tdXRhdG9yLm1heEFuZ2xlU2Vjb25kO1xyXG4gICAgICB0aGlzLm11dGF0ZUJhc2UoX211dGF0b3IsIFtcclxuICAgICAgICBcInNwcmluZ0RhbXBpbmdUd2lzdFwiLCBcInNwcmluZ0ZyZXF1ZW5jeVR3aXN0XCIsIFwic3ByaW5nRGFtcGluZ1N3aW5nXCIsIFwic3ByaW5nRnJlcXVlbmN5U3dpbmdcIiwgXCJtYXhNb3RvclR3aXN0XCIsIFwibWluTW90b3JUd2lzdFwiLCBcIm1vdG9yU3BlZWRUd2lzdFwiLCBcIm1vdG9yVG9ycXVlVHdpc3RcIlxyXG4gICAgICBdKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RKb2ludCgpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jc3ByaW5nRGFtcGVyVHdpc3QgPSBuZXcgT0lNTy5TcHJpbmdEYW1wZXIoKS5zZXRTcHJpbmcodGhpcy5zcHJpbmdGcmVxdWVuY3lUd2lzdCwgdGhpcy5zcHJpbmdEYW1waW5nVHdpc3QpO1xyXG4gICAgICB0aGlzLiNzcHJpbmdEYW1wZXJTd2luZyA9IG5ldyBPSU1PLlNwcmluZ0RhbXBlcigpLnNldFNwcmluZyh0aGlzLnNwcmluZ0ZyZXF1ZW5jeVN3aW5nLCB0aGlzLnNwcmluZ0RhbXBpbmdTd2luZyk7XHJcblxyXG4gICAgICB0aGlzLiNtb3RvclR3aXN0ID0gbmV3IE9JTU8uUm90YXRpb25hbExpbWl0TW90b3IoKS5zZXRMaW1pdHModGhpcy5taW5Nb3RvclR3aXN0LCB0aGlzLm1heE1vdG9yVHdpc3QpO1xyXG4gICAgICB0aGlzLiNtb3RvclR3aXN0LnNldE1vdG9yKHRoaXMubW90b3JTcGVlZFR3aXN0LCB0aGlzLm1vdG9yVG9ycXVlVHdpc3QpO1xyXG5cclxuICAgICAgdGhpcy5jb25maWcgPSBuZXcgT0lNTy5SYWdkb2xsSm9pbnRDb25maWcoKTtcclxuICAgICAgc3VwZXIuY29uc3RydWN0Sm9pbnQodGhpcy5heGlzRmlyc3QsIHRoaXMuYXhpc1NlY29uZCk7XHJcbiAgICAgIHRoaXMuY29uZmlnLnN3aW5nU3ByaW5nRGFtcGVyID0gdGhpcy4jc3ByaW5nRGFtcGVyU3dpbmc7XHJcbiAgICAgIHRoaXMuY29uZmlnLnR3aXN0U3ByaW5nRGFtcGVyID0gdGhpcy4jc3ByaW5nRGFtcGVyVHdpc3Q7XHJcbiAgICAgIHRoaXMuY29uZmlnLnR3aXN0TGltaXRNb3RvciA9IHRoaXMuI21vdG9yVHdpc3Q7XHJcbiAgICAgIHRoaXMuY29uZmlnLm1heFN3aW5nQW5nbGUxID0gdGhpcy4jbWF4QW5nbGVGaXJzdDtcclxuICAgICAgdGhpcy5jb25maWcubWF4U3dpbmdBbmdsZTIgPSB0aGlzLiNtYXhBbmdsZVNlY29uZDtcclxuXHJcbiAgICAgIHRoaXMuam9pbnQgPSBuZXcgT0lNTy5SYWdkb2xsSm9pbnQodGhpcy5jb25maWcpO1xyXG4gICAgICBzdXBlci5jb25maWd1cmVKb2ludCgpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAgICogQSBwaHlzaWNhbCBjb25uZWN0aW9uIGJldHdlZW4gdHdvIGJvZGllcyB3aXRoIGEgZGVmaW5lZCBheGUgb2Ygcm90YXRpb24uIEFsc28ga25vd24gYXMgSElOR0Ugam9pbnQuXHJcbiAgICAgKiBUd28gUmlnaWRCb2RpZXMgbmVlZCB0byBiZSBkZWZpbmVkIHRvIHVzZSBpdC4gQSBtb3RvciBjYW4gYmUgZGVmaW5lZCB0byByb3RhdGUgdGhlIGNvbm5lY3RlZCBhbG9uZyB0aGUgZGVmaW5lZCBheGlzLlxyXG4gICAgICogXHJcbiAgICAgKiBgYGBwbGFpbnRleHQgICAgICAgIFxyXG4gICAgICogICAgICAgICAgICAgICAgICByb3RhdGlvbiBheGlzLCAxc3QgRGVncmVlIG9mIGZyZWVkb21cclxuICAgICAqICAgICAgICAgICAgICAgICAgICDihpFcclxuICAgICAqICAgICAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSQ4pSC4pSM4pSA4pSA4pSA4pSA4pSQICAgICBcclxuICAgICAqICAgICAgICAgICAgICAg4pSCICAg4pSC4pSC4pSCICAgIOKUgiAgXHJcbiAgICAgKiAgICAgICAgICAgICAgIOKUgiAgIOKUguKUguKUgiAgICDilIIgXHJcbiAgICAgKiAgICAgICAgICAgICAgIOKUgiAgIOKUguKUguKUgiAgICDilIIgXHJcbiAgICAgKiAgICAgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUmOKUguKUlOKUgOKUgOKUgOKUgOKUmFxyXG4gICAgICogICAgICAgICAgICAgICAgICAgIOKUgiAgIFxyXG4gICAgICogICAgICBib2R5QW5jaG9yICAgICAgICAgYm9keVRpZWRcclxuICAgICAqICAgKGUuZy4gRG9vcmhpbmdlKSAgICAgICAoZS5nLiBEb29yKVxyXG4gICAgICogYGBgXHJcbiAgICAgKiBAYXV0aG9yIE1hcmtvIEZlaHJlbmJhY2gsIEhGVSwgMjAyMCB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICAgKi9cclxuICBleHBvcnQgY2xhc3MgSm9pbnRSZXZvbHV0ZSBleHRlbmRzIEpvaW50QXhpYWwge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IEpvaW50LnJlZ2lzdGVyU3ViY2xhc3MoSm9pbnRSZXZvbHV0ZSk7XHJcblxyXG4gICAgI21vdG9yVG9ycXVlOiBudW1iZXIgPSAwO1xyXG4gICAgI3JvdG9yOiBPSU1PLlJvdGF0aW9uYWxMaW1pdE1vdG9yO1xyXG5cclxuICAgIHByb3RlY3RlZCBqb2ludDogT0lNTy5SZXZvbHV0ZUpvaW50O1xyXG4gICAgcHJvdGVjdGVkIGNvbmZpZzogT0lNTy5SZXZvbHV0ZUpvaW50Q29uZmlnID0gbmV3IE9JTU8uUmV2b2x1dGVKb2ludENvbmZpZygpO1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfYm9keUFuY2hvcjogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2JvZHlUaWVkOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYXhpczogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDEsIDApLCBfbG9jYWxBbmNob3I6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAwLCAwKSkge1xyXG4gICAgICBzdXBlcihfYm9keUFuY2hvciwgX2JvZHlUaWVkLCBfYXhpcywgX2xvY2FsQW5jaG9yKTtcclxuXHJcbiAgICAgIHRoaXMubWF4TW90b3IgPSAzNjA7XHJcbiAgICAgIHRoaXMubWluTW90b3IgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBVcHBlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBBeGlzLUFuZ2xlIG1lYXN1cmVkIGluIERlZ3JlZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBtYXhNb3RvcihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBzdXBlci5tYXhNb3RvciA9IF92YWx1ZTtcclxuICAgICAgX3ZhbHVlICo9IENhbGMuZGVnMnJhZDtcclxuICAgICAgaWYgKHRoaXMuam9pbnQpXHJcbiAgICAgICAgdGhpcy5qb2ludC5nZXRMaW1pdE1vdG9yKCkudXBwZXJMaW1pdCA9IF92YWx1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBMb3dlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBBeGlzIEFuZ2xlIG1lYXN1cmVkIGluIERlZ3JlZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldCBtaW5Nb3RvcihfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICBzdXBlci5taW5Nb3RvciA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQpXHJcbiAgICAgICAgdGhpcy5qb2ludC5nZXRMaW1pdE1vdG9yKCkubG93ZXJMaW1pdCA9IF92YWx1ZSAqIENhbGMuZGVnMnJhZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgbWF4aW11bSBtb3RvciBmb3JjZSBpbiBOZXd0b24uIGZvcmNlIDw9IDAgZXF1YWxzIGRpc2FibGVkLiBcclxuICAgICAqL1xyXG4gICAgZ2V0IG1vdG9yVG9ycXVlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtb3RvclRvcnF1ZTtcclxuICAgIH1cclxuICAgIHNldCBtb3RvclRvcnF1ZShfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtb3RvclRvcnF1ZSA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRMaW1pdE1vdG9yKCkubW90b3JUb3JxdWUgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogSWYgdGhlIHR3byBjb25uZWN0ZWQgUmlnaWRCb2RpZXMgY29sbGlkZSB3aXRoIGVhdGggb3RoZXIuIChEZWZhdWx0ID0gZmFsc2UpXHJcbiAgICAgKi9cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2F2aW5nL0xvYWRpbmdcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIG1vdG9yVG9ycXVlOiB0aGlzLm1vdG9yVG9ycXVlLFxyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5tb3RvclRvcnF1ZSA9IF9zZXJpYWxpemF0aW9uLm1vdG9yVG9ycXVlO1xyXG4gICAgICBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbltzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXSk7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IoKTtcclxuICAgICAgbXV0YXRvci5tb3RvclRvcnF1ZSA9IHRoaXMubW90b3JUb3JxdWU7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3IubW90b3JUb3JxdWUpICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHRoaXMubW90b3JUb3JxdWUgPSBfbXV0YXRvci5tb3RvclRvcnF1ZTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLm1vdG9yVG9ycXVlO1xyXG4gICAgICBzdXBlci5tdXRhdGUoX211dGF0b3IpO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNyb3RvciA9IG5ldyBPSU1PLlJvdGF0aW9uYWxMaW1pdE1vdG9yKCkuc2V0TGltaXRzKHN1cGVyLm1pbk1vdG9yICogQ2FsYy5kZWcycmFkLCBzdXBlci5tYXhNb3RvciAqIENhbGMuZGVnMnJhZCk7XHJcbiAgICAgIHRoaXMuI3JvdG9yLnNldE1vdG9yKHRoaXMubW90b3JTcGVlZCwgdGhpcy5tb3RvclRvcnF1ZSk7XHJcblxyXG4gICAgICB0aGlzLmNvbmZpZyA9IG5ldyBPSU1PLlJldm9sdXRlSm9pbnRDb25maWcoKTtcclxuICAgICAgc3VwZXIuY29uc3RydWN0Sm9pbnQoKTtcclxuXHJcbiAgICAgIHRoaXMuY29uZmlnLnNwcmluZ0RhbXBlciA9IHRoaXMuc3ByaW5nRGFtcGVyO1xyXG4gICAgICB0aGlzLmNvbmZpZy5saW1pdE1vdG9yID0gdGhpcy4jcm90b3I7XHJcblxyXG4gICAgICB0aGlzLmpvaW50ID0gbmV3IE9JTU8uUmV2b2x1dGVKb2ludCh0aGlzLmNvbmZpZyk7XHJcbiAgICAgIHRoaXMuY29uZmlndXJlSm9pbnQoKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICAqIEEgcGh5c2ljYWwgY29ubmVjdGlvbiBiZXR3ZWVuIHR3byBib2RpZXMgd2l0aCB0aHJlZSBEZWdyZWVzIG9mIEZyZWVkb20sIGFsc28ga25vd24gYXMgYmFsbCBhbmQgc29ja2V0IGpvaW50LiBUd28gYm9kaWVzIGNvbm5lY3RlZCBhdCB0aGVpciBhbmNob3IgYnV0IGZyZWUgdG8gcm90YXRlLlxyXG4gICAgICogVXNlZCBmb3IgdGhpbmdzIGxpa2UgdGhlIGNvbm5lY3Rpb24gb2YgYm9uZXMgaW4gdGhlIGh1bWFuIHNob3VsZGVyIChpZiBzaW1wbGlmaWVkLCBlbHNlIGJldHRlciB1c2UgSm9pbnRSYWdkb2xsKS4gVHdvIFJpZ2lkQm9kaWVzIG5lZWQgdG8gYmUgZGVmaW5lZCB0byB1c2UgaXQuIE9ubHkgc3ByaW5nIHNldHRpbmdzIGNhbiBiZSBkZWZpbmVkLlxyXG4gICAgICogMyBEZWdyZWVzIGFyZSBzd2luZyBob3Jpem9udGFsLCBzd2luZyB2ZXJ0aWNhbCBhbmQgdHdpc3QuXHJcbiAgICAgKiBcclxuICAgICAqIGBgYHBsYWludGV4dFxyXG4gICAgICogICAgICAgICAgICAgIEpvaW50SG9sZGVyXHJcbiAgICAgKiAgICAgICAgIHogICAgICBib2R5QW5jaG9yIChlLmcuIEh1bWFuLVNob3VsZGVyKSAgICAgXHJcbiAgICAgKiAgICAgIHkgIOKGkSAgICAgICAgICBcclxuICAgICAqICAgICAgICBcXHwgICAgICAgICAg4pSA4pSA4pSAKOKXj+KUgOKUgOKUgFxyXG4gICAgICogIC14IDwtLS18LS0tPiB4ICAgICAgICAgICBib2R5VGllZCAgICAgICAgXHJcbiAgICAgKiAgICAgICAgIHxcXCAgICAgICAgICAgICAgICAoZS5nLiBVcHBlci1Bcm0pIFxyXG4gICAgICogICAgICAgICDihpMgLXkgICAgICAgXHJcbiAgICAgKiAgICAgICAgLXogICAgICAgICAgXHJcbiAgICAgKiBgYGBcclxuICAgICAqIEBhdXRob3IgTWFya28gRmVocmVuYmFjaCwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBKb2ludFNwaGVyaWNhbCBleHRlbmRzIEpvaW50IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBKb2ludC5yZWdpc3RlclN1YmNsYXNzKEpvaW50U3BoZXJpY2FsKTtcclxuXHJcbiAgICAjc3ByaW5nRGFtcGluZzogbnVtYmVyID0gMDtcclxuICAgICNzcHJpbmdGcmVxdWVuY3k6IG51bWJlciA9IDA7XHJcbiAgICAjc3ByaW5nRGFtcGVyOiBPSU1PLlNwcmluZ0RhbXBlcjtcclxuXHJcbiAgICBwcm90ZWN0ZWQgam9pbnQ6IE9JTU8uU3BoZXJpY2FsSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY29uZmlnOiBPSU1PLlNwaGVyaWNhbEpvaW50Q29uZmlnID0gbmV3IE9JTU8uU3BoZXJpY2FsSm9pbnRDb25maWcoKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfYm9keUFuY2hvcjogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2JvZHlUaWVkOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfbG9jYWxBbmNob3I6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAwLCAwKSkge1xyXG4gICAgICBzdXBlcihfYm9keUFuY2hvciwgX2JvZHlUaWVkKTtcclxuICAgICAgdGhpcy5hbmNob3IgPSBuZXcgVmVjdG9yMyhfbG9jYWxBbmNob3IueCwgX2xvY2FsQW5jaG9yLnksIF9sb2NhbEFuY2hvci56KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gR2V0L1NldCB0cmFuc2ZvciBvZiBmdWRnZSBwcm9wZXJ0aWVzIHRvIHRoZSBwaHlzaWNzIGVuZ2luZVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGRhbXBpbmcgb2YgdGhlIHNwcmluZy4gMSBlcXVhbHMgY29tcGxldGx5IGRhbXBlZC5cclxuICAgICAqL1xyXG4gICAgZ2V0IHNwcmluZ0RhbXBpbmcoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0RhbXBpbmc7XHJcbiAgICB9XHJcbiAgICBzZXQgc3ByaW5nRGFtcGluZyhfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdEYW1waW5nID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFNwcmluZ0RhbXBlcigpLmRhbXBpbmdSYXRpbyA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmcmVxdWVuY3kgb2YgdGhlIHNwcmluZyBpbiBIei4gQXQgMCB0aGUgc3ByaW5nIGlzIHJpZ2lkLCBlcXVhbHMgbm8gc3ByaW5nLiBUaGUgc21hbGxlciB0aGUgdmFsdWUgdGhlIGxlc3MgcmVzdHJpY3RpdmUgaXMgdGhlIHNwcmluZy5cclxuICAgICovXHJcbiAgICBnZXQgc3ByaW5nRnJlcXVlbmN5KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdGcmVxdWVuY3k7XHJcbiAgICB9XHJcbiAgICBzZXQgc3ByaW5nRnJlcXVlbmN5KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeSA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRTcHJpbmdEYW1wZXIoKS5mcmVxdWVuY3kgPSBfdmFsdWU7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2F2aW5nL0xvYWRpbmdcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIHNwcmluZ0RhbXBpbmc6IHRoaXMuc3ByaW5nRGFtcGluZyxcclxuICAgICAgICBzcHJpbmdGcmVxdWVuY3k6IHRoaXMuc3ByaW5nRnJlcXVlbmN5LFxyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5zcHJpbmdEYW1waW5nID0gX3NlcmlhbGl6YXRpb24uc3ByaW5nRGFtcGluZztcclxuICAgICAgdGhpcy5zcHJpbmdGcmVxdWVuY3kgPSBfc2VyaWFsaXphdGlvbi5zcHJpbmdGcmVxdWVuY3k7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3IoKTogTXV0YXRvciB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0gc3VwZXIuZ2V0TXV0YXRvcigpO1xyXG4gICAgICBtdXRhdG9yLnNwcmluZ0RhbXBpbmcgPSB0aGlzLnNwcmluZ0RhbXBpbmc7XHJcbiAgICAgIG11dGF0b3Iuc3ByaW5nRnJlcXVlbmN5ID0gdGhpcy5zcHJpbmdGcmVxdWVuY3k7XHJcbiAgICAgIHJldHVybiBtdXRhdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgdGhpcy5tdXRhdGVCYXNlKF9tdXRhdG9yLCBbXCJzcHJpbmdEYW1waW5nXCIsIFwic3ByaW5nRnJlcXVlbmN5XCJdKTtcclxuICAgICAgZGVsZXRlIF9tdXRhdG9yLnNwcmluZ0RhbXBpbmc7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5zcHJpbmdGcmVxdWVuY3k7XHJcbiAgICAgIHN1cGVyLm11dGF0ZShfbXV0YXRvcik7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0Sm9pbnQoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0RhbXBlciA9IG5ldyBPSU1PLlNwcmluZ0RhbXBlcigpLnNldFNwcmluZyh0aGlzLnNwcmluZ0ZyZXF1ZW5jeSwgdGhpcy5zcHJpbmdEYW1waW5nKTtcclxuICAgICAgdGhpcy5jb25maWcgPSBuZXcgT0lNTy5TcGhlcmljYWxKb2ludENvbmZpZygpO1xyXG4gICAgICBzdXBlci5jb25zdHJ1Y3RKb2ludCgpO1xyXG4gICAgICB0aGlzLmNvbmZpZy5zcHJpbmdEYW1wZXIgPSB0aGlzLiNzcHJpbmdEYW1wZXI7XHJcblxyXG4gICAgICB0aGlzLmpvaW50ID0gbmV3IE9JTU8uU3BoZXJpY2FsSm9pbnQodGhpcy5jb25maWcpO1xyXG4gICAgICBzdXBlci5jb25maWd1cmVKb2ludCgpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAgICogQSBwaHlzaWNhbCBjb25uZWN0aW9uIGJldHdlZW4gdHdvIGJvZGllcyB3aXRoIHR3byBkZWZpbmVkIGF4aXMgKG5vcm1hbGx5IGUuZy4gKDAsMCwxKSBhbmQgcm90YXRpb24oMSwwLDApKSwgdGhleSBzaGFyZSB0aGUgc2FtZSBhbmNob3IgYW5kIGhhdmUgZnJlZSByb3RhdGlvbiwgYnV0IHRyYW5zZmVyIHRoZSB0d2lzdC5cclxuICAgICAqIEluIHJlYWxpdHkgdXNlZCBpbiBjYXJzIHRvIHRyYW5zZmVyIHRoZSBtb3JlIHN0YWJsZSBzdGF0aW9uYXJ5IGZvcmNlIG9uIHRoZSB2ZWxvY2l0eSBheGlzIHRvIHRoZSBidW1waW5nLCBkYW1wZWQgbW92aW5nIHdoZWVsLiBUd28gUmlnaWRCb2RpZXMgbmVlZCB0byBiZSBkZWZpbmVkIHRvIHVzZSBpdC5cclxuICAgICAqIFRoZSB0d28gbW90b3JzIGNhbiBiZSBkZWZpbmVkIGZvciB0aGUgdHdvIHJvdGF0aW9uIGF4aXMsIGFsb25nIHdpdGggc3ByaW5ncy4gXHJcbiAgICAgKiBgYGBwbGFpbnRleHQgICAgICAgIFxyXG4gICAgICogICAgICAgICAgICAgICAgICBcclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIGFuY2hvciAtIHR3aXN0IGlzIHRyYW5zZmVyZWQgYmV0d2VlbiBib2RpZXNcclxuICAgICAqICAgICAgICAgeiAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgKiAgICAgICAgIOKGkSAgICAgICAgICAgIC0tLS0tICB8ICAtLS0tLS0tLS0tLS1cclxuICAgICAqICAgICAgICAgfCAgICAgICAgICAgfCAgICAgfCDihpMgfCAgICAgICAgICAgIHwgXHJcbiAgICAgKiAgLXggPC0tLXwtLS0+IHggICAgIHwgICAgIHwgeCB8ICAgICAgICAgICAgfCAgICAgICAgICAgZS5nLiB3aGVlbCBjYW4gc3RpbGwgdHVybiB1cC9kb3duLCBcclxuICAgICAqICAgICAgICAgfCAgICAgICAgICAgfCAgICAgfCAgIHwgICAgICAgICAgICB8ICAgICAgICAgICBsZWZ0IHJpZ2h0IGJ1dCB0cmFuc2ZlcmluZyBpdCdzIHJvdGF0aW9uIG9uIHRvIHRoZSB3aGVlbC1heGlzLlxyXG4gICAgICogICAgICAgICDihpMgICAgICAgICAgICAtLS0tLSAgICAgLS0tLS0tLS0tLS0tXHJcbiAgICAgKiAgICAgICAgLXogICAgXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgYXR0YWNoZWRSQiAgICAgICAgICBjb25uZWN0ZWRSQlxyXG4gICAgICogICAgICAgICAgICAgICAgKGUuZy4gd2hlZWwpICAgICAgIChlLmcuIHdoZWVsLWF4aXMpXHJcbiAgICAgKiBgYGBcclxuICAgKiBAYXV0aG9yIE1hcmtvIEZlaHJlbmJhY2gsIEhGVSwgMjAyMCB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICAgKi9cclxuICBleHBvcnQgY2xhc3MgSm9pbnRVbml2ZXJzYWwgZXh0ZW5kcyBKb2ludCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gSm9pbnQucmVnaXN0ZXJTdWJjbGFzcyhKb2ludFVuaXZlcnNhbCk7XHJcblxyXG4gICAgI3NwcmluZ0RhbXBpbmdGaXJzdDogbnVtYmVyID0gMDtcclxuICAgICNzcHJpbmdGcmVxdWVuY3lGaXJzdDogbnVtYmVyID0gMDtcclxuXHJcbiAgICAjc3ByaW5nRGFtcGluZ1NlY29uZDogbnVtYmVyID0gMDtcclxuICAgICNzcHJpbmdGcmVxdWVuY3lTZWNvbmQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgI21heFJvdG9yRmlyc3Q6IG51bWJlciA9IDM2MDtcclxuICAgICNtaW5Sb3RvckZpcnN0OiBudW1iZXIgPSAwO1xyXG4gICAgI3JvdG9yVG9ycXVlRmlyc3Q6IG51bWJlciA9IDA7XHJcbiAgICAjcm90b3JTcGVlZEZpcnN0OiBudW1iZXIgPSAwO1xyXG5cclxuICAgICNtYXhSb3RvclNlY29uZDogbnVtYmVyID0gMzYwO1xyXG4gICAgI21pblJvdG9yU2Vjb25kOiBudW1iZXIgPSAwO1xyXG4gICAgI3JvdG9yVG9ycXVlU2Vjb25kOiBudW1iZXIgPSAwO1xyXG4gICAgI3JvdG9yU3BlZWRTZWNvbmQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgI21vdG9yRmlyc3Q6IE9JTU8uUm90YXRpb25hbExpbWl0TW90b3I7XHJcbiAgICAjbW90b3JTZWNvbmQ6IE9JTU8uUm90YXRpb25hbExpbWl0TW90b3I7XHJcbiAgICAjYXhpc1NwcmluZ0RhbXBlckZpcnN0OiBPSU1PLlNwcmluZ0RhbXBlcjtcclxuICAgICNheGlzU3ByaW5nRGFtcGVyU2Vjb25kOiBPSU1PLlNwcmluZ0RhbXBlcjtcclxuICAgICNheGlzRmlyc3Q6IE9JTU8uVmVjMztcclxuICAgICNheGlzU2Vjb25kOiBPSU1PLlZlYzM7XHJcblxyXG4gICAgcHJvdGVjdGVkIGpvaW50OiBPSU1PLlVuaXZlcnNhbEpvaW50O1xyXG4gICAgcHJvdGVjdGVkIGNvbmZpZzogT0lNTy5Vbml2ZXJzYWxKb2ludENvbmZpZyA9IG5ldyBPSU1PLlVuaXZlcnNhbEpvaW50Q29uZmlnKCk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX2JvZHlBbmNob3I6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwsIF9ib2R5VGllZDogQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbCwgX2F4aXNGaXJzdDogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDEsIDAsIDApLCBfYXhpc1NlY29uZDogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDAsIDEpLCBfbG9jYWxBbmNob3I6IFZlY3RvcjMgPSBuZXcgVmVjdG9yMygwLCAwLCAwKSkge1xyXG4gICAgICBzdXBlcihfYm9keUFuY2hvciwgX2JvZHlUaWVkKTtcclxuICAgICAgdGhpcy5heGlzRmlyc3QgPSBfYXhpc0ZpcnN0O1xyXG4gICAgICB0aGlzLmF4aXNTZWNvbmQgPSBfYXhpc1NlY29uZDtcclxuICAgICAgdGhpcy5hbmNob3IgPSBfbG9jYWxBbmNob3I7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIEdldC9TZXQgdHJhbnNmb3Igb2YgZnVkZ2UgcHJvcGVydGllcyB0byB0aGUgcGh5c2ljcyBlbmdpbmVcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGF4aXMgY29ubmVjdGluZyB0aGUgdGhlIHR3byB7QGxpbmsgTm9kZX1zIGUuZy4gVmVjdG9yMygwLDEsMCkgdG8gaGF2ZSBhIHVwd2FyZCBjb25uZWN0aW9uLlxyXG4gICAgICogIFdoZW4gY2hhbmdlZCBhZnRlciBpbml0aWFsaXphdGlvbiB0aGUgam9pbnQgbmVlZHMgdG8gYmUgcmVjb25uZWN0ZWQuXHJcbiAgICAgKi9cclxuICAgIGdldCBheGlzRmlyc3QoKTogVmVjdG9yMyB7XHJcbiAgICAgIHJldHVybiBuZXcgVmVjdG9yMyh0aGlzLiNheGlzRmlyc3QueCwgdGhpcy4jYXhpc0ZpcnN0LnksIHRoaXMuI2F4aXNGaXJzdC56KTtcclxuICAgIH1cclxuICAgIHNldCBheGlzRmlyc3QoX3ZhbHVlOiBWZWN0b3IzKSB7XHJcbiAgICAgIHRoaXMuI2F4aXNGaXJzdCA9IG5ldyBPSU1PLlZlYzMoX3ZhbHVlLngsIF92YWx1ZS55LCBfdmFsdWUueik7XHJcbiAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xyXG4gICAgICB0aGlzLmRpcnR5U3RhdHVzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICogVGhlIGF4aXMgY29ubmVjdGluZyB0aGUgdGhlIHR3byB7QGxpbmsgTm9kZX1zIGUuZy4gVmVjdG9yMygwLDEsMCkgdG8gaGF2ZSBhIHVwd2FyZCBjb25uZWN0aW9uLlxyXG4gICAgKiAgV2hlbiBjaGFuZ2VkIGFmdGVyIGluaXRpYWxpemF0aW9uIHRoZSBqb2ludCBuZWVkcyB0byBiZSByZWNvbm5lY3RlZC5cclxuICAgICovXHJcbiAgICBnZXQgYXhpc1NlY29uZCgpOiBWZWN0b3IzIHtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHRoaXMuI2F4aXNTZWNvbmQueCwgdGhpcy4jYXhpc1NlY29uZC55LCB0aGlzLiNheGlzU2Vjb25kLnopO1xyXG4gICAgfVxyXG4gICAgc2V0IGF4aXNTZWNvbmQoX3ZhbHVlOiBWZWN0b3IzKSB7XHJcbiAgICAgIHRoaXMuI2F4aXNTZWNvbmQgPSBuZXcgT0lNTy5WZWMzKF92YWx1ZS54LCBfdmFsdWUueSwgX3ZhbHVlLnopO1xyXG4gICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgdGhpcy5kaXJ0eVN0YXR1cygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGRhbXBpbmcgb2YgdGhlIHNwcmluZy4gMSBlcXVhbHMgY29tcGxldGx5IGRhbXBlZC5cclxuICAgICAqL1xyXG4gICAgZ2V0IHNwcmluZ0RhbXBpbmdGaXJzdCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc3ByaW5nRGFtcGluZ0ZpcnN0O1xyXG4gICAgfVxyXG4gICAgc2V0IHNwcmluZ0RhbXBpbmdGaXJzdChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNzcHJpbmdEYW1waW5nRmlyc3QgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0U3ByaW5nRGFtcGVyMSgpLmRhbXBpbmdSYXRpbyA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmcmVxdWVuY3kgb2YgdGhlIHNwcmluZyBpbiBIei4gQXQgMCB0aGUgc3ByaW5nIGlzIHJpZ2lkLCBlcXVhbHMgbm8gc3ByaW5nLiBUaGUgc21hbGxlciB0aGUgdmFsdWUgdGhlIGxlc3MgcmVzdHJpY3RpdmUgaXMgdGhlIHNwcmluZy5cclxuICAgICovXHJcbiAgICBnZXQgc3ByaW5nRnJlcXVlbmN5Rmlyc3QoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeUZpcnN0O1xyXG4gICAgfVxyXG4gICAgc2V0IHNwcmluZ0ZyZXF1ZW5jeUZpcnN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeUZpcnN0ID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldFNwcmluZ0RhbXBlcjEoKS5mcmVxdWVuY3kgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGFtcGluZyBvZiB0aGUgc3ByaW5nLiAxIGVxdWFscyBjb21wbGV0bHkgZGFtcGVkLlxyXG4gICAgICovXHJcbiAgICBnZXQgc3ByaW5nRGFtcGluZ1NlY29uZCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jc3ByaW5nRGFtcGluZ1NlY29uZDtcclxuICAgIH1cclxuICAgIHNldCBzcHJpbmdEYW1waW5nU2Vjb25kKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0RhbXBpbmdTZWNvbmQgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0U3ByaW5nRGFtcGVyMigpLmRhbXBpbmdSYXRpbyA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmcmVxdWVuY3kgb2YgdGhlIHNwcmluZyBpbiBIei4gQXQgMCB0aGUgc3ByaW5nIGlzIHJpZ2lkLCBlcXVhbHMgbm8gc3ByaW5nLiBUaGUgc21hbGxlciB0aGUgdmFsdWUgdGhlIGxlc3MgcmVzdHJpY3RpdmUgaXMgdGhlIHNwcmluZy5cclxuICAgICovXHJcbiAgICBnZXQgc3ByaW5nRnJlcXVlbmN5U2Vjb25kKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNzcHJpbmdGcmVxdWVuY3lTZWNvbmQ7XHJcbiAgICB9XHJcbiAgICBzZXQgc3ByaW5nRnJlcXVlbmN5U2Vjb25kKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3NwcmluZ0ZyZXF1ZW5jeVNlY29uZCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRTcHJpbmdEYW1wZXIyKCkuZnJlcXVlbmN5ID0gX3ZhbHVlO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBVcHBlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBBeGlzLUFuZ2xlIG1lYXN1cmVkIGluIERlZ3JlZS5cclxuICAgICAqL1xyXG4gICAgZ2V0IG1heFJvdG9yRmlyc3QoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21heFJvdG9yRmlyc3Q7XHJcbiAgICB9XHJcbiAgICBzZXQgbWF4Um90b3JGaXJzdChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtYXhSb3RvckZpcnN0ID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldExpbWl0TW90b3IxKCkudXBwZXJMaW1pdCA9IF92YWx1ZSAqIENhbGMuZGVnMnJhZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSBMb3dlciBMaW1pdCBvZiBtb3ZlbWVudCBhbG9uZyB0aGUgYXhpcyBvZiB0aGlzIGpvaW50LiBUaGUgbGltaXRlciBpcyBkaXNhYmxlIGlmIGxvd2VyTGltaXQgPiB1cHBlckxpbWl0LiBBeGlzIEFuZ2xlIG1lYXN1cmVkIGluIERlZ3JlZS5cclxuICAgICAqL1xyXG4gICAgZ2V0IG1pblJvdG9yRmlyc3QoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI21pblJvdG9yRmlyc3Q7XHJcbiAgICB9XHJcbiAgICBzZXQgbWluUm90b3JGaXJzdChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtaW5Sb3RvckZpcnN0ID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldExpbWl0TW90b3IxKCkubG93ZXJMaW1pdCA9IF92YWx1ZSAqIENhbGMuZGVnMnJhZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICAqIFRoZSB0YXJnZXQgcm90YXRpb25hbCBzcGVlZCBvZiB0aGUgbW90b3IgaW4gbS9zLiBcclxuICAgICAqL1xyXG4gICAgZ2V0IHJvdG9yU3BlZWRGaXJzdCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcm90b3JTcGVlZEZpcnN0O1xyXG4gICAgfVxyXG4gICAgc2V0IHJvdG9yU3BlZWRGaXJzdChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNyb3RvclNwZWVkRmlyc3QgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0TGltaXRNb3RvcjEoKS5tb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIG1heGltdW0gbW90b3IgdG9ycXVlIGluIE5ld3Rvbi4gZm9yY2UgPD0gMCBlcXVhbHMgZGlzYWJsZWQuIFxyXG4gICAgICovXHJcbiAgICBnZXQgcm90b3JUb3JxdWVGaXJzdCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcm90b3JUb3JxdWVGaXJzdDtcclxuICAgIH1cclxuICAgIHNldCByb3RvclRvcnF1ZUZpcnN0KF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3JvdG9yVG9ycXVlRmlyc3QgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0TGltaXRNb3RvcjEoKS5tb3RvclRvcnF1ZSA9IF92YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogVGhlIFVwcGVyIExpbWl0IG9mIG1vdmVtZW50IGFsb25nIHRoZSBheGlzIG9mIHRoaXMgam9pbnQuIFRoZSBsaW1pdGVyIGlzIGRpc2FibGUgaWYgbG93ZXJMaW1pdCA+IHVwcGVyTGltaXQuIEF4aXMtQW5nbGUgbWVhc3VyZWQgaW4gRGVncmVlLlxyXG4gICAqL1xyXG4gICAgZ2V0IG1heFJvdG9yU2Vjb25kKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtYXhSb3RvclNlY29uZDtcclxuICAgIH1cclxuICAgIHNldCBtYXhSb3RvclNlY29uZChfdmFsdWU6IG51bWJlcikge1xyXG4gICAgICB0aGlzLiNtYXhSb3RvclNlY29uZCA9IF92YWx1ZTtcclxuICAgICAgaWYgKHRoaXMuam9pbnQgIT0gbnVsbCkgdGhpcy5qb2ludC5nZXRMaW1pdE1vdG9yMigpLnVwcGVyTGltaXQgPSBfdmFsdWUgKiBDYWxjLmRlZzJyYWQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAgKiBUaGUgTG93ZXIgTGltaXQgb2YgbW92ZW1lbnQgYWxvbmcgdGhlIGF4aXMgb2YgdGhpcyBqb2ludC4gVGhlIGxpbWl0ZXIgaXMgZGlzYWJsZSBpZiBsb3dlckxpbWl0ID4gdXBwZXJMaW1pdC4gQXhpcyBBbmdsZSBtZWFzdXJlZCBpbiBEZWdyZWUuXHJcbiAgICAgKi9cclxuICAgIGdldCBtaW5Sb3RvclNlY29uZCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jbWluUm90b3JTZWNvbmQ7XHJcbiAgICB9XHJcbiAgICBzZXQgbWluUm90b3JTZWNvbmQoX3ZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy4jbWluUm90b3JTZWNvbmQgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0TGltaXRNb3RvcjIoKS5sb3dlckxpbWl0ID0gX3ZhbHVlICogQ2FsYy5kZWcycmFkO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIHRhcmdldCByb3RhdGlvbmFsIHNwZWVkIG9mIHRoZSBtb3RvciBpbiBtL3MuIFxyXG4gICAgICovXHJcbiAgICBnZXQgcm90b3JTcGVlZFNlY29uZCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy4jcm90b3JTcGVlZFNlY29uZDtcclxuICAgIH1cclxuICAgIHNldCByb3RvclNwZWVkU2Vjb25kKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3JvdG9yU3BlZWRTZWNvbmQgPSBfdmFsdWU7XHJcbiAgICAgIGlmICh0aGlzLmpvaW50ICE9IG51bGwpIHRoaXMuam9pbnQuZ2V0TGltaXRNb3RvcjIoKS5tb3RvclNwZWVkID0gX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgICogVGhlIG1heGltdW0gbW90b3IgdG9ycXVlIGluIE5ld3Rvbi4gZm9yY2UgPD0gMCBlcXVhbHMgZGlzYWJsZWQuIFxyXG4gICAgICovXHJcbiAgICBnZXQgcm90b3JUb3JxdWVTZWNvbmQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3JvdG9yVG9ycXVlU2Vjb25kO1xyXG4gICAgfVxyXG4gICAgc2V0IHJvdG9yVG9ycXVlU2Vjb25kKF92YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgIHRoaXMuI3JvdG9yVG9ycXVlU2Vjb25kID0gX3ZhbHVlO1xyXG4gICAgICBpZiAodGhpcy5qb2ludCAhPSBudWxsKSB0aGlzLmpvaW50LmdldExpbWl0TW90b3IyKCkubW90b3JUb3JxdWUgPSBfdmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogSWYgdGhlIHR3byBjb25uZWN0ZWQgUmlnaWRCb2RpZXMgY29sbGlkZSB3aXRoIGVhdGggb3RoZXIuIChEZWZhdWx0ID0gZmFsc2UpXHJcbiAgICAgKi9cclxuXHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gU2F2aW5nL0xvYWRpbmdcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gdGhpcy4jZ2V0TXV0YXRvcigpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLmZpcnN0QXhpcyA9IHRoaXMuYXhpc0ZpcnN0LnNlcmlhbGl6ZSgpO1xyXG4gICAgICBzZXJpYWxpemF0aW9uLnNlY29uZEF4aXMgPSB0aGlzLmF4aXNTZWNvbmQuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgdGhpcy5heGlzRmlyc3QgPSBhd2FpdCBuZXcgVmVjdG9yMygpLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLmF4aXNGaXJzdCk7XHJcbiAgICAgIHRoaXMuYXhpc1NlY29uZCA9IGF3YWl0IG5ldyBWZWN0b3IzKCkuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uYXhpc1NlY29uZCk7XHJcbiAgICAgIHRoaXMuI211dGF0ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBpZiAodHlwZW9mIChfbXV0YXRvci5heGlzRmlyc3QpICE9PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgIHRoaXMuYXhpc0ZpcnN0ID0gbmV3IFZlY3RvcjMoLi4uPG51bWJlcltdPihPYmplY3QudmFsdWVzKF9tdXRhdG9yLmF4aXNGaXJzdCkpKTtcclxuICAgICAgaWYgKHR5cGVvZiAoX211dGF0b3IuYXhpc1NlY29uZCkgIT09IFwidW5kZWZpbmVkXCIpXHJcbiAgICAgICAgdGhpcy5heGlzU2Vjb25kID0gbmV3IFZlY3RvcjMoLi4uPG51bWJlcltdPihPYmplY3QudmFsdWVzKF9tdXRhdG9yLmF4aXNTZWNvbmQpKSk7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5heGlzRmlyc3Q7XHJcbiAgICAgIGRlbGV0ZSBfbXV0YXRvci5heGlzU2Vjb25kO1xyXG4gICAgICB0aGlzLiNtdXRhdGUoX211dGF0b3IpO1xyXG4gICAgICB0aGlzLmRlbGV0ZUZyb21NdXRhdG9yKF9tdXRhdG9yLCB0aGlzLiNnZXRNdXRhdG9yKCkpO1xyXG4gICAgICBzdXBlci5tdXRhdGUoX211dGF0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICBsZXQgbXV0YXRvcjogTXV0YXRvciA9IHN1cGVyLmdldE11dGF0b3IoKTtcclxuICAgICAgT2JqZWN0LmFzc2lnbihtdXRhdG9yLCB0aGlzLiNnZXRNdXRhdG9yKCkpO1xyXG4gICAgICBtdXRhdG9yLmF4aXNGaXJzdCA9IHRoaXMuYXhpc0ZpcnN0LmdldE11dGF0b3IoKTtcclxuICAgICAgbXV0YXRvci5heGlzU2Vjb25kID0gdGhpcy5heGlzU2Vjb25kLmdldE11dGF0b3IoKTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgI2dldE11dGF0b3IgPSAoKTogTXV0YXRvciA9PiB7XHJcbiAgICAgIGxldCBtdXRhdG9yOiBNdXRhdG9yID0ge1xyXG4gICAgICAgIHNwcmluZ0RhbXBpbmdGaXJzdDogdGhpcy4jc3ByaW5nRGFtcGluZ0ZpcnN0LFxyXG4gICAgICAgIHNwcmluZ0ZyZXF1ZW5jeUZpcnN0OiB0aGlzLiNzcHJpbmdGcmVxdWVuY3lGaXJzdCxcclxuICAgICAgICBzcHJpbmdEYW1waW5nU2Vjb25kOiB0aGlzLiNzcHJpbmdEYW1waW5nU2Vjb25kLFxyXG4gICAgICAgIHNwcmluZ0ZyZXF1ZW5jeVNlY29uZDogdGhpcy4jc3ByaW5nRnJlcXVlbmN5U2Vjb25kLFxyXG4gICAgICAgIG1heFJvdG9yRmlyc3Q6IHRoaXMuI21heFJvdG9yRmlyc3QsXHJcbiAgICAgICAgbWluUm90b3JGaXJzdDogdGhpcy4jbWluUm90b3JGaXJzdCxcclxuICAgICAgICByb3RvclNwZWVkRmlyc3Q6IHRoaXMuI3JvdG9yU3BlZWRGaXJzdCxcclxuICAgICAgICByb3RvclRvcnF1ZUZpcnN0OiB0aGlzLiNyb3RvclRvcnF1ZUZpcnN0LFxyXG4gICAgICAgIG1heFJvdG9yU2Vjb25kOiB0aGlzLiNtYXhSb3RvclNlY29uZCxcclxuICAgICAgICBtaW5Sb3RvclNlY29uZDogdGhpcy4jbWluUm90b3JTZWNvbmQsXHJcbiAgICAgICAgcm90b3JTcGVlZFNlY29uZDogdGhpcy4jcm90b3JTcGVlZFNlY29uZCxcclxuICAgICAgICByb3RvclRvcnF1ZVNlY29uZDogdGhpcy4jcm90b3JUb3JxdWVTZWNvbmRcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIG11dGF0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgI211dGF0ZSA9IChfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQgPT4ge1xyXG4gICAgICB0aGlzLm11dGF0ZUJhc2UoX211dGF0b3IsIFtcclxuICAgICAgICBcInNwcmluZ0RhbXBpbmdGaXJzdFwiLCBcInNwcmluZ0ZyZXF1ZW5jeUZpcnN0XCIsIFwic3ByaW5nRGFtcGluZ1NlY29uZFwiLCBcInNwcmluZ0ZyZXF1ZW5jeVNlY29uZFwiLFxyXG4gICAgICAgIFwibWF4Um90b3JGaXJzdFwiLCBcIm1pblJvdG9yRmlyc3RcIiwgXCJyb3RvclNwZWVkRmlyc3RcIiwgXCJyb3RvclRvcnF1ZUZpcnN0XCIsXHJcbiAgICAgICAgXCJtYXhSb3RvclNlY29uZFwiLCBcIm1pblJvdG9yU2Vjb25kXCIsIFwicm90b3JTcGVlZFNlY29uZFwiLCBcIi5yb3RvclRvcnF1ZVNlY29uZFwiXVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgLy8jZW5kcmVnaW9uXHJcblxyXG4gICAgcHJvdGVjdGVkIGNvbnN0cnVjdEpvaW50KCk6IHZvaWQge1xyXG4gICAgICB0aGlzLiNheGlzU3ByaW5nRGFtcGVyRmlyc3QgPSBuZXcgT0lNTy5TcHJpbmdEYW1wZXIoKS5zZXRTcHJpbmcodGhpcy4jc3ByaW5nRnJlcXVlbmN5Rmlyc3QsIHRoaXMuI3NwcmluZ0RhbXBpbmdGaXJzdCk7XHJcbiAgICAgIHRoaXMuI2F4aXNTcHJpbmdEYW1wZXJTZWNvbmQgPSBuZXcgT0lNTy5TcHJpbmdEYW1wZXIoKS5zZXRTcHJpbmcodGhpcy4jc3ByaW5nRnJlcXVlbmN5U2Vjb25kLCB0aGlzLiNzcHJpbmdEYW1waW5nU2Vjb25kKTtcclxuXHJcbiAgICAgIHRoaXMuI21vdG9yRmlyc3QgPSBuZXcgT0lNTy5Sb3RhdGlvbmFsTGltaXRNb3RvcigpLnNldExpbWl0cyh0aGlzLiNtaW5Sb3RvckZpcnN0ICogQ2FsYy5kZWcycmFkLCB0aGlzLiNtYXhSb3RvckZpcnN0ICogQ2FsYy5kZWcycmFkKTtcclxuICAgICAgdGhpcy4jbW90b3JGaXJzdC5zZXRNb3Rvcih0aGlzLiNyb3RvclNwZWVkRmlyc3QsIHRoaXMuI3JvdG9yVG9ycXVlRmlyc3QpO1xyXG4gICAgICB0aGlzLiNtb3RvclNlY29uZCA9IG5ldyBPSU1PLlJvdGF0aW9uYWxMaW1pdE1vdG9yKCkuc2V0TGltaXRzKHRoaXMuI21pblJvdG9yRmlyc3QgKiBDYWxjLmRlZzJyYWQsIHRoaXMuI21heFJvdG9yRmlyc3QgKiBDYWxjLmRlZzJyYWQpO1xyXG4gICAgICB0aGlzLiNtb3RvclNlY29uZC5zZXRNb3Rvcih0aGlzLiNyb3RvclNwZWVkRmlyc3QsIHRoaXMuI3JvdG9yVG9ycXVlRmlyc3QpO1xyXG5cclxuICAgICAgdGhpcy5jb25maWcgPSBuZXcgT0lNTy5Vbml2ZXJzYWxKb2ludENvbmZpZygpO1xyXG4gICAgICBzdXBlci5jb25zdHJ1Y3RKb2ludCh0aGlzLiNheGlzRmlyc3QsIHRoaXMuI2F4aXNTZWNvbmQpO1xyXG4gICAgICB0aGlzLmNvbmZpZy5saW1pdE1vdG9yMSA9IHRoaXMuI21vdG9yRmlyc3Q7XHJcbiAgICAgIHRoaXMuY29uZmlnLmxpbWl0TW90b3IyID0gdGhpcy4jbW90b3JTZWNvbmQ7XHJcbiAgICAgIHRoaXMuY29uZmlnLnNwcmluZ0RhbXBlcjEgPSB0aGlzLiNheGlzU3ByaW5nRGFtcGVyRmlyc3Q7XHJcbiAgICAgIHRoaXMuY29uZmlnLnNwcmluZ0RhbXBlcjIgPSB0aGlzLiNheGlzU3ByaW5nRGFtcGVyU2Vjb25kO1xyXG5cclxuICAgICAgdGhpcy5qb2ludCA9IG5ldyBPSU1PLlVuaXZlcnNhbEpvaW50KHRoaXMuY29uZmlnKTtcclxuICAgICAgc3VwZXIuY29uZmlndXJlSm9pbnQoKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICAqIEEgcGh5c2ljYWwgY29ubmVjdGlvbiBiZXR3ZWVuIHR3byBib2RpZXMgd2l0aCBubyBtb3ZlbWVudC4gXHJcbiAgICAgKiBCZXN0IHdheSB0byBzaW11bGF0ZSBjb252ZXggb2JqZWN0cyBsaWtlIGEgY2hhaXIgc2VhdCBjb25uZWN0ZWQgdG8gY2hhaXIgbGVncy5cclxuICAgICAqIFRoZSBhY3R1YWwgYW5jaG9yIHBvaW50IGRvZXMgbm90IG1hdHRlciB0aGF0IG11Y2gsIG9ubHkgaW4gdmVyeSBzcGVjaWZpYyBlZGdlIGNhc2VzLlxyXG4gICAgICogQmVjYXVzZSB3ZWxkaW5nIG1lYW5zIHRoZXkgc2ltcGx5IGRvIG5vdCBkaXNjb25uZWN0LiAodW5sZXNzIHlvdSBhZGQgQnJlYWthYmlsaXR5KVxyXG4gICAqIEBhdXRob3IgTWFya28gRmVocmVuYmFjaCwgSEZVLCAyMDIwIHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBKb2ludFdlbGRpbmcgZXh0ZW5kcyBKb2ludCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gSm9pbnQucmVnaXN0ZXJTdWJjbGFzcyhKb2ludFdlbGRpbmcpO1xyXG5cclxuICAgIHByb3RlY3RlZCBqb2ludDogT0lNTy5HZW5lcmljSm9pbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY29uZmlnOiBPSU1PLkdlbmVyaWNKb2ludENvbmZpZyA9IG5ldyBPSU1PLkdlbmVyaWNKb2ludENvbmZpZygpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9ib2R5QW5jaG9yOiBDb21wb25lbnRSaWdpZGJvZHkgPSBudWxsLCBfYm9keVRpZWQ6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGwsIF9sb2NhbEFuY2hvcjogVmVjdG9yMyA9IG5ldyBWZWN0b3IzKDAsIDAsIDApKSB7XHJcbiAgICAgIHN1cGVyKF9ib2R5QW5jaG9yLCBfYm9keVRpZWQpO1xyXG5cclxuICAgICAgdGhpcy5hbmNob3IgPSBuZXcgVmVjdG9yMyhfbG9jYWxBbmNob3IueCwgX2xvY2FsQW5jaG9yLnksIF9sb2NhbEFuY2hvci56KTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gU2F2aW5nL0xvYWRpbmdcclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0ge1xyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGU+IHtcclxuICAgICAgc3VwZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb25bc3VwZXIuY29uc3RydWN0b3IubmFtZV0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0Sm9pbnQoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuY29uZmlnID0gbmV3IE9JTU8uR2VuZXJpY0pvaW50Q29uZmlnKCk7XHJcbiAgICAgIHN1cGVyLmNvbnN0cnVjdEpvaW50KG5ldyBPSU1PLk1hdDMoKSwgbmV3IE9JTU8uTWF0MygpKTtcclxuXHJcbiAgICAgIHRoaXMuam9pbnQgPSBuZXcgT0lNTy5HZW5lcmljSm9pbnQodGhpcy5jb25maWcpO1xyXG4gICAgICB0aGlzLmpvaW50LnNldEFsbG93Q29sbGlzaW9uKHRoaXMuaW50ZXJuYWxDb2xsaXNpb24pO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi9QaHlzaWNzL09pbW9QaHlzaWNzLmQudHNcIi8+XHJcblxyXG5uYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgICogTWFuYWdlcyB0aGUgT0lNTyBwaHlzaWNzIGVuZ2luZSBmb3IgRlVER0UuIE11bHRpcGxlIGluc3RhbmNlcyBtYXkgYmUgY3JlYXRlZCwgb25lIGlzIGFjdGl2ZSBhdCBhIHRpbWUuXHJcbiAgICAqIEFsbCBtZXRob2RzIGFyZSBzdGF0aWMgYW5kIHVzZSB0aGUgY3VycmVudGx5IGFjdGl2ZSBpbnN0YW5jZS4gQXQgc3RhcnR1cCwgYSBkZWZhdWx0IGluc3RhbmNlIGlzIGNyZWF0ZWQgYW5kIGJlY29tZSB0aGUgYWN0aXZlIGluc3RhbmNlXHJcbiAgICAqIEF0dGFjaGluZyBhIHtAbGluayBDb21wb25lbnRSaWdpZGJvZHl9IHRvIGEge0BsaW5rIE5vZGV9IHBsYWNlcyBhIHBoeXNpY3MgY29sbGlkZXIgaW4gdGhlIHBoeXNpY3MgaW5zdGFuY2UgYWN0aXZlIGF0IHRoYXQgdGltZS5cclxuICAgICogQGF1dGhvciBNYXJrbyBGZWhyZW5iYWNoLCBIRlUgMjAyMFxyXG4gICAgKi9cclxuICBleHBvcnQgY2xhc3MgUGh5c2ljcyB7XHJcbiAgICAvKiogVGhlIFNFVFRJTkdTIHRoYXQgYXBwbHkgdG8gdGhlIHBoeXNpY2FsIHdvcmxkLiBSYW5naW5nIGZyb20gdGhpbmdzIGxpa2Ugc2xlZXBpbmcsIGNvbGxpc2lvblNoYXBlVGhpY2tuZXNzIGFuZCBvdGhlcnMgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0dGluZ3M6IFBoeXNpY3NTZXR0aW5ncyA9IG5ldyBQaHlzaWNzU2V0dGluZ3MoQ09MTElTSU9OX0dST1VQLkRFRkFVTFQsIChDT0xMSVNJT05fR1JPVVAuREVGQVVMVCB8IENPTExJU0lPTl9HUk9VUC5HUk9VUF8xIHwgQ09MTElTSU9OX0dST1VQLkdST1VQXzIgfCBDT0xMSVNJT05fR1JPVVAuR1JPVVBfMyB8IENPTExJU0lPTl9HUk9VUC5HUk9VUF80KSk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyDGkmFjdGl2ZTogUGh5c2ljcyA9IG5ldyBQaHlzaWNzKCk7XHJcblxyXG4gICAgLyoqIFRoZSByZW5kZXJpbmcgb2YgcGh5c2ljYWwgZGVidWcgaW5mb3JtYXRpb25zLiBVc2VkIGludGVybmFsbHkgbm8gaW50ZXJhY3Rpb24gbmVlZGVkLiovXHJcbiAgICAjZGVidWdEcmF3OiBQaHlzaWNzRGVidWdEcmF3O1xyXG4gICAgLyoqIFRoZSBjYW1lcmEvdmlld3BvcnQgdGhlIHBoeXNpY3MgYXJlIGRlYnVnZ2VkIHRvLiBVc2VkIGludGVybmFsbHkgbm8gaW50ZXJhY3Rpb24gbmVlZGVkLiAqL1xyXG4gICAgI21haW5DYW06IENvbXBvbmVudENhbWVyYTtcclxuXHJcbiAgICBwcml2YXRlIG9pbW9Xb3JsZDogT0lNTy5Xb3JsZDtcclxuICAgIHByaXZhdGUgYm9keUxpc3Q6IENvbXBvbmVudFJpZ2lkYm9keVtdID0gbmV3IEFycmF5KCk7XHJcbiAgICBwcml2YXRlIGpvaW50TGlzdDogSm9pbnRbXSA9IG5ldyBBcnJheSgpO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgaWYgKHR5cGVvZiBPSU1PID09IFwidW5kZWZpbmVkXCIpIHsvLyBDaGVjayBpZiBPSU1PIE5hbWVzcGFjZSB3YXMgbG9hZGVkLCBlbHNlIGRvIG5vdCB1c2UgYW55IHBoeXNpY3MuIENoZWNrIGlzIG5lZWRlZCB0byBlbnN1cmUgRlVER0UgY2FuIGJlIHVzZWQgd2l0aG91dCBQaHlzaWNzXHJcbiAgICAgICAgRGVidWcuZXJyb3IoXCJPSU1PIHBoeXNpY3MgZW5naW5lIG5vdCBjb25uZWN0ZWQhXCIpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMub2ltb1dvcmxkID0gbmV3IE9JTU8uV29ybGQoKTtcclxuICAgICAgdGhpcy4jZGVidWdEcmF3ID0gbmV3IFBoeXNpY3NEZWJ1Z0RyYXcoKTsgIC8vQ3JlYXRlIGEgRlVER0UgUGh5c2ljcyBkZWJ1Z2dpbmcgaGFuZGxpbmcgb2JqZWN0XHJcbiAgICAgIHRoaXMub2ltb1dvcmxkLnNldERlYnVnRHJhdyh0aGlzLiNkZWJ1Z0RyYXcub2ltb0RlYnVnRHJhdyk7IC8vVGVsbCBPaW1vUGh5c2ljcyB3aGVyZSB0byBkZWJ1ZyB0byBhbmQgaG93IGl0IHdpbGwgYmUgaGFuZGxlZFxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWZpbmUgdGhlIGN1cnJlbnRseSBhY3RpdmUgUGh5c2ljcyBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNldCBhY3RpdmVJbnN0YW5jZShfcGh5c2ljczogUGh5c2ljcykge1xyXG4gICAgICBQaHlzaWNzLsaSYWN0aXZlID0gX3BoeXNpY3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdldCB0aGUgY3VycmVudGx5IGFjdGl2ZSBQaHlzaWNzIGluc3RhbmNlICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBhY3RpdmVJbnN0YW5jZSgpOiBQaHlzaWNzIHtcclxuICAgICAgcmV0dXJuIFBoeXNpY3MuxpJhY3RpdmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgZGVidWdEcmF3KCk6IFBoeXNpY3NEZWJ1Z0RyYXcge1xyXG4gICAgICByZXR1cm4gUGh5c2ljcy7GkmFjdGl2ZS4jZGVidWdEcmF3O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgbWFpbkNhbSgpOiBDb21wb25lbnRDYW1lcmEge1xyXG4gICAgICByZXR1cm4gUGh5c2ljcy7GkmFjdGl2ZS4jbWFpbkNhbTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQ2FzdCBhIFJBWSBpbnRvIHRoZSBwaHlzaWNhbCB3b3JsZCBmcm9tIGEgb3JpZ2luIHBvaW50IGluIGEgY2VydGFpbiBkaXJlY3Rpb24uIFJlY2VpdmluZyBpbmZvcm1hdGlvbnMgYWJvdXQgdGhlIGhpdCBvYmplY3QgYW5kIHRoZVxyXG4gICAgKiBoaXQgcG9pbnQuIERvIG5vdCBzcGVjaWZ5IGEgX2dyb3VwIHRvIHJheWNhc3QgdGhlIHdob2xlIHdvcmxkLCBlbHNlIG9ubHkgYm9kaWVzIHdpdGhpbiB0aGUgc3BlY2lmaWMgZ3JvdXAgY2FuIGJlIGhpdC5cclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJheWNhc3QoX29yaWdpbjogVmVjdG9yMywgX2RpcmVjdGlvbjogVmVjdG9yMywgX2xlbmd0aDogbnVtYmVyID0gMSwgX2RlYnVnRHJhdzogYm9vbGVhbiA9IGZhbHNlLCBfZ3JvdXA6IENPTExJU0lPTl9HUk9VUCA9IENPTExJU0lPTl9HUk9VUC5ERUZBVUxUKTogUmF5SGl0SW5mbyB7XHJcbiAgICAgIGxldCBoaXRJbmZvOiBSYXlIaXRJbmZvID0gbmV3IFJheUhpdEluZm8oKTtcclxuICAgICAgbGV0IHJheTogT0lNTy5SYXlDYXN0Q2xvc2VzdCA9IG5ldyBPSU1PLlJheUNhc3RDbG9zZXN0KCk7XHJcbiAgICAgIGxldCBiZWdpbjogT0lNTy5WZWMzID0gbmV3IE9JTU8uVmVjMyhfb3JpZ2luLngsIF9vcmlnaW4ueSwgX29yaWdpbi56KTtcclxuICAgICAgbGV0IGVuZDogT0lNTy5WZWMzID0gdGhpcy5nZXRSYXlFbmRQb2ludChiZWdpbiwgbmV3IFZlY3RvcjMoX2RpcmVjdGlvbi54LCBfZGlyZWN0aW9uLnksIF9kaXJlY3Rpb24ueiksIF9sZW5ndGgpO1xyXG4gICAgICByYXkuY2xlYXIoKTtcclxuICAgICAgaWYgKF9ncm91cCA9PSBDT0xMSVNJT05fR1JPVVAuREVGQVVMVCkgeyAvL0Nhc2UgMTogUmF5Y2FzdGluZyB0aGUgd2hvbGUgd29ybGQsIG5vcm1hbCBtb2RlXHJcbiAgICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQucmF5Q2FzdChiZWdpbiwgZW5kLCByYXkpO1xyXG4gICAgICB9IGVsc2UgeyAvL0Nhc2UyOiBSYXljYXN0aW5nIG9uIGVhY2ggYm9keSBpbiBhIHNwZWNpZmljIGdyb3VwXHJcbiAgICAgICAgbGV0IGFsbEhpdHM6IFJheUhpdEluZm9bXSA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIFBoeXNpY3MuxpJhY3RpdmUuYm9keUxpc3QuZm9yRWFjaChmdW5jdGlvbiAodmFsdWU6IENvbXBvbmVudFJpZ2lkYm9keSk6IHZvaWQge1xyXG4gICAgICAgICAgaWYgKHZhbHVlLmNvbGxpc2lvbkdyb3VwID09IF9ncm91cCkge1xyXG4gICAgICAgICAgICBoaXRJbmZvID0gdmFsdWUucmF5Y2FzdFRoaXNCb2R5KF9vcmlnaW4sIF9kaXJlY3Rpb24sIF9sZW5ndGgpO1xyXG4gICAgICAgICAgICBpZiAoaGl0SW5mby5oaXQgPT0gdHJ1ZSkgeyAvL0V2ZXJ5IGhpdCBpcyBjb3VsZCBwb3RlbnRpYWxseSBiZSB0aGUgY2xvc2VzdFxyXG4gICAgICAgICAgICAgIGFsbEhpdHMucHVzaChoaXRJbmZvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFsbEhpdHMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWU6IFJheUhpdEluZm8pOiB2b2lkIHsgLy9nZXQgdGhlIGNsb3Nlc3QgaGl0SW5mb1xyXG4gICAgICAgICAgaWYgKHZhbHVlLmhpdERpc3RhbmNlIDwgaGl0SW5mby5oaXREaXN0YW5jZSB8fCBoaXRJbmZvLmhpdCA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBoaXRJbmZvID0gdmFsdWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHJheS5oaXQpIHsgLy9GaWxsIGluIGluZm9ybWF0aW9ucyBvbiB0aGUgaGl0XHJcbiAgICAgICAgaGl0SW5mby5oaXQgPSB0cnVlO1xyXG4gICAgICAgIGhpdEluZm8uaGl0UG9pbnQgPSBuZXcgVmVjdG9yMyhyYXkucG9zaXRpb24ueCwgcmF5LnBvc2l0aW9uLnksIHJheS5wb3NpdGlvbi56KTtcclxuICAgICAgICBoaXRJbmZvLmhpdE5vcm1hbCA9IG5ldyBWZWN0b3IzKHJheS5ub3JtYWwueCwgcmF5Lm5vcm1hbC55LCByYXkubm9ybWFsLnopO1xyXG4gICAgICAgIGhpdEluZm8uaGl0RGlzdGFuY2UgPSB0aGlzLmdldFJheURpc3RhbmNlKF9vcmlnaW4sIGhpdEluZm8uaGl0UG9pbnQpO1xyXG4gICAgICAgIGhpdEluZm8ucmlnaWRib2R5Q29tcG9uZW50ID0gcmF5LnNoYXBlLnVzZXJEYXRhO1xyXG4gICAgICAgIGhpdEluZm8ucmF5RW5kID0gbmV3IFZlY3RvcjMoZW5kLngsIGVuZC55LCBlbmQueik7XHJcbiAgICAgICAgaGl0SW5mby5yYXlPcmlnaW4gPSBfb3JpZ2luO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhpdEluZm8ucmF5T3JpZ2luID0gX29yaWdpbjtcclxuICAgICAgICBoaXRJbmZvLmhpdFBvaW50ID0gbmV3IFZlY3RvcjMoZW5kLngsIGVuZC55LCBlbmQueik7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKF9kZWJ1Z0RyYXcpIHsgLy9IYW5kbGUgZGVidWdnaW5nXHJcbiAgICAgICAgUGh5c2ljcy7GkmFjdGl2ZS4jZGVidWdEcmF3LmRlYnVnUmF5KGhpdEluZm8ucmF5T3JpZ2luLCBoaXRJbmZvLmhpdFBvaW50LCBuZXcgQ29sb3IoMCwgMSwgMCwgMSkpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBoaXRJbmZvO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICogU2ltdWxhdGVzIHRoZSBwaHlzaWNhbCB3b3JsZC4gX2RlbHRhVGltZSBpcyB0aGUgYW1vdW50IG9mIHRpbWUgYmV0d2VlbiBwaHlzaWNhbCBzdGVwcywgZGVmYXVsdCBpcyBhYm91dCAxN21zIChhc3N1bWluZyA2MCBmcmFtZXMgcGVyIHNlY29uZCkuXHJcbiAgICAqIFRoZSBtYXhpbXVtIHZhbHVlIGlzIDEvMzAgb2YgYSBzZWNvbmQsIHRvIGhhdmUgbW9yZSBjb25zaXN0ZW50IGZyYW1lIGNhbGN1bGF0aW9ucy5cclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNpbXVsYXRlKF9kZWx0YVRpbWU6IG51bWJlciA9IDEgLyA2MCk6IHZvaWQge1xyXG4gICAgICBpZiAoUGh5c2ljcy7GkmFjdGl2ZS5qb2ludExpc3QubGVuZ3RoID4gMClcclxuICAgICAgICBQaHlzaWNzLmNvbm5lY3RKb2ludHMoKTsgLy9Db25uZWN0IGpvaW50cyBpZiBhbnl0aGluZyBoYXMgaGFwcGVuZWQgYmV0d2VlbiB0aGUgbGFzdCBjYWxsIHRvIGFueSBvZiB0aGUgdHdvIHBhaXJlZCByaWdpZGJvZGllc1xyXG4gICAgICBpZiAoVGltZS5nYW1lLmdldFNjYWxlKCkgIT0gMCkgeyAvL0lmIHRpbWUgaXMgc3RvcHBlZCBkbyBub3Qgc2ltdWxhdGUgdG8gYXZvaWQgbWlzYmVoYXZpb3VyXHJcbiAgICAgICAgX2RlbHRhVGltZSA9IF9kZWx0YVRpbWUgPiAxIC8gMzAgPyAxIC8gMzAgOiBfZGVsdGFUaW1lOyAvL0lmIGluc3RlYWQgb2YgYSBmaXhlZCByYXRlIHRoZSBnYW1lIGZyYW1lcmF0ZSBpcyB1c2VkLCBtYWtlIHN1cmUgaXJyZWd1bGFyIHRpbWluZ3MgYXJlIGZpeGVkIHRvIDMwZnBzXHJcbiAgICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQuc3RlcChfZGVsdGFUaW1lICogVGltZS5nYW1lLmdldFNjYWxlKCkpOyAgLy9VcGRhdGUgdGhlIHNpbXVsYXRpb24gYnkgdGhlIGdpdmVuIGRlbHRhVGltZSBhbmQgdGhlIEZVREdFIGludGVybmFsIFRpbWVTY2FsZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3IGluZm9ybWF0aW9uIGFib3V0IHRoZSBjdXJyZW50bHkgYWN0aXZlIGluc3RhbmNlIHVzaW5nIHRoZSB7QGxpbmsgQ29tcG9uZW50Q2FtZXJhfSBnaXZlblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGRyYXcoX2NtcENhbWVyYTogQ29tcG9uZW50Q2FtZXJhLCBfbW9kZT86IFBIWVNJQ1NfREVCVUdNT0RFKTogdm9pZCB7XHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUuI2RlYnVnRHJhdy5zZXREZWJ1Z01vZGUoX21vZGUpO1xyXG4gICAgICBQaHlzaWNzLsaSYWN0aXZlLiNtYWluQ2FtID0gX2NtcENhbWVyYTtcclxuICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQuZGVidWdEcmF3KCk7IC8vRmlsbGluZyB0aGUgcGh5c2ljcyB3b3JsZCBkZWJ1ZyBpbmZvcm1hdGlvbnMgaW50byB0aGUgZGVidWcgcmVuZGVyaW5nIGhhbmRsZXJcclxuICAgICAgUGh5c2ljcy7GkmFjdGl2ZS4jZGVidWdEcmF3LmRyYXdCdWZmZXJzKCk7XHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUuI2RlYnVnRHJhdy5jbGVhckJ1ZmZlcnMoKTsgIC8vVXBkYXRlcyBpbmZvIGFib3V0IHRoZSBjdXJyZW50IHByb2plY3Rpb24sIHJlc2V0dGluZyB0aGUgcG9pbnRzL2xpbmVzL3RyaWFuZ2xlcyB0aGF0IG5lZWQgdG8gYmUgZHJhd24gZnJvbSBkZWJ1Z1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICAqIEFkanVzdHMgdGhlIHRyYW5zZm9ybXMgb2YgdGhlIHtAbGluayBDb21wb25lbnRSaWdpZGJvZHl9cyBpbiB0aGUgZ2l2ZW4gYnJhbmNoIHRvIG1hdGNoIHRoZWlyIG5vZGVzIG9yIG1lc2hlc1xyXG4gICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBhZGp1c3RUcmFuc2Zvcm1zKF9icmFuY2g6IE5vZGUsIF90b01lc2g6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgICBSZW5kZXIucHJlcGFyZShfYnJhbmNoLCB7IGlnbm9yZVBoeXNpY3M6IHRydWUgfSk7XHJcbiAgICAgIGZvciAobGV0IG5vZGUgb2YgUmVuZGVyLm5vZGVzUGh5c2ljcylcclxuICAgICAgICBub2RlLmdldENvbXBvbmVudChDb21wb25lbnRSaWdpZGJvZHkpLmluaXRpYWxpemUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogR2V0IHRoZSBhcHBsaWVkIGdyYXZpdGF0aW9uYWwgZm9yY2Ugb2YgdGhlIGFjdGl2ZSBpbnN0YW5jZS4gRGVmYXVsdCBlYXJ0aCBncmF2aXR5ID0gOS44MSBtL3NcclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEdyYXZpdHkoKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCB0bXBWZWM6IE9JTU8uVmVjMyA9IFBoeXNpY3MuxpJhY3RpdmUub2ltb1dvcmxkLmdldEdyYXZpdHkoKTtcclxuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHRtcFZlYy54LCB0bXBWZWMueSwgdG1wVmVjLnopO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBTZXQgdGhlIGFwcGxpZWQgZ3Jhdml0YXRpb25hbCBmb3JjZSBvZiB0aGUgYWN0aXZlIGluc3RhbmNlLiBEZWZhdWx0IGVhcnRoIGdyYXZpdHkgPSA5LjgxIG0vc1xyXG4gICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0R3Jhdml0eShfdmFsdWU6IFZlY3RvcjMpOiB2b2lkIHtcclxuICAgICAgbGV0IHRtcFZlYzogT0lNTy5WZWMzID0gbmV3IE9JTU8uVmVjMyhfdmFsdWUueCwgX3ZhbHVlLnksIF92YWx1ZS56KTtcclxuICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQuc2V0R3Jhdml0eSh0bXBWZWMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBZGQgYSBuZXcgT0lNTyBSaWdpZGJvZHkgdG8gdGhlIGFjdGl2ZSBpbnN0YW5jZSwgaGFwcGVucyBhdXRvbWF0aWNhbGx5IHdoZW4gYWRkaW5nIGEgRlVER0UgUmlnaWRib2R5IENvbXBvbmVudC5cclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZFJpZ2lkYm9keShfY21wUkI6IENvbXBvbmVudFJpZ2lkYm9keSk6IHZvaWQge1xyXG4gICAgICBQaHlzaWNzLsaSYWN0aXZlLmJvZHlMaXN0LnB1c2goX2NtcFJCKTtcclxuICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQuYWRkUmlnaWRCb2R5KF9jbXBSQi5nZXRPaW1vUmlnaWRib2R5KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBSZW1vdmUgdGhlIE9JTU8gUmlnaWRib2R5IHRvIHRoZSBhY3RpdmUgaW5zdGFuY2UsIGhhcHBlbnMgYXV0b21hdGljYWxseSB3aGVuIHJlbW92aW5nIGEgRlVER0UgUmlnaWRib2R5IENvbXBvbmVudFxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVtb3ZlUmlnaWRib2R5KF9jbXBSQjogQ29tcG9uZW50UmlnaWRib2R5KTogdm9pZCB7XHJcbiAgICAgIC8vIFRPRE86IHR3byBsaXN0cyBhcmUgYmVpbmcgbWFuYWdlZCwgaW5mbyBtaWdodCBkZXZpYXRlLiBDbGVhbnVwIVxyXG4gICAgICBsZXQgb2ltb1JpZ2lkQm9keTogT0lNTy5SaWdpZEJvZHkgPSBfY21wUkIuZ2V0T2ltb1JpZ2lkYm9keSgpO1xyXG4gICAgICBpZiAob2ltb1JpZ2lkQm9keS5fd29ybGQpXHJcbiAgICAgICAgb2ltb1JpZ2lkQm9keS5fd29ybGQucmVtb3ZlUmlnaWRCb2R5KG9pbW9SaWdpZEJvZHkpO1xyXG4gICAgICAvLyB3aGF0IGlmIHRoZSByaWdpZGJvZHlzIG9pbW8td29ybGQgZG9lcyBub3QgYmVsb25nIHRvIHRoZSBhY3RpdmUgaW5zdGFuY2U/XHJcbiAgICAgIGxldCBpZDogbnVtYmVyID0gUGh5c2ljcy7GkmFjdGl2ZS5ib2R5TGlzdC5pbmRleE9mKF9jbXBSQik7XHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUuYm9keUxpc3Quc3BsaWNlKGlkLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQWRkIGEgbmV3IE9JTU8gSm9pbnQvQ29uc3RyYWludCB0byB0aGUgYWN0aXZlIGluc3RhbmNlLCBoYXBwZW5zIGF1dG9tYXRpY2FsbHkgd2hlbiBhZGRpbmcgYSBGVURHRSBKb2ludCBDb21wb25lbnRcclxuICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZEpvaW50KF9jbXBKb2ludDogSm9pbnQpOiB2b2lkIHtcclxuICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQuYWRkSm9pbnQoX2NtcEpvaW50LmdldE9pbW9Kb2ludCgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICogQ2FsbGVkIGludGVybmFsbHkgdG8gaW5mb3JtIHRoZSBwaHlzaWNzIHN5c3RlbSB0aGF0IGEgam9pbnQgaGFzIGEgY2hhbmdlIG9mIGNvcmUgcHJvcGVydGllcyBhbmQgbmVlZHMgdG8gYmUgcmVjcmVhdGVkLlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgY2hhbmdlSm9pbnRTdGF0dXMoX2NtcEpvaW50OiBKb2ludCk6IHZvaWQge1xyXG4gICAgICBpZiAoUGh5c2ljcy7GkmFjdGl2ZS5qb2ludExpc3QuaW5kZXhPZihfY21wSm9pbnQpIDwgMClcclxuICAgICAgICBQaHlzaWNzLsaSYWN0aXZlLmpvaW50TGlzdC5wdXNoKF9jbXBKb2ludCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogUmVtb3ZlIHRoZSBPSU1PIEpvaW50L0NvbnN0cmFpbnQgdG8gdGhlIGFjdGl2ZSBpbnN0YW5jZSwgaGFwcGVucyBhdXRvbWF0aWNhbGx5IHdoZW4gcmVtb3ZpbmcgYSBGVURHRSBKb2ludCBDb21wb25lbnRcclxuICAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVtb3ZlSm9pbnQoX2NtcEpvaW50OiBKb2ludCk6IHZvaWQge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIFBoeXNpY3MuxpJhY3RpdmUub2ltb1dvcmxkLnJlbW92ZUpvaW50KF9jbXBKb2ludC5nZXRPaW1vSm9pbnQoKSk7XHJcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcjogdW5rbm93bikge1xyXG4gICAgICAgIERlYnVnLmZ1ZGdlKF9lcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKiogUmV0dXJucyBhbGwgdGhlIENvbXBvbmVudFJpZ2lkYm9kaWVzIHRoYXQgYXJlIGtub3duIHRvIHRoZSBhY3RpdmUgaW5zdGFuY2UuICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEJvZHlMaXN0KCk6IENvbXBvbmVudFJpZ2lkYm9keVtdIHtcclxuICAgICAgcmV0dXJuIFBoeXNpY3MuxpJhY3RpdmUuYm9keUxpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEdpdmluZyBhIENvbXBvbmVudFJpZ2lkYm9keSBhIHNwZWNpZmljIGlkZW50aWZpY2F0aW9uIG51bWJlciBzbyBpdCBjYW4gYmUgcmVmZXJlbmNlZCBpbiB0aGUgbG9hZGluZyBwcm9jZXNzLiBBbmQgcmVtb3ZlZCByYidzIGNhbiByZWNlaXZlIGEgbmV3IGlkLiAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBkaXN0cmlidXRlQm9keUlEKCk6IG51bWJlciB7XHJcbiAgICAgIGxldCBmcmVlSWQ6IG51bWJlciA9IDA7XHJcbiAgICAgIGxldCBmcmVlOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUuYm9keUxpc3QuZm9yRWFjaCgoX3ZhbHVlOiBDb21wb25lbnRSaWdpZGJvZHkpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAoX3ZhbHVlLmlkICE9IGZyZWVJZCkge1xyXG4gICAgICAgICAgZnJlZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGZyZWUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFmcmVlKSB7XHJcbiAgICAgICAgICBmcmVlSWQrKztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIGZyZWVJZDtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBDb25uZWN0IGFsbCBqb2ludHMgdGhhdCBhcmUgbm90IGNvbm5lY3RlZCB5ZXQuIFVzZWQgaW50ZXJuYWxseSBubyB1c2VyIGludGVyYWN0aW9uIG5lZWRlZC4gVGhpcyBmdW5jdGlvbmFsaXR5IGlzIGNhbGxlZCBhbmQgbmVlZGVkIHRvIG1ha2Ugc3VyZSBqb2ludHMgY29ubmVjdC9kaXNjb25uZWN0XHJcbiAgICAgKiBpZiBhbnkgb2YgdGhlIHR3byBwYWlyZWQgQ29tcG9uZW50UmlnaWRib2RpZXMgY2hhbmdlLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNvbm5lY3RKb2ludHMoKTogdm9pZCB7IC8vVHJ5IHRvIGNvbm5lY3QgZGlydHkgam9pbnRzIHVudGlsIHRoZXkgYXJlIGNvbm5lY3RlZFxyXG4gICAgICBsZXQgam9pbnRzVG9Db25uZWN0OiBKb2ludFtdID0gUGh5c2ljcy7GkmFjdGl2ZS5qb2ludExpc3Q7XHJcbiAgICAgIFBoeXNpY3MuxpJhY3RpdmUuam9pbnRMaXN0ID0gW107XHJcbiAgICAgIGpvaW50c1RvQ29ubmVjdC5mb3JFYWNoKChfam9pbnQ6IEpvaW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKF9qb2ludC5pc0Nvbm5lY3RlZCgpID09IGZhbHNlKVxyXG4gICAgICAgICAgaWYgKF9qb2ludC5pc0FjdGl2ZSlcclxuICAgICAgICAgICAgX2pvaW50LmNvbm5lY3QoKTtcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5qb2ludExpc3QucHVzaChfam9pbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogUmVtb3ZlIGFsbCBvaW1vIGpvaW50cyBhbmQgcmlnaWRib2RpZXMsIHNvIHRoYXQgdGhleSBjYW4gYmUgcmV1c2VkIGluIGFub3RoZXIgd29ybGQgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICAgIGxldCBvaW1vV29ybGQ6IE9JTU8uV29ybGQgPSBQaHlzaWNzLsaSYWN0aXZlLm9pbW9Xb3JsZDtcclxuICAgICAgaWYgKG9pbW9Xb3JsZCAhPSBudWxsKSB7XHJcbiAgICAgICAgLy9SZXNldHRpbmcgdGhlIHdvcmxkIHNvIGEgbmV3IHdvcmxkIGNhbiBiZSBjcmVhdGVkLCBmaXggZm9yIHJlLW9wZW5pbmcgYSBwcm9qZWN0IGluIGVkaXRvciwgbWFraW5nIHN1cmUgdGhlcmUgYXJlIG5vIG9sZCB0aGluZ3MgY2FsY3VsYXRlZFxyXG4gICAgICAgIGxldCBqb2ludHNXb3JsZDogbnVtYmVyID0gb2ltb1dvcmxkLmdldE51bUpvaW50cygpO1xyXG4gICAgICAgIGxldCBib2RpZXNXb3JsZDogbnVtYmVyID0gb2ltb1dvcmxkLmdldE51bVJpZ2lkQm9kaWVzKCk7XHJcbiAgICAgICAgZm9yIChsZXQgYm9keSBvZiBQaHlzaWNzLsaSYWN0aXZlLmJvZHlMaXN0KVxyXG4gICAgICAgICAgYm9keS5pc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgUGh5c2ljcy7GkmFjdGl2ZS5qb2ludExpc3QgPSBuZXcgQXJyYXkoKTsgLy8gVE9ETzogc2VlIGlmIGl0IHdvdWxkIGJlIHNtYXJ0ZXIsIGRvIHVzZSB0aGVzZSBhcnJheXMuIERlZmluaXRlbHkgbW9yZSBpbnR1aXRpdmUuLi5cclxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgam9pbnRzV29ybGQ7IGkrKykge1xyXG4gICAgICAgICAgbGV0IG9pbW9Kb2ludDogT0lNTy5Kb2ludCA9IFBoeXNpY3MuxpJhY3RpdmUub2ltb1dvcmxkLmdldEpvaW50TGlzdCgpO1xyXG4gICAgICAgICAgb2ltb1dvcmxkLnJlbW92ZUpvaW50KG9pbW9Kb2ludCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBib2RpZXNXb3JsZDsgaSsrKSB7XHJcbiAgICAgICAgICBsZXQgb2ltb0JvZHk6IE9JTU8uUmlnaWRCb2R5ID0gb2ltb1dvcmxkLmdldFJpZ2lkQm9keUxpc3QoKTtcclxuICAgICAgICAgIG9pbW9Xb3JsZC5yZW1vdmVSaWdpZEJvZHkob2ltb0JvZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIC8qKiBSZXR1cm5zIHRoZSBDb21wb25lbnRSaWdpZGJvZHkgd2l0aCB0aGUgZ2l2ZW4gaWQuIFVzZWQgaW50ZXJuYWxseSB0byByZWNvbm5lY3Qgam9pbnRzIG9uIGxvYWRpbmcgaW4gdGhlIGVkaXRvci4gKi9cclxuICAgIC8vIHByaXZhdGUgc3RhdGljIGdldEJvZHlCeUlEKF9pZDogbnVtYmVyKTogQ29tcG9uZW50UmlnaWRib2R5IHtcclxuICAgIC8vICAgbGV0IGJvZHk6IENvbXBvbmVudFJpZ2lkYm9keSA9IG51bGw7XHJcbiAgICAvLyAgIFBoeXNpY3MuI2FjdGl2ZVBoeXNpY3MuYm9keUxpc3QuZm9yRWFjaCgodmFsdWU6IENvbXBvbmVudFJpZ2lkYm9keSk6IHZvaWQgPT4ge1xyXG4gICAgLy8gICAgIGlmICh2YWx1ZS5pZCA9PSBfaWQpIHtcclxuICAgIC8vICAgICAgIGJvZHkgPSB2YWx1ZTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgIH0pO1xyXG4gICAgLy8gICByZXR1cm4gYm9keTtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvKiogSW50ZXJuYWwgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHRoZSBlbmRwb2ludCBvZiBtYXRoZW1hdGljYWwgcmF5LiBCeSBhZGRpbmcgdGhlIG11bHRpcGxpZWQgZGlyZWN0aW9uIHRvIHRoZSBvcmlnaW4uIFxyXG4gICAgICAgKiBVc2VkIGJlY2F1c2UgT2ltb1BoeXNpY3MgZGVmaW5lcyByYXkgYnkgc3RhcnQvZW5kLiBCdXQgR2FtZUVuZ2luZXMgY29tbW9ubHkgdXNlIG9yaWdpbi9kaXJlY3Rpb24uXHJcbiAgICAgICAqL1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0UmF5RW5kUG9pbnQoc3RhcnQ6IE9JTU8uVmVjMywgZGlyZWN0aW9uOiBWZWN0b3IzLCBsZW5ndGg6IG51bWJlcik6IE9JTU8uVmVjMyB7XHJcbiAgICAgIGxldCBvcmlnaW46IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgIG9yaWdpbi5zZXQoc3RhcnQueCwgc3RhcnQueSwgc3RhcnQueik7XHJcbiAgICAgIGxldCBzY2FsZWREaXJlY3Rpb246IFZlY3RvcjMgPSBkaXJlY3Rpb24uY2xvbmU7XHJcbiAgICAgIHNjYWxlZERpcmVjdGlvbi5zY2FsZShsZW5ndGgpO1xyXG4gICAgICBsZXQgZW5kcG9pbnQ6IFZlY3RvcjMgPSBWZWN0b3IzLlNVTShzY2FsZWREaXJlY3Rpb24sIG9yaWdpbik7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHNjYWxlZERpcmVjdGlvbik7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKGVuZHBvaW50KTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUob3JpZ2luKTtcclxuICAgICAgcmV0dXJuIG5ldyBPSU1PLlZlYzMoZW5kcG9pbnQueCwgZW5kcG9pbnQueSwgZW5kcG9pbnQueik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIEludGVybmFsIGZ1bmN0aW9uIHRvIGdldCB0aGUgZGlzdGFuY2UgaW4gd2hpY2ggYSByYXkgaGl0IGJ5IHN1YnRyYWN0aW5nIHBvaW50cyBmcm9tIGVhY2ggb3RoZXIgYW5kIGdldCB0aGUgc3F1YXJlIHJvb3Qgb2YgdGhlIHNxdWFyZWQgcHJvZHVjdCBvZiBlYWNoIGNvbXBvbmVudC4gKi9cclxuICAgIHByaXZhdGUgc3RhdGljIGdldFJheURpc3RhbmNlKG9yaWdpbjogVmVjdG9yMywgaGl0UG9pbnQ6IFZlY3RvcjMpOiBudW1iZXIge1xyXG4gICAgICBsZXQgZHg6IG51bWJlciA9IG9yaWdpbi54IC0gaGl0UG9pbnQueDtcclxuICAgICAgbGV0IGR5OiBudW1iZXIgPSBvcmlnaW4ueSAtIGhpdFBvaW50Lnk7XHJcbiAgICAgIGxldCBkejogbnVtYmVyID0gb3JpZ2luLnogLSBoaXRQb2ludC56O1xyXG4gICAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkeik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIC8qKiBSZXR1cm5zIHRoZSBhY3R1YWwgdXNlZCB3b3JsZCBvZiB0aGUgT0lNTyBwaHlzaWNzIGVuZ2luZS4gTm8gdXNlciBpbnRlcmFjdGlvbiBuZWVkZWQgLSBPbmx5IGZvciBhZHZhbmNlZCB1c2VycyB0aGF0IG5lZWQgdG8gYWNjZXNzIGl0IGRpcmVjdGx5ICovXHJcbiAgICBwdWJsaWMgZ2V0T2ltb1dvcmxkKCk6IE9JTU8uV29ybGQge1xyXG4gICAgICByZXR1cm4gUGh5c2ljcy7GkmFjdGl2ZS5vaW1vV29ybGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLyoqIFVwZGF0ZXMgYWxsIHtAbGluayBSaWdpZGJvZGllc30ga25vd24gdG8gdGhlIFBoeXNpY3Mud29ybGQgdG8gbWF0Y2ggdGhlaXIgY29udGFpbmVycyBvciBtZXNoZXMgdHJhbnNmb3JtYXRpb25zICovXHJcbiAgICAvLyBwcml2YXRlIHVwZGF0ZVdvcmxkRnJvbVdvcmxkTWF0cml4KF90b01lc2g6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xyXG4gICAgLy8gICBmb3IgKGxldCBib2R5IG9mIHRoaXMuYm9keUxpc3QpXHJcbiAgICAvLyAgICAgYm9keS51cGRhdGVGcm9tV29ybGQoX3RvTWVzaCk7XHJcbiAgICAvLyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyBhIHRocmVlZGltZW5zaW9uYWwgYm94IGJ5IHR3byBjb3JuZXItcG9pbnRzLCBvbmUgd2l0aCBtaW5pbWFsIHZhbHVlcyBhbmQgb25lIHdpdGggbWF4aW11bSB2YWx1ZXNcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgQm94IGltcGxlbWVudHMgUmVjeWNhYmxlIHtcclxuICAgIHB1YmxpYyBtaW46IFZlY3RvcjM7XHJcbiAgICBwdWJsaWMgbWF4OiBWZWN0b3IzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9taW46IFZlY3RvcjMgPSBWZWN0b3IzLk9ORShJbmZpbml0eSksIF9tYXg6IFZlY3RvcjMgPSBWZWN0b3IzLk9ORSgtSW5maW5pdHkpKSB7XHJcbiAgICAgIHRoaXMuc2V0KF9taW4sIF9tYXgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVmaW5lIHRoZSBjb3JuZXJzIG9mIHRoaXMgYm94LCBzdGFuZGFyZCB2YWx1ZXMgYXJlIEluZmluaXR5IGZvciBtaW4sIGFuZCAtSW5maW5pdHkgZm9yIG1heCwgXHJcbiAgICAgKiBjcmVhdGluZyBhbiBpbXBvc3NpYmxlIGludmVydGVkIGJveCB0aGF0IGNhbiBub3QgY29udGFpbiBhbnkgcG9pbnRzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQoX21pbjogVmVjdG9yMyA9IFZlY3RvcjMuT05FKEluZmluaXR5KSwgX21heDogVmVjdG9yMyA9IFZlY3RvcjMuT05FKC1JbmZpbml0eSkpOiB2b2lkIHtcclxuICAgICAgdGhpcy5taW4gPSBfbWluO1xyXG4gICAgICB0aGlzLm1heCA9IF9tYXg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHBhbmQgdGhlIGJveCBpZiBuZWNlc3NhcnkgdG8gaW5jbHVkZSB0aGUgZ2l2ZW4gcG9pbnRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGV4cGFuZChfaW5jbHVkZTogVmVjdG9yMyk6IHZvaWQge1xyXG4gICAgICB0aGlzLm1pbi5taW4oX2luY2x1ZGUpO1xyXG4gICAgICB0aGlzLm1heC5tYXgoX2luY2x1ZGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgcmVjeWNsZSgpOiB2b2lkIHtcclxuICAgICAgdGhpcy5taW4uc2V0KEluZmluaXR5LCBJbmZpbml0eSwgSW5maW5pdHkpO1xyXG4gICAgICB0aGlzLm1heC5zZXQoLUluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogU3RvcmVzIGluZm9ybWF0aW9uIHByb3ZpZGVkIGJ5IHtAbGluayBSZW5kZXJ9LXBpY2tpbmcgZS5nLiB1c2luZyB7QGxpbmsgUGlja2VyfSBhbmQgcHJvdmlkZXMgbWV0aG9kcyBmb3IgZnVydGhlciBjYWxjdWxhdGlvbiBvZiBwb3NpdGlvbnMgYW5kIG5vcm1hbHMgZXRjLlxyXG4gICAqIFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFBpY2sge1xyXG4gICAgcHVibGljIG5vZGU6IE5vZGU7XHJcbiAgICBwdWJsaWMgekJ1ZmZlcjogbnVtYmVyO1xyXG4gICAgcHVibGljIGNvbG9yOiBDb2xvcjtcclxuICAgIHB1YmxpYyB0ZXh0dXJlVVY6IFZlY3RvcjI7XHJcbiAgICAjbXR4Vmlld1RvV29ybGQ6IE1hdHJpeDR4NDtcclxuICAgICNwb3NXb3JsZDogVmVjdG9yMztcclxuICAgICNwb3NNZXNoOiBWZWN0b3IzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9ub2RlOiBOb2RlKSB7XHJcbiAgICAgIHRoaXMubm9kZSA9IF9ub2RlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWNjZXNzb3IgdG8gY2FsY3VsYXRlIGFuZCBzdG9yZSB3b3JsZCBwb3NpdGlvbiBvZiBpbnRlcnNlY3Rpb24gb2Yge0BsaW5rIFJheX0gYW5kIHtAbGluayBNZXNofSBvbmx5IHdoZW4gdXNlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBwb3NXb3JsZCgpOiBWZWN0b3IzIHtcclxuICAgICAgaWYgKHRoaXMuI3Bvc1dvcmxkKVxyXG4gICAgICAgIHJldHVybiB0aGlzLiNwb3NXb3JsZDtcclxuICAgICAgbGV0IHBvaW50SW5DbGlwU3BhY2U6IFZlY3RvcjMgPSBWZWN0b3IzLloodGhpcy56QnVmZmVyKTtcclxuICAgICAgbGV0IG06IEZsb2F0MzJBcnJheSA9IHRoaXMuI210eFZpZXdUb1dvcmxkLmdldCgpO1xyXG4gICAgICBsZXQgcmVzdWx0OiBWZWN0b3IzID0gVmVjdG9yMy5UUkFOU0ZPUk1BVElPTihwb2ludEluQ2xpcFNwYWNlLCB0aGlzLiNtdHhWaWV3VG9Xb3JsZCwgdHJ1ZSk7XHJcbiAgICAgIGxldCB3OiBudW1iZXIgPSBtWzNdICogcG9pbnRJbkNsaXBTcGFjZS54ICsgbVs3XSAqIHBvaW50SW5DbGlwU3BhY2UueSArIG1bMTFdICogcG9pbnRJbkNsaXBTcGFjZS56ICsgbVsxNV07XHJcbiAgICAgIHJlc3VsdC5zY2FsZSgxIC8gdyk7XHJcblxyXG4gICAgICB0aGlzLiNwb3NXb3JsZCA9IHJlc3VsdDtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjY2Vzc29yIHRvIGNhbGN1bGF0ZSBhbmQgc3RvcmUgcG9zaXRpb24gaW4gbWVzaC1zcGFjZSBvZiBpbnRlcnNlY3Rpb24gb2Yge0BsaW5rIFJheX0gYW5kIHtAbGluayBNZXNofSBvbmx5IHdoZW4gdXNlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBwb3NNZXNoKCk6IFZlY3RvcjMge1xyXG4gICAgICBpZiAodGhpcy4jcG9zTWVzaClcclxuICAgICAgICByZXR1cm4gdGhpcy4jcG9zTWVzaDtcclxuICAgICAgbGV0IG10eFdvcmxkVG9NZXNoOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSU5WRVJTSU9OKHRoaXMubm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCkubXR4V29ybGQpO1xyXG4gICAgICBsZXQgcG9zTWVzaDogVmVjdG9yMyA9IFZlY3RvcjMuVFJBTlNGT1JNQVRJT04odGhpcy5wb3NXb3JsZCwgbXR4V29ybGRUb01lc2gpO1xyXG4gICAgICB0aGlzLiNwb3NNZXNoID0gcG9zTWVzaDtcclxuICAgICAgcmV0dXJuIHBvc01lc2g7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY2Nlc3NvciB0byBjYWxjdWxhdGUgYW5kIHN0b3JlIHRoZSBmYWNlIG5vcm1hbCBpbiB3b3JsZC1zcGFjZSBhdCB0aGUgcG9pbnQgb2YgaW50ZXJzZWN0aW9uIG9mIHtAbGluayBSYXl9IGFuZCB7QGxpbmsgTWVzaH0gb25seSB3aGVuIHVzZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbm9ybWFsKCk6IFZlY3RvcjMge1xyXG4gICAgICBsZXQgY21wTWVzaDogQ29tcG9uZW50TWVzaCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk7XHJcbiAgICAgIGxldCByZXN1bHQ6IFZlY3RvcjM7XHJcblxyXG4gICAgICBmb3IgKGxldCBmYWNlIG9mIGNtcE1lc2gubWVzaC5mYWNlcykge1xyXG4gICAgICAgIGlmIChmYWNlLmlzSW5zaWRlKHRoaXMucG9zTWVzaCkpIHtcclxuICAgICAgICAgIHJlc3VsdCA9IGZhY2Uubm9ybWFsLmNsb25lO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXN1bHQudHJhbnNmb3JtKGNtcE1lc2gubXR4V29ybGQsIGZhbHNlKTtcclxuICAgICAgcmVzdWx0Lm5vcm1hbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHNvbGVseSBieSB0aGUgcmVuZGVyZXIgdG8gZW5hYmxlIGNhbGN1bGF0aW9uIG9mIHRoZSB3b3JsZCBjb29yZGluYXRlcyBvZiB0aGlzIHtAbGluayBQaWNrfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0IG10eFZpZXdUb1dvcmxkKF9tdHhWaWV3VG9Xb3JsZDogTWF0cml4NHg0KSB7XHJcbiAgICAgIHRoaXMuI210eFZpZXdUb1dvcmxkID0gX210eFZpZXdUb1dvcmxkO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIFByb3ZpZGVzIHN0YXRpYyBtZXRob2RzIGZvciBwaWNraW5nIHVzaW5nIHtAbGluayBSZW5kZXJ9XHJcbiAgICogXHJcbiAgICogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgUGlja2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogVGFrZXMgYSByYXkgcGx1cyBtaW4gYW5kIG1heCB2YWx1ZXMgZm9yIHRoZSBuZWFyIGFuZCBmYXIgcGxhbmVzIHRvIGNvbnN0cnVjdCB0aGUgcGlja2VyLWNhbWVyYSxcclxuICAgICAqIHRoZW4gcmVuZGVycyB0aGUgcGljay10ZXh0dXJlIGFuZCByZXR1cm5zIGFuIHVuc29ydGVkIHtAbGluayBQaWNrfS1hcnJheSB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXRzIG9mIHRoZSByYXkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcGlja1JheShfbm9kZXM6IE5vZGVbXSwgX3JheTogUmF5LCBfbWluOiBudW1iZXIsIF9tYXg6IG51bWJlcik6IFBpY2tbXSB7XHJcbiAgICAgIGxldCBjbXBDYW1lcmFQaWNrOiBDb21wb25lbnRDYW1lcmEgPSBuZXcgQ29tcG9uZW50Q2FtZXJhKCk7XHJcbiAgICAgIGNtcENhbWVyYVBpY2subXR4UGl2b3QudHJhbnNsYXRpb24gPSBfcmF5Lm9yaWdpbjtcclxuICAgICAgY21wQ2FtZXJhUGljay5tdHhQaXZvdC5sb29rQXQoX3JheS5kaXJlY3Rpb24pO1xyXG4gICAgICBjbXBDYW1lcmFQaWNrLnByb2plY3RDZW50cmFsKDEsIDAuMDAxLCBGSUVMRF9PRl9WSUVXLkRJQUdPTkFMLCBfbWluLCBfbWF4KTtcclxuXHJcbiAgICAgIGxldCBwaWNrczogUGlja1tdID0gUmVuZGVyLnBpY2tCcmFuY2goX25vZGVzLCBjbXBDYW1lcmFQaWNrKTtcclxuICAgICAgcmV0dXJuIHBpY2tzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGFrZXMgYSBjYW1lcmEgYW5kIGEgcG9pbnQgb24gaXRzIHZpcnR1YWwgbm9ybWVkIHByb2plY3Rpb24gcGxhbmUgKGRpc3RhbmNlIDEpIHRvIGNvbnN0cnVjdCB0aGUgcGlja2VyLWNhbWVyYSxcclxuICAgICAqIHRoZW4gcmVuZGVycyB0aGUgcGljay10ZXh0dXJlIGFuZCByZXR1cm5zIGFuIHVuc29ydGVkIHtAbGluayBQaWNrfS1hcnJheSB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXRzIG9mIHRoZSByYXkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcGlja0NhbWVyYShfbm9kZXM6IE5vZGVbXSwgX2NtcENhbWVyYTogQ29tcG9uZW50Q2FtZXJhLCBfcG9zUHJvamVjdGlvbjogVmVjdG9yMik6IFBpY2tbXSB7XHJcbiAgICAgIGxldCByYXk6IFJheSA9IG5ldyBSYXkobmV3IFZlY3RvcjMoLV9wb3NQcm9qZWN0aW9uLngsIF9wb3NQcm9qZWN0aW9uLnksIDEpKTtcclxuICAgICAgbGV0IGxlbmd0aDogbnVtYmVyID0gcmF5LmRpcmVjdGlvbi5tYWduaXR1ZGU7XHJcblxyXG4gICAgICBpZiAoX2NtcENhbWVyYS5ub2RlKSB7XHJcbiAgICAgICAgbGV0IG10eENhbWVyYTogTWF0cml4NHg0ID0gTWF0cml4NHg0Lk1VTFRJUExJQ0FUSU9OKF9jbXBDYW1lcmEubm9kZS5tdHhXb3JsZCwgX2NtcENhbWVyYS5tdHhQaXZvdCk7XHJcbiAgICAgICAgcmF5LnRyYW5zZm9ybShtdHhDYW1lcmEpO1xyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eENhbWVyYSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHJheS50cmFuc2Zvcm0oX2NtcENhbWVyYS5tdHhQaXZvdCk7XHJcblxyXG5cclxuICAgICAgbGV0IHBpY2tzOiBQaWNrW10gPSBQaWNrZXIucGlja1JheShfbm9kZXMsIHJheSwgbGVuZ3RoICogX2NtcENhbWVyYS5nZXROZWFyKCksIGxlbmd0aCAqIF9jbXBDYW1lcmEuZ2V0RmFyKCkpO1xyXG4gICAgICByZXR1cm4gcGlja3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUYWtlcyB0aGUgY2FtZXJhIG9mIHRoZSBnaXZlbiB2aWV3cG9ydCBhbmQgYSBwb2ludCB0aGUgY2xpZW50IHN1cmZhY2UgdG8gY29uc3RydWN0IHRoZSBwaWNrZXItY2FtZXJhLFxyXG4gICAgICogdGhlbiByZW5kZXJzIHRoZSBwaWNrLXRleHR1cmUgYW5kIHJldHVybnMgYW4gdW5zb3J0ZWQge0BsaW5rIFBpY2t9LWFycmF5IHdpdGggaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdHMgb2YgdGhlIHJheS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBwaWNrVmlld3BvcnQoX3ZpZXdwb3J0OiBWaWV3cG9ydCwgX3Bvc0NsaWVudDogVmVjdG9yMik6IFBpY2tbXSB7XHJcbiAgICAgIGxldCBwb3NQcm9qZWN0aW9uOiBWZWN0b3IyID0gX3ZpZXdwb3J0LnBvaW50Q2xpZW50VG9Qcm9qZWN0aW9uKF9wb3NDbGllbnQpO1xyXG4gICAgICBsZXQgbm9kZXM6IE5vZGVbXSA9IEFycmF5LmZyb20oX3ZpZXdwb3J0LmdldEJyYW5jaCgpLmdldEl0ZXJhdG9yKHRydWUpKTtcclxuICAgICAgbGV0IHBpY2tzOiBQaWNrW10gPSBQaWNrZXIucGlja0NhbWVyYShub2RlcywgX3ZpZXdwb3J0LmNhbWVyYSwgcG9zUHJvamVjdGlvbik7XHJcbiAgICAgIHJldHVybiBwaWNrcztcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBEZWZpbmVkIGJ5IGFuIG9yaWdpbiBhbmQgYSBkaXJlY3Rpb24gb2YgdHlwZSB7QGxpbmsgUGlja30sIHJheXMgYXJlIHVzZWQgdG8gY2FsY3VsYXRlIHBpY2tpbmcgYW5kIGludGVyc2VjdGlvbnNcclxuICAgKiBcclxuICAgKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAyMVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBSYXkge1xyXG4gICAgcHVibGljIG9yaWdpbjogVmVjdG9yMztcclxuICAgIHB1YmxpYyBkaXJlY3Rpb246IFZlY3RvcjM7XHJcbiAgICAvKiogVE9ETzogc3VwcG9ydCBsZW5ndGggKi9cclxuICAgIHB1YmxpYyBsZW5ndGg6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfZGlyZWN0aW9uOiBWZWN0b3IzID0gVmVjdG9yMy5aKDEpLCBfb3JpZ2luOiBWZWN0b3IzID0gVmVjdG9yMy5aRVJPKCksIF9sZW5ndGg6IG51bWJlciA9IDEpIHtcclxuICAgICAgdGhpcy5vcmlnaW4gPSBfb3JpZ2luO1xyXG4gICAgICB0aGlzLmRpcmVjdGlvbiA9IF9kaXJlY3Rpb247XHJcbiAgICAgIHRoaXMubGVuZ3RoID0gX2xlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHBvaW50IG9mIGludGVyc2VjdGlvbiBvZiB0aGlzIHJheSB3aXRoIGEgcGxhbmUgZGVmaW5lZCBieSBcclxuICAgICAqIHRoZSBnaXZlbiBwb2ludCBvZiBvcmlnaW4gYW5kIHRoZSBwbGFuZXMgbm9ybWFsLiBBbGwgdmFsdWVzIGFuZCBjYWxjdWxhdGlvbnNcclxuICAgICAqIG11c3QgYmUgcmVsYXRpdmUgdG8gdGhlIHNhbWUgY29vcmRpbmF0ZSBzeXN0ZW0sIHByZWZlcmFibHkgdGhlIHdvcmxkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnRlcnNlY3RQbGFuZShfb3JpZ2luOiBWZWN0b3IzLCBfbm9ybWFsOiBWZWN0b3IzKTogVmVjdG9yMyB7XHJcbiAgICAgIGxldCBkaWZmZXJlbmNlOiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKF9vcmlnaW4sIHRoaXMub3JpZ2luKTtcclxuICAgICAgbGV0IGZhY3RvcjogbnVtYmVyID0gVmVjdG9yMy5ET1QoZGlmZmVyZW5jZSwgX25vcm1hbCkgLyBWZWN0b3IzLkRPVCh0aGlzLmRpcmVjdGlvbiwgX25vcm1hbCk7XHJcbiAgICAgIGxldCBpbnRlcnNlY3Q6IFZlY3RvcjMgPSBWZWN0b3IzLlNVTSh0aGlzLm9yaWdpbiwgVmVjdG9yMy5TQ0FMRSh0aGlzLmRpcmVjdGlvbiwgZmFjdG9yKSk7XHJcbiAgICAgIHJldHVybiBpbnRlcnNlY3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBwb2ludCBvZiBpbnRlcnNlY3Rpb24gb2YgdGhpcyByYXkgd2l0aCBhIHBsYW5lIGRlZmluZWQgYnkgdGhlIGZhY2UuIFxyXG4gICAgICogQWxsIHZhbHVlcyBhbmQgY2FsY3VsYXRpb25zIG11c3QgYmUgcmVsYXRpdmUgdG8gdGhlIHNhbWUgY29vcmRpbmF0ZSBzeXN0ZW0sIHByZWZlcmFibHkgdGhlIHdvcmxkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbnRlcnNlY3RGYWNlUGxhbmUoX2ZhY2U6IEZhY2UpOiBWZWN0b3IzIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW50ZXJzZWN0UGxhbmUoX2ZhY2UuZ2V0UG9zaXRpb24oMCksIF9mYWNlLm5vcm1hbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBzaG9ydGVzdCBkaXN0YW5jZSBmcm9tIHRoZSByYXkgdG8gdGhlIGdpdmVuIHRhcmdldCBwb2ludC5cclxuICAgICAqIEFsbCB2YWx1ZXMgYW5kIGNhbGN1bGF0aW9ucyBtdXN0IGJlIHJlbGF0aXZlIHRvIHRoZSBzYW1lIGNvb3JkaW5hdGUgc3lzdGVtLCBwcmVmZXJhYmx5IHRoZSB3b3JsZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldERpc3RhbmNlKF90YXJnZXQ6IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgbGV0IG9yaWdpblRvVGFyZ2V0OiBWZWN0b3IzID0gVmVjdG9yMy5ESUZGRVJFTkNFKF90YXJnZXQsIHRoaXMub3JpZ2luKTtcclxuICAgICAgbGV0IHJheVNlY3Rpb246IFZlY3RvcjMgPSBWZWN0b3IzLk5PUk1BTElaQVRJT04odGhpcy5kaXJlY3Rpb24sIDEpO1xyXG4gICAgICBsZXQgcHJvamVjdGVkTGVuZ3RoOiBudW1iZXIgPSBWZWN0b3IzLkRPVChvcmlnaW5Ub1RhcmdldCwgcmF5U2VjdGlvbik7XHJcbiAgICAgIHJheVNlY3Rpb24uc2NhbGUocHJvamVjdGVkTGVuZ3RoKTtcclxuICAgICAgcmF5U2VjdGlvbi5hZGQodGhpcy5vcmlnaW4pO1xyXG4gICAgICBsZXQgZGlzdGFuY2U6IFZlY3RvcjMgPSBWZWN0b3IzLkRJRkZFUkVOQ0UoX3RhcmdldCwgcmF5U2VjdGlvbik7XHJcbiAgICAgIHJldHVybiBkaXN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zZm9ybSB0aGUgcmF5IGJ5IHRoZSBnaXZlbiBtYXRyaXhcclxuICAgICAqL1xyXG4gICAgcHVibGljIHRyYW5zZm9ybShfbXR4VHJhbnNmb3JtOiBNYXRyaXg0eDQpOiB2b2lkIHtcclxuICAgICAgdGhpcy5kaXJlY3Rpb24udHJhbnNmb3JtKF9tdHhUcmFuc2Zvcm0pO1xyXG4gICAgICB0aGlzLm9yaWdpbi50cmFuc2Zvcm0oX210eFRyYW5zZm9ybSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmVhZGFibGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgcmF5XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gYG9yaWdpbjogJHt0aGlzLm9yaWdpbi50b1N0cmluZygpfSwgZGlyZWN0aW9uOiAke3RoaXMuZGlyZWN0aW9uLnRvU3RyaW5nKCl9LCBsZW5ndGg6ICR7dGhpcy5sZW5ndGgudG9QcmVjaXNpb24oNSl9YDtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgdHlwZSBNYXBMaWdodFR5cGVUb0xpZ2h0TGlzdCA9IE1hcDxUeXBlT2ZMaWdodCwgUmVjeWNhYmxlQXJyYXk8Q29tcG9uZW50TGlnaHQ+PjtcclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBSZW5kZXJQcmVwYXJlT3B0aW9ucyB7XHJcbiAgICBpZ25vcmVQaHlzaWNzPzogYm9vbGVhbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBtYWluIGludGVyZmFjZSB0byB0aGUgcmVuZGVyIGVuZ2luZSwgaGVyZSBXZWJHTCAoc2VlIHN1cGVyY2xhc3Mge0BsaW5rIFJlbmRlcldlYkdMfSBhbmQgdGhlIFJlbmRlckluamVjdG9yc1xyXG4gICAqL1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZW5kZXIgZXh0ZW5kcyBSZW5kZXJXZWJHTCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlY3RDbGlwOiBSZWN0YW5nbGUgPSBuZXcgUmVjdGFuZ2xlKC0xLCAxLCAyLCAtMik7XHJcbiAgICBwdWJsaWMgc3RhdGljIHBpY2tCdWZmZXI6IEludDMyQXJyYXk7XHJcbiAgICBwdWJsaWMgc3RhdGljIG5vZGVzUGh5c2ljczogUmVjeWNhYmxlQXJyYXk8Tm9kZT4gPSBuZXcgUmVjeWNhYmxlQXJyYXkoKTtcclxuICAgIHB1YmxpYyBzdGF0aWMgY29tcG9uZW50c1BpY2s6IFJlY3ljYWJsZUFycmF5PENvbXBvbmVudFBpY2s+ID0gbmV3IFJlY3ljYWJsZUFycmF5KCk7XHJcbiAgICBwdWJsaWMgc3RhdGljIGxpZ2h0czogTWFwTGlnaHRUeXBlVG9MaWdodExpc3QgPSBuZXcgTWFwKCk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBub2Rlc1NpbXBsZTogUmVjeWNhYmxlQXJyYXk8Tm9kZT4gPSBuZXcgUmVjeWNhYmxlQXJyYXkoKTtcclxuICAgIHByaXZhdGUgc3RhdGljIG5vZGVzQWxwaGE6IFJlY3ljYWJsZUFycmF5PE5vZGU+ID0gbmV3IFJlY3ljYWJsZUFycmF5KCk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyB0aW1lc3RhbXBVcGRhdGU6IG51bWJlcjtcclxuXHJcbiAgICAvLyBUT0RPOiByZXNlYXJjaCBpZiBwaWNraW5nIHNob3VsZCBiZSBvcHRpbWl6ZWQgdXNpbmcgcmFkaXVzIHBpY2tpbmcgdG8gZmlsdGVyXHJcblxyXG4gICAgLy8jcmVnaW9uIFByZXBhcmVcclxuICAgIC8qKlxyXG4gICAgICogUmVjdXJzaXZlbHkgaXRlcmF0ZXMgb3ZlciB0aGUgYnJhbmNoIHN0YXJ0aW5nIHdpdGggdGhlIG5vZGUgZ2l2ZW4sIHJlY2FsY3VsYXRlcyBhbGwgd29ybGQgdHJhbnNmb3JtcywgXHJcbiAgICAgKiBjb2xsZWN0cyBhbGwgbGlnaHRzIGFuZCBmZWVkcyBhbGwgc2hhZGVycyB1c2VkIGluIHRoZSBncmFwaCB3aXRoIHRoZXNlIGxpZ2h0cy4gU29ydHMgbm9kZXMgZm9yIGRpZmZlcmVudFxyXG4gICAgICogcmVuZGVyIHBhc3Nlcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBwcmVwYXJlKF9icmFuY2g6IE5vZGUsIF9vcHRpb25zOiBSZW5kZXJQcmVwYXJlT3B0aW9ucyA9IHt9LCBfbXR4V29ybGQ6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpLCBfc2hhZGVyc1VzZWQ6IChTaGFkZXJJbnRlcmZhY2UpW10gPSBudWxsKTogdm9pZCB7XHJcbiAgICAgIGxldCBmaXJzdExldmVsOiBib29sZWFuID0gKF9zaGFkZXJzVXNlZCA9PSBudWxsKTtcclxuICAgICAgaWYgKGZpcnN0TGV2ZWwpIHtcclxuICAgICAgICBfc2hhZGVyc1VzZWQgPSBbXTtcclxuICAgICAgICBSZW5kZXIudGltZXN0YW1wVXBkYXRlID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgICAgICAgUmVuZGVyLm5vZGVzU2ltcGxlLnJlc2V0KCk7XHJcbiAgICAgICAgUmVuZGVyLm5vZGVzQWxwaGEucmVzZXQoKTtcclxuICAgICAgICBSZW5kZXIubm9kZXNQaHlzaWNzLnJlc2V0KCk7XHJcbiAgICAgICAgUmVuZGVyLmNvbXBvbmVudHNQaWNrLnJlc2V0KCk7XHJcbiAgICAgICAgUmVuZGVyLmxpZ2h0cy5mb3JFYWNoKF9hcnJheSA9PiBfYXJyYXkucmVzZXQoKSk7XHJcbiAgICAgICAgX2JyYW5jaC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5SRU5ERVJfUFJFUEFSRV9TVEFSVCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIV9icmFuY2guaXNBY3RpdmUpXHJcbiAgICAgICAgcmV0dXJuOyAvLyBkb24ndCBhZGQgYnJhbmNoIHRvIHJlbmRlciBsaXN0IGlmIG5vdCBhY3RpdmVcclxuXHJcbiAgICAgIF9icmFuY2gubk5vZGVzSW5CcmFuY2ggPSAxO1xyXG4gICAgICBfYnJhbmNoLnJhZGl1cyA9IDA7XHJcblxyXG4gICAgICBfYnJhbmNoLmRpc3BhdGNoRXZlbnRUb1RhcmdldE9ubHkobmV3IEV2ZW50KEVWRU5ULlJFTkRFUl9QUkVQQVJFKSk7XHJcbiAgICAgIF9icmFuY2gudGltZXN0YW1wVXBkYXRlID0gUmVuZGVyLnRpbWVzdGFtcFVwZGF0ZTtcclxuXHJcbiAgICAgIGlmIChfYnJhbmNoLmNtcFRyYW5zZm9ybSAmJiBfYnJhbmNoLmNtcFRyYW5zZm9ybS5pc0FjdGl2ZSkge1xyXG4gICAgICAgIGxldCBtdHhXb3JsZEJyYW5jaDogTWF0cml4NHg0ID0gTWF0cml4NHg0Lk1VTFRJUExJQ0FUSU9OKF9tdHhXb3JsZCwgX2JyYW5jaC5jbXBUcmFuc2Zvcm0ubXR4TG9jYWwpO1xyXG4gICAgICAgIF9icmFuY2gubXR4V29ybGQuc2V0KG10eFdvcmxkQnJhbmNoKTtcclxuICAgICAgICBSZWN5Y2xlci5zdG9yZShtdHhXb3JsZEJyYW5jaCk7XHJcbiAgICAgIH0gZWxzZVxyXG4gICAgICAgIF9icmFuY2gubXR4V29ybGQuc2V0KF9tdHhXb3JsZCk7IC8vIG92ZXJ3cml0ZSByZWFkb25seSBtdHhXb3JsZCBvZiB0aGUgY3VycmVudCBub2RlXHJcblxyXG5cclxuICAgICAgbGV0IGNtcFJpZ2lkYm9keTogQ29tcG9uZW50UmlnaWRib2R5ID0gX2JyYW5jaC5nZXRDb21wb25lbnQoQ29tcG9uZW50UmlnaWRib2R5KTtcclxuICAgICAgaWYgKGNtcFJpZ2lkYm9keSAmJiBjbXBSaWdpZGJvZHkuaXNBY3RpdmUpIHsgLy9UT0RPOiBzdXBwb3J0IGRlLS9hY3RpdmF0aW9uIHRocm91Z2hvdXRcclxuICAgICAgICBSZW5kZXIubm9kZXNQaHlzaWNzLnB1c2goX2JyYW5jaCk7IC8vIGFkZCB0aGlzIG5vZGUgdG8gcGh5c2ljcyBsaXN0XHJcbiAgICAgICAgaWYgKCFfb3B0aW9ucz8uaWdub3JlUGh5c2ljcylcclxuICAgICAgICAgIHRoaXMudHJhbnNmb3JtQnlQaHlzaWNzKF9icmFuY2gsIGNtcFJpZ2lkYm9keSk7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICBsZXQgY21wUGljazogQ29tcG9uZW50UGljayA9IF9icmFuY2guZ2V0Q29tcG9uZW50KENvbXBvbmVudFBpY2spO1xyXG4gICAgICBpZiAoY21wUGljayAmJiBjbXBQaWNrLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgUmVuZGVyLmNvbXBvbmVudHNQaWNrLnB1c2goY21wUGljayk7IC8vIGFkZCB0aGlzIGNvbXBvbmVudCB0byBwaWNrIGxpc3RcclxuICAgICAgfVxyXG5cclxuXHJcbiAgICAgIGxldCBjbXBMaWdodHM6IENvbXBvbmVudExpZ2h0W10gPSBfYnJhbmNoLmdldENvbXBvbmVudHMoQ29tcG9uZW50TGlnaHQpO1xyXG4gICAgICBSZW5kZXIuYWRkTGlnaHRzKGNtcExpZ2h0cyk7XHJcblxyXG4gICAgICBsZXQgY21wTWVzaDogQ29tcG9uZW50TWVzaCA9IF9icmFuY2guZ2V0Q29tcG9uZW50KENvbXBvbmVudE1lc2gpO1xyXG4gICAgICBsZXQgY21wTWF0ZXJpYWw6IENvbXBvbmVudE1hdGVyaWFsID0gX2JyYW5jaC5nZXRDb21wb25lbnQoQ29tcG9uZW50TWF0ZXJpYWwpO1xyXG5cclxuICAgICAgaWYgKGNtcE1lc2ggJiYgY21wTWVzaC5pc0FjdGl2ZSAmJiBjbXBNYXRlcmlhbCAmJiBjbXBNYXRlcmlhbC5pc0FjdGl2ZSkge1xyXG4gICAgICAgIGxldCBtdHhXb3JsZE1lc2g6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5NVUxUSVBMSUNBVElPTihfYnJhbmNoLm10eFdvcmxkLCBjbXBNZXNoLm10eFBpdm90KTtcclxuICAgICAgICBjbXBNZXNoLm10eFdvcmxkLnNldChtdHhXb3JsZE1lc2gpO1xyXG4gICAgICAgIFJlY3ljbGVyLnN0b3JlKG10eFdvcmxkTWVzaCk7IC8vIFRPRE86IGV4YW1pbmUsIHdoeSByZWN5Y2xpbmcgdGhpcyBjYXVzZXMgbWVzaGVzIHRvIGJlIG1pc3BsYWNlZC4uLlxyXG4gICAgICAgIGxldCBzaGFkZXI6IFNoYWRlckludGVyZmFjZSA9IGNtcE1hdGVyaWFsLm1hdGVyaWFsLmdldFNoYWRlcigpO1xyXG4gICAgICAgIGxldCBjbXBQYXJ0aWNsZVN5c3RlbTogQ29tcG9uZW50UGFydGljbGVTeXN0ZW0gPSBfYnJhbmNoLmdldENvbXBvbmVudChDb21wb25lbnRQYXJ0aWNsZVN5c3RlbSk7XHJcbiAgICAgICAgaWYgKGNtcFBhcnRpY2xlU3lzdGVtICYmIGNtcFBhcnRpY2xlU3lzdGVtLmlzQWN0aXZlICYmIGNtcFBhcnRpY2xlU3lzdGVtLnBhcnRpY2xlU3lzdGVtICE9IG51bGwpXHJcbiAgICAgICAgICBzaGFkZXIgPSBjbXBQYXJ0aWNsZVN5c3RlbS5wYXJ0aWNsZVN5c3RlbS5nZXRTaGFkZXJGcm9tKHNoYWRlcik7XHJcbiAgICAgICAgaWYgKF9zaGFkZXJzVXNlZC5pbmRleE9mKHNoYWRlcikgPCAwKVxyXG4gICAgICAgICAgX3NoYWRlcnNVc2VkLnB1c2goc2hhZGVyKTtcclxuICAgICAgICBfYnJhbmNoLnJhZGl1cyA9IGNtcE1lc2gucmFkaXVzO1xyXG4gICAgICAgIGlmIChjbXBNYXRlcmlhbC5zb3J0Rm9yQWxwaGEpXHJcbiAgICAgICAgICBSZW5kZXIubm9kZXNBbHBoYS5wdXNoKF9icmFuY2gpOyAvLyBhZGQgdGhpcyBub2RlIHRvIHJlbmRlciBsaXN0XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgUmVuZGVyLm5vZGVzU2ltcGxlLnB1c2goX2JyYW5jaCk7IC8vIGFkZCB0aGlzIG5vZGUgdG8gcmVuZGVyIGxpc3RcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChsZXQgY2hpbGQgb2YgX2JyYW5jaC5nZXRDaGlsZHJlbigpKSB7XHJcbiAgICAgICAgUmVuZGVyLnByZXBhcmUoY2hpbGQsIF9vcHRpb25zLCBfYnJhbmNoLm10eFdvcmxkLCBfc2hhZGVyc1VzZWQpO1xyXG5cclxuICAgICAgICBfYnJhbmNoLm5Ob2Rlc0luQnJhbmNoICs9IGNoaWxkLm5Ob2Rlc0luQnJhbmNoO1xyXG4gICAgICAgIGxldCBjbXBNZXNoQ2hpbGQ6IENvbXBvbmVudE1lc2ggPSBjaGlsZC5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk7XHJcbiAgICAgICAgbGV0IHBvc2l0aW9uOiBWZWN0b3IzID0gY21wTWVzaENoaWxkID8gY21wTWVzaENoaWxkLm10eFdvcmxkLnRyYW5zbGF0aW9uIDogY2hpbGQubXR4V29ybGQudHJhbnNsYXRpb247XHJcbiAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbi5jbG9uZTtcclxuICAgICAgICBfYnJhbmNoLnJhZGl1cyA9IE1hdGgubWF4KF9icmFuY2gucmFkaXVzLCBwb3NpdGlvbi5nZXREaXN0YW5jZShfYnJhbmNoLm10eFdvcmxkLnRyYW5zbGF0aW9uKSArIGNoaWxkLnJhZGl1cyk7XHJcbiAgICAgICAgUmVjeWNsZXIuc3RvcmUocG9zaXRpb24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZmlyc3RMZXZlbCkge1xyXG4gICAgICAgIF9icmFuY2guZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuUkVOREVSX1BSRVBBUkVfRU5EKSk7XHJcbiAgICAgICAgUmVuZGVyLmZpbGxMaWdodHNVQk8oUmVuZGVyLmxpZ2h0cyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFkZExpZ2h0cyhfY21wTGlnaHRzOiBDb21wb25lbnRMaWdodFtdKTogdm9pZCB7XHJcbiAgICAgIGZvciAobGV0IGNtcExpZ2h0IG9mIF9jbXBMaWdodHMpIHtcclxuICAgICAgICBpZiAoIWNtcExpZ2h0LmlzQWN0aXZlKVxyXG4gICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIGxldCB0eXBlOiBUeXBlT2ZMaWdodCA9IGNtcExpZ2h0LmxpZ2h0LmdldFR5cGUoKTtcclxuICAgICAgICBsZXQgbGlnaHRzT2ZUeXBlOiBSZWN5Y2FibGVBcnJheTxDb21wb25lbnRMaWdodD4gPSBSZW5kZXIubGlnaHRzLmdldCh0eXBlKTtcclxuICAgICAgICBpZiAoIWxpZ2h0c09mVHlwZSkge1xyXG4gICAgICAgICAgbGlnaHRzT2ZUeXBlID0gbmV3IFJlY3ljYWJsZUFycmF5PENvbXBvbmVudExpZ2h0PigpO1xyXG4gICAgICAgICAgUmVuZGVyLmxpZ2h0cy5zZXQodHlwZSwgbGlnaHRzT2ZUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGlnaHRzT2ZUeXBlLnB1c2goY21wTGlnaHQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gUGlja2luZ1xyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHdpdGggYSB7QGxpbmsgUGlja2VyfS1jYW1lcmEsIHRoaXMgbWV0aG9kIHJlbmRlcnMgb25lIHBpeGVsIHdpdGggcGlja2luZyBpbmZvcm1hdGlvbiBcclxuICAgICAqIGZvciBlYWNoIG5vZGUgaW4gdGhlIGxpbmUgb2Ygc2lnaHQgYW5kIHJldHVybiB0aGF0IGFzIGFuIHVuc29ydGVkIHtAbGluayBQaWNrfS1hcnJheVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHBpY2tCcmFuY2goX25vZGVzOiBOb2RlW10sIF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSk6IFBpY2tbXSB7IC8vIFRPRE86IHNlZSBpZiB0aGlyZCBwYXJhbWV0ZXIgX3dvcmxkPzogTWF0cml4NHg0IHdvdWxkIGJlIHVzZWZ1bGxcclxuICAgICAgUmVuZGVyLsaScGlja2VkID0gW107XHJcbiAgICAgIGxldCBzaXplOiBudW1iZXIgPSBNYXRoLmNlaWwoTWF0aC5zcXJ0KF9ub2Rlcy5sZW5ndGgpKTtcclxuICAgICAgUmVuZGVyLmNyZWF0ZVBpY2tUZXh0dXJlKHNpemUpO1xyXG4gICAgICBSZW5kZXIuc2V0QmxlbmRNb2RlKEJMRU5ELk9QQVFVRSk7XHJcblxyXG4gICAgICBmb3IgKGxldCBub2RlIG9mIF9ub2Rlcykge1xyXG4gICAgICAgIGxldCBjbXBNZXNoOiBDb21wb25lbnRNZXNoID0gbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCk7XHJcbiAgICAgICAgbGV0IGNtcE1hdGVyaWFsOiBDb21wb25lbnRNYXRlcmlhbCA9IG5vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1hdGVyaWFsKTtcclxuICAgICAgICBpZiAoY21wTWVzaCAmJiBjbXBNZXNoLmlzQWN0aXZlICYmIGNtcE1hdGVyaWFsICYmIGNtcE1hdGVyaWFsLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAvLyBsZXQgbXR4TWVzaFRvVmlldzogTWF0cml4NHg0ID0gTWF0cml4NHg0Lk1VTFRJUExJQ0FUSU9OKF9jbXBDYW1lcmEubXR4V29ybGRUb1ZpZXcsIGNtcE1lc2gubXR4V29ybGQpO1xyXG4gICAgICAgICAgUmVuZGVyLnBpY2sobm9kZSwgbm9kZS5tdHhXb3JsZCwgX2NtcENhbWVyYSk7XHJcbiAgICAgICAgICAvLyBSZW5kZXJQYXJ0aWNsZXMuZHJhd1BhcnRpY2xlcygpO1xyXG4gICAgICAgICAgLy8gUmVjeWNsZXIuc3RvcmUobXR4TWVzaFRvVmlldyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBSZW5kZXIuc2V0QmxlbmRNb2RlKEJMRU5ELlRSQU5TUEFSRU5UKTtcclxuXHJcbiAgICAgIGxldCBwaWNrczogUGlja1tdID0gUmVuZGVyLmdldFBpY2tzKHNpemUsIF9jbXBDYW1lcmEpO1xyXG4gICAgICBSZW5kZXIucmVzZXRGcmFtZUJ1ZmZlcigpO1xyXG4gICAgICByZXR1cm4gcGlja3M7XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAvLyNyZWdpb24gRHJhd2luZ1xyXG4gICAgcHVibGljIHN0YXRpYyBkcmF3KF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSk6IHZvaWQge1xyXG4gICAgICBfY21wQ2FtZXJhLnJlc2V0V29ybGRUb1ZpZXcoKTtcclxuICAgICAgUmVuZGVyLmRyYXdMaXN0KF9jbXBDYW1lcmEsIHRoaXMubm9kZXNTaW1wbGUpO1xyXG4gICAgICBSZW5kZXIuZHJhd0xpc3RBbHBoYShfY21wQ2FtZXJhKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZHJhd0xpc3RBbHBoYShfY21wQ2FtZXJhOiBDb21wb25lbnRDYW1lcmEpOiB2b2lkIHtcclxuICAgICAgZnVuY3Rpb24gc29ydChfYTogTm9kZSwgX2I6IE5vZGUpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAoUmVmbGVjdC5nZXQoX2EsIFwiekNhbWVyYVwiKSA8IFJlZmxlY3QuZ2V0KF9iLCBcInpDYW1lcmFcIikpID8gMSA6IC0xO1xyXG4gICAgICB9XHJcbiAgICAgIGZvciAobGV0IG5vZGUgb2YgUmVuZGVyLm5vZGVzQWxwaGEpXHJcbiAgICAgICAgUmVmbGVjdC5zZXQobm9kZSwgXCJ6Q2FtZXJhXCIsIF9jbXBDYW1lcmEucG9pbnRXb3JsZFRvQ2xpcChub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNZXNoKS5tdHhXb3JsZC50cmFuc2xhdGlvbikueik7XHJcblxyXG4gICAgICBsZXQgc29ydGVkOiBOb2RlW10gPSBSZW5kZXIubm9kZXNBbHBoYS5nZXRTb3J0ZWQoc29ydCk7XHJcbiAgICAgIFJlbmRlci5kcmF3TGlzdChfY21wQ2FtZXJhLCBzb3J0ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGRyYXdMaXN0KF9jbXBDYW1lcmE6IENvbXBvbmVudENhbWVyYSwgX2xpc3Q6IFJlY3ljYWJsZUFycmF5PE5vZGU+IHwgQXJyYXk8Tm9kZT4pOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgbm9kZSBvZiBfbGlzdCkge1xyXG4gICAgICAgIFJlbmRlci5kcmF3Tm9kZShub2RlLCBfY21wQ2FtZXJhKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vI3JlZ2lvbiBQaHlzaWNzXHJcbiAgICBwcml2YXRlIHN0YXRpYyB0cmFuc2Zvcm1CeVBoeXNpY3MoX25vZGU6IE5vZGUsIF9jbXBSaWdpZGJvZHk6IENvbXBvbmVudFJpZ2lkYm9keSk6IHZvaWQge1xyXG4gICAgICBpZiAoIV9jbXBSaWdpZGJvZHkuaXNJbml0aWFsaXplZCkgLy8gfHwgUHJvamVjdC5tb2RlID09IE1PREUuRURJVE9SKVxyXG4gICAgICAgIF9jbXBSaWdpZGJvZHkuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgaWYgKCFQaHlzaWNzLmdldEJvZHlMaXN0KCkubGVuZ3RoKVxyXG4gICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgIGlmICghX25vZGUubXR4TG9jYWwpIHtcclxuICAgICAgICB0aHJvdyAobmV3IEVycm9yKFwiQ29tcG9uZW50UmlnaWRib2R5IHJlcXVpcmVzIENvbXBvbmVudFRyYW5zZm9ybSBhdCB0aGUgc2FtZSBOb2RlXCIpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgX2NtcFJpZ2lkYm9keS5jaGVja0NvbGxpc2lvbkV2ZW50cygpO1xyXG5cclxuICAgICAgaWYgKF9jbXBSaWdpZGJvZHkudHlwZUJvZHkgPT0gQk9EWV9UWVBFLktJTkVNQVRJQyB8fCBQcm9qZWN0Lm1vZGUgPT0gTU9ERS5FRElUT1IpIHsgLy9DYXNlIG9mIEtpbmVtYXRpYyBSaWdpZGJvZHlcclxuICAgICAgICBsZXQgbXR4UGl2b3RXb3JsZDogTWF0cml4NHg0ID0gTWF0cml4NHg0Lk1VTFRJUExJQ0FUSU9OKF9ub2RlLm10eFdvcmxkLCBfY21wUmlnaWRib2R5Lm10eFBpdm90VW5zY2FsZWQpO1xyXG4gICAgICAgIF9jbXBSaWdpZGJvZHkuc2V0UG9zaXRpb24obXR4UGl2b3RXb3JsZC50cmFuc2xhdGlvbik7XHJcbiAgICAgICAgX2NtcFJpZ2lkYm9keS5zZXRSb3RhdGlvbihtdHhQaXZvdFdvcmxkLnJvdGF0aW9uKTtcclxuICAgICAgICBSZWN5Y2xlci5zdG9yZShtdHhQaXZvdFdvcmxkKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBtdHhXb3JsZDogTWF0cml4NHg0ID0gTWF0cml4NHg0LkNPTlNUUlVDVElPTihcclxuICAgICAgICB7IHRyYW5zbGF0aW9uOiBfY21wUmlnaWRib2R5LmdldFBvc2l0aW9uKCksIHJvdGF0aW9uOiBfY21wUmlnaWRib2R5LmdldFJvdGF0aW9uKCksIHNjYWxpbmc6IG51bGwgfVxyXG4gICAgICApO1xyXG4gICAgICBtdHhXb3JsZC5tdWx0aXBseShfY21wUmlnaWRib2R5Lm10eFBpdm90SW52ZXJzZSk7XHJcbiAgICAgIF9ub2RlLm10eFdvcmxkLnRyYW5zbGF0aW9uID0gbXR4V29ybGQudHJhbnNsYXRpb247XHJcbiAgICAgIF9ub2RlLm10eFdvcmxkLnJvdGF0aW9uID0gbXR4V29ybGQucm90YXRpb247XHJcbiAgICAgIGxldCBtdHhMb2NhbDogTWF0cml4NHg0ID0gX25vZGUuZ2V0UGFyZW50KCkgPyBNYXRyaXg0eDQuUkVMQVRJVkUoX25vZGUubXR4V29ybGQsIF9ub2RlLmdldFBhcmVudCgpLm10eFdvcmxkKSA6IF9ub2RlLm10eFdvcmxkO1xyXG4gICAgICBfbm9kZS5tdHhMb2NhbC5zZXQobXR4TG9jYWwpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShtdHhXb3JsZCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKG10eExvY2FsKTtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG4gIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBJbnNlcnRlZCBpbnRvIGEge0BsaW5rIE1lc2h9LCBhbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzIGNhbGN1bGF0ZXMgYW5kIHJlcHJlc2VudHMgdGhlIG1lc2ggZGF0YSBpbiB0aGUgZm9ybSBuZWVkZWQgYnkgdGhlIHJlbmRlciBlbmdpbmVcclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIFJlbmRlckJ1ZmZlcnMge1xyXG4gICAgdmVydGljZXM/OiBXZWJHTEJ1ZmZlcjtcclxuICAgIGluZGljZXM/OiBXZWJHTEJ1ZmZlcjtcclxuICAgIHRleHR1cmVVVnM/OiBXZWJHTEJ1ZmZlcjtcclxuICAgIG5vcm1hbHM/OiBXZWJHTEJ1ZmZlcjtcclxuICAgIGlCb25lcz86IFdlYkdMQnVmZmVyO1xyXG4gICAgd2VpZ2h0cz86IFdlYkdMQnVmZmVyO1xyXG4gICAgbXR4Qm9uZXM/OiBXZWJHTEJ1ZmZlcjtcclxuICAgIG5JbmRpY2VzPzogbnVtYmVyO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGNsYXNzIFJlbmRlck1lc2gge1xyXG4gICAgcHVibGljIHNtb290aDogUmVuZGVyQnVmZmVycyA9IG51bGw7XHJcbiAgICBwdWJsaWMgZmxhdDogUmVuZGVyQnVmZmVycyA9IG51bGw7XHJcbiAgICBwdWJsaWMgbWVzaDogTWVzaDtcclxuXHJcbiAgICAvKiogdmVydGljZXMgb2YgdGhlIGFjdHVhbCBwb2ludCBjbG91ZCwgc29tZSBwb2ludHMgbWlnaHQgYmUgaW4gdGhlIHNhbWUgbG9jYXRpb24gaW4gb3JkZXIgdG8gcmVmZXIgdG8gZGlmZmVyZW50IHRleGVscyAqL1xyXG4gICAgcHJvdGVjdGVkIMaSdmVydGljZXM6IEZsb2F0MzJBcnJheTtcclxuICAgIC8qKiBpbmRpY2VzIHRvIGNyZWF0ZSBmYWNlcyBmcm9tIHRoZSB2ZXJ0aWNlcywgcm90YXRpb24gZGV0ZXJtaW5lcyBkaXJlY3Rpb24gb2YgZmFjZS1ub3JtYWwgKi9cclxuICAgIHByb3RlY3RlZCDGkmluZGljZXM6IFVpbnQxNkFycmF5O1xyXG4gICAgLyoqIHRleHR1cmUgY29vcmRpbmF0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSB2ZXJ0aWNlcyBieSB0aGUgcG9zaXRpb24gaW4gdGhlIGFycmF5ICovXHJcbiAgICBwcm90ZWN0ZWQgxpJ0ZXh0dXJlVVZzOiBGbG9hdDMyQXJyYXk7XHJcbiAgICAvKiogdmVydGV4IG5vcm1hbHMgZm9yIHNtb290aCBzaGFkaW5nLCBpbnRlcnBvbGF0ZWQgYmV0d2VlbiB2ZXJ0aWNlcyBkdXJpbmcgcmVuZGVyaW5nICovXHJcbiAgICBwcm90ZWN0ZWQgxpJub3JtYWxzVmVydGV4OiBGbG9hdDMyQXJyYXk7XHJcbiAgICAvKiogYm9uZXMgKi9cclxuICAgIHByb3RlY3RlZCDGkmlCb25lczogVWludDhBcnJheTtcclxuICAgIHByb3RlY3RlZCDGkndlaWdodHM6IEZsb2F0MzJBcnJheTtcclxuXHJcbiAgICAvKiogZmxhdC1zaGFkaW5nOiBub3JtYWxpemVkIGZhY2Ugbm9ybWFscywgZXZlcnkgdGhpcmQgZW50cnkgaXMgdXNlZCBvbmx5ICovXHJcbiAgICBwcm90ZWN0ZWQgxpJub3JtYWxzRmxhdDogRmxvYXQzMkFycmF5O1xyXG4gICAgLyoqIGZsYXQtc2hhZGluZzogZXh0cmEgdmVydGV4IGFycmF5LCBzaW5jZSB1c2luZyB2ZXJ0aWNlcyB3aXRoIG11bHRpcGxlIGZhY2VzIGlzIHJhcmVseSBwb3NzaWJsZSBkdWUgdG8gdGhlIGxpbWl0YXRpb24gYWJvdmUgKi9cclxuICAgIHByb3RlY3RlZCDGknZlcnRpY2VzRmxhdDogRmxvYXQzMkFycmF5O1xyXG4gICAgLyoqIGZsYXQtc2hhZGluZzogdGhlcmVmb3JlIGFuIGV4dHJhIGluZGljZXMtYXJyYXkgaXMgbmVlZGVkICovXHJcbiAgICBwcm90ZWN0ZWQgxpJpbmRpY2VzRmxhdDogVWludDE2QXJyYXk7XHJcbiAgICAvKiogZmxhdC1zaGFkaW5nOiBhbmQgYW4gZXh0cmEgdGV4dHVyZVVWLWFycmF5ICovXHJcbiAgICBwcm90ZWN0ZWQgxpJ0ZXh0dXJlVVZzRmxhdDogRmxvYXQzMkFycmF5O1xyXG4gICAgLyoqIGJvbmVzICovXHJcbiAgICBwcm90ZWN0ZWQgxpJpQm9uZXNGbGF0OiBVaW50OEFycmF5O1xyXG4gICAgcHJvdGVjdGVkIMaSd2VpZ2h0c0ZsYXQ6IEZsb2F0MzJBcnJheTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihfbWVzaDogTWVzaCkge1xyXG4gICAgICB0aGlzLm1lc2ggPSBfbWVzaDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlCb25lcygpOiBVaW50OEFycmF5IHtcclxuICAgICAgcmV0dXJuIHRoaXMuxpJpQm9uZXMgfHwgKCAvLyByZXR1cm4gY2FjaGUgb3IgLi4uXHJcbiAgICAgICAgdGhpcy7GkmlCb25lcyA9IHRoaXMubWVzaC52ZXJ0aWNlcy5zb21lKF92ZXJ0ZXggPT4gX3ZlcnRleC5ib25lcykgP1xyXG4gICAgICAgICAgbmV3IFVpbnQ4QXJyYXkodGhpcy5tZXNoLnZlcnRpY2VzLmZsYXRNYXAoKF92ZXJ0ZXg6IFZlcnRleCwgX2luZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYm9uZXM6IEJvbmVbXSA9IHRoaXMubWVzaC52ZXJ0aWNlcy5ib25lcyhfaW5kZXgpO1xyXG4gICAgICAgICAgICByZXR1cm4gW2JvbmVzPy5bMF0/LmluZGV4IHx8IDAsIGJvbmVzPy5bMV0/LmluZGV4IHx8IDAsIGJvbmVzPy5bMl0/LmluZGV4IHx8IDAsIGJvbmVzPy5bM10/LmluZGV4IHx8IDBdO1xyXG4gICAgICAgICAgfSkpIDpcclxuICAgICAgICB1bmRlZmluZWRcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHdlaWdodHMoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgcmV0dXJuIHRoaXMuxpJ3ZWlnaHRzIHx8ICggLy8gcmV0dXJuIGNhY2hlIG9yIC4uLlxyXG4gICAgICAgIHRoaXMuxpJ3ZWlnaHRzID0gdGhpcy5tZXNoLnZlcnRpY2VzLnNvbWUoX3ZlcnRleCA9PiBfdmVydGV4LmJvbmVzKSA/XHJcbiAgICAgICAgICBuZXcgRmxvYXQzMkFycmF5KHRoaXMubWVzaC52ZXJ0aWNlcy5mbGF0TWFwKChfdmVydGV4OiBWZXJ0ZXgsIF9pbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvbmVzOiBCb25lW10gPSB0aGlzLm1lc2gudmVydGljZXMuYm9uZXMoX2luZGV4KTtcclxuICAgICAgICAgICAgcmV0dXJuIFtib25lcz8uWzBdPy53ZWlnaHQgfHwgMCwgYm9uZXM/LlsxXT8ud2VpZ2h0IHx8IDAsIGJvbmVzPy5bMl0/LndlaWdodCB8fCAwLCBib25lcz8uWzNdPy53ZWlnaHQgfHwgMF07XHJcbiAgICAgICAgICB9KSkgOlxyXG4gICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdmVydGljZXMoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgcmV0dXJuIHRoaXMuxpJ2ZXJ0aWNlcyB8fCAoIC8vIHJldHVybiBjYWNoZSBvciAuLi5cclxuICAgICAgICAvLyAuLi4gZmxhdHRlbiBhbGwgdmVydGV4IHBvc2l0aW9ucyBmcm9tIGNsb3VkIGludG8gYSB0eXBlZCBhcnJheVxyXG4gICAgICAgIHRoaXMuxpJ2ZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5tZXNoLnZlcnRpY2VzLmZsYXRNYXAoKF92ZXJ0ZXg6IFZlcnRleCwgX2luZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgIHJldHVybiBbLi4udGhpcy5tZXNoLnZlcnRpY2VzLnBvc2l0aW9uKF9pbmRleCkuZ2V0KCldO1xyXG4gICAgICAgIH0pKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpbmRpY2VzKCk6IFVpbnQxNkFycmF5IHtcclxuICAgICAgcmV0dXJuIHRoaXMuxpJpbmRpY2VzIHx8ICggLy8gcmV0dXJuIGNhY2hlIG9yIC4uLlxyXG4gICAgICAgIC8vIC4uLiBmbGF0dGVuIGFsbCBpbmRpY2VzIGZyb20gdGhlIGZhY2VzIGludG8gYSB0eXBlZCBhcnJheVxyXG4gICAgICAgIHRoaXMuxpJpbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KHRoaXMubWVzaC5mYWNlcy5mbGF0TWFwKChfZmFjZTogRmFjZSkgPT4gWy4uLl9mYWNlLmluZGljZXNdKVxyXG4gICAgICAgICkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbm9ybWFsc1ZlcnRleCgpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICBpZiAodGhpcy7Gkm5vcm1hbHNWZXJ0ZXggPT0gbnVsbCkge1xyXG4gICAgICAgIC8vIHN1bSB1cCBhbGwgdW5zY2FsZWQgbm9ybWFscyBvZiBmYWNlcyBjb25uZWN0ZWQgdG8gb25lIHZlcnRleC4uLlxyXG4gICAgICAgIHRoaXMubWVzaC52ZXJ0aWNlcy5mb3JFYWNoKF92ZXJ0ZXggPT4gX3ZlcnRleC5ub3JtYWwuc2V0KDAsIDAsIDApKTtcclxuICAgICAgICBmb3IgKGxldCBmYWNlIG9mIHRoaXMubWVzaC5mYWNlcylcclxuICAgICAgICAgIGZvciAobGV0IGluZGV4IG9mIGZhY2UuaW5kaWNlcykge1xyXG4gICAgICAgICAgICB0aGlzLm1lc2gudmVydGljZXMubm9ybWFsKGluZGV4KS5hZGQoZmFjZS5ub3JtYWxVbnNjYWxlZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgLy8gLi4uIGFuZCBub3JtYWxpemUgdGhlbVxyXG4gICAgICAgIHRoaXMubWVzaC52ZXJ0aWNlcy5mb3JFYWNoKF92ZXJ0ZXggPT4ge1xyXG4gICAgICAgICAgLy8gc29tZSB2ZXJ0aWNlcyBtaWdodCBiZSB1bnVzZWQgYW5kIHlpZWxkIGEgemVyby1ub3JtYWwuLi5cclxuICAgICAgICAgIGlmIChfdmVydGV4Lm5vcm1hbC5tYWduaXR1ZGVTcXVhcmVkID4gMClcclxuICAgICAgICAgICAgX3ZlcnRleC5ub3JtYWwubm9ybWFsaXplKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMuxpJub3JtYWxzVmVydGV4ID0gbmV3IEZsb2F0MzJBcnJheShub3JtYWxzVmVydGV4LmZsYXRNYXAoKF9ub3JtYWw6IFZlY3RvcjMpID0+IFsuLi5fbm9ybWFsLmdldCgpXSkpO1xyXG5cclxuICAgICAgICB0aGlzLsaSbm9ybWFsc1ZlcnRleCA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5tZXNoLnZlcnRpY2VzLmZsYXRNYXAoKF92ZXJ0ZXg6IFZlcnRleCwgX2luZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgIHJldHVybiBbLi4udGhpcy5tZXNoLnZlcnRpY2VzLm5vcm1hbChfaW5kZXgpLmdldCgpXTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB0aGlzLsaSbm9ybWFsc1ZlcnRleDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRleHR1cmVVVnMoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgcmV0dXJuIHRoaXMuxpJ0ZXh0dXJlVVZzIHx8ICggLy8gcmV0dXJuIGNhY2hlIG9yIC4uLlxyXG4gICAgICAgIC8vIC4uLiBmbGF0dGVuIGFsbCB1dnMgZnJvbSB0aGUgY2xvdXMgaW50byBhIHR5cGVkIGFycmF5XHJcbiAgICAgICAgdGhpcy7GknRleHR1cmVVVnMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMubWVzaC52ZXJ0aWNlc1xyXG4gICAgICAgICAgLmZpbHRlcihfdmVydGV4ID0+IF92ZXJ0ZXgudXYpXHJcbiAgICAgICAgICAuZmxhdE1hcCgoX3ZlcnRleDogVmVydGV4KSA9PiBbLi4uX3ZlcnRleC51di5nZXQoKV0pXHJcbiAgICAgICAgKSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBnZXQgdmVydGljZXNGbGF0KCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgIHJldHVybiB0aGlzLsaSdmVydGljZXNGbGF0IHx8ICh0aGlzLsaSdmVydGljZXNGbGF0ID0gdGhpcy5jcmVhdGVWZXJ0aWNlc0ZsYXQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBpbmRpY2VzRmxhdCgpOiBVaW50MTZBcnJheSB7XHJcbiAgICAgIHJldHVybiB0aGlzLsaSaW5kaWNlc0ZsYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBub3JtYWxzRmxhdCgpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICByZXR1cm4gdGhpcy7Gkm5vcm1hbHNGbGF0IHx8ICh0aGlzLsaSbm9ybWFsc0ZsYXQgPSB0aGlzLmNyZWF0ZU5vcm1hbHNGbGF0KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdGV4dHVyZVVWc0ZsYXQoKTogRmxvYXQzMkFycmF5IHtcclxuICAgICAgcmV0dXJuIHRoaXMuxpJ0ZXh0dXJlVVZzRmxhdCB8fCAodGhpcy7GknRleHR1cmVVVnNGbGF0ID0gdGhpcy5jcmVhdGVUZXh0dXJlVVZzRmxhdCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGlCb25lc0ZsYXQoKTogVWludDhBcnJheSB7XHJcbiAgICAgIHJldHVybiB0aGlzLsaSaUJvbmVzRmxhdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHdlaWdodHNGbGF0KCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgIHJldHVybiB0aGlzLsaSd2VpZ2h0c0ZsYXQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcclxuICAgICAgdGhpcy5zbW9vdGggPSBudWxsO1xyXG4gICAgICB0aGlzLmZsYXQgPSBudWxsO1xyXG4gICAgICAvLyBidWZmZXJzIGZvciBzbW9vdGggc2hhZGluZ1xyXG4gICAgICB0aGlzLsaSdmVydGljZXMgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMuxpJpbmRpY2VzID0gdW5kZWZpbmVkO1xyXG4gICAgICB0aGlzLsaSdGV4dHVyZVVWcyA9IHVuZGVmaW5lZDtcclxuICAgICAgdGhpcy7Gkm5vcm1hbHNWZXJ0ZXggPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAvLyBzcGVjaWFsIGJ1ZmZlcnMgZm9yIGZsYXQgc2hhZGluZ1xyXG4gICAgICB0aGlzLsaSbm9ybWFsc0ZsYXQgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMuxpJ2ZXJ0aWNlc0ZsYXQgPSB1bmRlZmluZWQ7XHJcbiAgICAgIHRoaXMuxpJpbmRpY2VzRmxhdCA9IHVuZGVmaW5lZDtcclxuICAgICAgdGhpcy7GknRleHR1cmVVVnNGbGF0ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgdGhpcy7GkmlCb25lcyA9IHVuZGVmaW5lZDtcclxuICAgICAgdGhpcy7GkndlaWdodHMgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZVZlcnRpY2VzRmxhdCgpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICBsZXQgcG9zaXRpb25zOiBWZWN0b3IzW10gPSBbXTtcclxuICAgICAgbGV0IGJvbmVzOiBCb25lW11bXSA9IFtdO1xyXG4gICAgICBsZXQgaW5kaWNlczogbnVtYmVyW10gPSBbXTtcclxuICAgICAgbGV0IGk6IG51bWJlciA9IDA7XHJcbiAgICAgIGZvciAobGV0IGZhY2Ugb2YgdGhpcy5tZXNoLmZhY2VzKVxyXG4gICAgICAgIGZvciAobGV0IGluZGV4IG9mIGZhY2UuaW5kaWNlcykge1xyXG4gICAgICAgICAgaW5kaWNlcy5wdXNoKGkrKyk7XHJcbiAgICAgICAgICBwb3NpdGlvbnMucHVzaCh0aGlzLm1lc2gudmVydGljZXMucG9zaXRpb24oaW5kZXgpKTtcclxuICAgICAgICAgIGxldCBib25lOiBCb25lW10gPSB0aGlzLm1lc2gudmVydGljZXMuYm9uZXMoaW5kZXgpO1xyXG4gICAgICAgICAgaWYgKGJvbmUpXHJcbiAgICAgICAgICAgIGJvbmVzLnB1c2goYm9uZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgdGhpcy7GkmluZGljZXNGbGF0ID0gbmV3IFVpbnQxNkFycmF5KGluZGljZXMpO1xyXG5cclxuICAgICAgdGhpcy7GkmlCb25lc0ZsYXQgPSBuZXcgVWludDhBcnJheShib25lcy5mbGF0TWFwKChfYm9uZXM6IEJvbmVbXSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBbLi4uX2JvbmVzLm1hcChfYm9uZSA9PiBfYm9uZS5pbmRleCldO1xyXG4gICAgICB9KSk7XHJcblxyXG4gICAgICB0aGlzLsaSd2VpZ2h0c0ZsYXQgPSBuZXcgRmxvYXQzMkFycmF5KGJvbmVzLmZsYXRNYXAoKF9ib25lczogQm9uZVtdKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi5fYm9uZXMubWFwKF9ib25lID0+IF9ib25lLndlaWdodCldO1xyXG4gICAgICB9KSk7XHJcblxyXG4gICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShwb3NpdGlvbnMuZmxhdE1hcChfdiA9PiBbLi4uX3YuZ2V0KCldKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZU5vcm1hbHNGbGF0KCk6IEZsb2F0MzJBcnJheSB7XHJcbiAgICAgIGxldCBub3JtYWxzOiBWZWN0b3IzW10gPSBbXTtcclxuICAgICAgbGV0IHplcm86IFZlY3RvcjMgPSBWZWN0b3IzLlpFUk8oKTtcclxuICAgICAgZm9yIChsZXQgZmFjZSBvZiB0aGlzLm1lc2guZmFjZXMpIHtcclxuICAgICAgICAvLyBzdG9yZSB0aGUgZmFjZSBub3JtYWwgYXQgdGhlIHBvc2l0aW9uIG9mIHRoZSB0aGlyZCB2ZXJ0ZXhcclxuICAgICAgICBub3JtYWxzLnB1c2goemVybyk7XHJcbiAgICAgICAgbm9ybWFscy5wdXNoKHplcm8pO1xyXG4gICAgICAgIG5vcm1hbHMucHVzaChmYWNlLm5vcm1hbCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy7Gkm5vcm1hbHNGbGF0ID0gbmV3IEZsb2F0MzJBcnJheShub3JtYWxzLmZsYXRNYXAoX24gPT4gWy4uLl9uLmdldCgpXSkpO1xyXG4gICAgICByZXR1cm4gdGhpcy7Gkm5vcm1hbHNGbGF0O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjcmVhdGVUZXh0dXJlVVZzRmxhdCgpOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICBsZXQgdXY6IG51bWJlcltdID0gW107XHJcbiAgICAgIC8vIGNyZWF0ZSB1bmlxdWUgdmVydGljZXMgZm9yIGVhY2ggZmFjZSwgdHJpcGxpbmcgdGhlIG51bWJlclxyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGluZGV4OiBudW1iZXIgPSB0aGlzLmluZGljZXNbaV0gKiAyO1xyXG4gICAgICAgIHV2LnB1c2godGhpcy50ZXh0dXJlVVZzW2luZGV4XSwgdGhpcy50ZXh0dXJlVVZzW2luZGV4ICsgMV0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KHV2KTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICAvKipcclxuICAgKiBDb250cm9scyB0aGUgcmVuZGVyaW5nIG9mIGEgYnJhbmNoLCB1c2luZyB0aGUgZ2l2ZW4ge0BsaW5rIENvbXBvbmVudENhbWVyYX0sXHJcbiAgICogYW5kIHRoZSBwcm9wYWdhdGlvbiBvZiB0aGUgcmVuZGVyZWQgaW1hZ2UgZnJvbSB0aGUgb2Zmc2NyZWVuIHJlbmRlcmJ1ZmZlciB0byB0aGUgdGFyZ2V0IGNhbnZhc1xyXG4gICAqIHRocm91Z2ggYSBzZXJpZXMgb2Yge0BsaW5rIEZyYW1pbmd9IG9iamVjdHMuIFRoZSBzdGFnZXMgaW52b2x2ZWQgYXJlIGluIG9yZGVyIG9mIHJlbmRlcmluZ1xyXG4gICAqIHtAbGluayBSZW5kZXJ9LnZpZXdwb3J0IC0+IHtAbGluayBWaWV3cG9ydH0uc291cmNlIC0+IHtAbGluayBWaWV3cG9ydH0uZGVzdGluYXRpb24gLT4gRE9NLUNhbnZhcyAtPiBDbGllbnQoQ1NTKVxyXG4gICAqIEBhdXRob3JzIEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTktMjAyMlxyXG4gICAqIEBsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9KaXJrYURlbGxPcm8vRlVER0Uvd2lraS9WaWV3cG9ydFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBWaWV3cG9ydCBleHRlbmRzIEV2ZW50VGFyZ2V0VW5pZmllZCB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBmb2N1czogVmlld3BvcnQ7XHJcblxyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZyA9IFwiVmlld3BvcnRcIjsgLy8gVGhlIG5hbWUgdG8gY2FsbCB0aGlzIHZpZXdwb3J0IGJ5LlxyXG4gICAgcHVibGljIGNhbWVyYTogQ29tcG9uZW50Q2FtZXJhID0gbnVsbDsgLy8gVGhlIGNhbWVyYSByZXByZXNlbnRpbmcgdGhlIHZpZXcgcGFyYW1ldGVycyB0byByZW5kZXIgdGhlIGJyYW5jaC5cclxuICAgIHB1YmxpYyByZWN0U291cmNlOiBSZWN0YW5nbGU7XHJcbiAgICBwdWJsaWMgcmVjdERlc3RpbmF0aW9uOiBSZWN0YW5nbGU7XHJcblxyXG4gICAgLy8gVE9ETzogdmVyaWZ5IGlmIGNsaWVudCB0byBjYW52YXMgc2hvdWxkIGJlIGluIFZpZXdwb3J0IG9yIHNvbWV3aGVyZSBlbHNlIChXaW5kb3csIENvbnRhaW5lcj8pXHJcbiAgICAvLyBNdWx0aXBsZSB2aWV3cG9ydHMgdXNpbmcgdGhlIHNhbWUgY2FudmFzIHNob3VsZG4ndCBkaWZmZXIgaGVyZS4uLlxyXG4gICAgLy8gZGlmZmVyZW50IGZyYW1pbmcgbWV0aG9kcyBjYW4gYmUgdXNlZCwgdGhpcyBpcyB0aGUgZGVmYXVsdFxyXG4gICAgcHVibGljIGZyYW1lQ2xpZW50VG9DYW52YXM6IEZyYW1pbmdTY2FsZWQgPSBuZXcgRnJhbWluZ1NjYWxlZCgpO1xyXG4gICAgcHVibGljIGZyYW1lQ2FudmFzVG9EZXN0aW5hdGlvbjogRnJhbWluZ0NvbXBsZXggPSBuZXcgRnJhbWluZ0NvbXBsZXgoKTtcclxuICAgIHB1YmxpYyBmcmFtZURlc3RpbmF0aW9uVG9Tb3VyY2U6IEZyYW1pbmdTY2FsZWQgPSBuZXcgRnJhbWluZ1NjYWxlZCgpO1xyXG4gICAgcHVibGljIGZyYW1lU291cmNlVG9SZW5kZXI6IEZyYW1pbmdTY2FsZWQgPSBuZXcgRnJhbWluZ1NjYWxlZCgpO1xyXG5cclxuICAgIHB1YmxpYyBhZGp1c3RpbmdGcmFtZXM6IGJvb2xlYW4gPSB0cnVlO1xyXG4gICAgcHVibGljIGFkanVzdGluZ0NhbWVyYTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICBwdWJsaWMgcGh5c2ljc0RlYnVnTW9kZTogUEhZU0lDU19ERUJVR01PREUgPSBQSFlTSUNTX0RFQlVHTU9ERS5OT05FO1xyXG5cclxuICAgIHB1YmxpYyBjb21wb25lbnRzUGljazogUmVjeWNhYmxlQXJyYXk8Q29tcG9uZW50UGljaz4gPSBuZXcgUmVjeWNhYmxlQXJyYXkoKTtcclxuXHJcbiAgICAjYnJhbmNoOiBOb2RlID0gbnVsbDsgLy8gVGhlIHRvIHJlbmRlciB3aXRoIGFsbCBpdHMgZGVzY2VuZGFudHMuXHJcbiAgICAjY3JjMjogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gbnVsbDtcclxuICAgICNjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50ID0gbnVsbDtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIC8vICNyZWdpb24gRXZlbnRzIChwYXNzaW5nIGZyb20gY2FudmFzIHRvIHZpZXdwb3J0IGFuZCBmcm9tIHRoZXJlIGludG8gYnJhbmNoKVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyB2aWV3cG9ydCBjdXJyZW50bHkgaGFzIGZvY3VzIGFuZCB0aHVzIHJlY2VpdmVzIGtleWJvYXJkIGV2ZW50c1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGhhc0ZvY3VzKCk6IGJvb2xlYW4ge1xyXG4gICAgICByZXR1cm4gKFZpZXdwb3J0LmZvY3VzID09IHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGRlc3RpbmF0aW9uIGNhbnZhc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGNhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjYW52YXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSAyRC1jb250ZXh0IGF0dGFjaGVkIHRvIHRoZSBkZXN0aW5hdGlvbiBjYW52YXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBjb250ZXh0KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjcmMyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29ubmVjdHMgdGhlIHZpZXdwb3J0IHRvIHRoZSBnaXZlbiBjYW52YXMgdG8gcmVuZGVyIHRoZSBnaXZlbiBicmFuY2ggdG8gdXNpbmcgdGhlIGdpdmVuIGNhbWVyYS1jb21wb25lbnQsIGFuZCBuYW1lcyB0aGUgdmlld3BvcnQgYXMgZ2l2ZW4uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpbml0aWFsaXplKF9uYW1lOiBzdHJpbmcsIF9icmFuY2g6IE5vZGUsIF9jYW1lcmE6IENvbXBvbmVudENhbWVyYSwgX2NhbnZhczogSFRNTENhbnZhc0VsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgdGhpcy5uYW1lID0gX25hbWU7XHJcbiAgICAgIHRoaXMuY2FtZXJhID0gX2NhbWVyYTtcclxuICAgICAgdGhpcy4jY2FudmFzID0gX2NhbnZhcztcclxuICAgICAgdGhpcy4jY3JjMiA9IF9jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICB0aGlzLiNjYW52YXMudGFiSW5kZXggPSAwOyAvLyBjYW4gZ2V0IGZvY3VzIGFuZCByZWNlaXZlIGtleWJvYXJkIGV2ZW50c1xyXG5cclxuICAgICAgdGhpcy5yZWN0U291cmNlID0gUmVuZGVyLmdldENhbnZhc1JlY3QoKTtcclxuICAgICAgdGhpcy5yZWN0RGVzdGluYXRpb24gPSB0aGlzLmdldENsaWVudFJlY3RhbmdsZSgpO1xyXG5cclxuICAgICAgdGhpcy5zZXRCcmFuY2goX2JyYW5jaCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBzaXplIG9mIHRoZSBkZXN0aW5hdGlvbiBjYW52YXMgYXMgYSByZWN0YW5nbGUsIHggYW5kIHkgYXJlIGFsd2F5cyAwIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q2FudmFzUmVjdGFuZ2xlKCk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIHJldHVybiBSZWN0YW5nbGUuR0VUKDAsIDAsIHRoaXMuI2NhbnZhcy53aWR0aCwgdGhpcy4jY2FudmFzLmhlaWdodCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjbGllbnQgcmVjdGFuZ2xlIHRoZSBjYW52YXMgaXMgZGlzcGxheWVkIGFuZCBmaXQgaW4sIHggYW5kIHkgYXJlIGFsd2F5cyAwIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0Q2xpZW50UmVjdGFuZ2xlKCk6IFJlY3RhbmdsZSB7XHJcbiAgICAgIC8vIEZVREdFIGRvZXNuJ3QgY2FyZSBhYm91dCB3aGVyZSB0aGUgY2xpZW50IHJlY3QgaXMsIG9ubHkgYWJvdXQgdGhlIHNpemUgbWF0dGVycy5cclxuICAgICAgLy8gcmV0dXJuIFJlY3RhbmdsZS5HRVQodGhpcy5jYW52YXMub2Zmc2V0TGVmdCwgdGhpcy5jYW52YXMub2Zmc2V0VG9wLCB0aGlzLmNhbnZhcy5jbGllbnRXaWR0aCwgdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0KTtcclxuICAgICAgcmV0dXJuIFJlY3RhbmdsZS5HRVQoMCwgMCwgdGhpcy4jY2FudmFzLmNsaWVudFdpZHRoLCB0aGlzLiNjYW52YXMuY2xpZW50SGVpZ2h0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgYnJhbmNoIHRvIGJlIGRyYXduIGluIHRoZSB2aWV3cG9ydC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEJyYW5jaChfYnJhbmNoOiBOb2RlKTogdm9pZCB7XHJcbiAgICAgIGlmIChfYnJhbmNoKVxyXG4gICAgICAgIF9icmFuY2guZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuQVRUQUNIX0JSQU5DSCkpO1xyXG4gICAgICB0aGlzLiNicmFuY2ggPSBfYnJhbmNoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGJyYW5jaCB0aGlzIHZpZXdwb3J0IHJlbmRlcnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldEJyYW5jaCgpOiBOb2RlIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2JyYW5jaDtcclxuICAgIH1cclxuXHJcbiAgICAvLyAjcmVnaW9uIERyYXdpbmdcclxuICAgIC8qKlxyXG4gICAgICogRHJhdyB0aGlzIHZpZXdwb3J0IGRpc3BsYXlpbmcgaXRzIGJyYW5jaC4gQnkgZGVmYXVsdCwgdGhlIHRyYW5zZm9ybXMgaW4gdGhlIGJyYW5jaCBhcmUgcmVjYWxjdWxhdGVkIGZpcnN0LlxyXG4gICAgICogUGFzcyBgZmFsc2VgIGlmIGNhbGN1bGF0aW9uIHdhcyBhbHJlYWR5IGRvbmUgZm9yIHRoaXMgZnJhbWUgXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkcmF3KF9jYWxjdWxhdGVUcmFuc2Zvcm1zOiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xyXG4gICAgICB0aGlzLmNvbXB1dGVEcmF3aW5nKF9jYWxjdWxhdGVUcmFuc2Zvcm1zKTtcclxuICAgICAgaWYgKHRoaXMucGh5c2ljc0RlYnVnTW9kZSAhPSBQSFlTSUNTX0RFQlVHTU9ERS5QSFlTSUNfT0JKRUNUU19PTkxZKVxyXG4gICAgICAgIFJlbmRlci5kcmF3KHRoaXMuY2FtZXJhKTtcclxuICAgICAgaWYgKHRoaXMucGh5c2ljc0RlYnVnTW9kZSAhPSBQSFlTSUNTX0RFQlVHTU9ERS5OT05FKSB7XHJcbiAgICAgICAgUGh5c2ljcy5kcmF3KHRoaXMuY2FtZXJhLCB0aGlzLnBoeXNpY3NEZWJ1Z01vZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLiNjcmMyLmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLiNjcmMyLmRyYXdJbWFnZShcclxuICAgICAgICBSZW5kZXIuZ2V0Q2FudmFzKCksXHJcbiAgICAgICAgdGhpcy5yZWN0U291cmNlLngsIHRoaXMucmVjdFNvdXJjZS55LCB0aGlzLnJlY3RTb3VyY2Uud2lkdGgsIHRoaXMucmVjdFNvdXJjZS5oZWlnaHQsXHJcbiAgICAgICAgdGhpcy5yZWN0RGVzdGluYXRpb24ueCwgdGhpcy5yZWN0RGVzdGluYXRpb24ueSwgdGhpcy5yZWN0RGVzdGluYXRpb24ud2lkdGgsIHRoaXMucmVjdERlc3RpbmF0aW9uLmhlaWdodFxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAqIFRoZSB0cmFuc2Zvcm1zIGluIHRoZSBicmFuY2ggYXJlIHJlY2FsY3VsYXRlZCBoZXJlLlxyXG4gICAgKi9cclxuICAgIHB1YmxpYyBjb21wdXRlRHJhd2luZyhfY2FsY3VsYXRlVHJhbnNmb3JtczogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgaWYgKCF0aGlzLiNicmFuY2gpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICBSZW5kZXIucmVzZXRGcmFtZUJ1ZmZlcigpO1xyXG4gICAgICBpZiAoIXRoaXMuY2FtZXJhLmlzQWN0aXZlKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgaWYgKHRoaXMuYWRqdXN0aW5nRnJhbWVzKVxyXG4gICAgICAgIHRoaXMuYWRqdXN0RnJhbWVzKCk7XHJcbiAgICAgIGlmICh0aGlzLmFkanVzdGluZ0NhbWVyYSlcclxuICAgICAgICB0aGlzLmFkanVzdENhbWVyYSgpO1xyXG5cclxuICAgICAgaWYgKF9jYWxjdWxhdGVUcmFuc2Zvcm1zKVxyXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlVHJhbnNmb3JtcygpO1xyXG5cclxuICAgICAgUmVuZGVyLmNsZWFyKHRoaXMuY2FtZXJhLmNsckJhY2tncm91bmQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGNhc2NhZGUgb2YgdHJhbnNmb3JtcyBpbiB0aGlzIGJyYW5jaCBhbmQgc3RvcmUgdGhlIHJlc3VsdHMgYXMgbXR4V29ybGQgaW4gdGhlIHtAbGluayBOb2RlfXMgYW5kIHtAbGluayBDb21wb25lbnRNZXNofWVzIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY2FsY3VsYXRlVHJhbnNmb3JtcygpOiB2b2lkIHtcclxuICAgICAgbGV0IG10eFJvb3Q6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5JREVOVElUWSgpO1xyXG4gICAgICBpZiAodGhpcy4jYnJhbmNoLmdldFBhcmVudCgpKVxyXG4gICAgICAgIG10eFJvb3QgPSB0aGlzLiNicmFuY2guZ2V0UGFyZW50KCkubXR4V29ybGQ7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoRVZFTlQuUkVOREVSX1BSRVBBUkVfU1RBUlQpKTtcclxuICAgICAgdGhpcy5hZGp1c3RGcmFtZXMoKTtcclxuICAgICAgUmVuZGVyLnByZXBhcmUodGhpcy4jYnJhbmNoLCBudWxsLCBtdHhSb290KTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChFVkVOVC5SRU5ERVJfUFJFUEFSRV9FTkQpKTtcclxuICAgICAgdGhpcy5jb21wb25lbnRzUGljayA9IFJlbmRlci5jb21wb25lbnRzUGljaztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBlcmZvcm1zIGEgcGljayBvbiBhbGwge0BsaW5rIENvbXBvbmVudFBpY2t9cyBpbiB0aGUgYnJhbmNoIG9mIHRoaXMgdmlld3BvcnRcclxuICAgICAqIHVzaW5nIGEgcmF5IGZyb20gaXRzIGNhbWVyYSB0aHJvdWdoIHRoZSBjbGllbnQgY29vcmRpbmF0ZXMgZ2l2ZW4gaW4gdGhlIGV2ZW50LlxyXG4gICAgICogRGlzcGF0Y2hlcyB0aGUgZXZlbnQgdG8gYWxsIG5vZGVzIGhpdC4gIFxyXG4gICAgICogSWYge0BsaW5rIFBJQ0suQ0FNRVJBfSB3YXMgY2hvc2VuIGFzIHRoZSBtZXRob2QgdG8gcGljaywgYSBwaWNrIHByb3BlcnR5IGdldHMgYWRkZWQgdG8gdGhlIGV2ZW50LCBcclxuICAgICAqIHdoaWNoIGhvbGRzIHRoZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiwgYnV0IGlzIG92ZXJ3cml0dGVuIGZvciBlYWNoIG5vZGUuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkaXNwYXRjaFBvaW50ZXJFdmVudChfZXZlbnQ6IFBvaW50ZXJFdmVudCk6IHZvaWQge1xyXG4gICAgICBsZXQgcG9zQ2xpZW50OiBWZWN0b3IyID0gbmV3IFZlY3RvcjIoX2V2ZW50LmNsaWVudFgsIF9ldmVudC5jbGllbnRZKTtcclxuICAgICAgbGV0IHJheTogUmF5ID0gdGhpcy5nZXRSYXlGcm9tQ2xpZW50KHBvc0NsaWVudCk7XHJcbiAgICAgIC8vIGxldCBjYW1lcmFQaWNrczogUmVjeWNhYmxlQXJyYXk8Tm9kZT4gPSBSZWN5Y2xlci5nZXQoUmVjeWNhYmxlQXJyYXkpOyAvL1RPRE86IHRoaW5rIGFib3V0IG9wdGltaXphdGlvbiBsYXRlclxyXG4gICAgICBsZXQgY2FtZXJhUGlja3M6IE5vZGVbXSA9IFtdO1xyXG4gICAgICBsZXQgb3RoZXJQaWNrczogQ29tcG9uZW50UGlja1tdID0gW107XHJcbiAgICAgIGZvciAobGV0IGNtcFBpY2sgb2YgdGhpcy5jb21wb25lbnRzUGljaylcclxuICAgICAgICBjbXBQaWNrLnBpY2sgPT0gUElDSy5DQU1FUkEgPyBjYW1lcmFQaWNrcy5wdXNoKGNtcFBpY2subm9kZSkgOiBvdGhlclBpY2tzLnB1c2goY21wUGljayk7XHJcblxyXG4gICAgICBpZiAoY2FtZXJhUGlja3MubGVuZ3RoKSB7XHJcbiAgICAgICAgbGV0IHBpY2tzOiBQaWNrW10gPSBQaWNrZXIucGlja0NhbWVyYShjYW1lcmFQaWNrcywgdGhpcy5jYW1lcmEsIHRoaXMucG9pbnRDbGllbnRUb1Byb2plY3Rpb24ocG9zQ2xpZW50KSk7XHJcbiAgICAgICAgZm9yIChsZXQgcGljayBvZiBwaWNrcykge1xyXG4gICAgICAgICAgUmVmbGVjdC5zZXQoX2V2ZW50LCBcInBpY2tcIiwgcGljayk7XHJcbiAgICAgICAgICBwaWNrLm5vZGUuZGlzcGF0Y2hFdmVudChfZXZlbnQpOyBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZvciAobGV0IGNtcFBpY2sgb2Ygb3RoZXJQaWNrcykge1xyXG4gICAgICAgIGNtcFBpY2sucGlja0FuZERpc3BhdGNoKHJheSwgX2V2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRqdXN0IGFsbCBmcmFtZXMgaW52b2x2ZWQgaW4gdGhlIHJlbmRlcmluZyBwcm9jZXNzIGZyb20gdGhlIGRpc3BsYXkgYXJlYSBpbiB0aGUgY2xpZW50IHVwIHRvIHRoZSByZW5kZXJlciBjYW52YXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFkanVzdEZyYW1lcygpOiB2b2lkIHtcclxuICAgICAgLy8gZ2V0IHRoZSByZWN0YW5nbGUgb2YgdGhlIGNhbnZhcyBhcmVhIGFzIGRpc3BsYXllZCAoY29uc2lkZXIgY3NzKVxyXG4gICAgICBsZXQgcmVjdENsaWVudDogUmVjdGFuZ2xlID0gdGhpcy5nZXRDbGllbnRSZWN0YW5nbGUoKTtcclxuICAgICAgLy8gYWRqdXN0IHRoZSBjYW52YXMgc2l6ZSBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIGZyYW1pbmcgYXBwbGllZCB0byBjbGllbnRcclxuICAgICAgbGV0IHJlY3RDYW52YXM6IFJlY3RhbmdsZSA9IHRoaXMuZnJhbWVDbGllbnRUb0NhbnZhcy5nZXRSZWN0KHJlY3RDbGllbnQpO1xyXG4gICAgICB0aGlzLiNjYW52YXMud2lkdGggPSByZWN0Q2FudmFzLndpZHRoO1xyXG4gICAgICB0aGlzLiNjYW52YXMuaGVpZ2h0ID0gcmVjdENhbnZhcy5oZWlnaHQ7XHJcblxyXG4gICAgICBsZXQgcmVjdFRlbXA6IFJlY3RhbmdsZTtcclxuICAgICAgLy8gYWRqdXN0IHRoZSBkZXN0aW5hdGlvbiBhcmVhIG9uIHRoZSB0YXJnZXQtY2FudmFzIHRvIHJlbmRlciB0byBieSBhcHBseWluZyB0aGUgZnJhbWluZyB0byBjYW52YXNcclxuICAgICAgcmVjdFRlbXAgPSB0aGlzLmZyYW1lQ2FudmFzVG9EZXN0aW5hdGlvbi5nZXRSZWN0KHJlY3RDYW52YXMpO1xyXG4gICAgICB0aGlzLnJlY3REZXN0aW5hdGlvbi5jb3B5KHJlY3RUZW1wKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUocmVjdFRlbXApO1xyXG4gICAgICAvLyBhZGp1c3QgdGhlIGFyZWEgb24gdGhlIHNvdXJjZS1jYW52YXMgdG8gcmVuZGVyIGZyb20gYnkgYXBwbHlpbmcgdGhlIGZyYW1pbmcgdG8gZGVzdGluYXRpb24gYXJlYVxyXG4gICAgICByZWN0VGVtcCA9IHRoaXMuZnJhbWVEZXN0aW5hdGlvblRvU291cmNlLmdldFJlY3QodGhpcy5yZWN0RGVzdGluYXRpb24pO1xyXG4gICAgICB0aGlzLnJlY3RTb3VyY2UuY29weShyZWN0VGVtcCk7XHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHJlY3RUZW1wKTtcclxuXHJcbiAgICAgIC8vIGhhdmluZyBhbiBvZmZzZXQgc291cmNlIGRvZXMgbWFrZSBzZW5zZSBvbmx5IHdoZW4gbXVsdGlwbGUgdmlld3BvcnRzIGRpc3BsYXkgcGFydHMgb2YgdGhlIHNhbWUgcmVuZGVyaW5nLiBGb3Igbm93OiBzaGlmdCBpdCB0byAwLDBcclxuICAgICAgdGhpcy5yZWN0U291cmNlLnggPSB0aGlzLnJlY3RTb3VyY2UueSA9IDA7XHJcbiAgICAgIC8vIHN0aWxsLCBhIHBhcnRpYWwgaW1hZ2Ugb2YgdGhlIHJlbmRlcmluZyBtYXkgYmUgcmV0cmlldmVkIGJ5IG1vdmluZyBhbmQgcmVzaXppbmcgdGhlIHJlbmRlciB2aWV3cG9ydC4gRm9yIG5vdywgaXQncyBhbHdheXMgYWRqdXN0ZWQgdG8gdGhlIGN1cnJlbnQgdmlld3BvcnRcclxuICAgICAgbGV0IHJlY3RSZW5kZXI6IFJlY3RhbmdsZSA9IHRoaXMuZnJhbWVTb3VyY2VUb1JlbmRlci5nZXRSZWN0KHRoaXMucmVjdFNvdXJjZSk7XHJcbiAgICAgIFJlbmRlci5zZXRSZW5kZXJSZWN0YW5nbGUocmVjdFJlbmRlcik7XHJcbiAgICAgIC8vIG5vIG1vcmUgdHJhbnNmb3JtYXRpb24gYWZ0ZXIgdGhpcyBmb3Igbm93LCBvZmZzY3JlZW4gY2FudmFzIGFuZCByZW5kZXItdmlld3BvcnQgaGF2ZSB0aGUgc2FtZSBzaXplXHJcbiAgICAgIFJlbmRlci5zZXRDYW52YXNTaXplKHJlY3RSZW5kZXIud2lkdGgsIHJlY3RSZW5kZXIuaGVpZ2h0KTtcclxuXHJcbiAgICAgIFJlY3ljbGVyLnN0b3JlKHJlY3RDbGllbnQpO1xyXG4gICAgICBSZWN5Y2xlci5zdG9yZShyZWN0Q2FudmFzKTtcclxuICAgICAgUmVjeWNsZXIuc3RvcmUocmVjdFJlbmRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGp1c3QgdGhlIGNhbWVyYSBwYXJhbWV0ZXJzIHRvIGZpdCB0aGUgcmVuZGVyaW5nIGludG8gdGhlIHJlbmRlciB2aWVwb3J0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhZGp1c3RDYW1lcmEoKTogdm9pZCB7XHJcbiAgICAgIGxldCByZWN0OiBSZWN0YW5nbGUgPSBSZW5kZXIuZ2V0UmVuZGVyUmVjdGFuZ2xlKCk7XHJcbiAgICAgIC8vIGlmICh0aGlzLmNhbWVyYS5nZXRQcm9qZWN0aW9uKCkgPT0gUFJPSkVDVElPTi5PUlRIT0dSQVBISUMpXHJcbiAgICAgIC8vICAgdGhpcy5jYW1lcmEucHJvamVjdE9ydGhvZ3JhcGhpYygtcmVjdC53aWR0aCAvIDIwLCByZWN0LndpZHRoIC8gMjAsIHJlY3QuaGVpZ2h0IC8gMjAsIC1yZWN0LmhlaWdodCAvIDIwKTtcclxuICAgICAgLy8gZWxzZVxyXG4gICAgICB0aGlzLmNhbWVyYS5wcm9qZWN0Q2VudHJhbChcclxuICAgICAgICByZWN0LndpZHRoIC8gcmVjdC5oZWlnaHQsIHRoaXMuY2FtZXJhLmdldEZpZWxkT2ZWaWV3KCksIHRoaXMuY2FtZXJhLmdldERpcmVjdGlvbigpLCB0aGlzLmNhbWVyYS5nZXROZWFyKCksIHRoaXMuY2FtZXJhLmdldEZhcigpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICAvLyAjZW5kcmVnaW9uXHJcblxyXG4gICAgLy8jcmVnaW9uIFBvaW50c1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEge0BsaW5rIFJheX0gaW4gd29ybGQgY29vcmRpbmF0ZXMgZnJvbSB0aGlzIGNhbWVyYSB0aHJvdWdoIHRoZSBwb2ludCBnaXZlbiBpbiBjbGllbnQgc3BhY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFJheUZyb21DbGllbnQoX3BvaW50OiBWZWN0b3IyKTogUmF5IHtcclxuICAgICAgbGV0IHBvc1Byb2plY3Rpb246IFZlY3RvcjIgPSB0aGlzLnBvaW50Q2xpZW50VG9Qcm9qZWN0aW9uKF9wb2ludCk7XHJcbiAgICAgIGxldCByYXk6IFJheSA9IG5ldyBSYXkobmV3IFZlY3RvcjMoLXBvc1Byb2plY3Rpb24ueCwgcG9zUHJvamVjdGlvbi55LCAxKSk7XHJcblxyXG4gICAgICAvLyByYXkuZGlyZWN0aW9uLnNjYWxlKGNhbWVyYS5kaXN0YW5jZSk7XHJcbiAgICAgIHJheS5vcmlnaW4udHJhbnNmb3JtKHRoaXMuY2FtZXJhLm10eFBpdm90KTtcclxuICAgICAgcmF5LmRpcmVjdGlvbi50cmFuc2Zvcm0odGhpcy5jYW1lcmEubXR4UGl2b3QsIGZhbHNlKTtcclxuICAgICAgbGV0IGNhbWVyYU5vZGU6IE5vZGUgPSB0aGlzLmNhbWVyYS5ub2RlO1xyXG4gICAgICBpZiAoY2FtZXJhTm9kZSkge1xyXG4gICAgICAgIHJheS5vcmlnaW4udHJhbnNmb3JtKGNhbWVyYU5vZGUubXR4V29ybGQpO1xyXG4gICAgICAgIHJheS5kaXJlY3Rpb24udHJhbnNmb3JtKGNhbWVyYU5vZGUubXR4V29ybGQsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHBvaW50IG9uIHRoZSBjbGllbnQgcmVjdGFuZ2xlIG1hdGNoaW5nIHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBnaXZlbiBwb2ludCBpbiB3b3JsZCBzcGFjZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9pbnRXb3JsZFRvQ2xpZW50KF9wb3NpdGlvbjogVmVjdG9yMyk6IFZlY3RvcjIge1xyXG4gICAgICBsZXQgcHJvamVjdGlvbjogVmVjdG9yMyA9IHRoaXMuY2FtZXJhLnBvaW50V29ybGRUb0NsaXAoX3Bvc2l0aW9uKTtcclxuICAgICAgbGV0IHBvc0NsaWVudDogVmVjdG9yMiA9IHRoaXMucG9pbnRDbGlwVG9DbGllbnQocHJvamVjdGlvbi50b1ZlY3RvcjIoKSk7XHJcbiAgICAgIHJldHVybiBwb3NDbGllbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcG9pbnQgb24gdGhlIHNvdXJjZS1yZWN0YW5nbGUgbWF0Y2hpbmcgdGhlIGdpdmVuIHBvaW50IG9uIHRoZSBjbGllbnQgcmVjdGFuZ2xlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwb2ludENsaWVudFRvU291cmNlKF9jbGllbnQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHJlc3VsdDogVmVjdG9yMiA9IHRoaXMuZnJhbWVDbGllbnRUb0NhbnZhcy5nZXRQb2ludChfY2xpZW50LCB0aGlzLmdldENsaWVudFJlY3RhbmdsZSgpKTtcclxuICAgICAgcmVzdWx0ID0gdGhpcy5mcmFtZUNhbnZhc1RvRGVzdGluYXRpb24uZ2V0UG9pbnQocmVzdWx0LCB0aGlzLmdldENhbnZhc1JlY3RhbmdsZSgpKTtcclxuICAgICAgcmVzdWx0ID0gdGhpcy5mcmFtZURlc3RpbmF0aW9uVG9Tb3VyY2UuZ2V0UG9pbnQocmVzdWx0LCB0aGlzLnJlY3RTb3VyY2UpO1xyXG4gICAgICAvL1RPRE86IHdoZW4gU291cmNlLCBSZW5kZXIgYW5kIFJlbmRlclZpZXdwb3J0IGRldmlhdGUsIGNvbnRpbnVlIHRyYW5zZm9ybWF0aW9uIFxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHBvaW50IG9uIHRoZSByZW5kZXItcmVjdGFuZ2xlIG1hdGNoaW5nIHRoZSBnaXZlbiBwb2ludCBvbiB0aGUgc291cmNlIHJlY3RhbmdsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9pbnRTb3VyY2VUb1JlbmRlcihfc291cmNlOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCBwcm9qZWN0aW9uUmVjdGFuZ2xlOiBSZWN0YW5nbGUgPSB0aGlzLmNhbWVyYS5nZXRQcm9qZWN0aW9uUmVjdGFuZ2xlKCk7XHJcbiAgICAgIGxldCBwb2ludDogVmVjdG9yMiA9IHRoaXMuZnJhbWVTb3VyY2VUb1JlbmRlci5nZXRQb2ludChfc291cmNlLCBwcm9qZWN0aW9uUmVjdGFuZ2xlKTtcclxuICAgICAgLy8gY29uc29sZS5sb2cocHJvamVjdGlvblJlY3RhbmdsZS50b1N0cmluZygpKTtcclxuICAgICAgcmV0dXJuIHBvaW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHBvaW50IG9uIHRoZSByZW5kZXItcmVjdGFuZ2xlIG1hdGNoaW5nIHRoZSBnaXZlbiBwb2ludCBvbiB0aGUgY2xpZW50IHJlY3RhbmdsZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcG9pbnRDbGllbnRUb1JlbmRlcihfY2xpZW50OiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICAgIGxldCBwb2ludDogVmVjdG9yMiA9IHRoaXMucG9pbnRDbGllbnRUb1NvdXJjZShfY2xpZW50KTtcclxuICAgICAgcG9pbnQgPSB0aGlzLnBvaW50U291cmNlVG9SZW5kZXIocG9pbnQpO1xyXG4gICAgICAvL1RPRE86IHdoZW4gUmVuZGVyIGFuZCBSZW5kZXJWaWV3cG9ydCBkZXZpYXRlLCBjb250aW51ZSB0cmFuc2Zvcm1hdGlvbiBcclxuICAgICAgcmV0dXJuIHBvaW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHBvaW50IG9uIGEgcHJvamVjdGlvbiBzdXJmYWNlIGluIHRoZSBoeXBvdGhldGljYWwgZGlzdGFuY2Ugb2YgMSB0byB0aGUgY2FtZXJhICBcclxuICAgICAqIG1hdGNoaW5nIHRoZSBnaXZlbiBwb2ludCBvbiB0aGUgY2xpZW50IHJlY3RhbmdsZVxyXG4gICAgICogVE9ETzogZXhhbWluZSwgaWYgdGhpcyBzaG91bGQgYmUgYSBjYW1lcmEtbWV0aG9kLiBDdXJyZW50IGltcGxlbWVudGF0aW9uIGlzIGZvciBjZW50cmFsLXByb2plY3Rpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHBvaW50Q2xpZW50VG9Qcm9qZWN0aW9uKF9jbGllbnQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHBvc1JlbmRlcjogVmVjdG9yMiA9IHRoaXMucG9pbnRDbGllbnRUb1JlbmRlcihfY2xpZW50KTtcclxuICAgICAgbGV0IHJlY3RSZW5kZXI6IFJlY3RhbmdsZSA9IHRoaXMuZnJhbWVTb3VyY2VUb1JlbmRlci5nZXRSZWN0KHRoaXMucmVjdFNvdXJjZSk7XHJcbiAgICAgIGxldCByZWN0UHJvamVjdGlvbjogUmVjdGFuZ2xlID0gdGhpcy5jYW1lcmEuZ2V0UHJvamVjdGlvblJlY3RhbmdsZSgpO1xyXG5cclxuICAgICAgbGV0IHBvc1Byb2plY3Rpb246IFZlY3RvcjIgPSBuZXcgVmVjdG9yMihcclxuICAgICAgICByZWN0UHJvamVjdGlvbi53aWR0aCAqIHBvc1JlbmRlci54IC8gcmVjdFJlbmRlci53aWR0aCxcclxuICAgICAgICByZWN0UHJvamVjdGlvbi5oZWlnaHQgKiBwb3NSZW5kZXIueSAvIHJlY3RSZW5kZXIuaGVpZ2h0XHJcbiAgICAgICk7XHJcblxyXG4gICAgICBwb3NQcm9qZWN0aW9uLnN1YnRyYWN0KG5ldyBWZWN0b3IyKHJlY3RQcm9qZWN0aW9uLndpZHRoIC8gMiwgcmVjdFByb2plY3Rpb24uaGVpZ2h0IC8gMikpO1xyXG4gICAgICBwb3NQcm9qZWN0aW9uLnkgKj0gLTE7XHJcblxyXG4gICAgICByZXR1cm4gcG9zUHJvamVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwb2ludCBpbiB0aGUgY2xpZW50IHJlY3RhbmdsZSBtYXRjaGluZyB0aGUgZ2l2ZW4gcG9pbnQgaW4gbm9ybWVkIGNsaXBzcGFjZSByZWN0YW5nbGUsIFxyXG4gICAgICogd2hpY2ggc3RyZXRjaGVzIGZyb20gLTEgdG8gMSBpbiBib3RoIGRpbWVuc2lvbnMsIHkgcG9pbnRpbmcgdXBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHBvaW50Q2xpcFRvQ2xpZW50KF9ub3JtZWQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgLy8gbGV0IHJlY3RDbGllbnQ6IFJlY3RhbmdsZSA9IHRoaXMuZ2V0Q2xpZW50UmVjdGFuZ2xlKCk7XHJcbiAgICAgIC8vIGxldCByZXN1bHQ6IFZlY3RvcjIgPSBWZWN0b3IyLk9ORSgwLjUpO1xyXG4gICAgICAvLyByZXN1bHQueCAqPSAoX25vcm1lZC54ICsgMSkgKiByZWN0Q2xpZW50LndpZHRoO1xyXG4gICAgICAvLyByZXN1bHQueSAqPSAoMSAtIF9ub3JtZWQueSkgKiByZWN0Q2xpZW50LmhlaWdodDtcclxuICAgICAgLy8gcmVzdWx0LmFkZChyZWN0Q2xpZW50LnBvc2l0aW9uKTtcclxuICAgICAgLy9UT0RPOiBjaGVjayBpZiByZWN0RGVzdGluYXRpb24gY2FuIHNhZmVseSAoYW5kIG1vcmUgcGVyZm9tYW50KSBiZSB1c2VkIGluc3RlYWQgZ2V0Q2xpZW50UmVjdGFuZ2xlXHJcbiAgICAgIGxldCBwb2ludENsaWVudDogVmVjdG9yMiA9IFJlbmRlci5yZWN0Q2xpcC5wb2ludFRvUmVjdChfbm9ybWVkLCB0aGlzLnJlY3REZXN0aW5hdGlvbik7XHJcbiAgICAgIHJldHVybiBwb2ludENsaWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBwb2ludCBpbiB0aGUgY2xpZW50IHJlY3RhbmdsZSBtYXRjaGluZyB0aGUgZ2l2ZW4gcG9pbnQgaW4gbm9ybWVkIGNsaXBzcGFjZSByZWN0YW5nbGUsIFxyXG4gICAgICogd2hpY2ggc3RyZXRjaGVzIGZyb20gLTEgdG8gMSBpbiBib3RoIGRpbWVuc2lvbnMsIHkgcG9pbnRpbmcgdXBcclxuICAgICAqL1xyXG4gICAgcHVibGljIHBvaW50Q2xpcFRvQ2FudmFzKF9ub3JtZWQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHBvaW50Q2FudmFzOiBWZWN0b3IyID0gUmVuZGVyLnJlY3RDbGlwLnBvaW50VG9SZWN0KF9ub3JtZWQsIHRoaXMuZ2V0Q2FudmFzUmVjdGFuZ2xlKCkpO1xyXG4gICAgICByZXR1cm4gcG9pbnRDYW52YXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcG9pbnQgaW4gdGhlIGJyb3dzZXIgcGFnZSBtYXRjaGluZyB0aGUgZ2l2ZW4gcG9pbnQgb2YgdGhlIHZpZXdwb3J0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBwb2ludENsaWVudFRvU2NyZWVuKF9jbGllbnQ6IFZlY3RvcjIpOiBWZWN0b3IyIHtcclxuICAgICAgbGV0IHNjcmVlbjogVmVjdG9yMiA9IG5ldyBWZWN0b3IyKHRoaXMuI2NhbnZhcy5vZmZzZXRMZWZ0ICsgX2NsaWVudC54LCB0aGlzLiNjYW52YXMub2Zmc2V0VG9wICsgX2NsaWVudC55KTtcclxuICAgICAgcmV0dXJuIHNjcmVlbjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGlmZmVyZW50IHhyIHNlc3Npb24gbW9kZXMgYXZhaWxhYmxlLiBDb3VsZCBiZSBleHBhbmQgd2l0aCBtb3JlIG1vZGVzIGluIHRoZSBmdXR1cmUuXHJcbiAgICogQGF1dGhvcnMgVmFsZW50aW4gU2NobWlkYmVyZ2VyLCBIRlUsIDIwMjIgfCBKb25hcyBQbG90emt5LCBIRlUsIDIwMjNcclxuICAgKi9cclxuICBleHBvcnQgZW51bSBYUl9TRVNTSU9OX01PREUge1xyXG4gICAgSU1NRVJTSVZFX1ZSID0gXCJpbW1lcnNpdmUtdnJcIlxyXG4gICAgLy9JTU1FUlNJVkVfQVIgPSBcImltbWVyc2l2ZS1hclwiLFxyXG4gICAgLy9JTkxJTkUgPSBcImlubGluZVwiXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEaWZmZXJlbnQgcmVmZXJlbmNlIHZyLXNwYWNlcyBhdmFpbGFibGUsIGNyZWF0b3IgaGFzIHRvIGNoZWNrIGlmIHRoZSBzcGFjZSBpcyBzdXBwb3J0ZWQgd2l0aCBpdHMgZGV2aWNlLlxyXG4gICAqIENvdWxkIGJlIGV4cGFuZCB3aXRoIG1vcmUgYXZhaWxhYmxlIHNwYWNlIHR5cGVzIGluIHRoZSBmdXR1cmUuXHJcbiAgICovXHJcbiAgZXhwb3J0IGVudW0gWFJfUkVGRVJFTkNFX1NQQUNFIHtcclxuICAgIFZJRVdFUiA9IFwidmlld2VyXCIsXHJcbiAgICBMT0NBTCA9IFwibG9jYWxcIlxyXG4gICAgLy8gTE9DQUxfRkxPT1IgPSBcImxvY2FsLWZsb29yXCIsXHJcbiAgICAvLyBCT1VOREVEX0ZMT09SID0gXCJib3VuZGVkLWZsb29yXCIsXHJcbiAgICAvLyBVTkJPVU5ERUQgPSBcInVuYm91bmRlZFwiXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBYUlZpZXdwb3J0ICh3ZWJYUiktZXh0ZW5zaW9uIG9mIFZpZXdwb3J0LCB0byBkaXNwbGF5aW5nIGl0cyBicmFuY2ggb24gSGVhZCBNb3VudGVkIGFuZCBBUiAobm90IGltcGxlbXRlZCB5ZXQpIERldmljZXMgXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFhSVmlld3BvcnQgZXh0ZW5kcyBWaWV3cG9ydCB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyB4clZpZXdwb3J0SW5zdGFuY2U6IFhSVmlld3BvcnQgPSBudWxsO1xyXG4gICAgcHVibGljIHZyRGV2aWNlOiBDb21wb25lbnRWUkRldmljZSA9IG51bGw7XHJcbiAgICBwdWJsaWMgc2Vzc2lvbjogWFJTZXNzaW9uID0gbnVsbDtcclxuICAgIHB1YmxpYyByZWZlcmVuY2VTcGFjZTogWFJSZWZlcmVuY2VTcGFjZSA9IG51bGw7XHJcbiAgICBwcml2YXRlIHVzZVZSQ29udHJvbGxlcjogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBjcmMzOiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ID0gbnVsbDtcclxuXHJcbiAgICAvLyBwcml2YXRlIHBvc2VNdHg6IE1hdHJpeDR4NCA9IG5ldyBNYXRyaXg0eDQoKTtcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgWFJWaWV3cG9ydC54clZpZXdwb3J0SW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICB0aGlzLmNyYzMgPSBSZW5kZXJXZWJHTC5nZXRSZW5kZXJpbmdDb250ZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUbyByZXRyaWV2ZSBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZSBvZiB4ciB2aWV3cG9ydCwgcmVhZG9ubHkuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGRlZmF1bHQoKTogWFJWaWV3cG9ydCB7XHJcbiAgICAgIHJldHVybiB0aGlzLnhyVmlld3BvcnRJbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAgKiBDb25uZWN0cyB0aGUgdmlld3BvcnQgdG8gdGhlIGdpdmVuIGNhbnZhcyB0byByZW5kZXIgdGhlIGdpdmVuIGJyYW5jaCB0byB1c2luZyB0aGUgZ2l2ZW4gY2FtZXJhLWNvbXBvbmVudCwgYW5kIG5hbWVzIHRoZSB2aWV3cG9ydCBhcyBnaXZlbi5cclxuICAgICAgKi9cclxuICAgIHB1YmxpYyBpbml0aWFsaXplKF9uYW1lOiBzdHJpbmcsIF9icmFuY2g6IE5vZGUsIF9jYW1lcmFYUjogQ29tcG9uZW50VlJEZXZpY2UgLyogfCBDb21wb25lbnRDYW1lcmFBUiovLCBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCk6IHZvaWQge1xyXG4gICAgICBzdXBlci5pbml0aWFsaXplKF9uYW1lLCBfYnJhbmNoLCBfY2FtZXJhWFIsIF9jYW52YXMpO1xyXG4gICAgICB0aGlzLmNhbWVyYSA9IF9jYW1lcmFYUjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBWUiBTZXNzaW9uIGlzIGluaXRpYWxpemVkIGhlcmUsIGFsc28gVlIgLSBDb250cm9sbGVyIGFyZSBpbml0aWFsaXplZCwgaWYgYm9vbGVhbiBpcyB0cnVlLlxyXG4gICAgICogQ3JlYXRvciBoYXMgdG8gY2FsbCBGcmFtZVJlcXVlc3RYUiBhZnRlciB0aGlzIE1ldGhvZCB0byBydW4gdGhlIHZpZXdwb3J0IGluIHZpcnR1YWwgcmVhbGl0eS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemVWUihfdnJTZXNzaW9uTW9kZTogWFJfU0VTU0lPTl9NT0RFID0gWFJfU0VTU0lPTl9NT0RFLklNTUVSU0lWRV9WUiwgX3ZyUmVmZXJlbmNlU3BhY2VUeXBlOiBYUl9SRUZFUkVOQ0VfU1BBQ0UgPSBYUl9SRUZFUkVOQ0VfU1BBQ0UuTE9DQUwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92ckNvbnRyb2xsZXI6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBsZXQgc2Vzc2lvbjogWFJTZXNzaW9uID0gYXdhaXQgbmF2aWdhdG9yLnhyLnJlcXVlc3RTZXNzaW9uKF92clNlc3Npb25Nb2RlKTtcclxuICAgICAgdGhpcy5yZWZlcmVuY2VTcGFjZSA9IGF3YWl0IHNlc3Npb24ucmVxdWVzdFJlZmVyZW5jZVNwYWNlKF92clJlZmVyZW5jZVNwYWNlVHlwZSk7XHJcbiAgICAgIGF3YWl0IHRoaXMuY3JjMy5tYWtlWFJDb21wYXRpYmxlKCk7XHJcbiAgICAgIGxldCBuYXRpdmVTY2FsZUZhY3RvcjogbnVtYmVyID0gWFJXZWJHTExheWVyLmdldE5hdGl2ZUZyYW1lYnVmZmVyU2NhbGVGYWN0b3Ioc2Vzc2lvbik7XHJcbiAgICAgIC8vVE9ETzogIEZpZWxkIG9mIHZpZXcga8O2bm50ZSBhbiBkZXIgU3RlbGxlIG5vY2ggdmVyw6RuZGVydCB3ZXJkZW4uXHJcbiAgICAgIGF3YWl0IHNlc3Npb24udXBkYXRlUmVuZGVyU3RhdGUoeyBiYXNlTGF5ZXI6IG5ldyBYUldlYkdMTGF5ZXIoc2Vzc2lvbiwgdGhpcy5jcmMzLCB7IGZyYW1lYnVmZmVyU2NhbGVGYWN0b3I6IG5hdGl2ZVNjYWxlRmFjdG9yIH0pIH0pO1xyXG5cclxuICAgICAgdGhpcy52ckRldmljZSA9IDxDb21wb25lbnRWUkRldmljZT50aGlzLmNhbWVyYTtcclxuICAgICAgdGhpcy5pbml0aWFsaXplUmVmZXJlbmNlU3BhY2UoKTtcclxuXHJcbiAgICAgIHRoaXMudXNlVlJDb250cm9sbGVyID0gX3ZyQ29udHJvbGxlcjtcclxuICAgICAgaWYgKF92ckNvbnRyb2xsZXIpIHtcclxuICAgICAgICB0aGlzLnZyRGV2aWNlLnJpZ2h0Q250cmwuY21wVHJhbnNmb3JtID0gbmV3IENvbXBvbmVudFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIHRoaXMudnJEZXZpY2UubGVmdENudHJsLmNtcFRyYW5zZm9ybSA9IG5ldyBDb21wb25lbnRUcmFuc2Zvcm0oKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcclxuXHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlVHJhbnNmb3JtcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIEFSIHNlc3Npb24gY291bGQgYmUgaW5pdGlhbGl6ZWQgaGVyZS4gVXAgdGlsbCBub3cgbm90IGltcGxlbWVudGVkLiBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGluaXRpYWxpemVBUihfYXJTZXNzaW9uTW9kZTogWFJfU0VTU0lPTl9NT0RFID0gbnVsbCwgX2FyUmVmZXJlbmNlU3BhY2VUeXBlOiBYUl9SRUZFUkVOQ0VfU1BBQ0UgPSBudWxsKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIERlYnVnLmVycm9yKFwiTk9UIElNUExFTUVOVEVEIFlFVCEgQ2hlY2sgb3V0IGluaXRpYWxpemVWUiFcIik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogRHJhdyB0aGUgeHIgdmlld3BvcnQgZGlzcGxheWluZyBpdHMgYnJhbmNoLiBCeSBkZWZhdWx0LCB0aGUgdHJhbnNmb3JtcyBpbiB0aGUgYnJhbmNoIGFyZSByZWNhbGN1bGF0ZWQgZmlyc3QuXHJcbiAgICAgKiBQYXNzIGBmYWxzZWAgaWYgY2FsY3VsYXRpb24gd2FzIGFscmVhZHkgZG9uZSBmb3IgdGhpcyBmcmFtZSBcclxuICAgICAqIENhbGxlZCBmcm9tIGxvb3AgbWV0aG9kIHtAbGluayBMb29wfSBhZ2FpbiB3aXRoIHRoZSB4ckZyYW1lIHBhcmFtZXRlciBoYW5kb3ZlciwgYXMgc29vbiBhcyBGUkFNRV9SRVFVRVNUX1hSIGlzIGNhbGxlZCBmcm9tIGNyZWF0b3IuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBkcmF3KF9jYWxjdWxhdGVUcmFuc2Zvcm1zOiBib29sZWFuID0gdHJ1ZSwgX3hyRnJhbWU6IFhSRnJhbWUgPSBudWxsKTogdm9pZCB7XHJcbiAgICAgIGlmICghdGhpcy5zZXNzaW9uKSB7XHJcbiAgICAgICAgc3VwZXIuZHJhdyhfY2FsY3VsYXRlVHJhbnNmb3Jtcyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgcG9zZTogWFJWaWV3ZXJQb3NlID0gX3hyRnJhbWU/LmdldFZpZXdlclBvc2UodGhpcy5yZWZlcmVuY2VTcGFjZSk7XHJcbiAgICAgIGlmICghcG9zZSlcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICB0aGlzLnZyRGV2aWNlLm10eExvY2FsLnNldChwb3NlLnRyYW5zZm9ybS5tYXRyaXgpO1xyXG4gICAgICBzdXBlci5jb21wdXRlRHJhd2luZyhfY2FsY3VsYXRlVHJhbnNmb3Jtcyk7XHJcblxyXG4gICAgICBsZXQgZ2xMYXllcjogWFJXZWJHTExheWVyID0gdGhpcy5zZXNzaW9uLnJlbmRlclN0YXRlLmJhc2VMYXllcjtcclxuICAgICAgUmVuZGVyLnJlc2V0RnJhbWVCdWZmZXIoZ2xMYXllci5mcmFtZWJ1ZmZlcik7XHJcbiAgICAgIFJlbmRlci5jbGVhcih0aGlzLmNhbWVyYS5jbHJCYWNrZ3JvdW5kKTtcclxuICAgICAgZm9yIChsZXQgdmlldyBvZiBwb3NlLnZpZXdzKSB7XHJcbiAgICAgICAgbGV0IHZpZXdwb3J0OiBnbG9iYWxUaGlzLlhSVmlld3BvcnQgPSBnbExheWVyLmdldFZpZXdwb3J0KHZpZXcpO1xyXG4gICAgICAgIHRoaXMuY3JjMy52aWV3cG9ydCh2aWV3cG9ydC54LCB2aWV3cG9ydC55LCB2aWV3cG9ydC53aWR0aCwgdmlld3BvcnQuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudXNlVlJDb250cm9sbGVyKVxyXG4gICAgICAgICAgdGhpcy5zZXRDb250cm9sbGVyQ29uZmlncyhfeHJGcmFtZSk7XHJcbiAgICAgICAgdGhpcy5jYW1lcmEubXR4UHJvamVjdGlvbi5zZXQodmlldy5wcm9qZWN0aW9uTWF0cml4KTtcclxuICAgICAgICB0aGlzLmNhbWVyYS5tdHhDYW1lcmFJbnZlcnNlLnNldCh2aWV3LnRyYW5zZm9ybS5pbnZlcnNlLm1hdHJpeCk7XHJcblxyXG5cclxuICAgICAgICBpZiAodGhpcy5waHlzaWNzRGVidWdNb2RlICE9IFBIWVNJQ1NfREVCVUdNT0RFLlBIWVNJQ19PQkpFQ1RTX09OTFkpXHJcbiAgICAgICAgICBSZW5kZXIuZHJhdyh0aGlzLmNhbWVyYSk7XHJcbiAgICAgICAgaWYgKHRoaXMucGh5c2ljc0RlYnVnTW9kZSAhPSBQSFlTSUNTX0RFQlVHTU9ERS5OT05FKSB7XHJcbiAgICAgICAgICBQaHlzaWNzLmRyYXcodGhpcy5jYW1lcmEsIHRoaXMucGh5c2ljc0RlYnVnTW9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFJlbmRlci5zZXRSZW5kZXJSZWN0YW5nbGUoUmVuZGVyLmdldFJlbmRlclJlY3RhbmdsZSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1vdmUgdGhlIHJlZmVyZW5jZSBzcGFjZSB0byBzZXQgdGhlIGluaXRpYWwgcG9zaXRpb24vb3JpZW50YXRpb24gb2YgdGhlIHZyIGRldmljZSBpbiBhY2NvcmRhbmNlIHRvIHRoZSBub2RlIHRoZSB2ciBkZXZpY2UgaXMgYXR0YWNoZWQgdG8uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZVJlZmVyZW5jZVNwYWNlKCk6IHZvaWQge1xyXG4gICAgICBsZXQgbXR4V29ybGQ6IE1hdHJpeDR4NCA9IHRoaXMudnJEZXZpY2Uubm9kZT8ubXR4V29ybGQ7XHJcbiAgICAgIGlmICghbXR4V29ybGQpXHJcbiAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgbXR4V29ybGQgPSBtdHhXb3JsZC5jbG9uZTtcclxuICAgICAgbXR4V29ybGQucm90YXRlWSgxODApOyAvLyByb3RhdGUgYmVjYXVzZSB0aGUgWFIgUmlnIGlzIGxvb2tpbmcgaW4gdGhlIGRpcmVjdGlvbiBvZiBuZWdhdGl2ZSB6XHJcbiAgICAgIGxldCBpbnZNdHhUcmFuc2ZvbTogTWF0cml4NHg0ID0gbXR4V29ybGQuaW52ZXJzZSgpOyAvLyBpbnZlcnNlIGJlY2F1c2Ugd2UgYXJlIG1vdmluZyB0aGUgcmVmZXJlbmNlIHNwYWNlXHJcbiAgICAgIGxldCBpbnZPcmllbnRhdGlvbjogUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XHJcbiAgICAgIGludk9yaWVudGF0aW9uLmV1bGVyQW5nbGVzID0gaW52TXR4VHJhbnNmb20ucm90YXRpb247XHJcbiAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZSA9IFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZS5nZXRPZmZzZXRSZWZlcmVuY2VTcGFjZShuZXcgWFJSaWdpZFRyYW5zZm9ybShpbnZNdHhUcmFuc2ZvbS50cmFuc2xhdGlvbiwgaW52T3JpZW50YXRpb24pKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1NldHMgY29udHJvbGxlciBtYXRyaWNlcyBhbmQgdGh1bWJzdGlja3MgbW92ZW1lbnRzLlxyXG4gICAgcHJpdmF0ZSBzZXRDb250cm9sbGVyQ29uZmlncyhfeHJGcmFtZTogWFJGcmFtZSk6IHZvaWQge1xyXG4gICAgICBpZiAoX3hyRnJhbWUpIHtcclxuICAgICAgICBpZiAoWFJWaWV3cG9ydC5kZWZhdWx0LnNlc3Npb24uaW5wdXRTb3VyY2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5zZXNzaW9uLmlucHV0U291cmNlcy5mb3JFYWNoKF9jb250cm9sbGVyID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250cm9sbGVyLmhhbmRlZG5lc3MpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgKFwicmlnaHRcIik6XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudnJEZXZpY2UucmlnaHRDbnRybC5jbXBUcmFuc2Zvcm0ubXR4TG9jYWwuc2V0KF94ckZyYW1lLmdldFBvc2UoX2NvbnRyb2xsZXIudGFyZ2V0UmF5U3BhY2UsIFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZSkudHJhbnNmb3JtLm1hdHJpeCk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghdGhpcy52ckRldmljZS5yaWdodENudHJsLmdhbWVQYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52ckRldmljZS5yaWdodENudHJsLmdhbWVQYWQgPSBfY29udHJvbGxlci5nYW1lcGFkO1xyXG4gICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZyRGV2aWNlLnJpZ2h0Q250cmwudGh1bWJzdGlja1ggPSBfY29udHJvbGxlci5nYW1lcGFkLmF4ZXNbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52ckRldmljZS5yaWdodENudHJsLnRodW1ic3RpY2tZID0gX2NvbnRyb2xsZXIuZ2FtZXBhZC5heGVzWzNdO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAoXCJsZWZ0XCIpOlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnZyRGV2aWNlLmxlZnRDbnRybC5jbXBUcmFuc2Zvcm0ubXR4TG9jYWwuc2V0KF94ckZyYW1lLmdldFBvc2UoX2NvbnRyb2xsZXIudGFyZ2V0UmF5U3BhY2UsIFhSVmlld3BvcnQuZGVmYXVsdC5yZWZlcmVuY2VTcGFjZSkudHJhbnNmb3JtLm1hdHJpeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudnJEZXZpY2UubGVmdENudHJsLmdhbWVQYWQpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52ckRldmljZS5sZWZ0Q250cmwuZ2FtZVBhZCA9IF9jb250cm9sbGVyLmdhbWVwYWQ7XHJcbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudnJEZXZpY2UubGVmdENudHJsLnRodW1ic3RpY2tYID0gX2NvbnRyb2xsZXIuZ2FtZXBhZC5heGVzWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudnJEZXZpY2UubGVmdENudHJsLnRodW1ic3RpY2tZID0gX2NvbnRyb2xsZXIuZ2FtZXBhZC5heGVzWzNdO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZTogdW5rbm93bikge1xyXG4gICAgICAgICAgICAgIERlYnVnLmluZm8oXCJJbnB1dCBTb3VyY2VzIEVycm9yOiBcIiArIGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgaW50ZXJmYWNlIE1hcEZpbGVuYW1lVG9Db250ZW50IHtcclxuICAgIFtmaWxlbmFtZTogc3RyaW5nXTogc3RyaW5nO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBIYW5kbGVzIGZpbGUgdHJhbnNmZXIgZnJvbSBhIEZVREdFLUJyb3dzZXJhcHAgdG8gdGhlIGxvY2FsIGZpbGVzeXN0ZW0gd2l0aG91dCBhIGxvY2FsIHNlcnZlci4gIFxyXG4gICAqIFNhdmVzIHRvIHRoZSBkb3dubG9hZC1wYXRoIGdpdmVuIGJ5IHRoZSBicm93c2VyLCBsb2FkcyBmcm9tIHRoZSBwbGF5ZXIncyBjaG9pY2UuXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEZpbGVJb0Jyb3dzZXJMb2NhbCBleHRlbmRzIEV2ZW50VGFyZ2V0U3RhdGljIHtcclxuICAgIHByaXZhdGUgc3RhdGljIHNlbGVjdG9yOiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgLy8gVE9ETzogcmVmYWN0b3IgdG8gYXN5bmMgZnVuY3Rpb24gdG8gYmUgaGFuZGxlZCB1c2luZyBwcm9taXNlLCBpbnN0ZWFkIG9mIHVzaW5nIGV2ZW50IHRhcmdldFxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkKF9tdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxNYXBGaWxlbmFtZVRvQ29udGVudD4ge1xyXG4gICAgICBGaWxlSW9Ccm93c2VyTG9jYWwuc2VsZWN0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgIEZpbGVJb0Jyb3dzZXJMb2NhbC5zZWxlY3Rvci50eXBlID0gXCJmaWxlXCI7XHJcbiAgICAgIEZpbGVJb0Jyb3dzZXJMb2NhbC5zZWxlY3Rvci5tdWx0aXBsZSA9IF9tdWx0aXBsZTtcclxuICAgICAgRmlsZUlvQnJvd3NlckxvY2FsLnNlbGVjdG9yLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgIEZpbGVJb0Jyb3dzZXJMb2NhbC5zZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIEZpbGVJb0Jyb3dzZXJMb2NhbC5oYW5kbGVGaWxlU2VsZWN0KTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChGaWxlSW9Ccm93c2VyTG9jYWwuc2VsZWN0b3IpO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPE1hcEZpbGVuYW1lVG9Db250ZW50PihfcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgZnVuY3Rpb24gaG5kTG9hZGVkKF9ldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgIEZpbGVJb0Jyb3dzZXJMb2NhbC5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULkZJTEVfTE9BREVELCBobmRMb2FkZWQpO1xyXG4gICAgICAgICAgX3Jlc29sdmUoKDxDdXN0b21FdmVudD5fZXZlbnQpLmRldGFpbC5tYXBGaWxlbmFtZVRvQ29udGVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBGaWxlSW9Ccm93c2VyTG9jYWwuYWRkRXZlbnRMaXN0ZW5lcihFVkVOVC5GSUxFX0xPQURFRCwgaG5kTG9hZGVkKTtcclxuICAgICAgICBGaWxlSW9Ccm93c2VyTG9jYWwuc2VsZWN0b3IuY2xpY2soKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogcmVmYWN0b3IgdG8gYXN5bmMgZnVuY3Rpb24gdG8gYmUgaGFuZGxlZCB1c2luZyBwcm9taXNlLCBpbnN0ZWFkIG9mIHVzaW5nIGV2ZW50IHRhcmdldFxyXG4gICAgcHVibGljIHN0YXRpYyBzYXZlKF90b1NhdmU6IE1hcEZpbGVuYW1lVG9Db250ZW50LCBfdHlwZTogc3RyaW5nID0gXCJ0ZXh0L3BsYWluXCIgKTogUHJvbWlzZTxNYXBGaWxlbmFtZVRvQ29udGVudD4ge1xyXG4gICAgICBmb3IgKGxldCBmaWxlbmFtZSBpbiBfdG9TYXZlKSB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQ6IHN0cmluZyA9IF90b1NhdmVbZmlsZW5hbWVdO1xyXG4gICAgICAgIGxldCBibG9iOiBCbG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdLCB7IHR5cGU6IF90eXBlIH0pO1xyXG4gICAgICAgIGxldCB1cmw6IHN0cmluZyA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgIC8vKi8gdXNpbmcgYW5jaG9yIGVsZW1lbnQgZm9yIGRvd25sb2FkXHJcbiAgICAgICAgbGV0IGRvd25sb2FkZXI6IEhUTUxBbmNob3JFbGVtZW50O1xyXG4gICAgICAgIGRvd25sb2FkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICBkb3dubG9hZGVyLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgdXJsKTtcclxuICAgICAgICBkb3dubG9hZGVyLnNldEF0dHJpYnV0ZShcImRvd25sb2FkXCIsIGZpbGVuYW1lKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvd25sb2FkZXIpO1xyXG4gICAgICAgIGRvd25sb2FkZXIuY2xpY2soKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRvd25sb2FkZXIpO1xyXG4gICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxNYXBGaWxlbmFtZVRvQ29udGVudD4oX3Jlc29sdmUgPT4ge1xyXG4gICAgICAgIF9yZXNvbHZlKF90b1NhdmUpO1xyXG4gICAgICAgIC8vIGZ1bmN0aW9uIGhuZFNhdmVkKF9ldmVudDogRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAvLyAgIEZpbGVJb0Jyb3dzZXJMb2NhbC5yZW1vdmVFdmVudExpc3RlbmVyKEVWRU5ULkZJTEVfU0FWRUQsIGhuZFNhdmVkKTtcclxuICAgICAgICAvLyAgIF9yZXNvbHZlKCg8Q3VzdG9tRXZlbnQ+X2V2ZW50KS5kZXRhaWwpO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy8gRmlsZUlvQnJvd3NlckxvY2FsLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuRklMRV9TQVZFRCwgaG5kU2F2ZWQpO1xyXG4gICAgICAgIC8vIGxldCBldmVudDogQ3VzdG9tRXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoRVZFTlQuRklMRV9TQVZFRCwgeyBkZXRhaWw6IHsgbWFwRmlsZW5hbWVUb0NvbnRlbnQ6IF90b1NhdmUgfSB9KTtcclxuICAgICAgICAvLyBGaWxlSW9Ccm93c2VyTG9jYWwudGFyZ2V0U3RhdGljLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGhhbmRsZUZpbGVTZWxlY3QoX2V2ZW50OiBFdmVudCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBEZWJ1Zy5mdWRnZShcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGhhbmRsZUZpbGVTZWxlY3RcIik7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoRmlsZUlvQnJvd3NlckxvY2FsLnNlbGVjdG9yKTtcclxuICAgICAgbGV0IGZpbGVMaXN0OiBGaWxlTGlzdCA9ICg8SFRNTElucHV0RWxlbWVudD5fZXZlbnQudGFyZ2V0KS5maWxlcztcclxuICAgICAgRGVidWcuZnVkZ2UoZmlsZUxpc3QsIGZpbGVMaXN0Lmxlbmd0aCk7XHJcbiAgICAgIGlmIChmaWxlTGlzdC5sZW5ndGggPT0gMClcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBsZXQgbG9hZGVkOiBNYXBGaWxlbmFtZVRvQ29udGVudCA9IHt9O1xyXG4gICAgICBhd2FpdCBGaWxlSW9Ccm93c2VyTG9jYWwubG9hZEZpbGVzKGZpbGVMaXN0LCBsb2FkZWQpO1xyXG5cclxuICAgICAgbGV0IGV2ZW50OiBDdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudChFVkVOVC5GSUxFX0xPQURFRCwgeyBkZXRhaWw6IHsgbWFwRmlsZW5hbWVUb0NvbnRlbnQ6IGxvYWRlZCB9IH0pO1xyXG4gICAgICBGaWxlSW9Ccm93c2VyTG9jYWwudGFyZ2V0U3RhdGljLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZEZpbGVzKF9maWxlTGlzdDogRmlsZUxpc3QsIF9sb2FkZWQ6IE1hcEZpbGVuYW1lVG9Db250ZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGZvciAobGV0IGZpbGUgb2YgX2ZpbGVMaXN0KSB7XHJcbiAgICAgICAgY29uc3QgY29udGVudDogc3RyaW5nID0gYXdhaXQgbmV3IFJlc3BvbnNlKGZpbGUpLnRleHQoKTtcclxuICAgICAgICBfbG9hZGVkW2ZpbGUubmFtZV0gPSBjb250ZW50O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59ICIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIE11dGFibGUgYXJyYXkgb2Yge0BsaW5rIE11dGFibGV9cy4gVGhlIHtAbGluayBNdXRhdG9yfXMgb2YgdGhlIGVudHJpZXMgYXJlIGluY2x1ZGVkIGFzIGFycmF5IGluIHRoZSB7QGxpbmsgTXV0YXRvcn1cclxuICAgKiBAYXV0aG9yIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIE11dGFibGVBcnJheTxUIGV4dGVuZHMgTXV0YWJsZT4gZXh0ZW5kcyBBcnJheTxUPiB7XHJcbiAgICAjdHlwZTogbmV3ICgpID0+IFQ7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF90eXBlOiBuZXcgKCkgPT4gVCwgLi4uX2FyZ3M6IFRbXSkge1xyXG4gICAgICBzdXBlciguLi5fYXJncyk7XHJcbiAgICAgIHRoaXMuI3R5cGUgPSBfdHlwZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIGdldCB0eXBlKCk6IG5ldyAoKSA9PiBUIHtcclxuICAgICAgcmV0dXJuIHRoaXMuI3R5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlYXJyYW5nZShfc2VxdWVuY2U6IG51bWJlcltdKTogdm9pZCB7XHJcbiAgICAgIGxldCBsZW5ndGg6IG51bWJlciA9IHRoaXMubGVuZ3RoO1xyXG4gICAgICBmb3IgKGxldCBpbmRleCBvZiBfc2VxdWVuY2UpIHtcclxuICAgICAgICBsZXQgb3JpZ2luYWw6IFQgPSB0aGlzW2luZGV4XTtcclxuICAgICAgICAvLyBUT0RPOiBvcHRpbWl6ZSwgY29weSBvbmx5IGRvdWJsZSBlbnRyaWVzXHJcbiAgICAgICAgLy9AdHMtaWdub3JlXHJcbiAgICAgICAgbGV0IGNvcHk6IFQgPSBuZXcgb3JpZ2luYWwuY29uc3RydWN0b3IoKTtcclxuICAgICAgICBjb3B5Lm11dGF0ZShvcmlnaW5hbC5nZXRNdXRhdG9yKCkpO1xyXG4gICAgICAgIHRoaXMucHVzaChjb3B5KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNwbGljZSgwLCBsZW5ndGgpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0ge307XHJcbiAgICAgIGZvciAobGV0IGVudHJ5IGluIHRoaXMpXHJcbiAgICAgICAgdHlwZXNbZW50cnldID0gdGhpc1tlbnRyeV0uY29uc3RydWN0b3IubmFtZTtcclxuXHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRNdXRhdG9yKCk6IE11dGF0b3Ige1xyXG4gICAgICByZXR1cm4gdGhpcy5tYXAoKF92YWx1ZSkgPT4gX3ZhbHVlLmdldE11dGF0b3IoKSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0TXV0YXRvckZvclVzZXJJbnRlcmZhY2UoKTogTXV0YXRvciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmdldE11dGF0b3IoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoX211dGF0b3I6IE11dGF0b3IpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgZm9yIChsZXQgZW50cnkgaW4gdGhpcylcclxuICAgICAgICBhd2FpdCB0aGlzW2VudHJ5XS5tdXRhdGUoX211dGF0b3JbZW50cnldKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gbXV0YXRvciBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGVNdXRhdG9yKF9tdXRhdG9yOiBNdXRhdG9yKTogdm9pZCB7XHJcbiAgICAgIGZvciAobGV0IGVudHJ5IGluIHRoaXMpIHtcclxuICAgICAgICBsZXQgbXV0YXRvclZhbHVlOiBPYmplY3QgPSBfbXV0YXRvcltlbnRyeV07XHJcbiAgICAgICAgaWYgKCFtdXRhdG9yVmFsdWUpXHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICBpZiAodGhpc1tlbnRyeV0gaW5zdGFuY2VvZiBNdXRhYmxlKVxyXG4gICAgICAgICAgX211dGF0b3JbZW50cnldID0gdGhpc1tlbnRyeV0uZ2V0TXV0YXRvcigpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIF9tdXRhdG9yW2VudHJ5XSA9IHRoaXNbZW50cnldO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGVudW0gTU9ERSB7XHJcbiAgICBFRElUT1IsIFJVTlRJTUVcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2VyaWFsaXphYmxlUmVzb3VyY2UgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgdHlwZTogc3RyaW5nO1xyXG4gICAgaWRSZXNvdXJjZTogc3RyaW5nO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBSZXNvdXJjZXMge1xyXG4gICAgW2lkUmVzb3VyY2U6IHN0cmluZ106IFNlcmlhbGl6YWJsZVJlc291cmNlO1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBTZXJpYWxpemF0aW9uT2ZSZXNvdXJjZXMge1xyXG4gICAgW2lkUmVzb3VyY2U6IHN0cmluZ106IFNlcmlhbGl6YXRpb247XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFNjcmlwdE5hbWVzcGFjZXMge1xyXG4gICAgW25hbWU6IHN0cmluZ106IE9iamVjdDtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50U2NyaXB0cyB7XHJcbiAgICBbbmFtZXNwYWNlOiBzdHJpbmddOiBDb21wb25lbnRTY3JpcHRbXTtcclxuICB9XHJcblxyXG4gIGludGVyZmFjZSBHcmFwaEluc3RhbmNlc1RvUmVzeW5jIHtcclxuICAgIFtpZFJlc291cmNlOiBzdHJpbmddOiBHcmFwaEluc3RhbmNlW107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdGF0aWMgY2xhc3MgaGFuZGxpbmcgdGhlIHJlc291cmNlcyB1c2VkIHdpdGggdGhlIGN1cnJlbnQgRlVER0UtaW5zdGFuY2UuICBcclxuICAgKiBLZWVwcyBhIGxpc3Qgb2YgdGhlIHJlc291cmNlcyBhbmQgZ2VuZXJhdGVzIGlkcyB0byByZXRyaWV2ZSB0aGVtLiAgXHJcbiAgICogUmVzb3VyY2VzIGFyZSBvYmplY3RzIHJlZmVyZW5jZWQgbXVsdGlwbGUgdGltZXMgYnV0IHN1cHBvc2VkIHRvIGJlIHN0b3JlZCBvbmx5IG9uY2VcclxuICAgKi9cclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUHJvamVjdCBleHRlbmRzIEV2ZW50VGFyZ2V0U3RhdGljIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVzb3VyY2VzOiBSZXNvdXJjZXMgPSB7fTtcclxuICAgIHB1YmxpYyBzdGF0aWMgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbk9mUmVzb3VyY2VzID0ge307XHJcbiAgICBwdWJsaWMgc3RhdGljIHNjcmlwdE5hbWVzcGFjZXM6IFNjcmlwdE5hbWVzcGFjZXMgPSB7fTtcclxuICAgIHB1YmxpYyBzdGF0aWMgYmFzZVVSTDogVVJMID0gbmV3IFVSTChsb2NhdGlvbi50b1N0cmluZygpKTtcclxuICAgIHB1YmxpYyBzdGF0aWMgbW9kZTogTU9ERSA9IE1PREUuUlVOVElNRTtcclxuICAgIHB1YmxpYyBzdGF0aWMgZ3JhcGhJbnN0YW5jZXNUb1Jlc3luYzogR3JhcGhJbnN0YW5jZXNUb1Jlc3luYyA9IHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJzIHRoZSByZXNvdXJjZSBhbmQgZ2VuZXJhdGVzIGFuIGlkIGZvciBpdCBieSBkZWZhdWx0LiAgXHJcbiAgICAgKiBJZiB0aGUgcmVzb3VyY2UgYWxyZWFkeSBoYXMgYW4gaWQsIHRodXMgaGF2aW5nIGJlZW4gcmVnaXN0ZXJlZCwgaXRzIGRlbGV0ZWQgZnJvbSB0aGUgbGlzdCBhbmQgcmVnaXN0ZXJlZCBhbmV3LlxyXG4gICAgICogSXQncyBwb3NzaWJsZSB0byBwYXNzIGFuIGlkLCBidXQgc2hvdWxkIG5vdCBiZSBkb25lIGV4Y2VwdCBieSB0aGUgU2VyaWFsaXplci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWdpc3RlcihfcmVzb3VyY2U6IFNlcmlhbGl6YWJsZVJlc291cmNlLCBfaWRSZXNvdXJjZT86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICBpZiAoX3Jlc291cmNlLmlkUmVzb3VyY2UpXHJcbiAgICAgICAgaWYgKF9yZXNvdXJjZS5pZFJlc291cmNlID09IF9pZFJlc291cmNlKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIHRoaXMuZGVyZWdpc3RlcihfcmVzb3VyY2UpO1xyXG4gICAgICBfcmVzb3VyY2UuaWRSZXNvdXJjZSA9IF9pZFJlc291cmNlIHx8IFByb2plY3QuZ2VuZXJhdGVJZChfcmVzb3VyY2UpO1xyXG4gICAgICBQcm9qZWN0LnJlc291cmNlc1tfcmVzb3VyY2UuaWRSZXNvdXJjZV0gPSBfcmVzb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZXJlZ2lzdGVyKF9yZXNvdXJjZTogU2VyaWFsaXphYmxlUmVzb3VyY2UpOiB2b2lkIHtcclxuICAgICAgZGVsZXRlIChQcm9qZWN0LnJlc291cmNlc1tfcmVzb3VyY2UuaWRSZXNvdXJjZV0pO1xyXG4gICAgICBkZWxldGUgKFByb2plY3Quc2VyaWFsaXphdGlvbltfcmVzb3VyY2UuaWRSZXNvdXJjZV0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXIoKTogdm9pZCB7XHJcbiAgICAgIFByb2plY3QucmVzb3VyY2VzID0ge307XHJcbiAgICAgIFByb2plY3Quc2VyaWFsaXphdGlvbiA9IHt9O1xyXG4gICAgICBQcm9qZWN0LmNsZWFyU2NyaXB0TmFtZXNwYWNlcygpO1xyXG4gICAgICAvLyBQcm9qZWN0LnNjcmlwdE5hbWVzcGFjZXMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA8VCBleHRlbmRzIENvbXBvbmVudD4oX2NsYXNzOiBuZXcgKCkgPT4gVCk6IFRbXSB7XHJcbiAgICAvLyAgIHJldHVybiA8VFtdPih0aGlzLmNvbXBvbmVudHNbX2NsYXNzLm5hbWVdIHx8IFtdKS5zbGljZSgwKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFJlc291cmNlc0J5VHlwZTxUPihfdHlwZTogbmV3IChfYXJnczogR2VuZXJhbCkgPT4gVCk6IFNlcmlhbGl6YWJsZVJlc291cmNlW10ge1xyXG4gICAgICBsZXQgZm91bmQ6IFNlcmlhbGl6YWJsZVJlc291cmNlW10gPSBbXTtcclxuICAgICAgZm9yIChsZXQgcmVzb3VyY2VJZCBpbiBQcm9qZWN0LnJlc291cmNlcykge1xyXG4gICAgICAgIGxldCByZXNvdXJjZTogU2VyaWFsaXphYmxlUmVzb3VyY2UgPSBQcm9qZWN0LnJlc291cmNlc1tyZXNvdXJjZUlkXTtcclxuICAgICAgICBpZiAocmVzb3VyY2UgaW5zdGFuY2VvZiBfdHlwZSlcclxuICAgICAgICAgIGZvdW5kLnB1c2gocmVzb3VyY2UpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmb3VuZDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFJlc291cmNlc0J5TmFtZShfbmFtZTogc3RyaW5nKTogU2VyaWFsaXphYmxlUmVzb3VyY2VbXSB7XHJcbiAgICAgIGxldCBmb3VuZDogU2VyaWFsaXphYmxlUmVzb3VyY2VbXSA9IFtdO1xyXG4gICAgICBmb3IgKGxldCByZXNvdXJjZUlkIGluIFByb2plY3QucmVzb3VyY2VzKSB7XHJcbiAgICAgICAgbGV0IHJlc291cmNlOiBTZXJpYWxpemFibGVSZXNvdXJjZSA9IFByb2plY3QucmVzb3VyY2VzW3Jlc291cmNlSWRdO1xyXG4gICAgICAgIGlmIChyZXNvdXJjZS5uYW1lID09IF9uYW1lKVxyXG4gICAgICAgICAgZm91bmQucHVzaChyZXNvdXJjZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIGEgdXNlciByZWFkYWJsZSBhbmQgdW5pcXVlIGlkIHVzaW5nIHRoZSB0eXBlIG9mIHRoZSByZXNvdXJjZSwgdGhlIGRhdGUgYW5kIHJhbmRvbSBudW1iZXJzXHJcbiAgICAgKiBAcGFyYW0gX3Jlc291cmNlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVJZChfcmVzb3VyY2U6IFNlcmlhbGl6YWJsZVJlc291cmNlKTogc3RyaW5nIHtcclxuICAgICAgLy8gVE9ETzogYnVpbGQgaWQgYW5kIGludGVncmF0ZSBpbmZvIGZyb20gcmVzb3VyY2UsIG5vdCBqdXN0IGRhdGVcclxuICAgICAgbGV0IGlkUmVzb3VyY2U6IHN0cmluZztcclxuICAgICAgZG9cclxuICAgICAgICBpZFJlc291cmNlID0gX3Jlc291cmNlLmNvbnN0cnVjdG9yLm5hbWUgKyBcInxcIiArIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSArIFwifFwiICsgTWF0aC5yYW5kb20oKS50b1ByZWNpc2lvbig1KS5zdWJzdHIoMiwgNSk7XHJcbiAgICAgIHdoaWxlIChQcm9qZWN0LnJlc291cmNlc1tpZFJlc291cmNlXSk7XHJcbiAgICAgIHJldHVybiBpZFJlc291cmNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGVzdHMsIGlmIGFuIG9iamVjdCBpcyBhIHtAbGluayBTZXJpYWxpemFibGVSZXNvdXJjZX1cclxuICAgICAqIEBwYXJhbSBfb2JqZWN0IFRoZSBvYmplY3QgdG8gZXhhbWluZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGlzUmVzb3VyY2UoX29iamVjdDogU2VyaWFsaXphYmxlKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiAoUmVmbGVjdC5oYXMoX29iamVjdCwgXCJpZFJlc291cmNlXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlcyB0aGUgcmVzb3VyY2Ugc3RvcmVkIHdpdGggdGhlIGdpdmVuIGlkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0UmVzb3VyY2UoX2lkUmVzb3VyY2U6IHN0cmluZyk6IFByb21pc2U8U2VyaWFsaXphYmxlUmVzb3VyY2U+IHtcclxuICAgICAgbGV0IHJlc291cmNlOiBTZXJpYWxpemFibGVSZXNvdXJjZSA9IFByb2plY3QucmVzb3VyY2VzW19pZFJlc291cmNlXTtcclxuICAgICAgaWYgKCFyZXNvdXJjZSkge1xyXG4gICAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gUHJvamVjdC5zZXJpYWxpemF0aW9uW19pZFJlc291cmNlXTtcclxuICAgICAgICBpZiAoIXNlcmlhbGl6YXRpb24pIHtcclxuICAgICAgICAgIERlYnVnLmVycm9yKFwiUmVzb3VyY2Ugbm90IGZvdW5kXCIsIF9pZFJlc291cmNlKTtcclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXNvdXJjZSA9IGF3YWl0IFByb2plY3QuZGVzZXJpYWxpemVSZXNvdXJjZShzZXJpYWxpemF0aW9uKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzb3VyY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZWdpc3RlcnMgYSByZXNvdXJjZSBmcm9tIGEge0BsaW5rIE5vZGV9LCBjb3B5aW5nIHRoZSBjb21wbGV0ZSBncmFwaCBzdGFydGluZyB3aXRoIGl0XHJcbiAgICAgKiBAcGFyYW0gX25vZGUgQSBub2RlIHRvIGNyZWF0ZSB0aGUgcmVzb3VyY2UgZnJvbVxyXG4gICAgICogQHBhcmFtIF9yZXBsYWNlV2l0aEluc3RhbmNlIGlmIHRydWUgKGRlZmF1bHQpLCB0aGUgbm9kZSB1c2VkIGFzIG9yaWdpbiBpcyByZXBsYWNlZCBieSBhIHtAbGluayBHcmFwaEluc3RhbmNlfSBvZiB0aGUge0BsaW5rIEdyYXBofSBjcmVhdGVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgcmVnaXN0ZXJBc0dyYXBoKF9ub2RlOiBOb2RlLCBfcmVwbGFjZVdpdGhJbnN0YW5jZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPEdyYXBoPiB7XHJcbiAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gX25vZGUuc2VyaWFsaXplKCk7XHJcbiAgICAgIGxldCBncmFwaDogR3JhcGggPSBuZXcgR3JhcGgoX25vZGUubmFtZSk7XHJcbiAgICAgIGF3YWl0IGdyYXBoLmRlc2VyaWFsaXplKHNlcmlhbGl6YXRpb24pO1xyXG4gICAgICBQcm9qZWN0LnJlZ2lzdGVyKGdyYXBoKTtcclxuXHJcbiAgICAgIGlmIChfcmVwbGFjZVdpdGhJbnN0YW5jZSAmJiBfbm9kZS5nZXRQYXJlbnQoKSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZTogR3JhcGhJbnN0YW5jZSA9IGF3YWl0IFByb2plY3QuY3JlYXRlR3JhcGhJbnN0YW5jZShncmFwaCk7XHJcbiAgICAgICAgX25vZGUuZ2V0UGFyZW50KCkucmVwbGFjZUNoaWxkKF9ub2RlLCBpbnN0YW5jZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBncmFwaDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSB7QGxpbmsgR3JhcGhJbnN0YW5jZX0gb2YgdGhlIGdpdmVuIHtAbGluayBHcmFwaH0gXHJcbiAgICAgKiBhbmQgY29ubmVjdHMgaXQgdG8gdGhlIGdyYXBoIGZvciBzeW5jaHJvbmlzYXRpb24gb2YgbXV0YXRpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgY3JlYXRlR3JhcGhJbnN0YW5jZShfZ3JhcGg6IEdyYXBoKTogUHJvbWlzZTxHcmFwaEluc3RhbmNlPiB7XHJcbiAgICAgIGxldCBpbnN0YW5jZTogR3JhcGhJbnN0YW5jZSA9IG5ldyBHcmFwaEluc3RhbmNlKF9ncmFwaCk7IC8vIFRPRE86IGNsZWFudXAgc2luY2UgY3JlYXRpb24gbW92ZWQgaGVyZVxyXG4gICAgICBhd2FpdCBpbnN0YW5jZS5jb25uZWN0VG9HcmFwaCgpO1xyXG4gICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyByZWdpc3RlckdyYXBoSW5zdGFuY2VGb3JSZXN5bmMoX2luc3RhbmNlOiBHcmFwaEluc3RhbmNlKTogdm9pZCB7XHJcbiAgICAgIGxldCBpbnN0YW5jZXM6IEdyYXBoSW5zdGFuY2VbXSA9IFByb2plY3QuZ3JhcGhJbnN0YW5jZXNUb1Jlc3luY1tfaW5zdGFuY2UuaWRTb3VyY2VdIHx8IFtdO1xyXG4gICAgICBpbnN0YW5jZXMucHVzaChfaW5zdGFuY2UpO1xyXG4gICAgICBQcm9qZWN0LmdyYXBoSW5zdGFuY2VzVG9SZXN5bmNbX2luc3RhbmNlLmlkU291cmNlXSA9IGluc3RhbmNlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlc3luY0dyYXBoSW5zdGFuY2VzKF9ncmFwaDogR3JhcGgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgbGV0IGluc3RhbmNlczogR3JhcGhJbnN0YW5jZVtdID0gUHJvamVjdC5ncmFwaEluc3RhbmNlc1RvUmVzeW5jW19ncmFwaC5pZFJlc291cmNlXTtcclxuICAgICAgaWYgKCFpbnN0YW5jZXMpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICBmb3IgKGxldCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpXHJcbiAgICAgICAgYXdhaXQgaW5zdGFuY2UuY29ubmVjdFRvR3JhcGgoKTtcclxuICAgICAgZGVsZXRlIChQcm9qZWN0LmdyYXBoSW5zdGFuY2VzVG9SZXN5bmNbX2dyYXBoLmlkUmVzb3VyY2VdKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyU2NyaXB0TmFtZXNwYWNlKF9uYW1lc3BhY2U6IE9iamVjdCk6IHZvaWQge1xyXG4gICAgICBsZXQgbmFtZTogc3RyaW5nID0gU2VyaWFsaXplci5yZWdpc3Rlck5hbWVzcGFjZShfbmFtZXNwYWNlKTtcclxuICAgICAgaWYgKCFQcm9qZWN0LnNjcmlwdE5hbWVzcGFjZXNbbmFtZV0pXHJcbiAgICAgICAgUHJvamVjdC5zY3JpcHROYW1lc3BhY2VzW25hbWVdID0gX25hbWVzcGFjZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNsZWFyU2NyaXB0TmFtZXNwYWNlcygpOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgbmFtZSBpbiBQcm9qZWN0LnNjcmlwdE5hbWVzcGFjZXMpIHtcclxuICAgICAgICBSZWZsZWN0LnNldCh3aW5kb3csIG5hbWUsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgUHJvamVjdC5zY3JpcHROYW1lc3BhY2VzW25hbWVdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGRlbGV0ZSBQcm9qZWN0LnNjcmlwdE5hbWVzcGFjZXNbbmFtZV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvbXBvbmVudFNjcmlwdHMoKTogQ29tcG9uZW50U2NyaXB0cyB7XHJcbiAgICAgIGxldCBjb21wb21lbnRzOiBDb21wb25lbnRTY3JpcHRzID0ge307XHJcbiAgICAgIGZvciAobGV0IG5hbWVzcGFjZSBpbiBQcm9qZWN0LnNjcmlwdE5hbWVzcGFjZXMpIHtcclxuICAgICAgICBjb21wb21lbnRzW25hbWVzcGFjZV0gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIFByb2plY3Quc2NyaXB0TmFtZXNwYWNlc1tuYW1lc3BhY2VdKSB7XHJcbiAgICAgICAgICBsZXQgc2NyaXB0OiBDb21wb25lbnRTY3JpcHQgPSBSZWZsZWN0LmdldChQcm9qZWN0LnNjcmlwdE5hbWVzcGFjZXNbbmFtZXNwYWNlXSwgbmFtZSk7XHJcbiAgICAgICAgICAvLyBVc2luZyBPYmplY3QuY3JlYXRlIGRvZXNuJ3QgY2FsbCB0aGUgY29uc3RydWN0b3IsIGJ1dCBpbnN0YW5jZW9mIGNhbiBiZSB1c2VkLiBNb3JlIGVsZWdhbnQgdGhhbiB0aGUgbG9vcCBhYm92ZSwgdGhvdWdoIG1heWJlIG5vdCBhcyBwZXJmb3JtYW50LiBcclxuXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgbzogR2VuZXJhbCA9IE9iamVjdC5jcmVhdGUoc2NyaXB0KTtcclxuICAgICAgICAgICAgaWYgKG8ucHJvdG90eXBlIGluc3RhbmNlb2YgQ29tcG9uZW50U2NyaXB0KVxyXG4gICAgICAgICAgICAgIGNvbXBvbWVudHNbbmFtZXNwYWNlXS5wdXNoKHNjcmlwdCk7XHJcbiAgICAgICAgICB9IGNhdGNoIChfZSkgeyAvKiAqLyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjb21wb21lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgbG9hZFNjcmlwdChfdXJsOiBSZXF1ZXN0SW5mbyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBsZXQgc2NyaXB0OiBIVE1MU2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XHJcbiAgICAgIHNjcmlwdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuICAgICAgLy8gc2NyaXB0LnR5cGUgPSBcIm1vZHVsZVwiO1xyXG4gICAgICBzY3JpcHQuYXN5bmMgPSBmYWxzZTtcclxuICAgICAgLy8gc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGhhbmRsZUxvYWRlZFNjcmlwdClcclxuICAgICAgbGV0IGhlYWQ6IEhUTUxIZWFkRWxlbWVudCA9IGRvY3VtZW50LmhlYWQ7XHJcbiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgRGVidWcubG9nKFwiTG9hZGluZzogXCIsIF91cmwpO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4gcmVzb2x2ZSgpKTtcclxuICAgICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsICgpID0+IHtcclxuICAgICAgICAgIERlYnVnLmVycm9yKFwiTG9hZGluZyBzY3JpcHRcIiwgX3VybCk7XHJcbiAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzY3JpcHQuc3JjID0gX3VybC50b1N0cmluZygpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGxvYWRSZXNvdXJjZXMoX3VybDogUmVxdWVzdEluZm8pOiBQcm9taXNlPFJlc291cmNlcz4ge1xyXG4gICAgICBjb25zdCByZXNwb25zZTogUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChfdXJsKTtcclxuICAgICAgY29uc3QgcmVzb3VyY2VGaWxlQ29udGVudDogc3RyaW5nID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG5cclxuICAgICAgbGV0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBTZXJpYWxpemVyLnBhcnNlKHJlc291cmNlRmlsZUNvbnRlbnQpO1xyXG4gICAgICBsZXQgcmVjb25zdHJ1Y3Rpb246IFJlc291cmNlcyA9IGF3YWl0IFByb2plY3QuZGVzZXJpYWxpemUoc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIFByb2plY3QuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoRVZFTlQuUkVTT1VSQ0VTX0xPQURFRCwgeyBkZXRhaWw6IHsgdXJsOiBfdXJsLCByZXNvdXJjZXM6IHJlY29uc3RydWN0aW9uIH0gfSkpO1xyXG4gICAgICByZXR1cm4gcmVjb25zdHJ1Y3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBsb2FkUmVzb3VyY2VzRnJvbUhUTUwoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIGNvbnN0IGhlYWQ6IEhUTUxIZWFkRWxlbWVudCA9IGRvY3VtZW50LmhlYWQ7XHJcbiAgICAgIGxldCBsaW5rczogTm9kZUxpc3RPZjxIVE1MTGlua0VsZW1lbnQ+ID0gaGVhZC5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1t0eXBlPXJlc291cmNlc11cIik7XHJcbiAgICAgIGZvciAobGV0IGxpbmsgb2YgbGlua3MpIHtcclxuICAgICAgICBsZXQgdXJsOiBSZXF1ZXN0SW5mbyA9IGxpbmsuZ2V0QXR0cmlidXRlKFwic3JjXCIpO1xyXG4gICAgICAgIGF3YWl0IFByb2plY3QubG9hZFJlc291cmNlcyh1cmwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXJpYWxpemUgYWxsIHJlc291cmNlc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHNlcmlhbGl6ZSgpOiBTZXJpYWxpemF0aW9uT2ZSZXNvdXJjZXMge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbk9mUmVzb3VyY2VzID0ge307XHJcbiAgICAgIGZvciAobGV0IGlkUmVzb3VyY2UgaW4gUHJvamVjdC5yZXNvdXJjZXMpIHtcclxuICAgICAgICBsZXQgcmVzb3VyY2U6IFNlcmlhbGl6YWJsZVJlc291cmNlID0gUHJvamVjdC5yZXNvdXJjZXNbaWRSZXNvdXJjZV07XHJcbiAgICAgICAgaWYgKGlkUmVzb3VyY2UgIT0gcmVzb3VyY2UuaWRSZXNvdXJjZSlcclxuICAgICAgICAgIERlYnVnLmVycm9yKFwiUmVzb3VyY2UtaWQgbWlzbWF0Y2hcIiwgcmVzb3VyY2UpO1xyXG4gICAgICAgIHNlcmlhbGl6YXRpb25baWRSZXNvdXJjZV0gPSBTZXJpYWxpemVyLnNlcmlhbGl6ZShyZXNvdXJjZSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlcmlhbGl6YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgcmVzb3VyY2VzIGZyb20gYSBzZXJpYWxpemF0aW9uLCBkZWxldGluZyBhbGwgcmVzb3VyY2VzIHByZXZpb3VzbHkgcmVnaXN0ZXJlZFxyXG4gICAgICogQHBhcmFtIF9zZXJpYWxpemF0aW9uIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uT2ZSZXNvdXJjZXMpOiBQcm9taXNlPFJlc291cmNlcz4ge1xyXG4gICAgICBQcm9qZWN0LnNlcmlhbGl6YXRpb24gPSBfc2VyaWFsaXphdGlvbjtcclxuICAgICAgUHJvamVjdC5yZXNvdXJjZXMgPSB7fTtcclxuICAgICAgZm9yIChsZXQgaWRSZXNvdXJjZSBpbiBfc2VyaWFsaXphdGlvbikge1xyXG4gICAgICAgIGxldCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gX3NlcmlhbGl6YXRpb25baWRSZXNvdXJjZV07XHJcbiAgICAgICAgbGV0IHJlc291cmNlOiBTZXJpYWxpemFibGVSZXNvdXJjZSA9IGF3YWl0IFByb2plY3QuZGVzZXJpYWxpemVSZXNvdXJjZShzZXJpYWxpemF0aW9uKTtcclxuICAgICAgICBpZiAocmVzb3VyY2UpXHJcbiAgICAgICAgICBQcm9qZWN0LnJlc291cmNlc1tpZFJlc291cmNlXSA9IHJlc291cmNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9qZWN0LnJlc291cmNlcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZVJlc291cmNlKF9zZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uKTogUHJvbWlzZTxTZXJpYWxpemFibGVSZXNvdXJjZT4ge1xyXG4gICAgICByZXR1cm4gPFByb21pc2U8U2VyaWFsaXphYmxlUmVzb3VyY2U+PlNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24pO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUuRkJYIHtcclxuICAvKipcclxuICAgKiBSZWFkZXIgdG8gcmVhZCBkYXRhIGZyb20gYW4gYXJyYXkgYnVmZmVyIG1vcmUgY29udmVuaWVudGx5LlxyXG4gICAqIEl0IHNhdmVzIGEgY3VycmVudCBvZmZzZXQgd2hpY2ggaXMgdXBkYXRlZCB3aGVuIGRhdGEgaXMgcmVhZCBkdWUgdG8gaXRzIGJ5dGVsZW5ndGguXHJcbiAgICogZGVzcGl0ZSBnZXRTZXF1ZW5jZSBpdCBpcyBtb3N0bHkgYSBjb3B5IG9mIHRoZSByZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9waWNvZGU3L2JpbmFyeS1yZWFkZXJcclxuICAgKiBAYXV0aG9yIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIEJ1ZmZlclJlYWRlciB7XHJcbiAgICBwdWJsaWMgb2Zmc2V0OiBudW1iZXI7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgdmlldzogRGF0YVZpZXc7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9idWZmZXI6IEFycmF5QnVmZmVyKSB7XHJcbiAgICAgIHRoaXMudmlldyA9IG5ldyBEYXRhVmlldyhfYnVmZmVyKTtcclxuICAgICAgdGhpcy5vZmZzZXQgPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDaGFyKF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5nZXRVaW50OChfb2Zmc2V0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEJvb2woX29mZnNldDogbnVtYmVyID0gdGhpcy5vZmZzZXQpOiBib29sZWFuIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0VWludDgoX29mZnNldCkgIT0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VWludDgoX29mZnNldDogbnVtYmVyID0gdGhpcy5vZmZzZXQpOiBudW1iZXIge1xyXG4gICAgICB0aGlzLm9mZnNldCA9IF9vZmZzZXQgKyAxO1xyXG4gICAgICByZXR1cm4gdGhpcy52aWV3LmdldFVpbnQ4KF9vZmZzZXQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRVaW50MzIoX29mZnNldDogbnVtYmVyID0gdGhpcy5vZmZzZXQpOiBudW1iZXIge1xyXG4gICAgICB0aGlzLm9mZnNldCA9IF9vZmZzZXQgKyA0O1xyXG4gICAgICByZXR1cm4gdGhpcy52aWV3LmdldFVpbnQzMihfb2Zmc2V0LCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VWludDY0KF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogYmlnaW50IHtcclxuICAgICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0ICsgODtcclxuICAgICAgcmV0dXJuIHRoaXMudmlldy5nZXRCaWdVaW50NjQoX29mZnNldCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEludDE2KF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogbnVtYmVyIHtcclxuICAgICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0ICsgMjtcclxuICAgICAgcmV0dXJuIHRoaXMudmlldy5nZXRJbnQxNihfb2Zmc2V0LCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW50MzIoX29mZnNldDogbnVtYmVyID0gdGhpcy5vZmZzZXQpOiBudW1iZXIge1xyXG4gICAgICB0aGlzLm9mZnNldCA9IF9vZmZzZXQgKyA0O1xyXG4gICAgICByZXR1cm4gdGhpcy52aWV3LmdldEludDMyKF9vZmZzZXQsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRJbnQ2NChfb2Zmc2V0OiBudW1iZXIgPSB0aGlzLm9mZnNldCk6IGJpZ2ludCB7XHJcbiAgICAgIHRoaXMub2Zmc2V0ID0gX29mZnNldCArIDg7XHJcbiAgICAgIHJldHVybiB0aGlzLnZpZXcuZ2V0QmlnSW50NjQoX29mZnNldCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZsb2F0MzIoX29mZnNldDogbnVtYmVyID0gdGhpcy5vZmZzZXQpOiBudW1iZXIge1xyXG4gICAgICB0aGlzLm9mZnNldCA9IF9vZmZzZXQgKyA0O1xyXG4gICAgICByZXR1cm4gdGhpcy52aWV3LmdldEZsb2F0MzIoX29mZnNldCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEZsb2F0NjQoX29mZnNldDogbnVtYmVyID0gdGhpcy5vZmZzZXQpOiBudW1iZXIge1xyXG4gICAgICB0aGlzLm9mZnNldCA9IF9vZmZzZXQgKyA4O1xyXG4gICAgICByZXR1cm4gdGhpcy52aWV3LmdldEZsb2F0NjQoX29mZnNldCwgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFN0cmluZyhfbGVuZ3RoOiBudW1iZXIsIF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoLi4udGhpcy5nZXRTZXF1ZW5jZSh0aGlzLmdldFVpbnQ4LCBfbGVuZ3RoLCBfb2Zmc2V0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljICpnZXRTZXF1ZW5jZTxUIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50PihfZ2V0dGVyOiAoKSA9PiBULCBfbGVuZ3RoOiBudW1iZXIsIF9vZmZzZXQ6IG51bWJlciA9IHRoaXMub2Zmc2V0KTogR2VuZXJhdG9yPFQ+IHtcclxuICAgICAgdGhpcy5vZmZzZXQgPSBfb2Zmc2V0O1xyXG4gICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgX2xlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgeWllbGQgX2dldHRlci5jYWxsKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZS5GQlgge1xyXG4gIC8qKlxyXG4gICAqIEludGVyZmFjZSB0byByZXByZXNlbnQgZmJ4IGZpbGVzIGNvbnRhaW5pbmcgaXRzIGRvY3VtZW50cywgZGVmaW5pdGlvbnMsIG9iamVjdHMgYW5kIGNvbm5lY3Rpb25zLlxyXG4gICAqIEl0cyBvYmplY3RzIGFyZSBkZXZpZGVkIGluIGFsbCBhbmQgdGhlIGRpZmZlcmVudCBvYmplY3QgdHlwZXMuXHJcbiAgICogQGF1dGhvciBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgRkJYIHtcclxuICAgIGRvY3VtZW50czogRG9jdW1lbnRbXTtcclxuICAgIGRlZmluaXRpb25zPzogRGVmaW5pdGlvbnM7XHJcbiAgICBvYmplY3RzOiB7XHJcbiAgICAgIGFsbDogT2JqZWN0W107XHJcbiAgICAgIG1vZGVsczogTW9kZWxbXTtcclxuICAgICAgZ2VvbWV0cmllczogR2VvbWV0cnlbXTtcclxuICAgICAgcG9zZXM6IE9iamVjdFtdO1xyXG4gICAgICBtYXRlcmlhbHM6IE1hdGVyaWFsW107XHJcbiAgICAgIHRleHR1cmVzOiBUZXh0dXJlW107XHJcbiAgICAgIGFuaW1TdGFja3M6IE9iamVjdFtdO1xyXG4gICAgfTtcclxuICAgIGNvbm5lY3Rpb25zOiBDb25uZWN0aW9uW107XHJcbiAgfVxyXG5cclxuICBpbnRlcmZhY2UgT2JqZWN0QmFzZSB7XHJcbiAgICB1aWQ6IG51bWJlcjtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHR5cGU/OiBzdHJpbmc7XHJcbiAgICBzdWJ0eXBlPzogc3RyaW5nO1xyXG4gICAgY2hpbGRyZW4/OiBPYmplY3RbXTtcclxuICAgIHBhcmVudHM/OiBPYmplY3RbXTtcclxuXHJcbiAgICBsb2FkZWQ6IGJvb2xlYW47XHJcbiAgICBsb2FkOiAoKSA9PiBPYmplY3Q7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnRlcmZhY2UgdG8gcmVwcmVzZW50IGZieC1vYmplY3RzLlxyXG4gICAqIEFsbCBmaWVsZHMgb3RoZXIgdGhhbiB1aWQsIG5hbWUsIHR5cGUsIHN1YnR5cGUsIGNoaWxkcmVuIGFuZCBwYXJlbnRzIGFyZSBsb2FkZWQgd2l0aCB0aGUgbG9hZC1tZXRob2QuXHJcbiAgICogRWFjaCBvYmplY3QgY2FuIGJlIGludGVycHJldGVkIGFzIGFuIGV4cGxpY2l0IGZieCBvYmplY3QgdHlwZSBkZWZpbmVkIGluIEZ1ZGdlQ29yZS5GQlguIEV4cGxpY2l0IHR5cGVzIGhhdmUgYmVlbiBkZWZpbmVkXHJcbiAgICogd2l0aCB0aGUgaGVscCBvZiBmb2xsb3dpbmcgcmVmZXJlbmNlOlxyXG4gICAqIGh0dHBzOi8vYXJjaGl2ZS5ibGVuZGVyLm9yZy93aWtpL2luZGV4LnBocC9Vc2VyOk1vbnQyOS9Gb3VuZGF0aW9uL0ZCWF9GaWxlX1N0cnVjdHVyZS8jU29tZV9TcGVjaWZpY19Qcm9wZXJ0eV9UeXBlc1xyXG4gICAqIEBhdXRob3IgTWF0dGhpYXMgUm9taW5nLCBIRlUsIDIwMjNcclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIE9iamVjdCBleHRlbmRzIE9iamVjdEJhc2Uge1xyXG4gICAgW25hbWU6IHN0cmluZ106IE5vZGVQcm9wZXJ0eSB8IHsgW25hbWU6IHN0cmluZ106IE5vZGVQcm9wZXJ0eSB9IHwgUHJvcGVydHk3MCB8IE9iamVjdCB8IE9iamVjdFtdIHwgKCgpID0+IE9iamVjdCk7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIERvY3VtZW50IGV4dGVuZHMgT2JqZWN0QmFzZSB7XHJcbiAgICBTb3VyY2VPYmplY3Q/OiB1bmRlZmluZWQ7XHJcbiAgICBBY3RpdmVBbmltU3RhY2tOYW1lPzogc3RyaW5nO1xyXG4gICAgUm9vdE5vZGU/OiBudW1iZXI7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIE5vZGVBdHRyaWJ1dGUgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIFR5cGVGbGFncz86IHN0cmluZztcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgR2VvbWV0cnkgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIEdlb21ldHJ5VmVyc2lvbj86IG51bWJlcjsgXHJcbiAgICBWZXJ0aWNlcz86IEZsb2F0MzJBcnJheTtcclxuICAgIFBvbHlnb25WZXJ0ZXhJbmRleD86IEludDMyQXJyYXk7XHJcbiAgICBMYXllckVsZW1lbnROb3JtYWw/OiBMYXllckVsZW1lbnROb3JtYWw7XHJcbiAgICBMYXllckVsZW1lbnRVVj86IExheWVyRWxlbWVudFVWOyAvLyB8IExheWVyRWxlbWVudFVWW107IC8vIFRPRE86IG1pZ2h0IG5lZWQgdG8gcmVhZGQgdGhpc1xyXG4gICAgTGF5ZXJFbGVtZW50TWF0ZXJpYWw/OiBMYXllckVsZW1lbnRNYXRlcmlhbDtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTW9kZWwgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIFZlcnNpb24/OiBudW1iZXI7XHJcbiAgICBMY2xUcmFuc2xhdGlvbj86IFZlY3RvcjMgfCBBbmltQ3VydmVOb2RlO1xyXG4gICAgTGNsUm90YXRpb24/OiBWZWN0b3IzIHwgQW5pbUN1cnZlTm9kZTtcclxuICAgIExjbFNjYWxpbmc/OiBWZWN0b3IzIHwgQW5pbUN1cnZlTm9kZTtcclxuICAgIFByZVJvdGF0aW9uPzogVmVjdG9yMztcclxuICAgIFBvc3RSb3RhdGlvbj86IFZlY3RvcjM7XHJcbiAgICBTY2FsaW5nT2Zmc2V0PzogVmVjdG9yMztcclxuICAgIFNjYWxpbmdQaXZvdD86IFZlY3RvcjM7XHJcbiAgICBSb3RhdGlvbk9mZnNldD86IFZlY3RvcjM7XHJcbiAgICBSb3RhdGlvblBpdm90PzogVmVjdG9yMztcclxuICAgIEluaGVyaXRUeXBlPzogbnVtYmVyO1xyXG4gICAgRXVsZXJPcmRlcj86IHN0cmluZztcclxuICAgIGN1cnJlbnRVVlNldD86IHN0cmluZztcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTWF0ZXJpYWwgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIFZlcnNpb24/OiBudW1iZXI7XHJcbiAgICBTaGFkaW5nTW9kZWw/OiBzdHJpbmc7XHJcblxyXG4gICAgRGlmZnVzZT86IFZlY3RvcjM7XHJcbiAgICBEaWZmdXNlQ29sb3I/OiBWZWN0b3IzIHwgVGV4dHVyZTtcclxuICAgIERpZmZ1c2VGYWN0b3I/OiBudW1iZXI7XHJcblxyXG4gICAgQW1iaWVudD86IFZlY3RvcjM7XHJcbiAgICBBbWJpZW50Q29sb3I/OiBWZWN0b3IzIHwgVGV4dHVyZTtcclxuXHJcbiAgICBTaGluaW5lc3M/OiBudW1iZXI7XHJcbiAgICBTaGluaW5lc3NFeHBvbmVudD86IFZlY3RvcjMgfCBUZXh0dXJlO1xyXG5cclxuICAgIFNwZWN1bGFyPzogVmVjdG9yMztcclxuICAgIFNwZWN1bGFyQ29sb3I/OiBWZWN0b3IzIHwgVGV4dHVyZTtcclxuICAgIFNwZWN1bGFyRmFjdG9yPzogbnVtYmVyO1xyXG5cclxuICAgIFJlZmxlY3Rpdml0eT86IG51bWJlcjtcclxuICAgIFJlZmxlY3Rpb25GYWN0b3I/OiBudW1iZXI7XHJcblxyXG4gICAgT3BhY2l0eT86IG51bWJlcjtcclxuICAgIFRyYW5zcGFyZW5jeUZhY3Rvcj86IG51bWJlcjtcclxuICAgIFxyXG4gICAgRW1pc3NpdmU/OiBWZWN0b3IzO1xyXG4gICAgTm9ybWFsTWFwPzogVGV4dHVyZTtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgRGVmb3JtZXIgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIFZlcnNpb24/OiBudW1iZXI7XHJcbiAgICBTa2lubmluZ1R5cGU/OiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFN1YkRlZm9ybWVyIGV4dGVuZHMgT2JqZWN0QmFzZSB7XHJcbiAgICBWZXJzaW9uPzogbnVtYmVyO1xyXG4gICAgVHJhbnNmb3JtPzogRmxvYXQzMkFycmF5O1xyXG4gICAgVHJhbnNmb3JtTGluaz86IEZsb2F0MzJBcnJheTtcclxuICAgIEluZGV4ZXM/OiBVaW50MTZBcnJheTtcclxuICAgIFdlaWdodHM/OiBGbG9hdDMyQXJyYXk7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFRleHR1cmUgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIEZpbGVOYW1lPzogc3RyaW5nO1xyXG4gICAgUmVsYXRpdmVGaWxlbmFtZT86IHN0cmluZztcclxuICAgIE1vZGVsVVZTY2FsaW5nPzogbnVtYmVyO1xyXG4gICAgTW9kZWxVVlRyYW5zbGF0aW9uPzogbnVtYmVyO1xyXG4gICAgVVZTZXQ/OiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFZpZGVvIGV4dGVuZHMgT2JqZWN0QmFzZSB7XHJcbiAgICBGaWxlTmFtZT86IHN0cmluZztcclxuICAgIFJlbGF0aXZlRmlsZW5hbWU/OiBzdHJpbmc7XHJcbiAgICBVc2VNaXBNYXA/OiAgbnVtYmVyO1xyXG4gICAgQ29udGVudD86IFVpbnQ4QXJyYXk7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIEFuaW1DdXJ2ZU5vZGUgZXh0ZW5kcyBPYmplY3RCYXNlIHtcclxuICAgIGRYPzogbnVtYmVyIHwgQW5pbUN1cnZlO1xyXG4gICAgZFk/OiBudW1iZXIgfCBBbmltQ3VydmU7XHJcbiAgICBkWj86IG51bWJlciB8IEFuaW1DdXJ2ZTtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbUN1cnZlIGV4dGVuZHMgT2JqZWN0QmFzZSB7XHJcbiAgICBLZXlWZXI/OiBudW1iZXI7XHJcbiAgICBEZWZhdWx0PzogbnVtYmVyO1xyXG4gICAgS2V5VGltZT86IEJpZ0ludDY0QXJyYXk7XHJcbiAgICBLZXlWYWx1ZUZsb2F0PzogRmxvYXQzMkFycmF5O1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBMYXllckVsZW1lbnQge1xyXG4gICAgTmFtZTogc3RyaW5nO1xyXG4gICAgVmVyc2lvbjogbnVtYmVyO1xyXG4gICAgTWFwcGluZ0luZm9ybWF0aW9uVHlwZTogc3RyaW5nO1xyXG4gICAgUmVmZXJlbmNlSW5mb3JtYXRpb25UeXBlOiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIExheWVyRWxlbWVudE5vcm1hbCBleHRlbmRzIExheWVyRWxlbWVudCB7XHJcbiAgICBOb3JtYWxzOiBGbG9hdDMyQXJyYXk7XHJcbiAgICBOb3JtYWxzVzogRmxvYXQzMkFycmF5O1xyXG4gICAgTm9ybWFsc0luZGV4PzogVWludDE2QXJyYXk7IC8vIFRPRE86IGZpbmQgYW4gRkJYIGZpbGUgd2hpY2ggdXNlcyBub3JtYWxzIGluZGV4XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIExheWVyRWxlbWVudFVWIGV4dGVuZHMgTGF5ZXJFbGVtZW50IHtcclxuICAgIFVWPzogRmxvYXQzMkFycmF5O1xyXG4gICAgVVZJbmRleD86IFVpbnQxNkFycmF5O1xyXG4gIH1cclxuXHJcbiAgZXhwb3J0IGludGVyZmFjZSBMYXllckVsZW1lbnRNYXRlcmlhbCBleHRlbmRzIExheWVyRWxlbWVudCB7XHJcbiAgICBNYXRlcmlhbHM/OiBudW1iZXI7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgZW51bSBNYXBwaW5nSW5mb3JtYXRpb25UeXBlIHtcclxuICAgIEJ5VmVydGV4LCBCeVBvbHlnb24sIEJ5UG9seWdvblZlcnRleCwgQnlFZGdlLCBBbGxTYW1lXHJcbiAgfVxyXG5cclxuICBleHBvcnQgZW51bSBSZWZlcmVuY2VJbmZvcm1hdGlvblR5cGUge1xyXG4gICAgRGlyZWN0LCBJbmRleFRvRGlyZWN0XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIENvbm5lY3Rpb24ge1xyXG4gICAgcGFyZW50VUlEOiBudW1iZXI7XHJcbiAgICBjaGlsZFVJRDogbnVtYmVyO1xyXG4gICAgcHJvcGVydHlOYW1lOiBzdHJpbmc7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIERlZmluaXRpb25zIHtcclxuICAgIHZlcnNpb246IG51bWJlcjtcclxuICAgIG9iamVjdFR5cGVzOiBPYmplY3RUeXBlW107XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIE9iamVjdFR5cGUge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgY291bnQ6IG51bWJlcjtcclxuICAgIHByb3BlcnR5VGVtcGxhdGU6IFByb3BlcnR5VGVtcGxhdGU7XHJcbiAgfVxyXG5cclxuICBleHBvcnQgaW50ZXJmYWNlIFByb3BlcnR5VGVtcGxhdGUge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgW3Byb3BlcnR5TmFtZTogc3RyaW5nXTogUHJvcGVydHk3MDtcclxuICB9XHJcblxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQXNzZXQgbG9hZGVyIGZvciBGaWxtYm94IGZpbGVzLlxyXG4gICAqIEBhdXRob3IgTWF0dGhpYXMgUm9taW5nLCBIRlUsIDIwMjNcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgRkJYTG9hZGVyIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGxvYWRlcnM6IHsgW3VyaTogc3RyaW5nXTogRkJYTG9hZGVyIH07XHJcblxyXG4gICAgc3RhdGljICNkZWZhdWx0TWF0ZXJpYWw6IE1hdGVyaWFsO1xyXG4gICAgc3RhdGljICNkZWZhdWx0U2tpbk1hdGVyaWFsOiBNYXRlcmlhbDtcclxuXHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgZmJ4OiBGQlguRkJYO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IG5vZGVzOiBGQlguTm9kZVtdO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHVyaTogc3RyaW5nO1xyXG5cclxuICAgICNzY2VuZXM6IEdyYXBoW107XHJcbiAgICAjbm9kZXM6IE5vZGVbXTtcclxuICAgICNtZXNoZXM6IE1lc2hJbXBvcnRbXTtcclxuICAgICNtYXRlcmlhbHM6IE1hdGVyaWFsW107XHJcbiAgICAjc2tpbk1hdGVyaWFsczogTWF0ZXJpYWxbXSA9IFtdO1xyXG4gICAgI3RleHR1cmVzOiBUZXh0dXJlW107XHJcbiAgICAjc2tlbGV0b25zOiBTa2VsZXRvbltdO1xyXG4gICAgI2FuaW1hdGlvbnM6IEFuaW1hdGlvbltdO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihfYnVmZmVyOiBBcnJheUJ1ZmZlciwgX3VyaTogc3RyaW5nKSB7XHJcbiAgICAgIHRoaXMudXJpID0gX3VyaTtcclxuICAgICAgdGhpcy5ub2RlcyA9IEZCWC5wYXJzZU5vZGVzRnJvbUJpbmFyeShfYnVmZmVyKTtcclxuICAgICAgY29uc29sZS5sb2codGhpcy5ub2Rlcyk7XHJcbiAgICAgIHRoaXMuZmJ4ID0gRkJYLmxvYWRGcm9tTm9kZXModGhpcy5ub2Rlcyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmJ4KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIExPQUQoX3VyaTogc3RyaW5nKTogUHJvbWlzZTxGQlhMb2FkZXI+IHtcclxuICAgICAgaWYgKCF0aGlzLmxvYWRlcnMpXHJcbiAgICAgICAgdGhpcy5sb2FkZXJzID0ge307XHJcbiAgICAgIGlmICghdGhpcy5sb2FkZXJzW191cmldKSB7ICAgICAgXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2U6IFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goX3VyaSk7XHJcbiAgICAgICAgY29uc3QgYmluYXJ5OiBBcnJheUJ1ZmZlciA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XHJcbiAgICAgICAgdGhpcy5sb2FkZXJzW191cmldID0gbmV3IEZCWExvYWRlcihiaW5hcnksIF91cmkpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmxvYWRlcnNbX3VyaV07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0IGRlZmF1bHRNYXRlcmlhbCgpOiBNYXRlcmlhbCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNkZWZhdWx0TWF0ZXJpYWwgfHwgKHRoaXMuI2RlZmF1bHRNYXRlcmlhbCA9XHJcbiAgICAgICAgbmV3IE1hdGVyaWFsKFwiRkJYRGVmYXVsdE1hdGVyaWFsXCIsIFNoYWRlckdvdXJhdWQsIG5ldyBDb2F0UmVtaXNzaXZlKENvbG9yLkNTUyhcIndoaXRlXCIpKSlcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXQgZGVmYXVsdFNraW5NYXRlcmlhbCgpOiBNYXRlcmlhbCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNkZWZhdWx0U2tpbk1hdGVyaWFsIHx8ICh0aGlzLiNkZWZhdWx0U2tpbk1hdGVyaWFsID1cclxuICAgICAgICBuZXcgTWF0ZXJpYWwoXCJGQlhEZWZhdWx0U2tpbk1hdGVyaWFsXCIsIFNoYWRlckdvdXJhdWRTa2luLCBuZXcgQ29hdFJlbWlzc2l2ZShDb2xvci5DU1MoXCJ3aGl0ZVwiKSkpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFNjZW5lKF9pbmRleDogbnVtYmVyID0gMCk6IFByb21pc2U8R3JhcGhJbnN0YW5jZT4ge1xyXG4gICAgICBpZiAoIXRoaXMuI3NjZW5lcylcclxuICAgICAgICB0aGlzLiNzY2VuZXMgPSBbXTtcclxuICAgICAgaWYgKCF0aGlzLiNzY2VuZXNbX2luZGV4XSkge1xyXG4gICAgICAgIGNvbnN0IGRvY3VtZW50RkJYOiBGQlguRG9jdW1lbnQgPSB0aGlzLmZieC5kb2N1bWVudHNbX2luZGV4XS5sb2FkKCk7XHJcbiAgICAgICAgY29uc3Qgc2NlbmU6IEdyYXBoID0gbmV3IEdyYXBoKGRvY3VtZW50RkJYLm5hbWUpO1xyXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGRGQlggb2YgZG9jdW1lbnRGQlguY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGlmIChjaGlsZEZCWC50eXBlID09IFwiTW9kZWxcIikge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGRGQlguc3VidHlwZSA9PSBcIkxpbWJOb2RlXCIpXHJcbiAgICAgICAgICAgICAgc2NlbmUuYWRkQ2hpbGQoYXdhaXQgU2tlbGV0b25JbnN0YW5jZS5DUkVBVEUoYXdhaXQgdGhpcy5nZXRTa2VsZXRvbihjaGlsZEZCWCkpKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgIHNjZW5lLmFkZENoaWxkKGF3YWl0IHRoaXMuZ2V0Tm9kZSh0aGlzLmZieC5vYmplY3RzLm1vZGVscy5pbmRleE9mKGNoaWxkRkJYKSwgc2NlbmUpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZmJ4Lm9iamVjdHMuYW5pbVN0YWNrcyAmJiB0aGlzLmZieC5vYmplY3RzLmFuaW1TdGFja3MubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgY29uc3QgYW5pbWF0aW9uOiBBbmltYXRpb24gPSBhd2FpdCB0aGlzLmdldEFuaW1hdGlvbihkb2N1bWVudEZCWC5BY3RpdmVBbmltU3RhY2tOYW1lLmxlbmd0aCA+IDAgP1xyXG4gICAgICAgICAgICB0aGlzLmZieC5vYmplY3RzLmFuaW1TdGFja3MuZmluZEluZGV4KF9hbmltU3RhY2sgPT4gX2FuaW1TdGFjay5uYW1lID09IGRvY3VtZW50RkJYLkFjdGl2ZUFuaW1TdGFja05hbWUpIDogMCk7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHNjZW5lKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC5uYW1lID09IFwiU2tlbGV0b24wXCIpXHJcbiAgICAgICAgICAgICAgY2hpbGQuZ2V0UGFyZW50KCkuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnRBbmltYXRvcihcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbiwgQU5JTUFUSU9OX1BMQVlNT0RFLkxPT1AsIEFOSU1BVElPTl9RVUFOVElaQVRJT04uQ09OVElOT1VTXHJcbiAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFByb2plY3QucmVnaXN0ZXIoc2NlbmUpO1xyXG4gICAgICAgIHRoaXMuI3NjZW5lc1tfaW5kZXhdID0gc2NlbmU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGF3YWl0IFByb2plY3QuY3JlYXRlR3JhcGhJbnN0YW5jZSh0aGlzLiNzY2VuZXNbX2luZGV4XSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldE5vZGUoX2luZGV4OiBudW1iZXIsIF9yb290PzogTm9kZSk6IFByb21pc2U8Tm9kZT4ge1xyXG4gICAgICBpZiAoIXRoaXMuI25vZGVzKVxyXG4gICAgICAgIHRoaXMuI25vZGVzID0gW107XHJcbiAgICAgIGlmICghdGhpcy4jbm9kZXNbX2luZGV4XSkge1xyXG4gICAgICAgIC8vIGNyZWF0ZSBub2RlIHdpdGggdHJhbnNmb3JtXHJcbiAgICAgICAgY29uc3QgbW9kZWxGQlg6IEZCWC5Nb2RlbCA9IHRoaXMuZmJ4Lm9iamVjdHMubW9kZWxzW19pbmRleF0ubG9hZCgpO1xyXG4gICAgICAgIGNvbnN0IG5vZGU6IE5vZGUgPSBuZXcgTm9kZShtb2RlbEZCWC5uYW1lKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmdlbmVyYXRlVHJhbnNmb3JtKG1vZGVsRkJYLCBub2RlKTtcclxuICAgICAgICAvLyBub2RlLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50VHJhbnNmb3JtKE1hdHJpeDR4NC5DT05TVFJVQ1RJT04oe1xyXG4gICAgICAgIC8vICAgdHJhbnNsYXRpb246IHRoaXMuZ2V0VHJhbnNmb3JtVmVjdG9yKG1vZGVsRkJYLkxjbFRyYW5zbGF0aW9uLCBWZWN0b3IzLlpFUk8pLFxyXG4gICAgICAgIC8vICAgcm90YXRpb246IHRoaXMuZ2V0VHJhbnNmb3JtVmVjdG9yKG1vZGVsRkJYLkxjbFJvdGF0aW9uLCBWZWN0b3IzLlpFUk8pLFxyXG4gICAgICAgIC8vICAgc2NhbGluZzogdGhpcy5nZXRUcmFuc2Zvcm1WZWN0b3IobW9kZWxGQlguTGNsU2NhbGluZywgVmVjdG9yMy5PTkUpXHJcbiAgICAgICAgLy8gfSkpKTtcclxuICAgICAgICAvLyBpZiAobW9kZWxGQlguUHJlUm90YXRpb24pXHJcbiAgICAgICAgLy8gICBub2RlLm10eExvY2FsLm11bHRpcGx5KE1hdHJpeDR4NC5ST1RBVElPTihtb2RlbEZCWC5QcmVSb3RhdGlvbiksIHRydWUpO1xyXG4gICAgICAgIC8vIGlmIChtb2RlbEZCWC5Qb3N0Um90YXRpb24pXHJcbiAgICAgICAgLy8gICBub2RlLm10eExvY2FsLm11bHRpcGx5KE1hdHJpeDR4NC5ST1RBVElPTihtb2RlbEZCWC5Qb3N0Um90YXRpb24pKTtcclxuICAgICAgICB0aGlzLiNub2Rlc1tfaW5kZXhdID0gbm9kZTtcclxuXHJcbiAgICAgICAgLy8gYXR0YWNoIGNoaWxkcmVuIGFuZCBjb21wb25lbnRzXHJcbiAgICAgICAgaWYgKG1vZGVsRkJYLmNoaWxkcmVuKSBmb3IgKGNvbnN0IGNoaWxkRkJYIG9mIG1vZGVsRkJYLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICBpZiAoY2hpbGRGQlgudHlwZSA9PSBcIk1vZGVsXCIpIHtcclxuICAgICAgICAgICAgaWYgKF9yb290ICYmIGNoaWxkRkJYLnN1YnR5cGUgPT0gXCJMaW1iTm9kZVwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgc2tlbGV0b246IFNrZWxldG9uID0gYXdhaXQgdGhpcy5nZXRTa2VsZXRvbihjaGlsZEZCWCk7XHJcbiAgICAgICAgICAgICAgbGV0IHNrZWxldG9uSW5zdGFuY2U6IFNrZWxldG9uSW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBfcm9vdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgU2tlbGV0b25JbnN0YW5jZSAmJiBjaGlsZC5pZFNvdXJjZSA9PSBza2VsZXRvbi5pZFJlc291cmNlKVxyXG4gICAgICAgICAgICAgICAgICBza2VsZXRvbkluc3RhbmNlID0gY2hpbGQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIG5vZGUuYWRkQ2hpbGQoc2tlbGV0b25JbnN0YW5jZSB8fCBhd2FpdCBTa2VsZXRvbkluc3RhbmNlLkNSRUFURShza2VsZXRvbikpO1xyXG4gICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICBub2RlLmFkZENoaWxkKGF3YWl0IHRoaXMuZ2V0Tm9kZSh0aGlzLmZieC5vYmplY3RzLm1vZGVscy5pbmRleE9mKGNoaWxkRkJYKSkpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChjaGlsZEZCWC50eXBlID09IFwiR2VvbWV0cnlcIikge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNoOiBNZXNoSW1wb3J0ID0gYXdhaXQgdGhpcy5nZXRNZXNoKHRoaXMuZmJ4Lm9iamVjdHMuZ2VvbWV0cmllcy5pbmRleE9mKGNoaWxkRkJYKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNtcE1lc2g6IENvbXBvbmVudE1lc2ggPSBuZXcgQ29tcG9uZW50TWVzaChtZXNoKTtcclxuICAgICAgICAgICAgbm9kZS5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudE1hdGVyaWFsKEZCWExvYWRlci5kZWZhdWx0TWF0ZXJpYWwpKTtcclxuICAgICAgICAgICAgaWYgKG1lc2ggaW5zdGFuY2VvZiBNZXNoU2tpbikge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNrZWxldG9uOiBTa2VsZXRvbiA9IGF3YWl0IHRoaXMuZ2V0U2tlbGV0b24oY2hpbGRGQlguY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0pOyAvLyBNb2RlbC5EZWZvcm1lci5TdWJEZWZvcm1lci5MaW1iTm9kZVxyXG4gICAgICAgICAgICAgIGNtcE1lc2guc2tlbGV0b24gPSAoX3Jvb3Q/LmdldENoaWxkKDApIGFzIFNrZWxldG9uSW5zdGFuY2UgfHwgYXdhaXQgU2tlbGV0b25JbnN0YW5jZS5DUkVBVEUoc2tlbGV0b24pKTtcclxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHN1YkRlZm9ybWVyRkJYIG9mIGNoaWxkRkJYLmNoaWxkcmVuWzBdLmNoaWxkcmVuIGFzIEZCWC5TdWJEZWZvcm1lcltdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBib25lOiBOb2RlID0gY21wTWVzaC5za2VsZXRvbi5ib25lc1tzdWJEZWZvcm1lckZCWC5jaGlsZHJlblswXS5uYW1lXTtcclxuICAgICAgICAgICAgICAgIGJvbmUubXR4TG9jYWwuc2V0KHN1YkRlZm9ybWVyRkJYLlRyYW5zZm9ybUxpbmspO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvbmUuZ2V0UGFyZW50KCkpXHJcbiAgICAgICAgICAgICAgICAgIGJvbmUubXR4TG9jYWwubXVsdGlwbHkoYm9uZS5nZXRQYXJlbnQoKS5tdHhXb3JsZEludmVyc2UpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNYXRlcmlhbCkubWF0ZXJpYWwgPSBGQlhMb2FkZXIuZGVmYXVsdFNraW5NYXRlcmlhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBub2RlLmFkZENvbXBvbmVudChjbXBNZXNoKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoY2hpbGRGQlgudHlwZSA9PSBcIk1hdGVyaWFsXCIpIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogYWRkaXRpb25hbCBza2luIG1hdGVyaWFscyBnZXQgY3JlYXRlZCBoZXJlLCBjaGVjayBpZiB0aGUgb3JpZ2luYWwgbWF0ZXJpYWwgaXMgc3RpbGwgbmVlZGVkXHJcbiAgICAgICAgICAgIGNvbnN0IGlNYXRlcmlhbDogbnVtYmVyID0gdGhpcy5mYngub2JqZWN0cy5tYXRlcmlhbHMuaW5kZXhPZihjaGlsZEZCWCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGVyaWFsOiBNYXRlcmlhbCA9IGF3YWl0IHRoaXMuZ2V0TWF0ZXJpYWwoaU1hdGVyaWFsKTtcclxuICAgICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWF0ZXJpYWwpLm1hdGVyaWFsID0gbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCkubWVzaCBpbnN0YW5jZW9mIE1lc2hTa2luID9cclxuICAgICAgICAgICAgICB0aGlzLiNza2luTWF0ZXJpYWxzW2lNYXRlcmlhbF0gfHwgKHRoaXMuI3NraW5NYXRlcmlhbHNbaU1hdGVyaWFsXSA9IG5ldyBNYXRlcmlhbChcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5nZXRTaGFkZXIoKSA9PSBTaGFkZXJQaG9uZyA/XHJcbiAgICAgICAgICAgICAgICAgIFNoYWRlclBob25nU2tpbiA6XHJcbiAgICAgICAgICAgICAgICAgIFNoYWRlclBob25nVGV4dHVyZWRTa2luLFxyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuY29hdFxyXG4gICAgICAgICAgICAgICkpIDpcclxuICAgICAgICAgICAgICBtYXRlcmlhbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuI25vZGVzW19pbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldE1lc2goX2luZGV4OiBudW1iZXIpOiBQcm9taXNlPE1lc2hJbXBvcnQ+IHtcclxuICAgICAgaWYgKCF0aGlzLiNtZXNoZXMpXHJcbiAgICAgICAgdGhpcy4jbWVzaGVzID0gW107XHJcbiAgICAgIGlmICghdGhpcy4jbWVzaGVzW19pbmRleF0pXHJcbiAgICAgICAgdGhpcy4jbWVzaGVzW19pbmRleF0gPSBhd2FpdCAoXHJcbiAgICAgICAgICB0aGlzLmZieC5vYmplY3RzLmdlb21ldHJpZXNbX2luZGV4XS5jaGlsZHJlbj8uWzBdLnR5cGUgPT0gXCJEZWZvcm1lclwiID9cclxuICAgICAgICAgICAgbmV3IE1lc2hTa2luKCkgOlxyXG4gICAgICAgICAgICBuZXcgTWVzaEltcG9ydCgpXHJcbiAgICAgICAgKS5sb2FkKE1lc2hMb2FkZXJGQlgsIHRoaXMudXJpLCB0aGlzLmZieC5vYmplY3RzLmdlb21ldHJpZXNbX2luZGV4XSk7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtZXNoZXNbX2luZGV4XTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0TWF0ZXJpYWwoX2luZGV4OiBudW1iZXIpOiBQcm9taXNlPE1hdGVyaWFsPiB7XHJcbiAgICAgIGlmICghdGhpcy4jbWF0ZXJpYWxzKVxyXG4gICAgICAgIHRoaXMuI21hdGVyaWFscyA9IFtdO1xyXG4gICAgICBpZiAoIXRoaXMuI21hdGVyaWFsc1tfaW5kZXhdKSB7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxGQlg6IEZCWC5NYXRlcmlhbCA9IHRoaXMuZmJ4Lm9iamVjdHMubWF0ZXJpYWxzW19pbmRleF0ubG9hZCgpO1xyXG4gICAgICAgIGlmICghKG1hdGVyaWFsRkJYLkRpZmZ1c2VDb2xvciBpbnN0YW5jZW9mIFZlY3RvcjMpKVxyXG4gICAgICAgICAgbWF0ZXJpYWxGQlguRGlmZnVzZUNvbG9yPy5jaGlsZHJlblswXS5sb2FkKCk7XHJcbiAgICAgICAgLy8gRkJYIHN1cHBvcnRzIGxhbWJlcnQgYW5kIHBob25nIHNoYWRpbmcsIGVpdGhlciB3YXkgZnVkZ2UgaGFzIG5vIGxhbWJlcnQgc2hhZGVyIHNvIHdlIGFsd2F5cyB1c2UgcGhvbmcuXHJcbiAgICAgICAgLy8gSW4gRGlmZnVzZUNvbG9yIHRoZSB0ZXh0dXJlIG9mIHRoZSBtYXRlcmlhbCBjb2xvciBpcyBzdG9yZWQsIGlmIGl0J3MgZGVmaW5lZCB3ZSB1c2UgYSB0ZXh0dXJlIHNoYWRlci5cclxuICAgICAgICAvLyBUT0RPOiBtYXRlcmlhbEZCWCBhbHNvIGNvbnRhaW5zIGFkZGl0aW9uYWwgdmFsdWVzIGxpa2Ugc2hpbmluZXNzIGFuZCByZWZsZWN0aXZpdHkgKGFuZCBvdGhlcnMpIHdoaWNoIGFyZSBub3Qgc3VwcHBvcnRlZC5cclxuICAgICAgICB0aGlzLiNtYXRlcmlhbHNbX2luZGV4XSA9IG5ldyBNYXRlcmlhbChcclxuICAgICAgICAgIG1hdGVyaWFsRkJYLm5hbWUsXHJcbiAgICAgICAgICBtYXRlcmlhbEZCWC5EaWZmdXNlQ29sb3IgJiYgIShtYXRlcmlhbEZCWC5EaWZmdXNlQ29sb3IgaW5zdGFuY2VvZiBWZWN0b3IzKSA/XHJcbiAgICAgICAgICAgIFNoYWRlclBob25nVGV4dHVyZWQgOlxyXG4gICAgICAgICAgICBTaGFkZXJQaG9uZyxcclxuICAgICAgICAgIG1hdGVyaWFsRkJYLkRpZmZ1c2VDb2xvciAmJiAhKG1hdGVyaWFsRkJYLkRpZmZ1c2VDb2xvciBpbnN0YW5jZW9mIFZlY3RvcjMpID9cclxuICAgICAgICAgICAgbmV3IENvYXRSZW1pc3NpdmVUZXh0dXJlZChcclxuICAgICAgICAgICAgICBuZXcgQ29sb3IoLi4ubWF0ZXJpYWxGQlguRGlmZnVzZS5nZXQoKSksXHJcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRUZXh0dXJlKHRoaXMuZmJ4Lm9iamVjdHMudGV4dHVyZXMuaW5kZXhPZihtYXRlcmlhbEZCWC5EaWZmdXNlQ29sb3IpKSxcclxuICAgICAgICAgICAgICBtYXRlcmlhbEZCWC5EaWZmdXNlRmFjdG9yID8/IDEsXHJcbiAgICAgICAgICAgICAgbWF0ZXJpYWxGQlguU3BlY3VsYXJGYWN0b3IgPz8gYXZlcmFnZShtYXRlcmlhbEZCWC5TcGVjdWxhcj8uZ2V0KCkpID8/IDBcclxuICAgICAgICAgICAgKSA6XHJcbiAgICAgICAgICAgIG5ldyBDb2F0UmVtaXNzaXZlKFxyXG4gICAgICAgICAgICAgIG5ldyBDb2xvciguLi4obWF0ZXJpYWxGQlguRGlmZnVzZUNvbG9yIGFzIFZlY3RvcjMgPz8gbWF0ZXJpYWxGQlguRGlmZnVzZSkuZ2V0KCkpLFxyXG4gICAgICAgICAgICAgIG1hdGVyaWFsRkJYLkRpZmZ1c2VGYWN0b3IgPz8gMSxcclxuICAgICAgICAgICAgICBtYXRlcmlhbEZCWC5TcGVjdWxhckZhY3RvciA/PyBhdmVyYWdlKG1hdGVyaWFsRkJYLlNwZWN1bGFyPy5nZXQoKSkgPz8gMFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy4jbWF0ZXJpYWxzW19pbmRleF07XHJcblxyXG4gICAgICBmdW5jdGlvbiBhdmVyYWdlKF9hcnJheTogRmxvYXQzMkFycmF5KTogbnVtYmVyIHsgLy8gVE9ETzogc3BlY3VsYXIgZmFjdG9yIHZlY3RvciAodG9nZXRoZXIgd2l0aCBzcGVjdWxhciBjb2xvciB0ZXh0dXJlKSBpcyBub3Qgc3VwcG9ydGVkIHNvIHdlIHVzZSB0aGUgYXZlcmFnZSBvZiB0aGUgdmVjdG9yIHRvIGFwcHJveGltYXRlIGEgc2luZ3VsYXIgc3BlY3VsYXIgZmFjdG9yLlxyXG4gICAgICAgIGlmIChfYXJyYXkpXHJcbiAgICAgICAgICByZXR1cm4gX2FycmF5LnJlZHVjZSgoYSwgYikgPT4gYSArIGIpIC8gX2FycmF5Lmxlbmd0aDtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICB9IFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRUZXh0dXJlKF9pbmRleDogbnVtYmVyKTogUHJvbWlzZTxUZXh0dXJlPiB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLiN0ZXh0dXJlcylcclxuICAgICAgICAgIHRoaXMuI3RleHR1cmVzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuI3RleHR1cmVzW19pbmRleF0pXHJcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0aGlzLiN0ZXh0dXJlc1tfaW5kZXhdKTtcclxuXHJcbiAgICAgICAgY29uc3QgdmlkZW9GQlg6IEZCWC5WaWRlbyA9IHRoaXMuZmJ4Lm9iamVjdHMudGV4dHVyZXNbX2luZGV4XS5jaGlsZHJlblswXTtcclxuICAgICAgICBjb25zdCB0ZXh0dXJlOiBUZXh0dXJlSW1hZ2UgPSBuZXcgVGV4dHVyZUltYWdlKCk7XHJcbiAgICAgICAgdGV4dHVyZS5pbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHRleHR1cmUuaW1hZ2Uub25sb2FkID0gKCkgPT4gcmVzb2x2ZSh0ZXh0dXJlKTtcclxuICAgICAgICB0ZXh0dXJlLmltYWdlLm9uZXJyb3IgPSByZWplY3Q7XHJcbiAgICAgICAgdGV4dHVyZS5pbWFnZS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFt2aWRlb0ZCWC5Db250ZW50XSwgeyB0eXBlOiBcImltYWdlL3BuZ1wiIH0pKTtcclxuICAgICAgICB0aGlzLiN0ZXh0dXJlc1tfaW5kZXhdID0gdGV4dHVyZTtcclxuICAgICAgICAvLyBUT0RPOiBnZXQgYW5kIHNldCBtaXBtYXAgaW5mb3JtYXRpb24gPz8/XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByb2JsZW06IG1laHJlcmUgRGVmb3JtZXIgdmVyd2Vpc2VuIGF1ZiBkYXMgc2VsYmUgU2tlbGV0dCBhYmVyIG51dHplbiBkYWJlaSBuaWNodCBpbW1lciBhbGxlIEtub2NoZW5cclxuICAgIC8vID0+IFByb2JsZW0gYmVzdGVodCBhdWNoIGltIEdMVEZMb2FkZXJcclxuICAgIC8qKlxyXG4gICAgICogUmV0cmllZnMgdGhlIHNrZWxldG9uIGNvbnRhaW5pbmcgdGhlIGdpdmVuIGxpbWIgbm9kZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldFNrZWxldG9uKF9mYnhMaW1iTm9kZTogRkJYLk1vZGVsKTogUHJvbWlzZTxTa2VsZXRvbj4ge1xyXG4gICAgICBpZiAoIXRoaXMuI3NrZWxldG9ucylcclxuICAgICAgICB0aGlzLiNza2VsZXRvbnMgPSBbXTtcclxuICAgICAgcmV0dXJuIHRoaXMuI3NrZWxldG9ucy5maW5kKF9za2VsZXRvbiA9PiBfZmJ4TGltYk5vZGUubmFtZSBpbiBfc2tlbGV0b24uYm9uZXMpIHx8IGF3YWl0IChhc3luYygpID0+IHtcclxuICAgICAgICBjb25zdCBza2VsZXRvbjogU2tlbGV0b24gPSBuZXcgU2tlbGV0b24oYFNrZWxldG9uJHt0aGlzLiNza2VsZXRvbnMubGVuZ3RofWApO1xyXG4gICAgICAgIGxldCByb290Tm9kZTogRkJYLk1vZGVsID0gX2ZieExpbWJOb2RlO1xyXG4gICAgICAgIHdoaWxlIChyb290Tm9kZS5wYXJlbnRzICYmIHJvb3ROb2RlLnBhcmVudHMuc29tZShwYXJlbnQgPT4gcGFyZW50LnN1YnR5cGUgPT0gXCJMaW1iTm9kZVwiKSlcclxuICAgICAgICAgIHJvb3ROb2RlID0gcm9vdE5vZGUucGFyZW50cy5maW5kKF9wYXJlbnQgPT4gX3BhcmVudC5zdWJ0eXBlID09IFwiTGltYk5vZGVcIik7XHJcbiAgICAgICAgY29uc3QgaVJvb3ROb2RlOiBudW1iZXIgPSB0aGlzLmZieC5vYmplY3RzLm1vZGVscy5maW5kSW5kZXgoX21vZGVsID0+IF9tb2RlbC5uYW1lID09IHJvb3ROb2RlLm5hbWUpO1xyXG4gICAgICAgIHNrZWxldG9uLmFkZENoaWxkKGF3YWl0IHRoaXMuZ2V0Tm9kZShpUm9vdE5vZGUpKTtcclxuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygc2tlbGV0b24pIHtcclxuICAgICAgICAgIGlmIChub2RlICE9IHNrZWxldG9uICYmIHRoaXMuZmJ4Lm9iamVjdHMubW9kZWxzW3RoaXMuI25vZGVzLmluZGV4T2Yobm9kZSldLnN1YnR5cGUgPT0gXCJMaW1iTm9kZVwiKVxyXG4gICAgICAgICAgICBza2VsZXRvbi5yZWdpc3RlckJvbmUobm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNrZWxldG9uLnNldERlZmF1bHRQb3NlKCk7XHJcbiAgICAgICAgUHJvamVjdC5yZWdpc3Rlcihza2VsZXRvbik7XHJcbiAgICAgICAgdGhpcy4jc2tlbGV0b25zLnB1c2goc2tlbGV0b24pO1xyXG4gICAgICAgIHJldHVybiBza2VsZXRvbjtcclxuICAgICAgfSkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0QW5pbWF0aW9uKF9pbmRleDogbnVtYmVyKTogUHJvbWlzZTxBbmltYXRpb24+IHtcclxuICAgICAgaWYgKCF0aGlzLiNhbmltYXRpb25zKVxyXG4gICAgICAgIHRoaXMuI2FuaW1hdGlvbnMgPSBbXTtcclxuICAgICAgaWYgKCF0aGlzLiNhbmltYXRpb25zW19pbmRleF0pIHtcclxuICAgICAgICBjb25zdCBhbmltU3RhY2s6IEZCWC5PYmplY3QgPSB0aGlzLmZieC5vYmplY3RzLmFuaW1TdGFja3NbX2luZGV4XTtcclxuICAgICAgICBjb25zdCBhbmltTm9kZXNGQlg6IEZCWC5BbmltQ3VydmVOb2RlW10gPSBhbmltU3RhY2suY2hpbGRyZW5bMF0uY2hpbGRyZW47XHJcbiAgICAgICAgY29uc3QgYW5pbVN0cnVjdHVyZToge1xyXG4gICAgICAgICAgY2hpbGRyZW46IHtcclxuICAgICAgICAgICAgW2NoaWxkTmFtZTogc3RyaW5nXToge1xyXG4gICAgICAgICAgICAgIG10eEJvbmVMb2NhbHM6IHtcclxuICAgICAgICAgICAgICAgIFtib25lTmFtZTogc3RyaW5nXTogQW5pbWF0aW9uU3RydWN0dXJlTWF0cml4NHg0O1xyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH0gPSB7IGNoaWxkcmVuOiB7IFwiU2tlbGV0b24wXCI6IHsgbXR4Qm9uZUxvY2Fsczoge30gfSB9IH07XHJcbiAgICAgICAgZm9yIChjb25zdCBhbmltTm9kZUZCWCBvZiBhbmltTm9kZXNGQlgpIHtcclxuICAgICAgICAgIGlmICh0eXBlb2YgYW5pbU5vZGVGQlguZFggPT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgYW5pbU5vZGVGQlguZFkgPT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgYW5pbU5vZGVGQlguZFogPT0gXCJudW1iZXJcIikgXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgY29uc3QgdGFyZ2V0OiBGQlguTW9kZWwgPSBhbmltTm9kZUZCWC5wYXJlbnRzLmZpbmQoX3BhcmVudCA9PiBfcGFyZW50LnR5cGUgIT0gXCJBbmltTGF5ZXJcIik7XHJcbiAgICAgICAgICAoYW5pbVN0cnVjdHVyZS5jaGlsZHJlbi5Ta2VsZXRvbjAubXR4Qm9uZUxvY2Fsc1t0YXJnZXQubmFtZV0gfHxcclxuICAgICAgICAgICAgKGFuaW1TdHJ1Y3R1cmUuY2hpbGRyZW4uU2tlbGV0b24wLm10eEJvbmVMb2NhbHNbdGFyZ2V0Lm5hbWVdID0ge30pKVt7XHJcbiAgICAgICAgICAgIFQ6IFwidHJhbnNsYXRpb25cIixcclxuICAgICAgICAgICAgUjogXCJyb3RhdGlvblwiLFxyXG4gICAgICAgICAgICBTOiBcInNjYWxlXCJcclxuICAgICAgICAgIH1bYW5pbU5vZGVGQlgubmFtZV1dID0gdGhpcy5nZXRBbmltYXRpb25WZWN0b3IzKGFuaW1Ob2RlRkJYLCB0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLiNhbmltYXRpb25zW19pbmRleF0gPSBuZXcgQW5pbWF0aW9uKGFuaW1TdGFjay5uYW1lLCBhbmltU3RydWN0dXJlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy4jYW5pbWF0aW9uc1tfaW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogZmV0Y2hlZCBmcm9tIHRocmVlLmpzLCBhZGFwdGVkIHRvIEZVREdFIGFuZCBvcHRpbWl6ZWRcclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvYmxvYi9kZXYvZXhhbXBsZXMvanNtL2xvYWRlcnMvRkJYTG9hZGVyLmpzXHJcbiAgICAgKiBsaW5lIDM5NTBcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBnZW5lcmF0ZVRyYW5zZm9ybShfbW9kZWxGQlg6IEZCWC5Nb2RlbCwgX25vZGU6IE5vZGUpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgY29uc3QgcGFyZW50SW5kZXg6IG51bWJlciA9IHRoaXMuZmJ4Lm9iamVjdHMubW9kZWxzLmluZGV4T2YoX21vZGVsRkJYLnBhcmVudHMuZmluZChfcGFyZW50ID0+IF9wYXJlbnQudHlwZSA9PSBcIk1vZGVsXCIpKTtcclxuICAgICAgY29uc3QgcGFyZW50OiBOb2RlID0gcGFyZW50SW5kZXggPj0gMCA/IGF3YWl0IHRoaXMuZ2V0Tm9kZShwYXJlbnRJbmRleCkgOiB1bmRlZmluZWQ7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBtdHhMb2NhbFJvdGF0aW9uOiBNYXRyaXg0eDQgPSBfbW9kZWxGQlguUHJlUm90YXRpb24gfHwgX21vZGVsRkJYLkxjbFJvdGF0aW9uIHx8IF9tb2RlbEZCWC5Qb3N0Um90YXRpb24gP1xyXG4gICAgICAgIE1hdHJpeDR4NC5JREVOVElUWSgpIDpcclxuICAgICAgICB1bmRlZmluZWQ7XHJcbiAgICAgIGlmIChfbW9kZWxGQlguUHJlUm90YXRpb24pIHtcclxuICAgICAgICBtdHhMb2NhbFJvdGF0aW9uLnJvdGF0ZSh0aGlzLmdldE9yZGVyZWQoX21vZGVsRkJYLlByZVJvdGF0aW9uLCBfbW9kZWxGQlgpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoX21vZGVsRkJYLkxjbFJvdGF0aW9uKSB7XHJcbiAgICAgICAgbXR4TG9jYWxSb3RhdGlvbi5yb3RhdGUodGhpcy5nZXRPcmRlcmVkKHRoaXMuZ2V0VHJhbnNmb3JtVmVjdG9yKF9tb2RlbEZCWC5MY2xSb3RhdGlvbiwgVmVjdG9yMy5aRVJPKSwgX21vZGVsRkJYKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKF9tb2RlbEZCWC5Qb3N0Um90YXRpb24pIHtcclxuICAgICAgICBsZXQgbXR4UG9zdFJvdGF0aW9uSW52ZXJzZTogTWF0cml4NHg0ID0gTWF0cml4NHg0LlJPVEFUSU9OKHRoaXMuZ2V0T3JkZXJlZChfbW9kZWxGQlguUG9zdFJvdGF0aW9uICwgX21vZGVsRkJYKSk7XHJcbiAgICAgICAgbXR4UG9zdFJvdGF0aW9uSW52ZXJzZSA9IE1hdHJpeDR4NC5JTlZFUlNJT04obXR4UG9zdFJvdGF0aW9uSW52ZXJzZSk7XHJcbiAgICAgICAgbXR4TG9jYWxSb3RhdGlvbi5tdWx0aXBseShtdHhQb3N0Um90YXRpb25JbnZlcnNlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbXR4TG9jYWxTY2FsaW5nOiBNYXRyaXg0eDQgPSBfbW9kZWxGQlguTGNsU2NhbGluZyA/XHJcbiAgICAgICAgTWF0cml4NHg0LlNDQUxJTkcodGhpcy5nZXRUcmFuc2Zvcm1WZWN0b3IoX21vZGVsRkJYLkxjbFNjYWxpbmcsIFZlY3RvcjMuT05FKSkgOlxyXG4gICAgICAgIHVuZGVmaW5lZDtcclxuXHJcbiAgICAgIGNvbnN0IG10eFBhcmVudFdvcmxkUm90YXRpb246IE1hdHJpeDR4NCA9IHBhcmVudCA/IE1hdHJpeDR4NC5ST1RBVElPTihwYXJlbnQubXR4V29ybGQucm90YXRpb24pIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgY29uc3QgbXR4UGFyZW50V29ybGRTY2FsZTogTWF0cml4NHg0ID0gcGFyZW50ID8gKCgpID0+IHtcclxuICAgICAgICBjb25zdCBtdHhQYXJlbnRXb3JsZFNjYWxlOiBNYXRyaXg0eDQgPSBNYXRyaXg0eDQuSU5WRVJTSU9OKG10eFBhcmVudFdvcmxkUm90YXRpb24pO1xyXG4gICAgICAgIG10eFBhcmVudFdvcmxkU2NhbGUudHJhbnNsYXRlKFZlY3RvcjMuU0NBTEUocGFyZW50Lm10eFdvcmxkLnRyYW5zbGF0aW9uLCAtMSkpO1xyXG4gICAgICAgIG10eFBhcmVudFdvcmxkU2NhbGUubXVsdGlwbHkocGFyZW50Lm10eFdvcmxkKTtcclxuICAgICAgICByZXR1cm4gbXR4UGFyZW50V29ybGRTY2FsZTtcclxuICAgICAgfSkoKSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgIGNvbnN0IG10eFdvcmxkUm90YXRpb25TY2FsZTogTWF0cml4NHg0ID0gcGFyZW50IHx8IG10eExvY2FsUm90YXRpb24gfHwgbXR4TG9jYWxTY2FsaW5nID8gTWF0cml4NHg0LklERU5USVRZKCkgOiB1bmRlZmluZWQ7XHJcbiAgICAgIGlmIChwYXJlbnQgfHwgbXR4TG9jYWxSb3RhdGlvbiB8fCBtdHhMb2NhbFNjYWxpbmcpIHtcclxuICAgICAgICBjb25zdCBpbmhlcml0VHlwZTogbnVtYmVyID0gX21vZGVsRkJYLkluaGVyaXRUeXBlIHx8IDA7XHJcbiAgICAgICAgaWYgKGluaGVyaXRUeXBlID09IDApIHtcclxuICAgICAgICAgIGlmIChwYXJlbnQpXHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhQYXJlbnRXb3JsZFJvdGF0aW9uKTtcclxuICAgICAgICAgIGlmIChtdHhMb2NhbFJvdGF0aW9uKVxyXG4gICAgICAgICAgICBtdHhXb3JsZFJvdGF0aW9uU2NhbGUubXVsdGlwbHkobXR4TG9jYWxSb3RhdGlvbik7XHJcbiAgICAgICAgICBpZiAocGFyZW50KVxyXG4gICAgICAgICAgICBtdHhXb3JsZFJvdGF0aW9uU2NhbGUubXVsdGlwbHkobXR4UGFyZW50V29ybGRTY2FsZSk7XHJcbiAgICAgICAgICBpZiAobXR4TG9jYWxTY2FsaW5nKVxyXG4gICAgICAgICAgICBtdHhXb3JsZFJvdGF0aW9uU2NhbGUubXVsdGlwbHkobXR4TG9jYWxTY2FsaW5nKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGluaGVyaXRUeXBlID09IDEpIHtcclxuICAgICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgbXR4V29ybGRSb3RhdGlvblNjYWxlLm11bHRpcGx5KG10eFBhcmVudFdvcmxkUm90YXRpb24pO1xyXG4gICAgICAgICAgICBtdHhXb3JsZFJvdGF0aW9uU2NhbGUubXVsdGlwbHkobXR4UGFyZW50V29ybGRTY2FsZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAobXR4TG9jYWxSb3RhdGlvbilcclxuICAgICAgICAgICAgbXR4V29ybGRSb3RhdGlvblNjYWxlLm11bHRpcGx5KG10eExvY2FsUm90YXRpb24pO1xyXG4gICAgICAgICAgaWYgKG10eExvY2FsU2NhbGluZylcclxuICAgICAgICAgICAgbXR4V29ybGRSb3RhdGlvblNjYWxlLm11bHRpcGx5KG10eExvY2FsU2NhbGluZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChwYXJlbnQpXHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhQYXJlbnRXb3JsZFJvdGF0aW9uKTtcclxuICAgICAgICAgIGlmIChtdHhMb2NhbFJvdGF0aW9uKVxyXG4gICAgICAgICAgICBtdHhXb3JsZFJvdGF0aW9uU2NhbGUubXVsdGlwbHkobXR4TG9jYWxSb3RhdGlvbik7XHJcbiAgICAgICAgICBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhQYXJlbnRXb3JsZFNjYWxlKTtcclxuICAgICAgICAgICAgbGV0IG10eFBhcmVudExvY2FsU2NhbGluZ0ludmVyc2U6IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5TQ0FMSU5HKHBhcmVudC5tdHhMb2NhbC5zY2FsaW5nKTtcclxuICAgICAgICAgICAgbXR4UGFyZW50TG9jYWxTY2FsaW5nSW52ZXJzZSA9IE1hdHJpeDR4NC5JTlZFUlNJT04obXR4UGFyZW50TG9jYWxTY2FsaW5nSW52ZXJzZSk7XHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhQYXJlbnRMb2NhbFNjYWxpbmdJbnZlcnNlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChtdHhMb2NhbFNjYWxpbmcpXHJcbiAgICAgICAgICAgIG10eFdvcmxkUm90YXRpb25TY2FsZS5tdWx0aXBseShtdHhMb2NhbFNjYWxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBsb2NhbCB0cmFuc2Zvcm0gbWF0cml4XHJcbiAgICAgIGxldCB0cmFuc2xhdGlvbjogVmVjdG9yMztcclxuICAgICAgdHJhbnNsYXRpb24gPSBWZWN0b3IzLlpFUk8oKTtcclxuICAgICAgaWYgKF9tb2RlbEZCWC5MY2xUcmFuc2xhdGlvbilcclxuICAgICAgICB0cmFuc2xhdGlvbi5hZGQodGhpcy5nZXRUcmFuc2Zvcm1WZWN0b3IoX21vZGVsRkJYLkxjbFRyYW5zbGF0aW9uLCBWZWN0b3IzLlpFUk8pKTtcclxuICAgICAgaWYgKF9tb2RlbEZCWC5Sb3RhdGlvbk9mZnNldClcclxuICAgICAgICB0cmFuc2xhdGlvbi5hZGQoX21vZGVsRkJYLlJvdGF0aW9uT2Zmc2V0KTtcclxuICAgICAgaWYgKF9tb2RlbEZCWC5Sb3RhdGlvblBpdm90KVxyXG4gICAgICAgIHRyYW5zbGF0aW9uLmFkZChfbW9kZWxGQlguUm90YXRpb25QaXZvdCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBtdHhUcmFuc2Zvcm06IE1hdHJpeDR4NCA9IE1hdHJpeDR4NC5UUkFOU0xBVElPTih0cmFuc2xhdGlvbik7XHJcbiAgICAgIGlmIChtdHhMb2NhbFJvdGF0aW9uKVxyXG4gICAgICAgIG10eFRyYW5zZm9ybS5tdWx0aXBseShtdHhMb2NhbFJvdGF0aW9uKTtcclxuICAgICAgXHJcbiAgICAgIHRyYW5zbGF0aW9uID0gVmVjdG9yMy5aRVJPKCk7XHJcbiAgICAgIGlmIChfbW9kZWxGQlguUm90YXRpb25QaXZvdClcclxuICAgICAgICB0cmFuc2xhdGlvbi5zdWJ0cmFjdChfbW9kZWxGQlguUm90YXRpb25QaXZvdCk7XHJcbiAgICAgIGlmIChfbW9kZWxGQlguU2NhbGluZ09mZnNldClcclxuICAgICAgICB0cmFuc2xhdGlvbi5hZGQoX21vZGVsRkJYLlNjYWxpbmdPZmZzZXQpO1xyXG4gICAgICBpZiAoX21vZGVsRkJYLlNjYWxpbmdQaXZvdClcclxuICAgICAgICB0cmFuc2xhdGlvbi5hZGQoX21vZGVsRkJYLlNjYWxpbmdQaXZvdCk7XHJcbiAgICAgIG10eFRyYW5zZm9ybS50cmFuc2xhdGUodHJhbnNsYXRpb24pO1xyXG5cclxuICAgICAgaWYgKG10eExvY2FsU2NhbGluZylcclxuICAgICAgICBtdHhUcmFuc2Zvcm0ubXVsdGlwbHkobXR4TG9jYWxTY2FsaW5nKTtcclxuICAgICAgaWYgKF9tb2RlbEZCWC5TY2FsaW5nUGl2b3QpXHJcbiAgICAgICAgbXR4VHJhbnNmb3JtLnRyYW5zbGF0ZShWZWN0b3IzLlNDQUxFKF9tb2RlbEZCWC5TY2FsaW5nUGl2b3QsIC0xKSk7XHJcblxyXG4gICAgICBjb25zdCBtdHhXb3JsZFRyYW5zbGF0aW9uOiBNYXRyaXg0eDQgPSBwYXJlbnQgP1xyXG4gICAgICAgIE1hdHJpeDR4NC5UUkFOU0xBVElPTihNYXRyaXg0eDQuTVVMVElQTElDQVRJT04oXHJcbiAgICAgICAgICBwYXJlbnQubXR4V29ybGQsXHJcbiAgICAgICAgICBNYXRyaXg0eDQuVFJBTlNMQVRJT04obXR4VHJhbnNmb3JtLnRyYW5zbGF0aW9uKVxyXG4gICAgICAgICkudHJhbnNsYXRpb24pIDpcclxuICAgICAgICBNYXRyaXg0eDQuVFJBTlNMQVRJT04obXR4VHJhbnNmb3JtLnRyYW5zbGF0aW9uKTtcclxuXHJcbiAgICAgIG10eFRyYW5zZm9ybS5zZXQobXR4V29ybGRUcmFuc2xhdGlvbik7XHJcbiAgICAgIG10eFRyYW5zZm9ybS5tdWx0aXBseShtdHhXb3JsZFJvdGF0aW9uU2NhbGUpO1xyXG4gICAgICBfbm9kZS5tdHhXb3JsZC5zZXQobXR4VHJhbnNmb3JtKTtcclxuXHJcbiAgICAgIGlmIChwYXJlbnQpXHJcbiAgICAgICAgbXR4VHJhbnNmb3JtLm11bHRpcGx5KE1hdHJpeDR4NC5JTlZFUlNJT04ocGFyZW50Lm10eFdvcmxkKSwgdHJ1ZSk7XHJcbiAgICAgIF9ub2RlLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50VHJhbnNmb3JtKG10eFRyYW5zZm9ybSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0VHJhbnNmb3JtVmVjdG9yKF92ZWN0b3I6IFZlY3RvcjMgfCBGQlguQW5pbUN1cnZlTm9kZSwgX2RlZmF1bHQ6ICgpID0+IFZlY3RvcjMpOiBWZWN0b3IzIHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICBfdmVjdG9yID09IHVuZGVmaW5lZCA/XHJcbiAgICAgICAgICBfZGVmYXVsdCgpIDpcclxuICAgICAgICAgIF92ZWN0b3IgaW5zdGFuY2VvZiBWZWN0b3IzID9cclxuICAgICAgICAgICAgX3ZlY3RvciA6XHJcbiAgICAgICAgICAgIG5ldyBWZWN0b3IzKFxyXG4gICAgICAgICAgICAgIHR5cGVvZiAoX3ZlY3RvciA9IF92ZWN0b3IubG9hZCgpKS5kWCA9PSBcIm51bWJlclwiID9cclxuICAgICAgICAgICAgICAgIF92ZWN0b3IuZFggOlxyXG4gICAgICAgICAgICAgICAgKF92ZWN0b3IuZFgubG9hZCgpIGFzIEZCWC5BbmltQ3VydmUpLkRlZmF1bHQsXHJcbiAgICAgICAgICAgICAgdHlwZW9mIF92ZWN0b3IuZFkgPT0gXCJudW1iZXJcIiA/XHJcbiAgICAgICAgICAgICAgICBfdmVjdG9yLmRZIDpcclxuICAgICAgICAgICAgICAgIChfdmVjdG9yLmRZLmxvYWQoKSBhcyBGQlguQW5pbUN1cnZlKS5EZWZhdWx0LFxyXG4gICAgICAgICAgICAgIHR5cGVvZiBfdmVjdG9yLmRaID09IFwibnVtYmVyXCIgP1xyXG4gICAgICAgICAgICAgICAgX3ZlY3Rvci5kWiA6XHJcbiAgICAgICAgICAgICAgICAoX3ZlY3Rvci5kWi5sb2FkKCkgYXMgRkJYLkFuaW1DdXJ2ZSkuRGVmYXVsdFxyXG4gICAgICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRBbmltYXRpb25WZWN0b3IzKF9hbmltTm9kZTogRkJYLkFuaW1DdXJ2ZU5vZGUsIF90YXJnZXQ6IEZCWC5Nb2RlbCk6IEFuaW1hdGlvblN0cnVjdHVyZVZlY3RvcjMge1xyXG4gICAgICBjb25zdCB2ZWN0b3JTZXF1ZW5jZTogQW5pbWF0aW9uU3RydWN0dXJlVmVjdG9yMyA9IHt9O1xyXG4gICAgICBmb3IgKGNvbnN0IHZhbHVlTmFtZSBpbiBfYW5pbU5vZGUpIGlmICh2YWx1ZU5hbWUgPT0gXCJkWFwiIHx8IHZhbHVlTmFtZSA9PSBcImRZXCIgfHwgdmFsdWVOYW1lID09IFwiZFpcIikge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlOiBGQlguQW5pbUN1cnZlIHwgbnVtYmVyID0gX2FuaW1Ob2RlW3ZhbHVlTmFtZV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICBjb25zdCBzZXF1ZW5jZTogQW5pbWF0aW9uU2VxdWVuY2UgPSBuZXcgQW5pbWF0aW9uU2VxdWVuY2UoKTtcclxuICAgICAgICAgIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCB2YWx1ZS5LZXlUaW1lLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIC8vIEFjY29yZGluZyB0byB0aGUgcmVmZXJlbmNlIHRpbWUgaXMgZGVmaW5lZCBhcyBhIHNpZ25lZCBpbnQ2NCwgdW5pdCBiZWluZyAxLzQ2MTg2MTU4MDAwIHNlY29uZHNcclxuICAgICAgICAgICAgLy8gcmVmOiBodHRwczovL2FyY2hpdmUuYmxlbmRlci5vcmcvd2lraS9pbmRleC5waHAvVXNlcjpNb250MjkvRm91bmRhdGlvbi9GQlhfRmlsZV9TdHJ1Y3R1cmUvI1NvbWVfU3BlY2lmaWNfUHJvcGVydHlfVHlwZXNcclxuICAgICAgICAgICAgc2VxdWVuY2UuYWRkS2V5KG5ldyBBbmltYXRpb25LZXkoXHJcbiAgICAgICAgICAgICAgTnVtYmVyKCh2YWx1ZS5LZXlUaW1lW2ldIC0gdmFsdWUuS2V5VGltZS5yZWR1Y2UoKF9taW4sIF92KSA9PiBfdiA8IF9taW4gPyBfdiA6IF9taW4pKSAvIEJpZ0ludChcIjQ2MTg2MTU4XCIpKSxcclxuICAgICAgICAgICAgICB2YWx1ZS5LZXlWYWx1ZUZsb2F0W2ldXHJcbiAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmVjdG9yU2VxdWVuY2VbdmFsdWVOYW1lWzFdLnRvTG93ZXJDYXNlKCldID0gc2VxdWVuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoX2FuaW1Ob2RlLm5hbWUgPT0gXCJSXCIgJiYgKF90YXJnZXQuUHJlUm90YXRpb24gfHwgX3RhcmdldC5Qb3N0Um90YXRpb24pKSB7XHJcbiAgICAgICAgbGV0IHByZVJvdG90YXRpb246IE1hdHJpeDR4NDtcclxuICAgICAgICBpZiAoX3RhcmdldC5QcmVSb3RhdGlvbikgXHJcbiAgICAgICAgICBwcmVSb3RvdGF0aW9uID0gTWF0cml4NHg0LlJPVEFUSU9OKF90YXJnZXQuUHJlUm90YXRpb24pO1xyXG4gICAgICAgIGxldCBwb3N0Um90YXRpb246IE1hdHJpeDR4NDtcclxuICAgICAgICBpZiAoX3RhcmdldC5Qb3N0Um90YXRpb24pXHJcbiAgICAgICAgICBwb3N0Um90YXRpb24gPSBNYXRyaXg0eDQuUk9UQVRJT04oX3RhcmdldC5Qb3N0Um90YXRpb24pO1xyXG5cclxuICAgICAgICBbdmVjdG9yU2VxdWVuY2UueCwgdmVjdG9yU2VxdWVuY2UueSwgdmVjdG9yU2VxdWVuY2Uuel1cclxuICAgICAgICAgIC5mbGF0TWFwKF9zZXEgPT4gX3NlcT8uZ2V0S2V5cygpKVxyXG4gICAgICAgICAgLm1hcChfa2V5ID0+IF9rZXk/LnRpbWUpXHJcbiAgICAgICAgICAuc29ydCgoX3RpbWVBLCBfdGltZUIpID0+IF90aW1lQSAtIF90aW1lQikgLy8gc29ydCB0aW1lc1xyXG4gICAgICAgICAgLmZpbHRlcigoX3RpbWUsIF9pbmRleCwgX3RpbWVzKSA9PiBfdGltZSAhPSBfdGltZXNbX2luZGV4ICsgMV0pIC8vIHJlbW92ZSBkdXBsaWNhdGVzXHJcbiAgICAgICAgICAubWFwKF90aW1lID0+IHsgLy8gZmluZCBrZXlzIGZvciBhbGwgYXhlcyBhdCB0aW1lXHJcbiAgICAgICAgICAgIHJldHVybiB7IHg6IGZpbmRLZXkodmVjdG9yU2VxdWVuY2UueCksIHk6IGZpbmRLZXkodmVjdG9yU2VxdWVuY2UueSksIHo6IGZpbmRLZXkodmVjdG9yU2VxdWVuY2UueikgfTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gZmluZEtleShfc2VxdWVuY2U6IEFuaW1hdGlvblNlcXVlbmNlKTogQW5pbWF0aW9uS2V5IHtcclxuICAgICAgICAgICAgICByZXR1cm4gX3NlcXVlbmNlPy5nZXRLZXlzKCkuZmluZChfa2V5ID0+IF9rZXkudGltZSA9PSBfdGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZm9yRWFjaChfZnJhbWUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdmN0RXVsZXJBbmdsZXM6IFZlY3RvcjMgPSBSZWN5Y2xlci5nZXQoVmVjdG9yMyk7XHJcbiAgICAgICAgICAgIHZjdEV1bGVyQW5nbGVzLnNldChcclxuICAgICAgICAgICAgICBfZnJhbWUueD8udmFsdWUgPz8gMCxcclxuICAgICAgICAgICAgICBfZnJhbWUueT8udmFsdWUgPz8gMCxcclxuICAgICAgICAgICAgICBfZnJhbWUuej8udmFsdWUgPz8gMFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zdCBtdHhSb3RhdGlvbjogTWF0cml4NHg0ID0gTWF0cml4NHg0LlJPVEFUSU9OKHZjdEV1bGVyQW5nbGVzKTtcclxuICAgICAgICAgICAgaWYgKHByZVJvdG90YXRpb24pXHJcbiAgICAgICAgICAgICAgbXR4Um90YXRpb24ubXVsdGlwbHkocHJlUm90b3RhdGlvbiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGlmIChwb3N0Um90YXRpb24pXHJcbiAgICAgICAgICAgICAgbXR4Um90YXRpb24ubXVsdGlwbHkocG9zdFJvdGF0aW9uKTtcclxuICAgICAgICAgICAgdmN0RXVsZXJBbmdsZXMgPSBtdHhSb3RhdGlvbi5nZXRFdWxlckFuZ2xlcygpO1xyXG4gICAgICAgICAgICBpZiAoX2ZyYW1lLngpXHJcbiAgICAgICAgICAgICAgX2ZyYW1lLngudmFsdWUgPSB2Y3RFdWxlckFuZ2xlcy54O1xyXG4gICAgICAgICAgICBpZiAoX2ZyYW1lLnkpXHJcbiAgICAgICAgICAgICAgX2ZyYW1lLnkudmFsdWUgPSB2Y3RFdWxlckFuZ2xlcy55O1xyXG4gICAgICAgICAgICBpZiAoX2ZyYW1lLnopXHJcbiAgICAgICAgICAgICAgX2ZyYW1lLnoudmFsdWUgPSB2Y3RFdWxlckFuZ2xlcy56O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB2ZWN0b3JTZXF1ZW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldE9yZGVyZWQoX3JvdGF0aW9uOiBWZWN0b3IzLCBfbW9kZWxGQlg6IEZCWC5Nb2RlbCk6IFZlY3RvcjMge1xyXG4gICAgICBpZiAoIV9tb2RlbEZCWC5FdWxlck9yZGVyKVxyXG4gICAgICAgIHJldHVybiBfcm90YXRpb247XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBkYXRhOiBGbG9hdDMyQXJyYXkgPSBfcm90YXRpb24uZ2V0KCk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdDogVmVjdG9yMyA9IFJlY3ljbGVyLmdldChWZWN0b3IzKTtcclxuICAgICAgcmVzdWx0LnNldChcclxuICAgICAgICBkYXRhW19tb2RlbEZCWC5FdWxlck9yZGVyLmluZGV4T2YoXCJaXCIpXSxcclxuICAgICAgICBkYXRhW19tb2RlbEZCWC5FdWxlck9yZGVyLmluZGV4T2YoXCJZXCIpXSxcclxuICAgICAgICBkYXRhW19tb2RlbEZCWC5FdWxlck9yZGVyLmluZGV4T2YoXCJYXCIpXVxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG5cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlLkZCWCB7XHJcbiAgLyoqXHJcbiAgICogSW50ZXJmYWNlIHRvIHJlcHJlc2VudCBmYngtbm9kZXMgY29udGFpbmluZyBpdHMgbmFtZSwgY2hpbGRyZW4gYW5kIHByb3BlcnRpZXMuXHJcbiAgICogQ2hpbGRyZW4gYW5kIHByb3Blcml0ZXMgYXJlIGxhenkuXHJcbiAgICogQGF1dGhvciBNYXR0aGlhcyBSb21pbmcsIEhGVSwgMjAyM1xyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBOb2RlIHtcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcblxyXG4gICAgI2NoaWxkcmVuOiBOb2RlW107XHJcbiAgICAjcHJvcGVydGllczogTm9kZVByb3BlcnR5W107XHJcbiAgICBwcml2YXRlIGxvYWRQcm9wZXJ0aWVzOiAoKSA9PiBOb2RlUHJvcGVydHlbXTtcclxuICAgIHByaXZhdGUgbG9hZENoaWxkcmVuOiAoKSA9PiBOb2RlW107XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcsIF9sb2FkUHJvcGVydGllczogKCkgPT4gTm9kZVByb3BlcnR5W10sIF9sb2FkQ2hpbGRyZW46ICgpID0+IE5vZGVbXSkge1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgICAgdGhpcy5sb2FkUHJvcGVydGllcyA9IF9sb2FkUHJvcGVydGllcztcclxuICAgICAgdGhpcy5sb2FkQ2hpbGRyZW4gPSBfbG9hZENoaWxkcmVuO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcHJvcGVydGllcygpOiBOb2RlUHJvcGVydHlbXSB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNwcm9wZXJ0aWVzIHx8ICh0aGlzLiNwcm9wZXJ0aWVzID0gdGhpcy5sb2FkUHJvcGVydGllcygpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGNoaWxkcmVuKCk6IE5vZGVbXSB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNjaGlsZHJlbiB8fCAodGhpcy4jY2hpbGRyZW4gPSB0aGlzLmxvYWRDaGlsZHJlbigpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGV4cG9ydCB0eXBlIFByb3BlcnR5NzAgPSBib29sZWFuIHwgbnVtYmVyIHwgc3RyaW5nIHwgVmVjdG9yMztcclxuXHJcbiAgZXhwb3J0IHR5cGUgTm9kZVByb3BlcnR5ID0gYm9vbGVhbiB8IG51bWJlciB8IHN0cmluZyB8IFVpbnQ4QXJyYXkgfCBVaW50MTZBcnJheSB8IEZsb2F0MzJBcnJheTtcclxuXHJcbiAgZXhwb3J0IGVudW0gQXJyYXlFbmNvZGluZyB7XHJcbiAgICBVTkNPTVBSRVNTRUQsIENPTVBSRVNTRURcclxuICB9XHJcbiAgXHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlLkZCWCB7XHJcbiAgLyoqXHJcbiAgICogTG9hZHMgYW4gZmJ4IGZpbGUgZnJvbSBpdHMgZmJ4LW5vZGUgYXJyYXkgd2hpY2ggbWF5IGJlIHJldHJpZXZlZCBieSBwYXJzZU5vZGVzRnJvbUJpbmFyeS5cclxuICAgKiBAYXV0aG9yIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIGxvYWRGcm9tTm9kZXMoX25vZGVzOiBOb2RlW10pOiBGQlgge1xyXG4gICAgY29uc3QgZmJ4OiBGQlggPSB7XHJcbiAgICAgIGRvY3VtZW50czogdW5kZWZpbmVkLFxyXG4gICAgICBvYmplY3RzOiB7XHJcbiAgICAgICAgYWxsOiB1bmRlZmluZWQsXHJcbiAgICAgICAgbW9kZWxzOiBbXSxcclxuICAgICAgICBnZW9tZXRyaWVzOiBbXSxcclxuICAgICAgICBtYXRlcmlhbHM6IFtdLFxyXG4gICAgICAgIHBvc2VzOiBbXSxcclxuICAgICAgICB0ZXh0dXJlczogW10sXHJcbiAgICAgICAgYW5pbVN0YWNrczogW11cclxuICAgICAgfSxcclxuICAgICAgY29ubmVjdGlvbnM6IHVuZGVmaW5lZFxyXG4gICAgfTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2YgX25vZGVzKSB7XHJcbiAgICAgIGlmIChub2RlLm5hbWUgPT0gXCJEb2N1bWVudHNcIilcclxuICAgICAgICBmYnguZG9jdW1lbnRzID0gbm9kZS5jaGlsZHJlblxyXG4gICAgICAgICAgLmZpbHRlcihfZG9jdW1lbnROb2RlID0+IF9kb2N1bWVudE5vZGUubmFtZSA9PSBcIkRvY3VtZW50XCIpXHJcbiAgICAgICAgICAubWFwKF9kb2N1bWVudE5vZGUgPT4gZ2V0RG9jdW1lbnQoX2RvY3VtZW50Tm9kZSkpO1xyXG4gICAgICBlbHNlIGlmIChub2RlLm5hbWUgPT0gXCJPYmplY3RzXCIpXHJcbiAgICAgICAgZmJ4Lm9iamVjdHMuYWxsID0gbm9kZS5jaGlsZHJlbi5tYXAoX29iamVjdE5vZGUgPT4gZ2V0T2JqZWN0KF9vYmplY3ROb2RlLCBmYngpKTtcclxuICAgICAgZWxzZSBpZiAobm9kZS5uYW1lID09IFwiQ29ubmVjdGlvbnNcIilcclxuICAgICAgICBmYnguY29ubmVjdGlvbnMgPSBub2RlLmNoaWxkcmVuLm1hcChfY29ubmVjdGlvbk5vZGUgPT4gZ2V0Q29ubmVjdGlvbihfY29ubmVjdGlvbk5vZGUpKTtcclxuICAgICAgaWYgKGZieC5kb2N1bWVudHMgJiYgZmJ4Lm9iamVjdHMuYWxsICYmIGZieC5jb25uZWN0aW9ucylcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBncm91cE9iamVjdHMoZmJ4KTtcclxuICAgIGFwcGx5Q29ubmVjdGlvbnMoZmJ4LmNvbm5lY3Rpb25zLCBmYnguZG9jdW1lbnRzLCBmYngub2JqZWN0cy5hbGwpO1xyXG5cclxuICAgIHJldHVybiBmYng7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXREb2N1bWVudChfbm9kZTogTm9kZSk6IERvY3VtZW50IHtcclxuICAgIGNvbnN0IGRvY3VtZW50OiBPYmplY3QgPSB7XHJcbiAgICAgIHVpZDogX25vZGUucHJvcGVydGllc1swXSBhcyBudW1iZXIsXHJcbiAgICAgIG5hbWU6IF9ub2RlLnByb3BlcnRpZXNbMl0gYXMgc3RyaW5nLFxyXG4gICAgICBsb2FkZWQ6IGZhbHNlLFxyXG4gICAgICBsb2FkOiAoKSA9PiBsb2FkT2JqZWN0UHJvcGVydGllcyhfbm9kZSwgZG9jdW1lbnQpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGRvY3VtZW50O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0T2JqZWN0KF9ub2RlOiBOb2RlLCBfZmJ4OiBGQlgpOiBPYmplY3Qge1xyXG4gICAgY29uc3QgbmFtZUFuZFR5cGU6IHN0cmluZ1tdID0gKF9ub2RlLnByb3BlcnRpZXNbMV0gYXMgc3RyaW5nKS5zcGxpdChcIjo6XCIpO1xyXG4gICAgY29uc3Qgb2JqZWN0OiBPYmplY3QgPSB7XHJcbiAgICAgIHVpZDogX25vZGUucHJvcGVydGllc1swXSBhcyBudW1iZXIsXHJcbiAgICAgIG5hbWU6IG5hbWVBbmRUeXBlWzBdLFxyXG4gICAgICB0eXBlOiBuYW1lQW5kVHlwZVsxXSxcclxuICAgICAgc3VidHlwZTogX25vZGUucHJvcGVydGllc1syXSBhcyBzdHJpbmcsXHJcbiAgICAgIGxvYWRlZDogZmFsc2UsXHJcbiAgICAgIGxvYWQ6ICgpID0+IGxvYWRPYmplY3RQcm9wZXJ0aWVzKF9ub2RlLCBvYmplY3QpXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIG9iamVjdDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdyb3VwT2JqZWN0cyhfZmJ4OiBGQlgpOiB2b2lkIHtcclxuICAgIGZvciAoY29uc3Qgb2JqZWN0IG9mIF9mYngub2JqZWN0cy5hbGwpIHtcclxuICAgICAgaWYgKG9iamVjdC50eXBlID09IFwiTW9kZWxcIilcclxuICAgICAgICBfZmJ4Lm9iamVjdHMubW9kZWxzLnB1c2gob2JqZWN0KTtcclxuICAgICAgZWxzZSBpZiAob2JqZWN0LnR5cGUgPT0gXCJHZW9tZXRyeVwiKVxyXG4gICAgICAgIF9mYngub2JqZWN0cy5nZW9tZXRyaWVzLnB1c2gob2JqZWN0KTtcclxuICAgICAgZWxzZSBpZiAob2JqZWN0LnR5cGUgPT0gXCJNYXRlcmlhbFwiKVxyXG4gICAgICAgIF9mYngub2JqZWN0cy5tYXRlcmlhbHMucHVzaChvYmplY3QpO1xyXG4gICAgICBlbHNlIGlmIChvYmplY3QudHlwZSA9PSBcIlBvc2VcIilcclxuICAgICAgICBfZmJ4Lm9iamVjdHMucG9zZXMucHVzaChvYmplY3QpO1xyXG4gICAgICBlbHNlIGlmIChvYmplY3QudHlwZSA9PSBcIlRleHR1cmVcIilcclxuICAgICAgICBfZmJ4Lm9iamVjdHMudGV4dHVyZXMucHVzaChvYmplY3QpO1xyXG4gICAgICBlbHNlIGlmIChvYmplY3QudHlwZSA9PSBcIkFuaW1TdGFja1wiKVxyXG4gICAgICAgIF9mYngub2JqZWN0cy5hbmltU3RhY2tzLnB1c2gob2JqZWN0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldENvbm5lY3Rpb24oX25vZGU6IE5vZGUpOiBDb25uZWN0aW9uIHtcclxuICAgIGlmICghKF9ub2RlLnByb3BlcnRpZXNbMF0gPT0gXCJPT1wiIHx8IF9ub2RlLnByb3BlcnRpZXNbMF0gPT0gXCJPUFwiKSkge1xyXG4gICAgICBjb25zb2xlLndhcm4oYENvbm5lY3Rpb24gdHlwZSAke19ub2RlLnByb3BlcnRpZXNbMF19IGlzIG5vdCBzdXBwb3J0ZWRgKTtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjaGlsZFVJRDogX25vZGUucHJvcGVydGllc1sxXSBhcyBudW1iZXIsXHJcbiAgICAgIHBhcmVudFVJRDogX25vZGUucHJvcGVydGllc1syXSBhcyBudW1iZXIsXHJcbiAgICAgIHByb3BlcnR5TmFtZTogX25vZGUucHJvcGVydGllc1swXSA9PSBcIk9QXCIgPyBfbm9kZS5wcm9wZXJ0aWVzWzNdIGFzIHN0cmluZyA6IG51bGxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhcHBseUNvbm5lY3Rpb25zKF9jb25uZWN0aW9uczogQ29ubmVjdGlvbltdLCBfZG9jdW1lbnRzOiBEb2N1bWVudFtdLCBfb2JqZWN0czogT2JqZWN0W10pOiB2b2lkIHtcclxuICAgIGZvciAoY29uc3QgY29ubmVjdGlvbiBvZiBfY29ubmVjdGlvbnMpIHtcclxuICAgICAgbGV0IHBhcmVudDogT2JqZWN0ID0gX2RvY3VtZW50cy5maW5kKF9kb2N1bWVudCA9PiBfZG9jdW1lbnQubG9hZCgpLlJvb3ROb2RlID09IGNvbm5lY3Rpb24ucGFyZW50VUlEKSBhcyBPYmplY3Q7XHJcbiAgICAgIGxldCBjaGlsZDogT2JqZWN0O1xyXG4gICAgICBmb3IgKGNvbnN0IG9iamVjdCBvZiBfb2JqZWN0cykge1xyXG4gICAgICAgIGlmIChwYXJlbnQgPT0gdW5kZWZpbmVkICYmIG9iamVjdC51aWQgPT0gY29ubmVjdGlvbi5wYXJlbnRVSUQpXHJcbiAgICAgICAgICBwYXJlbnQgPSBvYmplY3Q7XHJcbiAgICAgICAgaWYgKGNoaWxkID09IHVuZGVmaW5lZCAmJiBvYmplY3QudWlkID09IGNvbm5lY3Rpb24uY2hpbGRVSUQpXHJcbiAgICAgICAgICBjaGlsZCA9IG9iamVjdDtcclxuICAgICAgICBpZiAocGFyZW50ICE9IHVuZGVmaW5lZCAmJiBjaGlsZCAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBpZiAoY2hpbGQpXHJcbiAgICAgICAgKGNoaWxkLnBhcmVudHMgfHwgKGNoaWxkLnBhcmVudHMgPSBbXSkpLnB1c2gocGFyZW50KTtcclxuICAgICAgaWYgKGNvbm5lY3Rpb24ucHJvcGVydHlOYW1lID09IG51bGwpXHJcbiAgICAgICAgKHBhcmVudC5jaGlsZHJlbiB8fCAocGFyZW50LmNoaWxkcmVuID0gW10pKS5wdXNoKGNoaWxkKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIChwYXJlbnQgYXMgT2JqZWN0KVtmb3JtYXRQcm9wZXJ0eU5hbWUoY29ubmVjdGlvbi5wcm9wZXJ0eU5hbWUpXSA9IGNoaWxkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbG9hZE9iamVjdFByb3BlcnRpZXMoX25vZGU6IE5vZGUsIF9vYmplY3Q6IE9iamVjdCk6IE9iamVjdCB7XHJcbiAgICBpZiAoX29iamVjdC5sb2FkZWQpXHJcbiAgICAgIHJldHVybiBfb2JqZWN0O1xyXG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBfbm9kZS5jaGlsZHJlbikge1xyXG4gICAgICBpZiAoY2hpbGQubmFtZSA9PSBcIlByb3BlcnRpZXM3MFwiKVxyXG4gICAgICAgIGZvciAoY29uc3QgcHJvcGVydHk3MCBvZiBjaGlsZC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgY29uc3QgbmFtZTogc3RyaW5nID0gZm9ybWF0UHJvcGVydHlOYW1lKHByb3BlcnR5NzAucHJvcGVydGllc1swXSBhcyBzdHJpbmcpO1xyXG4gICAgICAgICAgaWYgKCFfb2JqZWN0W25hbWVdKVxyXG4gICAgICAgICAgICBfb2JqZWN0W25hbWVdID0gZ2V0UHJvcGVydHk3MFZhbHVlKHByb3BlcnR5NzApO1xyXG4gICAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbmFtZTogc3RyaW5nID0gZm9ybWF0UHJvcGVydHlOYW1lKGNoaWxkLm5hbWUpO1xyXG4gICAgICAgIGlmICghX29iamVjdFtuYW1lXSlcclxuICAgICAgICAgIF9vYmplY3RbbmFtZV0gPSBnZXRQcm9wZXJ0eVZhbHVlKGNoaWxkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgX29iamVjdC5sb2FkZWQgPSB0cnVlO1xyXG4gICAgcmV0dXJuIF9vYmplY3Q7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRQcm9wZXJ0eVZhbHVlKF9ub2RlOiBOb2RlKTogTm9kZVByb3BlcnR5IHwgT2JqZWN0IHtcclxuICAgIHJldHVybiBfbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwXHJcbiAgICA/IF9ub2RlLmNoaWxkcmVuLnJlZHVjZShcclxuICAgICAgKF9zdWJQcm9wZXJ0aWVzLCBfc3ViUHJvcGVydHkpID0+IHtcclxuICAgICAgICBjb25zdCBuYW1lOiBzdHJpbmcgPSBmb3JtYXRQcm9wZXJ0eU5hbWUoX3N1YlByb3BlcnR5Lm5hbWUpO1xyXG4gICAgICAgIGlmIChfc3ViUHJvcGVydGllc1tuYW1lXSA9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBfc3ViUHJvcGVydGllc1tuYW1lXSA9IGdldFByb3BlcnR5VmFsdWUoX3N1YlByb3BlcnR5KTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGlmICghKF9zdWJQcm9wZXJ0aWVzW25hbWVdIGluc3RhbmNlb2YgQXJyYXkpKVxyXG4gICAgICAgICAgICBfc3ViUHJvcGVydGllc1tuYW1lXSA9IFtfc3ViUHJvcGVydGllc1tuYW1lXSBhcyBPYmplY3RdO1xyXG4gICAgICAgICAgKF9zdWJQcm9wZXJ0aWVzW25hbWVdIGFzIE9iamVjdFtdKS5wdXNoKGdldFByb3BlcnR5VmFsdWUoX3N1YlByb3BlcnR5KSBhcyBPYmplY3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX3N1YlByb3BlcnRpZXM7XHJcbiAgICAgIH0sXHJcbiAgICAgIHt9IGFzIE9iamVjdFxyXG4gICAgKVxyXG4gICAgOiBfbm9kZS5wcm9wZXJ0aWVzWzBdO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0UHJvcGVydHk3MFZhbHVlKF9ub2RlOiBOb2RlKTogUHJvcGVydHk3MCB7XHJcbiAgICBzd2l0Y2ggKF9ub2RlLnByb3BlcnRpZXNbMV0gYXMgc3RyaW5nKSB7XHJcbiAgICAgIGNhc2UgXCJib29sXCI6XHJcbiAgICAgICAgcmV0dXJuIF9ub2RlLnByb3BlcnRpZXNbNF0gYXMgYm9vbGVhbjtcclxuXHJcbiAgICAgIGNhc2UgXCJpbnRcIjpcclxuICAgICAgY2FzZSBcImVudW1cIjpcclxuICAgICAgY2FzZSBcIlVMb25nTG9uZ1wiOlxyXG4gICAgICBjYXNlIFwiZG91YmxlXCI6XHJcbiAgICAgIGNhc2UgXCJOdW1iZXJcIjpcclxuICAgICAgY2FzZSBcIkZpZWxkT2ZWaWV3XCI6XHJcbiAgICAgICAgcmV0dXJuIF9ub2RlLnByb3BlcnRpZXNbNF0gYXMgbnVtYmVyO1xyXG5cclxuICAgICAgY2FzZSBcIkNvbG9yXCI6XHJcbiAgICAgIGNhc2UgXCJDb2xvclJHQlwiOlxyXG4gICAgICBjYXNlIFwiVmVjdG9yM0RcIjpcclxuICAgICAgY2FzZSBcIkxjbCBUcmFuc2xhdGlvblwiOlxyXG4gICAgICBjYXNlIFwiTGNsIFJvdGF0aW9uXCI6XHJcbiAgICAgIGNhc2UgXCJMY2wgU2NhbGluZ1wiOlxyXG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMyguLi5fbm9kZS5wcm9wZXJ0aWVzLnNsaWNlKDQsIDcpIGFzIG51bWJlcltdKTtcclxuICAgICAgXHJcbiAgICAgIGNhc2UgXCJLU3RyaW5nXCI6XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIF9ub2RlLnByb3BlcnRpZXNbNF0gYXMgc3RyaW5nO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZm9ybWF0UHJvcGVydHlOYW1lKF9uYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIF9uYW1lLnJlcGxhY2UoL1teYS16QS1aXS8sIFwiXCIpO1xyXG4gIH1cclxuXHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlLkZCWCB7XHJcbiAgLyoqXHJcbiAgICogUGFyc2VzIGZieC1ub2RlcyBhcnJheSBmcm9tIGEgYmluYXJ5IGZieC1maWxlLlxyXG4gICAqIGRlc3BpdGUgdGhlIGxhenkgbm9kZSBpbXBsZW1lbnRhdGlvbiBpdCBpcyBtb3N0bHkgYSBjb3B5IG9mIHRoZSByZWZlcmVuY2U6IGh0dHBzOi8vZ2l0aHViLmNvbS9waWNvZGU3L2ZieC1wYXJzZXJcclxuICAgKiBAYXV0aG9yIE1hdHRoaWFzIFJvbWluZywgSEZVLCAyMDIzXHJcbiAgICovXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTm9kZXNGcm9tQmluYXJ5KF9idWZmZXI6IEFycmF5QnVmZmVyKTogTm9kZVtdIHtcclxuICAgIGlmIChfYnVmZmVyLmJ5dGVMZW5ndGggPCBiaW5hcnlTdGFydENoYXJzLmxlbmd0aClcclxuICAgICAgdGhyb3cgXCJOb3QgYSBiaW5hcnkgRkJYIGZpbGVcIjtcclxuICAgIFxyXG4gICAgY29uc3QgZGF0YTogQnVmZmVyUmVhZGVyID0gbmV3IEJ1ZmZlclJlYWRlcihfYnVmZmVyKTtcclxuICAgIGNvbnN0IGZpcnN0Q2hhcnM6IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShkYXRhLmdldFNlcXVlbmNlKGRhdGEuZ2V0VWludDgsIGJpbmFyeVN0YXJ0Q2hhcnMubGVuZ3RoKSk7XHJcbiAgICBjb25zdCBtYXRjaGVzRkJYQmluYXJ5Rmlyc3RDaGFyczogYm9vbGVhblxyXG4gICAgICA9IGZpcnN0Q2hhcnMuZXZlcnkoKF92YWx1ZSwgX2luZGV4KSAgPT4gX3ZhbHVlID09IGJpbmFyeVN0YXJ0Q2hhcnNbX2luZGV4XSk7ICAgIFxyXG4gICAgaWYgKCFtYXRjaGVzRkJYQmluYXJ5Rmlyc3RDaGFycylcclxuICAgICAgdGhyb3cgXCJOb3QgYSBiaW5hcnkgRkJYIGZpbGVcIjtcclxuXHJcbiAgICBjb25zdCB2ZXJzaW9uOiBudW1iZXIgPSBkYXRhLmdldFVpbnQzMigpO1xyXG4gICAgY29uc3Qgbm9kZUF0dHJpYnV0ZXNBc1VJbnQ2NDogYm9vbGVhbiA9IHZlcnNpb24gPj0gNzUwMDsgLy8gV2FydW0gPj0gNzUwMD9cclxuICAgIGNvbnN0IG5vZGVzOiBOb2RlW10gPSBbXTtcclxuICBcclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIGNvbnN0IG5vZGU6IE5vZGUgPSByZWFkTm9kZShkYXRhLCBub2RlQXR0cmlidXRlc0FzVUludDY0KTtcclxuICAgICAgaWYgKG5vZGUgPT0gbnVsbCkgYnJlYWs7XHJcbiAgICAgIG5vZGVzLnB1c2gobm9kZSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICByZXR1cm4gbm9kZXM7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZWFkTm9kZShfZGF0YTogQnVmZmVyUmVhZGVyLCBfYXR0cmlidXRlc0FzVWludDY0OiBib29sZWFuKTogTm9kZSB7XHJcbiAgICBjb25zdCBlbmRPZmZzZXQ6IG51bWJlciA9IF9hdHRyaWJ1dGVzQXNVaW50NjQgPyBOdW1iZXIoX2RhdGEuZ2V0VWludDY0KCkpIDogX2RhdGEuZ2V0VWludDMyKCk7XHJcbiAgICBpZiAoZW5kT2Zmc2V0ID09IDApXHJcbiAgICAgIHJldHVybiBudWxsO1xyXG5cclxuICAgIGNvbnN0IHByb3BlcnRpZXNMZW5ndGg6IG51bWJlciA9IF9hdHRyaWJ1dGVzQXNVaW50NjQgPyBOdW1iZXIoX2RhdGEuZ2V0VWludDY0KCkpIDogX2RhdGEuZ2V0VWludDMyKCk7XHJcbiAgICBjb25zdCBwcm9wZXJ0aWVzQnl0ZUxlbmd0aDogbnVtYmVyID0gX2F0dHJpYnV0ZXNBc1VpbnQ2NCA/IE51bWJlcihfZGF0YS5nZXRVaW50NjQoKSkgOiBfZGF0YS5nZXRVaW50MzIoKTtcclxuICAgIGNvbnN0IG5hbWVMZW5ndGg6IG51bWJlciA9IF9kYXRhLmdldFVpbnQ4KCk7XHJcbiAgICBjb25zdCBuYW1lOiBzdHJpbmcgPSBfZGF0YS5nZXRTdHJpbmcobmFtZUxlbmd0aCk7XHJcbiAgICBjb25zdCBwcm9wZXJ0aWVzT2Zmc2V0OiBudW1iZXIgPSBfZGF0YS5vZmZzZXQ7XHJcbiAgICBjb25zdCBjaGlsZHJlbk9mZnNldDogbnVtYmVyID0gcHJvcGVydGllc09mZnNldCArIHByb3BlcnRpZXNCeXRlTGVuZ3RoO1xyXG5cclxuICAgIGNvbnN0IG5vZGU6IE5vZGUgPSBuZXcgTm9kZShcclxuICAgICAgbmFtZSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIF9kYXRhLm9mZnNldCA9IHByb3BlcnRpZXNPZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgcHJvcGVydGllczogTm9kZVByb3BlcnR5W10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpUHJvcGVydHk6IG51bWJlciA9IDA7IGlQcm9wZXJ0eSA8IHByb3BlcnRpZXNMZW5ndGg7IGlQcm9wZXJ0eSsrKSB7XHJcbiAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2gocmVhZFByb3BlcnR5KF9kYXRhKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9wZXJ0aWVzO1xyXG4gICAgICB9LCBcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIF9kYXRhLm9mZnNldCA9IGNoaWxkcmVuT2Zmc2V0O1xyXG4gICAgICAgIGNvbnN0IGNoaWxkcmVuOiBOb2RlW10gPSBbXTtcclxuICAgICAgICB3aGlsZSAoZW5kT2Zmc2V0IC0gX2RhdGEub2Zmc2V0ID4gbnVsbENvdW50QXROb2RlRW5kKSB7XHJcbiAgICAgICAgICBjb25zdCBjaGlsZDogRkJYLk5vZGUgPSByZWFkTm9kZShfZGF0YSwgX2F0dHJpYnV0ZXNBc1VpbnQ2NCk7XHJcbiAgICAgICAgICBpZiAoY2hpbGQpIGNoaWxkcmVuLnB1c2goY2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2hpbGRyZW47XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICBcclxuICAgIF9kYXRhLm9mZnNldCA9IGVuZE9mZnNldDtcclxuXHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlYWRQcm9wZXJ0eShfZGF0YTogQnVmZmVyUmVhZGVyKTogRkJYLk5vZGVQcm9wZXJ0eSB7XHJcbiAgICBjb25zdCB0eXBlQ29kZTogc3RyaW5nID0gX2RhdGEuZ2V0Q2hhcigpO1xyXG5cclxuICAgIGNvbnN0IHZhbHVlOiBGQlguTm9kZVByb3BlcnR5ID0ge1xyXG4gICAgICBDOiBfZGF0YS5nZXRCb29sLFxyXG4gICAgICBZOiBfZGF0YS5nZXRJbnQxNixcclxuICAgICAgSTogX2RhdGEuZ2V0SW50MzIsXHJcbiAgICAgIEw6IF9kYXRhLmdldEludDY0LFxyXG4gICAgICBGOiBfZGF0YS5nZXRGbG9hdDMyLFxyXG4gICAgICBEOiBfZGF0YS5nZXRGbG9hdDY0LFxyXG4gICAgICBTOiAoKSA9PiBfZGF0YS5nZXRTdHJpbmcoX2RhdGEuZ2V0VWludDMyKCkpLnJlcGxhY2UoXCJcXHgwMFxceDAxXCIsIFwiOjpcIiksXHJcbiAgICAgIHM6ICgpID0+IF9kYXRhLmdldFN0cmluZyhfZGF0YS5nZXRVaW50MzIoKSkucmVwbGFjZShcIlxceDAwXFx4MDFcIiwgXCI6OlwiKSxcclxuICAgICAgUjogKCkgPT4gbmV3IFVpbnQ4QXJyYXkocmVhZFJhdyhfZGF0YSwgX2RhdGEuZ2V0VWludDgpKSxcclxuICAgICAgcjogKCkgPT4gbmV3IFVpbnQ4QXJyYXkocmVhZEFycmF5KF9kYXRhLCBfZGF0YS5nZXRVaW50OCkpLFxyXG4gICAgICBiOiAoKSA9PiBuZXcgVWludDhBcnJheShyZWFkQXJyYXkoX2RhdGEsIF9kYXRhLmdldFVpbnQ4KSksXHJcbiAgICAgIGk6ICgpID0+IG5ldyBJbnQzMkFycmF5KHJlYWRBcnJheShfZGF0YSwgX2RhdGEuZ2V0SW50MzIpKSxcclxuICAgICAgbDogKCkgPT4gbmV3IEJpZ0ludDY0QXJyYXkocmVhZEFycmF5KF9kYXRhLCBfZGF0YS5nZXRJbnQ2NCkpLFxyXG4gICAgICBmOiAoKSA9PiBuZXcgRmxvYXQzMkFycmF5KHJlYWRBcnJheShfZGF0YSwgX2RhdGEuZ2V0RmxvYXQzMikpLFxyXG4gICAgICBkOiAoKSA9PiBuZXcgRmxvYXQzMkFycmF5KHJlYWRBcnJheShfZGF0YSwgX2RhdGEuZ2V0RmxvYXQ2NCkpXHJcbiAgICB9W3R5cGVDb2RlXT8uY2FsbChfZGF0YSk7XHJcblxyXG4gICAgaWYgKHZhbHVlID09IG51bGwpXHJcbiAgICAgIERlYnVnLndhcm4oYFVua25vd24gcHJvcGVydHkgdHlwZSAke3R5cGVDb2RlLmNoYXJDb2RlQXQoMCl9YCk7XHJcbiAgICBcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlYWRBcnJheTxUIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50PihfZGF0YTogQnVmZmVyUmVhZGVyLCBfZ2V0dGVyOiAoKSA9PiBUKTogR2VuZXJhdG9yPFQ+IHtcclxuICAgIGNvbnN0IGxlbmd0aDogbnVtYmVyID0gX2RhdGEuZ2V0VWludDMyKCk7XHJcbiAgICBjb25zdCBlbmNvZGluZzogRkJYLkFycmF5RW5jb2RpbmcgPSBfZGF0YS5nZXRVaW50MzIoKTtcclxuICAgIGNvbnN0IGJ5dGVMZW5ndGg6IG51bWJlciA9IF9kYXRhLmdldFVpbnQzMigpO1xyXG4gICAgY29uc3QgZW5kT2Zmc2V0OiBudW1iZXIgPSBfZGF0YS5vZmZzZXQgKyBieXRlTGVuZ3RoO1xyXG5cclxuICAgIGNvbnN0IGl0ZXJhYmxlOiBHZW5lcmF0b3I8VD4gPSBlbmNvZGluZyA9PSBGQlguQXJyYXlFbmNvZGluZy5DT01QUkVTU0VEID9cclxuICAgICAgKCgpID0+IHtcclxuICAgICAgICBjb25zdCBhcnJheURhdGE6IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShfZGF0YS52aWV3LmJ1ZmZlciwgX2RhdGEub2Zmc2V0LCBieXRlTGVuZ3RoKTtcclxuICAgICAgICBjb25zdCBpbmZsYXRlZERhdGE6IFVpbnQ4QXJyYXkgPSAoUmVmbGVjdC5nZXQoZ2xvYmFsVGhpcywgXCJwYWtvXCIpID8gcGFrby5pbmZsYXRlIDogZmZsYXRlLmluZmxhdGVTeW5jKShhcnJheURhdGEpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQnVmZmVyUmVhZGVyKGluZmxhdGVkRGF0YS5idWZmZXIpLmdldFNlcXVlbmNlKF9nZXR0ZXIsIGxlbmd0aCk7XHJcbiAgICAgIH0pKCkgOlxyXG4gICAgICBfZGF0YS5nZXRTZXF1ZW5jZShfZ2V0dGVyLCBsZW5ndGgpO1xyXG4gICAgXHJcbiAgICBfZGF0YS5vZmZzZXQgPSBlbmRPZmZzZXQ7XHJcblxyXG4gICAgcmV0dXJuIGl0ZXJhYmxlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVhZFJhdzxUIGV4dGVuZHMgbnVtYmVyIHwgYmlnaW50PihfZGF0YTogQnVmZmVyUmVhZGVyLCBfZ2V0dGVyOiAoKSA9PiBUKTogR2VuZXJhdG9yPFQ+IHtcclxuICAgIC8vIHJhdyBiaW5hcnkgZGF0YSBuZWVkcyB0byBiZSBpbnRlcnByZXRlZCBpbiBhIHNwZWNpYWwgd2F5IHNlZTpcclxuICAgIC8vIGh0dHBzOi8vY29kZS5ibGVuZGVyLm9yZy8yMDEzLzA4L2ZieC1iaW5hcnktZmlsZS1mb3JtYXQtc3BlY2lmaWNhdGlvbi9cclxuICAgIGNvbnN0IGxlbmd0aDogbnVtYmVyID0gX2RhdGEuZ2V0VWludDMyKCk7XHJcbiAgICByZXR1cm4gX2RhdGEuZ2V0U2VxdWVuY2UoX2dldHRlciwgbGVuZ3RoKTs7XHJcbiAgfVxyXG5cclxuICBjb25zdCBiaW5hcnlTdGFydENoYXJzOiBVaW50OEFycmF5XHJcbiAgICA9IFVpbnQ4QXJyYXkuZnJvbShcIktheWRhcmEgRkJYIEJpbmFyeVxceDIwXFx4MjBcXHgwMFxceDFhXFx4MDBcIi5zcGxpdChcIlwiKSwgKHYpID0+IHYuY2hhckNvZGVBdCgwKSk7XHJcblxyXG4gIGNvbnN0IG51bGxDb3VudEF0Tm9kZUVuZDogbnVtYmVyID0gMTM7XHJcblxyXG59IiwibmFtZXNwYWNlIEdMVEYge1xyXG4gIGV4cG9ydCB0eXBlIEdsVGZJZCA9IG51bWJlcjtcclxuICAvKipcclxuICAgKiBBbiBvYmplY3QgcG9pbnRpbmcgdG8gYSBidWZmZXIgdmlldyBjb250YWluaW5nIHRoZSBpbmRpY2VzIG9mIGRldmlhdGluZyBhY2Nlc3NvciB2YWx1ZXMuIFRoZSBudW1iZXIgb2YgaW5kaWNlcyBpcyBlcXVhbCB0byBgYWNjZXNzb3Iuc3BhcnNlLmNvdW50YC4gSW5kaWNlcyAqKk1VU1QqKiBzdHJpY3RseSBpbmNyZWFzZS5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEFjY2Vzc29yU3BhcnNlSW5kaWNlcyB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYnVmZmVyIHZpZXcgd2l0aCBzcGFyc2UgaW5kaWNlcy4gVGhlIHJlZmVyZW5jZWQgYnVmZmVyIHZpZXcgKipNVVNUIE5PVCoqIGhhdmUgaXRzIGB0YXJnZXRgIG9yIGBieXRlU3RyaWRlYCBwcm9wZXJ0aWVzIGRlZmluZWQuIFRoZSBidWZmZXIgdmlldyBhbmQgdGhlIG9wdGlvbmFsIGBieXRlT2Zmc2V0YCAqKk1VU1QqKiBiZSBhbGlnbmVkIHRvIHRoZSBgY29tcG9uZW50VHlwZWAgYnl0ZSBsZW5ndGguXHJcbiAgICAgKi9cclxuICAgIFwiYnVmZmVyVmlld1wiOiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBvZmZzZXQgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIHRoZSBidWZmZXIgdmlldyBpbiBieXRlcy5cclxuICAgICAqL1xyXG4gICAgXCJieXRlT2Zmc2V0XCI/OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRpY2VzIGRhdGEgdHlwZS5cclxuICAgICAqL1xyXG4gICAgXCJjb21wb25lbnRUeXBlXCI6IG51bWJlciB8IG51bWJlciB8IG51bWJlciB8IG51bWJlcjtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEFuIG9iamVjdCBwb2ludGluZyB0byBhIGJ1ZmZlciB2aWV3IGNvbnRhaW5pbmcgdGhlIGRldmlhdGluZyBhY2Nlc3NvciB2YWx1ZXMuIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgaXMgZXF1YWwgdG8gYGFjY2Vzc29yLnNwYXJzZS5jb3VudGAgdGltZXMgbnVtYmVyIG9mIGNvbXBvbmVudHMuIFRoZSBlbGVtZW50cyBoYXZlIHRoZSBzYW1lIGNvbXBvbmVudCB0eXBlIGFzIHRoZSBiYXNlIGFjY2Vzc29yLiBUaGUgZWxlbWVudHMgYXJlIHRpZ2h0bHkgcGFja2VkLiBEYXRhICoqTVVTVCoqIGJlIGFsaWduZWQgZm9sbG93aW5nIHRoZSBzYW1lIHJ1bGVzIGFzIHRoZSBiYXNlIGFjY2Vzc29yLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQWNjZXNzb3JTcGFyc2VWYWx1ZXMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGJ1ZmZlclZpZXcgd2l0aCBzcGFyc2UgdmFsdWVzLiBUaGUgcmVmZXJlbmNlZCBidWZmZXIgdmlldyAqKk1VU1QgTk9UKiogaGF2ZSBpdHMgYHRhcmdldGAgb3IgYGJ5dGVTdHJpZGVgIHByb3BlcnRpZXMgZGVmaW5lZC5cclxuICAgICAqL1xyXG4gICAgXCJidWZmZXJWaWV3XCI6IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG9mZnNldCByZWxhdGl2ZSB0byB0aGUgc3RhcnQgb2YgdGhlIGJ1ZmZlclZpZXcgaW4gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIFwiYnl0ZU9mZnNldFwiPzogbnVtYmVyO1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogU3BhcnNlIHN0b3JhZ2Ugb2YgYWNjZXNzb3IgdmFsdWVzIHRoYXQgZGV2aWF0ZSBmcm9tIHRoZWlyIGluaXRpYWxpemF0aW9uIHZhbHVlLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQWNjZXNzb3JTcGFyc2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKiBOdW1iZXIgb2YgZGV2aWF0aW5nIGFjY2Vzc29yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIHNwYXJzZSBhcnJheS5cclxuICAgICAqL1xyXG4gICAgXCJjb3VudFwiOiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIEFuIG9iamVjdCBwb2ludGluZyB0byBhIGJ1ZmZlciB2aWV3IGNvbnRhaW5pbmcgdGhlIGluZGljZXMgb2YgZGV2aWF0aW5nIGFjY2Vzc29yIHZhbHVlcy4gVGhlIG51bWJlciBvZiBpbmRpY2VzIGlzIGVxdWFsIHRvIGBjb3VudGAuIEluZGljZXMgKipNVVNUKiogc3RyaWN0bHkgaW5jcmVhc2UuXHJcbiAgICAgKi9cclxuICAgIFwiaW5kaWNlc1wiOiBBY2Nlc3NvclNwYXJzZUluZGljZXM7XHJcbiAgICAvKipcclxuICAgICAqIEFuIG9iamVjdCBwb2ludGluZyB0byBhIGJ1ZmZlciB2aWV3IGNvbnRhaW5pbmcgdGhlIGRldmlhdGluZyBhY2Nlc3NvciB2YWx1ZXMuXHJcbiAgICAgKi9cclxuICAgIFwidmFsdWVzXCI6IEFjY2Vzc29yU3BhcnNlVmFsdWVzO1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQSB0eXBlZCB2aWV3IGludG8gYSBidWZmZXIgdmlldyB0aGF0IGNvbnRhaW5zIHJhdyBiaW5hcnkgZGF0YS5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEFjY2Vzc29yIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBidWZmZXJWaWV3LlxyXG4gICAgICovXHJcbiAgICBcImJ1ZmZlclZpZXdcIj86IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG9mZnNldCByZWxhdGl2ZSB0byB0aGUgc3RhcnQgb2YgdGhlIGJ1ZmZlciB2aWV3IGluIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBcImJ5dGVPZmZzZXRcIj86IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGRhdGF0eXBlIG9mIHRoZSBhY2Nlc3NvcidzIGNvbXBvbmVudHMuXHJcbiAgICAgKi9cclxuICAgIFwiY29tcG9uZW50VHlwZVwiOiBudW1iZXIgfCBudW1iZXIgfCBudW1iZXIgfCBudW1iZXIgfCBudW1iZXIgfCBudW1iZXIgfCBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIGludGVnZXIgZGF0YSB2YWx1ZXMgYXJlIG5vcm1hbGl6ZWQgYmVmb3JlIHVzYWdlLlxyXG4gICAgICovXHJcbiAgICBcIm5vcm1hbGl6ZWRcIj86IGJvb2xlYW47XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgcmVmZXJlbmNlZCBieSB0aGlzIGFjY2Vzc29yLlxyXG4gICAgICovXHJcbiAgICBcImNvdW50XCI6IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogU3BlY2lmaWVzIGlmIHRoZSBhY2Nlc3NvcidzIGVsZW1lbnRzIGFyZSBzY2FsYXJzLCB2ZWN0b3JzLCBvciBtYXRyaWNlcy5cclxuICAgICAqL1xyXG4gICAgXCJ0eXBlXCI6IGFueSB8IGFueSB8IGFueSB8IGFueSB8IGFueSB8IGFueSB8IGFueSB8IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogTWF4aW11bSB2YWx1ZSBvZiBlYWNoIGNvbXBvbmVudCBpbiB0aGlzIGFjY2Vzc29yLlxyXG4gICAgICovXHJcbiAgICBcIm1heFwiPzogbnVtYmVyW107XHJcbiAgICAvKipcclxuICAgICAqIE1pbmltdW0gdmFsdWUgb2YgZWFjaCBjb21wb25lbnQgaW4gdGhpcyBhY2Nlc3Nvci5cclxuICAgICAqL1xyXG4gICAgXCJtaW5cIj86IG51bWJlcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTcGFyc2Ugc3RvcmFnZSBvZiBlbGVtZW50cyB0aGF0IGRldmlhdGUgZnJvbSB0aGVpciBpbml0aWFsaXphdGlvbiB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgXCJzcGFyc2VcIj86IEFjY2Vzc29yU3BhcnNlO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBUaGUgZGVzY3JpcHRvciBvZiB0aGUgYW5pbWF0ZWQgcHJvcGVydHkuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBBbmltYXRpb25DaGFubmVsVGFyZ2V0IHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGFuaW1hdGUuIFdoZW4gdW5kZWZpbmVkLCB0aGUgYW5pbWF0ZWQgb2JqZWN0ICoqTUFZKiogYmUgZGVmaW5lZCBieSBhbiBleHRlbnNpb24uXHJcbiAgICAgKi9cclxuICAgIFwibm9kZVwiPzogR2xUZklkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgbm9kZSdzIFRSUyBwcm9wZXJ0eSB0byBhbmltYXRlLCBvciB0aGUgYFwid2VpZ2h0c1wiYCBvZiB0aGUgTW9ycGggVGFyZ2V0cyBpdCBpbnN0YW50aWF0ZXMuIEZvciB0aGUgYFwidHJhbnNsYXRpb25cImAgcHJvcGVydHksIHRoZSB2YWx1ZXMgdGhhdCBhcmUgcHJvdmlkZWQgYnkgdGhlIHNhbXBsZXIgYXJlIHRoZSB0cmFuc2xhdGlvbiBhbG9uZyB0aGUgWCwgWSwgYW5kIFogYXhlcy4gRm9yIHRoZSBgXCJyb3RhdGlvblwiYCBwcm9wZXJ0eSwgdGhlIHZhbHVlcyBhcmUgYSBxdWF0ZXJuaW9uIGluIHRoZSBvcmRlciAoeCwgeSwgeiwgdyksIHdoZXJlIHcgaXMgdGhlIHNjYWxhci4gRm9yIHRoZSBgXCJzY2FsZVwiYCBwcm9wZXJ0eSwgdGhlIHZhbHVlcyBhcmUgdGhlIHNjYWxpbmcgZmFjdG9ycyBhbG9uZyB0aGUgWCwgWSwgYW5kIFogYXhlcy5cclxuICAgICAqL1xyXG4gICAgXCJwYXRoXCI6IFwidHJhbnNsYXRpb25cIiB8IFwicm90YXRpb25cIiB8IFwic2NhbGVcIiB8IFwid2VpZ2h0c1wiOyAvLyBodHRwczovL3JlZ2lzdHJ5Lmtocm9ub3Mub3JnL2dsVEYvc3BlY3MvMi4wL2dsVEYtMi4wLmh0bWwjYW5pbWF0aW9uc1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQW4gYW5pbWF0aW9uIGNoYW5uZWwgY29tYmluZXMgYW4gYW5pbWF0aW9uIHNhbXBsZXIgd2l0aCBhIHRhcmdldCBwcm9wZXJ0eSBiZWluZyBhbmltYXRlZC5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEFuaW1hdGlvbkNoYW5uZWwge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kZXggb2YgYSBzYW1wbGVyIGluIHRoaXMgYW5pbWF0aW9uIHVzZWQgdG8gY29tcHV0ZSB0aGUgdmFsdWUgZm9yIHRoZSB0YXJnZXQuXHJcbiAgICAgKi9cclxuICAgIFwic2FtcGxlclwiOiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBkZXNjcmlwdG9yIG9mIHRoZSBhbmltYXRlZCBwcm9wZXJ0eS5cclxuICAgICAqL1xyXG4gICAgXCJ0YXJnZXRcIjogQW5pbWF0aW9uQ2hhbm5lbFRhcmdldDtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEFuIGFuaW1hdGlvbiBzYW1wbGVyIGNvbWJpbmVzIHRpbWVzdGFtcHMgd2l0aCBhIHNlcXVlbmNlIG9mIG91dHB1dCB2YWx1ZXMgYW5kIGRlZmluZXMgYW4gaW50ZXJwb2xhdGlvbiBhbGdvcml0aG0uXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBBbmltYXRpb25TYW1wbGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIGFuIGFjY2Vzc29yIGNvbnRhaW5pbmcga2V5ZnJhbWUgdGltZXN0YW1wcy5cclxuICAgICAqL1xyXG4gICAgXCJpbnB1dFwiOiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIEludGVycG9sYXRpb24gYWxnb3JpdGhtLlxyXG4gICAgICovXHJcbiAgICBcImludGVycG9sYXRpb25cIj86IGFueSB8IGFueSB8IGFueSB8IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIGFuIGFjY2Vzc29yLCBjb250YWluaW5nIGtleWZyYW1lIG91dHB1dCB2YWx1ZXMuXHJcbiAgICAgKi9cclxuICAgIFwib3V0cHV0XCI6IEdsVGZJZDtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEEga2V5ZnJhbWUgYW5pbWF0aW9uLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQW5pbWF0aW9uIHtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgYW5pbWF0aW9uIGNoYW5uZWxzLiBBbiBhbmltYXRpb24gY2hhbm5lbCBjb21iaW5lcyBhbiBhbmltYXRpb24gc2FtcGxlciB3aXRoIGEgdGFyZ2V0IHByb3BlcnR5IGJlaW5nIGFuaW1hdGVkLiBEaWZmZXJlbnQgY2hhbm5lbHMgb2YgdGhlIHNhbWUgYW5pbWF0aW9uICoqTVVTVCBOT1QqKiBoYXZlIHRoZSBzYW1lIHRhcmdldHMuXHJcbiAgICAgKi9cclxuICAgIFwiY2hhbm5lbHNcIjogQW5pbWF0aW9uQ2hhbm5lbFtdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBhbmltYXRpb24gc2FtcGxlcnMuIEFuIGFuaW1hdGlvbiBzYW1wbGVyIGNvbWJpbmVzIHRpbWVzdGFtcHMgd2l0aCBhIHNlcXVlbmNlIG9mIG91dHB1dCB2YWx1ZXMgYW5kIGRlZmluZXMgYW4gaW50ZXJwb2xhdGlvbiBhbGdvcml0aG0uXHJcbiAgICAgKi9cclxuICAgIFwic2FtcGxlcnNcIjogQW5pbWF0aW9uU2FtcGxlcltdO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBNZXRhZGF0YSBhYm91dCB0aGUgZ2xURiBhc3NldC5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEFzc2V0IHtcclxuICAgIC8qKlxyXG4gICAgICogQSBjb3B5cmlnaHQgbWVzc2FnZSBzdWl0YWJsZSBmb3IgZGlzcGxheSB0byBjcmVkaXQgdGhlIGNvbnRlbnQgY3JlYXRvci5cclxuICAgICAqL1xyXG4gICAgXCJjb3B5cmlnaHRcIj86IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogVG9vbCB0aGF0IGdlbmVyYXRlZCB0aGlzIGdsVEYgbW9kZWwuICBVc2VmdWwgZm9yIGRlYnVnZ2luZy5cclxuICAgICAqL1xyXG4gICAgXCJnZW5lcmF0b3JcIj86IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGdsVEYgdmVyc2lvbiBpbiB0aGUgZm9ybSBvZiBgPG1ham9yPi48bWlub3I+YCB0aGF0IHRoaXMgYXNzZXQgdGFyZ2V0cy5cclxuICAgICAqL1xyXG4gICAgXCJ2ZXJzaW9uXCI6IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1pbmltdW0gZ2xURiB2ZXJzaW9uIGluIHRoZSBmb3JtIG9mIGA8bWFqb3I+LjxtaW5vcj5gIHRoYXQgdGhpcyBhc3NldCB0YXJnZXRzLiBUaGlzIHByb3BlcnR5ICoqTVVTVCBOT1QqKiBiZSBncmVhdGVyIHRoYW4gdGhlIGFzc2V0IHZlcnNpb24uXHJcbiAgICAgKi9cclxuICAgIFwibWluVmVyc2lvblwiPzogc3RyaW5nO1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQSBidWZmZXIgcG9pbnRzIHRvIGJpbmFyeSBnZW9tZXRyeSwgYW5pbWF0aW9uLCBvciBza2lucy5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEJ1ZmZlciB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBVUkkgKG9yIElSSSkgb2YgdGhlIGJ1ZmZlci5cclxuICAgICAqL1xyXG4gICAgXCJ1cmlcIj86IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGxlbmd0aCBvZiB0aGUgYnVmZmVyIGluIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBcImJ5dGVMZW5ndGhcIjogbnVtYmVyO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBIHZpZXcgaW50byBhIGJ1ZmZlciBnZW5lcmFsbHkgcmVwcmVzZW50aW5nIGEgc3Vic2V0IG9mIHRoZSBidWZmZXIuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBCdWZmZXJWaWV3IHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBidWZmZXIuXHJcbiAgICAgKi9cclxuICAgIFwiYnVmZmVyXCI6IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG9mZnNldCBpbnRvIHRoZSBidWZmZXIgaW4gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIFwiYnl0ZU9mZnNldFwiPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbGVuZ3RoIG9mIHRoZSBidWZmZXJWaWV3IGluIGJ5dGVzLlxyXG4gICAgICovXHJcbiAgICBcImJ5dGVMZW5ndGhcIjogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc3RyaWRlLCBpbiBieXRlcy5cclxuICAgICAqL1xyXG4gICAgXCJieXRlU3RyaWRlXCI/OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBoaW50IHJlcHJlc2VudGluZyB0aGUgaW50ZW5kZWQgR1BVIGJ1ZmZlciB0eXBlIHRvIHVzZSB3aXRoIHRoaXMgYnVmZmVyIHZpZXcuXHJcbiAgICAgKi9cclxuICAgIFwidGFyZ2V0XCI/OiBudW1iZXIgfCBudW1iZXIgfCBudW1iZXI7XHJcbiAgICBcIm5hbWVcIj86IGFueTtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEFuIG9ydGhvZ3JhcGhpYyBjYW1lcmEgY29udGFpbmluZyBwcm9wZXJ0aWVzIHRvIGNyZWF0ZSBhbiBvcnRob2dyYXBoaWMgcHJvamVjdGlvbiBtYXRyaXguXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBDYW1lcmFPcnRob2dyYXBoaWMge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmxvYXRpbmctcG9pbnQgaG9yaXpvbnRhbCBtYWduaWZpY2F0aW9uIG9mIHRoZSB2aWV3LiBUaGlzIHZhbHVlICoqTVVTVCBOT1QqKiBiZSBlcXVhbCB0byB6ZXJvLiBUaGlzIHZhbHVlICoqU0hPVUxEIE5PVCoqIGJlIG5lZ2F0aXZlLlxyXG4gICAgICovXHJcbiAgICBcInhtYWdcIjogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmxvYXRpbmctcG9pbnQgdmVydGljYWwgbWFnbmlmaWNhdGlvbiBvZiB0aGUgdmlldy4gVGhpcyB2YWx1ZSAqKk1VU1QgTk9UKiogYmUgZXF1YWwgdG8gemVyby4gVGhpcyB2YWx1ZSAqKlNIT1VMRCBOT1QqKiBiZSBuZWdhdGl2ZS5cclxuICAgICAqL1xyXG4gICAgXCJ5bWFnXCI6IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZsb2F0aW5nLXBvaW50IGRpc3RhbmNlIHRvIHRoZSBmYXIgY2xpcHBpbmcgcGxhbmUuIFRoaXMgdmFsdWUgKipNVVNUIE5PVCoqIGJlIGVxdWFsIHRvIHplcm8uIGB6ZmFyYCAqKk1VU1QqKiBiZSBncmVhdGVyIHRoYW4gYHpuZWFyYC5cclxuICAgICAqL1xyXG4gICAgXCJ6ZmFyXCI6IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZsb2F0aW5nLXBvaW50IGRpc3RhbmNlIHRvIHRoZSBuZWFyIGNsaXBwaW5nIHBsYW5lLlxyXG4gICAgICovXHJcbiAgICBcInpuZWFyXCI6IG51bWJlcjtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEEgcGVyc3BlY3RpdmUgY2FtZXJhIGNvbnRhaW5pbmcgcHJvcGVydGllcyB0byBjcmVhdGUgYSBwZXJzcGVjdGl2ZSBwcm9qZWN0aW9uIG1hdHJpeC5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIENhbWVyYVBlcnNwZWN0aXZlIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZsb2F0aW5nLXBvaW50IGFzcGVjdCByYXRpbyBvZiB0aGUgZmllbGQgb2Ygdmlldy5cclxuICAgICAqL1xyXG4gICAgXCJhc3BlY3RSYXRpb1wiPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmxvYXRpbmctcG9pbnQgdmVydGljYWwgZmllbGQgb2YgdmlldyBpbiByYWRpYW5zLiBUaGlzIHZhbHVlICoqU0hPVUxEKiogYmUgbGVzcyB0aGFuIM+ALlxyXG4gICAgICovXHJcbiAgICBcInlmb3ZcIjogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmxvYXRpbmctcG9pbnQgZGlzdGFuY2UgdG8gdGhlIGZhciBjbGlwcGluZyBwbGFuZS5cclxuICAgICAqL1xyXG4gICAgXCJ6ZmFyXCI/OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmbG9hdGluZy1wb2ludCBkaXN0YW5jZSB0byB0aGUgbmVhciBjbGlwcGluZyBwbGFuZS5cclxuICAgICAqL1xyXG4gICAgXCJ6bmVhclwiOiBudW1iZXI7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBIGNhbWVyYSdzIHByb2plY3Rpb24uICBBIG5vZGUgKipNQVkqKiByZWZlcmVuY2UgYSBjYW1lcmEgdG8gYXBwbHkgYSB0cmFuc2Zvcm0gdG8gcGxhY2UgdGhlIGNhbWVyYSBpbiB0aGUgc2NlbmUuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBDYW1lcmEge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBvcnRob2dyYXBoaWMgY2FtZXJhIGNvbnRhaW5pbmcgcHJvcGVydGllcyB0byBjcmVhdGUgYW4gb3J0aG9ncmFwaGljIHByb2plY3Rpb24gbWF0cml4LiBUaGlzIHByb3BlcnR5ICoqTVVTVCBOT1QqKiBiZSBkZWZpbmVkIHdoZW4gYHBlcnNwZWN0aXZlYCBpcyBkZWZpbmVkLlxyXG4gICAgICovXHJcbiAgICBcIm9ydGhvZ3JhcGhpY1wiPzogQ2FtZXJhT3J0aG9ncmFwaGljO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIHBlcnNwZWN0aXZlIGNhbWVyYSBjb250YWluaW5nIHByb3BlcnRpZXMgdG8gY3JlYXRlIGEgcGVyc3BlY3RpdmUgcHJvamVjdGlvbiBtYXRyaXguIFRoaXMgcHJvcGVydHkgKipNVVNUIE5PVCoqIGJlIGRlZmluZWQgd2hlbiBgb3J0aG9ncmFwaGljYCBpcyBkZWZpbmVkLlxyXG4gICAgICovXHJcbiAgICBcInBlcnNwZWN0aXZlXCI/OiBDYW1lcmFQZXJzcGVjdGl2ZTtcclxuICAgIC8qKlxyXG4gICAgICogU3BlY2lmaWVzIGlmIHRoZSBjYW1lcmEgdXNlcyBhIHBlcnNwZWN0aXZlIG9yIG9ydGhvZ3JhcGhpYyBwcm9qZWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBcInR5cGVcIjogYW55IHwgYW55IHwgc3RyaW5nO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBJbWFnZSBkYXRhIHVzZWQgdG8gY3JlYXRlIGEgdGV4dHVyZS4gSW1hZ2UgKipNQVkqKiBiZSByZWZlcmVuY2VkIGJ5IGFuIFVSSSAob3IgSVJJKSBvciBhIGJ1ZmZlciB2aWV3IGluZGV4LlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgSW1hZ2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgVVJJIChvciBJUkkpIG9mIHRoZSBpbWFnZS5cclxuICAgICAqL1xyXG4gICAgXCJ1cmlcIj86IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGltYWdlJ3MgbWVkaWEgdHlwZS4gVGhpcyBmaWVsZCAqKk1VU1QqKiBiZSBkZWZpbmVkIHdoZW4gYGJ1ZmZlclZpZXdgIGlzIGRlZmluZWQuXHJcbiAgICAgKi9cclxuICAgIFwibWltZVR5cGVcIj86IGFueSB8IGFueSB8IHN0cmluZztcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBidWZmZXJWaWV3IHRoYXQgY29udGFpbnMgdGhlIGltYWdlLiBUaGlzIGZpZWxkICoqTVVTVCBOT1QqKiBiZSBkZWZpbmVkIHdoZW4gYHVyaWAgaXMgZGVmaW5lZC5cclxuICAgICAqL1xyXG4gICAgXCJidWZmZXJWaWV3XCI/OiBHbFRmSWQ7XHJcbiAgICBcIm5hbWVcIj86IGFueTtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFJlZmVyZW5jZSB0byBhIHRleHR1cmUuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBUZXh0dXJlSW5mbyB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgdGV4dHVyZS5cclxuICAgICAqL1xyXG4gICAgXCJpbmRleFwiOiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBzZXQgaW5kZXggb2YgdGV4dHVyZSdzIFRFWENPT1JEIGF0dHJpYnV0ZSB1c2VkIGZvciB0ZXh0dXJlIGNvb3JkaW5hdGUgbWFwcGluZy5cclxuICAgICAqL1xyXG4gICAgXCJ0ZXhDb29yZFwiPzogbnVtYmVyO1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQSBzZXQgb2YgcGFyYW1ldGVyIHZhbHVlcyB0aGF0IGFyZSB1c2VkIHRvIGRlZmluZSB0aGUgbWV0YWxsaWMtcm91Z2huZXNzIG1hdGVyaWFsIG1vZGVsIGZyb20gUGh5c2ljYWxseS1CYXNlZCBSZW5kZXJpbmcgKFBCUikgbWV0aG9kb2xvZ3kuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBNYXRlcmlhbFBick1ldGFsbGljUm91Z2huZXNzIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZhY3RvcnMgZm9yIHRoZSBiYXNlIGNvbG9yIG9mIHRoZSBtYXRlcmlhbC5cclxuICAgICAqL1xyXG4gICAgXCJiYXNlQ29sb3JGYWN0b3JcIj86IG51bWJlcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYmFzZSBjb2xvciB0ZXh0dXJlLlxyXG4gICAgICovXHJcbiAgICBcImJhc2VDb2xvclRleHR1cmVcIj86IFRleHR1cmVJbmZvO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmFjdG9yIGZvciB0aGUgbWV0YWxuZXNzIG9mIHRoZSBtYXRlcmlhbC5cclxuICAgICAqL1xyXG4gICAgXCJtZXRhbGxpY0ZhY3RvclwiPzogbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmFjdG9yIGZvciB0aGUgcm91Z2huZXNzIG9mIHRoZSBtYXRlcmlhbC5cclxuICAgICAqL1xyXG4gICAgXCJyb3VnaG5lc3NGYWN0b3JcIj86IG51bWJlcjtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIG1ldGFsbGljLXJvdWdobmVzcyB0ZXh0dXJlLlxyXG4gICAgICovXHJcbiAgICBcIm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZVwiPzogVGV4dHVyZUluZm87XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICBleHBvcnQgaW50ZXJmYWNlIE1hdGVyaWFsTm9ybWFsVGV4dHVyZUluZm8ge1xyXG4gICAgXCJpbmRleFwiPzogYW55O1xyXG4gICAgXCJ0ZXhDb29yZFwiPzogYW55O1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgc2NhbGFyIHBhcmFtZXRlciBhcHBsaWVkIHRvIGVhY2ggbm9ybWFsIHZlY3RvciBvZiB0aGUgbm9ybWFsIHRleHR1cmUuXHJcbiAgICAgKi9cclxuICAgIFwic2NhbGVcIj86IG51bWJlcjtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgTWF0ZXJpYWxPY2NsdXNpb25UZXh0dXJlSW5mbyB7XHJcbiAgICBcImluZGV4XCI/OiBhbnk7XHJcbiAgICBcInRleENvb3JkXCI/OiBhbnk7XHJcbiAgICAvKipcclxuICAgICAqIEEgc2NhbGFyIG11bHRpcGxpZXIgY29udHJvbGxpbmcgdGhlIGFtb3VudCBvZiBvY2NsdXNpb24gYXBwbGllZC5cclxuICAgICAqL1xyXG4gICAgXCJzdHJlbmd0aFwiPzogbnVtYmVyO1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogVGhlIG1hdGVyaWFsIGFwcGVhcmFuY2Ugb2YgYSBwcmltaXRpdmUuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBNYXRlcmlhbCB7XHJcbiAgICBcIm5hbWVcIj86IGFueTtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIC8qKlxyXG4gICAgICogQSBzZXQgb2YgcGFyYW1ldGVyIHZhbHVlcyB0aGF0IGFyZSB1c2VkIHRvIGRlZmluZSB0aGUgbWV0YWxsaWMtcm91Z2huZXNzIG1hdGVyaWFsIG1vZGVsIGZyb20gUGh5c2ljYWxseSBCYXNlZCBSZW5kZXJpbmcgKFBCUikgbWV0aG9kb2xvZ3kuIFdoZW4gdW5kZWZpbmVkLCBhbGwgdGhlIGRlZmF1bHQgdmFsdWVzIG9mIGBwYnJNZXRhbGxpY1JvdWdobmVzc2AgKipNVVNUKiogYXBwbHkuXHJcbiAgICAgKi9cclxuICAgIFwicGJyTWV0YWxsaWNSb3VnaG5lc3NcIj86IE1hdGVyaWFsUGJyTWV0YWxsaWNSb3VnaG5lc3M7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSB0YW5nZW50IHNwYWNlIG5vcm1hbCB0ZXh0dXJlLlxyXG4gICAgICovXHJcbiAgICBcIm5vcm1hbFRleHR1cmVcIj86IE1hdGVyaWFsTm9ybWFsVGV4dHVyZUluZm87XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBvY2NsdXNpb24gdGV4dHVyZS5cclxuICAgICAqL1xyXG4gICAgXCJvY2NsdXNpb25UZXh0dXJlXCI/OiBNYXRlcmlhbE9jY2x1c2lvblRleHR1cmVJbmZvO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZW1pc3NpdmUgdGV4dHVyZS5cclxuICAgICAqL1xyXG4gICAgXCJlbWlzc2l2ZVRleHR1cmVcIj86IFRleHR1cmVJbmZvO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZmFjdG9ycyBmb3IgdGhlIGVtaXNzaXZlIGNvbG9yIG9mIHRoZSBtYXRlcmlhbC5cclxuICAgICAqL1xyXG4gICAgXCJlbWlzc2l2ZUZhY3RvclwiPzogbnVtYmVyW107XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbHBoYSByZW5kZXJpbmcgbW9kZSBvZiB0aGUgbWF0ZXJpYWwuXHJcbiAgICAgKi9cclxuICAgIFwiYWxwaGFNb2RlXCI/OiBhbnkgfCBhbnkgfCBhbnkgfCBzdHJpbmc7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhbHBoYSBjdXRvZmYgdmFsdWUgb2YgdGhlIG1hdGVyaWFsLlxyXG4gICAgICovXHJcbiAgICBcImFscGhhQ3V0b2ZmXCI/OiBudW1iZXI7XHJcbiAgICAvKipcclxuICAgICAqIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBtYXRlcmlhbCBpcyBkb3VibGUgc2lkZWQuXHJcbiAgICAgKi9cclxuICAgIFwiZG91YmxlU2lkZWRcIj86IGJvb2xlYW47XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBHZW9tZXRyeSB0byBiZSByZW5kZXJlZCB3aXRoIHRoZSBnaXZlbiBtYXRlcmlhbC5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIE1lc2hQcmltaXRpdmUge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIHBsYWluIEpTT04gb2JqZWN0LCB3aGVyZSBlYWNoIGtleSBjb3JyZXNwb25kcyB0byBhIG1lc2ggYXR0cmlidXRlIHNlbWFudGljIGFuZCBlYWNoIHZhbHVlIGlzIHRoZSBpbmRleCBvZiB0aGUgYWNjZXNzb3IgY29udGFpbmluZyBhdHRyaWJ1dGUncyBkYXRhLlxyXG4gICAgICovXHJcbiAgICBcImF0dHJpYnV0ZXNcIjoge1xyXG4gICAgICBbazogc3RyaW5nXTogR2xUZklkO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBhY2Nlc3NvciB0aGF0IGNvbnRhaW5zIHRoZSB2ZXJ0ZXggaW5kaWNlcy5cclxuICAgICAqL1xyXG4gICAgXCJpbmRpY2VzXCI/OiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgbWF0ZXJpYWwgdG8gYXBwbHkgdG8gdGhpcyBwcmltaXRpdmUgd2hlbiByZW5kZXJpbmcuXHJcbiAgICAgKi9cclxuICAgIFwibWF0ZXJpYWxcIj86IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHRvcG9sb2d5IHR5cGUgb2YgcHJpbWl0aXZlcyB0byByZW5kZXIuXHJcbiAgICAgKi9cclxuICAgIFwibW9kZVwiPzogbnVtYmVyIHwgbnVtYmVyIHwgbnVtYmVyIHwgbnVtYmVyIHwgbnVtYmVyIHwgbnVtYmVyIHwgbnVtYmVyIHwgbnVtYmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBtb3JwaCB0YXJnZXRzLlxyXG4gICAgICovXHJcbiAgICBcInRhcmdldHNcIj86IHtcclxuICAgICAgW2s6IHN0cmluZ106IEdsVGZJZDtcclxuICAgIH1bXTtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEEgc2V0IG9mIHByaW1pdGl2ZXMgdG8gYmUgcmVuZGVyZWQuICBJdHMgZ2xvYmFsIHRyYW5zZm9ybSBpcyBkZWZpbmVkIGJ5IGEgbm9kZSB0aGF0IHJlZmVyZW5jZXMgaXQuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBNZXNoIHtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgcHJpbWl0aXZlcywgZWFjaCBkZWZpbmluZyBnZW9tZXRyeSB0byBiZSByZW5kZXJlZC5cclxuICAgICAqL1xyXG4gICAgXCJwcmltaXRpdmVzXCI6IE1lc2hQcmltaXRpdmVbXTtcclxuICAgIC8qKlxyXG4gICAgICogQXJyYXkgb2Ygd2VpZ2h0cyB0byBiZSBhcHBsaWVkIHRvIHRoZSBtb3JwaCB0YXJnZXRzLiBUaGUgbnVtYmVyIG9mIGFycmF5IGVsZW1lbnRzICoqTVVTVCoqIG1hdGNoIHRoZSBudW1iZXIgb2YgbW9ycGggdGFyZ2V0cy5cclxuICAgICAqL1xyXG4gICAgXCJ3ZWlnaHRzXCI/OiBudW1iZXJbXTtcclxuICAgIFwibmFtZVwiPzogYW55O1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQSBub2RlIGluIHRoZSBub2RlIGhpZXJhcmNoeS4gIFdoZW4gdGhlIG5vZGUgY29udGFpbnMgYHNraW5gLCBhbGwgYG1lc2gucHJpbWl0aXZlc2AgKipNVVNUKiogY29udGFpbiBgSk9JTlRTXzBgIGFuZCBgV0VJR0hUU18wYCBhdHRyaWJ1dGVzLiAgQSBub2RlICoqTUFZKiogaGF2ZSBlaXRoZXIgYSBgbWF0cml4YCBvciBhbnkgY29tYmluYXRpb24gb2YgYHRyYW5zbGF0aW9uYC9gcm90YXRpb25gL2BzY2FsZWAgKFRSUykgcHJvcGVydGllcy4gVFJTIHByb3BlcnRpZXMgYXJlIGNvbnZlcnRlZCB0byBtYXRyaWNlcyBhbmQgcG9zdG11bHRpcGxpZWQgaW4gdGhlIGBUICogUiAqIFNgIG9yZGVyIHRvIGNvbXBvc2UgdGhlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeDsgZmlyc3QgdGhlIHNjYWxlIGlzIGFwcGxpZWQgdG8gdGhlIHZlcnRpY2VzLCB0aGVuIHRoZSByb3RhdGlvbiwgYW5kIHRoZW4gdGhlIHRyYW5zbGF0aW9uLiBJZiBub25lIGFyZSBwcm92aWRlZCwgdGhlIHRyYW5zZm9ybSBpcyB0aGUgaWRlbnRpdHkuIFdoZW4gYSBub2RlIGlzIHRhcmdldGVkIGZvciBhbmltYXRpb24gKHJlZmVyZW5jZWQgYnkgYW4gYW5pbWF0aW9uLmNoYW5uZWwudGFyZ2V0KSwgYG1hdHJpeGAgKipNVVNUIE5PVCoqIGJlIHByZXNlbnQuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBOb2RlIHtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBjYW1lcmEgcmVmZXJlbmNlZCBieSB0aGlzIG5vZGUuXHJcbiAgICAgKi9cclxuICAgIFwiY2FtZXJhXCI/OiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRpY2VzIG9mIHRoaXMgbm9kZSdzIGNoaWxkcmVuLlxyXG4gICAgICovXHJcbiAgICBcImNoaWxkcmVuXCI/OiBHbFRmSWRbXTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBza2luIHJlZmVyZW5jZWQgYnkgdGhpcyBub2RlLlxyXG4gICAgICovXHJcbiAgICBcInNraW5cIj86IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogQSBmbG9hdGluZy1wb2ludCA0eDQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHN0b3JlZCBpbiBjb2x1bW4tbWFqb3Igb3JkZXIuXHJcbiAgICAgKi9cclxuICAgIFwibWF0cml4XCI/OiBudW1iZXJbXTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBtZXNoIGluIHRoaXMgbm9kZS5cclxuICAgICAqL1xyXG4gICAgXCJtZXNoXCI/OiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub2RlJ3MgdW5pdCBxdWF0ZXJuaW9uIHJvdGF0aW9uIGluIHRoZSBvcmRlciAoeCwgeSwgeiwgdyksIHdoZXJlIHcgaXMgdGhlIHNjYWxhci5cclxuICAgICAqL1xyXG4gICAgXCJyb3RhdGlvblwiPzogbnVtYmVyW107XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBub2RlJ3Mgbm9uLXVuaWZvcm0gc2NhbGUsIGdpdmVuIGFzIHRoZSBzY2FsaW5nIGZhY3RvcnMgYWxvbmcgdGhlIHgsIHksIGFuZCB6IGF4ZXMuXHJcbiAgICAgKi9cclxuICAgIFwic2NhbGVcIj86IG51bWJlcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgbm9kZSdzIHRyYW5zbGF0aW9uIGFsb25nIHRoZSB4LCB5LCBhbmQgeiBheGVzLlxyXG4gICAgICovXHJcbiAgICBcInRyYW5zbGF0aW9uXCI/OiBudW1iZXJbXTtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIHdlaWdodHMgb2YgdGhlIGluc3RhbnRpYXRlZCBtb3JwaCB0YXJnZXQuIFRoZSBudW1iZXIgb2YgYXJyYXkgZWxlbWVudHMgKipNVVNUKiogbWF0Y2ggdGhlIG51bWJlciBvZiBtb3JwaCB0YXJnZXRzIG9mIHRoZSByZWZlcmVuY2VkIG1lc2guIFdoZW4gZGVmaW5lZCwgYG1lc2hgICoqTVVTVCoqIGFsc28gYmUgZGVmaW5lZC5cclxuICAgICAqL1xyXG4gICAgXCJ3ZWlnaHRzXCI/OiBudW1iZXJbXTtcclxuICAgIFwibmFtZVwiPzogYW55O1xyXG4gICAgXCJleHRlbnNpb25zXCI/OiBhbnk7XHJcbiAgICBcImV4dHJhc1wiPzogYW55O1xyXG4gICAgW2s6IHN0cmluZ106IGFueTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogVGV4dHVyZSBzYW1wbGVyIHByb3BlcnRpZXMgZm9yIGZpbHRlcmluZyBhbmQgd3JhcHBpbmcgbW9kZXMuXHJcbiAgICovXHJcbiAgZXhwb3J0IGludGVyZmFjZSBTYW1wbGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogTWFnbmlmaWNhdGlvbiBmaWx0ZXIuXHJcbiAgICAgKi9cclxuICAgIFwibWFnRmlsdGVyXCI/OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiTkVBUkVTVFwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJMSU5FQVJcIl07XHJcbiAgICAvKipcclxuICAgICAqIE1pbmlmaWNhdGlvbiBmaWx0ZXIuXHJcbiAgICAgKi9cclxuICAgIFwibWluRmlsdGVyXCI/OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiTkVBUkVTVFwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJMSU5FQVJcIl0gfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiTkVBUkVTVF9NSVBNQVBfTkVBUkVTVFwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJMSU5FQVJfTUlQTUFQX05FQVJFU1RcIl0gfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiTkVBUkVTVF9NSVBNQVBfTElORUFSXCJdIHwgV2ViR0wyUmVuZGVyaW5nQ29udGV4dFtcIkxJTkVBUl9NSVBNQVBfTElORUFSXCJdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBTIChVKSB3cmFwcGluZyBtb2RlLlxyXG4gICAgICovXHJcbiAgICBcIndyYXBTXCI/OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiQ0xBTVBfVE9fRURHRVwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJNSVJST1JFRF9SRVBFQVRcIl0gfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiUkVQRUFUXCJdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUIChWKSB3cmFwcGluZyBtb2RlLlxyXG4gICAgICovXHJcbiAgICBcIndyYXBUXCI/OiBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiQ0xBTVBfVE9fRURHRVwiXSB8IFdlYkdMMlJlbmRlcmluZ0NvbnRleHRbXCJNSVJST1JFRF9SRVBFQVRcIl0gfCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0W1wiUkVQRUFUXCJdO1xyXG4gICAgXCJuYW1lXCI/OiBzdHJpbmc7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBUaGUgcm9vdCBub2RlcyBvZiBhIHNjZW5lLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2NlbmUge1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kaWNlcyBvZiBlYWNoIHJvb3Qgbm9kZS5cclxuICAgICAqL1xyXG4gICAgXCJub2Rlc1wiPzogR2xUZklkW107XHJcbiAgICBcIm5hbWVcIj86IGFueTtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIEpvaW50cyBhbmQgbWF0cmljZXMgZGVmaW5pbmcgYSBza2luLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2tpbiB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYWNjZXNzb3IgY29udGFpbmluZyB0aGUgZmxvYXRpbmctcG9pbnQgNHg0IGludmVyc2UtYmluZCBtYXRyaWNlcy5cclxuICAgICAqL1xyXG4gICAgXCJpbnZlcnNlQmluZE1hdHJpY2VzXCI/OiBHbFRmSWQ7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgbm9kZSB1c2VkIGFzIGEgc2tlbGV0b24gcm9vdC5cclxuICAgICAqL1xyXG4gICAgXCJza2VsZXRvblwiPzogR2xUZklkO1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRpY2VzIG9mIHNrZWxldG9uIG5vZGVzLCB1c2VkIGFzIGpvaW50cyBpbiB0aGlzIHNraW4uXHJcbiAgICAgKi9cclxuICAgIFwiam9pbnRzXCI6IEdsVGZJZFtdO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBBIHRleHR1cmUgYW5kIGl0cyBzYW1wbGVyLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgVGV4dHVyZSB7XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBpbmRleCBvZiB0aGUgc2FtcGxlciB1c2VkIGJ5IHRoaXMgdGV4dHVyZS4gV2hlbiB1bmRlZmluZWQsIGEgc2FtcGxlciB3aXRoIHJlcGVhdCB3cmFwcGluZyBhbmQgYXV0byBmaWx0ZXJpbmcgKipTSE9VTEQqKiBiZSB1c2VkLlxyXG4gICAgICovXHJcbiAgICBcInNhbXBsZXJcIj86IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBpbWFnZSB1c2VkIGJ5IHRoaXMgdGV4dHVyZS4gV2hlbiB1bmRlZmluZWQsIGFuIGV4dGVuc2lvbiBvciBvdGhlciBtZWNoYW5pc20gKipTSE9VTEQqKiBzdXBwbHkgYW4gYWx0ZXJuYXRlIHRleHR1cmUgc291cmNlLCBvdGhlcndpc2UgYmVoYXZpb3IgaXMgdW5kZWZpbmVkLlxyXG4gICAgICovXHJcbiAgICBcInNvdXJjZVwiPzogR2xUZklkO1xyXG4gICAgXCJuYW1lXCI/OiBhbnk7XHJcbiAgICBcImV4dGVuc2lvbnNcIj86IGFueTtcclxuICAgIFwiZXh0cmFzXCI/OiBhbnk7XHJcbiAgICBbazogc3RyaW5nXTogYW55O1xyXG4gIH1cclxuICAvKipcclxuICAgKiBUaGUgcm9vdCBvYmplY3QgZm9yIGEgZ2xURiBhc3NldC5cclxuICAgKi9cclxuICBleHBvcnQgaW50ZXJmYWNlIEdsVGYge1xyXG4gICAgLyoqXHJcbiAgICAgKiBOYW1lcyBvZiBnbFRGIGV4dGVuc2lvbnMgdXNlZCBpbiB0aGlzIGFzc2V0LlxyXG4gICAgICovXHJcbiAgICBcImV4dGVuc2lvbnNVc2VkXCI/OiBzdHJpbmdbXTtcclxuICAgIC8qKlxyXG4gICAgICogTmFtZXMgb2YgZ2xURiBleHRlbnNpb25zIHJlcXVpcmVkIHRvIHByb3Blcmx5IGxvYWQgdGhpcyBhc3NldC5cclxuICAgICAqL1xyXG4gICAgXCJleHRlbnNpb25zUmVxdWlyZWRcIj86IHN0cmluZ1tdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBhY2Nlc3NvcnMuXHJcbiAgICAgKi9cclxuICAgIFwiYWNjZXNzb3JzXCI/OiBBY2Nlc3NvcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBrZXlmcmFtZSBhbmltYXRpb25zLlxyXG4gICAgICovXHJcbiAgICBcImFuaW1hdGlvbnNcIj86IEFuaW1hdGlvbltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRhZGF0YSBhYm91dCB0aGUgZ2xURiBhc3NldC5cclxuICAgICAqL1xyXG4gICAgXCJhc3NldFwiOiBBc3NldDtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgYnVmZmVycy5cclxuICAgICAqL1xyXG4gICAgXCJidWZmZXJzXCI/OiBCdWZmZXJbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgYnVmZmVyVmlld3MuXHJcbiAgICAgKi9cclxuICAgIFwiYnVmZmVyVmlld3NcIj86IEJ1ZmZlclZpZXdbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgY2FtZXJhcy5cclxuICAgICAqL1xyXG4gICAgXCJjYW1lcmFzXCI/OiBDYW1lcmFbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgaW1hZ2VzLlxyXG4gICAgICovXHJcbiAgICBcImltYWdlc1wiPzogSW1hZ2VbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgbWF0ZXJpYWxzLlxyXG4gICAgICovXHJcbiAgICBcIm1hdGVyaWFsc1wiPzogTWF0ZXJpYWxbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgbWVzaGVzLlxyXG4gICAgICovXHJcbiAgICBcIm1lc2hlc1wiPzogTWVzaFtdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBub2Rlcy5cclxuICAgICAqL1xyXG4gICAgXCJub2Rlc1wiPzogTm9kZVtdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBhcnJheSBvZiBzYW1wbGVycy5cclxuICAgICAqL1xyXG4gICAgXCJzYW1wbGVyc1wiPzogU2FtcGxlcltdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGRlZmF1bHQgc2NlbmUuXHJcbiAgICAgKi9cclxuICAgIFwic2NlbmVcIj86IEdsVGZJZDtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2Ygc2NlbmVzLlxyXG4gICAgICovXHJcbiAgICBcInNjZW5lc1wiPzogU2NlbmVbXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2Ygc2tpbnMuXHJcbiAgICAgKi9cclxuICAgIFwic2tpbnNcIj86IFNraW5bXTtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYXJyYXkgb2YgdGV4dHVyZXMuXHJcbiAgICAgKi9cclxuICAgIFwidGV4dHVyZXNcIj86IFRleHR1cmVbXTtcclxuICAgIFwiZXh0ZW5zaW9uc1wiPzogYW55O1xyXG4gICAgXCJleHRyYXNcIj86IGFueTtcclxuICAgIFtrOiBzdHJpbmddOiBhbnk7XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogQXNzZXQgbG9hZGVyIGZvciBnbCBUcmFuc2ZlciBGb3JtYXQgZmlsZXMuXHJcbiAgICogQGF1dGhvcnMgTWF0dGhpYXMgUm9taW5nLCBIRlUsIDIwMjIgfCBKb25hcyBQbG90emt5LCBIRlUsIDIwMjNcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgR0xURkxvYWRlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbG9hZGVyczogeyBbdXJsOiBzdHJpbmddOiBHTFRGTG9hZGVyIH07XHJcbiAgICBwcml2YXRlIHN0YXRpYyBkZWZhdWx0TWF0ZXJpYWw6IE1hdGVyaWFsO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZGVmYXVsdFNraW5NYXRlcmlhbDogTWF0ZXJpYWw7XHJcblxyXG4gICAgcHVibGljIHJlYWRvbmx5IGdsdGY6IEdMVEYuR2xUZjtcclxuICAgIHB1YmxpYyByZWFkb25seSB1cmw6IHN0cmluZztcclxuXHJcbiAgICAjc2NlbmVzOiBHcmFwaFtdO1xyXG4gICAgI25vZGVzOiBOb2RlW107XHJcbiAgICAjY2FtZXJhczogQ29tcG9uZW50Q2FtZXJhW107XHJcbiAgICAjYW5pbWF0aW9uczogQW5pbWF0aW9uW107XHJcbiAgICAjbWVzaGVzOiBNZXNoSW1wb3J0W107XHJcbiAgICAjbWF0ZXJpYWxzOiBNYXRlcmlhbFtdO1xyXG4gICAgI3RleHR1cmVzOiBUZXh0dXJlW107XHJcbiAgICAjc2tlbGV0b25zOiBTa2VsZXRvbltdO1xyXG4gICAgI2J1ZmZlcnM6IEFycmF5QnVmZmVyW107XHJcblxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihfZ2x0ZjogR0xURi5HbFRmLCBfdXJsOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5nbHRmID0gX2dsdGY7XHJcbiAgICAgIHRoaXMudXJsID0gX3VybDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIExPQUQoX3VybDogc3RyaW5nKTogUHJvbWlzZTxHTFRGTG9hZGVyPiB7XHJcbiAgICAgIGlmICghdGhpcy5sb2FkZXJzKVxyXG4gICAgICAgIHRoaXMubG9hZGVycyA9IHt9O1xyXG4gICAgICBpZiAoIXRoaXMubG9hZGVyc1tfdXJsXSkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlOiBSZXNwb25zZSA9IGF3YWl0IGZldGNoKF91cmwpO1xyXG4gICAgICAgIGNvbnN0IGdsdGY6IEdMVEYuR2xUZiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBnbHRmLm5vZGVzLmZvckVhY2goKF9ub2RlLCBfaU5vZGUpID0+IC8vIG1hcmsgcGFyZW50cyBvZiBub2Rlc1xyXG4gICAgICAgICAgX25vZGUuY2hpbGRyZW4/LmZvckVhY2goX2lDaGlsZCA9PiBnbHRmLm5vZGVzW19pQ2hpbGRdLnBhcmVudCA9IF9pTm9kZSkpO1xyXG4gICAgICAgIHRoaXMubG9hZGVyc1tfdXJsXSA9IG5ldyBHTFRGTG9hZGVyKGdsdGYsIF91cmwpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmxvYWRlcnNbX3VybF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFNjZW5lKF9uYW1lPzogc3RyaW5nKTogUHJvbWlzZTxHcmFwaEluc3RhbmNlPiB7XHJcbiAgICAgIGNvbnN0IGlTY2VuZTogbnVtYmVyID0gX25hbWUgPyB0aGlzLmdsdGYuc2NlbmVzLmZpbmRJbmRleChfc2NlbmUgPT4gX3NjZW5lLm5hbWUgPT0gX25hbWUpIDogdGhpcy5nbHRmLnNjZW5lO1xyXG4gICAgICBpZiAoaVNjZW5lID09IC0xKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGRuJ3QgZmluZCBuYW1lICR7X25hbWV9IGluIGdsdGYgc2NlbmVzLmApO1xyXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRTY2VuZUJ5SW5kZXgoaVNjZW5lKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0U2NlbmVCeUluZGV4KF9pU2NlbmU6IG51bWJlciA9IHRoaXMuZ2x0Zi5zY2VuZSk6IFByb21pc2U8R3JhcGhJbnN0YW5jZT4ge1xyXG4gICAgICBpZiAoIXRoaXMuI3NjZW5lcylcclxuICAgICAgICB0aGlzLiNzY2VuZXMgPSBbXTtcclxuICAgICAgaWYgKCF0aGlzLiNzY2VuZXNbX2lTY2VuZV0pIHtcclxuICAgICAgICBjb25zdCBnbHRmU2NlbmU6IEdMVEYuU2NlbmUgPSB0aGlzLmdsdGYuc2NlbmVzW19pU2NlbmVdO1xyXG4gICAgICAgIGNvbnN0IHNjZW5lOiBHcmFwaCA9IG5ldyBHcmFwaChnbHRmU2NlbmUubmFtZSk7XHJcbiAgICAgICAgZm9yIChjb25zdCBpTm9kZSBvZiBnbHRmU2NlbmUubm9kZXMpXHJcbiAgICAgICAgICBzY2VuZS5hZGRDaGlsZChhd2FpdCB0aGlzLmdldE5vZGVCeUluZGV4KGlOb2RlKSk7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2x0Zi5hbmltYXRpb25zPy5sZW5ndGggPiAwKVxyXG4gICAgICAgICAgc2NlbmUuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnRBbmltYXRvcihhd2FpdCB0aGlzLmdldEFuaW1hdGlvbkJ5SW5kZXgoMCkpKTtcclxuICAgICAgICBQcm9qZWN0LnJlZ2lzdGVyKHNjZW5lKTtcclxuICAgICAgICB0aGlzLiNzY2VuZXNbX2lTY2VuZV0gPSBzY2VuZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gYXdhaXQgUHJvamVjdC5jcmVhdGVHcmFwaEluc3RhbmNlKHRoaXMuI3NjZW5lc1tfaVNjZW5lXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldE5vZGUoX25hbWU6IHN0cmluZyk6IFByb21pc2U8Tm9kZT4ge1xyXG4gICAgICBjb25zdCBpTm9kZTogbnVtYmVyID0gdGhpcy5nbHRmLm5vZGVzLmZpbmRJbmRleChfbm9kZSA9PiBfbm9kZS5uYW1lID09IF9uYW1lKTtcclxuICAgICAgaWYgKGlOb2RlID09IC0xKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGRuJ3QgZmluZCBuYW1lICR7X25hbWV9IGluIGdsdGYgbm9kZXMuYCk7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE5vZGVCeUluZGV4KGlOb2RlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0Tm9kZUJ5SW5kZXgoX2lOb2RlOiBudW1iZXIpOiBQcm9taXNlPE5vZGU+IHtcclxuICAgICAgaWYgKCF0aGlzLiNub2RlcylcclxuICAgICAgICB0aGlzLiNub2RlcyA9IFtdO1xyXG4gICAgICBpZiAoIXRoaXMuI25vZGVzW19pTm9kZV0pIHtcclxuICAgICAgICBjb25zdCBnbHRmTm9kZTogR0xURi5Ob2RlID0gdGhpcy5nbHRmLm5vZGVzW19pTm9kZV07XHJcbiAgICAgICAgbGV0IGlTa2VsZXRvbjogbnVtYmVyID0gdGhpcy5nbHRmLnNraW5zPy5maW5kSW5kZXgoX3NraW4gPT4gX3NraW4uam9pbnRzWzBdID09IF9pTm9kZSk7XHJcbiAgICAgICAgY29uc3Qgbm9kZTogTm9kZSA9IGlTa2VsZXRvbiA+PSAwID8gbmV3IFNrZWxldG9uKGdsdGZOb2RlLm5hbWUpIDogbmV3IE5vZGUoZ2x0Zk5vZGUubmFtZSk7XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBjaGlsZHJlblxyXG4gICAgICAgIGlmIChnbHRmTm9kZS5jaGlsZHJlbilcclxuICAgICAgICAgIGZvciAoY29uc3QgaU5vZGUgb2YgZ2x0Zk5vZGUuY2hpbGRyZW4pXHJcbiAgICAgICAgICAgIG5vZGUuYWRkQ2hpbGQoYXdhaXQgdGhpcy5nZXROb2RlQnlJbmRleChpTm9kZSkpO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBmb3IgdHJhbnNmb3JtYXRpb25cclxuICAgICAgICBpZiAoZ2x0Zk5vZGUubWF0cml4IHx8IGdsdGZOb2RlLnJvdGF0aW9uIHx8IGdsdGZOb2RlLnNjYWxlIHx8IGdsdGZOb2RlLnRyYW5zbGF0aW9uKSB7XHJcbiAgICAgICAgICBpZiAoIW5vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudFRyYW5zZm9ybSkpXHJcbiAgICAgICAgICAgIG5vZGUuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnRUcmFuc2Zvcm0oKSk7XHJcbiAgICAgICAgICBpZiAoZ2x0Zk5vZGUubWF0cml4KSB7XHJcbiAgICAgICAgICAgIG5vZGUubXR4TG9jYWwuc2V0KEZsb2F0MzJBcnJheS5mcm9tKGdsdGZOb2RlLm1hdHJpeCkpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGdsdGZOb2RlLnRyYW5zbGF0aW9uKVxyXG4gICAgICAgICAgICAgIG5vZGUubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBWZWN0b3IzKC4uLmdsdGZOb2RlLnRyYW5zbGF0aW9uKSk7XHJcbiAgICAgICAgICAgIGlmIChnbHRmTm9kZS5yb3RhdGlvbikge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uOiBRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTtcclxuICAgICAgICAgICAgICByb3RhdGlvbi5zZXQoZ2x0Zk5vZGUucm90YXRpb24pO1xyXG4gICAgICAgICAgICAgIG5vZGUubXR4TG9jYWwucm90YXRlKHJvdGF0aW9uLmV1bGVyQW5nbGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZ2x0Zk5vZGUuc2NhbGUpXHJcbiAgICAgICAgICAgICAgbm9kZS5tdHhMb2NhbC5zY2FsZShuZXcgVmVjdG9yMyguLi5nbHRmTm9kZS5zY2FsZSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIGNhbWVyYVxyXG4gICAgICAgIGlmIChnbHRmTm9kZS5jYW1lcmEgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBub2RlLmFkZENvbXBvbmVudChhd2FpdCB0aGlzLmdldENhbWVyYUJ5SW5kZXgoZ2x0Zk5vZGUuY2FtZXJhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjaGVjayBmb3IgbWVzaCBhbmQgbWF0ZXJpYWxcclxuICAgICAgICBpZiAoZ2x0Zk5vZGUubWVzaCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIG5vZGUuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnRNZXNoKGF3YWl0IHRoaXMuZ2V0TWVzaEJ5SW5kZXgoZ2x0Zk5vZGUubWVzaCkpKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBnbHRmTWVzaDogR0xURi5NZXNoID0gdGhpcy5nbHRmLm1lc2hlcz8uW2dsdGZOb2RlLm1lc2hdO1xyXG4gICAgICAgICAgaWYgKGdsdGZNZXNoLnByaW1pdGl2ZXMubGVuZ3RoID4gMSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb2RlICR7Z2x0Zk5vZGUubmFtZX0gaGFzIGEgbWVzaCB3aXRoIG1vcmUgdGhhbiBvbmUgcHJpbWl0aXZlIGF0dGFjaGVkIHRvIGl0LiBGVURHRSBjdXJyZW50bHkgb25seSBzdXBwb3J0cyBvbmUgcHJpbWl0aXZlIHBlciBtZXNoLmApO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGlNYXRlcmlhbDogbnVtYmVyID0gZ2x0Zk1lc2gucHJpbWl0aXZlcz8uWzBdPy5tYXRlcmlhbDtcclxuICAgICAgICAgIGlmIChpTWF0ZXJpYWwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG5vZGUuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnRNYXRlcmlhbChhd2FpdCB0aGlzLmdldE1hdGVyaWFsQnlJbmRleChpTWF0ZXJpYWwsIG5vZGUuZ2V0Q29tcG9uZW50KENvbXBvbmVudE1lc2gpLm1lc2ggaW5zdGFuY2VvZiBNZXNoU2tpbikpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmdldENvbXBvbmVudChDb21wb25lbnRNZXNoKS5tZXNoIGluc3RhbmNlb2YgTWVzaFNraW4pIHtcclxuICAgICAgICAgICAgICBpZiAoIUdMVEZMb2FkZXIuZGVmYXVsdFNraW5NYXRlcmlhbClcclxuICAgICAgICAgICAgICAgIEdMVEZMb2FkZXIuZGVmYXVsdFNraW5NYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChcIkdMVEZEZWZhdWx0U2tpbk1hdGVyaWFsXCIsIFNoYWRlckdvdXJhdWRTa2luLCBuZXcgQ29hdFJlbWlzc2l2ZShDb2xvci5DU1MoXCJ3aGl0ZVwiKSkpO1xyXG4gICAgICAgICAgICAgIG5vZGUuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnRNYXRlcmlhbChHTFRGTG9hZGVyLmRlZmF1bHRTa2luTWF0ZXJpYWwpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBpZiAoIUdMVEZMb2FkZXIuZGVmYXVsdE1hdGVyaWFsKVxyXG4gICAgICAgICAgICAgICAgR0xURkxvYWRlci5kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoXCJHTFRGRGVmYXVsdE1hdGVyaWFsXCIsIFNoYWRlckdvdXJhdWQsIG5ldyBDb2F0UmVtaXNzaXZlKENvbG9yLkNTUyhcIndoaXRlXCIpKSk7XHJcbiAgICAgICAgICAgICAgbm9kZS5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudE1hdGVyaWFsKEdMVEZMb2FkZXIuZGVmYXVsdE1hdGVyaWFsKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGNoZWNrIGZvciBza2VsZXRvbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGdsdGZOb2RlLnNraW4gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBsZXQgaVNrZWxldG9uOiBudW1iZXIgPSB0aGlzLmdsdGYuc2tpbnNbZ2x0Zk5vZGUuc2tpbl0uam9pbnRzWzBdO1xyXG4gICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoQ29tcG9uZW50TWVzaCkuc2tlbGV0b24gPSA8U2tlbGV0b25JbnN0YW5jZT5hd2FpdCB0aGlzLmdldE5vZGVCeUluZGV4KGlTa2VsZXRvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiNub2Rlc1tfaU5vZGVdID0gbm9kZTtcclxuXHJcbiAgICAgICAgLy8gcmVwbGFjZSBza2VsZXRvbiB3aXRoIHNrZWxldG9uIGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlTa2VsZXRvbiA+PSAwKSB7XHJcbiAgICAgICAgICBsZXQgc2tlbGV0b25JbnN0YW5jZTogU2tlbGV0b25JbnN0YW5jZSA9IGF3YWl0IFNrZWxldG9uSW5zdGFuY2UuQ1JFQVRFKGF3YWl0IHRoaXMuZ2V0U2tlbGV0b25CeUluZGV4KGlTa2VsZXRvbikpO1xyXG4gICAgICAgICAgLy8gcmVwbGFjZSBjYWNoZWQgbm9kZXMgZnJvbSBza2VsZXRvbiB3aXRoIHNrZWxldG9uIGluc3RhbmNlIGJvbmVzXHJcbiAgICAgICAgICB0aGlzLiNub2RlcyA9IHRoaXMuI25vZGVzLm1hcChfbm9kZSA9PiBza2VsZXRvbkluc3RhbmNlLmJvbmVzW19ub2RlLm5hbWVdIHx8IF9ub2RlKTtcclxuICAgICAgICAgIHRoaXMuI25vZGVzW19pTm9kZV0gPSBza2VsZXRvbkluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy4jbm9kZXNbX2lOb2RlXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0Q2FtZXJhKF9uYW1lOiBzdHJpbmcpOiBQcm9taXNlPENvbXBvbmVudENhbWVyYT4ge1xyXG4gICAgICBjb25zdCBpQ2FtZXJhOiBudW1iZXIgPSB0aGlzLmdsdGYuY2FtZXJhcy5maW5kSW5kZXgoX2NhbWVyYSA9PiBfY2FtZXJhLm5hbWUgPT0gX25hbWUpO1xyXG4gICAgICBpZiAoaUNhbWVyYSA9PSAtMSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkbid0IGZpbmQgbmFtZSAke19uYW1lfSBpbiBnbHRmIGNhbWVyYXMuYCk7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldENhbWVyYUJ5SW5kZXgoaUNhbWVyYSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldENhbWVyYUJ5SW5kZXgoX2lDYW1lcmE6IG51bWJlcik6IFByb21pc2U8Q29tcG9uZW50Q2FtZXJhPiB7XHJcbiAgICAgIGlmICghdGhpcy4jY2FtZXJhcylcclxuICAgICAgICB0aGlzLiNjYW1lcmFzID0gW107XHJcbiAgICAgIGlmICghdGhpcy4jY2FtZXJhc1tfaUNhbWVyYV0pIHtcclxuICAgICAgICBjb25zdCBnbHRmQ2FtZXJhOiBHTFRGLkNhbWVyYSA9IHRoaXMuZ2x0Zi5jYW1lcmFzW19pQ2FtZXJhXTtcclxuICAgICAgICBjb25zdCBjYW1lcmE6IENvbXBvbmVudENhbWVyYSA9IG5ldyBDb21wb25lbnRDYW1lcmEoKTtcclxuXHJcbiAgICAgICAgaWYgKGdsdGZDYW1lcmEucGVyc3BlY3RpdmUpXHJcbiAgICAgICAgICBjYW1lcmEucHJvamVjdENlbnRyYWwoXHJcbiAgICAgICAgICAgIGdsdGZDYW1lcmEucGVyc3BlY3RpdmUuYXNwZWN0UmF0aW8sXHJcbiAgICAgICAgICAgIGdsdGZDYW1lcmEucGVyc3BlY3RpdmUueWZvdiAqIENhbGMucmFkMmRlZyxcclxuICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgZ2x0ZkNhbWVyYS5wZXJzcGVjdGl2ZS56bmVhcixcclxuICAgICAgICAgICAgZ2x0ZkNhbWVyYS5wZXJzcGVjdGl2ZS56ZmFyXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIGNhbWVyYS5wcm9qZWN0T3J0aG9ncmFwaGljKFxyXG4gICAgICAgICAgICAtZ2x0ZkNhbWVyYS5vcnRob2dyYXBoaWMueG1hZyxcclxuICAgICAgICAgICAgZ2x0ZkNhbWVyYS5vcnRob2dyYXBoaWMueG1hZyxcclxuICAgICAgICAgICAgLWdsdGZDYW1lcmEub3J0aG9ncmFwaGljLnltYWcsXHJcbiAgICAgICAgICAgIGdsdGZDYW1lcmEub3J0aG9ncmFwaGljLnltYWdcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHJldHVybiBjYW1lcmE7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuI2NhbWVyYXNbX2lDYW1lcmFdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRBbmltYXRpb24oX25hbWU6IHN0cmluZyk6IFByb21pc2U8QW5pbWF0aW9uPiB7XHJcbiAgICAgIGNvbnN0IGlBbmltYXRpb246IG51bWJlciA9IHRoaXMuZ2x0Zi5hbmltYXRpb25zLmZpbmRJbmRleChfYW5pbWF0aW9uID0+IF9hbmltYXRpb24ubmFtZSA9PSBfbmFtZSk7XHJcbiAgICAgIGlmIChpQW5pbWF0aW9uID09IC0xKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGRuJ3QgZmluZCBuYW1lICR7X25hbWV9IGluIGdsdGYgYW5pbWF0aW9ucy5gKTtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0QW5pbWF0aW9uQnlJbmRleChpQW5pbWF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0QW5pbWF0aW9uQnlJbmRleChfaUFuaW1hdGlvbjogbnVtYmVyKTogUHJvbWlzZTxBbmltYXRpb24+IHtcclxuICAgICAgaWYgKCF0aGlzLiNhbmltYXRpb25zKVxyXG4gICAgICAgIHRoaXMuI2FuaW1hdGlvbnMgPSBbXTtcclxuICAgICAgaWYgKCF0aGlzLiNhbmltYXRpb25zW19pQW5pbWF0aW9uXSkge1xyXG4gICAgICAgIGNvbnN0IGdsdGZBbmltYXRpb246IEdMVEYuQW5pbWF0aW9uID0gdGhpcy5nbHRmLmFuaW1hdGlvbnNbX2lBbmltYXRpb25dO1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBtYXliZSByZWZhY3RvciB0aGlzIHRvIGl0ZXJhdGUgb3ZlciBjaGFubmVscyBkaXJlY3RseSBhbmQgcmVtb3ZlIHRoaXMgbWFwXHJcbiAgICAgICAgY29uc3QgbWFwaU5vZGVUb0dsdGZDaGFubmVsOiBHTFRGLkFuaW1hdGlvbkNoYW5uZWxbXVtdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBnbHRmQ2hhbm5lbCBvZiBnbHRmQW5pbWF0aW9uLmNoYW5uZWxzKSB7XHJcbiAgICAgICAgICBpZiAoZ2x0ZkNoYW5uZWwudGFyZ2V0Lm5vZGUgPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIGlmICghbWFwaU5vZGVUb0dsdGZDaGFubmVsW2dsdGZDaGFubmVsLnRhcmdldC5ub2RlXSlcclxuICAgICAgICAgICAgbWFwaU5vZGVUb0dsdGZDaGFubmVsW2dsdGZDaGFubmVsLnRhcmdldC5ub2RlXSA9IFtdO1xyXG4gICAgICAgICAgbWFwaU5vZGVUb0dsdGZDaGFubmVsW2dsdGZDaGFubmVsLnRhcmdldC5ub2RlXS5wdXNoKGdsdGZDaGFubmVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGFuaW1hdGlvblN0cnVjdHVyZTogQW5pbWF0aW9uU3RydWN0dXJlID0ge307XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgaU5vZGUgaW4gbWFwaU5vZGVUb0dsdGZDaGFubmVsKSB7XHJcbiAgICAgICAgICBjb25zdCBnbHRmQ2hhbm5lbHM6IEdMVEYuQW5pbWF0aW9uQ2hhbm5lbFtdID0gbWFwaU5vZGVUb0dsdGZDaGFubmVsW2lOb2RlXTtcclxuICAgICAgICAgIGNvbnN0IGdsdGZOb2RlOiBHTFRGLk5vZGUgPSB0aGlzLmdsdGYubm9kZXNbZ2x0ZkNoYW5uZWxzWzBdLnRhcmdldC5ub2RlXTtcclxuXHJcbiAgICAgICAgICBjb25zdCBwYXRoOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgICAgICAgcGF0aC5wdXNoKGdsdGZDaGFubmVsc1swXS50YXJnZXQubm9kZSk7XHJcbiAgICAgICAgICBsZXQgcm9vdDogR0xURi5Ob2RlID0gZ2x0Zk5vZGU7XHJcbiAgICAgICAgICB3aGlsZSAocm9vdC5wYXJlbnQgIT0gdW5kZWZpbmVkKSB7IC8vIHBhcmVudCBvZiBnbHRmTm9kZSBpcyBzZXQgd2hlbiBqc29uIGlzIGxvYWRlZFxyXG4gICAgICAgICAgICBwYXRoLnB1c2gocm9vdC5wYXJlbnQpO1xyXG4gICAgICAgICAgICByb290ID0gdGhpcy5nbHRmLm5vZGVzW3Jvb3QucGFyZW50XTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBsZXQgY3VycmVudFN0cnVjdHVyZTogQW5pbWF0aW9uU3RydWN0dXJlID0gYW5pbWF0aW9uU3RydWN0dXJlO1xyXG4gICAgICAgICAgZm9yIChjb25zdCBpUGF0aE5vZGUgb2YgcGF0aC5yZXZlcnNlKCkpIHtcclxuICAgICAgICAgICAgY29uc3QgcGF0aE5vZGU6IEdMVEYuTm9kZSA9IHRoaXMuZ2x0Zi5ub2Rlc1tpUGF0aE5vZGVdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRTdHJ1Y3R1cmUuY2hpbGRyZW4gPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgIGN1cnJlbnRTdHJ1Y3R1cmUuY2hpbGRyZW4gPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3RydWN0dXJlLmNoaWxkcmVuW3BhdGhOb2RlLm5hbWVdID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICBjdXJyZW50U3RydWN0dXJlLmNoaWxkcmVuW3BhdGhOb2RlLm5hbWVdID0ge307XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdHJ1Y3R1cmUgPSBjdXJyZW50U3RydWN0dXJlLmNoaWxkcmVuW3BhdGhOb2RlLm5hbWVdIGFzIEFuaW1hdGlvblN0cnVjdHVyZTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpU2tpbjogbnVtYmVyID0gdGhpcy5nbHRmLnNraW5zPy5maW5kSW5kZXgoX3NraW4gPT4gX3NraW4uam9pbnRzWzBdID09IGlQYXRoTm9kZSk7XHJcbiAgICAgICAgICAgIGlmIChpU2tpbiA+PSAwICYmIHRoaXMuZ2x0Zi5za2luc1tpU2tpbl0uam9pbnRzLmluY2x1ZGVzKGdsdGZDaGFubmVsc1swXS50YXJnZXQubm9kZSkpIHtcclxuICAgICAgICAgICAgICBjb25zdCBtdHhCb25lTG9jYWw6IEFuaW1hdGlvblN0cnVjdHVyZU1hdHJpeDR4NCA9IHt9O1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgZ2x0ZkNoYW5uZWwgb2YgZ2x0ZkNoYW5uZWxzKVxyXG4gICAgICAgICAgICAgICAgbXR4Qm9uZUxvY2FsW2dsdGZDaGFubmVsLnRhcmdldC5wYXRoXSA9XHJcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0QW5pbWF0aW9uU2VxdWVuY2VWZWN0b3IzKGdsdGZBbmltYXRpb24uc2FtcGxlcnNbZ2x0ZkNoYW5uZWwuc2FtcGxlcl0sIGdsdGZDaGFubmVsLnRhcmdldC5wYXRoKTtcclxuICAgICAgICAgICAgICBpZiAoY3VycmVudFN0cnVjdHVyZS5tdHhCb25lTG9jYWxzID09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRTdHJ1Y3R1cmUubXR4Qm9uZUxvY2FscyA9IHt9O1xyXG4gICAgICAgICAgICAgIChjdXJyZW50U3RydWN0dXJlLm10eEJvbmVMb2NhbHMgYXMgeyBbYm9uZU5hbWU6IHN0cmluZ106IEFuaW1hdGlvblN0cnVjdHVyZU1hdHJpeDR4NCB9KVtnbHRmTm9kZS5uYW1lXSA9IG10eEJvbmVMb2NhbDtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHBhdGhOb2RlID09IGdsdGZOb2RlKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgbXR4TG9jYWw6IEFuaW1hdGlvblN0cnVjdHVyZU1hdHJpeDR4NCA9IHt9O1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgZ2x0ZkNoYW5uZWwgb2YgZ2x0ZkNoYW5uZWxzKVxyXG4gICAgICAgICAgICAgICAgbXR4TG9jYWxbZ2x0ZkNoYW5uZWwudGFyZ2V0LnBhdGhdID1cclxuICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5nZXRBbmltYXRpb25TZXF1ZW5jZVZlY3RvcjMoZ2x0ZkFuaW1hdGlvbi5zYW1wbGVyc1tnbHRmQ2hhbm5lbC5zYW1wbGVyXSwgZ2x0ZkNoYW5uZWwudGFyZ2V0LnBhdGgpO1xyXG4gICAgICAgICAgICAgIGN1cnJlbnRTdHJ1Y3R1cmUuY29tcG9uZW50cyA9IHtcclxuICAgICAgICAgICAgICAgIENvbXBvbmVudFRyYW5zZm9ybTogW1xyXG4gICAgICAgICAgICAgICAgICB7IG10eExvY2FsOiBtdHhMb2NhbCB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4jYW5pbWF0aW9uc1tfaUFuaW1hdGlvbl0gPSBuZXcgQW5pbWF0aW9uKGdsdGZBbmltYXRpb24ubmFtZSwgYW5pbWF0aW9uU3RydWN0dXJlKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdGhpcy4jYW5pbWF0aW9uc1tfaUFuaW1hdGlvbl07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldE1lc2goX25hbWU6IHN0cmluZyk6IFByb21pc2U8TWVzaEltcG9ydD4ge1xyXG4gICAgICBjb25zdCBpTWVzaDogbnVtYmVyID0gdGhpcy5nbHRmLm1lc2hlcy5maW5kSW5kZXgoX21lc2ggPT4gX21lc2gubmFtZSA9PSBfbmFtZSk7XHJcbiAgICAgIGlmIChpTWVzaCA9PSAtMSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkbid0IGZpbmQgbmFtZSAke19uYW1lfSBpbiBnbHRmIG1lc2hlcy5gKTtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TWVzaEJ5SW5kZXgoaU1lc2gpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRNZXNoQnlJbmRleChfaU1lc2g6IG51bWJlcik6IFByb21pc2U8TWVzaEltcG9ydD4ge1xyXG4gICAgICBpZiAoIXRoaXMuI21lc2hlcylcclxuICAgICAgICB0aGlzLiNtZXNoZXMgPSBbXTtcclxuICAgICAgaWYgKCF0aGlzLiNtZXNoZXNbX2lNZXNoXSkge1xyXG4gICAgICAgIGNvbnN0IGdsdGZNZXNoOiBHTFRGLk1lc2ggPSB0aGlzLmdsdGYubWVzaGVzW19pTWVzaF07XHJcbiAgICAgICAgdGhpcy4jbWVzaGVzW19pTWVzaF0gPSBhd2FpdCAoXHJcbiAgICAgICAgICBnbHRmTWVzaC5wcmltaXRpdmVzWzBdLmF0dHJpYnV0ZXMuSk9JTlRTXzAgIT0gdW5kZWZpbmVkID9cclxuICAgICAgICAgICAgbmV3IE1lc2hTa2luKCkgOlxyXG4gICAgICAgICAgICBuZXcgTWVzaEltcG9ydCgpXHJcbiAgICAgICAgKS5sb2FkKE1lc2hMb2FkZXJHTFRGLCB0aGlzLnVybCwgZ2x0Zk1lc2gpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLiNtZXNoZXNbX2lNZXNoXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0TWF0ZXJpYWxCeUluZGV4KF9pTWF0ZXJpYWw6IG51bWJlciwgX3NraW46IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8TWF0ZXJpYWw+IHtcclxuICAgICAgaWYgKCF0aGlzLiNtYXRlcmlhbHMpXHJcbiAgICAgICAgdGhpcy4jbWF0ZXJpYWxzID0gW107XHJcbiAgICAgIGlmICghdGhpcy4jbWF0ZXJpYWxzW19pTWF0ZXJpYWxdKSB7XHJcbiAgICAgICAgY29uc3QgZ2x0Zk1hdGVyaWFsOiBHTFRGLk1hdGVyaWFsID0gdGhpcy5nbHRmLm1hdGVyaWFsc1tfaU1hdGVyaWFsXTtcclxuICAgICAgICAvLyBUT0RPOiBpbiB0aGUgZnV0dXJlIGNyZWF0ZSBhbiBhcHByb3ByaWF0ZSBzaGFkZXIgYmFzZWQgb24gdGhlIGdsdGYgbWF0ZXJpYWwgcHJvcGVydGllc1xyXG4gICAgICAgIGNvbnN0IGdsdGZCYXNlQ29sb3JUZXh0dXJlOiBHTFRGLlRleHR1cmVJbmZvID0gZ2x0Zk1hdGVyaWFsLnBick1ldGFsbGljUm91Z2huZXNzPy5iYXNlQ29sb3JUZXh0dXJlO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsOiBNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbChnbHRmTWF0ZXJpYWwubmFtZSwgZ2x0ZkJhc2VDb2xvclRleHR1cmUgPyBcclxuICAgICAgICAgIChfc2tpbiA/IFNoYWRlclBob25nVGV4dHVyZWRTa2luIDogU2hhZGVyUGhvbmdUZXh0dXJlZCkgOiBcclxuICAgICAgICAgIChfc2tpbiA/IFNoYWRlclBob25nU2tpbiA6IFNoYWRlclBob25nKSk7XHJcbiAgICAgICAgaWYgKGdsdGZCYXNlQ29sb3JUZXh0dXJlKSB7XHJcbiAgICAgICAgICBjb25zdCB0ZXh0dXJlOiBUZXh0dXJlID0gYXdhaXQgdGhpcy5nZXRUZXh0dXJlQnlJbmRleChnbHRmQmFzZUNvbG9yVGV4dHVyZS5pbmRleCk7XHJcbiAgICAgICAgICBtYXRlcmlhbC5jb2F0ID0gbmV3IENvYXRSZW1pc3NpdmVUZXh0dXJlZChcclxuICAgICAgICAgICAgbmV3IENvbG9yKC4uLmdsdGZNYXRlcmlhbC5wYnJNZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3IgfHwgWzEsIDEsIDEsIDFdKSwgLy8gVE9ETzogY2hlY2sgaWYgc2hhZGVyIHNob3VsZCBtdWx0aXBseSBiYXNlQ29sb3JUZXh0dXJlIHZhbHVlcyB3aXRoIGJhc2VDb2xvckZhY3RvclxyXG4gICAgICAgICAgICB0ZXh0dXJlLFxyXG4gICAgICAgICAgICAxLFxyXG4gICAgICAgICAgICAxXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLiNtYXRlcmlhbHNbX2lNYXRlcmlhbF0gPSBtYXRlcmlhbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuI21hdGVyaWFsc1tfaU1hdGVyaWFsXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGV4dHVyZUJ5SW5kZXgoX2lUZXh0dXJlOiBudW1iZXIpOiBQcm9taXNlPFRleHR1cmU+IHtcclxuICAgICAgaWYgKCF0aGlzLiN0ZXh0dXJlcylcclxuICAgICAgICB0aGlzLiN0ZXh0dXJlcyA9IFtdO1xyXG4gICAgICBpZiAoIXRoaXMuI3RleHR1cmVzW19pVGV4dHVyZV0pIHtcclxuICAgICAgICBjb25zdCBnbHRmVGV4dHVyZTogR0xURi5UZXh0dXJlID0gdGhpcy5nbHRmLnRleHR1cmVzW19pVGV4dHVyZV07XHJcbiAgICAgICAgY29uc3QgZ2x0ZlNhbXBsZXI6IEdMVEYuU2FtcGxlciA9IHRoaXMuZ2x0Zi5zYW1wbGVycz8uW2dsdGZUZXh0dXJlLnNhbXBsZXJdO1xyXG4gICAgICAgIGNvbnN0IGdsdGZJbWFnZTogR0xURi5JbWFnZSA9IHRoaXMuZ2x0Zi5pbWFnZXNbZ2x0ZlRleHR1cmUuc291cmNlXTtcclxuXHJcbiAgICAgICAgaWYgKGdsdGZTYW1wbGVyICYmIChnbHRmU2FtcGxlci53cmFwUyAhPSB1bmRlZmluZWQgfHwgZ2x0ZlNhbXBsZXIud3JhcFQgIT0gdW5kZWZpbmVkKSlcclxuICAgICAgICAgIGNvbnNvbGUud2FybihgJHtHTFRGTG9hZGVyLm5hbWV9OiBUZXh0dXJlICR7X2lUZXh0dXJlfSBpbiAnJHt0aGlzLnVybH0nIGhhcyBhIHdyYXBTIGFuZCB3cmFwVCBvZiAnJHtnZXRXZWJHTFBhcmFtZXRlck5hbWUoZ2x0ZlNhbXBsZXIud3JhcFMpfScgYW5kICcke2dldFdlYkdMUGFyYW1ldGVyTmFtZShnbHRmU2FtcGxlci53cmFwVCl9JyByZXNwZWN0aXZlbHkuIEZVREdFIG9ubHkgc3VwcG9ydHMgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgJyR7Z2V0V2ViR0xQYXJhbWV0ZXJOYW1lKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuUkVQRUFUKX0nLmApO1xyXG5cclxuICAgICAgICBsZXQgdXJsOiBzdHJpbmcgPSBnbHRmSW1hZ2UudXJpO1xyXG4gICAgICAgIGlmICghZ2x0ZkltYWdlLnVyaSAmJiBnbHRmSW1hZ2UuYnVmZmVyVmlldykge1xyXG4gICAgICAgICAgLy8gVE9ETzogdGhpcyBpcyBkdXBsaWNhdGUgY29kZSBmcm9tIGdldEJ1ZmZlckRhdGEsIG1heWJlIHJlZmFjdG9yIGdldEJ1ZmZlckRhdGEgdG8gaGFuZGxlIGJ1ZmZlclZpZXdJbmRleCBpbnB1dFxyXG4gICAgICAgICAgY29uc3QgZ2x0ZkJ1ZmZlclZpZXc6IEdMVEYuQnVmZmVyVmlldyA9IHRoaXMuZ2x0Zi5idWZmZXJWaWV3c1tnbHRmSW1hZ2UuYnVmZmVyVmlld107XHJcblxyXG4gICAgICAgICAgY29uc3QgYnVmZmVyOiBBcnJheUJ1ZmZlciA9IGF3YWl0IHRoaXMuZ2V0QnVmZmVyKGdsdGZCdWZmZXJWaWV3LmJ1ZmZlcik7XHJcbiAgICAgICAgICBjb25zdCBieXRlT2Zmc2V0OiBudW1iZXIgPSBnbHRmQnVmZmVyVmlldy5ieXRlT2Zmc2V0IHx8IDA7XHJcbiAgICAgICAgICBjb25zdCBieXRlTGVuZ3RoOiBudW1iZXIgPSBnbHRmQnVmZmVyVmlldy5ieXRlTGVuZ3RoIHx8IDA7XHJcblxyXG4gICAgICAgICAgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihcclxuICAgICAgICAgICAgW25ldyBVaW50OEFycmF5KGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCAvIFVpbnQ4QXJyYXkuQllURVNfUEVSX0VMRU1FTlQpXSxcclxuICAgICAgICAgICAgeyB0eXBlOiBnbHRmSW1hZ2UubWltZVR5cGUgfVxyXG4gICAgICAgICAgKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0ZXh0dXJlOiBUZXh0dXJlSW1hZ2UgPSBuZXcgVGV4dHVyZUltYWdlKCk7XHJcbiAgICAgICAgYXdhaXQgdGV4dHVyZS5sb2FkKHVybCk7XHJcbiAgICAgICAgaWYgKGdsdGZTYW1wbGVyICYmIGdsdGZTYW1wbGVyLm1hZ0ZpbHRlciA9PSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk5FQVJFU1QgJiYgZ2x0ZlNhbXBsZXIubWluRmlsdGVyID09IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVClcclxuICAgICAgICAgIHRleHR1cmUubWlwbWFwID0gTUlQTUFQLkNSSVNQO1xyXG4gICAgICAgIGVsc2UgaWYgKGdsdGZTYW1wbGVyICYmIGdsdGZTYW1wbGVyLm1hZ0ZpbHRlciA9PSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0Lk5FQVJFU1QgJiYgZ2x0ZlNhbXBsZXIubWluRmlsdGVyID09IFdlYkdMMlJlbmRlcmluZ0NvbnRleHQuTkVBUkVTVF9NSVBNQVBfTElORUFSKVxyXG4gICAgICAgICAgdGV4dHVyZS5taXBtYXAgPSBNSVBNQVAuTUVESVVNO1xyXG4gICAgICAgIGVsc2UgaWYgKGdsdGZTYW1wbGVyICYmIGdsdGZTYW1wbGVyLm1hZ0ZpbHRlciA9PSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0LkxJTkVBUiAmJiBnbHRmU2FtcGxlci5taW5GaWx0ZXIgPT0gV2ViR0wyUmVuZGVyaW5nQ29udGV4dC5MSU5FQVJfTUlQTUFQX0xJTkVBUilcclxuICAgICAgICAgIHRleHR1cmUubWlwbWFwID0gTUlQTUFQLkJMVVJSWTtcclxuICAgICAgICBlbHNlIGlmIChnbHRmU2FtcGxlciAmJiBnbHRmU2FtcGxlci5tYWdGaWx0ZXIgIT0gdW5kZWZpbmVkICYmIGdsdGZTYW1wbGVyLm1pbkZpbHRlciAhPSB1bmRlZmluZWQpXHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7R0xURkxvYWRlci5uYW1lfTogVGV4dHVyZSAke19pVGV4dHVyZX0gaW4gJyR7dGhpcy51cmx9JyBoYXMgYSBtYWdGaWx0ZXIgYW5kIG1pbkZpbHRlciBvZiAnJHtnZXRXZWJHTFBhcmFtZXRlck5hbWUoZ2x0ZlNhbXBsZXIubWFnRmlsdGVyKX0nIGFuZCAnJHtnZXRXZWJHTFBhcmFtZXRlck5hbWUoZ2x0ZlNhbXBsZXIubWluRmlsdGVyKX0nIHJlc3BlY3RpdmVseS4gRlVER0Ugb25seSBzdXBwb3J0cyB0aGUgZm9sbG93aW5nIGNvbWJpbmF0aW9uczogTkVBUkVTVCBhbmQgTkVBUkVTVCB8IE5FQVJFU1QgYW5kIE5FQVJFU1RfTUlQTUFQX0xJTkVBUiB8IExJTkVBUiBhbmQgTElORUFSX01JUE1BUF9MSU5FQVIuYCk7XHJcblxyXG4gICAgICAgIHRoaXMuI3RleHR1cmVzW19pVGV4dHVyZV0gPSB0ZXh0dXJlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy4jdGV4dHVyZXNbX2lUZXh0dXJlXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0U2tlbGV0b24oX25hbWU6IHN0cmluZyk6IFByb21pc2U8U2tlbGV0b24+IHtcclxuICAgICAgY29uc3QgaVNrZWxldG9uOiBudW1iZXIgPSB0aGlzLmdsdGYuc2tpbnMuZmluZEluZGV4KF9za2VsZXRvbiA9PiBfc2tlbGV0b24ubmFtZSA9PSBfbmFtZSk7XHJcbiAgICAgIGlmIChpU2tlbGV0b24gPT0gLTEpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZG4ndCBmaW5kIG5hbWUgJHtfbmFtZX0gaW4gZ2x0ZiBza2lucy5gKTtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0U2tlbGV0b25CeUluZGV4KGlTa2VsZXRvbik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFNrZWxldG9uQnlJbmRleChfaVNrZWxldG9uOiBudW1iZXIpOiBQcm9taXNlPFNrZWxldG9uPiB7XHJcbiAgICAgIGlmICghdGhpcy4jc2tlbGV0b25zKVxyXG4gICAgICAgIHRoaXMuI3NrZWxldG9ucyA9IFtdO1xyXG4gICAgICBpZiAoIXRoaXMuI3NrZWxldG9uc1tfaVNrZWxldG9uXSkge1xyXG4gICAgICAgIGNvbnN0IGdsdGZTa2VsZXRvbjogR0xURi5Ta2luID0gdGhpcy5nbHRmLnNraW5zW19pU2tlbGV0b25dO1xyXG4gICAgICAgIGNvbnN0IHNrZWxldG9uOiBTa2VsZXRvbiA9IGF3YWl0IHRoaXMuZ2V0Tm9kZUJ5SW5kZXgoZ2x0ZlNrZWxldG9uLmpvaW50c1swXSkgYXMgU2tlbGV0b247XHJcblxyXG4gICAgICAgIC8vIGNvbnZlcnQgZmxvYXQgYXJyYXkgdG8gYXJyYXkgb2YgbWF0cmljZXMgYW5kIHJlZ2lzdGVyIGJvbmVzXHJcbiAgICAgICAgY29uc3QgZmxvYXRBcnJheTogRmxvYXQzMkFycmF5ID0gYXdhaXQgdGhpcy5nZXRGbG9hdDMyQXJyYXkoZ2x0ZlNrZWxldG9uLmludmVyc2VCaW5kTWF0cmljZXMpO1xyXG4gICAgICAgIGNvbnN0IHNwYW46IG51bWJlciA9IDE2O1xyXG4gICAgICAgIGZvciAobGV0IGlGbG9hdDogbnVtYmVyID0gMCwgaUJvbmU6IG51bWJlciA9IDA7IGlGbG9hdCA8IGZsb2F0QXJyYXkubGVuZ3RoOyBpRmxvYXQgKz0gc3BhbiwgaUJvbmUrKykge1xyXG4gICAgICAgICAgY29uc3QgbXR4QmluZEludmVyc2U6IE1hdHJpeDR4NCA9IG5ldyBNYXRyaXg0eDQoKTtcclxuICAgICAgICAgIG10eEJpbmRJbnZlcnNlLnNldChmbG9hdEFycmF5LnN1YmFycmF5KGlGbG9hdCwgaUZsb2F0ICsgc3BhbikpO1xyXG4gICAgICAgICAgc2tlbGV0b24ucmVnaXN0ZXJCb25lKHRoaXMuI25vZGVzW2dsdGZTa2VsZXRvbi5qb2ludHNbaUJvbmVdXSwgbXR4QmluZEludmVyc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBQcm9qZWN0LnJlZ2lzdGVyKHNrZWxldG9uKTtcclxuICAgICAgICB0aGlzLiNza2VsZXRvbnNbX2lTa2VsZXRvbl0gPSBza2VsZXRvbjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuI3NrZWxldG9uc1tfaVNrZWxldG9uXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0VWludDhBcnJheShfaUFjY2Vzc29yOiBudW1iZXIpOiBQcm9taXNlPFVpbnQ4QXJyYXk+IHtcclxuICAgICAgY29uc3QgYXJyYXk6IFR5cGVkQXJyYXkgPSBhd2FpdCB0aGlzLmdldEJ1ZmZlckRhdGEoX2lBY2Nlc3Nvcik7XHJcbiAgICAgIGlmICh0aGlzLmdsdGYuYWNjZXNzb3JzW19pQWNjZXNzb3JdPy5jb21wb25lbnRUeXBlID09IENPTVBPTkVOVF9UWVBFLlVOU0lHTkVEX0JZVEUpXHJcbiAgICAgICAgcmV0dXJuIGFycmF5IGFzIFVpbnQ4QXJyYXk7XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgRXhwZWN0ZWQgY29tcG9uZW50IHR5cGUgVU5TSUdORURfQllURSBidXQgd2FzICR7Q09NUE9ORU5UX1RZUEVbdGhpcy5nbHRmLmFjY2Vzc29yc1tfaUFjY2Vzc29yXT8uY29tcG9uZW50VHlwZV19LmApO1xyXG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LmZyb20oYXJyYXkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldFVpbnQxNkFycmF5KF9pQWNjZXNzb3I6IG51bWJlcik6IFByb21pc2U8VWludDE2QXJyYXk+IHtcclxuICAgICAgY29uc3QgYXJyYXk6IFR5cGVkQXJyYXkgPSBhd2FpdCB0aGlzLmdldEJ1ZmZlckRhdGEoX2lBY2Nlc3Nvcik7XHJcbiAgICAgIGlmICh0aGlzLmdsdGYuYWNjZXNzb3JzW19pQWNjZXNzb3JdPy5jb21wb25lbnRUeXBlID09IENPTVBPTkVOVF9UWVBFLlVOU0lHTkVEX1NIT1JUKVxyXG4gICAgICAgIHJldHVybiBhcnJheSBhcyBVaW50MTZBcnJheTtcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBFeHBlY3RlZCBjb21wb25lbnQgdHlwZSBVTlNJR05FRF9TSE9SVCBidXQgd2FzICR7Q09NUE9ORU5UX1RZUEVbdGhpcy5nbHRmLmFjY2Vzc29yc1tfaUFjY2Vzc29yXT8uY29tcG9uZW50VHlwZV19LmApO1xyXG4gICAgICAgIHJldHVybiBVaW50MTZBcnJheS5mcm9tKGFycmF5KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRVaW50MzJBcnJheShfaUFjY2Vzc29yOiBudW1iZXIpOiBQcm9taXNlPFVpbnQzMkFycmF5PiB7XHJcbiAgICAgIGNvbnN0IGFycmF5OiBUeXBlZEFycmF5ID0gYXdhaXQgdGhpcy5nZXRCdWZmZXJEYXRhKF9pQWNjZXNzb3IpO1xyXG4gICAgICBpZiAodGhpcy5nbHRmLmFjY2Vzc29yc1tfaUFjY2Vzc29yXT8uY29tcG9uZW50VHlwZSA9PSBDT01QT05FTlRfVFlQRS5VTlNJR05FRF9JTlQpXHJcbiAgICAgICAgcmV0dXJuIGFycmF5IGFzIFVpbnQzMkFycmF5O1xyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oYEV4cGVjdGVkIGNvbXBvbmVudCB0eXBlIFVOU0lHTkVEX0lOVCBidXQgd2FzICR7Q09NUE9ORU5UX1RZUEVbdGhpcy5nbHRmLmFjY2Vzc29yc1tfaUFjY2Vzc29yXT8uY29tcG9uZW50VHlwZV19LmApO1xyXG4gICAgICAgIHJldHVybiBVaW50MzJBcnJheS5mcm9tKGFycmF5KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRGbG9hdDMyQXJyYXkoX2lBY2Nlc3NvcjogbnVtYmVyKTogUHJvbWlzZTxGbG9hdDMyQXJyYXk+IHtcclxuICAgICAgY29uc3QgYXJyYXk6IFR5cGVkQXJyYXkgPSBhd2FpdCB0aGlzLmdldEJ1ZmZlckRhdGEoX2lBY2Nlc3Nvcik7XHJcbiAgICAgIGlmICh0aGlzLmdsdGYuYWNjZXNzb3JzW19pQWNjZXNzb3JdPy5jb21wb25lbnRUeXBlID09IENPTVBPTkVOVF9UWVBFLkZMT0FUKVxyXG4gICAgICAgIHJldHVybiBhcnJheSBhcyBGbG9hdDMyQXJyYXk7XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgRXhwZWN0ZWQgY29tcG9uZW50IHR5cGUgRkxPQVQgYnV0IHdhcyAke0NPTVBPTkVOVF9UWVBFW3RoaXMuZ2x0Zi5hY2Nlc3NvcnNbX2lBY2Nlc3Nvcl0/LmNvbXBvbmVudFR5cGVdfS5gKTtcclxuICAgICAgICByZXR1cm4gRmxvYXQzMkFycmF5LmZyb20oYXJyYXkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRCdWZmZXJEYXRhKF9pQWNjZXNzb3I6IG51bWJlcik6IFByb21pc2U8VHlwZWRBcnJheT4ge1xyXG4gICAgICBjb25zdCBnbHRmQWNjZXNzb3I6IEdMVEYuQWNjZXNzb3IgPSB0aGlzLmdsdGYuYWNjZXNzb3JzW19pQWNjZXNzb3JdO1xyXG4gICAgICBpZiAoIWdsdGZBY2Nlc3NvcilcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGFjY2Vzc29yXCIpO1xyXG5cclxuICAgICAgY29uc3QgZ2x0ZkJ1ZmZlclZpZXc6IEdMVEYuQnVmZmVyVmlldyA9IHRoaXMuZ2x0Zi5idWZmZXJWaWV3c1tnbHRmQWNjZXNzb3IuYnVmZmVyVmlld107XHJcbiAgICAgIGlmICghZ2x0ZkJ1ZmZlclZpZXcpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBidWZmZXIgdmlld1wiKTtcclxuXHJcbiAgICAgIGNvbnN0IGJ1ZmZlcjogQXJyYXlCdWZmZXIgPSBhd2FpdCB0aGlzLmdldEJ1ZmZlcihnbHRmQnVmZmVyVmlldy5idWZmZXIpOztcclxuICAgICAgY29uc3QgYnl0ZU9mZnNldDogbnVtYmVyID0gZ2x0ZkJ1ZmZlclZpZXcuYnl0ZU9mZnNldCB8fCAwO1xyXG4gICAgICBjb25zdCBieXRlTGVuZ3RoOiBudW1iZXIgPSBnbHRmQnVmZmVyVmlldy5ieXRlTGVuZ3RoIHx8IDA7XHJcblxyXG4gICAgICBzd2l0Y2ggKGdsdGZBY2Nlc3Nvci5jb21wb25lbnRUeXBlKSB7XHJcbiAgICAgICAgY2FzZSBDT01QT05FTlRfVFlQRS5VTlNJR05FRF9CWVRFOlxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCAvIFVpbnQ4QXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xyXG5cclxuICAgICAgICBjYXNlIENPTVBPTkVOVF9UWVBFLkJZVEU6XHJcbiAgICAgICAgICByZXR1cm4gbmV3IEludDhBcnJheShidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGggLyBJbnQ4QXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xyXG5cclxuICAgICAgICBjYXNlIENPTVBPTkVOVF9UWVBFLlVOU0lHTkVEX1NIT1JUOlxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBVaW50MTZBcnJheShidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGggLyBVaW50MTZBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XHJcblxyXG4gICAgICAgIGNhc2UgQ09NUE9ORU5UX1RZUEUuU0hPUlQ6XHJcbiAgICAgICAgICByZXR1cm4gbmV3IEludDE2QXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoIC8gSW50MTZBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XHJcblxyXG4gICAgICAgIGNhc2UgQ09NUE9ORU5UX1RZUEUuVU5TSUdORURfSU5UOlxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBVaW50MzJBcnJheShidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGggLyBVaW50MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7XHJcblxyXG4gICAgICAgIGNhc2UgQ09NUE9ORU5UX1RZUEUuSU5UOlxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCAvIEludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO1xyXG5cclxuICAgICAgICBjYXNlIENPTVBPTkVOVF9UWVBFLkZMT0FUOlxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoIC8gRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcclxuXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgY29tcG9uZW50IHR5cGU6ICR7Z2x0ZkFjY2Vzc29yLmNvbXBvbmVudFR5cGV9LmApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRCdWZmZXIoX2lCdWZmZXI6IG51bWJlcik6IFByb21pc2U8QXJyYXlCdWZmZXI+IHtcclxuICAgICAgY29uc3QgZ2x0ZkJ1ZmZlcjogR0xURi5CdWZmZXIgPSB0aGlzLmdsdGYuYnVmZmVyc1tfaUJ1ZmZlcl07XHJcbiAgICAgIGlmICghZ2x0ZkJ1ZmZlcilcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGJ1ZmZlclwiKTtcclxuXHJcbiAgICAgIGlmICghdGhpcy4jYnVmZmVycylcclxuICAgICAgICB0aGlzLiNidWZmZXJzID0gW107XHJcbiAgICAgIGlmICghdGhpcy4jYnVmZmVyc1tfaUJ1ZmZlcl0pIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZTogUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChnbHRmQnVmZmVyLnVyaSk7XHJcbiAgICAgICAgdGhpcy4jYnVmZmVyc1tfaUJ1ZmZlcl0gPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy4jYnVmZmVyc1tfaUJ1ZmZlcl07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRBbmltYXRpb25TZXF1ZW5jZVZlY3RvcjMoX3NhbXBsZXI6IEdMVEYuQW5pbWF0aW9uU2FtcGxlciwgX3RyYW5zZm9ybWF0aW9uVHlwZTogR0xURi5BbmltYXRpb25DaGFubmVsVGFyZ2V0W1wicGF0aFwiXSk6IFByb21pc2U8QW5pbWF0aW9uU3RydWN0dXJlVmVjdG9yMyB8IEFuaW1hdGlvblN0cnVjdHVyZVZlY3RvcjQ+IHtcclxuICAgICAgY29uc3QgaW5wdXQ6IEZsb2F0MzJBcnJheSA9IGF3YWl0IHRoaXMuZ2V0RmxvYXQzMkFycmF5KF9zYW1wbGVyLmlucHV0KTtcclxuICAgICAgY29uc3Qgb3V0cHV0OiBGbG9hdDMyQXJyYXkgPSBhd2FpdCB0aGlzLmdldEZsb2F0MzJBcnJheShfc2FtcGxlci5vdXRwdXQpO1xyXG4gICAgICBjb25zdCBtaWxsaXNQZXJTZWNvbmQ6IG51bWJlciA9IDEwMDA7XHJcbiAgICAgIGNvbnN0IGlzUm90YXRpb246IGJvb2xlYW4gPSBfdHJhbnNmb3JtYXRpb25UeXBlID09IFwicm90YXRpb25cIjtcclxuXHJcbiAgICAgIGNvbnN0IHNlcXVlbmNlczogQW5pbWF0aW9uU3RydWN0dXJlVmVjdG9yMyB8IEFuaW1hdGlvblN0cnVjdHVyZVZlY3RvcjQgPSB7fTtcclxuICAgICAgc2VxdWVuY2VzLnggPSBuZXcgQW5pbWF0aW9uU2VxdWVuY2UoKTtcclxuICAgICAgc2VxdWVuY2VzLnkgPSBuZXcgQW5pbWF0aW9uU2VxdWVuY2UoKTtcclxuICAgICAgc2VxdWVuY2VzLnogPSBuZXcgQW5pbWF0aW9uU2VxdWVuY2UoKTtcclxuICAgICAgaWYgKGlzUm90YXRpb24pXHJcbiAgICAgICAgc2VxdWVuY2VzLncgPSBuZXcgQW5pbWF0aW9uU2VxdWVuY2UoKTtcclxuXHJcbiAgICAgIGZvciAobGV0IGlJbnB1dDogbnVtYmVyID0gMDsgaUlucHV0IDwgaW5wdXQubGVuZ3RoOyArK2lJbnB1dCkge1xyXG4gICAgICAgIGxldCBpT3V0cHV0OiBudW1iZXIgPSBpSW5wdXQgKiAoX3RyYW5zZm9ybWF0aW9uVHlwZSA9PSBcInJvdGF0aW9uXCIgPyA0IDogMyk7IC8vIG91dHB1dCBidWZmZXIgZWl0aGVyIGNvbnRhaW5zIGRhdGEgZm9yIHF1YXRlcm5pb24gb3IgdmVjdG9yM1xyXG4gICAgICAgIGxldCB0aW1lOiBudW1iZXIgPSBtaWxsaXNQZXJTZWNvbmQgKiBpbnB1dFtpSW5wdXRdO1xyXG4gICAgICAgIHNlcXVlbmNlcy54LmFkZEtleShuZXcgQW5pbWF0aW9uS2V5KHRpbWUsIG91dHB1dFtpT3V0cHV0ICsgMF0pKTtcclxuICAgICAgICBzZXF1ZW5jZXMueS5hZGRLZXkobmV3IEFuaW1hdGlvbktleSh0aW1lLCBvdXRwdXRbaU91dHB1dCArIDFdKSk7XHJcbiAgICAgICAgc2VxdWVuY2VzLnouYWRkS2V5KG5ldyBBbmltYXRpb25LZXkodGltZSwgb3V0cHV0W2lPdXRwdXQgKyAyXSkpO1xyXG4gICAgICAgIGlmIChpc1JvdGF0aW9uKVxyXG4gICAgICAgICAgKDxBbmltYXRpb25TdHJ1Y3R1cmVWZWN0b3I0PnNlcXVlbmNlcykudy5hZGRLZXkobmV3IEFuaW1hdGlvbktleSh0aW1lLCBvdXRwdXRbaU91dHB1dCArIDNdKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBzZXF1ZW5jZXM7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRXZWJHTFBhcmFtZXRlck5hbWUoX3ZhbHVlOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKFdlYkdMMlJlbmRlcmluZ0NvbnRleHQpLmZpbmQoX2tleSA9PiBSZWZsZWN0LmdldChXZWJHTDJSZW5kZXJpbmdDb250ZXh0LCBfa2V5KSA9PSBfdmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZW51bSBDT01QT05FTlRfVFlQRSB7XHJcbiAgICBCWVRFID0gNTEyMCxcclxuICAgIFVOU0lHTkVEX0JZVEUgPSA1MTIxLFxyXG4gICAgU0hPUlQgPSA1MTIyLFxyXG4gICAgVU5TSUdORURfU0hPUlQgPSA1MTIzLFxyXG4gICAgSU5UID0gNTEyNCxcclxuICAgIFVOU0lHTkVEX0lOVCA9IDUxMjUsXHJcbiAgICBGTE9BVCA9IDUxMjZcclxuICB9XHJcblxyXG4gIHR5cGUgVHlwZWRBcnJheSA9IFVpbnQ4QXJyYXkgfCBVaW50MTZBcnJheSB8IFVpbnQzMkFycmF5IHwgSW50OEFycmF5IHwgSW50MTZBcnJheSB8IEludDMyQXJyYXkgfCBGbG9hdDMyQXJyYXkgfCBGbG9hdDY0QXJyYXk7XHJcblxyXG4gIC8vIHR5cGUgVHJhbnNmb3JtYXRpb25UeXBlID0gXCJyb3RhdGlvblwiIHwgXCJzY2FsZVwiIHwgXCJ0cmFuc2xhdGlvblwiO1xyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGxldCBzaGFkZXJTb3VyY2VzOiB7W3NvdXJjZTogc3RyaW5nXTogc3RyaW5nfSA9IHt9O1xyXG4gIHNoYWRlclNvdXJjZXNbXCJTaGFkZXJQaG9uZy5mcmFnXCJdID0gLypnbHNsKi8gYCN2ZXJzaW9uIDMwMCBlc1xyXG4vKipcclxuKiBQaG9uZyBzaGFkaW5nXHJcbiogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjJcclxuKi9cclxuXHJcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG5wcmVjaXNpb24gaGlnaHAgaW50O1xyXG5cclxuICAvLyBURVhUVVJFOiBpbnB1dCBVVnMgYW5kIHRleHR1cmVcclxuICAjaWYgZGVmaW5lZChURVhUVVJFKVxyXG5pbiB2ZWMyIHZfdmN0VGV4dHVyZTtcclxudW5pZm9ybSBzYW1wbGVyMkQgdV90ZXh0dXJlO1xyXG4gICNlbmRpZlxyXG5cclxudW5pZm9ybSB2ZWM0IHVfdmN0Q29sb3I7XHJcbnVuaWZvcm0gZmxvYXQgdV9mRGlmZnVzZTtcclxudW5pZm9ybSBmbG9hdCB1X2ZTcGVjdWxhcjtcclxudW5pZm9ybSBtYXQ0IHVfbXR4TWVzaFRvV29ybGQ7XHJcbnVuaWZvcm0gdmVjMyB1X3ZjdENhbWVyYTtcclxuXHJcbmluIHZlYzQgdl92Y3RDb2xvcjtcclxuaW4gdmVjNCB2X3ZjdFBvc2l0aW9uO1xyXG5pbiB2ZWMzIHZfdmN0Tm9ybWFsO1xyXG5vdXQgdmVjNCB2Y3RGcmFnO1xyXG5cclxuc3RydWN0IExpZ2h0IHtcclxuICB2ZWM0IHZjdENvbG9yO1xyXG4gIG1hdDQgbXR4U2hhcGU7XHJcbiAgbWF0NCBtdHhTaGFwZUludmVyc2U7XHJcbn07XHJcblxyXG5jb25zdCB1aW50IE1BWF9MSUdIVFNfRElSRUNUSU9OQUwgPSAxNXU7XHJcbmNvbnN0IHVpbnQgTUFYX0xJR0hUU19QT0lOVCA9IDEwMHU7XHJcbmNvbnN0IHVpbnQgTUFYX0xJR0hUU19TUE9UID0gMTAwdTtcclxuXHJcbmxheW91dChzdGQxNDApIHVuaWZvcm0gTGlnaHRzIHtcclxuICB1aW50IHVfbkxpZ2h0c0RpcmVjdGlvbmFsO1xyXG4gIHVpbnQgdV9uTGlnaHRzUG9pbnQ7XHJcbiAgdWludCB1X25MaWdodHNTcG90O1xyXG4gIExpZ2h0IHVfYW1iaWVudDtcclxuICBMaWdodCB1X2RpcmVjdGlvbmFsW01BWF9MSUdIVFNfRElSRUNUSU9OQUxdO1xyXG4gIExpZ2h0IHVfcG9pbnRbTUFYX0xJR0hUU19QT0lOVF07XHJcbiAgTGlnaHQgdV9zcG90W01BWF9MSUdIVFNfU1BPVF07XHJcbn07XHJcblxyXG5mbG9hdCBjYWxjdWxhdGVSZWZsZWN0aW9uKHZlYzMgX3ZjdExpZ2h0LCB2ZWMzIF92Y3RWaWV3LCB2ZWMzIF92Y3ROb3JtYWwsIGZsb2F0IF9mU3BlY3VsYXIpIHtcclxuICBpZihfZlNwZWN1bGFyIDw9IDAuMClcclxuICAgIHJldHVybiAwLjA7XHJcbiAgdmVjMyB2Y3RSZWZsZWN0aW9uID0gbm9ybWFsaXplKHJlZmxlY3QoLV92Y3RMaWdodCwgX3ZjdE5vcm1hbCkpO1xyXG4gIGZsb2F0IGZIaXRDYW1lcmEgPSBkb3QodmN0UmVmbGVjdGlvbiwgX3ZjdFZpZXcpO1xyXG4gIC8vIGF0dGVtcHRlZCBCTElOTiBcclxuICAvLyB2ZWMzIGhhbGZ3YXkgPSBub3JtYWxpemUoX3ZjdFZpZXcgKyBfdmN0TGlnaHQpO1xyXG4gIC8vIGZsb2F0IGZIaXRDYW1lcmEgPSBkb3QoLWhhbGZ3YXksIF92Y3ROb3JtYWwpO1xyXG4gIHJldHVybiBwb3cobWF4KGZIaXRDYW1lcmEsIDAuMCksIF9mU3BlY3VsYXIgKiAxMC4wKSAqIF9mU3BlY3VsYXI7IC8vIDEwLjAgPSBtYWdpYyBudW1iZXIsIGxvb2tzIGdvb2QuLi4gXHJcbn1cclxuXHJcbnZlYzQgaWxsdW1pbmF0ZURpcmVjdGVkKHZlYzMgX3ZjdERpcmVjdGlvbiwgdmVjMyBfdmN0Tm9ybWFsLCB2ZWM0IF92Y3RDb2xvciwgdmVjMyBfdmN0VmlldywgZmxvYXQgX2ZTcGVjdWxhcikge1xyXG4gIHZlYzQgdmN0UmVzdWx0ID0gdmVjNCgwLCAwLCAwLCAxKTtcclxuICB2ZWMzIHZjdERpcmVjdGlvbiA9IG5vcm1hbGl6ZShfdmN0RGlyZWN0aW9uKTtcclxuICBmbG9hdCBmSWxsdW1pbmF0aW9uID0gLWRvdChfdmN0Tm9ybWFsLCB2Y3REaXJlY3Rpb24pO1xyXG4gIGlmKGZJbGx1bWluYXRpb24gPiAwLjBmKSB7XHJcbiAgICB2Y3RSZXN1bHQgKz0gdV9mRGlmZnVzZSAqIGZJbGx1bWluYXRpb24gKiBfdmN0Q29sb3I7XHJcbiAgICBmbG9hdCBmUmVmbGVjdGlvbiA9IGNhbGN1bGF0ZVJlZmxlY3Rpb24odmN0RGlyZWN0aW9uLCBfdmN0VmlldywgX3ZjdE5vcm1hbCwgX2ZTcGVjdWxhcik7XHJcbiAgICB2Y3RSZXN1bHQgKz0gZlJlZmxlY3Rpb24gKiBfdmN0Q29sb3I7XHJcbiAgfVxyXG4gIHJldHVybiB2Y3RSZXN1bHQ7XHJcbn1cclxuXHJcbnZvaWQgbWFpbigpIHtcclxuICB2Y3RGcmFnID0gdl92Y3RDb2xvcjtcclxuICB2ZWMzIHZjdFZpZXcgPSBub3JtYWxpemUodmVjMyh1X210eE1lc2hUb1dvcmxkICogdl92Y3RQb3NpdGlvbikgLSB1X3ZjdENhbWVyYSk7XHJcblxyXG4gIGZvcih1aW50IGkgPSAwdTsgaSA8IHVfbkxpZ2h0c0RpcmVjdGlvbmFsOyBpKyspIHtcclxuICAgIHZlYzMgdmN0RGlyZWN0aW9uID0gdmVjMyh1X2RpcmVjdGlvbmFsW2ldLm10eFNoYXBlICogdmVjNCgwLjAsIDAuMCwgMS4wLCAxLjApKTtcclxuICAgIHZjdEZyYWcgKz0gaWxsdW1pbmF0ZURpcmVjdGVkKHZjdERpcmVjdGlvbiwgdl92Y3ROb3JtYWwsIHVfZGlyZWN0aW9uYWxbaV0udmN0Q29sb3IsIHZjdFZpZXcsIHVfZlNwZWN1bGFyKTtcclxuICB9XHJcbiAgLy8gY2FsY3VsYXRlIHBvaW50IGxpZ2h0IGVmZmVjdFxyXG4gIGZvcih1aW50IGkgPSAwdTsgaSA8IHVfbkxpZ2h0c1BvaW50OyBpKyspIHtcclxuICAgIHZlYzMgdmN0UG9zaXRpb25MaWdodCA9IHZlYzModV9wb2ludFtpXS5tdHhTaGFwZSAqIHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKSk7XHJcbiAgICB2ZWMzIHZjdERpcmVjdGlvbiA9IHZlYzModV9tdHhNZXNoVG9Xb3JsZCAqIHZfdmN0UG9zaXRpb24pIC0gdmN0UG9zaXRpb25MaWdodDtcclxuICAgIGZsb2F0IGZJbnRlbnNpdHkgPSAxLjAgLSBsZW5ndGgobWF0Myh1X3BvaW50W2ldLm10eFNoYXBlSW52ZXJzZSkgKiB2Y3REaXJlY3Rpb24pO1xyXG4gICAgaWYoZkludGVuc2l0eSA8IDAuMClcclxuICAgICAgY29udGludWU7XHJcbiAgICB2Y3RGcmFnICs9IGlsbHVtaW5hdGVEaXJlY3RlZCh2Y3REaXJlY3Rpb24sIHZfdmN0Tm9ybWFsLCBmSW50ZW5zaXR5ICogdV9wb2ludFtpXS52Y3RDb2xvciwgdmN0VmlldywgdV9mU3BlY3VsYXIpO1xyXG4gIH1cclxuICAvLyBjYWxjdWxhdGUgc3BvdCBsaWdodCBlZmZlY3RcclxuICBmb3IodWludCBpID0gMHU7IGkgPCB1X25MaWdodHNTcG90OyBpKyspIHtcclxuICAgIHZlYzMgdmN0UG9zaXRpb25MaWdodCA9IHZlYzModV9zcG90W2ldLm10eFNoYXBlICogdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApKTtcclxuICAgIHZlYzMgdmN0RGlyZWN0aW9uID0gdmVjMyh1X210eE1lc2hUb1dvcmxkICogdl92Y3RQb3NpdGlvbikgLSB2Y3RQb3NpdGlvbkxpZ2h0O1xyXG4gICAgdmVjMyB2Y3REaXJlY3Rpb25JbnZlcnRlZCA9IG1hdDModV9zcG90W2ldLm10eFNoYXBlSW52ZXJzZSkgKiB2Y3REaXJlY3Rpb247XHJcbiAgICBpZih2Y3REaXJlY3Rpb25JbnZlcnRlZC56IDw9IDAuMClcclxuICAgICAgY29udGludWU7XHJcbiAgICBmbG9hdCBmSW50ZW5zaXR5ID0gMS4wIC0gbWluKDEuMCwgMi4wICogbGVuZ3RoKHZjdERpcmVjdGlvbkludmVydGVkLnh5KSAvIHZjdERpcmVjdGlvbkludmVydGVkLnopO1xyXG4gICAgZkludGVuc2l0eSAqPSAxLjAgLSBwb3codmN0RGlyZWN0aW9uSW52ZXJ0ZWQueiwgMi4wKTtcclxuICAgIGlmKGZJbnRlbnNpdHkgPCAwLjApXHJcbiAgICAgIGNvbnRpbnVlO1xyXG4gICAgdmN0RnJhZyArPSBpbGx1bWluYXRlRGlyZWN0ZWQodmN0RGlyZWN0aW9uLCB2X3ZjdE5vcm1hbCwgZkludGVuc2l0eSAqIHVfc3BvdFtpXS52Y3RDb2xvciwgdmN0VmlldywgdV9mU3BlY3VsYXIpO1xyXG4gIH1cclxuXHJcbiAgLy8gVEVYVFVSRTogbXVsdGlwbHkgd2l0aCB0ZXhlbCBjb2xvclxyXG4gICAgI2lmIGRlZmluZWQoVEVYVFVSRSlcclxuICB2ZWM0IHZjdENvbG9yVGV4dHVyZSA9IHRleHR1cmUodV90ZXh0dXJlLCB2X3ZjdFRleHR1cmUpO1xyXG4gIHZjdEZyYWcgKj0gdmN0Q29sb3JUZXh0dXJlO1xyXG4gICAgI2VuZGlmXHJcbn1gO1xyXG4gIHNoYWRlclNvdXJjZXNbXCJTaGFkZXJQaWNrLmZyYWdcIl0gPSAvKmdsc2wqLyBgI3ZlcnNpb24gMzAwIGVzXHJcbi8qKlxyXG4qIFJlbmRlcnMgZm9yIFJheWNhc3RpbmdcclxuKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4qL1xyXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxucHJlY2lzaW9uIGhpZ2hwIGludDtcclxuXHJcbnVuaWZvcm0gaW50IHVfaWQ7XHJcbnVuaWZvcm0gdmVjMiB1X3ZjdFNpemU7XHJcbnVuaWZvcm0gdmVjNCB1X3ZjdENvbG9yO1xyXG5vdXQgaXZlYzQgdmN0RnJhZztcclxuXHJcbnZvaWQgbWFpbigpIHtcclxuICAgIGludCBwaXhlbCA9IGludCh0cnVuYyhnbF9GcmFnQ29vcmQueCkgKyB1X3ZjdFNpemUueCAqIHRydW5jKGdsX0ZyYWdDb29yZC55KSk7XHJcblxyXG4gICAgaWYgKHBpeGVsICE9IHVfaWQpXHJcbiAgICAgIGRpc2NhcmQ7XHJcblxyXG4gICAgdWludCBpY29sb3IgPSB1aW50KHVfdmN0Q29sb3IuciAqIDI1NS4wKSA8PCAyNCB8IHVpbnQodV92Y3RDb2xvci5nICogMjU1LjApIDw8IDE2IHwgdWludCh1X3ZjdENvbG9yLmIgKiAyNTUuMCkgPDwgOCB8IHVpbnQodV92Y3RDb2xvci5hICogMjU1LjApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICB2Y3RGcmFnID0gaXZlYzQoZmxvYXRCaXRzVG9JbnQoZ2xfRnJhZ0Nvb3JkLnopLCBpY29sb3IsIDAsIDApO1xyXG59YDtcclxuICBzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGljay52ZXJ0XCJdID0gLypnbHNsKi8gYCN2ZXJzaW9uIDMwMCBlc1xyXG4vKipcclxuKiBSZW5kZXJzIGZvciBSYXljYXN0aW5nXHJcbiogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuKi9cclxuaW4gdmVjMyBhX3ZjdFBvc2l0aW9uOyAgICAgICBcclxudW5pZm9ybSBtYXQ0IHVfbXR4TWVzaFRvVmlldztcclxuXHJcbnZvaWQgbWFpbigpIHsgICBcclxuICAgIGdsX1Bvc2l0aW9uID0gdV9tdHhNZXNoVG9WaWV3ICogdmVjNChhX3ZjdFBvc2l0aW9uLCAxLjApO1xyXG59YDtcclxuICBzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGlja1RleHR1cmVkLmZyYWdcIl0gPSAvKmdsc2wqLyBgI3ZlcnNpb24gMzAwIGVzXHJcbi8qKlxyXG4qIFJlbmRlcnMgZm9yIFJheWNhc3RpbmdcclxuKiBAYXV0aG9ycyBKaXJrYSBEZWxsJ09yby1GcmllZGwsIEhGVSwgMjAxOVxyXG4qL1xyXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxucHJlY2lzaW9uIGhpZ2hwIGludDtcclxuXHJcbnVuaWZvcm0gaW50IHVfaWQ7XHJcbnVuaWZvcm0gdmVjMiB1X3ZjdFNpemU7XHJcbmluIHZlYzIgdl92Y3RUZXh0dXJlO1xyXG51bmlmb3JtIHZlYzQgdV92Y3RDb2xvcjtcclxudW5pZm9ybSBzYW1wbGVyMkQgdV90ZXh0dXJlO1xyXG5cclxub3V0IGl2ZWM0IHZjdEZyYWc7XHJcblxyXG52b2lkIG1haW4oKSB7XHJcbiAgICBpbnQgcGl4ZWwgPSBpbnQodHJ1bmMoZ2xfRnJhZ0Nvb3JkLngpICsgdV92Y3RTaXplLnggKiB0cnVuYyhnbF9GcmFnQ29vcmQueSkpO1xyXG5cclxuICAgIGlmIChwaXhlbCAhPSB1X2lkKVxyXG4gICAgICBkaXNjYXJkO1xyXG4gICAgXHJcbiAgICB2ZWM0IHZjdENvbG9yID0gdV92Y3RDb2xvciAqIHRleHR1cmUodV90ZXh0dXJlLCB2X3ZjdFRleHR1cmUpO1xyXG4gICAgdWludCBpY29sb3IgPSB1aW50KHZjdENvbG9yLnIgKiAyNTUuMCkgPDwgMjQgfCB1aW50KHZjdENvbG9yLmcgKiAyNTUuMCkgPDwgMTYgfCB1aW50KHZjdENvbG9yLmIgKiAyNTUuMCkgPDwgOCB8IHVpbnQodmN0Q29sb3IuYSAqIDI1NS4wKTtcclxuICBcclxuICB2Y3RGcmFnID0gaXZlYzQoZmxvYXRCaXRzVG9JbnQoZ2xfRnJhZ0Nvb3JkLnopLCBpY29sb3IsIGZsb2F0Qml0c1RvSW50KHZfdmN0VGV4dHVyZS54KSwgZmxvYXRCaXRzVG9JbnQodl92Y3RUZXh0dXJlLnkpKTtcclxufWA7XHJcbiAgc2hhZGVyU291cmNlc1tcIlNoYWRlclBpY2tUZXh0dXJlZC52ZXJ0XCJdID0gLypnbHNsKi8gYCN2ZXJzaW9uIDMwMCBlc1xyXG4vKipcclxuKiBSZW5kZXJzIGZvciBSYXljYXN0aW5nXHJcbiogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuKi9cclxuaW4gdmVjMyBhX3ZjdFBvc2l0aW9uOyAgICAgICBcclxuaW4gdmVjMiBhX3ZjdFRleHR1cmU7XHJcbnVuaWZvcm0gbWF0NCB1X210eE1lc2hUb1ZpZXc7XHJcbnVuaWZvcm0gbWF0MyB1X210eFBpdm90O1xyXG5cclxub3V0IHZlYzIgdl92Y3RUZXh0dXJlO1xyXG5cclxudm9pZCBtYWluKCkgeyAgIFxyXG4gICAgZ2xfUG9zaXRpb24gPSB1X210eE1lc2hUb1ZpZXcgKiB2ZWM0KGFfdmN0UG9zaXRpb24sIDEuMCk7XHJcbiAgICB2X3ZjdFRleHR1cmUgPSB2ZWMyKHVfbXR4UGl2b3QgKiB2ZWMzKGFfdmN0VGV4dHVyZSwgMS4wKSkueHk7XHJcbn1gO1xyXG4gIHNoYWRlclNvdXJjZXNbXCJTaGFkZXJVbml2ZXJzYWwuZnJhZ1wiXSA9IC8qZ2xzbCovIGAjdmVyc2lvbiAzMDAgZXNcclxuLyoqXHJcbiogVW5pdmVyc2FsIFNoYWRlciBhcyBiYXNlIGZvciBtYW55IG90aGVycy4gQ29udHJvbGxlZCBieSBjb21waWxlciBkaXJlY3RpdmVzXHJcbiogQGF1dGhvcnMgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMjFcclxuKi9cclxuXHJcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xyXG5wcmVjaXNpb24gaGlnaHAgaW50O1xyXG5cclxuICAvLyBNSU5JTUFMIChubyBkZWZpbmUgbmVlZGVkKTogaW5jbHVkZSBiYXNlIGNvbG9yXHJcbnVuaWZvcm0gdmVjNCB1X3ZjdENvbG9yO1xyXG5cclxuICAvLyBGTEFUOiBpbnB1dCB2ZXJ0ZXggY29sb3JzIGZsYXQsIHNvIHRoZSB0aGlyZCBvZiBhIHRyaWFuZ2xlIGRldGVybWluZXMgdGhlIGNvbG9yXHJcbiAgI2lmIGRlZmluZWQoRkxBVCkgXHJcbmZsYXQgaW4gdmVjNCB2X3ZjdENvbG9yO1xyXG4gIC8vIExJR0hUOiBpbnB1dCB2ZXJ0ZXggY29sb3JzIGZvciBlYWNoIHZlcnRleCBmb3IgaW50ZXJwb2xhdGlvbiBvdmVyIHRoZSBmYWNlXHJcbiAgI2VsaWYgZGVmaW5lZChMSUdIVCkgfHwgZGVmaW5lZChQQVJUSUNMRV9DT0xPUilcclxuaW4gdmVjNCB2X3ZjdENvbG9yO1xyXG4gICNlbmRpZlxyXG5cclxuICAvLyBURVhUVVJFOiBpbnB1dCBVVnMgYW5kIHRleHR1cmVcclxuICAjaWYgZGVmaW5lZChURVhUVVJFKSB8fCBkZWZpbmVkKE1BVENBUClcclxuaW4gdmVjMiB2X3ZjdFRleHR1cmU7XHJcbnVuaWZvcm0gc2FtcGxlcjJEIHVfdGV4dHVyZTtcclxuICAjZW5kaWZcclxuXHJcbm91dCB2ZWM0IHZjdEZyYWc7XHJcblxyXG52b2lkIG1haW4oKSB7XHJcbiAgICAvLyBNSU5JTUFMOiBzZXQgdGhlIGJhc2UgY29sb3JcclxuICB2Y3RGcmFnID0gdV92Y3RDb2xvcjtcclxuXHJcbiAgICAvLyBWRVJURVg6IG11bHRpcGx5IHdpdGggdmVydGV4IGNvbG9yXHJcbiAgICAjaWYgZGVmaW5lZChGTEFUKSB8fCBkZWZpbmVkKExJR0hUKSB8fCBkZWZpbmVkKFBBUlRJQ0xFX0NPTE9SKVxyXG4gIHZjdEZyYWcgKj0gdl92Y3RDb2xvcjtcclxuICAgICNlbmRpZlxyXG5cclxuICAgIC8vIFRFWFRVUkU6IG11bHRpcGx5IHdpdGggdGV4ZWwgY29sb3JcclxuICAgICNpZiBkZWZpbmVkKFRFWFRVUkUpIHx8IGRlZmluZWQoTUFUQ0FQKVxyXG4gIHZlYzQgdmN0Q29sb3JUZXh0dXJlID0gdGV4dHVyZSh1X3RleHR1cmUsIHZfdmN0VGV4dHVyZSk7XHJcbiAgdmN0RnJhZyAqPSB2Y3RDb2xvclRleHR1cmU7XHJcbiAgICAjZW5kaWZcclxuXHJcbiAgICAvLyBkaXNjYXJkIHBpeGVsIGFsbHRvZ2V0aGVyIHdoZW4gdHJhbnNwYXJlbnQ6IGRvbid0IHNob3cgaW4gWi1CdWZmZXJcclxuICBpZih2Y3RGcmFnLmEgPCAwLjAxKVxyXG4gICAgZGlzY2FyZDtcclxufWA7XHJcbiAgc2hhZGVyU291cmNlc1tcIlNoYWRlclVuaXZlcnNhbC52ZXJ0XCJdID0gLypnbHNsKi8gYCN2ZXJzaW9uIDMwMCBlc1xyXG4vKipcclxuKiBVbml2ZXJzYWwgU2hhZGVyIGFzIGJhc2UgZm9yIG1hbnkgb3RoZXJzLiBDb250cm9sbGVkIGJ5IGNvbXBpbGVyIGRpcmVjdGl2ZXNcclxuKiBAYXV0aG9ycyAyMDIxLCBMdWlzIEtlY2ssIEhGVSwgMjAyMSB8IEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDIxXHJcbiovXHJcblxyXG5wcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcclxucHJlY2lzaW9uIGhpZ2hwIGludDtcclxuXHJcbiAgLy8gTUlOSU1BTCAobm8gZGVmaW5lIG5lZWRlZCk6IGJ1ZmZlcnMgZm9yIHRyYW5zZm9ybWF0aW9uXHJcbnVuaWZvcm0gbWF0NCB1X210eE1lc2hUb1ZpZXc7XHJcbmluIHZlYzMgYV92Y3RQb3NpdGlvbjtcclxuXHJcbiAgLy8gUEFSVElDTEU6IG9mZmVyIGJ1ZmZlciBhbmQgZnVuY3Rpb25hbGl0eSBmb3IgaW4gc2hhZGVyIHBvc2l0aW9uIGNhbGN1bGF0aW9uXHJcbiAgLy8gQ0FNRVJBOiBvZmZlciBidWZmZXIgYW5kIGZ1bmN0aW9uYWxpdHkgZm9yIHNwZWN1bGFyIHJlZmxlY3Rpb24gZGVwZW5kaW5nIG9uIHRoZSBjYW1lcmEtcG9zaXRpb25cclxuICAjaWYgZGVmaW5lZChDQU1FUkEpIHx8IGRlZmluZWQoUEFSVElDTEUpXHJcbnVuaWZvcm0gbWF0NCB1X210eE1lc2hUb1dvcmxkO1xyXG51bmlmb3JtIHZlYzMgdV92Y3RDYW1lcmE7XHJcbiAgI2VuZGlmXHJcblxyXG4gICNpZiBkZWZpbmVkKENBTUVSQSlcclxudW5pZm9ybSBmbG9hdCB1X2ZTcGVjdWxhcjtcclxuXHJcbmZsb2F0IGNhbGN1bGF0ZVJlZmxlY3Rpb24odmVjMyBfdmN0TGlnaHQsIHZlYzMgX3ZjdFZpZXcsIHZlYzMgX3ZjdE5vcm1hbCwgZmxvYXQgX2ZTcGVjdWxhcikge1xyXG4gIGlmKF9mU3BlY3VsYXIgPD0gMC4wKVxyXG4gICAgcmV0dXJuIDAuMDtcclxuICB2ZWMzIHZjdFJlZmxlY3Rpb24gPSBub3JtYWxpemUocmVmbGVjdCgtX3ZjdExpZ2h0LCBfdmN0Tm9ybWFsKSk7XHJcbiAgZmxvYXQgZkhpdENhbWVyYSA9IGRvdCh2Y3RSZWZsZWN0aW9uLCBfdmN0Vmlldyk7XHJcbiAgcmV0dXJuIHBvdyhtYXgoZkhpdENhbWVyYSwgMC4wKSwgX2ZTcGVjdWxhciAqIDEwLjApICogX2ZTcGVjdWxhcjsgLy8gMTAuMCA9IG1hZ2ljIG51bWJlciwgbG9va3MgZ29vZC4uLiBcclxufVxyXG4gICNlbmRpZlxyXG5cclxuICAvLyBMSUdIVDogb2ZmZXIgYnVmZmVycyBmb3IgbGlnaHRpbmcgdmVydGljZXMgd2l0aCBkaWZmZXJlbnQgbGlnaHQgdHlwZXNcclxuICAjaWYgZGVmaW5lZChMSUdIVClcclxudW5pZm9ybSBtYXQ0IHVfbXR4Tm9ybWFsTWVzaFRvV29ybGQ7XHJcbmluIHZlYzMgYV92Y3ROb3JtYWw7XHJcbnVuaWZvcm0gZmxvYXQgdV9mRGlmZnVzZTtcclxuXHJcbnN0cnVjdCBMaWdodCB7XHJcbiAgdmVjNCB2Y3RDb2xvcjtcclxuICBtYXQ0IG10eFNoYXBlO1xyXG4gIG1hdDQgbXR4U2hhcGVJbnZlcnNlO1xyXG59O1xyXG5cclxuY29uc3QgdWludCBNQVhfTElHSFRTX0RJUkVDVElPTkFMID0gMTV1O1xyXG5jb25zdCB1aW50IE1BWF9MSUdIVFNfUE9JTlQgPSAxMDB1O1xyXG5jb25zdCB1aW50IE1BWF9MSUdIVFNfU1BPVCA9IDEwMHU7XHJcblxyXG5sYXlvdXQoc3RkMTQwKSB1bmlmb3JtIExpZ2h0cyB7XHJcbiAgdWludCB1X25MaWdodHNEaXJlY3Rpb25hbDtcclxuICB1aW50IHVfbkxpZ2h0c1BvaW50O1xyXG4gIHVpbnQgdV9uTGlnaHRzU3BvdDtcclxuICBMaWdodCB1X2FtYmllbnQ7XHJcbiAgTGlnaHQgdV9kaXJlY3Rpb25hbFtNQVhfTElHSFRTX0RJUkVDVElPTkFMXTtcclxuICBMaWdodCB1X3BvaW50W01BWF9MSUdIVFNfUE9JTlRdO1xyXG4gIExpZ2h0IHVfc3BvdFtNQVhfTElHSFRTX1NQT1RdO1xyXG59O1xyXG5cclxudmVjNCBpbGx1bWluYXRlRGlyZWN0ZWQodmVjMyBfdmN0RGlyZWN0aW9uLCB2ZWMzIF92Y3ROb3JtYWwsIHZlYzQgX3ZjdENvbG9yLCB2ZWMzIF92Y3RWaWV3LCBmbG9hdCBfZlNwZWN1bGFyKSB7XHJcbiAgdmVjNCB2Y3RSZXN1bHQgPSB2ZWM0KDAsIDAsIDAsIDEpO1xyXG4gIHZlYzMgdmN0RGlyZWN0aW9uID0gbm9ybWFsaXplKF92Y3REaXJlY3Rpb24pO1xyXG4gIGZsb2F0IGZJbGx1bWluYXRpb24gPSAtZG90KF92Y3ROb3JtYWwsIHZjdERpcmVjdGlvbik7XHJcbiAgaWYoZklsbHVtaW5hdGlvbiA+IDAuMGYpIHtcclxuICAgIHZjdFJlc3VsdCArPSB1X2ZEaWZmdXNlICogZklsbHVtaW5hdGlvbiAqIF92Y3RDb2xvcjtcclxuICAgICAgICAjaWYgZGVmaW5lZChDQU1FUkEpXHJcbiAgICBmbG9hdCBmUmVmbGVjdGlvbiA9IGNhbGN1bGF0ZVJlZmxlY3Rpb24odmN0RGlyZWN0aW9uLCBfdmN0VmlldywgX3ZjdE5vcm1hbCwgX2ZTcGVjdWxhcik7XHJcbiAgICB2Y3RSZXN1bHQgKz0gZlJlZmxlY3Rpb24gKiBfdmN0Q29sb3I7XHJcbiAgICAgICAgI2VuZGlmXHJcbiAgfVxyXG4gIHJldHVybiB2Y3RSZXN1bHQ7XHJcbn1cclxuICAjZW5kaWYgXHJcblxyXG4gIC8vIFRFWFRVUkU6IG9mZmVyIGJ1ZmZlcnMgZm9yIFVWcyBhbmQgcGl2b3QgbWF0cml4XHJcbiAgI2lmIGRlZmluZWQoVEVYVFVSRSlcclxudW5pZm9ybSBtYXQzIHVfbXR4UGl2b3Q7XHJcbmluIHZlYzIgYV92Y3RUZXh0dXJlO1xyXG5vdXQgdmVjMiB2X3ZjdFRleHR1cmU7XHJcbiAgI2VuZGlmXHJcblxyXG4gICNpZiBkZWZpbmVkKE1BVENBUCkgLy8gTWF0Q2FwLXNoYWRlciBnZW5lcmF0ZXMgdGV4dHVyZSBjb29yZGluYXRlcyBmcm9tIHN1cmZhY2Ugbm9ybWFsc1xyXG5pbiB2ZWMzIGFfdmN0Tm9ybWFsO1xyXG51bmlmb3JtIG1hdDQgdV9tdHhOb3JtYWxNZXNoVG9Xb3JsZDtcclxudW5pZm9ybSBtYXQ0IHVfbXR4V29ybGRUb0NhbWVyYTtcclxub3V0IHZlYzIgdl92Y3RUZXh0dXJlO1xyXG4gICNlbmRpZlxyXG5cclxuICAjaWYgZGVmaW5lZChQSE9ORylcclxub3V0IHZlYzMgdl92Y3ROb3JtYWw7XHJcbm91dCB2ZWM0IHZfdmN0UG9zaXRpb247XHJcbiAgI2VuZGlmXHJcblxyXG4gICNpZiBkZWZpbmVkKFNLSU4pXHJcbi8vIHVuaWZvcm0gbWF0NCB1X210eE1lc2hUb1dvcmxkO1xyXG4vLyBCb25lc1xyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vbXJkb29iL3RocmVlLmpzL2Jsb2IvZGV2L3NyYy9yZW5kZXJlcnMvc2hhZGVycy9TaGFkZXJDaHVuay9za2lubmluZ19wYXJzX3ZlcnRleC5nbHNsLmpzXHJcbmluIHV2ZWM0IGFfaUJvbmU7XHJcbmluIHZlYzQgYV9mV2VpZ2h0O1xyXG5jb25zdCB1aW50IE1BWF9CT05FUyA9IDI1NnU7XHJcbmxheW91dCAoc3RkMTQwKSB1bmlmb3JtIFNraW4ge1xyXG4gIG1hdDQgdV9ib25lc1tNQVhfQk9ORVNdO1xyXG59O1xyXG4gICNlbmRpZlxyXG5cclxuICAvLyBGTEFUOiBvdXRidWZmZXIgaXMgZmxhdFxyXG4gICNpZiBkZWZpbmVkKEZMQVQpXHJcbmZsYXQgb3V0IHZlYzQgdl92Y3RDb2xvcjtcclxuICAjZWxpZiBkZWZpbmVkKExJR0hUKSB8fCBkZWZpbmVkKFBBUlRJQ0xFKVxyXG4gIC8vIHJlZ3VsYXIgaWYgbm90IEZMQVRcclxub3V0IHZlYzQgdl92Y3RDb2xvcjtcclxuICAjZW5kaWZcclxuXHJcbiAgI2lmIGRlZmluZWQoUEFSVElDTEUpXHJcbnVuaWZvcm0gbWF0NCB1X210eFdvcmxkVG9WaWV3O1xyXG51bmlmb3JtIGZsb2F0IHVfZlBhcnRpY2xlU3lzdGVtRHVyYXRpb247XHJcbnVuaWZvcm0gZmxvYXQgdV9mUGFydGljbGVTeXN0ZW1TaXplO1xyXG51bmlmb3JtIGZsb2F0IHVfZlBhcnRpY2xlU3lzdGVtVGltZTtcclxudW5pZm9ybSBzYW1wbGVyMkQgdV9mUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzO1xyXG51bmlmb3JtIGJvb2wgdV9iUGFydGljbGVTeXN0ZW1GYWNlQ2FtZXJhO1xyXG51bmlmb3JtIGJvb2wgdV9iUGFydGljbGVTeXN0ZW1SZXN0cmljdDtcclxuXHJcbm1hdDQgbG9va0F0KHZlYzMgX3ZjdFRyYW5zbGF0aW9uLCB2ZWMzIF92Y3RUYXJnZXQpIHtcclxuICB2ZWMzIHZjdFVwID0gdmVjMygwLjAsIDEuMCwgMC4wKTtcclxuICB2ZWMzIHpBeGlzID0gbm9ybWFsaXplKF92Y3RUYXJnZXQgLSBfdmN0VHJhbnNsYXRpb24pO1xyXG4gIHZlYzMgeEF4aXMgPSBub3JtYWxpemUoY3Jvc3ModmN0VXAsIHpBeGlzKSk7XHJcbiAgdmVjMyB5QXhpcyA9IHVfYlBhcnRpY2xlU3lzdGVtUmVzdHJpY3QgPyB2Y3RVcCA6IG5vcm1hbGl6ZShjcm9zcyh6QXhpcywgeEF4aXMpKTtcclxuICB6QXhpcyA9IHVfYlBhcnRpY2xlU3lzdGVtUmVzdHJpY3QgPyBub3JtYWxpemUoY3Jvc3MoeEF4aXMsIHZjdFVwKSkgOiB6QXhpcztcclxuXHJcbiAgcmV0dXJuIG1hdDQoXHJcbiAgICB4QXhpcy54LCB4QXhpcy55LCB4QXhpcy56LCAwLjAsXHJcbiAgICB5QXhpcy54LCB5QXhpcy55LCB5QXhpcy56LCAwLjAsXHJcbiAgICB6QXhpcy54LCB6QXhpcy55LCB6QXhpcy56LCAwLjAsXHJcbiAgICBfdmN0VHJhbnNsYXRpb24ueCwgIF92Y3RUcmFuc2xhdGlvbi55LCAgX3ZjdFRyYW5zbGF0aW9uLnosIDEuMFxyXG4gICk7XHJcbn1cclxuXHJcbmZsb2F0IGZldGNoUmFuZG9tTnVtYmVyKGludCBfaUluZGV4LCBpbnQgX2lQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNTaXplLCBpbnQgX2lQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNMZW5ndGgpIHtcclxuICBfaUluZGV4ID0gX2lJbmRleCAlIF9pUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzTGVuZ3RoO1xyXG4gIHJldHVybiB0ZXhlbEZldGNoKHVfZlBhcnRpY2xlU3lzdGVtUmFuZG9tTnVtYmVycywgaXZlYzIoX2lJbmRleCAlIF9pUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzU2l6ZSwgX2lJbmRleCAvIF9pUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzU2l6ZSksIDApLnI7XHJcbn1cclxuICAjZW5kaWZcclxuXHJcbnZvaWQgbWFpbigpIHtcclxuICB2ZWM0IHZjdFBvc2l0aW9uID0gdmVjNChhX3ZjdFBvc2l0aW9uLCAxLjApO1xyXG5cclxuICAgICNpZiBkZWZpbmVkKENBTUVSQSkgfHwgZGVmaW5lZChQQVJUSUNMRSlcclxuICBtYXQ0IG10eE1lc2hUb1dvcmxkID0gdV9tdHhNZXNoVG9Xb3JsZDtcclxuICAgICNlbmRpZlxyXG5cclxuICAgICNpZiBkZWZpbmVkKFBBUlRJQ0xFKVxyXG4gIGZsb2F0IGZQYXJ0aWNsZUlkID0gZmxvYXQoZ2xfSW5zdGFuY2VJRCk7XHJcbiAgaW50IGlQYXJ0aWNsZVN5c3RlbVJhbmRvbU51bWJlcnNTaXplID0gdGV4dHVyZVNpemUodV9mUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzLCAwKS54OyAvLyB0aGUgZGltZW5zaW9uIG9mIHRoZSBxdWFkcmF0aWMgdGV4dHVyZVxyXG4gIGludCBpUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzTGVuZ3RoID0gaVBhcnRpY2xlU3lzdGVtUmFuZG9tTnVtYmVyc1NpemUgKiBpUGFydGljbGVTeXN0ZW1SYW5kb21OdW1iZXJzU2l6ZTsgLy8gdGhlIHRvdGFsIG51bWJlciBvZiB0ZXhlbHMgaW4gdGhlIHRleHR1cmVcclxuICAvKiR2YXJpYWJsZXMqL1xyXG4gIC8qJG10eExvY2FsKi9cclxuICAvKiRtdHhXb3JsZCovXHJcbiAgbXR4TWVzaFRvV29ybGQgPSAvKiRtdHhXb3JsZCovIG10eE1lc2hUb1dvcmxkIC8qJG10eExvY2FsKi87XHJcbiAgaWYgKHVfYlBhcnRpY2xlU3lzdGVtRmFjZUNhbWVyYSkgXHJcbiAgICBtdHhNZXNoVG9Xb3JsZCA9IFxyXG4gICAgICBsb29rQXQodmVjMyhtdHhNZXNoVG9Xb3JsZFszXVswXSwgbXR4TWVzaFRvV29ybGRbM11bMV0sIG10eE1lc2hUb1dvcmxkWzNdWzJdKSwgdV92Y3RDYW1lcmEpICogXHJcbiAgICAgIG1hdDQoXHJcbiAgICAgICAgbGVuZ3RoKHZlYzMobXR4TWVzaFRvV29ybGRbMF1bMF0sIG10eE1lc2hUb1dvcmxkWzFdWzBdLCBtdHhNZXNoVG9Xb3JsZFsyXVswXSkpLCAwLjAsIDAuMCwgMC4wLFxyXG4gICAgICAgIDAuMCwgbGVuZ3RoKHZlYzMobXR4TWVzaFRvV29ybGRbMF1bMV0sIG10eE1lc2hUb1dvcmxkWzFdWzFdLCBtdHhNZXNoVG9Xb3JsZFsyXVsxXSkpLCAwLjAsIDAuMCxcclxuICAgICAgICAwLjAsIDAuMCwgbGVuZ3RoKHZlYzMobXR4TWVzaFRvV29ybGRbMF1bMl0sIG10eE1lc2hUb1dvcmxkWzFdWzJdLCBtdHhNZXNoVG9Xb3JsZFsyXVsyXSkpLCAwLjAsXHJcbiAgICAgICAgMC4wLCAwLjAsIDAuMCwgMS4wXHJcbiAgICAgICk7XHJcbiAgbWF0NCBtdHhNZXNoVG9WaWV3ID0gdV9tdHhXb3JsZFRvVmlldyAqIG10eE1lc2hUb1dvcmxkO1xyXG4gICAgI2Vsc2VcclxuICBtYXQ0IG10eE1lc2hUb1ZpZXcgPSB1X210eE1lc2hUb1ZpZXc7XHJcbiAgICAjZW5kaWZcclxuXHJcbiAgICAjaWYgZGVmaW5lZChMSUdIVCkgfHwgZGVmaW5lZChNQVRDQVApXHJcbiAgdmVjMyB2Y3ROb3JtYWwgPSBhX3ZjdE5vcm1hbDtcclxuICAgICAgI2lmIGRlZmluZWQoUEFSVElDTEUpXHJcbiAgbWF0NCBtdHhOb3JtYWxNZXNoVG9Xb3JsZCA9IHRyYW5zcG9zZShpbnZlcnNlKG10eE1lc2hUb1dvcmxkKSk7XHJcbiAgICAgICNlbHNlXHJcbiAgbWF0NCBtdHhOb3JtYWxNZXNoVG9Xb3JsZCA9IHVfbXR4Tm9ybWFsTWVzaFRvV29ybGQ7XHJcbiAgICAgICNlbmRpZlxyXG4gICAgICAjaWYgZGVmaW5lZChMSUdIVClcclxuICB2X3ZjdENvbG9yID0gdV9mRGlmZnVzZSAqIHVfYW1iaWVudC52Y3RDb2xvcjtcclxuICAgICAgI2VuZGlmXHJcbiAgICAjZW5kaWZcclxuXHJcblxyXG4gICAgI2lmIGRlZmluZWQoU0tJTilcclxuICBtYXQ0IG10eFNraW4gPSBhX2ZXZWlnaHQueCAqIHVfYm9uZXNbYV9pQm9uZS54XSArXHJcbiAgICBhX2ZXZWlnaHQueSAqIHVfYm9uZXNbYV9pQm9uZS55XSArXHJcbiAgICBhX2ZXZWlnaHQueiAqIHVfYm9uZXNbYV9pQm9uZS56XSArXHJcbiAgICBhX2ZXZWlnaHQudyAqIHVfYm9uZXNbYV9pQm9uZS53XTtcclxuXHJcbiAgbXR4TWVzaFRvVmlldyAqPSBtdHhTa2luO1xyXG4gIG10eE5vcm1hbE1lc2hUb1dvcmxkID0gdHJhbnNwb3NlKGludmVyc2UobXR4TWVzaFRvV29ybGQgKiBtdHhTa2luKSk7XHJcbiAgICAjZW5kaWZcclxuXHJcbiAgICAvLyBjYWxjdWxhdGUgcG9zaXRpb24gYW5kIG5vcm1hbCBhY2NvcmRpbmcgdG8gaW5wdXQgYW5kIGRlZmluZXNcclxuICBnbF9Qb3NpdGlvbiA9IG10eE1lc2hUb1ZpZXcgKiB2Y3RQb3NpdGlvbjtcclxuXHJcbiAgICAjaWYgZGVmaW5lZChDQU1FUkEpIHx8IGRlZmluZWQoTUFUQ0FQKVxyXG4gIHZlYzMgdmN0VmlldyA9IG5vcm1hbGl6ZSh2ZWMzKHVfbXR4TWVzaFRvV29ybGQgKiB2Y3RQb3NpdGlvbikgLSB1X3ZjdENhbWVyYSk7XHJcbiAgICAjZW5kaWZcclxuXHJcbiAgICAjaWYgZGVmaW5lZChMSUdIVClcclxuICB2Y3ROb3JtYWwgPSBub3JtYWxpemUobWF0MyhtdHhOb3JtYWxNZXNoVG9Xb3JsZCkgKiB2Y3ROb3JtYWwpO1xyXG4gICAgICAjaWYgZGVmaW5lZChQSE9ORylcclxuICB2X3ZjdE5vcm1hbCA9IHZjdE5vcm1hbDsgLy8gcGFzcyBub3JtYWwgdG8gZnJhZ21lbnQgc2hhZGVyXHJcbiAgdl92Y3RQb3NpdGlvbiA9IHZjdFBvc2l0aW9uO1xyXG4gICAgICAjZW5kaWYgIFxyXG5cclxuICAgICNpZiAhZGVmaW5lZChQSE9ORylcclxuICAvLyBjYWxjdWxhdGUgZGlyZWN0aW9uYWwgbGlnaHQgZWZmZWN0XHJcbiAgZm9yKHVpbnQgaSA9IDB1OyBpIDwgdV9uTGlnaHRzRGlyZWN0aW9uYWw7IGkrKykge1xyXG4gICAgdmVjMyB2Y3REaXJlY3Rpb24gPSB2ZWMzKHVfZGlyZWN0aW9uYWxbaV0ubXR4U2hhcGUgKiB2ZWM0KDAuMCwgMC4wLCAxLjAsIDEuMCkpO1xyXG4gICAgdl92Y3RDb2xvciArPSBpbGx1bWluYXRlRGlyZWN0ZWQodmN0RGlyZWN0aW9uLCB2Y3ROb3JtYWwsIHVfZGlyZWN0aW9uYWxbaV0udmN0Q29sb3IsIHZjdFZpZXcsIHVfZlNwZWN1bGFyKTtcclxuICB9XHJcbiAgLy8gY2FsY3VsYXRlIHBvaW50IGxpZ2h0IGVmZmVjdFxyXG4gIGZvcih1aW50IGkgPSAwdTsgaSA8IHVfbkxpZ2h0c1BvaW50OyBpKyspIHtcclxuICAgIHZlYzMgdmN0UG9zaXRpb25MaWdodCA9IHZlYzModV9wb2ludFtpXS5tdHhTaGFwZSAqIHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKSk7XHJcbiAgICB2ZWMzIHZjdERpcmVjdGlvbiA9IHZlYzMobXR4TWVzaFRvV29ybGQgKiB2Y3RQb3NpdGlvbikgLSB2Y3RQb3NpdGlvbkxpZ2h0O1xyXG4gICAgZmxvYXQgZkludGVuc2l0eSA9IDEuMCAtIGxlbmd0aChtYXQzKHVfcG9pbnRbaV0ubXR4U2hhcGVJbnZlcnNlKSAqIHZjdERpcmVjdGlvbik7XHJcbiAgICBpZihmSW50ZW5zaXR5IDwgMC4wKVxyXG4gICAgICBjb250aW51ZTtcclxuICAgIHZfdmN0Q29sb3IgKz0gaWxsdW1pbmF0ZURpcmVjdGVkKHZjdERpcmVjdGlvbiwgdmN0Tm9ybWFsLCBmSW50ZW5zaXR5ICogdV9wb2ludFtpXS52Y3RDb2xvciwgdmN0VmlldywgdV9mU3BlY3VsYXIpO1xyXG4gIH1cclxuXHJcbiAgLy8gY2FsY3VsYXRlIHNwb3QgbGlnaHQgZWZmZWN0XHJcbiAgZm9yKHVpbnQgaSA9IDB1OyBpIDwgdV9uTGlnaHRzU3BvdDsgaSsrKSB7XHJcbiAgICB2ZWMzIHZjdFBvc2l0aW9uTGlnaHQgPSB2ZWMzKHVfc3BvdFtpXS5tdHhTaGFwZSAqIHZlYzQoMC4wLCAwLjAsIDAuMCwgMS4wKSk7XHJcbiAgICB2ZWMzIHZjdERpcmVjdGlvbiA9IHZlYzMobXR4TWVzaFRvV29ybGQgKiB2Y3RQb3NpdGlvbikgLSB2Y3RQb3NpdGlvbkxpZ2h0O1xyXG4gICAgdmVjMyB2Y3REaXJlY3Rpb25JbnZlcnRlZCA9IG1hdDModV9zcG90W2ldLm10eFNoYXBlSW52ZXJzZSkgKiB2Y3REaXJlY3Rpb247XHJcbiAgICBpZih2Y3REaXJlY3Rpb25JbnZlcnRlZC56IDw9IDAuMClcclxuICAgICAgY29udGludWU7XHJcbiAgICBmbG9hdCBmSW50ZW5zaXR5ID0gMS4wIC0gbWluKDEuMCwgMi4wICogbGVuZ3RoKHZjdERpcmVjdGlvbkludmVydGVkLnh5KSAvIHZjdERpcmVjdGlvbkludmVydGVkLnopO1xyXG4gICAgZkludGVuc2l0eSAqPSAxLjAgLSBwb3codmN0RGlyZWN0aW9uSW52ZXJ0ZWQueiwgMi4wKTtcclxuICAgIGlmKGZJbnRlbnNpdHkgPCAwLjApXHJcbiAgICAgIGNvbnRpbnVlO1xyXG4gICAgdl92Y3RDb2xvciArPSBpbGx1bWluYXRlRGlyZWN0ZWQodmN0RGlyZWN0aW9uLCB2Y3ROb3JtYWwsIGZJbnRlbnNpdHkgKiB1X3Nwb3RbaV0udmN0Q29sb3IsIHZjdFZpZXcsIHVfZlNwZWN1bGFyKTtcclxuICB9XHJcbiAgICAgICNlbmRpZiAvLyBQSE9OR1xyXG4gICAgI2VuZGlmXHJcblxyXG4gICAgLy8gVEVYVFVSRTogdHJhbnNmb3JtIFVWc1xyXG4gICAgI2lmIGRlZmluZWQoVEVYVFVSRSlcclxuICB2X3ZjdFRleHR1cmUgPSB2ZWMyKHVfbXR4UGl2b3QgKiB2ZWMzKGFfdmN0VGV4dHVyZSwgMS4wKSkueHk7XHJcbiAgICAjZW5kaWZcclxuXHJcbiAgICAjaWYgZGVmaW5lZChNQVRDQVApXHJcbiAgdmVjNCB2Y3RWZXJ0ZXhJbkNhbWVyYSA9IG5vcm1hbGl6ZSh1X210eFdvcmxkVG9DYW1lcmEgKiB2Y3RQb3NpdGlvbik7XHJcbiAgdmN0VmVydGV4SW5DYW1lcmEueHkgKj0gLTEuMDtcclxuICBtYXQ0IG10eF9Sb3RYID0gbWF0NCgxLCAwLCAwLCAwLCAwLCB2Y3RWZXJ0ZXhJbkNhbWVyYS56LCB2Y3RWZXJ0ZXhJbkNhbWVyYS55LCAwLCAwLCAtdmN0VmVydGV4SW5DYW1lcmEueSwgdmN0VmVydGV4SW5DYW1lcmEueiwgMCwgMCwgMCwgMCwgMSk7XHJcbiAgbWF0NCBtdHhfUm90WSA9IG1hdDQodmN0VmVydGV4SW5DYW1lcmEueiwgMCwgLXZjdFZlcnRleEluQ2FtZXJhLngsIDAsIDAsIDEsIDAsIDAsIHZjdFZlcnRleEluQ2FtZXJhLngsIDAsIHZjdFZlcnRleEluQ2FtZXJhLnosIDAsIDAsIDAsIDAsIDEpO1xyXG5cclxuICB2Y3ROb3JtYWwgPSBtYXQzKHVfbXR4Tm9ybWFsTWVzaFRvV29ybGQpICogYV92Y3ROb3JtYWw7XHJcblxyXG4gIC8vIGFkZHMgY29ycmVjdGlvbiBmb3IgdGhpbmdzIGJlaW5nIGZhciBhbmQgdG8gdGhlIHNpZGUsIGJ1dCBkaXN0b3J0aW9uIGZvciB0aGluZ3MgYmVpbmcgY2xvc2VcclxuICB2Y3ROb3JtYWwgPSBtYXQzKG10eF9Sb3RYICogbXR4X1JvdFkpICogdmN0Tm9ybWFsO1xyXG4gIFxyXG4gIHZlYzMgdmN0UmVmbGVjdGlvbiA9IG5vcm1hbGl6ZShtYXQzKHVfbXR4V29ybGRUb0NhbWVyYSkgKiBub3JtYWxpemUodmN0Tm9ybWFsKSk7XHJcbiAgdmN0UmVmbGVjdGlvbi55ID0gLXZjdFJlZmxlY3Rpb24ueTtcclxuXHJcbiAgdl92Y3RUZXh0dXJlID0gMC41ICogdmN0UmVmbGVjdGlvbi54eSArIDAuNTtcclxuICAgICNlbmRpZlxyXG5cclxuICAgICNpZiBkZWZpbmVkKFBBUlRJQ0xFX0NPTE9SKVxyXG4gIHZlYzQgdmN0UGFydGljbGVDb2xvciA9IC8qJGNvbG9yKi87XHJcbiAgICAgICNpZiBkZWZpbmVkKExJR0hUKVxyXG4gIHZfdmN0Q29sb3IgKj0gdmN0UGFydGljbGVDb2xvcjtcclxuICB2X3ZjdENvbG9yLmEgPSB2Y3RQYXJ0aWNsZUNvbG9yLmE7XHJcbiAgICAgICNlbHNlXHJcbiAgdl92Y3RDb2xvciA9IHZjdFBhcnRpY2xlQ29sb3I7XHJcbiAgICAgICNlbmRpZlxyXG4gICAgI2Vsc2VcclxuICAgIC8vIGFsd2F5cyBmdWxsIG9wYWNpdHkgZm9yIG5vdy4uLlxyXG4gICAgICAjaWYgZGVmaW5lZChMSUdIVClcclxuICAgIHZfdmN0Q29sb3IuYSA9IDEuMDtcclxuICAgICAgI2VuZGlmXHJcbiAgICAjZW5kaWZcclxufWA7XHJcblxyXG59IiwiLy8gLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9Db2F0L0NvYXQudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgU2hhZGVySW50ZXJmYWNlIHtcclxuICAgIGRlZmluZTogc3RyaW5nW107XHJcbiAgICBwcm9ncmFtOiBXZWJHTFByb2dyYW07XHJcbiAgICBhdHRyaWJ1dGVzOiB7IFtuYW1lOiBzdHJpbmddOiBudW1iZXIgfTtcclxuICAgIHVuaWZvcm1zOiB7IFtuYW1lOiBzdHJpbmddOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiB9O1xyXG4gICAgZ2V0VmVydGV4U2hhZGVyU291cmNlKCk6IHN0cmluZztcclxuICAgIGdldEZyYWdtZW50U2hhZGVyU291cmNlKCk6IHN0cmluZztcclxuICAgIGRlbGV0ZVByb2dyYW0odGhpczogU2hhZGVySW50ZXJmYWNlKTogdm9pZDtcclxuICAgIHVzZVByb2dyYW0odGhpczogU2hhZGVySW50ZXJmYWNlKTogdm9pZDtcclxuICAgIGNyZWF0ZVByb2dyYW0odGhpczogU2hhZGVySW50ZXJmYWNlKTogdm9pZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0YXRpYyBzdXBlcmNsYXNzIGZvciB0aGUgcmVwcmVzZW50YXRpb24gb2YgV2ViR2wgc2hhZGVycHJvZ3JhbXMuIFxyXG4gICAqIEBhdXRob3JzIEphc2NoYSBLYXJhZ8O2bCwgSEZVLCAyMDE5IHwgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuXHJcbiAgLy8gVE9ETzogZGVmaW5lIGF0dHJpYnV0ZS91bmlmb3JtcyBhcyBsYXlvdXQgYW5kIHVzZSB0aG9zZSBjb25zaXN0ZW50bHkgaW4gc2hhZGVyc1xyXG4gIEBSZW5kZXJJbmplY3RvclNoYWRlci5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXIge1xyXG4gICAgLyoqIHJlZmVycyBiYWNrIHRvIHRoaXMgY2xhc3MgZnJvbSBhbnkgc3ViY2xhc3MgZS5nLiBpbiBvcmRlciB0byBmaW5kIGNvbXBhdGlibGUgb3RoZXIgcmVzb3VyY2VzKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgYmFzZUNsYXNzOiB0eXBlb2YgU2hhZGVyID0gU2hhZGVyO1xyXG4gICAgLyoqIGxpc3Qgb2YgYWxsIHRoZSBzdWJjbGFzc2VzIGRlcml2ZWQgZnJvbSB0aGlzIGNsYXNzLCBpZiB0aGV5IHJlZ2lzdGVyZWQgcHJvcGVybHkqL1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBzdWJjbGFzc2VzOiB0eXBlb2YgU2hhZGVyW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW107XHJcbiAgICAvLyBwdWJsaWMgc3RhdGljIHZlcnRleFNoYWRlclNvdXJjZTogc3RyaW5nO1xyXG4gICAgLy8gcHVibGljIHN0YXRpYyBmcmFnbWVudFNoYWRlclNvdXJjZTogc3RyaW5nO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcHJvZ3JhbTogV2ViR0xQcm9ncmFtO1xyXG4gICAgcHVibGljIHN0YXRpYyBhdHRyaWJ1dGVzOiB7IFtuYW1lOiBzdHJpbmddOiBudW1iZXIgfTtcclxuICAgIHB1YmxpYyBzdGF0aWMgdW5pZm9ybXM6IHsgW25hbWU6IHN0cmluZ106IFdlYkdMVW5pZm9ybUxvY2F0aW9uIH07XHJcblxyXG4gICAgLyoqIFRoZSB0eXBlIG9mIGNvYXQgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHRoaXMgc2hhZGVyIHRvIGNyZWF0ZSBhIG1hdGVyaWFsICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdENvbG9yZWQ7IH1cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VmVydGV4U2hhZGVyU291cmNlKCk6IHN0cmluZyB7IFxyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJVbml2ZXJzYWwudmVydFwiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfSAgXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEZyYWdtZW50U2hhZGVyU291cmNlKCk6IHN0cmluZyB7IFxyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJVbml2ZXJzYWwuZnJhZ1wiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBkZWxldGVQcm9ncmFtKHRoaXM6IHR5cGVvZiBTaGFkZXIpOiB2b2lkIHsvKiBpbmplY3RlZCBieSBkZWNvcmF0b3IgKi8gfVxyXG4gICAgcHVibGljIHN0YXRpYyB1c2VQcm9ncmFtKHRoaXM6IHR5cGVvZiBTaGFkZXIpOiB2b2lkIHsvKiBpbmplY3RlZCBieSBkZWNvcmF0b3IgKi8gfVxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVQcm9ncmFtKHRoaXM6IHR5cGVvZiBTaGFkZXIpOiB2b2lkIHsvKiBpbmplY3RlZCBieSBkZWNvcmF0b3IgKi8gfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVnaXN0ZXJTdWJjbGFzcyhfc3ViY2xhc3M6IHR5cGVvZiBTaGFkZXIpOiBudW1iZXIgeyByZXR1cm4gU2hhZGVyLnN1YmNsYXNzZXMucHVzaChfc3ViY2xhc3MpIC0gMTsgfVxyXG5cclxuICAgIC8vIHJlcGxhY2UgdGhlIG1hbmRhdG9yeSBoZWFkZXIgb2YgdGhlIHNoYWRlciB3aXRoIGl0c2VsZiBwbHVzIHRoZSBkZWZpbml0aW9ucyBnaXZlblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBpbnNlcnREZWZpbmVzKF9zaGFkZXI6IHN0cmluZywgX2RlZmluZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuICAgICAgaWYgKCFfZGVmaW5lcylcclxuICAgICAgICByZXR1cm4gX3NoYWRlcjtcclxuXHJcbiAgICAgIGxldCBjb2RlOiBzdHJpbmcgPSBgI3ZlcnNpb24gMzAwIGVzXFxuYDtcclxuICAgICAgZm9yIChsZXQgZGVmaW5lIG9mIF9kZWZpbmVzKVxyXG4gICAgICAgIGNvZGUgKz0gYCNkZWZpbmUgJHtkZWZpbmV9XFxuYDtcclxuXHJcbiAgICAgIHJldHVybiBfc2hhZGVyLnJlcGxhY2UoXCIjdmVyc2lvbiAzMDAgZXNcIiwgY29kZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlckZsYXQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckZsYXQpO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJMSUdIVFwiLFxyXG4gICAgICBcIkZMQVRcIixcclxuICAgICAgXCJDQU1FUkFcIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFJlbWlzc2l2ZTsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJGbGF0U2tpbiBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gU2hhZGVyLnJlZ2lzdGVyU3ViY2xhc3MoU2hhZGVyRmxhdFNraW4pO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJMSUdIVFwiLFxyXG4gICAgICBcIkZMQVRcIixcclxuICAgICAgXCJTS0lOXCIsXHJcbiAgICAgIFwiQ0FNRVJBXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmU7IH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyRmxhdFRleHR1cmVkIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJGbGF0VGV4dHVyZWQpO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJMSUdIVFwiLFxyXG4gICAgICBcIkZMQVRcIixcclxuICAgICAgXCJURVhUVVJFXCIsXHJcbiAgICAgIFwiQ0FNRVJBXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmVUZXh0dXJlZDsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJGbGF0VGV4dHVyZWRTa2luIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJGbGF0VGV4dHVyZWRTa2luKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiTElHSFRcIixcclxuICAgICAgXCJGTEFUXCIsXHJcbiAgICAgIFwiVEVYVFVSRVwiLFxyXG4gICAgICBcIkNBTUVSQVwiLFxyXG4gICAgICBcIlNLSU5cIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFJlbWlzc2l2ZVRleHR1cmVkOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlckdvdXJhdWQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckdvdXJhdWQpO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJMSUdIVFwiLFxyXG4gICAgICBcIkNBTUVSQVwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0UmVtaXNzaXZlOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlckdvdXJhdWRTa2luIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJHb3VyYXVkU2tpbik7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIkxJR0hUXCIsXHJcbiAgICAgIFwiU0tJTlwiLFxyXG4gICAgICBcIkNBTUVSQVwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0UmVtaXNzaXZlOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlckdvdXJhdWRUZXh0dXJlZCBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gU2hhZGVyLnJlZ2lzdGVyU3ViY2xhc3MoU2hhZGVyR291cmF1ZFRleHR1cmVkKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiTElHSFRcIixcclxuICAgICAgXCJURVhUVVJFXCIsXHJcbiAgICAgIFwiQ0FNRVJBXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmVUZXh0dXJlZDsgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJHb3VyYXVkVGV4dHVyZWRTa2luIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJHb3VyYXVkVGV4dHVyZWRTa2luKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiTElHSFRcIixcclxuICAgICAgXCJURVhUVVJFXCIsXHJcbiAgICAgIFwiQ0FNRVJBXCIsXHJcbiAgICAgIFwiU0tJTlwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0UmVtaXNzaXZlVGV4dHVyZWQ7IH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyTGl0IGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJMaXQpO1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW107XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlckxpdFNraW4gZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckxpdFNraW4pO1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIlNLSU5cIlxyXG4gICAgXTtcclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyTGl0VGV4dHVyZWQgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlckxpdFRleHR1cmVkKTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXHJcbiAgICAgIFwiVEVYVFVSRVwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0VGV4dHVyZWQ7IH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyTGl0VGV4dHVyZWRTa2luIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJMaXRUZXh0dXJlZFNraW4pO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJURVhUVVJFXCIsXHJcbiAgICAgIFwiU0tJTlwiXHJcbiAgICBdO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q29hdCgpOiB0eXBlb2YgQ29hdCB7IHJldHVybiBDb2F0VGV4dHVyZWQ7IH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyTWF0Q2FwIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJNYXRDYXApO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJNQVRDQVBcIixcclxuICAgICAgXCJDQU1FUkFcIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFRleHR1cmVkOyB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclBob25nIGV4dGVuZHMgU2hhZGVyIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaVN1YmNsYXNzOiBudW1iZXIgPSBTaGFkZXIucmVnaXN0ZXJTdWJjbGFzcyhTaGFkZXJQaG9uZyk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIkxJR0hUXCIsXHJcbiAgICAgIFwiQ0FNRVJBXCIsXHJcbiAgICAgIFwiUEhPTkdcIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFJlbWlzc2l2ZTsgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0RGVmaW5lcyhzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGhvbmcuZnJhZ1wiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJQaG9uZ1NraW4gZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBpU3ViY2xhc3M6IG51bWJlciA9IFNoYWRlci5yZWdpc3RlclN1YmNsYXNzKFNoYWRlclBob25nU2tpbik7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIkxJR0hUXCIsXHJcbiAgICAgIFwiQ0FNRVJBXCIsXHJcbiAgICAgIFwiUEhPTkdcIixcclxuICAgICAgXCJTS0lOXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmU7IH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldEZyYWdtZW50U2hhZGVyU291cmNlKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmluc2VydERlZmluZXMoc2hhZGVyU291cmNlc1tcIlNoYWRlclBob25nLmZyYWdcIl0sIHRoaXMuZGVmaW5lKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgU2hhZGVyUGhvbmdUZXh0dXJlZCBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gU2hhZGVyLnJlZ2lzdGVyU3ViY2xhc3MoU2hhZGVyUGhvbmdUZXh0dXJlZCk7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW1xyXG4gICAgICBcIkxJR0hUXCIsXHJcbiAgICAgIFwiQ0FNRVJBXCIsXHJcbiAgICAgIFwiUEhPTkdcIixcclxuICAgICAgXCJURVhUVVJFXCJcclxuICAgIF07XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRDb2F0KCk6IHR5cGVvZiBDb2F0IHsgcmV0dXJuIENvYXRSZW1pc3NpdmVUZXh0dXJlZDsgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0RGVmaW5lcyhzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGhvbmcuZnJhZ1wiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFkZXJQaG9uZ1RleHR1cmVkU2tpbiBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGlTdWJjbGFzczogbnVtYmVyID0gU2hhZGVyLnJlZ2lzdGVyU3ViY2xhc3MoU2hhZGVyUGhvbmdUZXh0dXJlZFNraW4pO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmaW5lOiBzdHJpbmdbXSA9IFtcclxuICAgICAgXCJMSUdIVFwiLFxyXG4gICAgICBcIkNBTUVSQVwiLFxyXG4gICAgICBcIlBIT05HXCIsXHJcbiAgICAgIFwiVEVYVFVSRVwiLFxyXG4gICAgICBcIlNLSU5cIlxyXG4gICAgXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldENvYXQoKTogdHlwZW9mIENvYXQgeyByZXR1cm4gQ29hdFJlbWlzc2l2ZVRleHR1cmVkOyB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXRGcmFnbWVudFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJQaG9uZy5mcmFnXCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclBpY2sgZXh0ZW5kcyBTaGFkZXIge1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWZpbmU6IHN0cmluZ1tdID0gW107XHJcbiAgICBcclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0VmVydGV4U2hhZGVyU291cmNlKCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiB0aGlzLmluc2VydERlZmluZXMoc2hhZGVyU291cmNlc1tcIlNoYWRlclBpY2sudmVydFwiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0RGVmaW5lcyhzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGljay5mcmFnXCJdLCB0aGlzLmRlZmluZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYWRlclBpY2tUZXh0dXJlZCBleHRlbmRzIFNoYWRlciB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmluZTogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldFZlcnRleFNoYWRlclNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbnNlcnREZWZpbmVzKHNoYWRlclNvdXJjZXNbXCJTaGFkZXJQaWNrVGV4dHVyZWQudmVydFwiXSwgdGhpcy5kZWZpbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RnJhZ21lbnRTaGFkZXJTb3VyY2UoKTogc3RyaW5nIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0RGVmaW5lcyhzaGFkZXJTb3VyY2VzW1wiU2hhZGVyUGlja1RleHR1cmVkLmZyYWdcIl0sIHRoaXMuZGVmaW5lKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogIEEgbGlzdCBvZiBhbGwgdGhlIGJvbmVzIGluIGEge0BsaW5rIFNrZWxldG9ufSwgYWRkcmVzc2VkIGJ5IHRoZWlyIG5hbWVzLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQm9uZUxpc3Qge1xyXG4gICAgW2JvbmVOYW1lOiBzdHJpbmddOiBOb2RlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBsaXN0IHRyYW5zZm9ybWF0aW9ucywgZWFjaCBjb3JyZXNwb25kaW5nIHRvIGEgYm9uZSBieSBuYW1lLlxyXG4gICAqL1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgQm9uZU1hdHJpeExpc3Qge1xyXG4gICAgW2JvbmVOYW1lOiBzdHJpbmddOiBNYXRyaXg0eDQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIHNrZWxldG9uIGlzIGFuIGV4dGVuc2lvbiBvZiB7QGxpbmsgR3JhcGh9LiBUaGUgc2tlbGV0b24gcmVwcmVzZW50cyB0aGUgcm9vdCBib25lIHdoaWxlIGl0cyBkZXNjZW5kYW50IHtAbGluayBOb2RlfXMgaW4gdGhlIGhpZXJhcmNoeSBtYWtlIHVwIHRoZSBvdGhlciBib25lcy5cclxuICAgKiBMaWtlIHRoZSBHcmFwaCBpdCBzZXJ2ZXMgYXMgYSB0ZW1wbGF0ZSBmb3Ige0BsaW5rIFNrZWxldG9uSW5zdGFuY2V9cy5cclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgU2tlbGV0b24gZXh0ZW5kcyBHcmFwaCB7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgYm9uZXM6IEJvbmVMaXN0ID0ge307XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgbXR4QmluZEludmVyc2VzOiBCb25lTWF0cml4TGlzdCA9IHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBza2VsZXRvbiB3aXRoIGEgbmFtZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZyA9IFwiU2tlbGV0b25cIikge1xyXG4gICAgICBzdXBlcihfbmFtZSk7XHJcbiAgICAgIHRoaXMucmVnaXN0ZXJCb25lKHRoaXMpO1xyXG4gICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlQuQ0hJTERfUkVNT1ZFLCB0aGlzLmhuZENoaWxkUmVtb3ZlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGVuZHMgYSBub2RlIHRvIHRoaXMgc2tlbGV0b24gb3IgdGhlIGdpdmVuIHBhcmVudCBhbmQgcmVnaXN0ZXJzIGl0IGFzIGEgYm9uZVxyXG4gICAgICogQHBhcmFtIF9tdHhJbml0IGluaXRpYWwgbG9jYWwgbWF0cml4XHJcbiAgICAgKiBAcGFyYW0gX3BhcmVudE5hbWUgbmFtZSBvZiB0aGUgcGFyZW50IG5vZGUsIHRoYXQgbXVzdCBiZSByZWdpc3RlcmVkIGFzIGEgYm9uZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkQm9uZShfYm9uZTogTm9kZSwgX3BhcmVudE5hbWU6IHN0cmluZywgX210eEluaXQ/OiBNYXRyaXg0eDQpOiB2b2lkIHtcclxuICAgICAgaWYgKF9wYXJlbnROYW1lKVxyXG4gICAgICAgIHRoaXMuYm9uZXNbX3BhcmVudE5hbWVdLmFkZENoaWxkKF9ib25lKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMuYWRkQ2hpbGQoX2JvbmUpO1xyXG4gICAgICBpZiAoIV9ib25lLmNtcFRyYW5zZm9ybSlcclxuICAgICAgICBfYm9uZS5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudFRyYW5zZm9ybSgpKTtcclxuICAgICAgaWYgKF9tdHhJbml0KVxyXG4gICAgICAgIF9ib25lLm10eExvY2FsLnNldChfbXR4SW5pdCk7XHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlTXR4V29ybGQoX2JvbmUpO1xyXG4gICAgICB0aGlzLnJlZ2lzdGVyQm9uZShfYm9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgYSBub2RlIGFzIGEgYm9uZSB3aXRoIGl0cyBiaW5kIGludmVyc2UgbWF0cml4XHJcbiAgICAgKiBAcGFyYW0gX2JvbmUgdGhlIG5vZGUgdG8gYmUgcmVnaXN0ZXJlZCwgdGhhdCBzaG91bGQgYmUgYSBkZXNjZW5kYW50IG9mIHRoaXMgc2tlbGV0b25cclxuICAgICAqIEBwYXJhbSBfbXR4QmluZEludmVyc2UgYSBwcmVjYWxjdWxhdGVkIGludmVyc2UgbWF0cml4IG9mIHRoZSBiaW5kIHBvc2UgZnJvbSB0aGUgYm9uZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgcmVnaXN0ZXJCb25lKF9ib25lOiBOb2RlLCBfbXR4QmluZEludmVyc2U6IE1hdHJpeDR4NCA9IF9ib25lLm10eFdvcmxkSW52ZXJzZSk6IHZvaWQge1xyXG4gICAgICB0aGlzLmJvbmVzW19ib25lLm5hbWVdID0gX2JvbmU7XHJcbiAgICAgIHRoaXMubXR4QmluZEludmVyc2VzW19ib25lLm5hbWVdID0gX210eEJpbmRJbnZlcnNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGlzIHNrZWxldG9uIGFzIHRoZSBkZWZhdWx0IHBvc2VcclxuICAgICAqIGJ5IHVwZGF0aW5nIHRoZSBpbnZlcnNlIGJpbmQgbWF0cmljZXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldERlZmF1bHRQb3NlKCk6IHZvaWQge1xyXG4gICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgdGhpcykge1xyXG4gICAgICAgIGlmICghKG5vZGUubmFtZSBpbiB0aGlzLm10eEJpbmRJbnZlcnNlcykpXHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB0aGlzLmNhbGN1bGF0ZU10eFdvcmxkKG5vZGUpO1xyXG4gICAgICAgIHRoaXMubXR4QmluZEludmVyc2VzW25vZGUubmFtZV0gPSBub2RlLm10eFdvcmxkSW52ZXJzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbmRleE9mQm9uZShfYm9uZU5hbWU6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgIGxldCBpbmRleDogbnVtYmVyID0gMDtcclxuICAgICAgZm9yIChjb25zdCBib25lTmFtZSBpbiB0aGlzLmJvbmVzKSB7XHJcbiAgICAgICAgaWYgKF9ib25lTmFtZSA9PSBib25lTmFtZSlcclxuICAgICAgICAgIHJldHVybiBpbmRleDtcclxuICAgICAgICBpbmRleCsrO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBjb25zdCBzZXJpYWxpemF0aW9uOiBTZXJpYWxpemF0aW9uID0gc3VwZXIuc2VyaWFsaXplKCk7XHJcbiAgICAgIHNlcmlhbGl6YXRpb24ubXR4QmluZEludmVyc2VzID0ge307XHJcbiAgICAgIGZvciAoY29uc3QgYm9uZU5hbWUgaW4gdGhpcy5tdHhCaW5kSW52ZXJzZXMpXHJcbiAgICAgICAgc2VyaWFsaXphdGlvbi5tdHhCaW5kSW52ZXJzZXNbYm9uZU5hbWVdID0gdGhpcy5tdHhCaW5kSW52ZXJzZXNbYm9uZU5hbWVdLnNlcmlhbGl6ZSgpO1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0aGlzKSBpZiAoX3NlcmlhbGl6YXRpb24ubXR4QmluZEludmVyc2VzW25vZGUubmFtZV0pXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckJvbmUobm9kZSwgYXdhaXQgbmV3IE1hdHJpeDR4NCgpLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uLm10eEJpbmRJbnZlcnNlc1tub2RlLm5hbWVdKSBhcyBNYXRyaXg0eDQpO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZXMgYW5kIHNldHMgdGhlIHdvcmxkIG1hdHJpeCBvZiBhIGJvbmUgcmVsYXRpdmUgdG8gaXRzIHBhcmVudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGN1bGF0ZU10eFdvcmxkKF9ub2RlOiBOb2RlKTogdm9pZCB7XHJcbiAgICAgIF9ub2RlLm10eFdvcmxkLnNldChcclxuICAgICAgICBfbm9kZS5jbXBUcmFuc2Zvcm0gP1xyXG4gICAgICAgICAgTWF0cml4NHg0Lk1VTFRJUExJQ0FUSU9OKF9ub2RlLmdldFBhcmVudCgpLm10eFdvcmxkLCBfbm9kZS5tdHhMb2NhbCkgOlxyXG4gICAgICAgICAgX25vZGUuZ2V0UGFyZW50KCkubXR4V29ybGRcclxuICAgICAgKTtcclxuICAgICAgX25vZGUubXR4V29ybGRJbnZlcnNlLnNldChNYXRyaXg0eDQuSU5WRVJTSU9OKF9ub2RlLm10eFdvcmxkKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXJlZ2lzdGVycyBhbGwgYm9uZXMgb2YgYSByZW1vdmVkIG5vZGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBobmRDaGlsZFJlbW92ZSA9IChfZXZlbnQ6IEV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgIGlmIChfZXZlbnQuY3VycmVudFRhcmdldCAhPSB0aGlzKSByZXR1cm47XHJcbiAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiBfZXZlbnQudGFyZ2V0IGFzIE5vZGUpIGlmICh0aGlzLmJvbmVzW25vZGUubmFtZV0pIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5ib25lc1tub2RlLm5hbWVdO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm10eEJpbmRJbnZlcnNlc1tub2RlLm5hbWVdO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICB9XHJcbn0iLCJuYW1lc3BhY2UgRnVkZ2VDb3JlIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQW4gaW5zdGFuY2Ugb2YgYSB7QGxpbmsgU2tlbGV0b259LlxyXG4gICAqIEl0IGhvbGRzIGFsbCB0aGUgaW5mb3JtYXRpb24gbmVlZGVkIHRvIGFuaW1hdGUgaXRzZWxmLiBSZWZlcmVuY2VkIGZyb20gYSB7QGxpbmsgQ29tcG9uZW50TWVzaH0gaXQgY2FuIGJlIGFzc29jaWF0ZWQgd2l0aCBhIHtAbGluayBNZXNoU2tpbn0gYW5kIGVuYWJsZSBza2VsZXRvbiBhbmltYXRpb24gZm9yIHRoZSBtZXNoLlxyXG4gICAqIEFzIGFuIGV4dGVuc2lvbiBvZiB7QGxpbmsgR3JhcGhJbnN0YW5jZX0gaXQgYWxzbyBrZWVwcyBhIHJlZmVyZW5jZSB0byBpdHMgcmVzb3VyY2UgYW5kIGNhbiB0aHVzIG9wdGltaXplIHNlcmlhbGl6YXRpb24uXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFNrZWxldG9uSW5zdGFuY2UgZXh0ZW5kcyBHcmFwaEluc3RhbmNlIHtcclxuICAgIHB1YmxpYyBiaW5kUG9zZTogQm9uZU1hdHJpeExpc3Q7XHJcbiAgICBwcml2YXRlIHNrZWxldG9uU291cmNlOiBTa2VsZXRvbjtcclxuXHJcbiAgICAjYm9uZXM6IEJvbmVMaXN0O1xyXG4gICAgI210eEJvbmVMb2NhbHM6IEJvbmVNYXRyaXhMaXN0O1xyXG4gICAgI210eEJvbmVzOiBNYXRyaXg0eDRbXTtcclxuICAgICNtdHhCb25lc1VwZGF0ZWQ6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIENSRUFURShfc2tlbGV0b246IFNrZWxldG9uKTogUHJvbWlzZTxTa2VsZXRvbkluc3RhbmNlPiB7XHJcbiAgICAgIGNvbnN0IHNrZWxldG9uOiBTa2VsZXRvbkluc3RhbmNlID0gbmV3IFNrZWxldG9uSW5zdGFuY2UoKTtcclxuICAgICAgYXdhaXQgc2tlbGV0b24uc2V0KF9za2VsZXRvbik7XHJcbiAgICAgIHJldHVybiBza2VsZXRvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGJvbmVzKCk6IEJvbmVMaXN0IHtcclxuICAgICAgcmV0dXJuIHRoaXMuI2JvbmVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgbXR4Qm9uZUxvY2FscygpOiBCb25lTWF0cml4TGlzdCB7XHJcbiAgICAgIHJldHVybiB0aGlzLiNtdHhCb25lTG9jYWxzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgYm9uZSB0cmFuc2Zvcm1hdGlvbnMgZm9yIGEgdmVydGV4XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXQgbXR4Qm9uZXMoKTogTWF0cml4NHg0W10ge1xyXG4gICAgICBpZiAodGhpcy4jbXR4Qm9uZXNVcGRhdGVkICE9IHRoaXMudGltZXN0YW1wVXBkYXRlKSB7XHJcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVNdHhCb25lcygpO1xyXG4gICAgICAgIHRoaXMuI210eEJvbmVzVXBkYXRlZCA9IHRoaXMudGltZXN0YW1wVXBkYXRlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLiNtdHhCb25lcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGlzIHNrZWxldG9uIGluc3RhbmNlIHRvIGJlIGEgcmVjcmVhdGlvbiBvZiB0aGUge0BsaW5rIFNrZWxldG9ufSBnaXZlblxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgc2V0KF9za2VsZXRvbjogU2tlbGV0b24pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgYXdhaXQgc3VwZXIuc2V0KF9za2VsZXRvbik7XHJcbiAgICAgIHRoaXMuc2tlbGV0b25Tb3VyY2UgPSBfc2tlbGV0b247XHJcbiAgICAgIHRoaXMucmVnaXN0ZXJCb25lcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXJpYWxpemUoKTogU2VyaWFsaXphdGlvbiB7XHJcbiAgICAgIGNvbnN0IHNlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24gPSBzdXBlci5zZXJpYWxpemUoKTtcclxuICAgICAgaWYgKHRoaXMuYmluZFBvc2UpIHtcclxuICAgICAgICBzZXJpYWxpemF0aW9uLmJpbmRQb3NlID0ge307XHJcbiAgICAgICAgZm9yIChjb25zdCBib25lTmFtZSBpbiB0aGlzLmJpbmRQb3NlKVxyXG4gICAgICAgICAgc2VyaWFsaXphdGlvbi5iaW5kUG9zZVtib25lTmFtZV0gPSB0aGlzLmJpbmRQb3NlW2JvbmVOYW1lXS5zZXJpYWxpemUoKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb246IFNlcmlhbGl6YXRpb24pOiBQcm9taXNlPFNlcmlhbGl6YWJsZT4ge1xyXG4gICAgICBhd2FpdCBzdXBlci5kZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbik7XHJcbiAgICAgIHRoaXMuc2tlbGV0b25Tb3VyY2UgPSBQcm9qZWN0LnJlc291cmNlc1tfc2VyaWFsaXphdGlvbi5pZFNvdXJjZSB8fCBfc2VyaWFsaXphdGlvbi5pZFJlc291cmNlXSBhcyBTa2VsZXRvbjtcclxuICAgICAgdGhpcy5yZWdpc3RlckJvbmVzKCk7XHJcbiAgICAgIGlmIChfc2VyaWFsaXphdGlvbi5iaW5kUG9zZSkge1xyXG4gICAgICAgIHRoaXMuYmluZFBvc2UgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGJvbmVOYW1lIGluIF9zZXJpYWxpemF0aW9uLmJpbmRQb3NlKVxyXG4gICAgICAgICAgdGhpcy5iaW5kUG9zZVtib25lTmFtZV0gPSBhd2FpdCBuZXcgTWF0cml4NHg0KCkuZGVzZXJpYWxpemUoX3NlcmlhbGl6YXRpb24uYmluZFBvc2VbYm9uZU5hbWVdKSBhcyBNYXRyaXg0eDQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldHMgdGhpcyBza2VsZXRvbiBpbnN0YW5jZSB0byBpdHMgZGVmYXVsdCBwb3NlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZXNldFBvc2UoKTogdm9pZCB7XHJcbiAgICAgIGZvciAoY29uc3QgYm9uZU5hbWUgaW4gdGhpcy5ib25lcylcclxuICAgICAgICB0aGlzLmJvbmVzW2JvbmVOYW1lXS5tdHhMb2NhbC5zZXQoTWF0cml4NHg0LklOVkVSU0lPTih0aGlzLnNrZWxldG9uU291cmNlLm10eEJpbmRJbnZlcnNlc1tib25lTmFtZV0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXBwbHlBbmltYXRpb24oX211dGF0b3I6IE11dGF0b3IpOiB2b2lkIHtcclxuICAgICAgc3VwZXIuYXBwbHlBbmltYXRpb24oX211dGF0b3IpO1xyXG4gICAgICBpZiAoX211dGF0b3IubXR4Qm9uZUxvY2FscylcclxuICAgICAgICBmb3IgKGNvbnN0IGJvbmVOYW1lIGluIF9tdXRhdG9yLm10eEJvbmVMb2NhbHMpIC8vIHNob3J0Y3V0IHRvIG11dGF0ZSB0aGUgbG9jYWwgbWF0cml4IG9mIGEgYm9uZSwgYnlwYXNzaW5nIHRoZSBoaWVyYXJjaHlcclxuICAgICAgICAgIHRoaXMubXR4Qm9uZUxvY2Fsc1tib25lTmFtZV0/Lm11dGF0ZShfbXV0YXRvci5tdHhCb25lTG9jYWxzW2JvbmVOYW1lXSk7XHJcbiAgICAgIGlmIChfbXV0YXRvci5ib25lcylcclxuICAgICAgICBmb3IgKGNvbnN0IGJvbmVOYW1lIGluIF9tdXRhdG9yLmJvbmVzKVxyXG4gICAgICAgICAgdGhpcy5ib25lc1tib25lTmFtZV0/LmFwcGx5QW5pbWF0aW9uKF9tdXRhdG9yLmJvbmVzW2JvbmVOYW1lXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVNdHhCb25lcygpOiB2b2lkIHtcclxuICAgICAgdGhpcy4jbXR4Qm9uZXMgPSBbXTtcclxuICAgICAgZm9yIChjb25zdCBib25lTmFtZSBpbiB0aGlzLmJvbmVzKSB7XHJcbiAgICAgICAgLy8gYm9uZSBtYXRyaXggVCA9IE5eLTEgKiBCX2RlbHRhICogQl8wXi0xICogU1xyXG4gICAgICAgIGNvbnN0IG10eEJvbmU6IE1hdHJpeDR4NCA9IHRoaXMuZ2V0UGFyZW50KCk/Lm10eFdvcmxkSW52ZXJzZS5jbG9uZSB8fCBNYXRyaXg0eDQuSURFTlRJVFkoKTtcclxuICAgICAgICAvLyBpZiAodGhpcy5tdHhQaXZvdCkgbXR4Qm9uZS5tdWx0aXBseSh0aGlzLm10eFBpdm90KTtcclxuICAgICAgICBtdHhCb25lLm11bHRpcGx5KHRoaXMuYm9uZXNbYm9uZU5hbWVdLm10eFdvcmxkKTtcclxuICAgICAgICBtdHhCb25lLm11bHRpcGx5KHRoaXMuc2tlbGV0b25Tb3VyY2UubXR4QmluZEludmVyc2VzW2JvbmVOYW1lXSk7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMubXR4UGl2b3QpIG10eEJvbmUubXVsdGlwbHkoTWF0cml4NHg0LklOVkVSU0lPTih0aGlzLm10eFBpdm90KSk7XHJcblxyXG4gICAgICAgIHRoaXMuI210eEJvbmVzLnB1c2gobXR4Qm9uZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyQm9uZXMoKTogdm9pZCB7XHJcbiAgICAgIHRoaXMuI2JvbmVzID0ge307XHJcbiAgICAgIHRoaXMuI210eEJvbmVMb2NhbHMgPSB7fTtcclxuICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMpIGlmICh0aGlzLnNrZWxldG9uU291cmNlLm10eEJpbmRJbnZlcnNlc1tub2RlLm5hbWVdKSB7XHJcbiAgICAgICAgdGhpcy5ib25lc1tub2RlLm5hbWVdID0gbm9kZTtcclxuICAgICAgICB0aGlzLm10eEJvbmVMb2NhbHNbbm9kZS5uYW1lXSA9IG5vZGUubXR4TG9jYWw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBlbnVtIE1JUE1BUCB7XHJcbiAgICBDUklTUCwgTUVESVVNLCBCTFVSUllcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQmFzZWNsYXNzIGZvciBkaWZmZXJlbnQga2luZHMgb2YgdGV4dHVyZXMuIFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgQFJlbmRlckluamVjdG9yVGV4dHVyZS5kZWNvcmF0ZVxyXG4gIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUZXh0dXJlIGV4dGVuZHMgTXV0YWJsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZVJlc291cmNlIHtcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgaWRSZXNvdXJjZTogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgcHVibGljIG1pcG1hcDogTUlQTUFQID0gTUlQTUFQLkNSSVNQO1xyXG4gICAgcHJvdGVjdGVkIHJlbmRlckRhdGE6IHsgW2tleTogc3RyaW5nXTogdW5rbm93biB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcgPSBcIlRleHR1cmVcIikge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICB0aGlzLm5hbWUgPSBfbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0IHRleEltYWdlU291cmNlKCk6IFRleEltYWdlU291cmNlO1xyXG4gICAgcHVibGljIHVzZVJlbmRlckRhdGEoKTogdm9pZCB7LyogaW5qZWN0ZWQgYnkgUmVuZGVySW5qZWN0b3IqLyB9XHJcblxyXG4gICAgcHVibGljIHJlZnJlc2goKTogdm9pZCB7XHJcbiAgICAgIHRoaXMucmVuZGVyRGF0YSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICBsZXQgc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbiA9IHtcclxuICAgICAgICBpZFJlc291cmNlOiB0aGlzLmlkUmVzb3VyY2UsXHJcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgIG1pcG1hcDogTUlQTUFQW3RoaXMubWlwbWFwXVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gc2VyaWFsaXphdGlvbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIFByb2plY3QucmVnaXN0ZXIodGhpcywgX3NlcmlhbGl6YXRpb24uaWRSZXNvdXJjZSk7XHJcbiAgICAgIHRoaXMubmFtZSA9IF9zZXJpYWxpemF0aW9uLm5hbWU7XHJcbiAgICAgIHRoaXMubWlwbWFwID0gPG51bWJlcj48dW5rbm93bj5NSVBNQVBbX3NlcmlhbGl6YXRpb24ubWlwbWFwXTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE11dGF0b3JBdHRyaWJ1dGVUeXBlcyhfbXV0YXRvcjogTXV0YXRvcik6IE11dGF0b3JBdHRyaWJ1dGVUeXBlcyB7XHJcbiAgICAgIGxldCB0eXBlczogTXV0YXRvckF0dHJpYnV0ZVR5cGVzID0gc3VwZXIuZ2V0TXV0YXRvckF0dHJpYnV0ZVR5cGVzKF9tdXRhdG9yKTtcclxuICAgICAgaWYgKHR5cGVzLm1pcG1hcClcclxuICAgICAgICB0eXBlcy5taXBtYXAgPSBNSVBNQVA7XHJcbiAgICAgIHJldHVybiB0eXBlcztcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgcmVkdWNlTXV0YXRvcihfbXV0YXRvcjogTXV0YXRvcik6IHZvaWQge1xyXG4gICAgICBkZWxldGUgX211dGF0b3IuaWRSZXNvdXJjZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRleHR1cmUgY3JlYXRlZCBmcm9tIGFuIGV4aXN0aW5nIGltYWdlXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFRleHR1cmVJbWFnZSBleHRlbmRzIFRleHR1cmUge1xyXG4gICAgcHVibGljIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50ID0gbnVsbDtcclxuICAgIHB1YmxpYyB1cmw6IFJlcXVlc3RJbmZvO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF91cmw/OiBSZXF1ZXN0SW5mbykge1xyXG4gICAgICBzdXBlcigpO1xyXG4gICAgICBpZiAoX3VybCkge1xyXG4gICAgICAgIHRoaXMubG9hZChfdXJsKTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBfdXJsLnRvU3RyaW5nKCkuc3BsaXQoXCIvXCIpLnBvcCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBQcm9qZWN0LnJlZ2lzdGVyKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdGV4SW1hZ2VTb3VyY2UoKTogVGV4SW1hZ2VTb3VyY2Uge1xyXG4gICAgICByZXR1cm4gdGhpcy5pbWFnZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzeW5jaHJvbm91c2x5IGxvYWRzIHRoZSBpbWFnZSBmcm9tIHRoZSBnaXZlbiB1cmxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGxvYWQoX3VybDogUmVxdWVzdEluZm8pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgdGhpcy51cmwgPSBfdXJsO1xyXG4gICAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgIC8vIGNvbnN0IHJlc3BvbnNlOiBSZXNwb25zZSA9IGF3YWl0IHdpbmRvdy5mZXRjaCh0aGlzLnVybCk7XHJcbiAgICAgIC8vIGNvbnN0IGJsb2I6IEJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XHJcbiAgICAgIC8vIGxldCBvYmplY3RVUkw6IHN0cmluZyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcbiAgICAgIC8vIHRoaXMuaW1hZ2Uuc3JjID0gb2JqZWN0VVJMO1xyXG5cclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMucmVuZGVyRGF0YSA9IG51bGw7IC8vIHJlZnJlc2ggcmVuZGVyIGRhdGEgb24gbmV4dCBkcmF3IGNhbGxcclxuICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoKSA9PiByZWplY3QoKSk7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSBuZXcgVVJMKHRoaXMudXJsLnRvU3RyaW5nKCksIFByb2plY3QuYmFzZVVSTCkudG9TdHJpbmcoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIFRyYW5zZmVyXHJcbiAgICBwdWJsaWMgc2VyaWFsaXplKCk6IFNlcmlhbGl6YXRpb24ge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHVybDogdGhpcy51cmwsXHJcbiAgICAgICAgdHlwZTogdGhpcy50eXBlLCAvLyBzZXJpYWxpemUgZm9yIGVkaXRvciB2aWV3c1xyXG4gICAgICAgIFtzdXBlci5jb25zdHJ1Y3Rvci5uYW1lXTogc3VwZXIuc2VyaWFsaXplKClcclxuICAgICAgfTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBkZXNlcmlhbGl6ZShfc2VyaWFsaXphdGlvbjogU2VyaWFsaXphdGlvbik6IFByb21pc2U8U2VyaWFsaXphYmxlPiB7XHJcbiAgICAgIGF3YWl0IHN1cGVyLmRlc2VyaWFsaXplKF9zZXJpYWxpemF0aW9uW3N1cGVyLmNvbnN0cnVjdG9yLm5hbWVdKTtcclxuICAgICAgYXdhaXQgdGhpcy5sb2FkKF9zZXJpYWxpemF0aW9uLnVybCk7XHJcbiAgICAgIC8vIHRoaXMudHlwZSBpcyBhbiBhY2Nlc3NvciBvZiBNdXRhYmxlIGRvZXNuJ3QgbmVlZCB0byBiZSBkZXNlcmlhbGl6ZWRcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIG11dGF0ZShfbXV0YXRvcjogTXV0YXRvcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICBpZiAoX211dGF0b3IudXJsICE9IHRoaXMudXJsLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkKF9tdXRhdG9yLnVybCk7XHJcbiAgICAgIC8vIGV4Y2VwdCB1cmwgZnJvbSBtdXRhdG9yIGZvciBmdXJ0aGVyIHByb2Nlc3NpbmdcclxuICAgICAgZGVsZXRlIChfbXV0YXRvci51cmwpO1xyXG4gICAgICBzdXBlci5tdXRhdGUoX211dGF0b3IpO1xyXG4gICAgICAvLyBUT0RPOiBleGFtaW5lIG5lY2Vzc2l0eSB0byByZWNvbnN0cnVjdCwgaWYgbXV0YXRvciBpcyBrZXB0IGJ5IGNhbGxlclxyXG4gICAgICAvLyBfbXV0YXRvci51cmwgPSB0aGlzLnVybDsgXHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRleHR1cmUgY3JlYXRlZCBmcm9tIGEgY2FudmFzXHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFRleHR1cmVCYXNlNjQgZXh0ZW5kcyBUZXh0dXJlIHtcclxuICAgIHB1YmxpYyBpbWFnZTogSFRNTEltYWdlRWxlbWVudCA9IG5ldyBJbWFnZSgpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcsIF9iYXNlNjQ6IHN0cmluZywgX21pcG1hcDogTUlQTUFQID0gTUlQTUFQLkNSSVNQKSB7XHJcbiAgICAgIHN1cGVyKF9uYW1lKTtcclxuICAgICAgdGhpcy5pbWFnZS5zcmMgPSBfYmFzZTY0O1xyXG4gICAgICB0aGlzLm1pcG1hcCA9IF9taXBtYXA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IHRleEltYWdlU291cmNlKCk6IFRleEltYWdlU291cmNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMuaW1hZ2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFRleHR1cmUgY3JlYXRlZCBmcm9tIGEgY2FudmFzXHJcbiAgICovXHJcbiAgLy8gVE9ETzogcmVtb3ZlIHR5cGUgZml4ZXMgd2hlbiBleHBlcmltZW50YWwgdGVjaG5vbG9neSBpcyBzdGFuZGFyZFxyXG4gIHR5cGUgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gR2VuZXJhbDtcclxuICB0eXBlIE9mZnNjcmVlbkNhbnZhcyA9IEdlbmVyYWw7XHJcblxyXG4gIGV4cG9ydCBjbGFzcyBUZXh0dXJlQ2FudmFzIGV4dGVuZHMgVGV4dHVyZSB7XHJcbiAgICBwdWJsaWMgY3JjMjogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHwgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKF9uYW1lOiBzdHJpbmcsIF9jcmMyOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcclxuICAgICAgc3VwZXIoX25hbWUpO1xyXG4gICAgICB0aGlzLmNyYzIgPSBfY3JjMjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgdGV4SW1hZ2VTb3VyY2UoKTogVGV4SW1hZ2VTb3VyY2Uge1xyXG4gICAgICByZXR1cm4gPE9mZnNjcmVlbkNhbnZhcz50aGlzLmNyYzIuY2FudmFzO1xyXG4gICAgfVxyXG4gIH1cclxuICAvKipcclxuICAgKiBUZXh0dXJlIGNyZWF0ZWQgZnJvbSBhIEZVREdFLVNrZXRjaFxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBUZXh0dXJlU2tldGNoIGV4dGVuZHMgVGV4dHVyZUNhbnZhcyB7XHJcbiAgICBwdWJsaWMgZ2V0IHRleEltYWdlU291cmNlKCk6IFRleEltYWdlU291cmNlIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8qKlxyXG4gICAqIFRleHR1cmUgY3JlYXRlZCBmcm9tIGFuIEhUTUwtcGFnZVxyXG4gICAqL1xyXG4gIGV4cG9ydCBjbGFzcyBUZXh0dXJlSFRNTCBleHRlbmRzIFRleHR1cmVDYW52YXMge1xyXG4gICAgcHVibGljIGdldCB0ZXhJbWFnZVNvdXJjZSgpOiBUZXhJbWFnZVNvdXJjZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBjbGFzcyBUZXh0dXJlRGVmYXVsdCBleHRlbmRzIFRleHR1cmVCYXNlNjQge1xyXG4gICAgcHVibGljIHN0YXRpYyB0ZXh0dXJlOiBUZXh0dXJlQmFzZTY0ID0gbmV3IFRleHR1cmVEZWZhdWx0KFwiVGV4dHVyZURlZmF1bHRcIiwgVGV4dHVyZURlZmF1bHQuZ2V0KCksIE1JUE1BUC5NRURJVU0pO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0KCk6IHN0cmluZyB7XHJcbiAgICAgIHJldHVybiBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBWkFBQUFHUUNBWUFBQUNBdnpiTUFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQURXTFNVUkJWSGhlN2QwSG5GVGx2Zi94SDl1WFpZR2w5eXJTUkpwRVVleFlzSkliYThSZTQ5OFdOY1pFYis0MWVwT0lzV3MwTml5eG0yZzBkdXdhZXdPN29xSkNBR25TdDdILzgzMDRCNGRsZHBrNVozYjN6TzduemV1ODVwd3pNOHZNczdQUGIzNVBPNjFxUEJaanJWcTE4dmZpS2ViRlIvbEZSUGxGUS9sRkUvZnl5L0Z2QVFCSUN3RUVBQkFLQVFRQUVBcDlJQkhSaGhvTjVSY041UmROU3lnLy9ZekN3a0pyM2JxMU8xNjllclhiTW9FQUVoRi93TkZRZnRGUWZ0RTA5L0xMemMyMUxsMjYyRTkrOGhNYlAzNjhWVmRYMit1dnYyN1RwMDkzUVNUcSt5ZUFSTVFmY0RTVVh6U1VYelROdGZ4eWNuS3NwS1RFQmcwYVpFY2VlYVFkZXVpaHRtTEZDdnZzczg5czNyeDU5dmpqajl2RER6OGNPUk9KSEVDcXFxcHM5dXpadG16Wk1sdTVjcVZMbGRxMWEyZDkrL1oxKzFIeEFZeUc4b3VHOG91Rzhvc21UUG5sNStkYjkrN2RiZmZkZDdkVFR6M1YxY1h2dnZ1dXZmenl5eTREa1ZXclZ0bU5OOTVvUzVZc2NjZGhoUTRnNWVYbDl1eXp6OXFNR1ROc3pabzEvdGtmS1FJcSt1Mjk5OTVXV2xycW4wMGZIOEJvS0w5b0tMOW9LTDlvMGlrL1BiWk5temEyeFJaYjJISEhIV2VUSjArMmhRc1gycE5QUG1tTEZ5LzJIN1hPZi83ekg3djExbHRkUFI1RnFBQ3lZTUVDdStlZWUxS0tYbXZYcnJYOTl0dlBSbzhlN1lKS3V2Z0FSa1A1UlJPVW56NjcraUtVbDVkbmxaV1Z0bno1OGxpOGRqNS8wVFNuOGxPVDFiNzc3bXNYWEhDQmRlN2MyVjU3N1RWNzg4MDNrNzdIYjcvOTF1NjQ0dzZycUtqd3o0U1RkZ0JSdHFIVUo0aG9DaENmZlBLSmZmWFZWNjQ5clgzNzlqWmd3QUMzQlpRdVRabzB5YmJiYmp1WFhxV0REMkEwbEY4MFFmbDE3TmpSampubUdPdlVxWk45ODgwMzlzQUREN2d2VWszOSt2bjhSZE9jeXE5cjE2NDJkZXBVMjNycnJlM1JSeDkxWDNKRWRiU2FzSXFMaTIzWXNHSHVYS1lDU05vcGdYcnZnK0NoL28vNzdydlB2Vmk5K0ovLy9PZDI5TkZIMjlDaFE5MExER2o0bU5JbEJabTQvOExRc3N5Y09kTTF4Yjc2NnF0Sm0ySkYyVWZQbmozdDE3Lyt0VTJZTU1GMjNYVlhPL2JZWTExUVFmTTFmLzU4dSttbW0xemZnZnA0NDA3MXNWNnpQc3RCOEZBOXJDLzhUejMxbE9zWHliUzBNcEFmZnZqQnJyNzY2dlVkTVVFZmlGS20vZmZmMzhyS3l0YW4rTXBHVlBqQlkvWEhxZXpqckxQT2NwM3NxZUliVERTVVgvMys4SWMvdU0rcjZFdlFUMy82VXpmc01TZzMzU3FBcUYzNW1XZWVzV3V2dmRhZGw0Y2Vlc2plZSs4OS82aHA4UG1McHI3eTA2aWxLNis4MGxYTTByOS9meHM1Y3FUN2dseFFVT0RPTmJSMHlpLzRvblBFRVVlNFk0MjBldWVkZDl4Z3BxT09Pc3AyM0hGSE53cExtaVFEK2VDRER6Ym94WC83N2JkZHhuSGdnUWRhbno1OXJHM2J0aTdiVUlEbzFxMmI2MEFQRkJVVjJYUFBQUmVMdEI5SVJuOVFMNzMwVXNvZGk3VTdKdEc4cUVONmwxMTI4WS9NdnY3NmEvdm5QLzlwZi83em4rM0JCeCswTDcvOE1sWjFtWnFxNXM2ZDZ6N0grcUtqWml2UisxRGdDeVlTWmxKYUFlU0xMNzd3OTh3Ky8veHo5OElVN2ZUTkxWbWtIREZpeEFZZDUzcTgzbFRVbm4rZ0lTakQxbEQwVkN1RjRNc1VtaS8xSjZoeldwK0pZRlBHcXFaUFZkU1hYbnFweTB3MTJpa085SmxVZHJGMDZkTDFuMk5OSm15b2pDbmxBS0lYODkxMzMvbEg1aUtkMm9QVnJwWVlKQktwT1V1akFRTHFnSHpycmJmcWJHc0dnRGhSM1RadTNMaU42cmlnY3RZWGpsZGVlY1Y5NDcvKyt1dnRqVGZlY0swelRTbDRiWTBoNVFDaWIyZEJXNkJvQ0srRzVxcG52ejdLVGdKcTJ2cjAwMC9KUUFCa0RUWC8xRmNwQi9lcEExdjlEbXJpdXZ2dXUrM2pqejl1OWxscXlnR2s5cHdQUlZrTjFkM1VzRndONncyb2owUkRJSU5PU3dDSU85Vmg2VXlHVmtCUkUvKzk5OTVyRjE5OGNTejdTeklsNVFCU095MVQ3NzBLVnUxcjlVa01NTnBYbEtidEdFQTI2ZDI3ZDUxTjlja29XS2hmV0YrV1AvendROWRmY3RWVlY3bEJHbXJOYVM1U0hzYXI0WW9hZ1JDNC9QTEwzV0pjMjI2N3JldnJxSXRXZm56aWlTZjhJN01ycnJqQ0RTM1RrTGhVMU82Y1YyZVFSbnpGeFdPUFBlYnZ4ZE5lZSszbDc4VlRVNVdmdnN6MDZ0WExUYndLTW1MTmFkS293ajMzM0hQOU9tNHFQMVVjbTIrK3VkMTIyMjF1R0h0QTQrczE4a1dkckUyRnoxODBxWmFmUnB4cUNHelVMQ0tvejNyMDZPRzZBRFE4dkw0MUE5TVp4bHNYRFV2WGNIWDFRUWZEempNMWpEZmxBS0lwOFltRnJYYStGMTU0d1VhTkdsVnZaRmF3ZU9TUlIveWpkWUZISFUzNmcweEY3UUpVbjhvdmZ2RUwvd2dJcDBPSERpNVk2RnRoRUVEVTVEQjgrSEFiUEhqd0JwbXpQb1A2STV3eVpZb2JkUk80NVpaYjNFQ1NWRC9MUUcyYTN2Q3JYLzJxempxMDJRU1Eyb0hnc3NzdWN6TWVOYW1tdmpkWk8vQmNjc2tsYm8wV1JkNVUxUDdaYWpaTG5GL1MxUFJ0TmM0U3M3ODRhcXJ5VTMvY2JydnQ1cjdRQkFGRTY3dHAzUC9Zc1dQWEQzdFUrZW1QV3hPMHpqMzNYSmRCQnpSUmRyUE5OblAzTlJVK2Y5R2tXbjZMRmkxeVEyTXpTYXZrYW9TWHZyVFVwZGtFRU0wNFYyZFFRRE0wbFlFb0VOVDNKaFZrTkkxZTFQZWhBS0kzb1c5NXFjaEVBVGFrRkl1dnlWQis5VXVjaWY3M3YvL2RyWlJ3MEVFSHJSOWRxUEpUUDUrYUcxUVpYblBOTmU2OHFBbHJ6cHc1L2xIVDRQTVhUYXJscCtaNjFWdGh5MXVmSWRWL1dxMWp6Smd4dHVXV1c3b3ZNWnVTaWZKcnlBQ1NjcTlRN1lrb210V29QN3hORldqaWtOMWdPWlBFNWdHZ0tTWDIzNmt2UTBQVkV6L1QrZ1BXOEhObEplbDBvcUo1MFVXWTFOK1ZqcUR5VngrSGdvYVdXRC90dE5OY3MyY3F3U01icFB3WFVYc1ltMmFWYThHdVRSVnE0aUprV3ZwQlAyZFRJN2VBeHBMWWdha0FvaEV5aWFNRTlZMVJGK1pSODFWY1podWpjZWxMaFFKSU90bUFIanR3NEVDM3pKUDZPRFNZb0NtYk9odEt5Z0VrY1Q2SDZQajc3Ny9mWUhKaE1vbnJCV2t1aVVhKzFEZHFDMmhNaVN2cXFqOURRU0x4TTYzbXJELzk2VTh1KzBoc3drWExvVGtkbTJwcENZS0xWdVpRc0ZEUU9PeXd3OXp5NmMzNUMzUEtBVVJ0d29tTGNhbWd0TFJKZlFGRVRWeGE4aVNnOW1JTndhVUpDM0doanN5QVB0TWFxcGs0NSttUGYveWphNFpWQjN2VTYwY2pPMmtxUXJMc0kyalNWTDJvenZDVFRqckpUampoQkxlL3FSVTZHb3RlZHpxWlU3cFNEaUFxck1TNUc1cUZycW42OWExcnBkbVhRUWVsYURWTGRSNXA2Qm9RQjFxbUlwRkd4R2craUJiTDB3U3dwNTkrZW4zd1VJZGpwa2ZpSU43MEpYbjI3Tm5yTTVDZ1FsWXJpaGFMMVdLeVo1OTl0cnRnWHVLeVRVMUJyMHRkQzVyMHFDL3F3YWFtczJSemxkU3ZyZnYwZUhXd2g1RnlBSkVoUTRiNGUrdUdRZW9DVVhVdEhLWUMxeUpqQWYwUzFMNDhmdno0MkVSblFKL2piYmJaeGo5YTkwVkovWGIvK01jLzNGVUhQL3JvSS9kWjFxSjV0OTkrZTFaY1dBaVpvZjVkamI1S3BDL1J1dGI0T2VlYzQyNTEzSkRmOE5PaFRFaVh0TDN6emp2ZG5LWmd1K0dHRzJ5SEhYYlk0SFVHQ1lFV2dOVGp6ei8vZkxmd2JicnZKYTBBb2prZmlmMFhta1NvSWJxMVUzdjl3V21KWXcwVkMyanVoeDZ2U1ZjMFlTRk9KazZjNkVaYUpjdW1WWWtvRzlId1hWM0xSa01pQXl6SjA3eHAzVDcxODJyU3FUNGp2L3psTCszd3d3OTNyU2h4ck1QVXNxTTZWdjNUR3E2clMyZG8vcDRtYm1zVkVWMTZQS0Jnb1N0cnFwVkkxM2xTUDgzSko1K2M5cW9LYVYyUlVQU0NGSldEU0tVbUtuVSticlhWVmk0Q3FxTmNMejV4NlhjZGF3eTlKaDhxNVV2blJjWWx1dGNsemVKcmRKUmZhblQxT2EyZ3FtOXNDZ3o2b3FTTVdYOTB3ZVZCZFU3emw5Uk1vTTkzVTg4QkVUNS8wZFJYZnJwUDlaa0NTRk5KcC94VXJ5b3Iwa1RyNE1xRDZkSThQV1hicVVvN2dJald2bGRrVHVYTmFRU0RMdjI1eHg1N3VGbS9hbTlMcDFDb0FLT2gvRktuSUtMaG1sbzlZZGFzV2E2NVNrdjJKTDVHcGY0cVU1MUxkMTVBUStEekYwMXpLejk5dVRuNDRJUGRhRmYxMmFYei9qUmlWczFkNlFnVlFOVHZvV3dpU08rU1VXZWovaEMxQ0prV1hOVGpOV3M5M1NGdGZBQ2pvZnpTcHlaWlpkWUtFSm9IRW1kOC9xSnBidVdueHlzVFVYTlc3VGxObTZLeVNMYzhRZ1VRMGJleko1OTgwaTBvcHpSUHpWZDY4Zm9XcDBpbUZGL1hSVC9ra0VQY29uVWF0UlZtL2djZndHZ292MmdvdjJnb3YyamlYbjZoQTRqb201cUNoWWJ6NmtxRFN2ODFMMFNUc3pSOFRCMDY2blRVU0pkZ3pIUzYrQUJHUS9sRlEvbEZRL2xGMDZ3RFNFRHB2dHJiRkR6MDQ5Uk1wVkVLV2lZaWFnSHdBWXlHOG91RzhvdUc4b3NtN3VXWGtRRFNrUGdBUmtQNVJVUDVSVVA1UlJQMzhndlhyZ1FBYVBFSUlBQ0FVQWdnQUlCUTFNQVc3MGJBZGE4UklZMGRPemJ1djk5WWUrdnR0LzA5aE5FcTVuME1jUmYzMGlNREFRQ0VRZ0FCQUlSQ0FBRUFoRUlBQVFDRVFnQUJBSVJDQUFFQWhKS1JBS0tyRE9wS1hWdHZ2YlYvQmdEUTNHVWtnT2h5b0FNSERneDlZWFlBUVBhaENRc0FFRXBHQWtqY1Y3UUVBR1FlR1FnQUlCUUNDQUFnRkFJSUFDQ1VqQWFRdUY4OUN3Q1FPV1FnQUlCUUNDQUFnRkF5RWtBWXhnc0FMUThaQ0FBZ0ZBSUlBQ0NVakFZUVJtRUJRTXRCQmdJQUNJVUFBZ0FJaFFBQ0FBZ2xJd0dFWWJ3QTBQS1FnUUFBUWlHQUFBQkN5V2dBWVJndkFMUWNaQ0FBZ0ZBSUlBQ0FVQWdnQUlCUU1oSkFHTVlMQUMwUEdRZ0FJQlFDQ0FBZ2xJd0dFSWJ4QWtETFFRWUNBQWlGQUFJQUNJVUFBZ0FJSlNNQmhHRzhBTkR5a0lFQUFFTEpVZllRZFpzMmJacjdZVWNkZFZUUys2TnNBTkJTYVdScm5MZU1aQ0Q2UVFDQWxvVW1MQUJBS0FRUUFFQW9HUTBnOUZrQVFNdEJCZ0lBQ0lVQUFnQUloUUFDQUFnbEl3R0VZYndBMFBLUWdRQUFRaUdBQUFCQ3lXZ0FZUmd2QUxRY1pDQUFnRkFJSUFDQVVBZ2dBSUJRTWhKQUdNWUxBQzBQR1FnQUlCUUNDQUFnbEl3R0VJYnhBa0RMUVFZQ0FBaUZBQUlBQ0lVQUFnQUlKU01CaEdHOEFORHlrSUVBQUVJaGdBQUFRc2xvQUdFWUx3QzBIR1FnQUlCUUNDQUFnRkF5RWtBWWhRVUFMUThaQ0FBZ0ZBSUlBQ0FVQWdnQUlKU01CaENHOFFKQXkwRUdBZ0FJaFFBQ0FBZ2xJd0dFWWJ3QTBQS1FnUUFBUWlHQUFBQkNJWUFBQUVMSmFBQmhHQzhBdEJ6cS9ZNWM2dzhiTnN3T091Z2crL0RERCszKysrLzN6MmFHRjVSMjluY1J3b2tubnZpY3Y0c1FidmpyRGY0ZXdxaHB4WmZLU0dKZWZEUmhBUUJDeVVnQUNacXVHTTRMQUMwSEdRZ0FJQlFDQ0FBZ0ZBSUlBQ0FVQWdnQUlCUUNDQUFnRkFJSUFDQ1VqQVFRaHZFQ1FNdERCZ0lBQ0lVQUFnQUloUUFDQUFpRkFBSUFDSVVBQWdBSWhRQUNBQWdsSXdHRVlid0EwUEtRZ1FBQVFpR0FBQUJDSVlBQUFFSWhnQUFBUWlHQUFBQkNJWUFBQUVMSlNBQmhHQzhBdER4a0lBQ0FVQWdnQUlCUUNDQUFnRkFJSUFDQVVBZ2dBSUJRTWhKQUdJVUZBQzBQR1FnQUlCUUNDQUFnRkFJSUFDQVVBZ2dBSUJRQ0NBQWdGQUlJQUNDVWpBUVFodkVDUU10REJnSUFDSVVBQWdBSWhRQUNBQWdsUi8wWFViZkhIMy9jL2JBOTk5d3o2ZjFSTmdCb3FkU3ZIT2VOREFRQUVBb0JCQUFRQ2dFRUFCQUtBUVFBRUFvQkJBQVFDZ0VFQUJCS1JnS0lobk1KdzI0Qm9PVWdBd0VBaEVJQUFRQ0VRZ0FCQUlSQ0FBRUFoRUlBQVFDRWtwRUF3aWdzQUdoNXlFQUFBS0VRUUFBQW9SQkFBQUNoRUVBQUFLRVFRQUFBb1JCQUFBQ2haQ1NBTUl3WEFGb2VNaEFBUUNnRUVBQkFLQVFRQUVBb0JCQUFRQ2dFRUFCQUtBUVFBRUFvR1FrZ0RPTUZnSmFIREFRQUVFcEdBa2h1YnE2N3JhNnVkcmNBZ09ZdjVRQ3lZc1VLdStPT08rekdHMiswZSs2NXg1WXZYKzdmVTc4MzNuakRwazJiWmpmZmZMTjkvUEhIL2xrQVFMWkxPWUFveTVnOWU3Yk5uVHZYUHYzMFU3dnd3Z3Z0ODg4L3Q3VnIxL3FQMkpneWttZWZmZGErK2VZYisrNjc3K3lxcTY3eTd3RUFaTHVVQTBoeGNiSDE3OS9mUHpKYnZYcTEzWC8vL1M0ekNRU2Q2WUV2dnZqQ3lzdkwzYjZDeWNNUFArejJBUURaTDYwK2tGR2pSdmw3WnAwNmRiTG5ubnV1M3Fhc21UTm4rbnRtWDM3NXBTMWJ0c3cvQWdCa3U3UUN5T0RCZzlkM21JdjJQL3ZzTTZ1cXF2TFAvRWpubElFRVB2cm9JeHMzYnB4L0JBRElkbWtGa0x5OFBCc3laSWgvdEM2Z1BQUE1NN1pxMVNyL3pJL1VQeEkwWDFWVVZMaGdNbW5TSkhjTUFNaCthUVVRR1RObWpMOW4xcUZEQjN2dHRkZldCNURFUHBBUFAvelEzelBYNlY1UVVHQVRKMDcwendBQXNsM2FBYVJmdjM1V1dGam9INW5ibnpWcmx1c2tWNUNReXNwSzE3UVZVRERaZnZ2dHJVZVBIdjRaQUVDMlN6dUE1T1RrMkpaYmJ1a2ZtV3ZTZXZIRkYxMmZoNXE0Uk1GRFFVUTBTa3ZEZVBmZWUyOHJMUzExNXdBQTJTL3RBQ0pqeDQ3MTk4emF0bTFyTTJiTWNQTkIyclJwNDg0bE5sK3A4N3lzck15MjIyNDdOeFFZQU5BOHFOTWlyUlVRMjdkdmI2ZWNjb29MSEVIZng1dHZ2bW05ZXZXeW5YYmF5WGJmZlhlNzdycnIxby9NdXVHR0cyeisvUG1obHptcHFhbTV3TjlGQ0Y3NS80Ky9peEJPUFBFRWZ3OWgxTlJzT0RjTTZZcjNBclZwWnlCcWtwbytmYm9OSHo3Y1AyTTJkT2hRTjB1OVQ1OCticjVIRUR5Ky8vNTdOM09kTmJJQW9QbEpPNEFvT0doWmtzUWxUTlIwdFdUSkVtdlhycDBiY1JYUVJNTGFzOU1CQU0xRHFENFF6U2gvNnFtbjNHejBRUGZ1M2UyRER6NndyNy8rMmgzcjJpRHFHd0VBTkUraEFvaWFzVFR5YXRDZ1FmNFpzODAzMzl5dHZCczBYNmxKYStuU3BWeGtDZ0NhcVZBQlJNMVhDeFlzc0lVTEY2NXZvbXJkdXJYbDUrZTdmVkUya3Jqc0NRQ2dlUWtWUUNSb3h1clpzNmQvWnQyS3ZhSXNSRU41eVQ0QW9Qa0tIVUEwaEZmTldJbXowZ09hU0tqbDN1dTdWZ2dBSUx1RkRpREtMdFRQY2RGRkY3bkZFb05nb2Y0UjlZVm94bm95ZFowSEFHU1h0Q2NTMXFaK2poRWpScmlBb2lHOGE5YXM4ZTlKVG85UFoxNkk5M09aU0JnQkV3bWpZU0poTkV3a2pLcVpUU1NzVGNGQW82MDBBMzJmZmZieHo5YU5TWVVBMER5a0ZFRFV6NkhPY2kxWDByVnIxL1dMSmdZVUZFcEtTdHhFd29DYXFyVGN1NTZqVlhnMVNnc0EwSHlrRkVCMFlhZzVjK2E0R2VoYTF5cVk2MUVmOVlrc1hyellQVWZMbVNTNzZCUUFJSHZSb3cwQUNDVWpBWVQ1SGdEUThwQ0JBQUJDSVlBQUFFSWhnQUFBUXNsb0FPSGFId0RRY3BDQkFBQkNJWUFBQUVMSlNBQmhHQzhBdER4a0lBQ0FVQWdnQUlCUUNDQUFnRkF5R2tBWXhnc0FMUWNaQ0FBZ0ZBSUlBQ0NVakFRUWh2RUNRTXREQmdJQUNJVUFBZ0FJaFFBQ0FBZ2xvd0dFWWJ3QTBIS1FnUUFBUWlHQUFBQkN5VWdBWVJndkFMUThaQ0FBZ0ZBSUlBQ0FVRExhaE1Vb0xBQm9PY2hBQUFDaDVDaDdpTHE5ODg0NzdvZU5IajA2NmYxUk5nQm9xZFNxRStlTkRBUUFFRXBHQW9naWtaQXhBRURMUVFZQ0FBaUZBQUlBQ0lVQUFnQUloUUFDQUFpRkFBSUFDSVVBQWdBSUpTTUJoR0c4QU5EeWtJRUFBRUloZ0FBQVFpR0FBQUJDSVlBQUFFSWhnQUFBUWlHQUFBQkN5VWdBWVJndkFMUThaQ0FBZ0ZBSUlBQ0FVQWdnQUlCUUNDQUFnRkFJSUFDQVVESVNRQmlGQlFBdER4a0lBQ0FVQWdnQUlCUUNDQUFnbEl6MmdRQUFXZzR5RUFCQUtBUVFBRUFvR1EwZ0RPTUZnSmFEREFRQUVBb0JCQUFRQ2dFRUFCQktSZ0lJdzNnQm9PVWhBd0VBaEVJQUFRQ0VrdEVBd2pCZUFHZzV5RUFBQUtFUVFBQUFvV1FrZ0RBS0N3QmFIdFg4a1RzdU9uYnNhS2VlZXFvdFdyVElycjc2YXY5c1p0VFUxTHpnN3lLRXQ5OStlMGQvRnlHTUhUdlczMXVuOXBlbDJ2MStUWDEvYmJVZlgxdERQeC9ORzAxWUFJQlFDQ0FBV2h4bFRtNWJ1M2I5UHRLWGtRQkM0UU9JTTlWUlZaV1Z0bURlZDNiam44Nnh2WVlVZUZ1KzdUWFV2L1cyc3cvYnlUNTY5MVdycUNpM3RWNWd3YWFSZ1FEMVVCOUE0aFo4V3cyMnByNGZkVk1RV0xKb2diM3k5RU4yMGo0amJkOHRpdTNJSGZ2WlA2WmQ1dDI3Y2RsOStOYkxkdFloMjl2K0kwcnNvSzI3MkQ5dnY4WVd6WjlyMWRWVi9pTlFHd0VFUUxPaG9QSDE1eC9hdlgrOTJBV0JuMi9id3k0NjVRRDc1b3VQL0Vla1p1V3lwWGI5LzUxaFUzYm9ZejhiMjlGdW52b2JtL1h4ZTE0d3FmWWZBY2xvRTVhK0lRRkFZMUkveGdkZTluRG5OUmZaejhhVTJTKzhiT1BXeTg1elFTQVR5bGV2dEFkdXZzUk9tYnlWKy9sL3UvcjM5c0diTC9uM3RteGtJQUN5UnRCMHQzWnR0YzE4ODBXYmR1bDV0dCtJRXZ2VllUdDVGZnYvMmhxdnNtOUk1V3RXZVlIcTkvYXJLVHZidnQ3L2UrYzFGOXBuTTk5eW1VOUxiRkpVeWhENVhaZVZsZG5wcDU5dWl4Y3Z0cXV1dXNvL214bmVMNFY1SUJFd0R5U2F1TThEMlpUYXo2OXRVeit2b1orZkt2MmM2cW9xbS8zRlJ6Yjl3ZHZ0eVFlbTJlcVZ5L3g3bTE1WnAyNjI2K1REYmU5RFQ3RE8zWHRiVGs1dTJyK3JiRVFHQWlDV2dxQXg1K3ZQN2RvTFRyVmpkeDlpcDB3ZWF3L2RkbVdzZ29jc1dUalBIcmpwRWp0NjEwRjIrcysyc1R1dnZjZ1dmei9QMWxaWFp5eUl4aEVCQkVDc3FLUDZoeVVMN2I0YnB0cnBCNHkzNC9ZWWFvL2VmYjB0bUR2YmYwUzhxYlA5enFzdnNDTjI2bWZuSHJXN1BmK3ZlMnpsOGgrYVpTQWhnQUNJaFZVcmx0a0xqOTFuWngyNmcwM1p2cmZyQ0ovMThidit2UTBuSjZlVjVlWGx1dmI4VEZMMk5QT05GMnpxMlllN3pPU0NYMHkyVDk5L3c4clhyUFlma2YxVVpwSERJbjBnOFVVZlNEUmJiYldWdjdkTzdXK1I2ZlpaTlBUOXRkVitmRzFOL1h6TnNWZ3c1eHU3NjlxTDdNMFhIbk9aUjBNb0xDaXdmbjE3MkU0VHhsbEpTWkU3cDVkZVhGeHNuVHVWV1Y1dXJwVlhWTmlzcjc2MUJ4NmFidk1YTEhLUHlUU1ZsL3BJZHZ1dm8yM1BnNDZ4amwxNmJMSU00MHl2dlA3ZmNBcmF0Mjl2WjV4eGhpMVpzc1N1dlBKSy8yeG1lQjlBQWtnRUJKQm9DQ0FOOC96S2luSTM5UGE2QzArM09iTS9kMzBGRGFWM3o2NzIyN09QZDRGaVU2OVgxSVEyNDhQUDdmSnI3N0NWS3hzdVc4Z3ZLTFMrZzRiYktmOTdyVzAyYkxUbDV1WDU5MlFQbXJBQU5DcjFaUnl6MjJENzdkRjcyTGRmZnRLZ3dTTS9QOC9PK2VVeDFxVnpoNVNDaCtSNjJjaW9FWVB0N0ZPUDlNODBEQVhSTHo1OHg4NDRjRnM3WXVmKzl2RjdyL24zWkE4Q0NJQkdOZlBaaDJ6TjkzUDhvNGJWeXZ0WFZWVzF5VXlxTmdXYkZTdFgrVWNOcmNiV0xKcG5qMTc1Ry84NGV4QkFnSHFvNGtuY1ZMRWtibkc3di9aVysvRzF0MlRQU2R5U1BTZHhTL2FjeEMyWlpRdm5XWTgyaGRhM3BNQ0tjMVBMQ3NLcXFLeTBzMzU3cWQxMjF5UDIzc3hQYmVrUHl6ZTVVS0plOThMRlMrM08reDcxenpRY3ZmOStKZm5XeXlzUFZjWjFsVmxjNmJjWCtSWFRCeEpmOUlGRXd3V2xvajAvbVFjdU9jdGV1dit2L3BIWm1xcHFXN2lteWxaVnAvK3p3aWd1S3JSUld3NjJ6cDA2V052U0Vpc295SGZuU2xvWHU4NXpCWnIzUC9qTWYzVERLTWxyWlowSzg2d3dMOWMvWTlacnlHZzc2OVlYTENjbmU3N1hrNEVBYUZSVmxSWCszanBGWGlXcWIrQjl2Vy9pcFY3RjJ0QldyeW0zVjkrWVlROC85cno5N2Q1SDdaWTdIckpyYjd6WHBsNTVxOTEyOXlNTkdqemE1dWRZdnpZRjFyT2tjSVBnSVRWYTlUZEVRRzVLQkJBQWphcTZzdExmMjVBcTFPNWV4ZHJmcTJBN0ZHeFl1V1l6aGNST2hiazJvTFRBdXJVdXNJTGM1Tld1Um4rRnllaWFVa1lEeUtiU1hTRGI2RE9kdU9rUFBIRnI2dnV6VWUwTXBMWjhyNEx0V0pSbkEwc0xyWXQzbTYwVUFyc1ZlKytqYmFHVkZlWlozaWFhcHJKeDJSTXlFQUNOcXJxcS9nQWlDcGE1T2Eyc3ZWZnhidVpWd0QxYjUxdCtsbncvTGZaZWQrL1dlVGJBZTkxdEMvSXN4dy8rbTFLelZzT1pDU0FBVUtkV3JkS3JkbFFCbCtUbldqOHZJMUgvUVp1OEhOY3NGQ2Q2UjJYNU9kYS90TUI2ZTYrek9EOHZwYUN4Z1N4c3dNbElBTW5XVkJwQTQ4dk56L2YzMHFNS1dmMEgzYjFzUkJWMXA0SmNhNFErOTNvVmVEVm85K0k4Ny9VVVd1ZldCWllmWVFSVnVvRTFEckx2RlFPTktMRy9RWnNxc2NTdHFlL2YxRmI3K2JXM1pNOUozSkk5SjNGTDlwekVMWm5jdkhBQkpLQ2ZxLzZFc3FJOGw1WDA5Z0pLNjF6di8vUHZiMmlxTk50NldaQTYrL3UyS2JUU2dqelgzQlpWSys5bjFGVm1jVVVBQWRDb29nYVFnQ3BiTlc4VjUrZGF6NUlDZi9SV1RvUDFsUlI1Rlh4WEwyZ3ArK21xUGhrdkc4cGtoYjh1QXlHQUFFQ2RrZ1dRYmoyNjJlbm5uVzdIbjM2Y2pkbDZ0QlVVRlBqM3BNWmxKVzcwVnI2WEZSUllMNitDYjVNWFBTdFJFMWw3THlpcDc2VzN0N1V0eVBXeWpjd0dqb0FMSU5rVlB6SWJRTEl0L1FMUStKTDFnUnh3K00rOElOTFZCbXcrd05zL3dNNmZlcDV0dit2Mi9yMnBjMW1KVjhHMzlyS1M3cTBMM055TExrVzVWcFRta2ltYThLY2dwTURSMlF0SzZudlJ6MjdJT3E2VkFoTVpDTkI4QkpWR3NHMnFENkN4Nzg5R3lUS1E3ajI3KzN2cnlqemZDektUZnJxbi9mellRLzJ6NmRQUFViYlF2akRmZXZ0TlhKclFwNDd2Wk5wNVFhTmJVWjV0NWsvNFV4QlNNTkxQaWFwenQ4NjI1K1E5WFlDc1N5YituOFpHQUFIUXFKSUZrRVVMTjc2QWt5clVMVVp2WVdQSGI3Z2VXUmd1S0hsWlJBY3ZtK2hYV21RRHZTRFJvempmdW5tYk91RVZOTHA2UWFOdFlWN0cxNkthZk1oa08rTzhNMnpIM1hhd1kwODl4cjJuWkZybDVHWmRFTWxJU1dYck55RUFqUzlaQVBsazVpZiszb1pVb1U3Y2ExZi9LSE9VbWJRcHlIVjlHdXFFYjRnRkRQUHk4dXlZVTQ2Mm4wd1k1LzM4ZFlGQi84OUJSeDdvN3F2TlhWQ3FKUVlRQUVoVnNnRHl6T1BQdXJXZ2ttbFgxczdhbExieGo3SkRVWEdSbmZrL3Y3UkJRd2R0bEZXb2VhNW4zNTcrVWFKMXpaVFpoQUFDMUtOMm40UCt3Qk8zdU4xZmU2djkrTnBic3Vja2JzbWVrN2dsZTA3aWxreE9rZ0JTdnFiYzNuemxyYVRQMGYvVHRuMWIveWc3SEhiOFlWYldvY3cvMnBEZTQvSWZsdnRIMlkwQUFxQlJGUlMxOXZjMjlNOTcvMm16WjgzZUtJam9lRldqWFIwd09tVkxBd2ZWM1ZtK2N2bEtXN3h3c1grVTNUTGFCNkp2Q2dCUW42S1NVbjl2WTMrOS9BYWIvdWgwVzdsaTVmcDZaZmFYMzlqU3hVdmRmallZc3NWZ042czhHVjBOOFpFSC91VWZaVDh5RUFDTnFxaWsvdWFvWng5L3ppNzY5Zi9aZjUvK08vdmRMLy9IL25yWmoxY3ZqRDB2Ym96NnlTai9ZR1BQUGZHOHpYaDdobitVL1FnZ1FEMFMyL3UxNlZ0eDR0YlU5MmVqMGxhcnJYMUJsYmRYLzdYSjFhbGVXWkg4NGxOeGxadVR1OEdjbG9CK1Y3Ty9uTzJ5cTQydHRUS3ZQSWEzTC9lUHN3Y0JCRUNqcWx3NjE2c3NLMjE0dXdvcnpNbSthMkRVcDNwdHRjMzVkcTUvdEM1d3FObnFxVWVldHVzdnJaMUoxVmhwWHJXTjlBTEhNSzg4Y2x0bFh6a1FRQUEwcXZKbDZ5WU50aStzc1RFZEsyeEFTWVhsdW15a0dRUVM3eTFvTU1DeUg1YTV3TEZ3L2tLYmR1MnQ5dnlUei9zUGtCb3I4Z0xuMExibE5xS3N3dHFrdCt4WHJCQkFBRFNxdFFtWHRGVmZjL2VTdGJaVnAzTHIwN3JTV2pXRFFMSm93U0s3NUhlWDJNWC9QZFV1dStoeSsrS1RML3g3YWl5LzFWb2JWRnBob3p0VVdJY2lOVkg2ZC9teXJWa3lKMmhMamJMTm1UUEgvYkFlUFhva3ZUL0tCalNsNERPWStGbFVYMFJ3MjlUM0I3U2Y3RmpQUzN4dTdlTkFRejAvbWJYVkcxL1NOcy83S3R1N1RiVnQxYkhjdWhWVmVZRms0LzhqbTFSVlZkdXlwY3U4QXROUmpaZGgxZGlBTmhVMjFudC9YWXJYV3JLSjd6VmV4dUkvWWIyZ0hPTzZaU1FEMFE4Q21pTjl0bFZoeHZVMkc2MnRxcnRqdkNEWGJHRGJLdThiK2hwcmw2ZU85dXdPSkRuZTYrL3RaVlpqTzY2eGJsN2d5SzJueGwxYldlNEhrZXhCRXhaUWoxUXE4YWE4RFRZZEo1Nkx5M0V5TlFsTldIVXB6ak1iWGxacG84dldXRWx1OW5XMGV5VmdYUXZYQlk3ZUpkV1c3d1ZHcjFqcVZiUFdlNTkxbEZsY0VVQ0FlZ1NWWVZ4dnM5SGE2dFNHNW5wdjBWcm5tNDNzVUdGanZJeEVIYzk1K1huV3FVc242OUNwZy8rb09OSHZvOGJhNTFmWk9DOXdLSk5TUnFYM2tZcWFtdXpLUGlTakFTUmJQOUJBWGVxcnZPTnlHK3pIOFRpWitwcXdrdEdQVVVhaUVWdG4vdW80Ty9OM3Y3U3ovL2NzTy9hMFk5TytjbUhEcWJFMmVkVzJkYWMxYmtodUtobEhiV3ErOGtyUFA4b09aQ0JBUFlKS01hNjMyV2h0MWFhYnNKSnBYZGJCeW5yMmNlOWQyMmFEQjlxdkx6ckhpbG9YK1k5b0NtdmRYSTZ4WG9ZMHNrT2xHd3pndmJSd2FtakNBcHFWVkNyeHByd05OaDBubm92TGNUS3BObUhWVnJscXBadGJrYWgxU1dzNzRvVEQvYVBHRkV3Q3JMQXRPMVJZMGNhWDkwaGJ0bldnQ3dFRXFFZFFHY2IxTmh1bDI0UVZxS29vdHprejN2S1BmdFM1WTZrTmJSZDB0amUwR211YlgyVmJ0bC9qQWtlYmdzejlEbHdBeWJMZktRRUVxRWNxbFhoVDN3YjdjVHhPcGlaa0JpSXpIcm5YbHMzL2Nha1FaU1R2UFhTWGRTaXNjWjN0dzd4QTBycUJBb21HRlk5b1gyNWJ0SyswMGdicGVzbStMd1FwQlpBMWE5Yll5cFVyL2FQd0ZpMWFWT2RWeDRBNENpckZ1TjVtbzV5ODhMV3Z2cVgvZTlyVk52L3pqNnhpeldwNysvNWJiZW0zWDduN3ZDS3hNaStRak5vZ2tFUXRJelZWcmNzNE5LeTRyWmR4NlA5cENMb21lb1A5OEFhU1VnQjU5dGxuN1lvcnJyQlhYbmxsb3piSVZLeGF0Y29lZXVnaHUrYWFhK3lUVDVKZit4aUlvMVFxOGFhOERUWWRKNTZMeTNFeU9mblJPcjJyeXRmWW0zZmRhRTlkL0Z1Yi84bE0vK3lQdlA5K2ZTQlJ4dEJtL1lURVZJUEp1c2UyZFlGRDYxVXA0OUI3VzNkdlE4bkp6WGRsbDAxU0NpQURCdzYwcXFvcW16NTl1Z3NrTDcvOHNxMVlzY0svZDkyM05LbjlnVkhHOGNRVFQ3am52UC8rKys1eC9mdjM5KzhGNGkrb0RPTjZtNDF5Q3hwbjFKUlhSQzVqMk5JTEFDUEx5cTE5ZnJXL1JFcGQ1ZWFWcTdkcEhzY283L0ZiTkZMZ0NMVEtWVTk4ZGdXUVZ0NkhjSk9mUW1VZGwxeHlpV3ZLa3VERDI2bFRKK3ZidDY4VkZSVzU3S1N3c05ER2p4OXZpeGN2dHErKytzcVdMMTl1T1RrNTd2bTYzV3l6emV6UVF3OTFQeU1OTC9pM0NPSHR0OS9lMGQ5RkNHUEhqdDJvMG83YnJXaGY0bnFjNk0yclRyQ3ZucnJaUDJvOGVpbHJxczNtcmM2MTc5ZmtXV1dOWHFNMkxYSllZNTJMcXF4YmNiVVZOVkZMVXJ2K0kyMjNLOTcwTWhIdkJmaUNjb3lybERJUVZmNWJicm1sNWZwdkxQaFFMRnk0ME41OTkxMTc5ZFZYM2JFQ3pJc3Z2bWd6Wjg1MHdVT0NKaS8xZll3Y09kTHRBOWxDZjhENnZNZjFOaHRGYmNJS3l5c3lOeUd4ZjJtMWplbFlic1BhbFZ2WG9rcDNxK04rYmFyZC9YcGNVOGoxeXFWVnNsVVdZeXpsVnp0cTFLaWtIZUFLRUVHUTBJZGErOGsrMk1wT0JnOGU3QjhCMmFHK3lqc090OEdtNDhSemNUbE9wckJ0UjMrdjZXakNuL3BKTm10YjVXNGpUUURNRk8vL1Y5bGxrNVFEU1BmdTNhMWp4L1IvOGZvUUtYTkp6R0NBYkJGVWhuRzl6VVlkTmgvbjd5RlI2ODU5L0wzc2tWYStOSHIwYVBmQlRZY2VUL01Wc2xVcWxYaFQzd2I3Y1R4T3B0dVkzYTNYOWdmNlI5bWhiYmVlMW52MDF0WjNxKzBzdHdIVzMyby9ZTFNOTysxRy95aDdwQlZBbEVYb3c1RU9QYjVkdTNiV3MyZFAvd3lRUFlKS01hNjMyU2duTjgvR24zTzNiWEg0UlY0QnAxVUZOYnFpMG5ZMjd1ZkgyNFRqejdTUit4MWlJL1krd0hiNmY3LzE3ODJNbnR2OXpIYjk4OHVXMzdyVVA1TTkwdnJ0bFphV3VtRzQrdkNtU2gzd1lUSVhJQTVTcWNTYjhqYllkSng0TGk3SGRkRmpoaDM4Rzl2cEQ4OVlibkZtSzg3ODRoSnJsWUhtY21VZE81M3lHK3M2YUppcnh3S0ZyVXN5RnZpR1Q3bkF0djMxM1kwMnREblQwaTRGQllPZzB6d1YraEFwY3dHeVVWQVp4dlUyMjNVWnNZUHRmZE5uMW1YVVJQOU1OTnNjL2d2YjQ1eUxiTkp2cDlyNG8wNnhqZ00yOSs5Smo1cXBmbkxZQ1paWFVPaWYrVkg1cXBWZXhaYitoT3BFdVVVbHR2UEZMOWp3UTg1Zk53TTlTNlVkUUlZT0hacldHdnk5ZXZXeXNySXkvd2pJTHFsVTRrMTlHK3pIOFRnVlJlMjYySTYvZjl6R25QSlgvMHc0SGZvTXNFNSt3RkRHMExIdlFOdG15a2xlRnZGYkt5aEpMOHZwUFhxOEZkYnhuTXJ5MWY1ZU9GMUdUclI5Yi8zR09nK2Y0Si9KWG1rSGtMeThQQnMrZkxqN0JlbURzaW5LV0lCc0ZWU0tjYjF0TGpUL1liTTlqN1A5N3BocmVjVnQvYlBwNlRseTQ5RmRLcWMySFR2YjFsTk9UUG1idmg0M2VPYzkzWE9US1M1dDUrK2xiOXdadDlpT0Z6NXVCVzNhKzJleVc2aUdQTTBKVVROV1hRVWNVSkFaTm15WWZ3UmtuMVFxOGFhOERUWWRKNTZMeTNHNmlzcTYydVM3RjlqUWc4L3pqdExyTjYxdmRGVGJyajFzMkc3NytVZjFLKzNhUFduVDFZL1M3ODh0N1RYRTlyMWpqdldmZUtRTGxzMUZxSGZTcDA4Zk43S3FQdm9RRFJreXhDMXpBbVNyb0RLTTYyMXpsSk9YYjF0TXVjQW0zZmlwRlhWSWZmVG0zSm52K25zYlUzbDE3TDlaU3BWM2FlZnU3dkhKVkphdnNWZHV2dHcvMnJSV3VmbXVvM3lQYTk2M292WmQvYlBOUjZnQW9zTFZ2STY2Q2xuMDRXYnVCN0pkZlpWM1hHNkQvVGdlaDZYbnR1azJ3UGErWlpZTm1IU2lmN1orUzc3NzJ0YldjN21JVkpkTFg3Rm92bnNQaWJTTS9QZGZmVzVQWC9MZnRtTGhBdjlzL1VwN0Q3VkpmLzNFaG5uWlZFNWVYcVR5aUt2UXVaU0NRKzFDVHFUTVE0c25BdGtzcUJUamV0dWM2VDNtZXRuSTJKT3Z0WWxYdkdHdHU5Vy9rbmZscWhYMjluM1Q2aXlYdk1KQ3kwbWhIK1NIT2QvWWR6UGVzdXFxU3ZlemxzejUxcDY1OHZmMit1MS84UUtVbG9hdm43S09RZnVmN21VZDczbEJzSjk3SDgxVlNxdngxdVhHRzIrMHVYTi92RHBZUUV1V2pCczN6dmJZWXcvL1RDU3N4aHNCcS9GR0UvZlZlQU02bHVCY1hJNHpxV1p0dGIxMzh6bjIrYit1TWE5Mjk4OXVyUHV3VVRaOHo4bHVFbUNpbFlzWDJndlhYV3hycXpZZEJFVExxK2NYRmxtRkY1aFMxVzdBS052NjdEdXNuWmQ5QkdVUlJTWitSa09LMUpzelpzd1lmMjlEV3JxRXVSOW9EdlFIck1vd3JyY3RpWnFnUmgzM1o1dDQ2V3ZXdHQ4Vy90bU4vZWVqOTJ6NkZiKzNMMTUrMXFvcjExMCtWMDFicy83OVhNckJRMnE4SUpWcThOQUt3eU9PL3BQdGZ1VmIxcjdQTVBmN2FRa2laU0RsNWVVMmRlclVqU1lXZHVqUXdVNDk5VlQvS0RJeWtBaklRS0xoZWlDWk9jNDBOU1Y5OXRBVk51TzI4N3lEdW9OQ2JrR2h0ZTNleThxWC8yQ3J2QXlrSVhRY3RwMXRmZVp0MW1ZVFRXeGhCT1VZVjVFeUVDM1Jyb21GaVc5UyszVmxKa0MyMGVkWmxXQmNiMXNxcmFjMStML09za2szZkd4bG00MzF6MjZzdXFMY2xzeWUxU0RCUTlkMjMrYWN1MnlYaTU5dmtPQ1JEU0lGRUttOXdLTDJSNHdZNFI4QjJTMVpwUjJuMjJEVGNlSzV1QnczSlAwL3BkMEcySzZYL3R1Mk9mY2UxM25kV0hwdGY1RHQrN2U1MW1lSGc3M1hFYmthelZxUjM3bEdXaVhPOVJnd1lJQzFiUnR1SmlrUU4wRmxHTmRick10RytrdzQwUGEvYTRIMTJla3c3MHpETmZ2a0ZaZmF4Q3Zmc3ZGZTVsSFloaVdhSWdjUXpUYlh6SFI5b0xVeDl3UE5TU3FWZUZQZkJ2dHhQRzVNQlNWdGJadXpiN2M5L2pMVDhrczcrR2N6UTgxVlkwNjV6aWJmL2IxMUdNanE0b0dNNUY3Qm5CQUZFODArQjVxTG9GS002eTAyMXE3UFVOdi96bmsyK0lCZnU0by9FcStjMnc4Y2EvdmZ2ZEFHN25HOG15V1BIMlVrZ0hUcjFzMjZkdTNxK2o3U1dha1hpTHRVS3ZHbXZBMDJIU2VlaTh0eFU5R0V3WkZIL2NIMjh3Skp4MkVUWENCSWx5NHh1OHNsTDl0dVY3eSs3aG9qSVg1R2N4ZHBHRzhpRGVuVlNyME5jTjF6aHZGR3dERGVhTGJhYXF2MUZXTmNiMFg3RXJmanVKajMzalAyOWpVbjJjcDVYL3BuNnBiWHVxMWJ2MnJ6ZlUveDNrL1RkcEFINVJsWEdTc2REZWx0Z09BQk5DbFZoUG9qanZOdHNCL0g0N2pvTm1wWG0zVDlSMTVnK0wzbEZyWHh6OWJpdmQ1K0U0KzIvZjgyendidmQ1cDMyTFRCSXh0UVFrQTlna294cnJkSW5mb3ZoaDl5bnJ2bXlLRDl6L0RQcnJQWjNpZmI1SHNXMlUvT3VNbE5Qa1JxTXRhRTFZQm93b3FBSnF4b1dBc3IybkdjVmE1ZWJuTmUvYWYxbW5DQTVjWDBtdVJCZWNZVkdRaFFELzBCcXpLTTZ5M0N5eTh1dFg2N1RJbHQ4TWdHQ20reC9oVEcvWTlFZjhoeFJ2bEZRL2xGUS9sRkUvZnlJd01CQUlSQ0FBR0FGa0RaeklvVks5eFduNHFLQ2x1NmRLbFZwYkQwUFUxWUVaRUNSMFA1UlVQNVJkT2N5dS94eHgrM045NTR3enAzN213bm4zeXlmM2Fkano3NnlKNTg4a2xidG15Wk85WWxOL2JaWngvcjMvL0hWWVJYclZwbC8vclh2K3lUVHo1eC82K21aV2lacWttVEp0VTVSWU1NQkFDeTNILys4eDk3ODgwM3JheXN6R1VRaVdiUG5tMFBQUENBOWUzYjEwNDg4VVE3L1BERDNhVHZ1KysrMjM3NDRRZi9VV2IzM1hlZmUreUJCeDVvSjUxMGtrMllNRUdqT0czNjlPbitJellXT1lBb01uWHMyTkg2OU9uak5yMEJBRURqVUxidzZLT1AyckJodzZ4WHIxNysyUis5K09LTDFxNWRPNXM4ZWJKYmRrb3Jwdi8wcHorMXlzcEtlK2VkZDl4anZ2NzZheGM4ZHQ5OWQzZU5KeTFOdGROT085bWdRWVBzcmJmZXFyTTVLM1FBVWVwWFVsSmlXMnl4aFoxenpqbDJ6ejMzMkoxMzNtbW5uSEtLUzQvaW5ob0NRSFB3L3Z2djI0SUZDMXpsWDV1dUZxdmdNSERnUUxmWWJVQ0JSSmZkK082Nzc5enhsMSt1VytKRkFTUFI1cHR2N29LSGZuNHlvUUtJMHA4ZVBYcTRpSGJERFRlNHRFalI3SU1QUG5BWnlISEhIZWNpSGdDZzRXZ05RalV4N2JERERrbXZ3NlFPY3dVUnRSTFZwcnA2NWNxVmJsOTlJOFhGeGRhNmRXdDNIQWhhbE9ycWVFOHJnQ2lDNlVYcWtyWG5uMysrWFhIRkZhN0RSbTFwenozM25NMmZQOSs5RUwycDZ1cHEvMWtBZ0lhZ2VsZnJFSTRmUDk0L3M2RWdRT2d4dGVtY09zNUZqNnZyTWJKNjlXcDNXMXZLQVVUQlEyblBsQ2xUYk5xMGFYYnd3UWZidSsrKzY1cXRGRGdTNlVVcGlBQUFHc2IzMzMvdk9zNzMzSFBQVFM1a3F5d2ttY1RuMWZlbFAvSW9MR1VlUng1NXBGMTQ0WVV1bU54MjIyMzI3My8vMi8ybjZzUlpzMmFOLzhoMW5UcnBERDhEQUtSSHczTFYyZDJtVFJzM0NrdWJNZ1hWeWRwWG5SdzBTU1hXendHZFV6KzJxUG1xcnNkSThMamFVZzRndWxDVXJuLys0WWNmMnIzMzNydCsrTmVpUll0Y0U1Yk9Bd0FheDd4NTgxeWdVRDkwc0gzeHhSZXV2MEw3cjczMm1nc2dHdEMwY09GQy8xbnI2QXUrenJWdjM5NGRLd2lwSHp1WUp4SlEvUzUxOVdtbkhFQVVpVFJKWmNhTUdlNVlUVlJQUC8yMC9lVXZmN0hseTVmYnR0dHU2ODREQUJxZTVtcWNkdHBwRzJ5REJ3KzIwdEpTdDY5NUhQbjUrZGF6WjA4WFdCS0g0czZhTmN0MU5XaVVsV2lPaUh6NjZhZnVWaFJrVk45MzZ0VEpqYXhOSnVVQW9zaWtvYnFhMGZqdHQ5KzZ3UEhLSzYrNFRwYmpqei9lWlNjQWdNYWhyRUdqcEJJM3RSU3BpMEg3R2kwcjIyKy92ZXNrRDFxS1huLzlkWHZ3d1FkZG43YW1ZWWdDaVk0MW91dlZWMTkxajlQRXdybHo1OXJFaVJQZFk1TFJaSTJVT3l1VUNnV3BUdEJKcnVGaEYxMTBrWFh2M3QxMXFvdkdGcXVQUkkrTEt1NTlLYzFwS1lTbVFQbEZRL2xGMDl6S1R3RkFsZjRSUnh6aG4xbEhVeXhlZXVrbDF5UlZWRlRrQW9ZQ1ErS3dYVFY5UGZYVVV5NWJVZDNkcFVzWEYzeUdEQm5pUDJKamFRV1FaUFNmcUdOZDBZc0FFaitVWHpTVVh6U1VYelJ4TDcrVW03QUFBRWhFQUFHQVprN05VcGRmZnJucmVsQldjOHN0dDJSazVDd0JCQUNhT1ExeVVqLzE4ODgvN3haUVZFZTdGbCtNaWdBQ0FDM0FYbnZ0WmUrOTk1NWIvbVMvL2ZiTFNQOFBBUVFBV2dBTjhkV21tZXJCRU4rb0NDQUEwQUpvaU82SUVTTnM1TWlSN3VxRm1VQUFBWUJtVHRjRTBleHpMZnUrODg0N3U2a1d1blJ0VkFRUUFHam10Qmp1VVVjZDVacXd0SHJJMFVjZjdTN0ZFUlVCQkFDYUFmVnRMRm15WlAwMVBoSnBMU3ZOT3RjeVZOcTBYbGF5aTB5Smxvbi82cXV2YlBIaXhmNlp1cWtiUHRKVVIyYWlNNU0xQ3Nvdkdzb3ZtdVpVZmxvbFhjMVNXZ2RMaXlrbTBxVTNOUG9xV0ZCUm1jZysrK3pqK2tRQ0NoajMzMysvVytVM29FdmhIbmpnZ1Vrdk5pVmtJQUNRNVRSUlVDdnA2Z3Q5N2FDakJYQzFjdm8yMjJ4ajU1NTdycDE2NnFudWt1UVBQZlRRK21YZWRjRXBMWlpiVVZIaExsSCttOS84eGwyeVhOZEtmK0tKSjl4amtrazdnR2dDU3JEcEtsVzZyU3VLYitwK0FFQTBhcnBTSlQ5dTNEZ1hRR3BUOXFIK2psMTIyY1ZsRW1yTzJuZmZmVjNRQ0ZxTlB2LzhjOWQwdGZ2dXU3dldKR1VvR3EybHlZWmEwbDJCSlptVUE0Z0NnZGFGSHpWcTFBYWJsZ05PMXBhbUsxZ05IejdjdlFpbFFYbytBQ0N6ZE9Fb1hZbFFvNnRxVTVQVm5EbHpYQjJjK0VWZVFVUVhrOUlGcVdUMjdObnUvbjc5K3JuandJQUJBMXlnVVhCSkp1VmFYYjM0eHg1N3JFdUZIbnZzc2ZYYlhYZmRaVHZ1dUtPTGdnRk5VaGs2ZEtqZGZ2dnQ5c2dqajdpclkya3FQVUVFQURKSDEybDY0WVVYM05Mc1dxYTlOaTNSTHNHVkJ4UHBuSzRUSW5xY090bHI5M1VFVnlJTUhsZGJXaG1Jc29yMzMzL2Zyci8rZXJkZGQ5MTE3c0pTMTF4enpmb3JGWXBTb0QzMjJNTzFzZDEwMDAzMjRvc3YycFFwVTF6UFB3QWdNL1NGWHMxV2FnMUtKcWo0azNXQzYycUZ5bHhFajFPelZXM0I4NExIMVpaeUFGR0VVc2J4OGNjZisyZlNvelFvdUFnVkFDQ2FiNzc1eHEyb08yblNwQTJhcHhJRnJUNkpsN01OcUxOZFFVVDB1TG9lSThIamFrczVnS2dUUlIwdUR6endnQzFZc01CbXpwenBqbFBkTklSTTExVUhBRVNucFVtNmR1MXFQL3p3Z3h0cHBVMzdxcXUxdjNUcDB2VlhIRXhXOXlxclVLdVNGQmNYSjMxTU1LZEVWNkpOUm1FcnJZSGFTblBVMXBadU5xRU1KTXk4RU1hUlIwUDVSVVA1UlVQNVJWTmYrVjEyMldXMmZQbHkvMmhqdSs2NnF4dTYrOGMvL3RIMVNSOXd3QUgrUGV2cTQ2bFRwN3JMMVdxNHJpNkYrOG9ycjdqNUk1cEhFdEJsY0o5OTlsazc4OHd6azNaQnBCMUFHaHNmd0dnb3YyZ292MmdvdjJqU0xiKy8vLzN2YmlMMzZhZWY3cDh4TjZsYmt3TjFMdWhvVjUvMWd3OCthSWNjY29nTkhqell6VHpYb0NjRm5Ra1RKcmpIYUdDVStyaVZuUngzM0hIdVhHME1pd0tBWmt6elA5U3NOVzNhTkpkbGFDWGVoeDkrMkEzdDNYenp6ZDFqTkh5M2YvLytycXRCOTcvODhzdDI4ODAzdXlZeERZaXFDeGxJUkh3RGpJYnlpNGJ5aTZhNWxkK3JyNzdxNW16b2dsR0oxT0d1Q1lXTEZpMXlXWWdDeDdiYmJ1c21ld2ZVeGFBbUs2M2FxMzJON3RwdXUrM2NsUXpyUWdDSmlEL2dhQ2kvYUNpL2FDaS9hR2pDQWdDRVFnQUJBSVJnOXY4QjRoTU9wSStYbHRzQUFBQUFTVVZPUks1Q1lJST1cIjtcclxuICAgIH1cclxuICB9XHJcbn0iLCIvLyAvPHJlZmVyZW5jZSBwYXRoPVwiLi4vRXZlbnQvRXZlbnQudHNcIi8+XHJcbi8vIC88cmVmZXJlbmNlIHBhdGg9XCIuLi9UaW1lL1RpbWUudHNcIi8+XHJcbm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIC8qKlxyXG4gICAqIERldGVybWluZXMgdGhlIG1vZGUgYSBsb29wIHJ1bnMgaW5cclxuICAgKi9cclxuICBleHBvcnQgZW51bSBMT09QX01PREUge1xyXG4gICAgLyoqIExvb3AgY3ljbGVzIGNvbnRyb2xsZWQgYnkgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSAqL1xyXG4gICAgRlJBTUVfUkVRVUVTVCA9IFwiZnJhbWVSZXF1ZXN0XCIsXHJcbiAgICAvKiogTG9vcCBjeWNsZXMgY29udHJvbGxlZCBieSB4clNlc3Npb24ucmVxdWVzdEFuaW1hdGlvbkZyYW1lICovXHJcbiAgICBGUkFNRV9SRVFVRVNUX1hSID0gXCJmcmFtZVJlcXVlc3RYUlwiLFxyXG4gICAgLyoqIExvb3AgY3ljbGVzIHdpdGggdGhlIGdpdmVuIGZyYW1lcmF0ZSBpbiB7QGxpbmsgVGltZS5nYW1lfSAqL1xyXG4gICAgVElNRV9HQU1FID0gXCJ0aW1lR2FtZVwiLFxyXG4gICAgLyoqIExvb3AgY3ljbGVzIHdpdGggdGhlIGdpdmVuIGZyYW1lcmF0ZSBpbiByZWFsdGltZSwgaW5kZXBlbmRlbnQgb2Yge0BsaW5rIFRpbWUuZ2FtZX0gKi9cclxuICAgIFRJTUVfUkVBTCA9IFwidGltZVJlYWxcIlxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29yZSBsb29wIG9mIGEgRlVER0UgYXBwbGljYXRpb24uIEluaXRpYWxpemVzIGF1dG9tYXRpY2FsbHkgYW5kIG11c3QgYmUgc3RhcnRlZCBleHBsaWNpdGx5LlxyXG4gICAqIEl0IHRoZW4gZmlyZXMge0BsaW5rIEVWRU5ULkxPT1BfRlJBTUV9IHRvIGFsbCBhZGRlZCBsaXN0ZW5lcnMgYXQgZWFjaCBmcmFtZVxyXG4gICAqIFxyXG4gICAqIEBhdXRob3IgSmlya2EgRGVsbCdPcm8tRnJpZWRsLCBIRlUsIDIwMTlcclxuICAgKi9cclxuICBleHBvcnQgY2xhc3MgTG9vcCBleHRlbmRzIEV2ZW50VGFyZ2V0U3RhdGljIHtcclxuICAgIHByaXZhdGUgc3RhdGljIMaSVGltZVN0YXJ0R2FtZTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIMaSVGltZVN0YXJ0UmVhbDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIMaSVGltZUZyYW1lR2FtZTogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIMaSVGltZUZyYW1lUmVhbDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIMaSVGltZUZyYW1lU3RhcnRHYW1lOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgxpJUaW1lRnJhbWVTdGFydFJlYWw6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHN0YXRpYyDGklRpbWVMYXN0RnJhbWVHYW1lQXZnOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgxpJUaW1lTGFzdEZyYW1lUmVhbEF2ZzogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIMaSRnJhbWVzOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgcnVubmluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbW9kZTogTE9PUF9NT0RFID0gTE9PUF9NT0RFLkZSQU1FX1JFUVVFU1Q7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBpZEludGVydmFsbDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIGlkUmVxdWVzdDogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgc3RhdGljIGZwc0Rlc2lyZWQ6IG51bWJlciA9IDMwO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZnJhbWVzVG9BdmVyYWdlOiBudW1iZXIgPSAzMDtcclxuICAgIHByaXZhdGUgc3RhdGljIHN5bmNXaXRoQW5pbWF0aW9uRnJhbWU6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAvKiogVGhlIGdhbWV0aW1lIHRoZSBsb29wIHdhcyBzdGFydGVkLCBvdmVyd3JpdHRlbiBhdCBlYWNoIHN0YXJ0ICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCB0aW1lU3RhcnRHYW1lKCk6IG51bWJlciB7IHJldHVybiBMb29wLsaSVGltZVN0YXJ0R2FtZTsgfVxyXG4gICAgLyoqIFRoZSByZWFsdGltZSB0aGUgbG9vcCB3YXMgc3RhcnRlZCwgb3ZlcndyaXR0ZW4gYXQgZWFjaCBzdGFydCAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdGltZVN0YXJ0UmVhbCgpOiBudW1iZXIgeyByZXR1cm4gTG9vcC7GklRpbWVTdGFydFJlYWw7IH1cclxuICAgIC8qKiBUaGUgZ2FtZXRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCBsb29wIGN5Y2xlICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCB0aW1lRnJhbWVHYW1lKCk6IG51bWJlciB7IHJldHVybiBMb29wLsaSVGltZUZyYW1lR2FtZTsgfVxyXG4gICAgLyoqIFRoZSByZWFsdGltZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IGxvb3AgY3ljbGUgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHRpbWVGcmFtZVJlYWwoKTogbnVtYmVyIHsgcmV0dXJuIExvb3AuxpJUaW1lRnJhbWVSZWFsOyB9XHJcbiAgICAvKiogVGhlIGdhbWV0aW1lIHRoZSBsYXN0IGxvb3AgY3ljbGUgc3RhcnRlZCovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCB0aW1lRnJhbWVTdGFydEdhbWUoKTogbnVtYmVyIHsgcmV0dXJuIExvb3AuxpJUaW1lRnJhbWVTdGFydEdhbWU7IH1cclxuICAgIC8qKiBUaGUgcmVhbHRpbWUgdGhlIGxhc3QgbG9vcCBjeWNsZSBzdGFydGVkKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHRpbWVGcmFtZVN0YXJ0UmVhbCgpOiBudW1iZXIgeyByZXR1cm4gTG9vcC7GklRpbWVGcmFtZVN0YXJ0UmVhbDsgfVxyXG4gICAgLyoqIFRoZSBhdmVyYWdlIG51bWJlciBvZiBmcmFtZXMgcGVyIHNlY29uZCBpbiBnYW1ldGltZSAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgZnBzR2FtZUF2ZXJhZ2UoKTogbnVtYmVyIHsgcmV0dXJuIDEwMDAgLyBMb29wLsaSVGltZUxhc3RGcmFtZUdhbWVBdmc7IH1cclxuICAgIC8qKiBUaGUgYXZlcmFnZSBudW1iZXIgb2YgZnJhbWVzIHBlciBzZWNvbmQgaW4gcmVhbHRpbWUgKi9cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGZwc1JlYWxBdmVyYWdlKCk6IG51bWJlciB7IHJldHVybiAxMDAwIC8gTG9vcC7GklRpbWVMYXN0RnJhbWVSZWFsQXZnOyB9XHJcbiAgICAvKiogVGhlIG51bWJlciBvZiBmcmFtZXMgdHJpZ2dlcmVkIHNvIGZhciAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgZnJhbWVzKCk6IG51bWJlciB7IHJldHVybiBMb29wLsaSRnJhbWVzOyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgdGhlIGxvb3Agd2l0aCB0aGUgZ2l2ZW4gbW9kZSBhbmQgZnBzLiAgXHJcbiAgICAgKiBUaGUgZGVmYXVsdCBmb3IgX21vZGUgaXMgRlJBTUVfUkVRVUVTVCwgc2VlIHtAbGluayBMT09QX01PREV9LCBob29raW5nIHRoZSBsb29wIHRvIHRoZSBicm93c2VyJ3MgYW5pbWF0aW9uIGZyYW1lLlxyXG4gICAgICogSXMgb25seSBhcHBsaWNhYmxlIGluIFRJTUUtbW9kZXMuXHJcbiAgICAgKiBfc3luY1dpdGhBbmltYXRpb25GcmFtZSBpcyBleHBlcmltZW50YWwgYW5kIG9ubHkgYXBwbGljYWJsZSBpbiBUSU1FLW1vZGVzLCBkZWZlcnJpbmcgdGhlIGxvb3AtY3ljbGUgdW50aWwgdGhlIG5leHQgcG9zc2libGUgYW5pbWF0aW9uIGZyYW1lLlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHN0YXJ0KF9tb2RlOiBMT09QX01PREUgPSBMT09QX01PREUuRlJBTUVfUkVRVUVTVCwgX2ZwczogbnVtYmVyID0gNjAsIF9zeW5jV2l0aEFuaW1hdGlvbkZyYW1lOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgTG9vcC5zdG9wKCk7XHJcblxyXG4gICAgICBMb29wLsaSVGltZVN0YXJ0R2FtZSA9IFRpbWUuZ2FtZS5nZXQoKTtcclxuICAgICAgTG9vcC7GklRpbWVTdGFydFJlYWwgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgTG9vcC7GklRpbWVGcmFtZVN0YXJ0R2FtZSA9IExvb3AuxpJUaW1lU3RhcnRHYW1lO1xyXG4gICAgICBMb29wLsaSVGltZUZyYW1lU3RhcnRSZWFsID0gTG9vcC7GklRpbWVTdGFydFJlYWw7XHJcbiAgICAgIExvb3AuZnBzRGVzaXJlZCA9IChfbW9kZSA9PSBMT09QX01PREUuRlJBTUVfUkVRVUVTVCkgPyA2MCA6IF9mcHM7XHJcbiAgICAgIExvb3AuZnJhbWVzVG9BdmVyYWdlID0gTG9vcC5mcHNEZXNpcmVkO1xyXG4gICAgICBMb29wLsaSVGltZUxhc3RGcmFtZUdhbWVBdmcgPSBMb29wLsaSVGltZUxhc3RGcmFtZVJlYWxBdmcgPSAxMDAwIC8gTG9vcC5mcHNEZXNpcmVkO1xyXG4gICAgICBMb29wLm1vZGUgPSBfbW9kZTtcclxuICAgICAgTG9vcC5zeW5jV2l0aEFuaW1hdGlvbkZyYW1lID0gX3N5bmNXaXRoQW5pbWF0aW9uRnJhbWU7XHJcblxyXG4gICAgICBsZXQgbG9nOiBzdHJpbmcgPSBgTG9vcCBzdGFydGluZyBpbiBtb2RlICR7TG9vcC5tb2RlfWA7XHJcbiAgICAgIGlmIChMb29wLm1vZGUgIT0gTE9PUF9NT0RFLkZSQU1FX1JFUVVFU1QpXHJcbiAgICAgICAgbG9nICs9IGAgd2l0aCBhdHRlbXB0ZWQgJHtfZnBzfSBmcHNgO1xyXG4gICAgICBEZWJ1Zy5mdWRnZShsb2cpO1xyXG5cclxuICAgICAgc3dpdGNoIChfbW9kZSkge1xyXG4gICAgICAgIGNhc2UgTE9PUF9NT0RFLkZSQU1FX1JFUVVFU1Q6XHJcbiAgICAgICAgICBMb29wLmxvb3BGcmFtZSgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMT09QX01PREUuRlJBTUVfUkVRVUVTVF9YUjpcclxuICAgICAgICAgIExvb3AubG9vcEZyYW1lWFIoKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTE9PUF9NT0RFLlRJTUVfUkVBTDpcclxuICAgICAgICAgIExvb3AuaWRJbnRlcnZhbGwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoTG9vcC5sb29wVGltZSwgMTAwMCAvIExvb3AuZnBzRGVzaXJlZCk7XHJcbiAgICAgICAgICBMb29wLmxvb3BUaW1lKCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIExPT1BfTU9ERS5USU1FX0dBTUU6XHJcbiAgICAgICAgICBMb29wLmlkSW50ZXJ2YWxsID0gVGltZS5nYW1lLnNldFRpbWVyKDEwMDAgLyBMb29wLmZwc0Rlc2lyZWQsIDAsIExvb3AubG9vcFRpbWUpO1xyXG4gICAgICAgICAgTG9vcC5sb29wVGltZSgpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBMb29wLnJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcHMgdGhlIGxvb3BcclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBzdG9wKCk6IHZvaWQge1xyXG4gICAgICBpZiAoIUxvb3AucnVubmluZylcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBzd2l0Y2ggKExvb3AubW9kZSkge1xyXG4gICAgICAgIGNhc2UgTE9PUF9NT0RFLkZSQU1FX1JFUVVFU1Q6XHJcbiAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoTG9vcC5pZFJlcXVlc3QpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBMT09QX01PREUuRlJBTUVfUkVRVUVTVF9YUjpcclxuICAgICAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5zZXNzaW9uLmNhbmNlbEFuaW1hdGlvbkZyYW1lKExvb3AuaWRSZXF1ZXN0KTtcclxuICAgICAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5zZXNzaW9uID0gbnVsbDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTE9PUF9NT0RFLlRJTUVfUkVBTDpcclxuICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKExvb3AuaWRJbnRlcnZhbGwpO1xyXG4gICAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKExvb3AuaWRSZXF1ZXN0KTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgTE9PUF9NT0RFLlRJTUVfR0FNRTpcclxuICAgICAgICAgIFRpbWUuZ2FtZS5kZWxldGVUaW1lcihMb29wLmlkSW50ZXJ2YWxsKTtcclxuICAgICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZShMb29wLmlkUmVxdWVzdCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIExvb3AucnVubmluZyA9IGZhbHNlO1xyXG4gICAgICBEZWJ1Zy5mdWRnZShcIkxvb3Agc3RvcHBlZCFcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjb250aW51ZSgpOiB2b2lkIHtcclxuICAgICAgaWYgKExvb3AucnVubmluZylcclxuICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICBMb29wLnN0YXJ0KExvb3AubW9kZSwgTG9vcC5mcHNEZXNpcmVkLCBMb29wLnN5bmNXaXRoQW5pbWF0aW9uRnJhbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGxvb3AoKTogdm9pZCB7XHJcbiAgICAgIGxldCB0aW1lOiBudW1iZXI7XHJcbiAgICAgIHRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgTG9vcC7GklRpbWVGcmFtZVJlYWwgPSB0aW1lIC0gTG9vcC7GklRpbWVGcmFtZVN0YXJ0UmVhbDtcclxuICAgICAgTG9vcC7GklRpbWVGcmFtZVN0YXJ0UmVhbCA9IHRpbWU7XHJcblxyXG4gICAgICB0aW1lID0gVGltZS5nYW1lLmdldCgpO1xyXG4gICAgICBMb29wLsaSVGltZUZyYW1lR2FtZSA9IHRpbWUgLSBMb29wLsaSVGltZUZyYW1lU3RhcnRHYW1lO1xyXG4gICAgICBMb29wLsaSVGltZUZyYW1lU3RhcnRHYW1lID0gdGltZTtcclxuXHJcbiAgICAgIExvb3AuxpJUaW1lTGFzdEZyYW1lR2FtZUF2ZyA9ICgoTG9vcC5mcmFtZXNUb0F2ZXJhZ2UgLSAxKSAqIExvb3AuxpJUaW1lTGFzdEZyYW1lR2FtZUF2ZyArIExvb3AuxpJUaW1lRnJhbWVHYW1lKSAvIExvb3AuZnJhbWVzVG9BdmVyYWdlO1xyXG4gICAgICBMb29wLsaSVGltZUxhc3RGcmFtZVJlYWxBdmcgPSAoKExvb3AuZnJhbWVzVG9BdmVyYWdlIC0gMSkgKiBMb29wLsaSVGltZUxhc3RGcmFtZVJlYWxBdmcgKyBMb29wLsaSVGltZUZyYW1lUmVhbCkgLyBMb29wLmZyYW1lc1RvQXZlcmFnZTtcclxuXHJcbiAgICAgIC8vIFRPRE86IGNvbnNpZGVyIExvb3BFdmVudCB3aGljaCBjb252ZXlzIGluZm9ybWF0aW9uIHN1Y2ggYXMgdGltZUVsYXBzZWQgZXRjLi4uXHJcbiAgICAgIExvb3AuxpJGcmFtZXMrKztcclxuICAgICAgbGV0IGV2ZW50OiBFdmVudCA9IG5ldyBFdmVudChFVkVOVC5MT09QX0ZSQU1FKTtcclxuICAgICAgTG9vcC50YXJnZXRTdGF0aWMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgbG9vcEZyYW1lKCk6IHZvaWQge1xyXG4gICAgICBMb29wLmxvb3AoKTtcclxuICAgICAgTG9vcC5pZFJlcXVlc3QgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKExvb3AubG9vcEZyYW1lKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgc3RhdGljIGxvb3BGcmFtZVhSKF90aW1lOiBudW1iZXIgPSBudWxsLCBfeHJGcmFtZTogWFJGcmFtZSA9IG51bGwpOiB2b2lkIHtcclxuICAgICAgTG9vcC5sb29wKCk7XHJcbiAgICAgIFhSVmlld3BvcnQuZGVmYXVsdC5kcmF3KHRydWUsIF94ckZyYW1lKTtcclxuICAgICAgTG9vcC5pZFJlcXVlc3QgPSBYUlZpZXdwb3J0LmRlZmF1bHQuc2Vzc2lvbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoTG9vcC5sb29wRnJhbWVYUik7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHN0YXRpYyBsb29wVGltZSgpOiB2b2lkIHtcclxuICAgICAgaWYgKExvb3Auc3luY1dpdGhBbmltYXRpb25GcmFtZSlcclxuICAgICAgICBMb29wLmlkUmVxdWVzdCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoTG9vcC5sb29wKTtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIExvb3AubG9vcCgpO1xyXG4gICAgfVxyXG4gIH1cclxufSIsIm5hbWVzcGFjZSBGdWRnZUNvcmUge1xyXG4gIGV4cG9ydCBpbnRlcmZhY2UgVGltZVVuaXRzIHtcclxuICAgIGhvdXJzPzogbnVtYmVyO1xyXG4gICAgbWludXRlcz86IG51bWJlcjtcclxuICAgIHNlY29uZHM/OiBudW1iZXI7XHJcbiAgICB0ZW50aHM/OiBudW1iZXI7XHJcbiAgICBodW5kcmVkcz86IG51bWJlcjtcclxuICAgIHRob3VzYW5kcz86IG51bWJlcjtcclxuICAgIGZyYWN0aW9uPzogbnVtYmVyO1xyXG4gICAgYXNIb3Vycz86IG51bWJlcjtcclxuICAgIGFzTWludXRlcz86IG51bWJlcjtcclxuICAgIGFzU2Vjb25kcz86IG51bWJlcjtcclxuICB9XHJcblxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgVGltZXJzIGV4dGVuZHMgT2JqZWN0IHtcclxuICAgIFtpZDogbnVtYmVyXTogVGltZXI7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBnZW5lcmF0ZSBhIHRpbWVzdGFtcCB0aGF0IGNvcnJlbGF0ZXMgd2l0aCB0aGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZSBzdGFydCBvZiB0aGUgcHJvZ3JhbSBidXQgYWxsb3dzIGZvciByZXNldHRpbmcgYW5kIHNjYWxpbmcuICBcclxuICAgKiBTdXBwb3J0cyB7QGxpbmsgVGltZXJ9cyBzaW1pbGFyIHRvIHdpbmRvdy5zZXRJbnRlcnZhbCBidXQgd2l0aCByZXNwZWN0IHRvIHRoZSBzY2FsZWQgdGltZS5cclxuICAgKiBBbGwgdGltZSB2YWx1ZXMgYXJlIGdpdmVuIGluIG1pbGxpc2Vjb25kc1xyXG4gICAqIFxyXG4gICAqIEBhdXRob3JzIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFRpbWUgZXh0ZW5kcyBFdmVudFRhcmdldFVuaWZpZWQge1xyXG4gICAgLyoqIFN0YW5kYXJkIGdhbWUgdGltZSBzdGFydGluZyBhdXRvbWF0aWNhbGx5IHdpdGggdGhlIGFwcGxpY2F0aW9uICovXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGdhbWU6IFRpbWUgPSBuZXcgVGltZSgpO1xyXG4gICAgcHJpdmF0ZSBzdGFydDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzY2FsZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBvZmZzZXQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbGFzdENhbGxUb0VsYXBzZWQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgdGltZXJzOiBUaW1lcnMgPSB7fTtcclxuICAgIHByaXZhdGUgaWRUaW1lckFkZGVkTGFzdDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgc3VwZXIoKTtcclxuICAgICAgdGhpcy5zdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICB0aGlzLnNjYWxlID0gMS4wO1xyXG4gICAgICB0aGlzLm9mZnNldCA9IDAuMDtcclxuICAgICAgdGhpcy5sYXN0Q2FsbFRvRWxhcHNlZCA9IDAuMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgcmVwcmVzZW50aW9ucyBvZiB0aGUgdGltZSBnaXZlbiBpbiBtaWxsaXNlY29uZHMgaW4gdmFyaW91cyBmb3JtYXRzIGRlZmluZWQgaW4ge0BsaW5rIFRpbWVVbml0c31cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRVbml0cyhfbWlsbGlzZWNvbmRzOiBudW1iZXIpOiBUaW1lVW5pdHMge1xyXG4gICAgICBsZXQgdW5pdHM6IFRpbWVVbml0cyA9IHt9O1xyXG5cclxuICAgICAgdW5pdHMuYXNTZWNvbmRzID0gX21pbGxpc2Vjb25kcyAvIDEwMDA7XHJcbiAgICAgIHVuaXRzLmFzTWludXRlcyA9IHVuaXRzLmFzU2Vjb25kcyAvIDYwO1xyXG4gICAgICB1bml0cy5hc0hvdXJzID0gdW5pdHMuYXNNaW51dGVzIC8gNjA7XHJcblxyXG4gICAgICB1bml0cy5ob3VycyA9IE1hdGguZmxvb3IodW5pdHMuYXNIb3Vycyk7XHJcbiAgICAgIHVuaXRzLm1pbnV0ZXMgPSBNYXRoLmZsb29yKHVuaXRzLmFzTWludXRlcykgJSA2MDtcclxuICAgICAgdW5pdHMuc2Vjb25kcyA9IE1hdGguZmxvb3IodW5pdHMuYXNTZWNvbmRzKSAlIDYwO1xyXG5cclxuICAgICAgdW5pdHMuZnJhY3Rpb24gPSBfbWlsbGlzZWNvbmRzICUgMTAwMDtcclxuICAgICAgdW5pdHMudGhvdXNhbmRzID0gX21pbGxpc2Vjb25kcyAlIDEwO1xyXG4gICAgICB1bml0cy5odW5kcmVkcyA9IF9taWxsaXNlY29uZHMgJSAxMDAgLSB1bml0cy50aG91c2FuZHM7XHJcbiAgICAgIHVuaXRzLnRlbnRocyA9IHVuaXRzLmZyYWN0aW9uIC0gdW5pdHMuaHVuZHJlZHMgLSB1bml0cy50aG91c2FuZHM7XHJcblxyXG4gICAgICByZXR1cm4gdW5pdHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8jcmVnaW9uIEdldC9TZXQgdGltZSBhbmQgc2NhbGluZ1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgc2NhbGVkIHRpbWVzdGFtcCBvZiB0aGlzIGluc3RhbmNlIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0KCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLm9mZnNldCArIHRoaXMuc2NhbGUgKiAocGVyZm9ybWFuY2Uubm93KCkgLSB0aGlzLnN0YXJ0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHJlbWFpbmluZyB0aW1lIHRvIHRoZSBnaXZlbiBwb2ludCBvZiB0aW1lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRSZW1haW5kZXIoX3RvOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gX3RvIC0gdGhpcy5nZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIChSZS0pIFNldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGlzIGluc3RhbmNlXHJcbiAgICAgKiBAcGFyYW0gX3RpbWUgVGhlIHRpbWVzdGFtcCB0byByZXByZXNlbnQgdGhlIGN1cnJlbnQgdGltZSAoZGVmYXVsdCAwLjApXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXQoX3RpbWU6IG51bWJlciA9IDApOiB2b2lkIHtcclxuICAgICAgdGhpcy5vZmZzZXQgPSBfdGltZTtcclxuICAgICAgdGhpcy5zdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICB0aGlzLmdldEVsYXBzZWRTaW5jZVByZXZpb3VzQ2FsbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc2NhbGluZyBvZiB0aGlzIHRpbWUsIGFsbG93aW5nIGZvciBzbG93bW90aW9uICg8MSkgb3IgZmFzdGZvcndhcmQgKD4xKSBcclxuICAgICAqIEBwYXJhbSBfc2NhbGUgVGhlIGRlc2lyZWQgc2NhbGluZyAoZGVmYXVsdCAxLjApXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRTY2FsZShfc2NhbGU6IG51bWJlciA9IDEuMCk6IHZvaWQge1xyXG4gICAgICB0aGlzLnNldCh0aGlzLmdldCgpKTtcclxuICAgICAgdGhpcy5zY2FsZSA9IF9zY2FsZTtcclxuICAgICAgLy9UT0RPOiBjYXRjaCBzY2FsZT0wXHJcbiAgICAgIHRoaXMucmVzY2FsZUFsbFRpbWVycygpO1xyXG4gICAgICB0aGlzLmdldEVsYXBzZWRTaW5jZVByZXZpb3VzQ2FsbCgpO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KEVWRU5ULlRJTUVfU0NBTEVEKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgc2NhbGluZyBvZiB0aGlzIHRpbWVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFNjYWxlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLnNjYWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmVzIHRoZSBvZmZzZXQgb2YgdGhpcyB0aW1lXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRPZmZzZXQoKTogbnVtYmVyIHtcclxuICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmVzIHRoZSBzY2FsZWQgdGltZSBpbiBtaWxsaXNlY29uZHMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IGNhbGwgdG8gdGhpcyBtZXRob2RcclxuICAgICAqIEF1dG9tYXRpY2FsbHkgcmVzZXQgYXQgZXZlcnkgY2FsbCB0byBzZXQoLi4uKSBhbmQgc2V0U2NhbGUoLi4uKVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RWxhcHNlZFNpbmNlUHJldmlvdXNDYWxsKCk6IG51bWJlciB7XHJcbiAgICAgIGxldCBjdXJyZW50OiBudW1iZXIgPSB0aGlzLmdldCgpO1xyXG4gICAgICBsZXQgZWxhcHNlZDogbnVtYmVyID0gY3VycmVudCAtIHRoaXMubGFzdENhbGxUb0VsYXBzZWQ7XHJcbiAgICAgIHRoaXMubGFzdENhbGxUb0VsYXBzZWQgPSBjdXJyZW50O1xyXG4gICAgICByZXR1cm4gZWxhcHNlZDtcclxuICAgIH1cclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuXHJcbiAgICAvLyNyZWdpb24gVGltZXJzXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBQcm9taXNlPHZvaWQ+IHRvIGJlIHJlc29sdmVkIGFmdGVyIHRoZSB0aW1lIGdpdmVuLiBUbyBiZSB1c2VkIHdpdGggYXN5bmMvYXdhaXRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGF5KF9sYXBzZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShfcmVzb2x2ZSA9PiB0aGlzLnNldFRpbWVyKF9sYXBzZSwgMSwgKCkgPT4gX3Jlc29sdmUoKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86IGV4YW1pbmUgaWYgd2ViLXdvcmtlcnMgd291bGQgZW5oYW5jZSBwZXJmb3JtYW5jZSBoZXJlIVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wcyBhbmQgZGVsZXRlcyBhbGwge0BsaW5rIFRpbWVyfXMgYXR0YWNoZWQuIFNob3VsZCBiZSBjYWxsZWQgYmVmb3JlIHRoaXMgVGltZS1vYmplY3QgbGVhdmVzIHNjb3BlXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjbGVhckFsbFRpbWVycygpOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgaWQgaW4gdGhpcy50aW1lcnMpIHtcclxuICAgICAgICB0aGlzLmRlbGV0ZVRpbWVyKE51bWJlcihpZCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGVzIHtAbGluayBUaW1lcn0gZm91bmQgdXNpbmcgdGhlIGludGVybmFsIGlkIG9mIHRoZSBjb25uZWN0ZWQgaW50ZXJ2YWwtb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gX2lkIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZGVsZXRlVGltZXJCeUl0c0ludGVybmFsSWQoX2lkOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgaWQgaW4gdGhpcy50aW1lcnMpIHtcclxuICAgICAgICBsZXQgdGltZXI6IFRpbWVyID0gdGhpcy50aW1lcnNbaWRdO1xyXG4gICAgICAgIGlmICh0aW1lci5pZCA9PSBfaWQpIHtcclxuICAgICAgICAgIHRpbWVyLmNsZWFyKCk7XHJcbiAgICAgICAgICBkZWxldGUgdGhpcy50aW1lcnNbaWRdO1xyXG4gICAgICAgICAgLy8gVE9ETzogY2hlY2sgaWYgYW4gZWFybHkgb3V0IGlzIE9LIGhlcmUuLi4gc2hvdWxkIGJlIVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5zdGFsbHMgYSB0aW1lciBhdCB0aGlzIHRpbWUgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gX2xhcHNlIFRoZSBvYmplY3QtdGltZSB0byBlbGFwc2UgYmV0d2VlbiB0aGUgY2FsbHMgdG8gX2NhbGxiYWNrXHJcbiAgICAgKiBAcGFyYW0gX2NvdW50IFRoZSBudW1iZXIgb2YgY2FsbHMgZGVzaXJlZCwgMCA9IEluZmluaXRlXHJcbiAgICAgKiBAcGFyYW0gX2hhbmRsZXIgVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZWFjaCB0aGUgZ2l2ZW4gbGFwc2UgaGFzIGVsYXBzZWRcclxuICAgICAqIEBwYXJhbSBfYXJndW1lbnRzIEFkZGl0aW9uYWwgcGFyYW1ldGVycyB0byBwYXNzIHRvIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBzZXRUaW1lcihfbGFwc2U6IG51bWJlciwgX2NvdW50OiBudW1iZXIsIF9oYW5kbGVyOiBUaW1lckhhbmRsZXIsIC4uLl9hcmd1bWVudHM6IE9iamVjdFtdKTogbnVtYmVyIHtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby11bnVzZWQtZXhwcmVzc2lvblxyXG4gICAgICBuZXcgVGltZXIodGhpcywgX2xhcHNlLCBfY291bnQsIF9oYW5kbGVyLCBfYXJndW1lbnRzKTtcclxuICAgICAgLy90aGlzLmFkZFRpbWVyKHRpbWVyKTtcclxuICAgICAgcmV0dXJuIHRoaXMuaWRUaW1lckFkZGVkTGFzdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBpbnRlcm5hbGx5IGJ5IHtAbGluayBUaW1lfSBhbmQge0BsaW5rIFRpbWVyfSBhbmQgbXVzdCBub3QgYmUgY2FsbGVkIG90aGVyd2lzZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYWRkVGltZXIoX3RpbWVyOiBUaW1lcik6IG51bWJlciB7XHJcbiAgICAgIHRoaXMudGltZXJzWysrdGhpcy5pZFRpbWVyQWRkZWRMYXN0XSA9IF90aW1lcjtcclxuICAgICAgcmV0dXJuIHRoaXMuaWRUaW1lckFkZGVkTGFzdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZXMgdGhlIHRpbWVyIHdpdGggdGhlIGlkIGdpdmVuIGJ5IHRoaXMgdGltZSBvYmplY3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIGRlbGV0ZVRpbWVyKF9pZDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgIGxldCB0aW1lcjogVGltZXIgPSB0aGlzLnRpbWVyc1tfaWRdO1xyXG4gICAgICBpZiAoIXRpbWVyKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgdGltZXIuY2xlYXIoKTtcclxuICAgICAgZGVsZXRlIHRoaXMudGltZXJzW19pZF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSB0aW1lciB3aXRoIHRoZSBnaXZlbiBpZCBvciBudWxsIGlmIG5vdCBmb3VuZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFRpbWVyKF9pZDogbnVtYmVyKTogVGltZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy50aW1lcnNbX2lkXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBsaXN0IG9mIHRpbWVycyBjdXJyZW50bHkgaW5zdGFsbGVkIG9uIHRoaXMgdGltZSBvYmplY3RcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldFRpbWVycygpOiBUaW1lcnMge1xyXG4gICAgICBsZXQgcmVzdWx0OiBUaW1lcnMgPSB7fTtcclxuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocmVzdWx0LCB0aGlzLnRpbWVycyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgYXJlIHtAbGluayBUaW1lcnN9IGluc3RhbGxlZCB0byB0aGlzXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBoYXNUaW1lcnMoKTogYm9vbGVhbiB7XHJcbiAgICAgIHJldHVybiAoT2JqZWN0LmtleXModGhpcy50aW1lcnMpLmxlbmd0aCA+IDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjcmVhdGVzIHtAbGluayBUaW1lcn1zIHdoZW4gc2NhbGluZyBjaGFuZ2VzXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVzY2FsZUFsbFRpbWVycygpOiB2b2lkIHtcclxuICAgICAgZm9yIChsZXQgaWQgaW4gdGhpcy50aW1lcnMpIHtcclxuICAgICAgICBsZXQgdGltZXI6IFRpbWVyID0gdGhpcy50aW1lcnNbaWRdO1xyXG4gICAgICAgIHRpbWVyLmNsZWFyKCk7XHJcbiAgICAgICAgZGVsZXRlIHRoaXMudGltZXJzW2lkXTtcclxuICAgICAgICBpZiAoIXRoaXMuc2NhbGUpXHJcbiAgICAgICAgICAvLyBUaW1lIGhhcyBzdG9wcGVkLCBubyBuZWVkIHRvIHJlcGxhY2UgY2xlYXJlZCB0aW1lcnNcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAvKiB0aGlzLnRpbWVyc1tpZF0gPSAgKi9cclxuICAgICAgICB0aW1lciA9IHRpbWVyLmluc3RhbGxDb3B5KCk7IC8vIHRoZSB0aW1lciBpcyBhdXRvbWF0aWNhbGx5IGFkZGVkIHRvIHRoaXMgdGltZSBpbnN0YW5jZVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnRpbWVyc1t0aGlzLmlkVGltZXJBZGRlZExhc3RdOyAvLyByZW1vdmUgdGhlIGNvcHkgYWdhaW4gLi4uXHJcbiAgICAgICAgdGhpcy50aW1lcnNbaWRdID0gdGltZXI7IC8vIC4uLiBhbmQgcGxhY2UgaXQgYXQgdGhlIGlkIG9mIHRoZSBvcmlnaW5hbFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvblxyXG59IiwibmFtZXNwYWNlIEZ1ZGdlQ29yZSB7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyB0aGUgc2lnbmF0dXJlIG9mIGhhbmRsZXIgZnVuY3Rpb25zIGZvciB7QGxpbmsgRXZlbnRUaW1lcn1zLCB2ZXJ5IHNpbWlsYXIgdG8gdXN1YWwgZXZlbnQgaGFuZGxlclxyXG4gICAqL1xyXG4gIGV4cG9ydCB0eXBlIFRpbWVySGFuZGxlciA9IChfZXZlbnQ6IEV2ZW50VGltZXIpID0+IHZvaWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIEEge0BsaW5rIFRpbWVyfS1pbnN0YW5jZSBpbnRlcm5hbGx5IHVzZXMgd2luZG93LnNldEludGVydmFsIHRvIGNhbGwgYSBnaXZlbiBoYW5kbGVyIHdpdGggYSBnaXZlbiBmcmVxdWVuY3kgYSBnaXZlbiBudW1iZXIgb2YgdGltZXMsXHJcbiAgICogcGFzc2luZyBhbiB7QGxpbmsgRXZlbnRUaW1lcn0taW5zdGFuY2Ugd2l0aCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFuZCBnaXZlbiBhcmd1bWVudHMuIFxyXG4gICAqIFRoZSBmcmVxdWVuY3kgc2NhbGVzIHdpdGggdGhlIHtAbGluayBUaW1lfS1pbnN0YW5jZSB0aGUge0BsaW5rIFRpbWVyfS1pbnN0YW5jZSBpcyBhdHRhY2hlZCB0by5cclxuICAgKiBcclxuICAgKiBAYXV0aG9yIEppcmthIERlbGwnT3JvLUZyaWVkbCwgSEZVLCAyMDE5XHJcbiAgICovXHJcbiAgZXhwb3J0IGNsYXNzIFRpbWVyIHtcclxuICAgIHB1YmxpYyBhY3RpdmU6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgY291bnQ6IG51bWJlcjtcclxuICAgIHByaXZhdGUgaGFuZGxlcjogVGltZXJIYW5kbGVyO1xyXG4gICAgcHJpdmF0ZSB0aW1lOiBUaW1lO1xyXG4gICAgcHJpdmF0ZSBlbGFwc2U6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZXZlbnQ6IEV2ZW50VGltZXI7XHJcbiAgICBwcml2YXRlIHRpbWVvdXRSZWFsOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGlkV2luZG93OiBudW1iZXI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEge0BsaW5rIFRpbWVyfSBpbnN0YW5jZS5cclxuICAgICAqIEBwYXJhbSBfdGltZSBUaGUge0BsaW5rIFRpbWV9IGluc3RhbmNlLCB0aGUgdGltZXIgYXR0YWNoZXMgdG9cclxuICAgICAqIEBwYXJhbSBfZWxhcHNlIFRoZSB0aW1lIGluIG1pbGxpc2Vjb25kcyB0byBlbGFwc2UsIHRvIHRoZSBuZXh0IGNhbGwgb2YgX2hhbmRsZXIsIG1lYXN1cmVkIGluIF90aW1lXHJcbiAgICAgKiBAcGFyYW0gX2NvdW50IFRoZSBkZXNpcmVkIG51bWJlciBvZiBjYWxscyB0byBfaGFuZGxlciwgVGltZXIgZGVpbnN0YWxscyBhdXRvbWF0aWNhbGx5IGFmdGVyIGxhc3QgY2FsbC4gUGFzc2luZyAwIGludm9rZXMgaW5maW5pdGUgY2FsbHNcclxuICAgICAqIEBwYXJhbSBfaGFuZGxlciBUaGUge0BsaW5rIFRpbWVySGFuZGxlcn0gaW5zdGFuY2UgdG8gY2FsbFxyXG4gICAgICogQHBhcmFtIF9hcmd1bWVudHMgQWRkaXRpb25hbCBhcmd1bWVudHMgdG8gcGFzcyB0byBfaGFuZGxlclxyXG4gICAgICogXHJcbiAgICAgKiBUT0RPOiBmb3IgcHJvcGVyIGhhbmRsaW5nIGFuZCBkZWxldGlvbiwgdXNlIFRpbWUuc2V0VGltZXIgaW5zdGVhZCBvZiBpbnN0YW50aWF0aW5nIHRpbWVycyB5b3Vyc2VsZi5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoX3RpbWU6IFRpbWUsIF9lbGFwc2U6IG51bWJlciwgX2NvdW50OiBudW1iZXIsIF9oYW5kbGVyOiBUaW1lckhhbmRsZXIsIC4uLl9hcmd1bWVudHM6IE9iamVjdFtdKSB7XHJcbiAgICAgIHRoaXMudGltZSA9IF90aW1lO1xyXG4gICAgICB0aGlzLmVsYXBzZSA9IF9lbGFwc2U7XHJcbiAgICAgIHRoaXMuZXZlbnQgPSBuZXcgRXZlbnRUaW1lcih0aGlzLCBfYXJndW1lbnRzKTtcclxuICAgICAgdGhpcy5oYW5kbGVyID0gX2hhbmRsZXI7XHJcbiAgICAgIHRoaXMuY291bnQgPSBfY291bnQ7XHJcblxyXG4gICAgICBsZXQgc2NhbGU6IG51bWJlciA9IE1hdGguYWJzKF90aW1lLmdldFNjYWxlKCkpO1xyXG5cclxuICAgICAgaWYgKCFzY2FsZSkge1xyXG4gICAgICAgIC8vIFRpbWUgaXMgc3RvcHBlZCwgdGltZXIgd29uJ3QgYmUgYWN0aXZlXHJcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMudGltZW91dFJlYWwgPSB0aGlzLmVsYXBzZSAvIHNjYWxlO1xyXG5cclxuICAgICAgbGV0IGNhbGxiYWNrOiBGdW5jdGlvbiA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlKVxyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgdGhpcy5ldmVudC5jb3VudCA9IHRoaXMuY291bnQ7XHJcbiAgICAgICAgdGhpcy5ldmVudC5sYXN0Q2FsbCA9ICh0aGlzLmNvdW50ID09IDEpO1xyXG4gICAgICAgIF9oYW5kbGVyKHRoaXMuZXZlbnQpO1xyXG4gICAgICAgIHRoaXMuZXZlbnQuZmlyc3RDYWxsID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvdW50ID4gMClcclxuICAgICAgICAgIGlmICgtLXRoaXMuY291bnQgPT0gMClcclxuICAgICAgICAgICAgX3RpbWUuZGVsZXRlVGltZXJCeUl0c0ludGVybmFsSWQodGhpcy5pZFdpbmRvdyk7XHJcblxyXG4gICAgICB9O1xyXG5cclxuICAgICAgdGhpcy5pZFdpbmRvdyA9IHdpbmRvdy5zZXRJbnRlcnZhbChjYWxsYmFjaywgdGhpcy50aW1lb3V0UmVhbCwgX2FyZ3VtZW50cyk7XHJcbiAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgX3RpbWUuYWRkVGltZXIodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSB3aW5kb3ctaWQgb2YgdGhlIHRpbWVyLCB3aGljaCB3YXMgcmV0dXJuZWQgYnkgc2V0SW50ZXJ2YWxcclxuICAgICAqL1xyXG4gICAgcHVibGljIGdldCBpZCgpOiBudW1iZXIge1xyXG4gICAgICByZXR1cm4gdGhpcy5pZFdpbmRvdztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIHRpbWUtaW50ZXJ2YWxsIGZvciBjYWxscyB0byB0aGUgaGFuZGxlclxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0IGxhcHNlKCk6IG51bWJlciB7XHJcbiAgICAgIHJldHVybiB0aGlzLmVsYXBzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEF0dGFjaGVzIGEgY29weSBvZiB0aGlzIGF0IGl0cyBjdXJyZW50IHN0YXRlIHRvIHRoZSBzYW1lIHtAbGluayBUaW1lfS1pbnN0YW5jZS4gVXNlZCBpbnRlcm5hbGx5IHdoZW4gcmVzY2FsaW5nIHtAbGluayBUaW1lfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaW5zdGFsbENvcHkoKTogVGltZXIge1xyXG4gICAgICByZXR1cm4gbmV3IFRpbWVyKHRoaXMudGltZSwgdGhpcy5lbGFwc2UsIHRoaXMuY291bnQsIHRoaXMuaGFuZGxlciwgdGhpcy5ldmVudC5hcmd1bWVudHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSB0aW1lciwgcmVtb3ZpbmcgaXQgZnJvbSB0aGUgaW50ZXJ2YWwtdGltZXJzIGhhbmRsZWQgYnkgd2luZG93XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcclxuICAgICAgLy8gaWYgKHRoaXMudHlwZSA9PSBUSU1FUl9UWVBFLlRJTUVPVVQpIHtcclxuICAgICAgLy8gICAgIGlmICh0aGlzLmFjdGl2ZSlcclxuICAgICAgLy8gICAgICAgICAvLyBzYXZlIHJlbWFpbmluZyB0aW1lIHRvIHRpbWVvdXQgYXMgbmV3IHRpbWVvdXQgZm9yIHJlc3RhcnRcclxuICAgICAgLy8gICAgICAgICB0aGlzLnRpbWVvdXQgPSB0aGlzLnRpbWVvdXQgKiAoMSAtIChwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lUmVhbCkgLyB0aGlzLnRpbWVvdXRSZWFsKTtcclxuICAgICAgLy8gICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5pZCk7XHJcbiAgICAgIC8vIH1cclxuICAgICAgLy8gZWxzZVxyXG4gICAgICAvLyBUT0RPOiByZXVzaW5nIHRpbWVyIHN0YXJ0cyBpbnRlcnZhbCBhbmV3LiBTaG91bGQgYmUgcmVtYWluaW5nIGludGVydmFsIGFzIHRpbWVvdXQsIHRoZW4gc3RhcnRpbmcgaW50ZXJ2YWwgYW5ldyBcclxuICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5pZFdpbmRvdyk7XHJcbiAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG59Il19