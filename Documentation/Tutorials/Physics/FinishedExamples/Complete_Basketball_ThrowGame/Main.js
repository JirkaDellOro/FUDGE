"use strict";
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
var Tutorials_FUDGEPhysics_Lesson1;
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
(function (Tutorials_FUDGEPhysics_Lesson1) {
    var f = FudgeCore;
    //GOAL: Learning to use the physical raycast to interact with objects. Different method than the standard Fudge Depth Texture Raycast
    //Fudge Basic Variables
    window.addEventListener("load", init);
    const app = document.querySelector("canvas"); // The html element where the scene is drawn to
    let goalCounter = document.getElementById("pointsCounter");
    let viewPort; // The scene visualization
    let hierarchy; // You're object scene tree
    let cmpCamera; //The camera in the scene to shot the ray from
    //Physical Objects
    let bodies = new Array(); // Array of all physical objects in the scene to have a quick reference
    let ball = null; //The Ball we are playing with
    //Setting Variables
    //Miscellaneous Variables
    let ballStart = new f.Vector3(0, 1.5, 3);
    let startPosition;
    let endPosition;
    let playerForce = 5000;
    let points = 0;
    let lastSpeed = 0;
    //Materials
    let boardDefault = new f.Material("Board", f.ShaderFlat, new f.CoatRemissive(new f.Color(0.85, 0.95, 0.85, 1)));
    let boardGoal = new f.Material("BoardGoal", f.ShaderFlat, new f.CoatRemissive(new f.Color(0.2, 0.95, 0.2, 1)));
    let groundMaterial = new f.Material("Ground", f.ShaderFlat, new f.CoatRemissive(new f.Color(0.2, 0.2, 0.2, 1)));
    //Function to initialize the Fudge Scene with a camera, light, viewport and PHYSCIAL Objects
    function init(_event) {
        hierarchy = new f.Node("Scene"); //create the root Node where every object is parented to. Should never be changed
        //#region Physics
        //PHYSICS - Basic Plane and Cube
        //Creating a physically static ground plane for our physics playground. A simple scaled cube but with physics type set to static
        bodies[0] = createCompleteNode("Ground", groundMaterial, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[0].mtxLocal.scale(new f.Vector3(14, 0.3, 14)); //Scale the body with it's standard ComponentTransform
        bodies[0].getComponent(f.ComponentRigidbody).restitution = 0.5;
        hierarchy.appendChild(bodies[0]); //Add the node to the scene by adding it to the scene-root
        //Backwalls - So cubes are not pushed away easily
        bodies[1] = createCompleteNode("WallBack", groundMaterial, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[1].mtxLocal.translate(new f.Vector3(0, -7, -7.5));
        bodies[1].mtxLocal.scale(new f.Vector3(14, 0.3, 15));
        bodies[1].mtxLocal.rotateX(90, true);
        hierarchy.appendChild(bodies[1]);
        bodies[2] = createCompleteNode("WallLeft", groundMaterial, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[2].mtxLocal.translate(new f.Vector3(7.5, 7, 0));
        bodies[2].mtxLocal.scale(new f.Vector3(15, 0.3, 14));
        bodies[2].mtxLocal.rotateZ(90, true);
        hierarchy.appendChild(bodies[2]);
        bodies[3] = createCompleteNode("WallRight", groundMaterial, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[3].mtxLocal.translate(new f.Vector3(-7.5, 7, 0));
        bodies[3].mtxLocal.scale(new f.Vector3(15, 0.3, 14));
        bodies[3].mtxLocal.rotateZ(-90, true);
        hierarchy.appendChild(bodies[3]);
        //Ball
        bodies[4] = createCompleteNode("Basketball", new f.Material("Basketball", f.ShaderFlat, new f.CoatRemissive(new f.Color(181 / 255, 66 / 255, 19 / 255))), new f.MeshSphere(), 0.65, f.BODY_TYPE.KINEMATIC, f.COLLISION_GROUP.DEFAULT, f.COLLIDER_TYPE.SPHERE);
        bodies[4].mtxLocal.translate(ballStart);
        bodies[4].mtxLocal.scale(new f.Vector3(0.26, 0.26, 0.26)); //26cm diameter basketball
        hierarchy.appendChild(bodies[4]);
        ball = bodies[4].getComponent(f.ComponentRigidbody);
        ball.restitution = 0.95;
        createCourt(5, new f.Vector3(0, 3.05, -6));
        createShootableDecoration(12, new f.Vector3(3, 0.5, -3));
        createShootableDecoration(14, new f.Vector3(-3, 0.5, -2));
        createShootableDecoration(16, new f.Vector3(-2, 4, -4), -1);
        //Add Events to our trigger and colliders
        bodies[11].getComponent(f.ComponentRigidbody).addEventListener("TriggerEnteredCollision" /* TRIGGER_ENTER */, goalCheckEnter);
        bodies[11].getComponent(f.ComponentRigidbody).addEventListener("TriggerLeftCollision" /* TRIGGER_EXIT */, goalCheckExit);
        bodies[0].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, groundColEnter);
        bodies[13].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, targetColEnter);
        bodies[15].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, targetColEnter);
        bodies[17].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, targetColEnter);
        //#endregion
        //f.Physics.world.setSolverIterations(15);
        //Standard Fudge Scene Initialization - Creating a directional light, a camera and initialize the viewport
        let cmpLight = new f.ComponentLight(new f.LightDirectional(f.Color.CSS("WHITE")));
        cmpLight.mtxPivot.lookAt(new f.Vector3(-0.5, -1, -0.8)); //Set light direction
        hierarchy.addComponent(cmpLight);
        cmpCamera = new f.ComponentCamera();
        cmpCamera.clrBackground = f.Color.CSS("GREY");
        cmpCamera.mtxPivot.translate(new f.Vector3(0, 1.5, 6)); //Centered Camera a little bit backwards
        cmpCamera.mtxPivot.lookAt(new f.Vector3(0, 2, 0)); //Set the camera matrix so that it looks at the basket
        viewPort = new f.Viewport(); //Creating a viewport that is rendered onto the html canvas element
        viewPort.initialize("Viewport", hierarchy, cmpCamera, app); //initialize the viewport with the root node, camera and canvas
        //Activating input events - Important for this lesson
        viewPort.activatePointerEvent("\u0192pointerdown" /* DOWN */, true); //Tell Fudge to use it's internal mouse event 
        viewPort.addEventListener("\u0192pointerdown" /* DOWN */, hndMouseDown); //Set what function should receive the event
        viewPort.activatePointerEvent("\u0192pointerup" /* UP */, true);
        viewPort.addEventListener("\u0192pointerup" /* UP */, hndMouseUp);
        //Physics Events
        //PHYSICS - Start using physics by telling the physics the scene root object. Physics will recalculate every transform and initialize
        f.Physics.adjustTransforms(hierarchy);
        //f.Physics.settings.debugDraw = true; //Seeing the physical scene in debug mode - Lesson Debugging
        //Important start the game loop after starting physics, so physics can use the current transform before it's first iteration
        f.Loop.addEventListener("loopFrame" /* LOOP_FRAME */, update); //Tell the game loop to call the update function on each frame
        f.Loop.start(); //Stard the game loop
    }
    //Function to animate/update the Fudge scene, commonly known as gameloop
    function update() {
        f.Physics.simulate(); //PHYSICS - Simulate physical changes each frame, parameter to set time between frames
        raycastSpeedTest();
        viewPort.draw(); // Draw the current Fudge Scene to the canvas
    }
    // Function to quickly create a node with multiple needed FudgeComponents, including a physics component
    function createCompleteNode(_name, _material, _mesh, _mass, _physicsType, _group = f.COLLISION_GROUP.DEFAULT, _colType = f.COLLIDER_TYPE.CUBE) {
        //Standard Fudge Node Creation
        let node = new f.Node(_name); //Creating the node
        let cmpMesh = new f.ComponentMesh(_mesh); //Creating a mesh for the node
        let cmpMaterial = new f.ComponentMaterial(_material); //Creating a material for the node
        let cmpTransform = new f.ComponentTransform(); //Transform holding position/rotation/scaling of the node
        let cmpRigidbody = new f.ComponentRigidbody(_mass, _physicsType, _colType, _group); //Adding a physical body component to use physics
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        node.addComponent(cmpRigidbody); // <-- best practice to add physics component last
        return node;
    }
    //Creating a node without any physics
    function createStandardFudgeNode(_name, _material, _mesh) {
        let node = new f.Node(_name); //Creating the node
        let cmpMesh = new f.ComponentMesh(_mesh); //Creating a mesh for the node
        let cmpMaterial = new f.ComponentMaterial(_material); //Creating a material for the node
        let cmpTransform = new f.ComponentTransform(); //Transform holding position/rotation/scaling of the node
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        return node;
    }
    //What happens when the left mouse button is pressed
    function hndMouseDown(_event) {
        resetBall();
        startPosition = viewPort.pointClientToProjection(new f.Vector2(_event.pointerX, _event.pointerY));
    }
    //What happens when the left mouse button is released
    function hndMouseUp(_event) {
        endPosition = viewPort.pointClientToProjection(new f.Vector2(_event.pointerX, _event.pointerY));
        let xDirection = startPosition.x - endPosition.x;
        let forwardUpStrength = startPosition.y - endPosition.y;
        let differenceVector = f.Vector2.DIFFERENCE(startPosition, endPosition);
        let power = differenceVector.magnitude * playerForce;
        throwBall(xDirection, forwardUpStrength, power);
    }
    function throwBall(_xDirection, _forwardUpStrength, _power) {
        ball.typeBody = f.BODY_TYPE.DYNAMIC; //make ball listening to physics again
        ball.applyForce(new f.Vector3(-_xDirection * _power * 0.8, _power * -_forwardUpStrength * 0.8, _forwardUpStrength * _power)); //throw the ball with forces
        ball.applyTorque(new f.Vector3(-0.0005 * _power, 0, 0)); //Just add a tad bit of rotational force to make it visually more realistic
    }
    function resetBall() {
        //ball.setPosition(ballStart); <-- Position can't be set by physics since you make the ball kinematic in the same frame
        ball.node.mtxLocal.translation = ballStart; // Kinematic objects need to be set through normal transform
        ball.node.mtxLocal.rotation = f.Vector3.ZERO();
        ball.setVelocity(new f.Vector3(0, 0, 0));
        ball.setAngularVelocity(new f.Vector3(0, 0, 0));
        ball.typeBody = f.BODY_TYPE.KINEMATIC;
    }
    //Creating a basket and a board with some decoration - 7 new bodies
    function createCourt(_bodyStartNo, _position) {
        let materialBasket = new f.Material("Basket", f.ShaderFlat, new f.CoatRemissive(new f.Color(0.9, 0.2, 0.2, 1)));
        let basketPosition = _position;
        //Basket - Square - Not completly real values of course since it's no circle
        bodies[_bodyStartNo] = createCompleteNode("BasketBack", materialBasket, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[_bodyStartNo].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y, basketPosition.z));
        bodies[_bodyStartNo].mtxLocal.scale(new f.Vector3(0.6, 0.05, 0.15));
        hierarchy.appendChild(bodies[_bodyStartNo]);
        bodies[_bodyStartNo + 1] = createCompleteNode("BasketSide", materialBasket, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[_bodyStartNo + 1].mtxLocal.translate(new f.Vector3(basketPosition.x + 0.3, basketPosition.y, basketPosition.z - 0.3));
        bodies[_bodyStartNo + 1].mtxLocal.scale(new f.Vector3(0.15, 0.05, 0.6));
        hierarchy.appendChild(bodies[_bodyStartNo + 1]);
        bodies[_bodyStartNo + 2] = createCompleteNode("BasketSide", materialBasket, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[_bodyStartNo + 2].mtxLocal.translate(new f.Vector3(basketPosition.x - 0.3, basketPosition.y, basketPosition.z - 0.3));
        bodies[_bodyStartNo + 2].mtxLocal.scale(new f.Vector3(0.15, 0.05, 0.6));
        hierarchy.appendChild(bodies[_bodyStartNo + 2]);
        bodies[_bodyStartNo + 3] = createCompleteNode("BasketFront", materialBasket, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[_bodyStartNo + 3].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y, basketPosition.z - 0.6));
        bodies[_bodyStartNo + 3].mtxLocal.scale(new f.Vector3(0.6, 0.05, 0.15));
        hierarchy.appendChild(bodies[_bodyStartNo + 3]);
        bodies[_bodyStartNo + 4] = createCompleteNode("BasketHolder", materialBasket, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[_bodyStartNo + 4].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y - 0.01, basketPosition.z - 0.775));
        bodies[_bodyStartNo + 4].mtxLocal.scale(new f.Vector3(0.15, 0.05, 0.6));
        hierarchy.appendChild(bodies[_bodyStartNo + 4]);
        bodies[_bodyStartNo + 5] = createCompleteNode("WhiteBoard", boardDefault, new f.MeshCube(), 0, f.BODY_TYPE.STATIC);
        bodies[_bodyStartNo + 5].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y + 0.45, basketPosition.z - 0.775)); //Board 17.5 cm from basket
        bodies[_bodyStartNo + 5].mtxLocal.scale(new f.Vector3(1.80, 1.05, 0.15));
        hierarchy.appendChild(bodies[_bodyStartNo + 5]);
        //Board black decoration
        let node; //we do not add them to bodies they will only be decorative and therefore normal Fudge nodes
        let decorationMaterial = new f.Material("BoardDeco", f.ShaderFlat, new f.CoatRemissive(new f.Color(0.1, 0.1, 0.1, 1)));
        node = createStandardFudgeNode("BlackUpperStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y + 0.5, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.59, 0.05, 0.05));
        hierarchy.appendChild(node);
        node = createStandardFudgeNode("BlackLowerStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y + 0.05, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.59, 0.05, 0.05));
        hierarchy.appendChild(node);
        node = createStandardFudgeNode("BlackLeftStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x - 0.27, basketPosition.y + 0.25, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.05, 0.45, 0.05));
        hierarchy.appendChild(node);
        node = createStandardFudgeNode("BlackRightStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x + 0.27, basketPosition.y + 0.25, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.05, 0.45, 0.05));
        hierarchy.appendChild(node);
        //GoalTrigger - Slightly positioned under the basket entry so it only counts when it goes through and very small
        bodies[_bodyStartNo + 6] = createCompleteNode("GoalTrigger", materialBasket, new f.MeshCube(), 0, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.DEFAULT);
        bodies[_bodyStartNo + 6].removeComponent(bodies[_bodyStartNo + 6].getComponent(f.ComponentMesh)); //Trigger does not need to be visible so remove the mesh component
        bodies[_bodyStartNo + 6].getComponent(f.ComponentRigidbody).isTrigger = true;
        bodies[_bodyStartNo + 6].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y - 0.05, basketPosition.z - 0.3));
        bodies[_bodyStartNo + 6].mtxLocal.scale(new f.Vector3(0.1, 0.05, 0.1));
        hierarchy.appendChild(bodies[_bodyStartNo + 6]);
    }
    //Some Bodies on Joints that move when hit by the ball, just for visuals and fun - Lesson Joints
    function createShootableDecoration(_bodyStartNo, _position, _height = 1) {
        let stickMaterial = new f.Material("JointStick", f.ShaderFlat, new f.CoatRemissive(new f.Color(0, 0.15, 1, 0.7)));
        //Spherical Joint
        bodies[_bodyStartNo] = createCompleteNode("Socket", groundMaterial, new f.MeshCube(), 1, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.GROUP_1);
        hierarchy.appendChild(bodies[_bodyStartNo]);
        bodies[_bodyStartNo].mtxLocal.translate(new f.Vector3(_position.x, _position.y, _position.z));
        bodies[_bodyStartNo].mtxLocal.scale(new f.Vector3(0.5, 0.5, 0.5));
        bodies[_bodyStartNo + 1] = createCompleteNode("BallJoint", stickMaterial, new f.MeshCube(), 0.5, f.BODY_TYPE.DYNAMIC, f.COLLISION_GROUP.GROUP_1);
        hierarchy.appendChild(bodies[_bodyStartNo + 1]);
        bodies[_bodyStartNo + 1].mtxLocal.translate(new f.Vector3(_position.x, _position.y + _height, _position.z));
        bodies[_bodyStartNo + 1].mtxLocal.scale(new f.Vector3(0.3, 1.5, 0.3));
        let hingeJoint = new f.JointRevolute(bodies[_bodyStartNo].getComponent(f.ComponentRigidbody), bodies[_bodyStartNo + 1].getComponent(f.ComponentRigidbody), new f.Vector3(1, 0, 0));
        bodies[_bodyStartNo].addComponent(hingeJoint);
        hingeJoint.springDamping = 0.9;
    }
    //Spawn a object that is signaling a fresh bounce on the ground - Lesson Collision Events - Impulses
    function spawnDecoObjectOnSpot(_position, _impulseStrength = 0) {
        let _node = createStandardFudgeNode("Deko", boardDefault, new f.MeshCube());
        _node.mtxLocal.translate(_position);
        _node.mtxLocal.scale(new f.Vector3(0.1, _impulseStrength / 10, 0.1));
        hierarchy.addChild(_node);
        window.setTimeout(despawnDecoObject, 1000, _node);
    }
    //Remove the child against after a while (not performant, should use object pooling but that is not part of the lesson)
    function despawnDecoObject(_node) {
        hierarchy.removeChild(_node);
    }
    //Simple Raycast that is checking the speed of the passing ball on the basketring - Lesson Raycast
    function raycastSpeedTest() {
        let origin = new f.Vector3(0, 3.15, -6.775);
        let rayHit = f.Physics.raycast(origin, new f.Vector3(0, 0, 1), 1.5);
        if (rayHit.hit && rayHit.rigidbodyComponent.node.name == "Basketball") {
            lastSpeed = ball.getVelocity().magnitude;
            goalCounter.textContent = "Points: " + points.toString() + " / Speed: " + lastSpeed.toFixed(2);
        }
    }
    //#region Event Handling
    //Register a triggering event - Lesson Trigger Events
    function goalCheckEnter(_event) {
        if (_event.cmpRigidbody.node.name == "Basketball") {
            bodies[10].getComponent(f.ComponentMaterial).material = boardGoal;
            points += 100;
            goalCounter.textContent = "Points: " + points.toString() + " / Speed: " + lastSpeed.toFixed(2);
        }
    }
    function goalCheckExit(_event) {
        if (_event.cmpRigidbody.node.name == "Basketball") {
            bodies[10].getComponent(f.ComponentMaterial).material = boardDefault;
        }
    }
    //Register a collision of a body with the ground - Lesson Collision Events
    function groundColEnter(_event) {
        if (_event.cmpRigidbody.node.name == "Basketball") {
            spawnDecoObjectOnSpot(_event.collisionPoint, _event.normalImpulse);
        }
    }
    function targetColEnter(_event) {
        if (_event.cmpRigidbody.node.name == "Basketball") {
            points += 50;
            goalCounter.textContent = "Points: " + points.toString() + " / Speed: " + lastSpeed.toFixed(2);
        }
    }
    //#endregion
})(Tutorials_FUDGEPhysics_Lesson1 || (Tutorials_FUDGEPhysics_Lesson1 = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDhHQUE4RztBQUU5RyxJQUFVLDhCQUE4QixDQW1VdkM7QUFyVUQsOEdBQThHO0FBRTlHLFdBQVUsOEJBQThCO0lBQ3BDLElBQU8sQ0FBQyxHQUFHLFNBQVMsQ0FBQztJQUVyQixxSUFBcUk7SUFFckksdUJBQXVCO0lBQ3ZCLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdEMsTUFBTSxHQUFHLEdBQXNCLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQywrQ0FBK0M7SUFDaEgsSUFBSSxXQUFXLEdBQWdCLFFBQVEsQ0FBQyxjQUFjLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDeEUsSUFBSSxRQUFvQixDQUFDLENBQUMsMEJBQTBCO0lBQ3BELElBQUksU0FBaUIsQ0FBQyxDQUFDLDJCQUEyQjtJQUNsRCxJQUFJLFNBQTRCLENBQUMsQ0FBQyw4Q0FBOEM7SUFHaEYsa0JBQWtCO0lBQ2xCLElBQUksTUFBTSxHQUFhLElBQUksS0FBSyxFQUFFLENBQUMsQ0FBQyx1RUFBdUU7SUFDM0csSUFBSSxJQUFJLEdBQXlCLElBQUksQ0FBQyxDQUFDLDhCQUE4QjtJQUdyRSxtQkFBbUI7SUFHbkIseUJBQXlCO0lBQ3pCLElBQUksU0FBUyxHQUFjLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3BELElBQUksYUFBd0IsQ0FBQztJQUM3QixJQUFJLFdBQXNCLENBQUM7SUFDM0IsSUFBSSxXQUFXLEdBQVcsSUFBSSxDQUFDO0lBQy9CLElBQUksTUFBTSxHQUFXLENBQUMsQ0FBQztJQUN2QixJQUFJLFNBQVMsR0FBVyxDQUFDLENBQUM7SUFFMUIsV0FBVztJQUNYLElBQUksWUFBWSxHQUFlLElBQUksQ0FBQyxDQUFDLFFB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V0FBVyxHQUFHLFVBQVUsR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLEdBQUcsWUFBWSxHQUFHLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbEc7SUFDTCxDQUFDO0lBQ0QsWUFBWTtBQUVoQixDQUFDLEVBblVTLDhCQUE4QixLQUE5Qiw4QkFBOEIsUUFtVXZDIiwic291cmNlc0NvbnRlbnQiOlsiLy9SZWZlcmVuY2UgRnVkZ2UsIGdldHRpbmcgY29kZSBjb21wbGV0aW9uIHJlYWR5IGFuZCBjcmVhdGluZyBhIHNob3J0Y3V0IGYgdG8gd3JpdGUgRnVkZ2VDb2RlIG1vcmUgY29tZm9ydGFibHlcclxuXHJcbm5hbWVzcGFjZSBUdXRvcmlhbHNfRlVER0VQaHlzaWNzX0xlc3NvbjEge1xyXG4gICAgaW1wb3J0IGYgPSBGdWRnZUNvcmU7XHJcblxyXG4gICAgLy9HT0FMOiBMZWFybmluZyB0byB1c2UgdGhlIHBoeXNpY2FsIHJheWNhc3QgdG8gaW50ZXJhY3Qgd2l0aCBvYmplY3RzLiBEaWZmZXJlbnQgbWV0aG9kIHRoYW4gdGhlIHN0YW5kYXJkIEZ1ZGdlIERlcHRoIFRleHR1cmUgUmF5Y2FzdFxyXG5cclxuICAgIC8vRnVkZ2UgQmFzaWMgVmFyaWFibGVzXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaW5pdCk7XHJcbiAgICBjb25zdCBhcHA6IEhUTUxDYW52YXNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTsgLy8gVGhlIGh0bWwgZWxlbWVudCB3aGVyZSB0aGUgc2NlbmUgaXMgZHJhd24gdG9cclxuICAgIGxldCBnb2FsQ291bnRlcjogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvaW50c0NvdW50ZXJcIik7XHJcbiAgICBsZXQgdmlld1BvcnQ6IGYuVmlld3BvcnQ7IC8vIFRoZSBzY2VuZSB2aXN1YWxpemF0aW9uXHJcbiAgICBsZXQgaGllcmFyY2h5OiBmLk5vZGU7IC8vIFlvdSdyZSBvYmplY3Qgc2NlbmUgdHJlZVxyXG4gICAgbGV0IGNtcENhbWVyYTogZi5Db21wb25lbnRDYW1lcmE7IC8vVGhlIGNhbWVyYSBpbiB0aGUgc2NlbmUgdG8gc2hvdCB0aGUgcmF5IGZyb21cclxuXHJcblxyXG4gICAgLy9QaHlzaWNhbCBPYmplY3RzXHJcbiAgICBsZXQgYm9kaWVzOiBmLk5vZGVbXSA9IG5ldyBBcnJheSgpOyAvLyBBcnJheSBvZiBhbGwgcGh5c2ljYWwgb2JqZWN0cyBpbiB0aGUgc2NlbmUgdG8gaGF2ZSBhIHF1aWNrIHJlZmVyZW5jZVxyXG4gICAgbGV0IGJhbGw6IGYuQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbDsgLy9UaGUgQmFsbCB3ZSBhcmUgcGxheWluZyB3aXRoXHJcblxyXG5cclxuICAgIC8vU2V0dGluZyBWYXJpYWJsZXNcclxuXHJcblxyXG4gICAgLy9NaXNjZWxsYW5lb3VzIFZhcmlhYmxlc1xyXG4gICAgbGV0IGJhbGxTdGFydDogZi5WZWN0b3IzID0gbmV3IGYuVmVjdG9yMygwLCAxLjUsIDMpO1xyXG4gICAgbGV0IHN0YXJ0UG9zaXRpb246IGYuVmVjdG9yMjtcclxuICAgIGxldCBlbmRQb3NpdGlvbjogZi5WZWN0b3IyO1xyXG4gICAgbGV0IHBsYXllckZvcmNlOiBudW1iZXIgPSA1MDAwO1xyXG4gICAgbGV0IHBvaW50czogbnVtYmVyID0gMDtcclxuICAgIGxldCBsYXN0U3BlZWQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgLy9NYXRlcmlhbHNcclxuICAgIGxldCBib2FyZERlZmF1bHQ6IGYuTWF0ZXJpYWwgPSBuZXcgZi5NYXRlcmlhbChcIkJvYXJkXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdFJlbWlzc2l2ZShuZXcgZi5Db2xvcigwLjg1LCAwLjk1LCAwLjg1LCAxKSkpO1xyXG4gICAgbGV0IGJvYXJkR29hbDogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiQm9hcmRHb2FsXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdFJlbWlzc2l2ZShuZXcgZi5Db2xvcigwLjIsIDAuOTUsIDAuMiwgMSkpKTtcclxuICAgIGxldCBncm91bmRNYXRlcmlhbDogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiR3JvdW5kXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdFJlbWlzc2l2ZShuZXcgZi5Db2xvcigwLjIsIDAuMiwgMC4yLCAxKSkpO1xyXG5cclxuICAgIC8vRnVuY3Rpb24gdG8gaW5pdGlhbGl6ZSB0aGUgRnVkZ2UgU2NlbmUgd2l0aCBhIGNhbWVyYSwgbGlnaHQsIHZpZXdwb3J0IGFuZCBQSFlTQ0lBTCBPYmplY3RzXHJcbiAgICBmdW5jdGlvbiBpbml0KF9ldmVudDogRXZlbnQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgaGllcmFyY2h5ID0gbmV3IGYuTm9kZShcIlNjZW5lXCIpOyAvL2NyZWF0ZSB0aGUgcm9vdCBOb2RlIHdoZXJlIGV2ZXJ5IG9iamVjdCBpcyBwYXJlbnRlZCB0by4gU2hvdWxkIG5ldmVyIGJlIGNoYW5nZWRcclxuXHJcbiAgICAgICAgLy8jcmVnaW9uIFBoeXNpY3NcclxuICAgICAgICAvL1BIWVNJQ1MgLSBCYXNpYyBQbGFuZSBhbmQgQ3ViZVxyXG4gICAgICAgIC8vQ3JlYXRpbmcgYSBwaHlzaWNhbGx5IHN0YXRpYyBncm91bmQgcGxhbmUgZm9yIG91ciBwaHlzaWNzIHBsYXlncm91bmQuIEEgc2ltcGxlIHNjYWxlZCBjdWJlIGJ1dCB3aXRoIHBoeXNpY3MgdHlwZSBzZXQgdG8gc3RhdGljXHJcbiAgICAgICAgYm9kaWVzWzBdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiR3JvdW5kXCIsIGdyb3VuZE1hdGVyaWFsLCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLkJPRFlfVFlQRS5TVEFUSUMpO1xyXG4gICAgICAgIGJvZGllc1swXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDE0LCAwLjMsIDE0KSk7IC8vU2NhbGUgdGhlIGJvZHkgd2l0aCBpdCdzIHN0YW5kYXJkIENvbXBvbmVudFRyYW5zZm9ybVxyXG4gICAgICAgIGJvZGllc1swXS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpLnJlc3RpdHV0aW9uID0gMC41O1xyXG4gICAgICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMF0pOyAvL0FkZCB0aGUgbm9kZSB0byB0aGUgc2NlbmUgYnkgYWRkaW5nIGl0IHRvIHRoZSBzY2VuZS1yb290XHJcblxyXG4gICAgICAgIC8vQmFja3dhbGxzIC0gU28gY3ViZXMgYXJlIG5vdCBwdXNoZWQgYXdheSBlYXNpbHlcclxuICAgICAgICBib2RpZXNbMV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJXYWxsQmFja1wiLCBncm91bmRNYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5CT0RZX1RZUEUuU1RBVElDKTtcclxuICAgICAgICBib2RpZXNbMV0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoMCwgLTcsIC03LjUpKTtcclxuICAgICAgICBib2RpZXNbMV0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxNCwgMC4zLCAxNSkpO1xyXG4gICAgICAgIGJvZGllc1sxXS5tdHhMb2NhbC5yb3RhdGVYKDkwLCB0cnVlKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzFdKTtcclxuXHJcbiAgICAgICAgYm9kaWVzWzJdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiV2FsbExlZnRcIiwgZ3JvdW5kTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuQk9EWV9UWVBFLlNUQVRJQyk7XHJcbiAgICAgICAgYm9kaWVzWzJdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKDcuNSwgNywgMCkpO1xyXG4gICAgICAgIGJvZGllc1syXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDE1LCAwLjMsIDE0KSk7XHJcbiAgICAgICAgYm9kaWVzWzJdLm10eExvY2FsLnJvdGF0ZVooOTAsIHRydWUpO1xyXG4gICAgICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMl0pO1xyXG5cclxuICAgICAgICBib2RpZXNbM10gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJXYWxsUmlnaHRcIiwgZ3JvdW5kTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuQk9EWV9UWVBFLlNUQVRJQyk7XHJcbiAgICAgICAgYm9kaWVzWzNdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKC03LjUsIDcsIDApKTtcclxuICAgICAgICBib2RpZXNbM10ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxNSwgMC4zLCAxNCkpO1xyXG4gICAgICAgIGJvZGllc1szXS5tdHhMb2NhbC5yb3RhdGVaKC05MCwgdHJ1ZSk7XHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1szXSk7XHJcblxyXG4gICAgICAgIC8vQmFsbFxyXG4gICAgICAgIGJvZGllc1s0XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkJhc2tldGJhbGxcIiwgbmV3IGYuTWF0ZXJpYWwoXCJCYXNrZXRiYWxsXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdFJlbWlzc2l2ZShuZXcgZi5Db2xvcigxODEgLyAyNTUsIDY2IC8gMjU1LCAxOSAvIDI1NSkpKSwgbmV3IGYuTWVzaFNwaGVyZSgpLCAwLjY1LCBmLkJPRFlfVFlQRS5LSU5FTUFUSUMsIGYuQ09MTElTSU9OX0dST1VQLkRFRkFVTFQsIGYuQ09MTElERVJfVFlQRS5TUEhFUkUpO1xyXG4gICAgICAgIGJvZGllc1s0XS5tdHhMb2NhbC50cmFuc2xhdGUoYmFsbFN0YXJ0KTtcclxuICAgICAgICBib2RpZXNbNF0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjI2LCAwLjI2LCAwLjI2KSk7IC8vMjZjbSBkaWFtZXRlciBiYXNrZXRiYWxsXHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1s0XSk7XHJcbiAgICAgICAgYmFsbCA9IGJvZGllc1s0XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpO1xyXG4gICAgICAgIGJhbGwucmVzdGl0dXRpb24gPSAwLjk1O1xyXG5cclxuICAgICAgICBjcmVhdGVDb3VydCg1LCBuZXcgZi5WZWN0b3IzKDAsIDMuMDUsIC02KSk7XHJcblxyXG4gICAgICAgIGNyZWF0ZVNob290YWJsZURlY29yYXRpb24oMTIsIG5ldyBmLlZlY3RvcjMoMywgMC41LCAtMykpO1xyXG4gICAgICAgIGNyZWF0ZVNob290YWJsZURlY29yYXRpb24oMTQsIG5ldyBmLlZlY3RvcjMoLTMsIDAuNSwgLTIpKTtcclxuICAgICAgICBjcmVhdGVTaG9vdGFibGVEZWNvcmF0aW9uKDE2LCBuZXcgZi5WZWN0b3IzKC0yLCA0LCAtNCksIC0xKTtcclxuXHJcbiAgICAgICAgLy9BZGQgRXZlbnRzIHRvIG91ciB0cmlnZ2VyIGFuZCBjb2xsaWRlcnNcclxuICAgICAgICBib2RpZXNbMTFdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BIWVNJQ1MuVFJJR0dFUl9FTlRFUiwgZ29hbENoZWNrRW50ZXIpO1xyXG4gICAgICAgIGJvZGllc1sxMV0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlRfUEhZU0lDUy5UUklHR0VSX0VYSVQsIGdvYWxDaGVja0V4aXQpO1xyXG5cclxuICAgICAgICBib2RpZXNbMF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlRfUEhZU0lDUy5DT0xMSVNJT05fRU5URVIsIGdyb3VuZENvbEVudGVyKTtcclxuICAgICAgICBib2RpZXNbMTNdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BIWVNJQ1MuQ09MTElTSU9OX0VOVEVSLCB0YXJnZXRDb2xFbnRlcik7XHJcbiAgICAgICAgYm9kaWVzWzE1XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpLmFkZEV2ZW50TGlzdGVuZXIoZi5FVkVOVF9QSFlTSUNTLkNPTExJU0lPTl9FTlRFUiwgdGFyZ2V0Q29sRW50ZXIpO1xyXG4gICAgICAgIGJvZGllc1sxN10uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlRfUEhZU0lDUy5DT0xMSVNJT05fRU5URVIsIHRhcmdldENvbEVudGVyKTtcclxuICAgICAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICAgICAgLy9mLlBoeXNpY3Mud29ybGQuc2V0U29sdmVySXRlcmF0aW9ucygxNSk7XHJcblxyXG4gICAgICAgIC8vU3RhbmRhcmQgRnVkZ2UgU2NlbmUgSW5pdGlhbGl6YXRpb24gLSBDcmVhdGluZyBhIGRpcmVjdGlvbmFsIGxpZ2h0LCBhIGNhbWVyYSBhbmQgaW5pdGlhbGl6ZSB0aGUgdmlld3BvcnRcclxuICAgICAgICBsZXQgY21wTGlnaHQ6IGYuQ29tcG9uZW50TGlnaHQgPSBuZXcgZi5Db21wb25lbnRMaWdodChuZXcgZi5MaWdodERpcmVjdGlvbmFsKGYuQ29sb3IuQ1NTKFwiV0hJVEVcIikpKTtcclxuICAgICAgICBjbXBMaWdodC5tdHhQaXZvdC5sb29rQXQobmV3IGYuVmVjdG9yMygtMC41LCAtMSwgLTAuOCkpOyAvL1NldCBsaWdodCBkaXJlY3Rpb25cclxuICAgICAgICBoaWVyYXJjaHkuYWRkQ29tcG9uZW50KGNtcExpZ2h0KTtcclxuXHJcbiAgICAgICAgY21wQ2FtZXJhID0gbmV3IGYuQ29tcG9uZW50Q2FtZXJhKCk7XHJcbiAgICAgICAgY21wQ2FtZXJhLmNsckJhY2tncm91bmQgPSBmLkNvbG9yLkNTUyhcIkdSRVlcIik7XHJcbiAgICAgICAgY21wQ2FtZXJhLm10eFBpdm90LnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKDAsIDEuNSwgNikpOyAvL0NlbnRlcmVkIENhbWVyYSBhIGxpdHRsZSBiaXQgYmFja3dhcmRzXHJcbiAgICAgICAgY21wQ2FtZXJhLm10eFBpdm90Lmxvb2tBdChuZXcgZi5WZWN0b3IzKDAsIDIsIDApKTsgLy9TZXQgdGhlIGNhbWVyYSBtYXRyaXggc28gdGhhdCBpdCBsb29rcyBhdCB0aGUgYmFza2V0XHJcblxyXG4gICAgICAgIHZpZXdQb3J0ID0gbmV3IGYuVmlld3BvcnQoKTsgLy9DcmVhdGluZyBhIHZpZXdwb3J0IHRoYXQgaXMgcmVuZGVyZWQgb250byB0aGUgaHRtbCBjYW52YXMgZWxlbWVudFxyXG4gICAgICAgIHZpZXdQb3J0LmluaXRpYWxpemUoXCJWaWV3cG9ydFwiLCBoaWVyYXJjaHksIGNtcENhbWVyYSwgYXBwKTsgLy9pbml0aWFsaXplIHRoZSB2aWV3cG9ydCB3aXRoIHRoZSByb290IG5vZGUsIGNhbWVyYSBhbmQgY2FudmFzXHJcblxyXG4gICAgICAgIC8vQWN0aXZhdGluZyBpbnB1dCBldmVudHMgLSBJbXBvcnRhbnQgZm9yIHRoaXMgbGVzc29uXHJcbiAgICAgICAgdmlld1BvcnQuYWN0aXZhdGVQb2ludGVyRXZlbnQoZi5FVkVOVF9QT0lOVEVSLkRPV04sIHRydWUpOyAvL1RlbGwgRnVkZ2UgdG8gdXNlIGl0J3MgaW50ZXJuYWwgbW91c2UgZXZlbnQgXHJcbiAgICAgICAgdmlld1BvcnQuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BPSU5URVIuRE9XTiwgaG5kTW91c2VEb3duKTsgLy9TZXQgd2hhdCBmdW5jdGlvbiBzaG91bGQgcmVjZWl2ZSB0aGUgZXZlbnRcclxuICAgICAgICB2aWV3UG9ydC5hY3RpdmF0ZVBvaW50ZXJFdmVudChmLkVWRU5UX1BPSU5URVIuVVAsIHRydWUpO1xyXG4gICAgICAgIHZpZXdQb3J0LmFkZEV2ZW50TGlzdGVuZXIoZi5FVkVOVF9QT0lOVEVSLlVQLCBobmRNb3VzZVVwKTtcclxuXHJcbiAgICAgICAgLy9QaHlzaWNzIEV2ZW50c1xyXG5cclxuICAgICAgICAvL1BIWVNJQ1MgLSBTdGFydCB1c2luZyBwaHlzaWNzIGJ5IHRlbGxpbmcgdGhlIHBoeXNpY3MgdGhlIHNjZW5lIHJvb3Qgb2JqZWN0LiBQaHlzaWNzIHdpbGwgcmVjYWxjdWxhdGUgZXZlcnkgdHJhbnNmb3JtIGFuZCBpbml0aWFsaXplXHJcbiAgICAgICAgZi5QaHlzaWNzLmFkanVzdFRyYW5zZm9ybXMoaGllcmFyY2h5KTtcclxuXHJcbiAgICAgICAgLy9mLlBoeXNpY3Muc2V0dGluZ3MuZGVidWdEcmF3ID0gdHJ1ZTsgLy9TZWVpbmcgdGhlIHBoeXNpY2FsIHNjZW5lIGluIGRlYnVnIG1vZGUgLSBMZXNzb24gRGVidWdnaW5nXHJcblxyXG4gICAgICAgIC8vSW1wb3J0YW50IHN0YXJ0IHRoZSBnYW1lIGxvb3AgYWZ0ZXIgc3RhcnRpbmcgcGh5c2ljcywgc28gcGh5c2ljcyBjYW4gdXNlIHRoZSBjdXJyZW50IHRyYW5zZm9ybSBiZWZvcmUgaXQncyBmaXJzdCBpdGVyYXRpb25cclxuICAgICAgICBmLkxvb3AuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5ULkxPT1BfRlJBTUUsIHVwZGF0ZSk7IC8vVGVsbCB0aGUgZ2FtZSBsb29wIHRvIGNhbGwgdGhlIHVwZGF0ZSBmdW5jdGlvbiBvbiBlYWNoIGZyYW1lXHJcbiAgICAgICAgZi5Mb29wLnN0YXJ0KCk7IC8vU3RhcmQgdGhlIGdhbWUgbG9vcFxyXG4gICAgfVxyXG5cclxuICAgIC8vRnVuY3Rpb24gdG8gYW5pbWF0ZS91cGRhdGUgdGhlIEZ1ZGdlIHNjZW5lLCBjb21tb25seSBrbm93biBhcyBnYW1lbG9vcFxyXG4gICAgZnVuY3Rpb24gdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgIGYuUGh5c2ljcy5zaW11bGF0ZSgpOyAvL1BIWVNJQ1MgLSBTaW11bGF0ZSBwaHlzaWNhbCBjaGFuZ2VzIGVhY2ggZnJhbWUsIHBhcmFtZXRlciB0byBzZXQgdGltZSBiZXR3ZWVuIGZyYW1lc1xyXG4gICAgICAgIHJheWNhc3RTcGVlZFRlc3QoKTtcclxuICAgICAgICB2aWV3UG9ydC5kcmF3KCk7IC8vIERyYXcgdGhlIGN1cnJlbnQgRnVkZ2UgU2NlbmUgdG8gdGhlIGNhbnZhc1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uIHRvIHF1aWNrbHkgY3JlYXRlIGEgbm9kZSB3aXRoIG11bHRpcGxlIG5lZWRlZCBGdWRnZUNvbXBvbmVudHMsIGluY2x1ZGluZyBhIHBoeXNpY3MgY29tcG9uZW50XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVDb21wbGV0ZU5vZGUoX25hbWU6IHN0cmluZywgX21hdGVyaWFsOiBmLk1hdGVyaWFsLCBfbWVzaDogZi5NZXNoLCBfbWFzczogbnVtYmVyLCBfcGh5c2ljc1R5cGU6IGYuQk9EWV9UWVBFLCBfZ3JvdXA6IGYuQ09MTElTSU9OX0dST1VQID0gZi5DT0xMSVNJT05fR1JPVVAuREVGQVVMVCwgX2NvbFR5cGU6IGYuQ09MTElERVJfVFlQRSA9IGYuQ09MTElERVJfVFlQRS5DVUJFKTogZi5Ob2RlIHtcclxuICAgICAgICAvL1N0YW5kYXJkIEZ1ZGdlIE5vZGUgQ3JlYXRpb25cclxuICAgICAgICBsZXQgbm9kZTogZi5Ob2RlID0gbmV3IGYuTm9kZShfbmFtZSk7IC8vQ3JlYXRpbmcgdGhlIG5vZGVcclxuICAgICAgICBsZXQgY21wTWVzaDogZi5Db21wb25lbnRNZXNoID0gbmV3IGYuQ29tcG9uZW50TWVzaChfbWVzaCk7IC8vQ3JlYXRpbmcgYSBtZXNoIGZvciB0aGUgbm9kZVxyXG4gICAgICAgIGxldCBjbXBNYXRlcmlhbDogZi5Db21wb25lbnRNYXRlcmlhbCA9IG5ldyBmLkNvbXBvbmVudE1hdGVyaWFsKF9tYXRlcmlhbCk7IC8vQ3JlYXRpbmcgYSBtYXRlcmlhbCBmb3IgdGhlIG5vZGVcclxuICAgICAgICBsZXQgY21wVHJhbnNmb3JtOiBmLkNvbXBvbmVudFRyYW5zZm9ybSA9IG5ldyBmLkNvbXBvbmVudFRyYW5zZm9ybSgpOyAgLy9UcmFuc2Zvcm0gaG9sZGluZyBwb3NpdGlvbi9yb3RhdGlvbi9zY2FsaW5nIG9mIHRoZSBub2RlXHJcbiAgICAgICAgbGV0IGNtcFJpZ2lkYm9keTogZi5Db21wb25lbnRSaWdpZGJvZHkgPSBuZXcgZi5Db21wb25lbnRSaWdpZGJvZHkoX21hc3MsIF9waHlzaWNzVHlwZSwgX2NvbFR5cGUsIF9ncm91cCk7IC8vQWRkaW5nIGEgcGh5c2ljYWwgYm9keSBjb21wb25lbnQgdG8gdXNlIHBoeXNpY3NcclxuXHJcbiAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoY21wTWVzaCk7XHJcbiAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoY21wTWF0ZXJpYWwpO1xyXG4gICAgICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcFRyYW5zZm9ybSk7XHJcbiAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoY21wUmlnaWRib2R5KTsgLy8gPC0tIGJlc3QgcHJhY3RpY2UgdG8gYWRkIHBoeXNpY3MgY29tcG9uZW50IGxhc3RcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuXHJcbiAgICAvL0NyZWF0aW5nIGEgbm9kZSB3aXRob3V0IGFueSBwaHlzaWNzXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTdGFuZGFyZEZ1ZGdlTm9kZShfbmFtZTogc3RyaW5nLCBfbWF0ZXJpYWw6IGYuTWF0ZXJpYWwsIF9tZXNoOiBmLk1lc2gpOiBmLk5vZGUge1xyXG4gICAgICAgIGxldCBub2RlOiBmLk5vZGUgPSBuZXcgZi5Ob2RlKF9uYW1lKTsgLy9DcmVhdGluZyB0aGUgbm9kZVxyXG4gICAgICAgIGxldCBjbXBNZXNoOiBmLkNvbXBvbmVudE1lc2ggPSBuZXcgZi5Db21wb25lbnRNZXNoKF9tZXNoKTsgLy9DcmVhdGluZyBhIG1lc2ggZm9yIHRoZSBub2RlXHJcbiAgICAgICAgbGV0IGNtcE1hdGVyaWFsOiBmLkNvbXBvbmVudE1hdGVyaWFsID0gbmV3IGYuQ29tcG9uZW50TWF0ZXJpYWwoX21hdGVyaWFsKTsgLy9DcmVhdGluZyBhIG1hdGVyaWFsIGZvciB0aGUgbm9kZVxyXG4gICAgICAgIGxldCBjbXBUcmFuc2Zvcm06IGYuQ29tcG9uZW50VHJhbnNmb3JtID0gbmV3IGYuQ29tcG9uZW50VHJhbnNmb3JtKCk7ICAvL1RyYW5zZm9ybSBob2xkaW5nIHBvc2l0aW9uL3JvdGF0aW9uL3NjYWxpbmcgb2YgdGhlIG5vZGVcclxuICAgICAgICBub2RlLmFkZENvbXBvbmVudChjbXBNZXNoKTtcclxuICAgICAgICBub2RlLmFkZENvbXBvbmVudChjbXBNYXRlcmlhbCk7XHJcbiAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoY21wVHJhbnNmb3JtKTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuXHJcbiAgICAvL1doYXQgaGFwcGVucyB3aGVuIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkXHJcbiAgICBmdW5jdGlvbiBobmRNb3VzZURvd24oX2V2ZW50OiBmLkV2ZW50UG9pbnRlcikge1xyXG4gICAgICAgIHJlc2V0QmFsbCgpO1xyXG4gICAgICAgIHN0YXJ0UG9zaXRpb24gPSB2aWV3UG9ydC5wb2ludENsaWVudFRvUHJvamVjdGlvbihuZXcgZi5WZWN0b3IyKF9ldmVudC5wb2ludGVyWCwgX2V2ZW50LnBvaW50ZXJZKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9XaGF0IGhhcHBlbnMgd2hlbiB0aGUgbGVmdCBtb3VzZSBidXR0b24gaXMgcmVsZWFzZWRcclxuICAgIGZ1bmN0aW9uIGhuZE1vdXNlVXAoX2V2ZW50OiBmLkV2ZW50UG9pbnRlcikge1xyXG4gICAgICAgIGVuZFBvc2l0aW9uID0gdmlld1BvcnQucG9pbnRDbGllbnRUb1Byb2plY3Rpb24obmV3IGYuVmVjdG9yMihfZXZlbnQucG9pbnRlclgsIF9ldmVudC5wb2ludGVyWSkpO1xyXG4gICAgICAgIGxldCB4RGlyZWN0aW9uOiBudW1iZXIgPSBzdGFydFBvc2l0aW9uLnggLSBlbmRQb3NpdGlvbi54O1xyXG4gICAgICAgIGxldCBmb3J3YXJkVXBTdHJlbmd0aDogbnVtYmVyID0gc3RhcnRQb3NpdGlvbi55IC0gZW5kUG9zaXRpb24ueTtcclxuICAgICAgICBsZXQgZGlmZmVyZW5jZVZlY3RvcjogZi5WZWN0b3IyID0gZi5WZWN0b3IyLkRJRkZFUkVOQ0Uoc3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb24pO1xyXG4gICAgICAgIGxldCBwb3dlcjogbnVtYmVyID0gZGlmZmVyZW5jZVZlY3Rvci5tYWduaXR1ZGUgKiBwbGF5ZXJGb3JjZTtcclxuICAgICAgICB0aHJvd0JhbGwoeERpcmVjdGlvbiwgZm9yd2FyZFVwU3RyZW5ndGgsIHBvd2VyKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0aHJvd0JhbGwoX3hEaXJlY3Rpb246IG51bWJlciwgX2ZvcndhcmRVcFN0cmVuZ3RoOiBudW1iZXIsIF9wb3dlcjogbnVtYmVyKSB7XHJcbiAgICAgICAgYmFsbC50eXBlQm9keSA9IGYuQk9EWV9UWVBFLkRZTkFNSUM7IC8vbWFrZSBiYWxsIGxpc3RlbmluZyB0byBwaHlzaWNzIGFnYWluXHJcbiAgICAgICAgYmFsbC5hcHBseUZvcmNlKG5ldyBmLlZlY3RvcjMoLV94RGlyZWN0aW9uICogX3Bvd2VyICogMC44LCBfcG93ZXIgKiAtX2ZvcndhcmRVcFN0cmVuZ3RoICogMC44LCBfZm9yd2FyZFVwU3RyZW5ndGggKiBfcG93ZXIpKTsgLy90aHJvdyB0aGUgYmFsbCB3aXRoIGZvcmNlc1xyXG4gICAgICAgIGJhbGwuYXBwbHlUb3JxdWUobmV3IGYuVmVjdG9yMygtMC4wMDA1ICogX3Bvd2VyLCAwLCAwKSk7IC8vSnVzdCBhZGQgYSB0YWQgYml0IG9mIHJvdGF0aW9uYWwgZm9yY2UgdG8gbWFrZSBpdCB2aXN1YWxseSBtb3JlIHJlYWxpc3RpY1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlc2V0QmFsbCgpIHtcclxuICAgICAgICAvL2JhbGwuc2V0UG9zaXRpb24oYmFsbFN0YXJ0KTsgPC0tIFBvc2l0aW9uIGNhbid0IGJlIHNldCBieSBwaHlzaWNzIHNpbmNlIHlvdSBtYWtlIHRoZSBiYWxsIGtpbmVtYXRpYyBpbiB0aGUgc2FtZSBmcmFtZVxyXG4gICAgICAgIGJhbGwubm9kZS5tdHhMb2NhbC50cmFuc2xhdGlvbiA9IGJhbGxTdGFydDsgLy8gS2luZW1hdGljIG9iamVjdHMgbmVlZCB0byBiZSBzZXQgdGhyb3VnaCBub3JtYWwgdHJhbnNmb3JtXHJcbiAgICAgICAgYmFsbC5ub2RlLm10eExvY2FsLnJvdGF0aW9uID0gZi5WZWN0b3IzLlpFUk8oKTtcclxuICAgICAgICBiYWxsLnNldFZlbG9jaXR5KG5ldyBmLlZlY3RvcjMoMCwgMCwgMCkpO1xyXG4gICAgICAgIGJhbGwuc2V0QW5ndWxhclZlbG9jaXR5KG5ldyBmLlZlY3RvcjMoMCwgMCwgMCkpO1xyXG4gICAgICAgIGJhbGwudHlwZUJvZHkgPSBmLkJPRFlfVFlQRS5LSU5FTUFUSUM7XHJcbiAgICB9XHJcblxyXG4gICAgLy9DcmVhdGluZyBhIGJhc2tldCBhbmQgYSBib2FyZCB3aXRoIHNvbWUgZGVjb3JhdGlvbiAtIDcgbmV3IGJvZGllc1xyXG4gICAgZnVuY3Rpb24gY3JlYXRlQ291cnQoX2JvZHlTdGFydE5vOiBudW1iZXIsIF9wb3NpdGlvbjogZi5WZWN0b3IzKSB7XHJcbiAgICAgICAgbGV0IG1hdGVyaWFsQmFza2V0OiBmLk1hdGVyaWFsID0gbmV3IGYuTWF0ZXJpYWwoXCJCYXNrZXRcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0UmVtaXNzaXZlKG5ldyBmLkNvbG9yKDAuOSwgMC4yLCAwLjIsIDEpKSk7XHJcbiAgICAgICAgbGV0IGJhc2tldFBvc2l0aW9uOiBmLlZlY3RvcjMgPSBfcG9zaXRpb247XHJcbiAgICAgICAgLy9CYXNrZXQgLSBTcXVhcmUgLSBOb3QgY29tcGxldGx5IHJlYWwgdmFsdWVzIG9mIGNvdXJzZSBzaW5jZSBpdCdzIG5vIGNpcmNsZVxyXG4gICAgICAgIGJvZGllc1tfYm9keVN0YXJ0Tm9dID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQmFza2V0QmFja1wiLCBtYXRlcmlhbEJhc2tldCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5CT0RZX1RZUEUuU1RBVElDKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54LCBiYXNrZXRQb3NpdGlvbi55LCBiYXNrZXRQb3NpdGlvbi56KSk7XHJcbiAgICAgICAgYm9kaWVzW19ib2R5U3RhcnROb10ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjYsIDAuMDUsIDAuMTUpKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnROb10pO1xyXG4gICAgICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAxXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkJhc2tldFNpZGVcIiwgbWF0ZXJpYWxCYXNrZXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuQk9EWV9UWVBFLlNUQVRJQyk7XHJcbiAgICAgICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDFdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLnggKyAwLjMsIGJhc2tldFBvc2l0aW9uLnksIGJhc2tldFBvc2l0aW9uLnogLSAwLjMpKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMV0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjE1LCAwLjA1LCAwLjYpKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnRObyArIDFdKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMl0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJCYXNrZXRTaWRlXCIsIG1hdGVyaWFsQmFza2V0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLkJPRFlfVFlQRS5TVEFUSUMpO1xyXG4gICAgICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAyXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54IC0gMC4zLCBiYXNrZXRQb3NpdGlvbi55LCBiYXNrZXRQb3NpdGlvbi56IC0gMC4zKSk7XHJcbiAgICAgICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDJdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC4xNSwgMC4wNSwgMC42KSk7XHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAyXSk7XHJcbiAgICAgICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDNdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQmFza2V0RnJvbnRcIiwgbWF0ZXJpYWxCYXNrZXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuQk9EWV9UWVBFLlNUQVRJQyk7XHJcbiAgICAgICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDNdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLngsIGJhc2tldFBvc2l0aW9uLnksIGJhc2tldFBvc2l0aW9uLnogLSAwLjYpKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgM10ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjYsIDAuMDUsIDAuMTUpKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnRObyArIDNdKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNF0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJCYXNrZXRIb2xkZXJcIiwgbWF0ZXJpYWxCYXNrZXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuQk9EWV9UWVBFLlNUQVRJQyk7XHJcbiAgICAgICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDRdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLngsIGJhc2tldFBvc2l0aW9uLnkgLSAwLjAxLCBiYXNrZXRQb3NpdGlvbi56IC0gMC43NzUpKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNF0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjE1LCAwLjA1LCAwLjYpKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnRObyArIDRdKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJXaGl0ZUJvYXJkXCIsIGJvYXJkRGVmYXVsdCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5CT0RZX1RZUEUuU1RBVElDKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNV0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCwgYmFza2V0UG9zaXRpb24ueSArIDAuNDUsIGJhc2tldFBvc2l0aW9uLnogLSAwLjc3NSkpOyAvL0JvYXJkIDE3LjUgY20gZnJvbSBiYXNrZXRcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNV0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxLjgwLCAxLjA1LCAwLjE1KSk7XHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA1XSk7XHJcblxyXG4gICAgICAgIC8vQm9hcmQgYmxhY2sgZGVjb3JhdGlvblxyXG4gICAgICAgIGxldCBub2RlOiBmLk5vZGU7IC8vd2UgZG8gbm90IGFkZCB0aGVtIHRvIGJvZGllcyB0aGV5IHdpbGwgb25seSBiZSBkZWNvcmF0aXZlIGFuZCB0aGVyZWZvcmUgbm9ybWFsIEZ1ZGdlIG5vZGVzXHJcbiAgICAgICAgbGV0IGRlY29yYXRpb25NYXRlcmlhbDogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiQm9hcmREZWNvXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdFJlbWlzc2l2ZShuZXcgZi5Db2xvcigwLjEsIDAuMSwgMC4xLCAxKSkpO1xyXG4gICAgICAgIG5vZGUgPSBjcmVhdGVTdGFuZGFyZEZ1ZGdlTm9kZShcIkJsYWNrVXBwZXJTdHJpcGVcIiwgZGVjb3JhdGlvbk1hdGVyaWFsLCBuZXcgZi5NZXNoQ3ViZSgpKTtcclxuICAgICAgICBub2RlLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLngsIGJhc2tldFBvc2l0aW9uLnkgKyAwLjUsIGJhc2tldFBvc2l0aW9uLnogLSAwLjcyMzUpKTsgLy9Cb2FyZCAxNy41IGNtIGZyb20gYmFza2V0XHJcbiAgICAgICAgbm9kZS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuNTksIDAuMDUsIDAuMDUpKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgbm9kZSA9IGNyZWF0ZVN0YW5kYXJkRnVkZ2VOb2RlKFwiQmxhY2tMb3dlclN0cmlwZVwiLCBkZWNvcmF0aW9uTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCkpO1xyXG4gICAgICAgIG5vZGUubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCwgYmFza2V0UG9zaXRpb24ueSArIDAuMDUsIGJhc2tldFBvc2l0aW9uLnogLSAwLjcyMzUpKTsgLy9Cb2FyZCAxNy41IGNtIGZyb20gYmFza2V0XHJcbiAgICAgICAgbm9kZS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuNTksIDAuMDUsIDAuMDUpKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgbm9kZSA9IGNyZWF0ZVN0YW5kYXJkRnVkZ2VOb2RlKFwiQmxhY2tMZWZ0U3RyaXBlXCIsIGRlY29yYXRpb25NYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSk7XHJcbiAgICAgICAgbm9kZS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54IC0gMC4yNywgYmFza2V0UG9zaXRpb24ueSArIDAuMjUsIGJhc2tldFBvc2l0aW9uLnogLSAwLjcyMzUpKTsgLy9Cb2FyZCAxNy41IGNtIGZyb20gYmFza2V0XHJcbiAgICAgICAgbm9kZS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMDUsIDAuNDUsIDAuMDUpKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgbm9kZSA9IGNyZWF0ZVN0YW5kYXJkRnVkZ2VOb2RlKFwiQmxhY2tSaWdodFN0cmlwZVwiLCBkZWNvcmF0aW9uTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCkpO1xyXG4gICAgICAgIG5vZGUubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCArIDAuMjcsIGJhc2tldFBvc2l0aW9uLnkgKyAwLjI1LCBiYXNrZXRQb3NpdGlvbi56IC0gMC43MjM1KSk7IC8vQm9hcmQgMTcuNSBjbSBmcm9tIGJhc2tldFxyXG4gICAgICAgIG5vZGUubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjA1LCAwLjQ1LCAwLjA1KSk7XHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKG5vZGUpO1xyXG5cclxuICAgICAgICAvL0dvYWxUcmlnZ2VyIC0gU2xpZ2h0bHkgcG9zaXRpb25lZCB1bmRlciB0aGUgYmFza2V0IGVudHJ5IHNvIGl0IG9ubHkgY291bnRzIHdoZW4gaXQgZ29lcyB0aHJvdWdoIGFuZCB2ZXJ5IHNtYWxsXHJcbiAgICAgICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDZdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiR29hbFRyaWdnZXJcIiwgbWF0ZXJpYWxCYXNrZXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuQk9EWV9UWVBFLlNUQVRJQywgZi5DT0xMSVNJT05fR1JPVVAuREVGQVVMVCk7XHJcbiAgICAgICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDZdLnJlbW92ZUNvbXBvbmVudChib2RpZXNbX2JvZHlTdGFydE5vICsgNl0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50TWVzaCkpOyAvL1RyaWdnZXIgZG9lcyBub3QgbmVlZCB0byBiZSB2aXNpYmxlIHNvIHJlbW92ZSB0aGUgbWVzaCBjb21wb25lbnRcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNl0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5pc1RyaWdnZXIgPSB0cnVlO1xyXG4gICAgICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA2XS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54LCBiYXNrZXRQb3NpdGlvbi55IC0gMC4wNSwgYmFza2V0UG9zaXRpb24ueiAtIDAuMykpO1xyXG4gICAgICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA2XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMSwgMC4wNSwgMC4xKSk7XHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA2XSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9Tb21lIEJvZGllcyBvbiBKb2ludHMgdGhhdCBtb3ZlIHdoZW4gaGl0IGJ5IHRoZSBiYWxsLCBqdXN0IGZvciB2aXN1YWxzIGFuZCBmdW4gLSBMZXNzb24gSm9pbnRzXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVTaG9vdGFibGVEZWNvcmF0aW9uKF9ib2R5U3RhcnRObzogbnVtYmVyLCBfcG9zaXRpb246IGYuVmVjdG9yMywgX2hlaWdodDogbnVtYmVyID0gMSkge1xyXG4gICAgICAgIGxldCBzdGlja01hdGVyaWFsOiBmLk1hdGVyaWFsID0gbmV3IGYuTWF0ZXJpYWwoXCJKb2ludFN0aWNrXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdFJlbWlzc2l2ZShuZXcgZi5Db2xvcigwLCAwLjE1LCAxLCAwLjcpKSlcclxuICAgICAgICAvL1NwaGVyaWNhbCBKb2ludFxyXG4gICAgICAgIGJvZGllc1tfYm9keVN0YXJ0Tm9dID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiU29ja2V0XCIsIGdyb3VuZE1hdGVyaWFsLCBuZXcgZi5NZXNoQ3ViZSgpLCAxLCBmLkJPRFlfVFlQRS5TVEFUSUMsIGYuQ09MTElTSU9OX0dST1VQLkdST1VQXzEpO1xyXG4gICAgICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbX2JvZHlTdGFydE5vXSk7XHJcbiAgICAgICAgYm9kaWVzW19ib2R5U3RhcnROb10ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoX3Bvc2l0aW9uLngsIF9wb3NpdGlvbi55LCBfcG9zaXRpb24ueikpO1xyXG4gICAgICAgIGJvZGllc1tfYm9keVN0YXJ0Tm9dLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC41LCAwLjUsIDAuNSkpO1xyXG5cclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJCYWxsSm9pbnRcIiwgc3RpY2tNYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSwgMC41LCBmLkJPRFlfVFlQRS5EWU5BTUlDLCBmLkNPTExJU0lPTl9HUk9VUC5HUk9VUF8xKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnRObyArIDFdKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMV0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoX3Bvc2l0aW9uLngsIF9wb3NpdGlvbi55ICsgX2hlaWdodCwgX3Bvc2l0aW9uLnopKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMV0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjMsIDEuNSwgMC4zKSk7XHJcbiAgICAgICAgbGV0IGhpbmdlSm9pbnQgPSBuZXcgZi5Kb2ludFJldm9sdXRlKGJvZGllc1tfYm9keVN0YXJ0Tm9dLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSksIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAxXS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpLCBuZXcgZi5WZWN0b3IzKDEsIDAsIDApKTtcclxuICAgICAgICBib2RpZXNbX2JvZHlTdGFydE5vXS5hZGRDb21wb25lbnQoaGluZ2VKb2ludCk7XHJcbiAgICAgICAgaGluZ2VKb2ludC5zcHJpbmdEYW1waW5nID0gMC45O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvL1NwYXduIGEgb2JqZWN0IHRoYXQgaXMgc2lnbmFsaW5nIGEgZnJlc2ggYm91bmNlIG9uIHRoZSBncm91bmQgLSBMZXNzb24gQ29sbGlzaW9uIEV2ZW50cyAtIEltcHVsc2VzXHJcbiAgICBmdW5jdGlvbiBzcGF3bkRlY29PYmplY3RPblNwb3QoX3Bvc2l0aW9uOiBmLlZlY3RvcjMsIF9pbXB1bHNlU3RyZW5ndGg6IG51bWJlciA9IDApIHtcclxuICAgICAgICBsZXQgX25vZGUgPSBjcmVhdGVTdGFuZGFyZEZ1ZGdlTm9kZShcIkRla29cIiwgYm9hcmREZWZhdWx0LCBuZXcgZi5NZXNoQ3ViZSgpKTtcclxuICAgICAgICBfbm9kZS5tdHhMb2NhbC50cmFuc2xhdGUoX3Bvc2l0aW9uKTtcclxuICAgICAgICBfbm9kZS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMSwgX2ltcHVsc2VTdHJlbmd0aCAvIDEwLCAwLjEpKTtcclxuICAgICAgICBoaWVyYXJjaHkuYWRkQ2hpbGQoX25vZGUpO1xyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGRlc3Bhd25EZWNvT2JqZWN0LCAxMDAwLCBfbm9kZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9SZW1vdmUgdGhlIGNoaWxkIGFnYWluc3QgYWZ0ZXIgYSB3aGlsZSAobm90IHBlcmZvcm1hbnQsIHNob3VsZCB1c2Ugb2JqZWN0IHBvb2xpbmcgYnV0IHRoYXQgaXMgbm90IHBhcnQgb2YgdGhlIGxlc3NvbilcclxuICAgIGZ1bmN0aW9uIGRlc3Bhd25EZWNvT2JqZWN0KF9ub2RlOiBmLk5vZGUpIHtcclxuICAgICAgICBoaWVyYXJjaHkucmVtb3ZlQ2hpbGQoX25vZGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vU2ltcGxlIFJheWNhc3QgdGhhdCBpcyBjaGVja2luZyB0aGUgc3BlZWQgb2YgdGhlIHBhc3NpbmcgYmFsbCBvbiB0aGUgYmFza2V0cmluZyAtIExlc3NvbiBSYXljYXN0XHJcbiAgICBmdW5jdGlvbiByYXljYXN0U3BlZWRUZXN0KCkge1xyXG4gICAgICAgIGxldCBvcmlnaW4gPSBuZXcgZi5WZWN0b3IzKDAsIDMuMTUsIC02Ljc3NSk7XHJcbiAgICAgICAgbGV0IHJheUhpdDogZi5SYXlIaXRJbmZvID0gZi5QaHlzaWNzLnJheWNhc3Qob3JpZ2luLCBuZXcgZi5WZWN0b3IzKDAsIDAsIDEpLCAxLjUpO1xyXG4gICAgICAgIGlmIChyYXlIaXQuaGl0ICYmIHJheUhpdC5yaWdpZGJvZHlDb21wb25lbnQubm9kZS5uYW1lID09IFwiQmFza2V0YmFsbFwiKSB7XHJcbiAgICAgICAgICAgIGxhc3RTcGVlZCA9IGJhbGwuZ2V0VmVsb2NpdHkoKS5tYWduaXR1ZGU7XHJcbiAgICAgICAgICAgIGdvYWxDb3VudGVyLnRleHRDb250ZW50ID0gXCJQb2ludHM6IFwiICsgcG9pbnRzLnRvU3RyaW5nKCkgKyBcIiAvIFNwZWVkOiBcIiArIGxhc3RTcGVlZC50b0ZpeGVkKDIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyNyZWdpb24gRXZlbnQgSGFuZGxpbmdcclxuICAgIC8vUmVnaXN0ZXIgYSB0cmlnZ2VyaW5nIGV2ZW50IC0gTGVzc29uIFRyaWdnZXIgRXZlbnRzXHJcbiAgICBmdW5jdGlvbiBnb2FsQ2hlY2tFbnRlcihfZXZlbnQ6IGYuRXZlbnRQaHlzaWNzKSB7XHJcbiAgICAgICAgaWYgKF9ldmVudC5jbXBSaWdpZGJvZHkubm9kZS5uYW1lID09IFwiQmFza2V0YmFsbFwiKSB7XHJcbiAgICAgICAgICAgIGJvZGllc1sxMF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50TWF0ZXJpYWwpLm1hdGVyaWFsID0gYm9hcmRHb2FsO1xyXG4gICAgICAgICAgICBwb2ludHMgKz0gMTAwO1xyXG4gICAgICAgICAgICBnb2FsQ291bnRlci50ZXh0Q29udGVudCA9IFwiUG9pbnRzOiBcIiArIHBvaW50cy50b1N0cmluZygpICsgXCIgLyBTcGVlZDogXCIgKyBsYXN0U3BlZWQudG9GaXhlZCgyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ29hbENoZWNrRXhpdChfZXZlbnQ6IGYuRXZlbnRQaHlzaWNzKSB7XHJcbiAgICAgICAgaWYgKF9ldmVudC5jbXBSaWdpZGJvZHkubm9kZS5uYW1lID09IFwiQmFza2V0YmFsbFwiKSB7XHJcbiAgICAgICAgICAgIGJvZGllc1sxMF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50TWF0ZXJpYWwpLm1hdGVyaWFsID0gYm9hcmREZWZhdWx0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL1JlZ2lzdGVyIGEgY29sbGlzaW9uIG9mIGEgYm9keSB3aXRoIHRoZSBncm91bmQgLSBMZXNzb24gQ29sbGlzaW9uIEV2ZW50c1xyXG4gICAgZnVuY3Rpb24gZ3JvdW5kQ29sRW50ZXIoX2V2ZW50OiBmLkV2ZW50UGh5c2ljcykge1xyXG4gICAgICAgIGlmIChfZXZlbnQuY21wUmlnaWRib2R5Lm5vZGUubmFtZSA9PSBcIkJhc2tldGJhbGxcIikge1xyXG4gICAgICAgICAgICBzcGF3bkRlY29PYmplY3RPblNwb3QoX2V2ZW50LmNvbGxpc2lvblBvaW50LCBfZXZlbnQubm9ybWFsSW1wdWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRhcmdldENvbEVudGVyKF9ldmVudDogZi5FdmVudFBoeXNpY3MpIHtcclxuICAgICAgICBpZiAoX2V2ZW50LmNtcFJpZ2lkYm9keS5ub2RlLm5hbWUgPT0gXCJCYXNrZXRiYWxsXCIpIHtcclxuICAgICAgICAgICAgcG9pbnRzICs9IDUwO1xyXG4gICAgICAgICAgICBnb2FsQ291bnRlci50ZXh0Q29udGVudCA9IFwiUG9pbnRzOiBcIiArIHBvaW50cy50b1N0cmluZygpICsgXCIgLyBTcGVlZDogXCIgKyBsYXN0U3BlZWQudG9GaXhlZCgyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbn0iXX0=