"use strict";
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
var Tutorials_FUDGEPhysics_Lesson1;
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
(function (Tutorials_FUDGEPhysics_Lesson1) {
    var f = FudgeCore;
    //GOALS: Learning how to define shpes to create a not predefined collider shape.
    //Built a simple physical player like you would find in a adventure or 3d platformer.
    //Hint! -> These concepts are only a basic start, expand on it yourself to improve on results.
    //Fudge Basic Variables
    window.addEventListener("load", init);
    const app = document.querySelector("canvas"); // The html element where the scene is drawn to
    let viewPort; // The scene visualization
    let hierarchy; // You're object scene tree
    //Physical Objects
    let bodies = new Array(); // Array of all physical objects in the scene to have a quick reference
    let player;
    let playerBody;
    //Setting Variables
    let materialConvexShape = new f.Material("MorningStarThingy", f.ShaderFlat, new f.CoatRemissive(new f.Color(0.5, 0.4, 0.35, 1)));
    let materialPlayer = new f.Material("Player", f.ShaderFlat, new f.CoatRemissive(new f.Color(0.7, 0.8, 0.6, 1)));
    let environmentMat = new f.Material("Environment", f.ShaderFlat, new f.CoatRemissive(new f.Color(0.2, 0.2, 0.2, 1)));
    //Physical Player Variables
    let isGrounded;
    let movementspeed = 8;
    let turningspeed = 80;
    let playerWeight = 75;
    let playerJumpForce = 500;
    let cmpCamera; //We let the camera look at our player in update
    let yTurn = 0; //How high the turning input currently is
    let forwardMovement = 0; //How high the forward movement input currently is
    //Function to initialize the Fudge Scene with a camera, light, viewport and PHYSCIAL Objects
    function init(_event) {
        hierarchy = new f.Node("Scene"); //create the root Node where every object is parented to. Should never be changed
        //#region PHYSICS
        //OimoPhysics which is integrated in Fudge is using a correctionAlgorithm on solver iterations instead of fully recalculate physics too often, 
        //so you can crank the number of solver iterations higher than with most engines. But Oimo is in general less accurate.
        //This is not needed but we just do it to show it.
        f.Physics.settings.defaultRestitution = 0.15;
        f.Physics.settings.defaultFriction = 0.8;
        //PHYSICS 
        //Creating a physically static ground plane for our physics playground. A simple scaled cube but with physics type set to static
        bodies[0] = createCompleteNode("Ground", environmentMat, new f.MeshCube(), 0, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.GROUP_2);
        bodies[0].mtxLocal.scale(new f.Vector3(14, 0.3, 14)); //Scale the body with it's standard ComponentTransform
        //bodies[0].mtxLocal.rotateX(4, true); //Give it a slight rotation so the physical objects are sliding, always from left when it's after a scaling
        hierarchy.appendChild(bodies[0]); //Add the node to the scene by adding it to the scene-root
        //CONCEPT 1 - Convex Colliders / Compound Collider - A Collider Shape that is not predefined and has no holes in it
        //e.g. something like a morning star shape a cube with pyramides as spikes on the side
        createConvexCompountCollider();
        //CONCEPT 2 - Setting Up a physical player
        //A physical player is a standard physical object of the type dynamic, BUT, you only want to rotate on Y axis, and you want to setup things
        //like a grounded variable and other movement related stuff.
        settingUpAPlayer();
        //Setting up some environment objects for our player to jump on
        bodies[100] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.GROUP_2);
        bodies[100].mtxLocal.translate(new f.Vector3(5, 1, 3));
        bodies[100].mtxLocal.scale(new f.Vector3(1, 1, 1));
        //bodies[100].mtxLocal.rotateX(4, true); 
        hierarchy.appendChild(bodies[100]); //Add the node to the scene by adding it to the scene-root
        bodies[101] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.GROUP_2);
        bodies[101].mtxLocal.translate(new f.Vector3(-3, 3.5, 2));
        bodies[101].mtxLocal.scale(new f.Vector3(1, 1, 5));
        bodies[101].mtxLocal.rotateX(40, true);
        hierarchy.appendChild(bodies[101]);
        /*Stairs, keep in mind our player is only able to walk up stars because he is a capsule but it's not easy for him because we do not lift any feet,
        we are just pushing a capsule with force against a slope until it's pushed up, which we make easier by giving the player a low friction, the way
        we set the player up he can not slide on the ground but it helps to get him up the stairs.
        So you need to turn around a little while moving to climb these stairs
        advanced stairwalking is something you need to figure out yourself. Keyword raycast is a good start.
        */
        let slopeHeight = 0.20;
        bodies[102] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.GROUP_2);
        bodies[102].mtxLocal.translate(new f.Vector3(-3, slopeHeight, -2));
        bodies[102].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[102]);
        bodies[103] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.GROUP_2);
        bodies[103].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 2, -2 - 0.35));
        bodies[103].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[103]);
        bodies[104] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.GROUP_2);
        bodies[104].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 3, -2 - 0.35 * 2));
        bodies[104].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[104]);
        bodies[105] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.GROUP_2);
        bodies[105].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 4, -2 - 0.35 * 3));
        bodies[105].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[105]);
        bodies[106] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.BODY_TYPE.STATIC, f.COLLISION_GROUP.GROUP_2);
        bodies[106].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 5, -2 - 0.35 * 4));
        bodies[106].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[106]);
        //#endregion PHYSICS
        //Standard Fudge Scene Initialization - Creating a directional light, a camera and initialize the viewport
        let cmpLight = new f.ComponentLight(new f.LightDirectional(f.Color.CSS("WHITE")));
        cmpLight.mtxPivot.lookAt(new f.Vector3(0.5, -1, -0.8)); //Set light direction
        hierarchy.addComponent(cmpLight);
        cmpCamera = new f.ComponentCamera();
        cmpCamera.clrBackground = f.Color.CSS("GREY");
        cmpCamera.mtxPivot.translate(new f.Vector3(17, 4, 17)); //Move camera far back so the whole scene is visible
        cmpCamera.mtxPivot.lookAt(f.Vector3.ZERO()); //Set the camera matrix so that it looks at the center of the scene
        viewPort = new f.Viewport(); //Creating a viewport that is rendered onto the html canvas element
        viewPort.initialize("Viewport", hierarchy, cmpCamera, app); //initialize the viewport with the root node, camera and canvas
        viewPort.physicsDebugMode = f.PHYSICS_DEBUGMODE.JOINTS_AND_COLLIDER;
        document.addEventListener("keypress", hndKey); //Adding a listener for keypress handling
        document.addEventListener("keyup", hndKeyUp); //Adding a listener for keyUp
        //PHYSICS - Start using physics by telling the physics the scene root object. Physics will recalculate every transform and initialize
        f.Physics.adjustTransforms(hierarchy);
        //f.Physics.settings.debugDraw = true;
        //Important start the game loop after starting physics, so physics can use the current transform before it's first iteration
        f.Loop.addEventListener("loopFrame" /* LOOP_FRAME */, update); //Tell the game loop to call the update function on each frame
        f.Loop.start(); //Stard the game loop
    }
    //Function to animate/update the Fudge scene, commonly known as gameloop
    function update() {
        //PHYSICS - Simulate physical changes each frame, parameter to set time between frames
        f.Physics.simulate(f.Loop.timeFrameReal / 1000);
        //Player constant update functions do it after physics calculation is best practice
        cmpCamera.mtxPivot.lookAt(player.mtxWorld.translation);
        playerIsGroundedRaycast();
        playerMovement(f.Loop.timeFrameReal / 1000);
        viewPort.draw(); // Draw the current Fudge Scene to the canvas
    }
    // Function to quickly create a node with multiple needed FudgeComponents, including a physics component
    function createCompleteNode(_name, _material, _mesh, _mass, _physicsType, _group = f.COLLISION_GROUP.DEFAULT, _colType = f.COLLIDER_TYPE.CUBE, _convexMesh = null) {
        let node = new f.Node(_name);
        let cmpMesh = new f.ComponentMesh(_mesh);
        let cmpMaterial = new f.ComponentMaterial(_material);
        let cmpTransform = new f.ComponentTransform();
        let cmpRigidbody = new f.ComponentRigidbody(_mass, _physicsType, _colType, _group, null, _convexMesh); //add a Float32 Array of points to the rb constructor to create a convex collider
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        node.addComponent(cmpRigidbody);
        return node;
    }
    function createConvexCompountCollider() {
        //Step 1 - define points that construct the shape you want for your collider - order is important so think about what point comes when in your shape
        let colliderVertices = new Float32Array([
            1, -1, 1,
            0, -2, 0,
            1, 1, 1,
            -1, 1, 1,
            -1, -1, 1,
            -2, 0, 0,
            1, 1, -1,
            -1, 1, -1,
            -1, -1, -1,
            0, 0, -2,
            1, -1, -1,
            2, 0, 0,
            0, 2, 0,
            0, 0, 2
        ]);
        //Step 2 - define the visual nodes that are part of your whole shape, since we have a cube that is surounded by pyramids:
        //Main Shape
        bodies[5] = createCompleteNode("Compound", materialConvexShape, new f.MeshCube(), 1, f.BODY_TYPE.DYNAMIC, f.COLLISION_GROUP.DEFAULT, f.COLLIDER_TYPE.CONVEX, colliderVertices);
        hierarchy.appendChild(bodies[5]);
        bodies[5].mtxLocal.translate(new f.Vector3(2.5, 4, 3.5));
        bodies[5].mtxLocal.rotateX(27);
        bodies[5].mtxLocal.rotateY(32);
        //Components - Removing the Physics component on each of them since they all build one shape on the main Node only the visual nodes need to be there
        bodies[6] = createCompleteNode("CompoundUpper", materialConvexShape, new f.MeshPyramid(), 1, f.BODY_TYPE.DYNAMIC, f.COLLISION_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[6].removeComponent(bodies[6].getComponent(f.ComponentRigidbody));
        bodies[6].mtxLocal.translateY(0.5);
        bodies[6].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[6]); //appending the Node not to the main hierarchy but the Node it is part of
        bodies[7] = createCompleteNode("CompoundLower", materialConvexShape, new f.MeshPyramid(), 1, f.BODY_TYPE.DYNAMIC, f.COLLISION_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[7].removeComponent(bodies[7].getComponent(f.ComponentRigidbody));
        bodies[7].mtxLocal.rotateX(180);
        bodies[7].mtxLocal.translateY(0.5);
        bodies[7].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[7]);
        bodies[8] = createCompleteNode("CompoundLeft", materialConvexShape, new f.MeshPyramid(), 1, f.BODY_TYPE.DYNAMIC, f.COLLISION_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[8].removeComponent(bodies[8].getComponent(f.ComponentRigidbody));
        bodies[8].mtxLocal.rotateZ(90);
        bodies[8].mtxLocal.translateY(0.5);
        bodies[8].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[8]);
        bodies[9] = createCompleteNode("CompoundRight", materialConvexShape, new f.MeshPyramid(), 1, f.BODY_TYPE.DYNAMIC, f.COLLISION_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[9].removeComponent(bodies[9].getComponent(f.ComponentRigidbody));
        bodies[9].mtxLocal.rotateZ(-90);
        bodies[9].mtxLocal.translateY(0.5);
        bodies[9].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[9]);
        bodies[10] = createCompleteNode("CompoundFront", materialConvexShape, new f.MeshPyramid(), 1, f.BODY_TYPE.DYNAMIC, f.COLLISION_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[10].removeComponent(bodies[10].getComponent(f.ComponentRigidbody));
        bodies[10].mtxLocal.rotateX(90);
        bodies[10].mtxLocal.translateY(0.5);
        bodies[10].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[10]);
        bodies[11] = createCompleteNode("CompoundBack", materialConvexShape, new f.MeshPyramid(), 1, f.BODY_TYPE.DYNAMIC, f.COLLISION_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[11].removeComponent(bodies[11].getComponent(f.ComponentRigidbody));
        bodies[11].mtxLocal.rotateX(-90);
        bodies[11].mtxLocal.translateY(0.5);
        bodies[11].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[11]);
        bodies[5].getComponent(f.ComponentRigidbody).restitution = 3;
    }
    //Setting up a physical player which is nothign but a cube but able to platform in our little world and reacting to stuff
    function settingUpAPlayer() {
        player = createCompleteNode("Player", materialPlayer, new f.MeshCube(), playerWeight, f.BODY_TYPE.DYNAMIC, f.COLLISION_GROUP.DEFAULT, f.COLLIDER_TYPE.CAPSULE);
        hierarchy.appendChild(player);
        playerBody = player.getComponent(f.ComponentRigidbody);
        player.mtxLocal.scale(new f.Vector3(0.5, 1.8, 0.3));
        player.mtxLocal.translate(new f.Vector3(2.5, 4, 3.5));
        playerBody.effectRotation = new f.Vector3(0, 0, 0); //Physics not turn our player we do it ourselves
        //since our capsule collider is a box with half spheres on top and bottom it's a little higher than our box mesh, we need to scale the pivot on the rb itself
        playerBody.mtxPivot.scale(new f.Vector3(1, 0.85, 1));
        playerBody.friction = 0.01; //lower the friction to make it easier climbing stairs - this is only needed in this kind of player structure
        //addign a nose to our player so we know whats the forward direction - but it's not a physics object
        let playerNose = createCompleteNode("PlayerNose", materialPlayer, new f.MeshCube(), playerWeight, f.BODY_TYPE.DYNAMIC);
        playerNose.mtxLocal.translate(new f.Vector3(0, 0.2, 0.4));
        playerNose.mtxLocal.scale(new f.Vector3(0.1, 0.2, 1.5));
        playerNose.removeComponent(playerNose.getComponent(f.ComponentRigidbody));
        player.addChild(playerNose);
    }
    //Check if our physical player is hitting a surface with his feed, if yo let him be able to jump
    function playerIsGroundedRaycast() {
        let hitInfo;
        hitInfo = f.Physics.raycast(playerBody.getPosition(), new f.Vector3(0, -1, 0), 1.1);
        if (hitInfo.hit) {
            isGrounded = true;
        }
        else {
            isGrounded = false;
        }
    }
    // Event Function handling keyboard input
    function hndKey(_event) {
        if (_event.code == f.KEYBOARD_CODE.A) {
            yTurn = 1;
        }
        if (_event.code == f.KEYBOARD_CODE.W) {
            forwardMovement = 1;
        }
        if (_event.code == f.KEYBOARD_CODE.S) {
            forwardMovement = -1;
        }
        if (_event.code == f.KEYBOARD_CODE.D) {
            yTurn = -1;
        }
        if (_event.code == f.KEYBOARD_CODE.SPACE) {
            if (isGrounded) //Let the player only jumping when on the ground
                playerBody.applyLinearImpulse(new f.Vector3(0, playerJumpForce, 0));
        }
        if (_event.code == f.KEYBOARD_CODE.T) {
            viewPort.physicsDebugMode = viewPort.physicsDebugMode == f.PHYSICS_DEBUGMODE.JOINTS_AND_COLLIDER ? f.PHYSICS_DEBUGMODE.PHYSIC_OBJECTS_ONLY : f.PHYSICS_DEBUGMODE.JOINTS_AND_COLLIDER;
        }
    }
    //When the key is up we want to stop movement
    function hndKeyUp(_event) {
        if (_event.code == f.KEYBOARD_CODE.A) {
            yTurn = 0;
        }
        if (_event.code == f.KEYBOARD_CODE.W) {
            forwardMovement = 0;
        }
        if (_event.code == f.KEYBOARD_CODE.S) {
            forwardMovement = 0;
        }
        if (_event.code == f.KEYBOARD_CODE.D) {
            yTurn = 0;
        }
    }
    //Actually moving the player
    function playerMovement(_deltaTime) {
        let playerForward;
        playerForward = f.Vector3.Z();
        playerForward.transform(player.mtxWorld, false);
        //You can rotate a body like you would rotate a transform, incremental but keep in mind, normally we use forces in physics,
        //this is just a feature to make it easier to create player characters
        playerBody.rotateBody(new f.Vector3(0, yTurn * turningspeed * _deltaTime, 0));
        let movementVelocity = new f.Vector3();
        movementVelocity.x = playerForward.x * forwardMovement * movementspeed;
        movementVelocity.y = playerBody.getVelocity().y;
        movementVelocity.z = playerForward.z * forwardMovement * movementspeed;
        playerBody.setVelocity(movementVelocity);
        //Since we are resetting the velocity when releasing the key to have a instant stop our player is not able to slide. We would have
        //the player fade out have sliding instead you need to configure that for your own game.
    }
})(Tutorials_FUDGEPhysics_Lesson1 || (Tutorials_FUDGEPhysics_Lesson1 = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDhHQUE4RztBQUU5RyxJQUFVLDhCQUE4QixDQWlVdkM7QUFuVUQsOEdBQThHO0FBRTlHLFdBQVUsOEJBQThCO0lBQ3BDLElBQU8sQ0FBQyxHQUFHLFNBQVMsQ0FBQztJQUVyQixnRkFBZ0Y7SUFDaEYscUZBQXFGO0lBQ3JGLDhGQUE4RjtJQUU5Rix1QkFBdUI7SUFDdkIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN0QyxNQUFNLEdBQUcsR0FBc0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLCtDQUErQztJQUNoSCxJQUFJLFFBQW9CLENBQUMsQ0FBQywwQkFBMEI7SUFDcEQsSUFBSSxTQUFpQixDQUFDLENBQUMsMkJBQTJCO0lBR2xELGtCQUFrQjtJQUNsQixJQUFJLE1BQU0sR0FBYSxJQUFJLEtBQUssRUFBRSxDQUFDLENBQUMsdUVBQXVFO0lBQzNHLElBQUksTUFBYyxDQUFDO0lBQ25CLElBQUksVUFBZ0MsQ0FBQztJQUVyQyxtQkFBbUI7SUFDbkIsSUFBSSxtQkFBbUIsR0FBZSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsbUJBQW1CLEVBQUUsQ0FBQyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3SSxJQUFJLGNBQWMsR0FBZSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDNUgsSUFBSSxjQUFjLEdBQWUsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWpJLDJCQUEyQjtJQUMzQixJQUFJLFVBQW1CLENBQUM7SUFDeEIsSUFBSSxhQUFhLEdBQVcsQ0FBQyxDQUFDO0lBQzlCLElBQUksWUFBWSxHQUFXLEVBQUUsQ0FBQztJQUM5QixJQUFJLFlBQVksR0FBVyxFQUFFLENBQUM7SUFDOUIsSUFBSSxlQUFlLEdBQVcsR0FBRyxDQUFDO0lBQ2xDLElBQUksU0FBNEIsQ0FBQyxDQUFDLGdEQUFnRDtJQUNsRixJQUFJLEtBQUssR0FBVyxDQUFDLENBQUMsQ0FBQyx5Q0FBeUM7SUFDaEUsSUFBSSxlQUFlLEdBQVcsQ0FBQyxDQUFDLENBQUMsa0RBQWtEO0lBRW5GLDRGQUE0RjtJQUM1RixTQUFTLElBQUksQ0FBQyxNQUFhO1FBRXZCLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxpRkFBaUY7UUFFbEgsaUJBQWlCO1FBQ2pCLCtJQUErSTtRQUMvSSx1SEFBdUg7UUFDdkgsa0RBQWtEO1FBRWxELENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQztRQUM3QyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxlQUFlLEdBQUcsR0FBRyxDQUFDO1FBR3pDLFVBQVU7UUFDVixnSUFBZ0k7UUFDaEksTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLFFBQVEsRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDN0gsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLHNEQUFzRDtRQUM1RyxrSkFBa0o7UUFDbEosU0FBUyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLDBEQUEwRDtRQUc1RixtSEFBbUg7UUFDbkgsc0ZBQXNGO1FBQ3RGLDRCQUE0QixFQUFFLENBQUM7UUFFL0IsMENBQTBDO1FBQzFDLDJJQUEySTtRQUMzSSw0REFBNEQ7UUFDNUQsZ0JBQWdCLEVBQUUsQ0FBQztRQUVuQiwrREFBK0Q7UUFDL0QsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLGFBQWEsRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25ELHlDQUF5QztRQUN6QyxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsMERBQTBEO1FBRTlGLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3BJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxRCxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25ELE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN2QyxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBRW5DOzs7OztVQUtFO1FBQ0YsSUFBSSxXQUFXLEdBQVcsSUFBSSxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3BJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25FLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsV0FBVyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLGFBQWEsRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUM5RSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLFdBQVcsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNwRSxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3BJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxXQUFXLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2xGLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsV0FBVyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLGFBQWEsRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEYsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxXQUFXLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDcEUsU0FBUyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNuQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsYUFBYSxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNwSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsV0FBVyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLFdBQVcsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNwRSxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25DLG9CQUFvQjtRQUdwQiwwR0FBMEc7UUFDMUcsSUFBSSxRQUFRLEdBQXFCLElBQUksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxxQkFBcUI7UUFDN0UsU0FBUyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVqQyxTQUFTLEdBQUcsSUFBSSxDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDcEMsU0FBUyxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QyxTQUFTLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsb0RBQW9EO1FBQzVHLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLG1FQUFtRTtRQUVoSCxRQUFRLEdBQUcsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxtRUFBbUU7UUFDaEcsUUFBUSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLCtEQUErRDtRQUMzSCxRQUFRLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLG1CQUFtQixDQUFDO1FBRXBFLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyx5Q0FBeUM7UUFDeEYsUUFBUSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLDZCQUE2QjtRQUUzRSxxSUFBcUk7UUFDckksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUV0QyxzQ0FBc0M7UUFFdEMsNEhBQTRIO1FBQzVILENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLCtCQUFxQixNQUFNLENBQUMsQ0FBQyxDQUFDLDhEQUE4RDtRQUNuSCxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMscUJBQXFCO0lBQ3pDLENBQUM7SUFFRCx3RUFBd0U7SUFDeEUsU0FBUyxNQUFNO1FBQ1gsc0ZBQXNGO1FBQ3RGLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBRWhELG1GQUFtRjtRQUNuRixTQUFTLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3ZELHVCQUF1QixFQUFFLENBQUM7UUFDMUIsY0FBYyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBRTVDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLDZDQUE2QztJQUNsRSxDQUFDO0lBRUQsd0dBQXdHO0lBQ3hHLFNBQVMsa0JBQWtCLENBQUMsS0FBYSxFQUFFLFNBQXFCLEVBQUUsS0FBYSxFQUFFLEtBQWEsRUFBRSxZQUF5QixFQUFFLFNBQTRCLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLFdBQTRCLENBQUMsQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLGNBQTRCLElBQUk7UUFDaFEsSUFBSSxJQUFJLEdBQVcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLElBQUksT0FBTyxHQUFvQixJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUQsSUFBSSxXQUFXLEdBQXdCLElBQUksQ0FBQyxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRTFFLElBQUksWUFBWSxHQUF5QixJQUFJLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1FBQ3BFLElBQUksWUFBWSxHQUF5QixJQUFJLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUMsaUZBQWlGO1FBQzlNLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDaEMsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELFNBQVMsNEJBQTRCO1FBQ2pDLG9KQUFvSjtRQUNwSixJQUFJLGdCQUFnQixHQUFpQixJQUFJLFlBQVksQ0FDaEQ7WUFDRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNSLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ1IsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ1AsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDVCxDQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQ1YsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDUixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNSLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDVixDQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDWCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNSLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDVCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDUCxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7U0FDVixDQUFDLENBQUM7UUFFUCx5SEFBeUg7UUFDekgsWUFBWTtRQUNaLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLGdCQUFnQixDQUFDLENBQUM7UUFDL0ssU0FBUyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pELE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQy9CLG9KQUFvSjtRQUNwSixNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsZUFBZSxFQUFFLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3RLLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkQsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHlFQUF5RTtRQUMzRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsZUFBZSxFQUFFLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3RLLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkQsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsY0FBYyxFQUFFLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JLLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkQsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsZUFBZSxFQUFFLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3RLLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbkMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNuRCxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxlQUFlLEVBQUUsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdkssTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUM7UUFDMUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDaEMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDcEMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwRCxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxjQUFjLEVBQUUsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdEssTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUM7UUFDMUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNqQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BELE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFFRCx5SEFBeUg7SUFDekgsU0FBUyxnQkFBZ0I7UUFDckIsTUFBTSxHQUFHLGtCQUFrQixDQUFDLFFBQVEsRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDL0osU0FBUyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QixVQUFVLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUN2RCxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3BELE1BQU0sQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsVUFBVSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLGdEQUFnRDtRQUNwRyw2SkFBNko7UUFDN0osVUFBVSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyRCxVQUFVLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxDQUFDLDZHQUE2RztRQUV6SSxvR0FBb0c7UUFDcEcsSUFBSSxVQUFVLEdBQVcsa0JBQWtCLENBQUMsWUFBWSxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMvSCxVQUFVLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzFELFVBQVUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEQsVUFBVSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUM7UUFDMUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRUQsZ0dBQWdHO0lBQ2hHLFNBQVMsdUJBQXVCO1FBQzVCLElBQUksT0FBcUIsQ0FBQztRQUMxQixPQUFPLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDcEYsSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFO1lBQ2IsVUFBVSxHQUFHLElBQUksQ0FBQztTQUNyQjthQUFNO1lBQ0gsVUFBVSxHQUFHLEtBQUssQ0FBQztTQUN0QjtJQUNMLENBQUM7SUFHRCx5Q0FBeUM7SUFDekMsU0FBUyxNQUFNLENBQUMsTUFBcUI7UUFFakMsSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFO1lBQ2xDLEtBQUssR0FBRyxDQUFDLENBQUM7U0FDYjtRQUNELElBQUksTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsRUFBRTtZQUNsQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO1NBQ3ZCO1FBQ0QsSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFO1lBQ2xDLGVBQWUsR0FBRyxDQUFDLENBQUMsQ0FBQztTQUN4QjtRQUNELElBQUksTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsRUFBRTtZQUNsQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDZDtRQUNELElBQUksTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRTtZQUN0QyxJQUFJLFVBQVUsRUFBRSxnREFBZ0Q7Z0JBQzVELFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzNFO1FBRUQsSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFO1lBQ2xDLFFBQVEsQ0FBQyxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLElBQUksQ0FBQyxDQUFDLGlCQUFpQixDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxtQkFBbUIsQ0FBQztTQUN4TDtJQUNMLENBQUM7SUFFRCw2Q0FBNkM7SUFDN0MsU0FBUyxRQUFRLENBQUMsTUFBcUI7UUFDbkMsSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFO1lBQ2xDLEtBQUssR0FBRyxDQUFDLENBQUM7U0FDYjtRQUNELElBQUksTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsRUFBRTtZQUNsQyxlQUFlLEdBQUcsQ0FBQyxDQUFDO1NBQ3ZCO1FBQ0QsSUFBSSxNQUFNLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxFQUFFO1lBQ2xDLGVBQWUsR0FBRyxDQUFDLENBQUM7U0FDdkI7UUFDRCxJQUFJLE1BQU0sQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUU7WUFDbEMsS0FBSyxHQUFHLENBQUMsQ0FBQztTQUNiO0lBQ0wsQ0FBQztJQUVELDRCQUE0QjtJQUM1QixTQUFTLGNBQWMsQ0FBQyxVQUFrQjtRQUN0QyxJQUFJLGFBQXdCLENBQUM7UUFDN0IsYUFBYSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDOUIsYUFBYSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRWhELDJIQUEySDtRQUMzSCxzRUFBc0U7UUFDdEUsVUFBVSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUssR0FBRyxZQUFZLEdBQUcsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFOUUsSUFBSSxnQkFBZ0IsR0FBYyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNsRCxnQkFBZ0IsQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDLENBQUMsR0FBRyxlQUFlLEdBQUcsYUFBYSxDQUFDO1FBQ3ZFLGdCQUFnQixDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2hELGdCQUFnQixDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxHQUFHLGVBQWUsR0FBRyxhQUFhLENBQUM7UUFDdkUsVUFBVSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3pDLGtJQUFrSTtRQUNsSSx3RkFBd0Y7SUFDNUYsQ0FBQztBQUVMLENBQUMsRUFqVVMsOEJBQThCLEtBQTlCLDhCQUE4QixRQWlVdkMiLCJzb3VyY2VzQ29udGVudCI6WyIvL1JlZmVyZW5jZSBGdWRnZSwgZ2V0dGluZyBjb2RlIGNvbXBsZXRpb24gcmVhZHkgYW5kIGNyZWF0aW5nIGEgc2hvcnRjdXQgZiB0byB3cml0ZSBGdWRnZUNvZGUgbW9yZSBjb21mb3J0YWJseVxyXG5cclxubmFtZXNwYWNlIFR1dG9yaWFsc19GVURHRVBoeXNpY3NfTGVzc29uMSB7XHJcbiAgICBpbXBvcnQgZiA9IEZ1ZGdlQ29yZTtcclxuXHJcbiAgICAvL0dPQUxTOiBMZWFybmluZyBob3cgdG8gZGVmaW5lIHNocGVzIHRvIGNyZWF0ZSBhIG5vdCBwcmVkZWZpbmVkIGNvbGxpZGVyIHNoYXBlLlxyXG4gICAgLy9CdWlsdCBhIHNpbXBsZSBwaHlzaWNhbCBwbGF5ZXIgbGlrZSB5b3Ugd291bGQgZmluZCBpbiBhIGFkdmVudHVyZSBvciAzZCBwbGF0Zm9ybWVyLlxyXG4gICAgLy9IaW50ISAtPiBUaGVzZSBjb25jZXB0cyBhcmUgb25seSBhIGJhc2ljIHN0YXJ0LCBleHBhbmQgb24gaXQgeW91cnNlbGYgdG8gaW1wcm92ZSBvbiByZXN1bHRzLlxyXG5cclxuICAgIC8vRnVkZ2UgQmFzaWMgVmFyaWFibGVzXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaW5pdCk7XHJcbiAgICBjb25zdCBhcHA6IEhUTUxDYW52YXNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTsgLy8gVGhlIGh0bWwgZWxlbWVudCB3aGVyZSB0aGUgc2NlbmUgaXMgZHJhd24gdG9cclxuICAgIGxldCB2aWV3UG9ydDogZi5WaWV3cG9ydDsgLy8gVGhlIHNjZW5lIHZpc3VhbGl6YXRpb25cclxuICAgIGxldCBoaWVyYXJjaHk6IGYuTm9kZTsgLy8gWW91J3JlIG9iamVjdCBzY2VuZSB0cmVlXHJcblxyXG5cclxuICAgIC8vUGh5c2ljYWwgT2JqZWN0c1xyXG4gICAgbGV0IGJvZGllczogZi5Ob2RlW10gPSBuZXcgQXJyYXkoKTsgLy8gQXJyYXkgb2YgYWxsIHBoeXNpY2FsIG9iamVjdHMgaW4gdGhlIHNjZW5lIHRvIGhhdmUgYSBxdWljayByZWZlcmVuY2VcclxuICAgIGxldCBwbGF5ZXI6IGYuTm9kZTtcclxuICAgIGxldCBwbGF5ZXJCb2R5OiBmLkNvbXBvbmVudFJpZ2lkYm9keTtcclxuXHJcbiAgICAvL1NldHRpbmcgVmFyaWFibGVzXHJcbiAgICBsZXQgbWF0ZXJpYWxDb252ZXhTaGFwZTogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiTW9ybmluZ1N0YXJUaGluZ3lcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0UmVtaXNzaXZlKG5ldyBmLkNvbG9yKDAuNSwgMC40LCAwLjM1LCAxKSkpO1xyXG4gICAgbGV0IG1hdGVyaWFsUGxheWVyOiBmLk1hdGVyaWFsID0gbmV3IGYuTWF0ZXJpYWwoXCJQbGF5ZXJcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0UmVtaXNzaXZlKG5ldyBmLkNvbG9yKDAuNywgMC44LCAwLjYsIDEpKSk7XHJcbiAgICBsZXQgZW52aXJvbm1lbnRNYXQ6IGYuTWF0ZXJpYWwgPSBuZXcgZi5NYXRlcmlhbChcIkVudmlyb25tZW50XCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdFJlbWlzc2l2ZShuZXcgZi5Db2xvcigwLjIsIDAuMiwgMC4yLCAxKSkpO1xyXG5cclxuICAgIC8vUGh5c2ljYWwgUGxheWVyIFZhcmlhYmxlc1xyXG4gICAgbGV0IGlzR3JvdW5kZWQ6IGJvb2xlYW47XHJcbiAgICBsZXQgbW92ZW1lbnRzcGVlZDogbnVtYmVyID0gODtcclxuICAgIGxldCB0dXJuaW5nc3BlZWQ6IG51bWJlciA9IDgwO1xyXG4gICAgbGV0IHBsYXllcldlaWdodDogbnVtYmVyID0gNzU7XHJcbiAgICBsZXQgcGxheWVySnVtcEZvcmNlOiBudW1iZXIgPSA1MDA7XHJcbiAgICBsZXQgY21wQ2FtZXJhOiBmLkNvbXBvbmVudENhbWVyYTsgLy9XZSBsZXQgdGhlIGNhbWVyYSBsb29rIGF0IG91ciBwbGF5ZXIgaW4gdXBkYXRlXHJcbiAgICBsZXQgeVR1cm46IG51bWJlciA9IDA7IC8vSG93IGhpZ2ggdGhlIHR1cm5pbmcgaW5wdXQgY3VycmVudGx5IGlzXHJcbiAgICBsZXQgZm9yd2FyZE1vdmVtZW50OiBudW1iZXIgPSAwOyAvL0hvdyBoaWdoIHRoZSBmb3J3YXJkIG1vdmVtZW50IGlucHV0IGN1cnJlbnRseSBpc1xyXG5cclxuICAgIC8vRnVuY3Rpb24gdG8gaW5pdGlhbGl6ZSB0aGUgRnVkZ2UgU2NlbmUgd2l0aCBhIGNhbWVyYSwgbGlnaHQsIHZpZXdwb3J0IGFuZCBQSFlTQ0lBTCBPYmplY3RzXHJcbiAgICBmdW5jdGlvbiBpbml0KF9ldmVudDogRXZlbnQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgaGllcmFyY2h5ID0gbmV3IGYuTm9kZShcIlNjZW5lXCIpOyAvL2NyZWF0ZSB0aGUgcm9vdCBOb2RlIHdoZXJlIGV2ZXJ5IG9iamVjdCBpcyBwYXJlbnRlZCB0by4gU2hvdWxkIG5ldmVyIGJlIGNoYW5nZWRcclxuXHJcbiAgICAgICAgLy8jcmVnaW9uIFBIWVNJQ1NcclxuICAgICAgICAvL09pbW9QaHlzaWNzIHdoaWNoIGlzIGludGVncmF0ZWQgaW4gRnVkZ2UgaXMgdXNpbmcgYSBjb3JyZWN0aW9uQWxnb3JpdGhtIG9uIHNvbHZlciBpdGVyYXRpb25zIGluc3RlYWQgb2YgZnVsbHkgcmVjYWxjdWxhdGUgcGh5c2ljcyB0b28gb2Z0ZW4sIFxyXG4gICAgICAgIC8vc28geW91IGNhbiBjcmFuayB0aGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGhpZ2hlciB0aGFuIHdpdGggbW9zdCBlbmdpbmVzLiBCdXQgT2ltbyBpcyBpbiBnZW5lcmFsIGxlc3MgYWNjdXJhdGUuXHJcbiAgICAgICAgLy9UaGlzIGlzIG5vdCBuZWVkZWQgYnV0IHdlIGp1c3QgZG8gaXQgdG8gc2hvdyBpdC5cclxuXHJcbiAgICAgICAgZi5QaHlzaWNzLnNldHRpbmdzLmRlZmF1bHRSZXN0aXR1dGlvbiA9IDAuMTU7XHJcbiAgICAgICAgZi5QaHlzaWNzLnNldHRpbmdzLmRlZmF1bHRGcmljdGlvbiA9IDAuODtcclxuXHJcblxyXG4gICAgICAgIC8vUEhZU0lDUyBcclxuICAgICAgICAvL0NyZWF0aW5nIGEgcGh5c2ljYWxseSBzdGF0aWMgZ3JvdW5kIHBsYW5lIGZvciBvdXIgcGh5c2ljcyBwbGF5Z3JvdW5kLiBBIHNpbXBsZSBzY2FsZWQgY3ViZSBidXQgd2l0aCBwaHlzaWNzIHR5cGUgc2V0IHRvIHN0YXRpY1xyXG4gICAgICAgIGJvZGllc1swXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkdyb3VuZFwiLCBlbnZpcm9ubWVudE1hdCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5CT0RZX1RZUEUuU1RBVElDLCBmLkNPTExJU0lPTl9HUk9VUC5HUk9VUF8yKTtcclxuICAgICAgICBib2RpZXNbMF0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxNCwgMC4zLCAxNCkpOyAvL1NjYWxlIHRoZSBib2R5IHdpdGggaXQncyBzdGFuZGFyZCBDb21wb25lbnRUcmFuc2Zvcm1cclxuICAgICAgICAvL2JvZGllc1swXS5tdHhMb2NhbC5yb3RhdGVYKDQsIHRydWUpOyAvL0dpdmUgaXQgYSBzbGlnaHQgcm90YXRpb24gc28gdGhlIHBoeXNpY2FsIG9iamVjdHMgYXJlIHNsaWRpbmcsIGFsd2F5cyBmcm9tIGxlZnQgd2hlbiBpdCdzIGFmdGVyIGEgc2NhbGluZ1xyXG4gICAgICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMF0pOyAvL0FkZCB0aGUgbm9kZSB0byB0aGUgc2NlbmUgYnkgYWRkaW5nIGl0IHRvIHRoZSBzY2VuZS1yb290XHJcblxyXG5cclxuICAgICAgICAvL0NPTkNFUFQgMSAtIENvbnZleCBDb2xsaWRlcnMgLyBDb21wb3VuZCBDb2xsaWRlciAtIEEgQ29sbGlkZXIgU2hhcGUgdGhhdCBpcyBub3QgcHJlZGVmaW5lZCBhbmQgaGFzIG5vIGhvbGVzIGluIGl0XHJcbiAgICAgICAgLy9lLmcuIHNvbWV0aGluZyBsaWtlIGEgbW9ybmluZyBzdGFyIHNoYXBlIGEgY3ViZSB3aXRoIHB5cmFtaWRlcyBhcyBzcGlrZXMgb24gdGhlIHNpZGVcclxuICAgICAgICBjcmVhdGVDb252ZXhDb21wb3VudENvbGxpZGVyKCk7XHJcblxyXG4gICAgICAgIC8vQ09OQ0VQVCAyIC0gU2V0dGluZyBVcCBhIHBoeXNpY2FsIHBsYXllclxyXG4gICAgICAgIC8vQSBwaHlzaWNhbCBwbGF5ZXIgaXMgYSBzdGFuZGFyZCBwaHlzaWNhbCBvYmplY3Qgb2YgdGhlIHR5cGUgZHluYW1pYywgQlVULCB5b3Ugb25seSB3YW50IHRvIHJvdGF0ZSBvbiBZIGF4aXMsIGFuZCB5b3Ugd2FudCB0byBzZXR1cCB0aGluZ3NcclxuICAgICAgICAvL2xpa2UgYSBncm91bmRlZCB2YXJpYWJsZSBhbmQgb3RoZXIgbW92ZW1lbnQgcmVsYXRlZCBzdHVmZi5cclxuICAgICAgICBzZXR0aW5nVXBBUGxheWVyKCk7XHJcblxyXG4gICAgICAgIC8vU2V0dGluZyB1cCBzb21lIGVudmlyb25tZW50IG9iamVjdHMgZm9yIG91ciBwbGF5ZXIgdG8ganVtcCBvblxyXG4gICAgICAgIGJvZGllc1sxMDBdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiRW52aW5yb21lbnRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuQk9EWV9UWVBFLlNUQVRJQywgZi5DT0xMSVNJT05fR1JPVVAuR1JPVVBfMik7XHJcbiAgICAgICAgYm9kaWVzWzEwMF0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoNSwgMSwgMykpO1xyXG4gICAgICAgIGJvZGllc1sxMDBdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMSwgMSkpO1xyXG4gICAgICAgIC8vYm9kaWVzWzEwMF0ubXR4TG9jYWwucm90YXRlWCg0LCB0cnVlKTsgXHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDBdKTsgLy9BZGQgdGhlIG5vZGUgdG8gdGhlIHNjZW5lIGJ5IGFkZGluZyBpdCB0byB0aGUgc2NlbmUtcm9vdFxyXG5cclxuICAgICAgICBib2RpZXNbMTAxXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkVudmlucm9tZW50XCIsIGVudmlyb25tZW50TWF0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLkJPRFlfVFlQRS5TVEFUSUMsIGYuQ09MTElTSU9OX0dST1VQLkdST1VQXzIpO1xyXG4gICAgICAgIGJvZGllc1sxMDFdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKC0zLCAzLjUsIDIpKTtcclxuICAgICAgICBib2RpZXNbMTAxXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDEsIDEsIDUpKTtcclxuICAgICAgICBib2RpZXNbMTAxXS5tdHhMb2NhbC5yb3RhdGVYKDQwLCB0cnVlKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzEwMV0pO1xyXG5cclxuICAgICAgICAvKlN0YWlycywga2VlcCBpbiBtaW5kIG91ciBwbGF5ZXIgaXMgb25seSBhYmxlIHRvIHdhbGsgdXAgc3RhcnMgYmVjYXVzZSBoZSBpcyBhIGNhcHN1bGUgYnV0IGl0J3Mgbm90IGVhc3kgZm9yIGhpbSBiZWNhdXNlIHdlIGRvIG5vdCBsaWZ0IGFueSBmZWV0LFxyXG4gICAgICAgIHdlIGFyZSBqdXN0IHB1c2hpbmcgYSBjYXBzdWxlIHdpdGggZm9yY2UgYWdhaW5zdCBhIHNsb3BlIHVudGlsIGl0J3MgcHVzaGVkIHVwLCB3aGljaCB3ZSBtYWtlIGVhc2llciBieSBnaXZpbmcgdGhlIHBsYXllciBhIGxvdyBmcmljdGlvbiwgdGhlIHdheVxyXG4gICAgICAgIHdlIHNldCB0aGUgcGxheWVyIHVwIGhlIGNhbiBub3Qgc2xpZGUgb24gdGhlIGdyb3VuZCBidXQgaXQgaGVscHMgdG8gZ2V0IGhpbSB1cCB0aGUgc3RhaXJzLlxyXG4gICAgICAgIFNvIHlvdSBuZWVkIHRvIHR1cm4gYXJvdW5kIGEgbGl0dGxlIHdoaWxlIG1vdmluZyB0byBjbGltYiB0aGVzZSBzdGFpcnNcclxuICAgICAgICBhZHZhbmNlZCBzdGFpcndhbGtpbmcgaXMgc29tZXRoaW5nIHlvdSBuZWVkIHRvIGZpZ3VyZSBvdXQgeW91cnNlbGYuIEtleXdvcmQgcmF5Y2FzdCBpcyBhIGdvb2Qgc3RhcnQuIFxyXG4gICAgICAgICovXHJcbiAgICAgICAgbGV0IHNsb3BlSGVpZ2h0OiBudW1iZXIgPSAwLjIwO1xyXG4gICAgICAgIGJvZGllc1sxMDJdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiRW52aW5yb21lbnRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuQk9EWV9UWVBFLlNUQVRJQywgZi5DT0xMSVNJT05fR1JPVVAuR1JPVVBfMik7XHJcbiAgICAgICAgYm9kaWVzWzEwMl0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoLTMsIHNsb3BlSGVpZ2h0LCAtMikpO1xyXG4gICAgICAgIGJvZGllc1sxMDJdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMiwgc2xvcGVIZWlnaHQgKiAyLCAwLjM1KSk7XHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDJdKTtcclxuICAgICAgICBib2RpZXNbMTAzXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkVudmlucm9tZW50XCIsIGVudmlyb25tZW50TWF0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLkJPRFlfVFlQRS5TVEFUSUMsIGYuQ09MTElTSU9OX0dST1VQLkdST1VQXzIpO1xyXG4gICAgICAgIGJvZGllc1sxMDNdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKC0zLCBzbG9wZUhlaWdodCAqIDIsIC0yIC0gMC4zNSkpO1xyXG4gICAgICAgIGJvZGllc1sxMDNdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMiwgc2xvcGVIZWlnaHQgKiAyLCAwLjM1KSk7XHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDNdKTtcclxuICAgICAgICBib2RpZXNbMTA0XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkVudmlucm9tZW50XCIsIGVudmlyb25tZW50TWF0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLkJPRFlfVFlQRS5TVEFUSUMsIGYuQ09MTElTSU9OX0dST1VQLkdST1VQXzIpO1xyXG4gICAgICAgIGJvZGllc1sxMDRdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKC0zLCBzbG9wZUhlaWdodCAqIDMsIC0yIC0gMC4zNSAqIDIpKTtcclxuICAgICAgICBib2RpZXNbMTA0XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDIsIHNsb3BlSGVpZ2h0ICogMiwgMC4zNSkpO1xyXG4gICAgICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMTA0XSk7XHJcbiAgICAgICAgYm9kaWVzWzEwNV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJFbnZpbnJvbWVudFwiLCBlbnZpcm9ubWVudE1hdCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5CT0RZX1RZUEUuU1RBVElDLCBmLkNPTExJU0lPTl9HUk9VUC5HUk9VUF8yKTtcclxuICAgICAgICBib2RpZXNbMTA1XS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygtMywgc2xvcGVIZWlnaHQgKiA0LCAtMiAtIDAuMzUgKiAzKSk7XHJcbiAgICAgICAgYm9kaWVzWzEwNV0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygyLCBzbG9wZUhlaWdodCAqIDIsIDAuMzUpKTtcclxuICAgICAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzEwNV0pO1xyXG4gICAgICAgIGJvZGllc1sxMDZdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiRW52aW5yb21lbnRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuQk9EWV9UWVBFLlNUQVRJQywgZi5DT0xMSVNJT05fR1JPVVAuR1JPVVBfMik7XHJcbiAgICAgICAgYm9kaWVzWzEwNl0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoLTMsIHNsb3BlSGVpZ2h0ICogNSwgLTIgLSAwLjM1ICogNCkpO1xyXG4gICAgICAgIGJvZGllc1sxMDZdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMiwgc2xvcGVIZWlnaHQgKiAyLCAwLjM1KSk7XHJcbiAgICAgICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDZdKTtcclxuICAgICAgICAvLyNlbmRyZWdpb24gUEhZU0lDU1xyXG5cclxuXHJcbiAgICAgICAgLy9TdGFuZGFyZCBGdWRnZSBTY2VuZSBJbml0aWFsaXphdGlvbiAtIENyZWF0aW5nIGEgZGlyZWN0aW9uYWwgbGlnaHQsIGEgY2FtZXJhIGFuZCBpbml0aWFsaXplIHRoZSB2aWV3cG9ydFxyXG4gICAgICAgIGxldCBjbXBMaWdodDogZi5Db21wb25lbnRMaWdodCA9IG5ldyBmLkNvbXBvbmVudExpZ2h0KG5ldyBmLkxpZ2h0RGlyZWN0aW9uYWwoZi5Db2xvci5DU1MoXCJXSElURVwiKSkpO1xyXG4gICAgICAgIGNtcExpZ2h0Lm10eFBpdm90Lmxvb2tBdChuZXcgZi5WZWN0b3IzKDAuNSwgLTEsIC0wLjgpKTsgLy9TZXQgbGlnaHQgZGlyZWN0aW9uXHJcbiAgICAgICAgaGllcmFyY2h5LmFkZENvbXBvbmVudChjbXBMaWdodCk7XHJcblxyXG4gICAgICAgIGNtcENhbWVyYSA9IG5ldyBmLkNvbXBvbmVudENhbWVyYSgpO1xyXG4gICAgICAgIGNtcENhbWVyYS5jbHJCYWNrZ3JvdW5kID0gZi5Db2xvci5DU1MoXCJHUkVZXCIpO1xyXG4gICAgICAgIGNtcENhbWVyYS5tdHhQaXZvdC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygxNywgNCwgMTcpKTsgLy9Nb3ZlIGNhbWVyYSBmYXIgYmFjayBzbyB0aGUgd2hvbGUgc2NlbmUgaXMgdmlzaWJsZVxyXG4gICAgICAgIGNtcENhbWVyYS5tdHhQaXZvdC5sb29rQXQoZi5WZWN0b3IzLlpFUk8oKSk7IC8vU2V0IHRoZSBjYW1lcmEgbWF0cml4IHNvIHRoYXQgaXQgbG9va3MgYXQgdGhlIGNlbnRlciBvZiB0aGUgc2NlbmVcclxuXHJcbiAgICAgICAgdmlld1BvcnQgPSBuZXcgZi5WaWV3cG9ydCgpOyAvL0NyZWF0aW5nIGEgdmlld3BvcnQgdGhhdCBpcyByZW5kZXJlZCBvbnRvIHRoZSBodG1sIGNhbnZhcyBlbGVtZW50XHJcbiAgICAgICAgdmlld1BvcnQuaW5pdGlhbGl6ZShcIlZpZXdwb3J0XCIsIGhpZXJhcmNoeSwgY21wQ2FtZXJhLCBhcHApOyAvL2luaXRpYWxpemUgdGhlIHZpZXdwb3J0IHdpdGggdGhlIHJvb3Qgbm9kZSwgY2FtZXJhIGFuZCBjYW52YXNcclxuICAgICAgICB2aWV3UG9ydC5waHlzaWNzRGVidWdNb2RlID0gZi5QSFlTSUNTX0RFQlVHTU9ERS5KT0lOVFNfQU5EX0NPTExJREVSO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgaG5kS2V5KTsgLy9BZGRpbmcgYSBsaXN0ZW5lciBmb3Iga2V5cHJlc3MgaGFuZGxpbmdcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgaG5kS2V5VXApOyAvL0FkZGluZyBhIGxpc3RlbmVyIGZvciBrZXlVcFxyXG5cclxuICAgICAgICAvL1BIWVNJQ1MgLSBTdGFydCB1c2luZyBwaHlzaWNzIGJ5IHRlbGxpbmcgdGhlIHBoeXNpY3MgdGhlIHNjZW5lIHJvb3Qgb2JqZWN0LiBQaHlzaWNzIHdpbGwgcmVjYWxjdWxhdGUgZXZlcnkgdHJhbnNmb3JtIGFuZCBpbml0aWFsaXplXHJcbiAgICAgICAgZi5QaHlzaWNzLmFkanVzdFRyYW5zZm9ybXMoaGllcmFyY2h5KTtcclxuXHJcbiAgICAgICAgLy9mLlBoeXNpY3Muc2V0dGluZ3MuZGVidWdEcmF3ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy9JbXBvcnRhbnQgc3RhcnQgdGhlIGdhbWUgbG9vcCBhZnRlciBzdGFydGluZyBwaHlzaWNzLCBzbyBwaHlzaWNzIGNhbiB1c2UgdGhlIGN1cnJlbnQgdHJhbnNmb3JtIGJlZm9yZSBpdCdzIGZpcnN0IGl0ZXJhdGlvblxyXG4gICAgICAgIGYuTG9vcC5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlQuTE9PUF9GUkFNRSwgdXBkYXRlKTsgLy9UZWxsIHRoZSBnYW1lIGxvb3AgdG8gY2FsbCB0aGUgdXBkYXRlIGZ1bmN0aW9uIG9uIGVhY2ggZnJhbWVcclxuICAgICAgICBmLkxvb3Auc3RhcnQoKTsgLy9TdGFyZCB0aGUgZ2FtZSBsb29wXHJcbiAgICB9XHJcblxyXG4gICAgLy9GdW5jdGlvbiB0byBhbmltYXRlL3VwZGF0ZSB0aGUgRnVkZ2Ugc2NlbmUsIGNvbW1vbmx5IGtub3duIGFzIGdhbWVsb29wXHJcbiAgICBmdW5jdGlvbiB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgLy9QSFlTSUNTIC0gU2ltdWxhdGUgcGh5c2ljYWwgY2hhbmdlcyBlYWNoIGZyYW1lLCBwYXJhbWV0ZXIgdG8gc2V0IHRpbWUgYmV0d2VlbiBmcmFtZXNcclxuICAgICAgICBmLlBoeXNpY3Muc2ltdWxhdGUoZi5Mb29wLnRpbWVGcmFtZVJlYWwgLyAxMDAwKTtcclxuXHJcbiAgICAgICAgLy9QbGF5ZXIgY29uc3RhbnQgdXBkYXRlIGZ1bmN0aW9ucyBkbyBpdCBhZnRlciBwaHlzaWNzIGNhbGN1bGF0aW9uIGlzIGJlc3QgcHJhY3RpY2VcclxuICAgICAgICBjbXBDYW1lcmEubXR4UGl2b3QubG9va0F0KHBsYXllci5tdHhXb3JsZC50cmFuc2xhdGlvbik7XHJcbiAgICAgICAgcGxheWVySXNHcm91bmRlZFJheWNhc3QoKTtcclxuICAgICAgICBwbGF5ZXJNb3ZlbWVudChmLkxvb3AudGltZUZyYW1lUmVhbCAvIDEwMDApO1xyXG5cclxuICAgICAgICB2aWV3UG9ydC5kcmF3KCk7IC8vIERyYXcgdGhlIGN1cnJlbnQgRnVkZ2UgU2NlbmUgdG8gdGhlIGNhbnZhc1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZ1bmN0aW9uIHRvIHF1aWNrbHkgY3JlYXRlIGEgbm9kZSB3aXRoIG11bHRpcGxlIG5lZWRlZCBGdWRnZUNvbXBvbmVudHMsIGluY2x1ZGluZyBhIHBoeXNpY3MgY29tcG9uZW50XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVDb21wbGV0ZU5vZGUoX25hbWU6IHN0cmluZywgX21hdGVyaWFsOiBmLk1hdGVyaWFsLCBfbWVzaDogZi5NZXNoLCBfbWFzczogbnVtYmVyLCBfcGh5c2ljc1R5cGU6IGYuQk9EWV9UWVBFLCBfZ3JvdXA6IGYuQ09MTElTSU9OX0dST1VQID0gZi5DT0xMSVNJT05fR1JPVVAuREVGQVVMVCwgX2NvbFR5cGU6IGYuQ09MTElERVJfVFlQRSA9IGYuQ09MTElERVJfVFlQRS5DVUJFLCBfY29udmV4TWVzaDogRmxvYXQzMkFycmF5ID0gbnVsbCk6IGYuTm9kZSB7XHJcbiAgICAgICAgbGV0IG5vZGU6IGYuTm9kZSA9IG5ldyBmLk5vZGUoX25hbWUpO1xyXG4gICAgICAgIGxldCBjbXBNZXNoOiBmLkNvbXBvbmVudE1lc2ggPSBuZXcgZi5Db21wb25lbnRNZXNoKF9tZXNoKTtcclxuICAgICAgICBsZXQgY21wTWF0ZXJpYWw6IGYuQ29tcG9uZW50TWF0ZXJpYWwgPSBuZXcgZi5Db21wb25lbnRNYXRlcmlhbChfbWF0ZXJpYWwpO1xyXG5cclxuICAgICAgICBsZXQgY21wVHJhbnNmb3JtOiBmLkNvbXBvbmVudFRyYW5zZm9ybSA9IG5ldyBmLkNvbXBvbmVudFRyYW5zZm9ybSgpO1xyXG4gICAgICAgIGxldCBjbXBSaWdpZGJvZHk6IGYuQ29tcG9uZW50UmlnaWRib2R5ID0gbmV3IGYuQ29tcG9uZW50UmlnaWRib2R5KF9tYXNzLCBfcGh5c2ljc1R5cGUsIF9jb2xUeXBlLCBfZ3JvdXAsIG51bGwsIF9jb252ZXhNZXNoKTsgLy9hZGQgYSBGbG9hdDMyIEFycmF5IG9mIHBvaW50cyB0byB0aGUgcmIgY29uc3RydWN0b3IgdG8gY3JlYXRlIGEgY29udmV4IGNvbGxpZGVyXHJcbiAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoY21wTWVzaCk7XHJcbiAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoY21wTWF0ZXJpYWwpO1xyXG4gICAgICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcFRyYW5zZm9ybSk7XHJcbiAgICAgICAgbm9kZS5hZGRDb21wb25lbnQoY21wUmlnaWRib2R5KTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVDb252ZXhDb21wb3VudENvbGxpZGVyKCk6IHZvaWQge1xyXG4gICAgICAgIC8vU3RlcCAxIC0gZGVmaW5lIHBvaW50cyB0aGF0IGNvbnN0cnVjdCB0aGUgc2hhcGUgeW91IHdhbnQgZm9yIHlvdXIgY29sbGlkZXIgLSBvcmRlciBpcyBpbXBvcnRhbnQgc28gdGhpbmsgYWJvdXQgd2hhdCBwb2ludCBjb21lcyB3aGVuIGluIHlvdXIgc2hhcGVcclxuICAgICAgICBsZXQgY29sbGlkZXJWZXJ0aWNlczogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheVxyXG4gICAgICAgICAgICAoW1xyXG4gICAgICAgICAgICAgICAgMSwgLTEsIDEsICAgICAvL1N0YXJ0IG9mIHdpdGggYSBjdWJlIHBvaW50XHJcbiAgICAgICAgICAgICAgICAwLCAtMiwgMCwgICAgIC8vZ28gdG8gYSBweXJhbWlkIHBvaW50XHJcbiAgICAgICAgICAgICAgICAxLCAxLCAxLCAgICAgIC8vYmFjayB0byB0aGUgY3ViZVxyXG4gICAgICAgICAgICAgICAgLSAxLCAxLCAxLCAgICAvL2Fsb25nIHRoZSBjdWJlXHJcbiAgICAgICAgICAgICAgICAtIDEsIC0xLCAxLCAgIC8vYWxvbmcgdGhlIGN1YmUgb24gYSBkaWZmZXJlbnQgc2lkZVxyXG4gICAgICAgICAgICAgICAgLTIsIDAsIDAsICAgICAvL2dvIHRvIGFub3RoZXIgcHlyYW1pZCBwb2ludFxyXG4gICAgICAgICAgICAgICAgMSwgMSwgLTEsICAgICAvL2JhY2sgb24gdGhlIGN1YmVcclxuICAgICAgICAgICAgICAgIC0gMSwgMSwgLTEsICAgLy9hbmQgc28gb24uLiBpdCBpcyBub3QgaW1wb3J0YW50IHRoYXQgYWxsIHBvaW50cyBhcmUgaW4gYSBjb3JyZWN0IG9yZGVyLFxyXG4gICAgICAgICAgICAgICAgLSAxLCAtMSwgLTEsICAvL2J1dCBzaW5jZSB0aGUgcGh5c2ljcyBlbmdpbmUgaXMgdHJ5aW5nIHRvIGNvbnN0cnVjdCBhIHNoYXBlIG91dCBvZiB5b3VyIHBvaW50cyB0aGF0IGlzIGNsb3NlZCBvZiBpdCBzaG91bGQgbWFrZSBzb21lIHNlbnNlXHJcbiAgICAgICAgICAgICAgICAwLCAwLCAtMixcclxuICAgICAgICAgICAgICAgIDEsIC0xLCAtMSxcclxuICAgICAgICAgICAgICAgIDIsIDAsIDAsXHJcbiAgICAgICAgICAgICAgICAwLCAyLCAwLFxyXG4gICAgICAgICAgICAgICAgMCwgMCwgMlxyXG4gICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgLy9TdGVwIDIgLSBkZWZpbmUgdGhlIHZpc3VhbCBub2RlcyB0aGF0IGFyZSBwYXJ0IG9mIHlvdXIgd2hvbGUgc2hhcGUsIHNpbmNlIHdlIGhhdmUgYSBjdWJlIHRoYXQgaXMgc3Vyb3VuZGVkIGJ5IHB5cmFtaWRzOlxyXG4gICAgICAgIC8vTWFpbiBTaGFwZVxyXG4gICAgICAgIGJvZGllc1s1XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkNvbXBvdW5kXCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hDdWJlKCksIDEsIGYuQk9EWV9UWVBFLkRZTkFNSUMsIGYuQ09MTElTSU9OX0dST1VQLkRFRkFVTFQsIGYuQ09MTElERVJfVFlQRS5DT05WRVgsIGNvbGxpZGVyVmVydGljZXMpO1xyXG4gICAgICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbNV0pO1xyXG4gICAgICAgIGJvZGllc1s1XS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygyLjUsIDQsIDMuNSkpO1xyXG4gICAgICAgIGJvZGllc1s1XS5tdHhMb2NhbC5yb3RhdGVYKDI3KTtcclxuICAgICAgICBib2RpZXNbNV0ubXR4TG9jYWwucm90YXRlWSgzMik7XHJcbiAgICAgICAgLy9Db21wb25lbnRzIC0gUmVtb3ZpbmcgdGhlIFBoeXNpY3MgY29tcG9uZW50IG9uIGVhY2ggb2YgdGhlbSBzaW5jZSB0aGV5IGFsbCBidWlsZCBvbmUgc2hhcGUgb24gdGhlIG1haW4gTm9kZSBvbmx5IHRoZSB2aXN1YWwgbm9kZXMgbmVlZCB0byBiZSB0aGVyZVxyXG4gICAgICAgIGJvZGllc1s2XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkNvbXBvdW5kVXBwZXJcIiwgbWF0ZXJpYWxDb252ZXhTaGFwZSwgbmV3IGYuTWVzaFB5cmFtaWQoKSwgMSwgZi5CT0RZX1RZUEUuRFlOQU1JQywgZi5DT0xMSVNJT05fR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLlBZUkFNSUQpO1xyXG4gICAgICAgIGJvZGllc1s2XS5yZW1vdmVDb21wb25lbnQoYm9kaWVzWzZdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkpO1xyXG4gICAgICAgIGJvZGllc1s2XS5tdHhMb2NhbC50cmFuc2xhdGVZKDAuNSk7XHJcbiAgICAgICAgYm9kaWVzWzZdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICAgICAgYm9kaWVzWzVdLmFwcGVuZENoaWxkKGJvZGllc1s2XSk7IC8vYXBwZW5kaW5nIHRoZSBOb2RlIG5vdCB0byB0aGUgbWFpbiBoaWVyYXJjaHkgYnV0IHRoZSBOb2RlIGl0IGlzIHBhcnQgb2ZcclxuICAgICAgICBib2RpZXNbN10gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJDb21wb3VuZExvd2VyXCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hQeXJhbWlkKCksIDEsIGYuQk9EWV9UWVBFLkRZTkFNSUMsIGYuQ09MTElTSU9OX0dST1VQLkRFRkFVTFQsIGYuQ09MTElERVJfVFlQRS5QWVJBTUlEKTtcclxuICAgICAgICBib2RpZXNbN10ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1s3XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpKTtcclxuICAgICAgICBib2RpZXNbN10ubXR4TG9jYWwucm90YXRlWCgxODApO1xyXG4gICAgICAgIGJvZGllc1s3XS5tdHhMb2NhbC50cmFuc2xhdGVZKDAuNSk7XHJcbiAgICAgICAgYm9kaWVzWzddLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICAgICAgYm9kaWVzWzVdLmFwcGVuZENoaWxkKGJvZGllc1s3XSk7XHJcbiAgICAgICAgYm9kaWVzWzhdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQ29tcG91bmRMZWZ0XCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hQeXJhbWlkKCksIDEsIGYuQk9EWV9UWVBFLkRZTkFNSUMsIGYuQ09MTElTSU9OX0dST1VQLkRFRkFVTFQsIGYuQ09MTElERVJfVFlQRS5QWVJBTUlEKTtcclxuICAgICAgICBib2RpZXNbOF0ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1s4XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpKTtcclxuICAgICAgICBib2RpZXNbOF0ubXR4TG9jYWwucm90YXRlWig5MCk7XHJcbiAgICAgICAgYm9kaWVzWzhdLm10eExvY2FsLnRyYW5zbGF0ZVkoMC41KTtcclxuICAgICAgICBib2RpZXNbOF0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxLCAwLjUsIDEpKTtcclxuICAgICAgICBib2RpZXNbNV0uYXBwZW5kQ2hpbGQoYm9kaWVzWzhdKTtcclxuICAgICAgICBib2RpZXNbOV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJDb21wb3VuZFJpZ2h0XCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hQeXJhbWlkKCksIDEsIGYuQk9EWV9UWVBFLkRZTkFNSUMsIGYuQ09MTElTSU9OX0dST1VQLkRFRkFVTFQsIGYuQ09MTElERVJfVFlQRS5QWVJBTUlEKTtcclxuICAgICAgICBib2RpZXNbOV0ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1s5XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpKTtcclxuICAgICAgICBib2RpZXNbOV0ubXR4TG9jYWwucm90YXRlWigtOTApO1xyXG4gICAgICAgIGJvZGllc1s5XS5tdHhMb2NhbC50cmFuc2xhdGVZKDAuNSk7XHJcbiAgICAgICAgYm9kaWVzWzldLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICAgICAgYm9kaWVzWzVdLmFwcGVuZENoaWxkKGJvZGllc1s5XSk7XHJcbiAgICAgICAgYm9kaWVzWzEwXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkNvbXBvdW5kRnJvbnRcIiwgbWF0ZXJpYWxDb252ZXhTaGFwZSwgbmV3IGYuTWVzaFB5cmFtaWQoKSwgMSwgZi5CT0RZX1RZUEUuRFlOQU1JQywgZi5DT0xMSVNJT05fR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLlBZUkFNSUQpO1xyXG4gICAgICAgIGJvZGllc1sxMF0ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1sxMF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KSk7XHJcbiAgICAgICAgYm9kaWVzWzEwXS5tdHhMb2NhbC5yb3RhdGVYKDkwKTtcclxuICAgICAgICBib2RpZXNbMTBdLm10eExvY2FsLnRyYW5zbGF0ZVkoMC41KTtcclxuICAgICAgICBib2RpZXNbMTBdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICAgICAgYm9kaWVzWzVdLmFwcGVuZENoaWxkKGJvZGllc1sxMF0pO1xyXG4gICAgICAgIGJvZGllc1sxMV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJDb21wb3VuZEJhY2tcIiwgbWF0ZXJpYWxDb252ZXhTaGFwZSwgbmV3IGYuTWVzaFB5cmFtaWQoKSwgMSwgZi5CT0RZX1RZUEUuRFlOQU1JQywgZi5DT0xMSVNJT05fR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLlBZUkFNSUQpO1xyXG4gICAgICAgIGJvZGllc1sxMV0ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1sxMV0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KSk7XHJcbiAgICAgICAgYm9kaWVzWzExXS5tdHhMb2NhbC5yb3RhdGVYKC05MCk7XHJcbiAgICAgICAgYm9kaWVzWzExXS5tdHhMb2NhbC50cmFuc2xhdGVZKDAuNSk7XHJcbiAgICAgICAgYm9kaWVzWzExXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDEsIDAuNSwgMSkpO1xyXG4gICAgICAgIGJvZGllc1s1XS5hcHBlbmRDaGlsZChib2RpZXNbMTFdKTtcclxuICAgICAgICBib2RpZXNbNV0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5yZXN0aXR1dGlvbiA9IDM7XHJcbiAgICB9XHJcblxyXG4gICAgLy9TZXR0aW5nIHVwIGEgcGh5c2ljYWwgcGxheWVyIHdoaWNoIGlzIG5vdGhpZ24gYnV0IGEgY3ViZSBidXQgYWJsZSB0byBwbGF0Zm9ybSBpbiBvdXIgbGl0dGxlIHdvcmxkIGFuZCByZWFjdGluZyB0byBzdHVmZlxyXG4gICAgZnVuY3Rpb24gc2V0dGluZ1VwQVBsYXllcigpOiB2b2lkIHtcclxuICAgICAgICBwbGF5ZXIgPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJQbGF5ZXJcIiwgbWF0ZXJpYWxQbGF5ZXIsIG5ldyBmLk1lc2hDdWJlKCksIHBsYXllcldlaWdodCwgZi5CT0RZX1RZUEUuRFlOQU1JQywgZi5DT0xMSVNJT05fR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLkNBUFNVTEUpO1xyXG4gICAgICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChwbGF5ZXIpO1xyXG4gICAgICAgIHBsYXllckJvZHkgPSBwbGF5ZXIuZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KTtcclxuICAgICAgICBwbGF5ZXIubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjUsIDEuOCwgMC4zKSk7XHJcbiAgICAgICAgcGxheWVyLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKDIuNSwgNCwgMy41KSk7XHJcbiAgICAgICAgcGxheWVyQm9keS5lZmZlY3RSb3RhdGlvbiA9IG5ldyBmLlZlY3RvcjMoMCwgMCwgMCk7IC8vUGh5c2ljcyBub3QgdHVybiBvdXIgcGxheWVyIHdlIGRvIGl0IG91cnNlbHZlc1xyXG4gICAgICAgIC8vc2luY2Ugb3VyIGNhcHN1bGUgY29sbGlkZXIgaXMgYSBib3ggd2l0aCBoYWxmIHNwaGVyZXMgb24gdG9wIGFuZCBib3R0b20gaXQncyBhIGxpdHRsZSBoaWdoZXIgdGhhbiBvdXIgYm94IG1lc2gsIHdlIG5lZWQgdG8gc2NhbGUgdGhlIHBpdm90IG9uIHRoZSByYiBpdHNlbGZcclxuICAgICAgICBwbGF5ZXJCb2R5Lm10eFBpdm90LnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC44NSwgMSkpO1xyXG4gICAgICAgIHBsYXllckJvZHkuZnJpY3Rpb24gPSAwLjAxOyAvL2xvd2VyIHRoZSBmcmljdGlvbiB0byBtYWtlIGl0IGVhc2llciBjbGltYmluZyBzdGFpcnMgLSB0aGlzIGlzIG9ubHkgbmVlZGVkIGluIHRoaXMga2luZCBvZiBwbGF5ZXIgc3RydWN0dXJlXHJcblxyXG4gICAgICAgIC8vYWRkaWduIGEgbm9zZSB0byBvdXIgcGxheWVyIHNvIHdlIGtub3cgd2hhdHMgdGhlIGZvcndhcmQgZGlyZWN0aW9uIC0gYnV0IGl0J3Mgbm90IGEgcGh5c2ljcyBvYmplY3RcclxuICAgICAgICBsZXQgcGxheWVyTm9zZTogZi5Ob2RlID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiUGxheWVyTm9zZVwiLCBtYXRlcmlhbFBsYXllciwgbmV3IGYuTWVzaEN1YmUoKSwgcGxheWVyV2VpZ2h0LCBmLkJPRFlfVFlQRS5EWU5BTUlDKTtcclxuICAgICAgICBwbGF5ZXJOb3NlLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKDAsIDAuMiwgMC40KSk7XHJcbiAgICAgICAgcGxheWVyTm9zZS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMSwgMC4yLCAxLjUpKTtcclxuICAgICAgICBwbGF5ZXJOb3NlLnJlbW92ZUNvbXBvbmVudChwbGF5ZXJOb3NlLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkpO1xyXG4gICAgICAgIHBsYXllci5hZGRDaGlsZChwbGF5ZXJOb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICAvL0NoZWNrIGlmIG91ciBwaHlzaWNhbCBwbGF5ZXIgaXMgaGl0dGluZyBhIHN1cmZhY2Ugd2l0aCBoaXMgZmVlZCwgaWYgeW8gbGV0IGhpbSBiZSBhYmxlIHRvIGp1bXBcclxuICAgIGZ1bmN0aW9uIHBsYXllcklzR3JvdW5kZWRSYXljYXN0KCk6IHZvaWQge1xyXG4gICAgICAgIGxldCBoaXRJbmZvOiBmLlJheUhpdEluZm87XHJcbiAgICAgICAgaGl0SW5mbyA9IGYuUGh5c2ljcy5yYXljYXN0KHBsYXllckJvZHkuZ2V0UG9zaXRpb24oKSwgbmV3IGYuVmVjdG9yMygwLCAtMSwgMCksIDEuMSk7XHJcbiAgICAgICAgaWYgKGhpdEluZm8uaGl0KSB7XHJcbiAgICAgICAgICAgIGlzR3JvdW5kZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlzR3JvdW5kZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIEV2ZW50IEZ1bmN0aW9uIGhhbmRsaW5nIGtleWJvYXJkIGlucHV0XHJcbiAgICBmdW5jdGlvbiBobmRLZXkoX2V2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblxyXG4gICAgICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuQSkge1xyXG4gICAgICAgICAgICB5VHVybiA9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuVykge1xyXG4gICAgICAgICAgICBmb3J3YXJkTW92ZW1lbnQgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLlMpIHtcclxuICAgICAgICAgICAgZm9yd2FyZE1vdmVtZW50ID0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuRCkge1xyXG4gICAgICAgICAgICB5VHVybiA9IC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLlNQQUNFKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0dyb3VuZGVkKSAvL0xldCB0aGUgcGxheWVyIG9ubHkganVtcGluZyB3aGVuIG9uIHRoZSBncm91bmRcclxuICAgICAgICAgICAgICAgIHBsYXllckJvZHkuYXBwbHlMaW5lYXJJbXB1bHNlKG5ldyBmLlZlY3RvcjMoMCwgcGxheWVySnVtcEZvcmNlLCAwKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLlQpIHtcclxuICAgICAgICAgICAgdmlld1BvcnQucGh5c2ljc0RlYnVnTW9kZSA9IHZpZXdQb3J0LnBoeXNpY3NEZWJ1Z01vZGUgPT0gZi5QSFlTSUNTX0RFQlVHTU9ERS5KT0lOVFNfQU5EX0NPTExJREVSID8gZi5QSFlTSUNTX0RFQlVHTU9ERS5QSFlTSUNfT0JKRUNUU19PTkxZIDogZi5QSFlTSUNTX0RFQlVHTU9ERS5KT0lOVFNfQU5EX0NPTExJREVSO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL1doZW4gdGhlIGtleSBpcyB1cCB3ZSB3YW50IHRvIHN0b3AgbW92ZW1lbnRcclxuICAgIGZ1bmN0aW9uIGhuZEtleVVwKF9ldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuQSkge1xyXG4gICAgICAgICAgICB5VHVybiA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuVykge1xyXG4gICAgICAgICAgICBmb3J3YXJkTW92ZW1lbnQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLlMpIHtcclxuICAgICAgICAgICAgZm9yd2FyZE1vdmVtZW50ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF9ldmVudC5jb2RlID09IGYuS0VZQk9BUkRfQ09ERS5EKSB7XHJcbiAgICAgICAgICAgIHlUdXJuID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9BY3R1YWxseSBtb3ZpbmcgdGhlIHBsYXllclxyXG4gICAgZnVuY3Rpb24gcGxheWVyTW92ZW1lbnQoX2RlbHRhVGltZTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IHBsYXllckZvcndhcmQ6IGYuVmVjdG9yMztcclxuICAgICAgICBwbGF5ZXJGb3J3YXJkID0gZi5WZWN0b3IzLlooKTtcclxuICAgICAgICBwbGF5ZXJGb3J3YXJkLnRyYW5zZm9ybShwbGF5ZXIubXR4V29ybGQsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgLy9Zb3UgY2FuIHJvdGF0ZSBhIGJvZHkgbGlrZSB5b3Ugd291bGQgcm90YXRlIGEgdHJhbnNmb3JtLCBpbmNyZW1lbnRhbCBidXQga2VlcCBpbiBtaW5kLCBub3JtYWxseSB3ZSB1c2UgZm9yY2VzIGluIHBoeXNpY3MsXHJcbiAgICAgICAgLy90aGlzIGlzIGp1c3QgYSBmZWF0dXJlIHRvIG1ha2UgaXQgZWFzaWVyIHRvIGNyZWF0ZSBwbGF5ZXIgY2hhcmFjdGVyc1xyXG4gICAgICAgIHBsYXllckJvZHkucm90YXRlQm9keShuZXcgZi5WZWN0b3IzKDAsIHlUdXJuICogdHVybmluZ3NwZWVkICogX2RlbHRhVGltZSwgMCkpO1xyXG5cclxuICAgICAgICBsZXQgbW92ZW1lbnRWZWxvY2l0eTogZi5WZWN0b3IzID0gbmV3IGYuVmVjdG9yMygpO1xyXG4gICAgICAgIG1vdmVtZW50VmVsb2NpdHkueCA9IHBsYXllckZvcndhcmQueCAqIGZvcndhcmRNb3ZlbWVudCAqIG1vdmVtZW50c3BlZWQ7XHJcbiAgICAgICAgbW92ZW1lbnRWZWxvY2l0eS55ID0gcGxheWVyQm9keS5nZXRWZWxvY2l0eSgpLnk7XHJcbiAgICAgICAgbW92ZW1lbnRWZWxvY2l0eS56ID0gcGxheWVyRm9yd2FyZC56ICogZm9yd2FyZE1vdmVtZW50ICogbW92ZW1lbnRzcGVlZDtcclxuICAgICAgICBwbGF5ZXJCb2R5LnNldFZlbG9jaXR5KG1vdmVtZW50VmVsb2NpdHkpO1xyXG4gICAgICAgIC8vU2luY2Ugd2UgYXJlIHJlc2V0dGluZyB0aGUgdmVsb2NpdHkgd2hlbiByZWxlYXNpbmcgdGhlIGtleSB0byBoYXZlIGEgaW5zdGFudCBzdG9wIG91ciBwbGF5ZXIgaXMgbm90IGFibGUgdG8gc2xpZGUuIFdlIHdvdWxkIGhhdmVcclxuICAgICAgICAvL3RoZSBwbGF5ZXIgZmFkZSBvdXQgaGF2ZSBzbGlkaW5nIGluc3RlYWQgeW91IG5lZWQgdG8gY29uZmlndXJlIHRoYXQgZm9yIHlvdXIgb3duIGdhbWUuXHJcbiAgICB9XHJcblxyXG59Il19