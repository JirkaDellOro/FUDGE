<!DOCTYPE html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="../../TestInstructions.css">
  <script src="../../dialog-polyfill.min.js"></script>
  <script src="../../TestInstructions.js"></script>
  <title>Graph</title>

  <script type="text/javascript" src="../../../Core/Build/FudgeCore.js"></script>
  <script type="text/javascript" src="../../../Aid/Build/FudgeAid.js"></script>
  <script type="text/javascript" src="../../../Miscellaneous/TestCandidates/Serialization/Compare/Compare.js"></script>
  <!-- toDo: compare.js move to the test folder  -->
  <script type="text/javascript" src="AnimateSatellite.js"></script>
  <script type="text/javascript" src="Graph.js"></script>

  <style type="text/css">
    html,
    body {
      padding: 0;
      margin: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    canvas {
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>

<body>
  <script>
    TestInstructions.display({
      Name: "Graph, GraphInstance, Synchronisation",
      Test: [
        "The conversion of a complex node to a graph and the creation of multiple instances of that graph and their synchronisation on mutation"
      ],
      Setup: [
        "Generates a node with an orange pyramid and a child node with a small blue cube.",
        "A script component attached to the blue cube rotates it around the parent and itself.",
        "Registers the node as graph and creates a set of instances of that graph distributed equally in space.",
        "The properties of the instance in the front low left corner are manipulated",
        "- the rotation via mutation which gets synchronized via the original graph to all instances.",
        "- the color directly, not via mutation, which does not trigger mutation events and thus won't synchronize.",
        "The instance to the right of it has a ComponentGraphFilter attached which disables synchronization."
      ],
      // Act: [
      //   "there are no actions"
      // ],
      Observe: [
        "The scene, the animation and the output in the console",
      ],
      /* Control: [
          "no control"
      ], */
      Expect: [
        "25 identical instances of the graph appear in a 5x5x5 constellation.",
        "Each cube has its own rotation and translation.",
        "Most instances of the graph behave the same, with individual state of the satellite cube.",
        "The pyramid in the lower left back corner changes color.",
        "The pyramid next to it does not rotate.",
      ]
    });
  </script>
  <canvas></canvas>
</body>